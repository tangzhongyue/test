"use strict";var Hke=Object.create;var _I=Object.defineProperty;var Wke=Object.getOwnPropertyDescriptor;var Gke=Object.getOwnPropertyNames;var $ke=Object.getPrototypeOf,Yke=Object.prototype.hasOwnProperty;var Kke=(e,t)=>()=>(e&&(t=e(e=0)),t);var x=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),mP=(e,t)=>{for(var r in t)_I(e,r,{get:t[r],enumerable:!0})},M$=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Gke(t))!Yke.call(e,i)&&i!==r&&_I(e,i,{get:()=>t[i],enumerable:!(n=Wke(t,i))||n.enumerable});return e};var V=(e,t,r)=>(r=e!=null?Hke($ke(e)):{},M$(t||!e||!e.__esModule?_I(r,"default",{value:e,enumerable:!0}):r,e)),yP=e=>M$(_I({},"__esModule",{value:!0}),e);var xd=x((Ovt,G$)=>{"use strict";function tFe(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}G$.exports=tFe});var EP=x((qvt,$$)=>{"use strict";var rFe=typeof global=="object"&&global&&global.Object===Object&&global;$$.exports=rFe});var sl=x((Vvt,Y$)=>{"use strict";var nFe=EP(),iFe=typeof self=="object"&&self&&self.Object===Object&&self,sFe=nFe||iFe||Function("return this")();Y$.exports=sFe});var z$=x((Hvt,K$)=>{"use strict";var oFe=sl(),aFe=function(){return oFe.Date.now()};K$.exports=aFe});var j$=x((Wvt,J$)=>{"use strict";var lFe=/\s/;function cFe(e){for(var t=e.length;t--&&lFe.test(e.charAt(t)););return t}J$.exports=cFe});var X$=x((Gvt,Z$)=>{"use strict";var uFe=j$(),dFe=/^\s+/;function fFe(e){return e&&e.slice(0,uFe(e)+1).replace(dFe,"")}Z$.exports=fFe});var Uv=x(($vt,eY)=>{"use strict";var hFe=sl(),gFe=hFe.Symbol;eY.exports=gFe});var iY=x((Yvt,nY)=>{"use strict";var tY=Uv(),rY=Object.prototype,pFe=rY.hasOwnProperty,AFe=rY.toString,Ov=tY?tY.toStringTag:void 0;function mFe(e){var t=pFe.call(e,Ov),r=e[Ov];try{e[Ov]=void 0;var n=!0}catch{}var i=AFe.call(e);return n&&(t?e[Ov]=r:delete e[Ov]),i}nY.exports=mFe});var oY=x((Kvt,sY)=>{"use strict";var yFe=Object.prototype,CFe=yFe.toString;function vFe(e){return CFe.call(e)}sY.exports=vFe});var cm=x((zvt,cY)=>{"use strict";var aY=Uv(),EFe=iY(),bFe=oY(),xFe="[object Null]",_Fe="[object Undefined]",lY=aY?aY.toStringTag:void 0;function wFe(e){return e==null?e===void 0?_Fe:xFe:lY&&lY in Object(e)?EFe(e):bFe(e)}cY.exports=wFe});var qf=x((Jvt,uY)=>{"use strict";function IFe(e){return e!=null&&typeof e=="object"}uY.exports=IFe});var fY=x((jvt,dY)=>{"use strict";var SFe=cm(),BFe=qf(),DFe="[object Symbol]";function TFe(e){return typeof e=="symbol"||BFe(e)&&SFe(e)==DFe}dY.exports=TFe});var AY=x((Zvt,pY)=>{"use strict";var RFe=X$(),hY=xd(),kFe=fY(),gY=NaN,FFe=/^[-+]0x[0-9a-f]+$/i,MFe=/^0b[01]+$/i,QFe=/^0o[0-7]+$/i,NFe=parseInt;function PFe(e){if(typeof e=="number")return e;if(kFe(e))return gY;if(hY(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=hY(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=RFe(e);var r=MFe.test(e);return r||QFe.test(e)?NFe(e.slice(2),r?2:8):FFe.test(e)?gY:+e}pY.exports=PFe});var um=x((Xvt,yY)=>{"use strict";var LFe=xd(),bP=z$(),mY=AY(),UFe="Expected a function",OFe=Math.max,qFe=Math.min;function VFe(e,t,r){var n,i,s,o,a,l,c=0,u=!1,f=!1,p=!0;if(typeof e!="function")throw new TypeError(UFe);t=mY(t)||0,LFe(r)&&(u=!!r.leading,f="maxWait"in r,s=f?OFe(mY(r.maxWait)||0,t):s,p="trailing"in r?!!r.trailing:p);function g(Q){var W=n,Z=i;return n=i=void 0,c=Q,o=e.apply(Z,W),o}function A(Q){return c=Q,a=setTimeout(v,t),u?g(Q):o}function y(Q){var W=Q-l,Z=Q-c,$=t-W;return f?qFe($,s-Z):$}function C(Q){var W=Q-l,Z=Q-c;return l===void 0||W>=t||W<0||f&&Z>=s}function v(){var Q=bP();if(C(Q))return b(Q);a=setTimeout(v,y(Q))}function b(Q){return a=void 0,p&&n?g(Q):(n=i=void 0,o)}function w(){a!==void 0&&clearTimeout(a),c=0,n=l=i=a=void 0}function B(){return a===void 0?o:b(bP())}function F(){var Q=bP(),W=C(Q);if(n=arguments,i=this,l=Q,W){if(a===void 0)return A(l);if(f)return clearTimeout(a),a=setTimeout(v,t),g(l)}return a===void 0&&(a=setTimeout(v,t)),o}return F.cancel=w,F.flush=B,F}yY.exports=VFe});var dm=x((eEt,CY)=>{"use strict";var HFe=um(),WFe=xd(),GFe="Expected a function";function $Fe(e,t,r){var n=!0,i=!0;if(typeof e!="function")throw new TypeError(GFe);return WFe(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),HFe(e,t,{leading:n,maxWait:t,trailing:i})}CY.exports=$Fe});var vs=x((xm,rE)=>{"use strict";(function(){var e,t="4.17.21",r=200,n="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",i="Expected a function",s="Invalid `variable` option passed into `_.template`",o="__lodash_hash_undefined__",a=500,l="__lodash_placeholder__",c=1,u=2,f=4,p=1,g=2,A=1,y=2,C=4,v=8,b=16,w=32,B=64,F=128,Q=256,W=512,Z=30,$="...",ee=800,U=16,ge=1,Se=2,N=3,se=1/0,z=9007199254740991,ne=17976931348623157e292,Ke=NaN,It=4294967295,ye=It-1,Lt=It>>>1,Zt=[["ary",F],["bind",A],["bindKey",y],["curry",v],["curryRight",b],["flip",W],["partial",w],["partialRight",B],["rearg",Q]],Rt="[object Arguments]",de="[object Array]",kr="[object AsyncFunction]",ir="[object Boolean]",Lr="[object Date]",He="[object DOMException]",sn="[object Error]",Ur="[object Function]",fr="[object GeneratorFunction]",be="[object Map]",Fr="[object Number]",fe="[object Null]",Ee="[object Object]",bt="[object Promise]",ln="[object Proxy]",_n="[object RegExp]",_i="[object Set]",eo="[object String]",id="[object Symbol]",Hc="[object Undefined]",sr="[object WeakMap]",e2="[object WeakSet]",Yi="[object ArrayBuffer]",ca="[object DataView]",sd="[object Float32Array]",od="[object Float64Array]",tv="[object Int8Array]",ua="[object Int16Array]",rv="[object Int32Array]",nv="[object Uint8Array]",Cr="[object Uint8ClampedArray]",St="[object Uint16Array]",wn="[object Uint32Array]",za=/\b__p \+= '';/g,Ja=/\b(__p \+=) '' \+/g,wg=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Yl=/&(?:amp|lt|gt|quot|#39);/g,vt=/[&<>"']/g,UA=RegExp(Yl.source),iv=RegExp(vt.source),fw=/<%-([\s\S]+?)%>/g,OA=/<%([\s\S]+?)%>/g,If=/<%=([\s\S]+?)%>/g,qA=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,t2=/^\w*$/,sv=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Mi=/[\\^$.*+?()[\]{}|]/g,VA=RegExp(Mi.source),ov=/^\s+/,r2=/\s/,ad=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,je=/\{\n\/\* \[wrapped with (.+)\] \*/,Xt=/,? & /,Wc=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ig=/[()=,{}\[\]\/\s]/,Gc=/\\(\\)?/g,av=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,hw=/\w*$/,n2=/^[-+]0x[0-9a-f]+$/i,gw=/^0b[01]+$/i,i2=/^\[object .+?Constructor\]$/,s2=/^0o[0-7]+$/i,o2=/^(?:0|[1-9]\d*)$/,a2=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,HA=/($^)/,l2=/['\n\r\u2028\u2029\\]/g,WA="\\ud800-\\udfff",c2="\\u0300-\\u036f",u2="\\ufe20-\\ufe2f",d2="\\u20d0-\\u20ff",pw=c2+u2+d2,da="\\u2700-\\u27bf",Aw="a-z\\xdf-\\xf6\\xf8-\\xff",mw="\\xac\\xb1\\xd7\\xf7",lv="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",f2="\\u2000-\\u206f",h2=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",yw="A-Z\\xc0-\\xd6\\xd8-\\xde",Kl="\\ufe0e\\ufe0f",Cw=mw+lv+f2+h2,cv="['\u2019]",uv="["+WA+"]",vw="["+Cw+"]",to="["+pw+"]",GA="\\d+",g2="["+da+"]",dv="["+Aw+"]",Sg="[^"+WA+Cw+GA+da+Aw+yw+"]",Sf="\\ud83c[\\udffb-\\udfff]",$A="(?:"+to+"|"+Sf+")",YA="[^"+WA+"]",ja="(?:\\ud83c[\\udde6-\\uddff]){2}",Bf="[\\ud800-\\udbff][\\udc00-\\udfff]",ld="["+yw+"]",Ew="\\u200d",bw="(?:"+dv+"|"+Sg+")",cd="(?:"+ld+"|"+Sg+")",xw="(?:"+cv+"(?:d|ll|m|re|s|t|ve))?",_w="(?:"+cv+"(?:D|LL|M|RE|S|T|VE))?",ww=$A+"?",Iw="["+Kl+"]?",fv="(?:"+Ew+"(?:"+[YA,ja,Bf].join("|")+")"+Iw+ww+")*",KA="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",p2="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Sw=Iw+ww+fv,Bw="(?:"+[g2,ja,Bf].join("|")+")"+Sw,hv="(?:"+[YA+to+"?",to,ja,Bf,uv].join("|")+")",Dw=RegExp(cv,"g"),A2=RegExp(to,"g"),gv=RegExp(Sf+"(?="+Sf+")|"+hv+Sw,"g"),Tw=RegExp([ld+"?"+dv+"+"+xw+"(?="+[vw,ld,"$"].join("|")+")",cd+"+"+_w+"(?="+[vw,ld+bw,"$"].join("|")+")",ld+"?"+bw+"+"+xw,ld+"+"+_w,p2,KA,GA,Bw].join("|"),"g"),Rw=RegExp("["+Ew+WA+pw+Kl+"]"),kw=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,m2=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],y2=-1,fn={};fn[sd]=fn[od]=fn[tv]=fn[ua]=fn[rv]=fn[nv]=fn[Cr]=fn[St]=fn[wn]=!0,fn[Rt]=fn[de]=fn[Yi]=fn[ir]=fn[ca]=fn[Lr]=fn[sn]=fn[Ur]=fn[be]=fn[Fr]=fn[Ee]=fn[_n]=fn[_i]=fn[eo]=fn[sr]=!1;var Or={};Or[Rt]=Or[de]=Or[Yi]=Or[ca]=Or[ir]=Or[Lr]=Or[sd]=Or[od]=Or[tv]=Or[ua]=Or[rv]=Or[be]=Or[Fr]=Or[Ee]=Or[_n]=Or[_i]=Or[eo]=Or[id]=Or[nv]=Or[Cr]=Or[St]=Or[wn]=!0,Or[sn]=Or[Ur]=Or[sr]=!1;var zA={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Fw={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},$c={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},pv={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},C2=parseFloat,v2=parseInt,Df=typeof global=="object"&&global&&global.Object===Object&&global,Mw=typeof self=="object"&&self&&self.Object===Object&&self,wi=Df||Mw||Function("return this")(),Av=typeof xm=="object"&&xm&&!xm.nodeType&&xm,ud=Av&&typeof rE=="object"&&rE&&!rE.nodeType&&rE,Qw=ud&&ud.exports===Av,mv=Qw&&Df.process,ps=function(){try{var K=ud&&ud.require&&ud.require("util").types;return K||mv&&mv.binding&&mv.binding("util")}catch{}}(),Yc=ps&&ps.isArrayBuffer,Nw=ps&&ps.isDate,yv=ps&&ps.isMap,Bg=ps&&ps.isRegExp,In=ps&&ps.isSet,Cv=ps&&ps.isTypedArray;function As(K,le,ie){switch(ie.length){case 0:return K.call(le);case 1:return K.call(le,ie[0]);case 2:return K.call(le,ie[0],ie[1]);case 3:return K.call(le,ie[0],ie[1],ie[2])}return K.apply(le,ie)}function it(K,le,ie,Oe){for(var Tt=-1,qr=K==null?0:K.length;++Tt<qr;){var Ni=K[Tt];le(Oe,Ni,ie(Ni),K)}return Oe}function ms(K,le){for(var ie=-1,Oe=K==null?0:K.length;++ie<Oe&&le(K[ie],ie,K)!==!1;);return K}function Do(K,le){for(var ie=K==null?0:K.length;ie--&&le(K[ie],ie,K)!==!1;);return K}function Pw(K,le){for(var ie=-1,Oe=K==null?0:K.length;++ie<Oe;)if(!le(K[ie],ie,K))return!1;return!0}function Za(K,le){for(var ie=-1,Oe=K==null?0:K.length,Tt=0,qr=[];++ie<Oe;){var Ni=K[ie];le(Ni,ie,K)&&(qr[Tt++]=Ni)}return qr}function dd(K,le){var ie=K==null?0:K.length;return!!ie&&fd(K,le,0)>-1}function zl(K,le,ie){for(var Oe=-1,Tt=K==null?0:K.length;++Oe<Tt;)if(ie(le,K[Oe]))return!0;return!1}function Jr(K,le){for(var ie=-1,Oe=K==null?0:K.length,Tt=Array(Oe);++ie<Oe;)Tt[ie]=le(K[ie],ie,K);return Tt}function ro(K,le){for(var ie=-1,Oe=le.length,Tt=K.length;++ie<Oe;)K[Tt+ie]=le[ie];return K}function fa(K,le,ie,Oe){var Tt=-1,qr=K==null?0:K.length;for(Oe&&qr&&(ie=K[++Tt]);++Tt<qr;)ie=le(ie,K[Tt],Tt,K);return ie}function JA(K,le,ie,Oe){var Tt=K==null?0:K.length;for(Oe&&Tt&&(ie=K[--Tt]);Tt--;)ie=le(ie,K[Tt],Tt,K);return ie}function Dg(K,le){for(var ie=-1,Oe=K==null?0:K.length;++ie<Oe;)if(le(K[ie],ie,K))return!0;return!1}var Lw=re("length");function vv(K){return K.split("")}function E2(K){return K.match(Wc)||[]}function Uw(K,le,ie){var Oe;return ie(K,function(Tt,qr,Ni){if(le(Tt,qr,Ni))return Oe=qr,!1}),Oe}function jA(K,le,ie,Oe){for(var Tt=K.length,qr=ie+(Oe?1:-1);Oe?qr--:++qr<Tt;)if(le(K[qr],qr,K))return qr;return-1}function fd(K,le,ie){return le===le?DIe(K,le,ie):jA(K,I,ie)}function _(K,le,ie,Oe){for(var Tt=ie-1,qr=K.length;++Tt<qr;)if(Oe(K[Tt],le))return Tt;return-1}function I(K){return K!==K}function L(K,le){var ie=K==null?0:K.length;return ie?Ht(K,le)/ie:Ke}function re(K){return function(le){return le==null?e:le[K]}}function oe(K){return function(le){return K==null?e:K[le]}}function De(K,le,ie,Oe,Tt){return Tt(K,function(qr,Ni,gn){ie=Oe?(Oe=!1,qr):le(ie,qr,Ni,gn)}),ie}function st(K,le){var ie=K.length;for(K.sort(le);ie--;)K[ie]=K[ie].value;return K}function Ht(K,le){for(var ie,Oe=-1,Tt=K.length;++Oe<Tt;){var qr=le(K[Oe]);qr!==e&&(ie=ie===e?qr:ie+qr)}return ie}function hn(K,le){for(var ie=-1,Oe=Array(K);++ie<K;)Oe[ie]=le(ie);return Oe}function Qi(K,le){return Jr(le,function(ie){return[ie,K[ie]]})}function no(K){return K&&K.slice(0,W6(K)+1).replace(ov,"")}function Sn(K){return function(le){return K(le)}}function Jl(K,le){return Jr(le,function(ie){return K[ie]})}function To(K,le){return K.has(le)}function Tf(K,le){for(var ie=-1,Oe=K.length;++ie<Oe&&fd(le,K[ie],0)>-1;);return ie}function Ow(K,le){for(var ie=K.length;ie--&&fd(le,K[ie],0)>-1;);return ie}function EIe(K,le){for(var ie=K.length,Oe=0;ie--;)K[ie]===le&&++Oe;return Oe}var bIe=oe(zA),xIe=oe(Fw);function _Ie(K){return"\\"+pv[K]}function wIe(K,le){return K==null?e:K[le]}function ZA(K){return Rw.test(K)}function IIe(K){return kw.test(K)}function SIe(K){for(var le,ie=[];!(le=K.next()).done;)ie.push(le.value);return ie}function b2(K){var le=-1,ie=Array(K.size);return K.forEach(function(Oe,Tt){ie[++le]=[Tt,Oe]}),ie}function H6(K,le){return function(ie){return K(le(ie))}}function Rf(K,le){for(var ie=-1,Oe=K.length,Tt=0,qr=[];++ie<Oe;){var Ni=K[ie];(Ni===le||Ni===l)&&(K[ie]=l,qr[Tt++]=ie)}return qr}function qw(K){var le=-1,ie=Array(K.size);return K.forEach(function(Oe){ie[++le]=Oe}),ie}function BIe(K){var le=-1,ie=Array(K.size);return K.forEach(function(Oe){ie[++le]=[Oe,Oe]}),ie}function DIe(K,le,ie){for(var Oe=ie-1,Tt=K.length;++Oe<Tt;)if(K[Oe]===le)return Oe;return-1}function TIe(K,le,ie){for(var Oe=ie+1;Oe--;)if(K[Oe]===le)return Oe;return Oe}function XA(K){return ZA(K)?kIe(K):Lw(K)}function jl(K){return ZA(K)?FIe(K):vv(K)}function W6(K){for(var le=K.length;le--&&r2.test(K.charAt(le)););return le}var RIe=oe($c);function kIe(K){for(var le=gv.lastIndex=0;gv.test(K);)++le;return le}function FIe(K){return K.match(gv)||[]}function MIe(K){return K.match(Tw)||[]}var QIe=function K(le){le=le==null?wi:kf.defaults(wi.Object(),le,kf.pick(wi,m2));var ie=le.Array,Oe=le.Date,Tt=le.Error,qr=le.Function,Ni=le.Math,gn=le.Object,x2=le.RegExp,NIe=le.String,Xa=le.TypeError,Vw=ie.prototype,PIe=qr.prototype,em=gn.prototype,Hw=le["__core-js_shared__"],Ww=PIe.toString,on=em.hasOwnProperty,LIe=0,G6=function(){var d=/[^.]+$/.exec(Hw&&Hw.keys&&Hw.keys.IE_PROTO||"");return d?"Symbol(src)_1."+d:""}(),Gw=em.toString,UIe=Ww.call(gn),OIe=wi._,qIe=x2("^"+Ww.call(on).replace(Mi,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),$w=Qw?le.Buffer:e,Ff=le.Symbol,Yw=le.Uint8Array,$6=$w?$w.allocUnsafe:e,Kw=H6(gn.getPrototypeOf,gn),Y6=gn.create,K6=em.propertyIsEnumerable,zw=Vw.splice,z6=Ff?Ff.isConcatSpreadable:e,Ev=Ff?Ff.iterator:e,Tg=Ff?Ff.toStringTag:e,Jw=function(){try{var d=Qg(gn,"defineProperty");return d({},"",{}),d}catch{}}(),VIe=le.clearTimeout!==wi.clearTimeout&&le.clearTimeout,HIe=Oe&&Oe.now!==wi.Date.now&&Oe.now,WIe=le.setTimeout!==wi.setTimeout&&le.setTimeout,jw=Ni.ceil,Zw=Ni.floor,_2=gn.getOwnPropertySymbols,GIe=$w?$w.isBuffer:e,J6=le.isFinite,$Ie=Vw.join,YIe=H6(gn.keys,gn),Pi=Ni.max,Ns=Ni.min,KIe=Oe.now,zIe=le.parseInt,j6=Ni.random,JIe=Vw.reverse,w2=Qg(le,"DataView"),bv=Qg(le,"Map"),I2=Qg(le,"Promise"),tm=Qg(le,"Set"),xv=Qg(le,"WeakMap"),_v=Qg(gn,"create"),Xw=xv&&new xv,rm={},jIe=Ng(w2),ZIe=Ng(bv),XIe=Ng(I2),eSe=Ng(tm),tSe=Ng(xv),eI=Ff?Ff.prototype:e,wv=eI?eI.valueOf:e,Z6=eI?eI.toString:e;function M(d){if(ei(d)&&!kt(d)&&!(d instanceof hr)){if(d instanceof el)return d;if(on.call(d,"__wrapped__"))return X9(d)}return new el(d)}var nm=function(){function d(){}return function(h){if(!Vn(h))return{};if(Y6)return Y6(h);d.prototype=h;var m=new d;return d.prototype=e,m}}();function tI(){}function el(d,h){this.__wrapped__=d,this.__actions__=[],this.__chain__=!!h,this.__index__=0,this.__values__=e}M.templateSettings={escape:fw,evaluate:OA,interpolate:If,variable:"",imports:{_:M}},M.prototype=tI.prototype,M.prototype.constructor=M,el.prototype=nm(tI.prototype),el.prototype.constructor=el;function hr(d){this.__wrapped__=d,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=It,this.__views__=[]}function rSe(){var d=new hr(this.__wrapped__);return d.__actions__=Ro(this.__actions__),d.__dir__=this.__dir__,d.__filtered__=this.__filtered__,d.__iteratees__=Ro(this.__iteratees__),d.__takeCount__=this.__takeCount__,d.__views__=Ro(this.__views__),d}function nSe(){if(this.__filtered__){var d=new hr(this);d.__dir__=-1,d.__filtered__=!0}else d=this.clone(),d.__dir__*=-1;return d}function iSe(){var d=this.__wrapped__.value(),h=this.__dir__,m=kt(d),E=h<0,S=m?d.length:0,P=ABe(0,S,this.__views__),O=P.start,H=P.end,J=H-O,ce=E?H:O-1,ue=this.__iteratees__,me=ue.length,Re=0,ze=Ns(J,this.__takeCount__);if(!m||!E&&S==J&&ze==J)return b9(d,this.__actions__);var dt=[];e:for(;J--&&Re<ze;){ce+=h;for(var Kt=-1,ft=d[ce];++Kt<me;){var or=ue[Kt],vr=or.iteratee,pa=or.type,oo=vr(ft);if(pa==Se)ft=oo;else if(!oo){if(pa==ge)continue e;break e}}dt[Re++]=ft}return dt}hr.prototype=nm(tI.prototype),hr.prototype.constructor=hr;function Rg(d){var h=-1,m=d==null?0:d.length;for(this.clear();++h<m;){var E=d[h];this.set(E[0],E[1])}}function sSe(){this.__data__=_v?_v(null):{},this.size=0}function oSe(d){var h=this.has(d)&&delete this.__data__[d];return this.size-=h?1:0,h}function aSe(d){var h=this.__data__;if(_v){var m=h[d];return m===o?e:m}return on.call(h,d)?h[d]:e}function lSe(d){var h=this.__data__;return _v?h[d]!==e:on.call(h,d)}function cSe(d,h){var m=this.__data__;return this.size+=this.has(d)?0:1,m[d]=_v&&h===e?o:h,this}Rg.prototype.clear=sSe,Rg.prototype.delete=oSe,Rg.prototype.get=aSe,Rg.prototype.has=lSe,Rg.prototype.set=cSe;function hd(d){var h=-1,m=d==null?0:d.length;for(this.clear();++h<m;){var E=d[h];this.set(E[0],E[1])}}function uSe(){this.__data__=[],this.size=0}function dSe(d){var h=this.__data__,m=rI(h,d);if(m<0)return!1;var E=h.length-1;return m==E?h.pop():zw.call(h,m,1),--this.size,!0}function fSe(d){var h=this.__data__,m=rI(h,d);return m<0?e:h[m][1]}function hSe(d){return rI(this.__data__,d)>-1}function gSe(d,h){var m=this.__data__,E=rI(m,d);return E<0?(++this.size,m.push([d,h])):m[E][1]=h,this}hd.prototype.clear=uSe,hd.prototype.delete=dSe,hd.prototype.get=fSe,hd.prototype.has=hSe,hd.prototype.set=gSe;function gd(d){var h=-1,m=d==null?0:d.length;for(this.clear();++h<m;){var E=d[h];this.set(E[0],E[1])}}function pSe(){this.size=0,this.__data__={hash:new Rg,map:new(bv||hd),string:new Rg}}function ASe(d){var h=gI(this,d).delete(d);return this.size-=h?1:0,h}function mSe(d){return gI(this,d).get(d)}function ySe(d){return gI(this,d).has(d)}function CSe(d,h){var m=gI(this,d),E=m.size;return m.set(d,h),this.size+=m.size==E?0:1,this}gd.prototype.clear=pSe,gd.prototype.delete=ASe,gd.prototype.get=mSe,gd.prototype.has=ySe,gd.prototype.set=CSe;function kg(d){var h=-1,m=d==null?0:d.length;for(this.__data__=new gd;++h<m;)this.add(d[h])}function vSe(d){return this.__data__.set(d,o),this}function ESe(d){return this.__data__.has(d)}kg.prototype.add=kg.prototype.push=vSe,kg.prototype.has=ESe;function Zl(d){var h=this.__data__=new hd(d);this.size=h.size}function bSe(){this.__data__=new hd,this.size=0}function xSe(d){var h=this.__data__,m=h.delete(d);return this.size=h.size,m}function _Se(d){return this.__data__.get(d)}function wSe(d){return this.__data__.has(d)}function ISe(d,h){var m=this.__data__;if(m instanceof hd){var E=m.__data__;if(!bv||E.length<r-1)return E.push([d,h]),this.size=++m.size,this;m=this.__data__=new gd(E)}return m.set(d,h),this.size=m.size,this}Zl.prototype.clear=bSe,Zl.prototype.delete=xSe,Zl.prototype.get=_Se,Zl.prototype.has=wSe,Zl.prototype.set=ISe;function X6(d,h){var m=kt(d),E=!m&&Pg(d),S=!m&&!E&&Lf(d),P=!m&&!E&&!S&&am(d),O=m||E||S||P,H=O?hn(d.length,NIe):[],J=H.length;for(var ce in d)(h||on.call(d,ce))&&!(O&&(ce=="length"||S&&(ce=="offset"||ce=="parent")||P&&(ce=="buffer"||ce=="byteLength"||ce=="byteOffset")||yd(ce,J)))&&H.push(ce);return H}function e9(d){var h=d.length;return h?d[P2(0,h-1)]:e}function SSe(d,h){return pI(Ro(d),Fg(h,0,d.length))}function BSe(d){return pI(Ro(d))}function S2(d,h,m){(m!==e&&!Xl(d[h],m)||m===e&&!(h in d))&&pd(d,h,m)}function Iv(d,h,m){var E=d[h];(!(on.call(d,h)&&Xl(E,m))||m===e&&!(h in d))&&pd(d,h,m)}function rI(d,h){for(var m=d.length;m--;)if(Xl(d[m][0],h))return m;return-1}function DSe(d,h,m,E){return Mf(d,function(S,P,O){h(E,S,m(S),O)}),E}function t9(d,h){return d&&zc(h,Ki(h),d)}function TSe(d,h){return d&&zc(h,Fo(h),d)}function pd(d,h,m){h=="__proto__"&&Jw?Jw(d,h,{configurable:!0,enumerable:!0,value:m,writable:!0}):d[h]=m}function B2(d,h){for(var m=-1,E=h.length,S=ie(E),P=d==null;++m<E;)S[m]=P?e:lP(d,h[m]);return S}function Fg(d,h,m){return d===d&&(m!==e&&(d=d<=m?d:m),h!==e&&(d=d>=h?d:h)),d}function tl(d,h,m,E,S,P){var O,H=h&c,J=h&u,ce=h&f;if(m&&(O=S?m(d,E,S,P):m(d)),O!==e)return O;if(!Vn(d))return d;var ue=kt(d);if(ue){if(O=yBe(d),!H)return Ro(d,O)}else{var me=Ps(d),Re=me==Ur||me==fr;if(Lf(d))return w9(d,H);if(me==Ee||me==Rt||Re&&!S){if(O=J||Re?{}:W9(d),!H)return J?aBe(d,TSe(O,d)):oBe(d,t9(O,d))}else{if(!Or[me])return S?d:{};O=CBe(d,me,H)}}P||(P=new Zl);var ze=P.get(d);if(ze)return ze;P.set(d,O),C$(d)?d.forEach(function(ft){O.add(tl(ft,h,m,ft,d,P))}):m$(d)&&d.forEach(function(ft,or){O.set(or,tl(ft,h,m,or,d,P))});var dt=ce?J?K2:Y2:J?Fo:Ki,Kt=ue?e:dt(d);return ms(Kt||d,function(ft,or){Kt&&(or=ft,ft=d[or]),Iv(O,or,tl(ft,h,m,or,d,P))}),O}function RSe(d){var h=Ki(d);return function(m){return r9(m,d,h)}}function r9(d,h,m){var E=m.length;if(d==null)return!E;for(d=gn(d);E--;){var S=m[E],P=h[S],O=d[S];if(O===e&&!(S in d)||!P(O))return!1}return!0}function n9(d,h,m){if(typeof d!="function")throw new Xa(i);return Fv(function(){d.apply(e,m)},h)}function Sv(d,h,m,E){var S=-1,P=dd,O=!0,H=d.length,J=[],ce=h.length;if(!H)return J;m&&(h=Jr(h,Sn(m))),E?(P=zl,O=!1):h.length>=r&&(P=To,O=!1,h=new kg(h));e:for(;++S<H;){var ue=d[S],me=m==null?ue:m(ue);if(ue=E||ue!==0?ue:0,O&&me===me){for(var Re=ce;Re--;)if(h[Re]===me)continue e;J.push(ue)}else P(h,me,E)||J.push(ue)}return J}var Mf=T9(Kc),i9=T9(T2,!0);function kSe(d,h){var m=!0;return Mf(d,function(E,S,P){return m=!!h(E,S,P),m}),m}function nI(d,h,m){for(var E=-1,S=d.length;++E<S;){var P=d[E],O=h(P);if(O!=null&&(H===e?O===O&&!ga(O):m(O,H)))var H=O,J=P}return J}function FSe(d,h,m,E){var S=d.length;for(m=Wt(m),m<0&&(m=-m>S?0:S+m),E=E===e||E>S?S:Wt(E),E<0&&(E+=S),E=m>E?0:E$(E);m<E;)d[m++]=h;return d}function s9(d,h){var m=[];return Mf(d,function(E,S,P){h(E,S,P)&&m.push(E)}),m}function ys(d,h,m,E,S){var P=-1,O=d.length;for(m||(m=EBe),S||(S=[]);++P<O;){var H=d[P];h>0&&m(H)?h>1?ys(H,h-1,m,E,S):ro(S,H):E||(S[S.length]=H)}return S}var D2=R9(),o9=R9(!0);function Kc(d,h){return d&&D2(d,h,Ki)}function T2(d,h){return d&&o9(d,h,Ki)}function iI(d,h){return Za(h,function(m){return Cd(d[m])})}function Mg(d,h){h=Nf(h,d);for(var m=0,E=h.length;d!=null&&m<E;)d=d[Jc(h[m++])];return m&&m==E?d:e}function a9(d,h,m){var E=h(d);return kt(d)?E:ro(E,m(d))}function io(d){return d==null?d===e?Hc:fe:Tg&&Tg in gn(d)?pBe(d):BBe(d)}function R2(d,h){return d>h}function MSe(d,h){return d!=null&&on.call(d,h)}function QSe(d,h){return d!=null&&h in gn(d)}function NSe(d,h,m){return d>=Ns(h,m)&&d<Pi(h,m)}function k2(d,h,m){for(var E=m?zl:dd,S=d[0].length,P=d.length,O=P,H=ie(P),J=1/0,ce=[];O--;){var ue=d[O];O&&h&&(ue=Jr(ue,Sn(h))),J=Ns(ue.length,J),H[O]=!m&&(h||S>=120&&ue.length>=120)?new kg(O&&ue):e}ue=d[0];var me=-1,Re=H[0];e:for(;++me<S&&ce.length<J;){var ze=ue[me],dt=h?h(ze):ze;if(ze=m||ze!==0?ze:0,!(Re?To(Re,dt):E(ce,dt,m))){for(O=P;--O;){var Kt=H[O];if(!(Kt?To(Kt,dt):E(d[O],dt,m)))continue e}Re&&Re.push(dt),ce.push(ze)}}return ce}function PSe(d,h,m,E){return Kc(d,function(S,P,O){h(E,m(S),P,O)}),E}function Bv(d,h,m){h=Nf(h,d),d=K9(d,h);var E=d==null?d:d[Jc(nl(h))];return E==null?e:As(E,d,m)}function l9(d){return ei(d)&&io(d)==Rt}function LSe(d){return ei(d)&&io(d)==Yi}function USe(d){return ei(d)&&io(d)==Lr}function Dv(d,h,m,E,S){return d===h?!0:d==null||h==null||!ei(d)&&!ei(h)?d!==d&&h!==h:OSe(d,h,m,E,Dv,S)}function OSe(d,h,m,E,S,P){var O=kt(d),H=kt(h),J=O?de:Ps(d),ce=H?de:Ps(h);J=J==Rt?Ee:J,ce=ce==Rt?Ee:ce;var ue=J==Ee,me=ce==Ee,Re=J==ce;if(Re&&Lf(d)){if(!Lf(h))return!1;O=!0,ue=!1}if(Re&&!ue)return P||(P=new Zl),O||am(d)?q9(d,h,m,E,S,P):hBe(d,h,J,m,E,S,P);if(!(m&p)){var ze=ue&&on.call(d,"__wrapped__"),dt=me&&on.call(h,"__wrapped__");if(ze||dt){var Kt=ze?d.value():d,ft=dt?h.value():h;return P||(P=new Zl),S(Kt,ft,m,E,P)}}return Re?(P||(P=new Zl),gBe(d,h,m,E,S,P)):!1}function qSe(d){return ei(d)&&Ps(d)==be}function F2(d,h,m,E){var S=m.length,P=S,O=!E;if(d==null)return!P;for(d=gn(d);S--;){var H=m[S];if(O&&H[2]?H[1]!==d[H[0]]:!(H[0]in d))return!1}for(;++S<P;){H=m[S];var J=H[0],ce=d[J],ue=H[1];if(O&&H[2]){if(ce===e&&!(J in d))return!1}else{var me=new Zl;if(E)var Re=E(ce,ue,J,d,h,me);if(!(Re===e?Dv(ue,ce,p|g,E,me):Re))return!1}}return!0}function c9(d){if(!Vn(d)||xBe(d))return!1;var h=Cd(d)?qIe:i2;return h.test(Ng(d))}function VSe(d){return ei(d)&&io(d)==_n}function HSe(d){return ei(d)&&Ps(d)==_i}function WSe(d){return ei(d)&&EI(d.length)&&!!fn[io(d)]}function u9(d){return typeof d=="function"?d:d==null?Mo:typeof d=="object"?kt(d)?h9(d[0],d[1]):f9(d):k$(d)}function M2(d){if(!kv(d))return YIe(d);var h=[];for(var m in gn(d))on.call(d,m)&&m!="constructor"&&h.push(m);return h}function GSe(d){if(!Vn(d))return SBe(d);var h=kv(d),m=[];for(var E in d)E=="constructor"&&(h||!on.call(d,E))||m.push(E);return m}function Q2(d,h){return d<h}function d9(d,h){var m=-1,E=ko(d)?ie(d.length):[];return Mf(d,function(S,P,O){E[++m]=h(S,P,O)}),E}function f9(d){var h=J2(d);return h.length==1&&h[0][2]?$9(h[0][0],h[0][1]):function(m){return m===d||F2(m,d,h)}}function h9(d,h){return Z2(d)&&G9(h)?$9(Jc(d),h):function(m){var E=lP(m,d);return E===e&&E===h?cP(m,d):Dv(h,E,p|g)}}function sI(d,h,m,E,S){d!==h&&D2(h,function(P,O){if(S||(S=new Zl),Vn(P))$Se(d,h,O,m,sI,E,S);else{var H=E?E(eP(d,O),P,O+"",d,h,S):e;H===e&&(H=P),S2(d,O,H)}},Fo)}function $Se(d,h,m,E,S,P,O){var H=eP(d,m),J=eP(h,m),ce=O.get(J);if(ce){S2(d,m,ce);return}var ue=P?P(H,J,m+"",d,h,O):e,me=ue===e;if(me){var Re=kt(J),ze=!Re&&Lf(J),dt=!Re&&!ze&&am(J);ue=J,Re||ze||dt?kt(H)?ue=H:pi(H)?ue=Ro(H):ze?(me=!1,ue=w9(J,!0)):dt?(me=!1,ue=I9(J,!0)):ue=[]:Mv(J)||Pg(J)?(ue=H,Pg(H)?ue=b$(H):(!Vn(H)||Cd(H))&&(ue=W9(J))):me=!1}me&&(O.set(J,ue),S(ue,J,E,P,O),O.delete(J)),S2(d,m,ue)}function g9(d,h){var m=d.length;if(m)return h+=h<0?m:0,yd(h,m)?d[h]:e}function p9(d,h,m){h.length?h=Jr(h,function(P){return kt(P)?function(O){return Mg(O,P.length===1?P[0]:P)}:P}):h=[Mo];var E=-1;h=Jr(h,Sn(ut()));var S=d9(d,function(P,O,H){var J=Jr(h,function(ce){return ce(P)});return{criteria:J,index:++E,value:P}});return st(S,function(P,O){return sBe(P,O,m)})}function YSe(d,h){return A9(d,h,function(m,E){return cP(d,E)})}function A9(d,h,m){for(var E=-1,S=h.length,P={};++E<S;){var O=h[E],H=Mg(d,O);m(H,O)&&Tv(P,Nf(O,d),H)}return P}function KSe(d){return function(h){return Mg(h,d)}}function N2(d,h,m,E){var S=E?_:fd,P=-1,O=h.length,H=d;for(d===h&&(h=Ro(h)),m&&(H=Jr(d,Sn(m)));++P<O;)for(var J=0,ce=h[P],ue=m?m(ce):ce;(J=S(H,ue,J,E))>-1;)H!==d&&zw.call(H,J,1),zw.call(d,J,1);return d}function m9(d,h){for(var m=d?h.length:0,E=m-1;m--;){var S=h[m];if(m==E||S!==P){var P=S;yd(S)?zw.call(d,S,1):O2(d,S)}}return d}function P2(d,h){return d+Zw(j6()*(h-d+1))}function zSe(d,h,m,E){for(var S=-1,P=Pi(jw((h-d)/(m||1)),0),O=ie(P);P--;)O[E?P:++S]=d,d+=m;return O}function L2(d,h){var m="";if(!d||h<1||h>z)return m;do h%2&&(m+=d),h=Zw(h/2),h&&(d+=d);while(h);return m}function er(d,h){return tP(Y9(d,h,Mo),d+"")}function JSe(d){return e9(lm(d))}function jSe(d,h){var m=lm(d);return pI(m,Fg(h,0,m.length))}function Tv(d,h,m,E){if(!Vn(d))return d;h=Nf(h,d);for(var S=-1,P=h.length,O=P-1,H=d;H!=null&&++S<P;){var J=Jc(h[S]),ce=m;if(J==="__proto__"||J==="constructor"||J==="prototype")return d;if(S!=O){var ue=H[J];ce=E?E(ue,J,H):e,ce===e&&(ce=Vn(ue)?ue:yd(h[S+1])?[]:{})}Iv(H,J,ce),H=H[J]}return d}var y9=Xw?function(d,h){return Xw.set(d,h),d}:Mo,ZSe=Jw?function(d,h){return Jw(d,"toString",{configurable:!0,enumerable:!1,value:dP(h),writable:!0})}:Mo;function XSe(d){return pI(lm(d))}function rl(d,h,m){var E=-1,S=d.length;h<0&&(h=-h>S?0:S+h),m=m>S?S:m,m<0&&(m+=S),S=h>m?0:m-h>>>0,h>>>=0;for(var P=ie(S);++E<S;)P[E]=d[E+h];return P}function eBe(d,h){var m;return Mf(d,function(E,S,P){return m=h(E,S,P),!m}),!!m}function oI(d,h,m){var E=0,S=d==null?E:d.length;if(typeof h=="number"&&h===h&&S<=Lt){for(;E<S;){var P=E+S>>>1,O=d[P];O!==null&&!ga(O)&&(m?O<=h:O<h)?E=P+1:S=P}return S}return U2(d,h,Mo,m)}function U2(d,h,m,E){var S=0,P=d==null?0:d.length;if(P===0)return 0;h=m(h);for(var O=h!==h,H=h===null,J=ga(h),ce=h===e;S<P;){var ue=Zw((S+P)/2),me=m(d[ue]),Re=me!==e,ze=me===null,dt=me===me,Kt=ga(me);if(O)var ft=E||dt;else ce?ft=dt&&(E||Re):H?ft=dt&&Re&&(E||!ze):J?ft=dt&&Re&&!ze&&(E||!Kt):ze||Kt?ft=!1:ft=E?me<=h:me<h;ft?S=ue+1:P=ue}return Ns(P,ye)}function C9(d,h){for(var m=-1,E=d.length,S=0,P=[];++m<E;){var O=d[m],H=h?h(O):O;if(!m||!Xl(H,J)){var J=H;P[S++]=O===0?0:O}}return P}function v9(d){return typeof d=="number"?d:ga(d)?Ke:+d}function ha(d){if(typeof d=="string")return d;if(kt(d))return Jr(d,ha)+"";if(ga(d))return Z6?Z6.call(d):"";var h=d+"";return h=="0"&&1/d==-se?"-0":h}function Qf(d,h,m){var E=-1,S=dd,P=d.length,O=!0,H=[],J=H;if(m)O=!1,S=zl;else if(P>=r){var ce=h?null:dBe(d);if(ce)return qw(ce);O=!1,S=To,J=new kg}else J=h?[]:H;e:for(;++E<P;){var ue=d[E],me=h?h(ue):ue;if(ue=m||ue!==0?ue:0,O&&me===me){for(var Re=J.length;Re--;)if(J[Re]===me)continue e;h&&J.push(me),H.push(ue)}else S(J,me,m)||(J!==H&&J.push(me),H.push(ue))}return H}function O2(d,h){return h=Nf(h,d),d=K9(d,h),d==null||delete d[Jc(nl(h))]}function E9(d,h,m,E){return Tv(d,h,m(Mg(d,h)),E)}function aI(d,h,m,E){for(var S=d.length,P=E?S:-1;(E?P--:++P<S)&&h(d[P],P,d););return m?rl(d,E?0:P,E?P+1:S):rl(d,E?P+1:0,E?S:P)}function b9(d,h){var m=d;return m instanceof hr&&(m=m.value()),fa(h,function(E,S){return S.func.apply(S.thisArg,ro([E],S.args))},m)}function q2(d,h,m){var E=d.length;if(E<2)return E?Qf(d[0]):[];for(var S=-1,P=ie(E);++S<E;)for(var O=d[S],H=-1;++H<E;)H!=S&&(P[S]=Sv(P[S]||O,d[H],h,m));return Qf(ys(P,1),h,m)}function x9(d,h,m){for(var E=-1,S=d.length,P=h.length,O={};++E<S;){var H=E<P?h[E]:e;m(O,d[E],H)}return O}function V2(d){return pi(d)?d:[]}function H2(d){return typeof d=="function"?d:Mo}function Nf(d,h){return kt(d)?d:Z2(d,h)?[d]:Z9(jr(d))}var tBe=er;function Pf(d,h,m){var E=d.length;return m=m===e?E:m,!h&&m>=E?d:rl(d,h,m)}var _9=VIe||function(d){return wi.clearTimeout(d)};function w9(d,h){if(h)return d.slice();var m=d.length,E=$6?$6(m):new d.constructor(m);return d.copy(E),E}function W2(d){var h=new d.constructor(d.byteLength);return new Yw(h).set(new Yw(d)),h}function rBe(d,h){var m=h?W2(d.buffer):d.buffer;return new d.constructor(m,d.byteOffset,d.byteLength)}function nBe(d){var h=new d.constructor(d.source,hw.exec(d));return h.lastIndex=d.lastIndex,h}function iBe(d){return wv?gn(wv.call(d)):{}}function I9(d,h){var m=h?W2(d.buffer):d.buffer;return new d.constructor(m,d.byteOffset,d.length)}function S9(d,h){if(d!==h){var m=d!==e,E=d===null,S=d===d,P=ga(d),O=h!==e,H=h===null,J=h===h,ce=ga(h);if(!H&&!ce&&!P&&d>h||P&&O&&J&&!H&&!ce||E&&O&&J||!m&&J||!S)return 1;if(!E&&!P&&!ce&&d<h||ce&&m&&S&&!E&&!P||H&&m&&S||!O&&S||!J)return-1}return 0}function sBe(d,h,m){for(var E=-1,S=d.criteria,P=h.criteria,O=S.length,H=m.length;++E<O;){var J=S9(S[E],P[E]);if(J){if(E>=H)return J;var ce=m[E];return J*(ce=="desc"?-1:1)}}return d.index-h.index}function B9(d,h,m,E){for(var S=-1,P=d.length,O=m.length,H=-1,J=h.length,ce=Pi(P-O,0),ue=ie(J+ce),me=!E;++H<J;)ue[H]=h[H];for(;++S<O;)(me||S<P)&&(ue[m[S]]=d[S]);for(;ce--;)ue[H++]=d[S++];return ue}function D9(d,h,m,E){for(var S=-1,P=d.length,O=-1,H=m.length,J=-1,ce=h.length,ue=Pi(P-H,0),me=ie(ue+ce),Re=!E;++S<ue;)me[S]=d[S];for(var ze=S;++J<ce;)me[ze+J]=h[J];for(;++O<H;)(Re||S<P)&&(me[ze+m[O]]=d[S++]);return me}function Ro(d,h){var m=-1,E=d.length;for(h||(h=ie(E));++m<E;)h[m]=d[m];return h}function zc(d,h,m,E){var S=!m;m||(m={});for(var P=-1,O=h.length;++P<O;){var H=h[P],J=E?E(m[H],d[H],H,m,d):e;J===e&&(J=d[H]),S?pd(m,H,J):Iv(m,H,J)}return m}function oBe(d,h){return zc(d,j2(d),h)}function aBe(d,h){return zc(d,V9(d),h)}function lI(d,h){return function(m,E){var S=kt(m)?it:DSe,P=h?h():{};return S(m,d,ut(E,2),P)}}function im(d){return er(function(h,m){var E=-1,S=m.length,P=S>1?m[S-1]:e,O=S>2?m[2]:e;for(P=d.length>3&&typeof P=="function"?(S--,P):e,O&&so(m[0],m[1],O)&&(P=S<3?e:P,S=1),h=gn(h);++E<S;){var H=m[E];H&&d(h,H,E,P)}return h})}function T9(d,h){return function(m,E){if(m==null)return m;if(!ko(m))return d(m,E);for(var S=m.length,P=h?S:-1,O=gn(m);(h?P--:++P<S)&&E(O[P],P,O)!==!1;);return m}}function R9(d){return function(h,m,E){for(var S=-1,P=gn(h),O=E(h),H=O.length;H--;){var J=O[d?H:++S];if(m(P[J],J,P)===!1)break}return h}}function lBe(d,h,m){var E=h&A,S=Rv(d);function P(){var O=this&&this!==wi&&this instanceof P?S:d;return O.apply(E?m:this,arguments)}return P}function k9(d){return function(h){h=jr(h);var m=ZA(h)?jl(h):e,E=m?m[0]:h.charAt(0),S=m?Pf(m,1).join(""):h.slice(1);return E[d]()+S}}function sm(d){return function(h){return fa(T$(D$(h).replace(Dw,"")),d,"")}}function Rv(d){return function(){var h=arguments;switch(h.length){case 0:return new d;case 1:return new d(h[0]);case 2:return new d(h[0],h[1]);case 3:return new d(h[0],h[1],h[2]);case 4:return new d(h[0],h[1],h[2],h[3]);case 5:return new d(h[0],h[1],h[2],h[3],h[4]);case 6:return new d(h[0],h[1],h[2],h[3],h[4],h[5]);case 7:return new d(h[0],h[1],h[2],h[3],h[4],h[5],h[6])}var m=nm(d.prototype),E=d.apply(m,h);return Vn(E)?E:m}}function cBe(d,h,m){var E=Rv(d);function S(){for(var P=arguments.length,O=ie(P),H=P,J=om(S);H--;)O[H]=arguments[H];var ce=P<3&&O[0]!==J&&O[P-1]!==J?[]:Rf(O,J);if(P-=ce.length,P<m)return P9(d,h,cI,S.placeholder,e,O,ce,e,e,m-P);var ue=this&&this!==wi&&this instanceof S?E:d;return As(ue,this,O)}return S}function F9(d){return function(h,m,E){var S=gn(h);if(!ko(h)){var P=ut(m,3);h=Ki(h),m=function(H){return P(S[H],H,S)}}var O=d(h,m,E);return O>-1?S[P?h[O]:O]:e}}function M9(d){return md(function(h){var m=h.length,E=m,S=el.prototype.thru;for(d&&h.reverse();E--;){var P=h[E];if(typeof P!="function")throw new Xa(i);if(S&&!O&&hI(P)=="wrapper")var O=new el([],!0)}for(E=O?E:m;++E<m;){P=h[E];var H=hI(P),J=H=="wrapper"?z2(P):e;J&&X2(J[0])&&J[1]==(F|v|w|Q)&&!J[4].length&&J[9]==1?O=O[hI(J[0])].apply(O,J[3]):O=P.length==1&&X2(P)?O[H]():O.thru(P)}return function(){var ce=arguments,ue=ce[0];if(O&&ce.length==1&&kt(ue))return O.plant(ue).value();for(var me=0,Re=m?h[me].apply(this,ce):ue;++me<m;)Re=h[me].call(this,Re);return Re}})}function cI(d,h,m,E,S,P,O,H,J,ce){var ue=h&F,me=h&A,Re=h&y,ze=h&(v|b),dt=h&W,Kt=Re?e:Rv(d);function ft(){for(var or=arguments.length,vr=ie(or),pa=or;pa--;)vr[pa]=arguments[pa];if(ze)var oo=om(ft),Aa=EIe(vr,oo);if(E&&(vr=B9(vr,E,S,ze)),P&&(vr=D9(vr,P,O,ze)),or-=Aa,ze&&or<ce){var Ai=Rf(vr,oo);return P9(d,h,cI,ft.placeholder,m,vr,Ai,H,J,ce-or)}var ec=me?m:this,Ed=Re?ec[d]:d;return or=vr.length,H?vr=DBe(vr,H):dt&&or>1&&vr.reverse(),ue&&J<or&&(vr.length=J),this&&this!==wi&&this instanceof ft&&(Ed=Kt||Rv(Ed)),Ed.apply(ec,vr)}return ft}function Q9(d,h){return function(m,E){return PSe(m,d,h(E),{})}}function uI(d,h){return function(m,E){var S;if(m===e&&E===e)return h;if(m!==e&&(S=m),E!==e){if(S===e)return E;typeof m=="string"||typeof E=="string"?(m=ha(m),E=ha(E)):(m=v9(m),E=v9(E)),S=d(m,E)}return S}}function G2(d){return md(function(h){return h=Jr(h,Sn(ut())),er(function(m){var E=this;return d(h,function(S){return As(S,E,m)})})})}function dI(d,h){h=h===e?" ":ha(h);var m=h.length;if(m<2)return m?L2(h,d):h;var E=L2(h,jw(d/XA(h)));return ZA(h)?Pf(jl(E),0,d).join(""):E.slice(0,d)}function uBe(d,h,m,E){var S=h&A,P=Rv(d);function O(){for(var H=-1,J=arguments.length,ce=-1,ue=E.length,me=ie(ue+J),Re=this&&this!==wi&&this instanceof O?P:d;++ce<ue;)me[ce]=E[ce];for(;J--;)me[ce++]=arguments[++H];return As(Re,S?m:this,me)}return O}function N9(d){return function(h,m,E){return E&&typeof E!="number"&&so(h,m,E)&&(m=E=e),h=vd(h),m===e?(m=h,h=0):m=vd(m),E=E===e?h<m?1:-1:vd(E),zSe(h,m,E,d)}}function fI(d){return function(h,m){return typeof h=="string"&&typeof m=="string"||(h=il(h),m=il(m)),d(h,m)}}function P9(d,h,m,E,S,P,O,H,J,ce){var ue=h&v,me=ue?O:e,Re=ue?e:O,ze=ue?P:e,dt=ue?e:P;h|=ue?w:B,h&=~(ue?B:w),h&C||(h&=~(A|y));var Kt=[d,h,S,ze,me,dt,Re,H,J,ce],ft=m.apply(e,Kt);return X2(d)&&z9(ft,Kt),ft.placeholder=E,J9(ft,d,h)}function $2(d){var h=Ni[d];return function(m,E){if(m=il(m),E=E==null?0:Ns(Wt(E),292),E&&J6(m)){var S=(jr(m)+"e").split("e"),P=h(S[0]+"e"+(+S[1]+E));return S=(jr(P)+"e").split("e"),+(S[0]+"e"+(+S[1]-E))}return h(m)}}var dBe=tm&&1/qw(new tm([,-0]))[1]==se?function(d){return new tm(d)}:gP;function L9(d){return function(h){var m=Ps(h);return m==be?b2(h):m==_i?BIe(h):Qi(h,d(h))}}function Ad(d,h,m,E,S,P,O,H){var J=h&y;if(!J&&typeof d!="function")throw new Xa(i);var ce=E?E.length:0;if(ce||(h&=~(w|B),E=S=e),O=O===e?O:Pi(Wt(O),0),H=H===e?H:Wt(H),ce-=S?S.length:0,h&B){var ue=E,me=S;E=S=e}var Re=J?e:z2(d),ze=[d,h,m,E,S,ue,me,P,O,H];if(Re&&IBe(ze,Re),d=ze[0],h=ze[1],m=ze[2],E=ze[3],S=ze[4],H=ze[9]=ze[9]===e?J?0:d.length:Pi(ze[9]-ce,0),!H&&h&(v|b)&&(h&=~(v|b)),!h||h==A)var dt=lBe(d,h,m);else h==v||h==b?dt=cBe(d,h,H):(h==w||h==(A|w))&&!S.length?dt=uBe(d,h,m,E):dt=cI.apply(e,ze);var Kt=Re?y9:z9;return J9(Kt(dt,ze),d,h)}function U9(d,h,m,E){return d===e||Xl(d,em[m])&&!on.call(E,m)?h:d}function O9(d,h,m,E,S,P){return Vn(d)&&Vn(h)&&(P.set(h,d),sI(d,h,e,O9,P),P.delete(h)),d}function fBe(d){return Mv(d)?e:d}function q9(d,h,m,E,S,P){var O=m&p,H=d.length,J=h.length;if(H!=J&&!(O&&J>H))return!1;var ce=P.get(d),ue=P.get(h);if(ce&&ue)return ce==h&&ue==d;var me=-1,Re=!0,ze=m&g?new kg:e;for(P.set(d,h),P.set(h,d);++me<H;){var dt=d[me],Kt=h[me];if(E)var ft=O?E(Kt,dt,me,h,d,P):E(dt,Kt,me,d,h,P);if(ft!==e){if(ft)continue;Re=!1;break}if(ze){if(!Dg(h,function(or,vr){if(!To(ze,vr)&&(dt===or||S(dt,or,m,E,P)))return ze.push(vr)})){Re=!1;break}}else if(!(dt===Kt||S(dt,Kt,m,E,P))){Re=!1;break}}return P.delete(d),P.delete(h),Re}function hBe(d,h,m,E,S,P,O){switch(m){case ca:if(d.byteLength!=h.byteLength||d.byteOffset!=h.byteOffset)return!1;d=d.buffer,h=h.buffer;case Yi:return!(d.byteLength!=h.byteLength||!P(new Yw(d),new Yw(h)));case ir:case Lr:case Fr:return Xl(+d,+h);case sn:return d.name==h.name&&d.message==h.message;case _n:case eo:return d==h+"";case be:var H=b2;case _i:var J=E&p;if(H||(H=qw),d.size!=h.size&&!J)return!1;var ce=O.get(d);if(ce)return ce==h;E|=g,O.set(d,h);var ue=q9(H(d),H(h),E,S,P,O);return O.delete(d),ue;case id:if(wv)return wv.call(d)==wv.call(h)}return!1}function gBe(d,h,m,E,S,P){var O=m&p,H=Y2(d),J=H.length,ce=Y2(h),ue=ce.length;if(J!=ue&&!O)return!1;for(var me=J;me--;){var Re=H[me];if(!(O?Re in h:on.call(h,Re)))return!1}var ze=P.get(d),dt=P.get(h);if(ze&&dt)return ze==h&&dt==d;var Kt=!0;P.set(d,h),P.set(h,d);for(var ft=O;++me<J;){Re=H[me];var or=d[Re],vr=h[Re];if(E)var pa=O?E(vr,or,Re,h,d,P):E(or,vr,Re,d,h,P);if(!(pa===e?or===vr||S(or,vr,m,E,P):pa)){Kt=!1;break}ft||(ft=Re=="constructor")}if(Kt&&!ft){var oo=d.constructor,Aa=h.constructor;oo!=Aa&&"constructor"in d&&"constructor"in h&&!(typeof oo=="function"&&oo instanceof oo&&typeof Aa=="function"&&Aa instanceof Aa)&&(Kt=!1)}return P.delete(d),P.delete(h),Kt}function md(d){return tP(Y9(d,e,r$),d+"")}function Y2(d){return a9(d,Ki,j2)}function K2(d){return a9(d,Fo,V9)}var z2=Xw?function(d){return Xw.get(d)}:gP;function hI(d){for(var h=d.name+"",m=rm[h],E=on.call(rm,h)?m.length:0;E--;){var S=m[E],P=S.func;if(P==null||P==d)return S.name}return h}function om(d){var h=on.call(M,"placeholder")?M:d;return h.placeholder}function ut(){var d=M.iteratee||fP;return d=d===fP?u9:d,arguments.length?d(arguments[0],arguments[1]):d}function gI(d,h){var m=d.__data__;return bBe(h)?m[typeof h=="string"?"string":"hash"]:m.map}function J2(d){for(var h=Ki(d),m=h.length;m--;){var E=h[m],S=d[E];h[m]=[E,S,G9(S)]}return h}function Qg(d,h){var m=wIe(d,h);return c9(m)?m:e}function pBe(d){var h=on.call(d,Tg),m=d[Tg];try{d[Tg]=e;var E=!0}catch{}var S=Gw.call(d);return E&&(h?d[Tg]=m:delete d[Tg]),S}var j2=_2?function(d){return d==null?[]:(d=gn(d),Za(_2(d),function(h){return K6.call(d,h)}))}:pP,V9=_2?function(d){for(var h=[];d;)ro(h,j2(d)),d=Kw(d);return h}:pP,Ps=io;(w2&&Ps(new w2(new ArrayBuffer(1)))!=ca||bv&&Ps(new bv)!=be||I2&&Ps(I2.resolve())!=bt||tm&&Ps(new tm)!=_i||xv&&Ps(new xv)!=sr)&&(Ps=function(d){var h=io(d),m=h==Ee?d.constructor:e,E=m?Ng(m):"";if(E)switch(E){case jIe:return ca;case ZIe:return be;case XIe:return bt;case eSe:return _i;case tSe:return sr}return h});function ABe(d,h,m){for(var E=-1,S=m.length;++E<S;){var P=m[E],O=P.size;switch(P.type){case"drop":d+=O;break;case"dropRight":h-=O;break;case"take":h=Ns(h,d+O);break;case"takeRight":d=Pi(d,h-O);break}}return{start:d,end:h}}function mBe(d){var h=d.match(je);return h?h[1].split(Xt):[]}function H9(d,h,m){h=Nf(h,d);for(var E=-1,S=h.length,P=!1;++E<S;){var O=Jc(h[E]);if(!(P=d!=null&&m(d,O)))break;d=d[O]}return P||++E!=S?P:(S=d==null?0:d.length,!!S&&EI(S)&&yd(O,S)&&(kt(d)||Pg(d)))}function yBe(d){var h=d.length,m=new d.constructor(h);return h&&typeof d[0]=="string"&&on.call(d,"index")&&(m.index=d.index,m.input=d.input),m}function W9(d){return typeof d.constructor=="function"&&!kv(d)?nm(Kw(d)):{}}function CBe(d,h,m){var E=d.constructor;switch(h){case Yi:return W2(d);case ir:case Lr:return new E(+d);case ca:return rBe(d,m);case sd:case od:case tv:case ua:case rv:case nv:case Cr:case St:case wn:return I9(d,m);case be:return new E;case Fr:case eo:return new E(d);case _n:return nBe(d);case _i:return new E;case id:return iBe(d)}}function vBe(d,h){var m=h.length;if(!m)return d;var E=m-1;return h[E]=(m>1?"& ":"")+h[E],h=h.join(m>2?", ":" "),d.replace(ad,`{
/* [wrapped with `+h+`] */
`)}function EBe(d){return kt(d)||Pg(d)||!!(z6&&d&&d[z6])}function yd(d,h){var m=typeof d;return h=h??z,!!h&&(m=="number"||m!="symbol"&&o2.test(d))&&d>-1&&d%1==0&&d<h}function so(d,h,m){if(!Vn(m))return!1;var E=typeof h;return(E=="number"?ko(m)&&yd(h,m.length):E=="string"&&h in m)?Xl(m[h],d):!1}function Z2(d,h){if(kt(d))return!1;var m=typeof d;return m=="number"||m=="symbol"||m=="boolean"||d==null||ga(d)?!0:t2.test(d)||!qA.test(d)||h!=null&&d in gn(h)}function bBe(d){var h=typeof d;return h=="string"||h=="number"||h=="symbol"||h=="boolean"?d!=="__proto__":d===null}function X2(d){var h=hI(d),m=M[h];if(typeof m!="function"||!(h in hr.prototype))return!1;if(d===m)return!0;var E=z2(m);return!!E&&d===E[0]}function xBe(d){return!!G6&&G6 in d}var _Be=Hw?Cd:AP;function kv(d){var h=d&&d.constructor,m=typeof h=="function"&&h.prototype||em;return d===m}function G9(d){return d===d&&!Vn(d)}function $9(d,h){return function(m){return m==null?!1:m[d]===h&&(h!==e||d in gn(m))}}function wBe(d){var h=CI(d,function(E){return m.size===a&&m.clear(),E}),m=h.cache;return h}function IBe(d,h){var m=d[1],E=h[1],S=m|E,P=S<(A|y|F),O=E==F&&m==v||E==F&&m==Q&&d[7].length<=h[8]||E==(F|Q)&&h[7].length<=h[8]&&m==v;if(!(P||O))return d;E&A&&(d[2]=h[2],S|=m&A?0:C);var H=h[3];if(H){var J=d[3];d[3]=J?B9(J,H,h[4]):H,d[4]=J?Rf(d[3],l):h[4]}return H=h[5],H&&(J=d[5],d[5]=J?D9(J,H,h[6]):H,d[6]=J?Rf(d[5],l):h[6]),H=h[7],H&&(d[7]=H),E&F&&(d[8]=d[8]==null?h[8]:Ns(d[8],h[8])),d[9]==null&&(d[9]=h[9]),d[0]=h[0],d[1]=S,d}function SBe(d){var h=[];if(d!=null)for(var m in gn(d))h.push(m);return h}function BBe(d){return Gw.call(d)}function Y9(d,h,m){return h=Pi(h===e?d.length-1:h,0),function(){for(var E=arguments,S=-1,P=Pi(E.length-h,0),O=ie(P);++S<P;)O[S]=E[h+S];S=-1;for(var H=ie(h+1);++S<h;)H[S]=E[S];return H[h]=m(O),As(d,this,H)}}function K9(d,h){return h.length<2?d:Mg(d,rl(h,0,-1))}function DBe(d,h){for(var m=d.length,E=Ns(h.length,m),S=Ro(d);E--;){var P=h[E];d[E]=yd(P,m)?S[P]:e}return d}function eP(d,h){if(!(h==="constructor"&&typeof d[h]=="function")&&h!="__proto__")return d[h]}var z9=j9(y9),Fv=WIe||function(d,h){return wi.setTimeout(d,h)},tP=j9(ZSe);function J9(d,h,m){var E=h+"";return tP(d,vBe(E,TBe(mBe(E),m)))}function j9(d){var h=0,m=0;return function(){var E=KIe(),S=U-(E-m);if(m=E,S>0){if(++h>=ee)return arguments[0]}else h=0;return d.apply(e,arguments)}}function pI(d,h){var m=-1,E=d.length,S=E-1;for(h=h===e?E:h;++m<h;){var P=P2(m,S),O=d[P];d[P]=d[m],d[m]=O}return d.length=h,d}var Z9=wBe(function(d){var h=[];return d.charCodeAt(0)===46&&h.push(""),d.replace(sv,function(m,E,S,P){h.push(S?P.replace(Gc,"$1"):E||m)}),h});function Jc(d){if(typeof d=="string"||ga(d))return d;var h=d+"";return h=="0"&&1/d==-se?"-0":h}function Ng(d){if(d!=null){try{return Ww.call(d)}catch{}try{return d+""}catch{}}return""}function TBe(d,h){return ms(Zt,function(m){var E="_."+m[0];h&m[1]&&!dd(d,E)&&d.push(E)}),d.sort()}function X9(d){if(d instanceof hr)return d.clone();var h=new el(d.__wrapped__,d.__chain__);return h.__actions__=Ro(d.__actions__),h.__index__=d.__index__,h.__values__=d.__values__,h}function RBe(d,h,m){(m?so(d,h,m):h===e)?h=1:h=Pi(Wt(h),0);var E=d==null?0:d.length;if(!E||h<1)return[];for(var S=0,P=0,O=ie(jw(E/h));S<E;)O[P++]=rl(d,S,S+=h);return O}function kBe(d){for(var h=-1,m=d==null?0:d.length,E=0,S=[];++h<m;){var P=d[h];P&&(S[E++]=P)}return S}function FBe(){var d=arguments.length;if(!d)return[];for(var h=ie(d-1),m=arguments[0],E=d;E--;)h[E-1]=arguments[E];return ro(kt(m)?Ro(m):[m],ys(h,1))}var MBe=er(function(d,h){return pi(d)?Sv(d,ys(h,1,pi,!0)):[]}),QBe=er(function(d,h){var m=nl(h);return pi(m)&&(m=e),pi(d)?Sv(d,ys(h,1,pi,!0),ut(m,2)):[]}),NBe=er(function(d,h){var m=nl(h);return pi(m)&&(m=e),pi(d)?Sv(d,ys(h,1,pi,!0),e,m):[]});function PBe(d,h,m){var E=d==null?0:d.length;return E?(h=m||h===e?1:Wt(h),rl(d,h<0?0:h,E)):[]}function LBe(d,h,m){var E=d==null?0:d.length;return E?(h=m||h===e?1:Wt(h),h=E-h,rl(d,0,h<0?0:h)):[]}function UBe(d,h){return d&&d.length?aI(d,ut(h,3),!0,!0):[]}function OBe(d,h){return d&&d.length?aI(d,ut(h,3),!0):[]}function qBe(d,h,m,E){var S=d==null?0:d.length;return S?(m&&typeof m!="number"&&so(d,h,m)&&(m=0,E=S),FSe(d,h,m,E)):[]}function e$(d,h,m){var E=d==null?0:d.length;if(!E)return-1;var S=m==null?0:Wt(m);return S<0&&(S=Pi(E+S,0)),jA(d,ut(h,3),S)}function t$(d,h,m){var E=d==null?0:d.length;if(!E)return-1;var S=E-1;return m!==e&&(S=Wt(m),S=m<0?Pi(E+S,0):Ns(S,E-1)),jA(d,ut(h,3),S,!0)}function r$(d){var h=d==null?0:d.length;return h?ys(d,1):[]}function VBe(d){var h=d==null?0:d.length;return h?ys(d,se):[]}function HBe(d,h){var m=d==null?0:d.length;return m?(h=h===e?1:Wt(h),ys(d,h)):[]}function WBe(d){for(var h=-1,m=d==null?0:d.length,E={};++h<m;){var S=d[h];E[S[0]]=S[1]}return E}function n$(d){return d&&d.length?d[0]:e}function GBe(d,h,m){var E=d==null?0:d.length;if(!E)return-1;var S=m==null?0:Wt(m);return S<0&&(S=Pi(E+S,0)),fd(d,h,S)}function $Be(d){var h=d==null?0:d.length;return h?rl(d,0,-1):[]}var YBe=er(function(d){var h=Jr(d,V2);return h.length&&h[0]===d[0]?k2(h):[]}),KBe=er(function(d){var h=nl(d),m=Jr(d,V2);return h===nl(m)?h=e:m.pop(),m.length&&m[0]===d[0]?k2(m,ut(h,2)):[]}),zBe=er(function(d){var h=nl(d),m=Jr(d,V2);return h=typeof h=="function"?h:e,h&&m.pop(),m.length&&m[0]===d[0]?k2(m,e,h):[]});function JBe(d,h){return d==null?"":$Ie.call(d,h)}function nl(d){var h=d==null?0:d.length;return h?d[h-1]:e}function jBe(d,h,m){var E=d==null?0:d.length;if(!E)return-1;var S=E;return m!==e&&(S=Wt(m),S=S<0?Pi(E+S,0):Ns(S,E-1)),h===h?TIe(d,h,S):jA(d,I,S,!0)}function ZBe(d,h){return d&&d.length?g9(d,Wt(h)):e}var XBe=er(i$);function i$(d,h){return d&&d.length&&h&&h.length?N2(d,h):d}function eDe(d,h,m){return d&&d.length&&h&&h.length?N2(d,h,ut(m,2)):d}function tDe(d,h,m){return d&&d.length&&h&&h.length?N2(d,h,e,m):d}var rDe=md(function(d,h){var m=d==null?0:d.length,E=B2(d,h);return m9(d,Jr(h,function(S){return yd(S,m)?+S:S}).sort(S9)),E});function nDe(d,h){var m=[];if(!(d&&d.length))return m;var E=-1,S=[],P=d.length;for(h=ut(h,3);++E<P;){var O=d[E];h(O,E,d)&&(m.push(O),S.push(E))}return m9(d,S),m}function rP(d){return d==null?d:JIe.call(d)}function iDe(d,h,m){var E=d==null?0:d.length;return E?(m&&typeof m!="number"&&so(d,h,m)?(h=0,m=E):(h=h==null?0:Wt(h),m=m===e?E:Wt(m)),rl(d,h,m)):[]}function sDe(d,h){return oI(d,h)}function oDe(d,h,m){return U2(d,h,ut(m,2))}function aDe(d,h){var m=d==null?0:d.length;if(m){var E=oI(d,h);if(E<m&&Xl(d[E],h))return E}return-1}function lDe(d,h){return oI(d,h,!0)}function cDe(d,h,m){return U2(d,h,ut(m,2),!0)}function uDe(d,h){var m=d==null?0:d.length;if(m){var E=oI(d,h,!0)-1;if(Xl(d[E],h))return E}return-1}function dDe(d){return d&&d.length?C9(d):[]}function fDe(d,h){return d&&d.length?C9(d,ut(h,2)):[]}function hDe(d){var h=d==null?0:d.length;return h?rl(d,1,h):[]}function gDe(d,h,m){return d&&d.length?(h=m||h===e?1:Wt(h),rl(d,0,h<0?0:h)):[]}function pDe(d,h,m){var E=d==null?0:d.length;return E?(h=m||h===e?1:Wt(h),h=E-h,rl(d,h<0?0:h,E)):[]}function ADe(d,h){return d&&d.length?aI(d,ut(h,3),!1,!0):[]}function mDe(d,h){return d&&d.length?aI(d,ut(h,3)):[]}var yDe=er(function(d){return Qf(ys(d,1,pi,!0))}),CDe=er(function(d){var h=nl(d);return pi(h)&&(h=e),Qf(ys(d,1,pi,!0),ut(h,2))}),vDe=er(function(d){var h=nl(d);return h=typeof h=="function"?h:e,Qf(ys(d,1,pi,!0),e,h)});function EDe(d){return d&&d.length?Qf(d):[]}function bDe(d,h){return d&&d.length?Qf(d,ut(h,2)):[]}function xDe(d,h){return h=typeof h=="function"?h:e,d&&d.length?Qf(d,e,h):[]}function nP(d){if(!(d&&d.length))return[];var h=0;return d=Za(d,function(m){if(pi(m))return h=Pi(m.length,h),!0}),hn(h,function(m){return Jr(d,re(m))})}function s$(d,h){if(!(d&&d.length))return[];var m=nP(d);return h==null?m:Jr(m,function(E){return As(h,e,E)})}var _De=er(function(d,h){return pi(d)?Sv(d,h):[]}),wDe=er(function(d){return q2(Za(d,pi))}),IDe=er(function(d){var h=nl(d);return pi(h)&&(h=e),q2(Za(d,pi),ut(h,2))}),SDe=er(function(d){var h=nl(d);return h=typeof h=="function"?h:e,q2(Za(d,pi),e,h)}),BDe=er(nP);function DDe(d,h){return x9(d||[],h||[],Iv)}function TDe(d,h){return x9(d||[],h||[],Tv)}var RDe=er(function(d){var h=d.length,m=h>1?d[h-1]:e;return m=typeof m=="function"?(d.pop(),m):e,s$(d,m)});function o$(d){var h=M(d);return h.__chain__=!0,h}function kDe(d,h){return h(d),d}function AI(d,h){return h(d)}var FDe=md(function(d){var h=d.length,m=h?d[0]:0,E=this.__wrapped__,S=function(P){return B2(P,d)};return h>1||this.__actions__.length||!(E instanceof hr)||!yd(m)?this.thru(S):(E=E.slice(m,+m+(h?1:0)),E.__actions__.push({func:AI,args:[S],thisArg:e}),new el(E,this.__chain__).thru(function(P){return h&&!P.length&&P.push(e),P}))});function MDe(){return o$(this)}function QDe(){return new el(this.value(),this.__chain__)}function NDe(){this.__values__===e&&(this.__values__=v$(this.value()));var d=this.__index__>=this.__values__.length,h=d?e:this.__values__[this.__index__++];return{done:d,value:h}}function PDe(){return this}function LDe(d){for(var h,m=this;m instanceof tI;){var E=X9(m);E.__index__=0,E.__values__=e,h?S.__wrapped__=E:h=E;var S=E;m=m.__wrapped__}return S.__wrapped__=d,h}function UDe(){var d=this.__wrapped__;if(d instanceof hr){var h=d;return this.__actions__.length&&(h=new hr(this)),h=h.reverse(),h.__actions__.push({func:AI,args:[rP],thisArg:e}),new el(h,this.__chain__)}return this.thru(rP)}function ODe(){return b9(this.__wrapped__,this.__actions__)}var qDe=lI(function(d,h,m){on.call(d,m)?++d[m]:pd(d,m,1)});function VDe(d,h,m){var E=kt(d)?Pw:kSe;return m&&so(d,h,m)&&(h=e),E(d,ut(h,3))}function HDe(d,h){var m=kt(d)?Za:s9;return m(d,ut(h,3))}var WDe=F9(e$),GDe=F9(t$);function $De(d,h){return ys(mI(d,h),1)}function YDe(d,h){return ys(mI(d,h),se)}function KDe(d,h,m){return m=m===e?1:Wt(m),ys(mI(d,h),m)}function a$(d,h){var m=kt(d)?ms:Mf;return m(d,ut(h,3))}function l$(d,h){var m=kt(d)?Do:i9;return m(d,ut(h,3))}var zDe=lI(function(d,h,m){on.call(d,m)?d[m].push(h):pd(d,m,[h])});function JDe(d,h,m,E){d=ko(d)?d:lm(d),m=m&&!E?Wt(m):0;var S=d.length;return m<0&&(m=Pi(S+m,0)),bI(d)?m<=S&&d.indexOf(h,m)>-1:!!S&&fd(d,h,m)>-1}var jDe=er(function(d,h,m){var E=-1,S=typeof h=="function",P=ko(d)?ie(d.length):[];return Mf(d,function(O){P[++E]=S?As(h,O,m):Bv(O,h,m)}),P}),ZDe=lI(function(d,h,m){pd(d,m,h)});function mI(d,h){var m=kt(d)?Jr:d9;return m(d,ut(h,3))}function XDe(d,h,m,E){return d==null?[]:(kt(h)||(h=h==null?[]:[h]),m=E?e:m,kt(m)||(m=m==null?[]:[m]),p9(d,h,m))}var eTe=lI(function(d,h,m){d[m?0:1].push(h)},function(){return[[],[]]});function tTe(d,h,m){var E=kt(d)?fa:De,S=arguments.length<3;return E(d,ut(h,4),m,S,Mf)}function rTe(d,h,m){var E=kt(d)?JA:De,S=arguments.length<3;return E(d,ut(h,4),m,S,i9)}function nTe(d,h){var m=kt(d)?Za:s9;return m(d,vI(ut(h,3)))}function iTe(d){var h=kt(d)?e9:JSe;return h(d)}function sTe(d,h,m){(m?so(d,h,m):h===e)?h=1:h=Wt(h);var E=kt(d)?SSe:jSe;return E(d,h)}function oTe(d){var h=kt(d)?BSe:XSe;return h(d)}function aTe(d){if(d==null)return 0;if(ko(d))return bI(d)?XA(d):d.length;var h=Ps(d);return h==be||h==_i?d.size:M2(d).length}function lTe(d,h,m){var E=kt(d)?Dg:eBe;return m&&so(d,h,m)&&(h=e),E(d,ut(h,3))}var cTe=er(function(d,h){if(d==null)return[];var m=h.length;return m>1&&so(d,h[0],h[1])?h=[]:m>2&&so(h[0],h[1],h[2])&&(h=[h[0]]),p9(d,ys(h,1),[])}),yI=HIe||function(){return wi.Date.now()};function uTe(d,h){if(typeof h!="function")throw new Xa(i);return d=Wt(d),function(){if(--d<1)return h.apply(this,arguments)}}function c$(d,h,m){return h=m?e:h,h=d&&h==null?d.length:h,Ad(d,F,e,e,e,e,h)}function u$(d,h){var m;if(typeof h!="function")throw new Xa(i);return d=Wt(d),function(){return--d>0&&(m=h.apply(this,arguments)),d<=1&&(h=e),m}}var iP=er(function(d,h,m){var E=A;if(m.length){var S=Rf(m,om(iP));E|=w}return Ad(d,E,h,m,S)}),d$=er(function(d,h,m){var E=A|y;if(m.length){var S=Rf(m,om(d$));E|=w}return Ad(h,E,d,m,S)});function f$(d,h,m){h=m?e:h;var E=Ad(d,v,e,e,e,e,e,h);return E.placeholder=f$.placeholder,E}function h$(d,h,m){h=m?e:h;var E=Ad(d,b,e,e,e,e,e,h);return E.placeholder=h$.placeholder,E}function g$(d,h,m){var E,S,P,O,H,J,ce=0,ue=!1,me=!1,Re=!0;if(typeof d!="function")throw new Xa(i);h=il(h)||0,Vn(m)&&(ue=!!m.leading,me="maxWait"in m,P=me?Pi(il(m.maxWait)||0,h):P,Re="trailing"in m?!!m.trailing:Re);function ze(Ai){var ec=E,Ed=S;return E=S=e,ce=Ai,O=d.apply(Ed,ec),O}function dt(Ai){return ce=Ai,H=Fv(or,h),ue?ze(Ai):O}function Kt(Ai){var ec=Ai-J,Ed=Ai-ce,F$=h-ec;return me?Ns(F$,P-Ed):F$}function ft(Ai){var ec=Ai-J,Ed=Ai-ce;return J===e||ec>=h||ec<0||me&&Ed>=P}function or(){var Ai=yI();if(ft(Ai))return vr(Ai);H=Fv(or,Kt(Ai))}function vr(Ai){return H=e,Re&&E?ze(Ai):(E=S=e,O)}function pa(){H!==e&&_9(H),ce=0,E=J=S=H=e}function oo(){return H===e?O:vr(yI())}function Aa(){var Ai=yI(),ec=ft(Ai);if(E=arguments,S=this,J=Ai,ec){if(H===e)return dt(J);if(me)return _9(H),H=Fv(or,h),ze(J)}return H===e&&(H=Fv(or,h)),O}return Aa.cancel=pa,Aa.flush=oo,Aa}var dTe=er(function(d,h){return n9(d,1,h)}),fTe=er(function(d,h,m){return n9(d,il(h)||0,m)});function hTe(d){return Ad(d,W)}function CI(d,h){if(typeof d!="function"||h!=null&&typeof h!="function")throw new Xa(i);var m=function(){var E=arguments,S=h?h.apply(this,E):E[0],P=m.cache;if(P.has(S))return P.get(S);var O=d.apply(this,E);return m.cache=P.set(S,O)||P,O};return m.cache=new(CI.Cache||gd),m}CI.Cache=gd;function vI(d){if(typeof d!="function")throw new Xa(i);return function(){var h=arguments;switch(h.length){case 0:return!d.call(this);case 1:return!d.call(this,h[0]);case 2:return!d.call(this,h[0],h[1]);case 3:return!d.call(this,h[0],h[1],h[2])}return!d.apply(this,h)}}function gTe(d){return u$(2,d)}var pTe=tBe(function(d,h){h=h.length==1&&kt(h[0])?Jr(h[0],Sn(ut())):Jr(ys(h,1),Sn(ut()));var m=h.length;return er(function(E){for(var S=-1,P=Ns(E.length,m);++S<P;)E[S]=h[S].call(this,E[S]);return As(d,this,E)})}),sP=er(function(d,h){var m=Rf(h,om(sP));return Ad(d,w,e,h,m)}),p$=er(function(d,h){var m=Rf(h,om(p$));return Ad(d,B,e,h,m)}),ATe=md(function(d,h){return Ad(d,Q,e,e,e,h)});function mTe(d,h){if(typeof d!="function")throw new Xa(i);return h=h===e?h:Wt(h),er(d,h)}function yTe(d,h){if(typeof d!="function")throw new Xa(i);return h=h==null?0:Pi(Wt(h),0),er(function(m){var E=m[h],S=Pf(m,0,h);return E&&ro(S,E),As(d,this,S)})}function CTe(d,h,m){var E=!0,S=!0;if(typeof d!="function")throw new Xa(i);return Vn(m)&&(E="leading"in m?!!m.leading:E,S="trailing"in m?!!m.trailing:S),g$(d,h,{leading:E,maxWait:h,trailing:S})}function vTe(d){return c$(d,1)}function ETe(d,h){return sP(H2(h),d)}function bTe(){if(!arguments.length)return[];var d=arguments[0];return kt(d)?d:[d]}function xTe(d){return tl(d,f)}function _Te(d,h){return h=typeof h=="function"?h:e,tl(d,f,h)}function wTe(d){return tl(d,c|f)}function ITe(d,h){return h=typeof h=="function"?h:e,tl(d,c|f,h)}function STe(d,h){return h==null||r9(d,h,Ki(h))}function Xl(d,h){return d===h||d!==d&&h!==h}var BTe=fI(R2),DTe=fI(function(d,h){return d>=h}),Pg=l9(function(){return arguments}())?l9:function(d){return ei(d)&&on.call(d,"callee")&&!K6.call(d,"callee")},kt=ie.isArray,TTe=Yc?Sn(Yc):LSe;function ko(d){return d!=null&&EI(d.length)&&!Cd(d)}function pi(d){return ei(d)&&ko(d)}function RTe(d){return d===!0||d===!1||ei(d)&&io(d)==ir}var Lf=GIe||AP,kTe=Nw?Sn(Nw):USe;function FTe(d){return ei(d)&&d.nodeType===1&&!Mv(d)}function MTe(d){if(d==null)return!0;if(ko(d)&&(kt(d)||typeof d=="string"||typeof d.splice=="function"||Lf(d)||am(d)||Pg(d)))return!d.length;var h=Ps(d);if(h==be||h==_i)return!d.size;if(kv(d))return!M2(d).length;for(var m in d)if(on.call(d,m))return!1;return!0}function QTe(d,h){return Dv(d,h)}function NTe(d,h,m){m=typeof m=="function"?m:e;var E=m?m(d,h):e;return E===e?Dv(d,h,e,m):!!E}function oP(d){if(!ei(d))return!1;var h=io(d);return h==sn||h==He||typeof d.message=="string"&&typeof d.name=="string"&&!Mv(d)}function PTe(d){return typeof d=="number"&&J6(d)}function Cd(d){if(!Vn(d))return!1;var h=io(d);return h==Ur||h==fr||h==kr||h==ln}function A$(d){return typeof d=="number"&&d==Wt(d)}function EI(d){return typeof d=="number"&&d>-1&&d%1==0&&d<=z}function Vn(d){var h=typeof d;return d!=null&&(h=="object"||h=="function")}function ei(d){return d!=null&&typeof d=="object"}var m$=yv?Sn(yv):qSe;function LTe(d,h){return d===h||F2(d,h,J2(h))}function UTe(d,h,m){return m=typeof m=="function"?m:e,F2(d,h,J2(h),m)}function OTe(d){return y$(d)&&d!=+d}function qTe(d){if(_Be(d))throw new Tt(n);return c9(d)}function VTe(d){return d===null}function HTe(d){return d==null}function y$(d){return typeof d=="number"||ei(d)&&io(d)==Fr}function Mv(d){if(!ei(d)||io(d)!=Ee)return!1;var h=Kw(d);if(h===null)return!0;var m=on.call(h,"constructor")&&h.constructor;return typeof m=="function"&&m instanceof m&&Ww.call(m)==UIe}var aP=Bg?Sn(Bg):VSe;function WTe(d){return A$(d)&&d>=-z&&d<=z}var C$=In?Sn(In):HSe;function bI(d){return typeof d=="string"||!kt(d)&&ei(d)&&io(d)==eo}function ga(d){return typeof d=="symbol"||ei(d)&&io(d)==id}var am=Cv?Sn(Cv):WSe;function GTe(d){return d===e}function $Te(d){return ei(d)&&Ps(d)==sr}function YTe(d){return ei(d)&&io(d)==e2}var KTe=fI(Q2),zTe=fI(function(d,h){return d<=h});function v$(d){if(!d)return[];if(ko(d))return bI(d)?jl(d):Ro(d);if(Ev&&d[Ev])return SIe(d[Ev]());var h=Ps(d),m=h==be?b2:h==_i?qw:lm;return m(d)}function vd(d){if(!d)return d===0?d:0;if(d=il(d),d===se||d===-se){var h=d<0?-1:1;return h*ne}return d===d?d:0}function Wt(d){var h=vd(d),m=h%1;return h===h?m?h-m:h:0}function E$(d){return d?Fg(Wt(d),0,It):0}function il(d){if(typeof d=="number")return d;if(ga(d))return Ke;if(Vn(d)){var h=typeof d.valueOf=="function"?d.valueOf():d;d=Vn(h)?h+"":h}if(typeof d!="string")return d===0?d:+d;d=no(d);var m=gw.test(d);return m||s2.test(d)?v2(d.slice(2),m?2:8):n2.test(d)?Ke:+d}function b$(d){return zc(d,Fo(d))}function JTe(d){return d?Fg(Wt(d),-z,z):d===0?d:0}function jr(d){return d==null?"":ha(d)}var jTe=im(function(d,h){if(kv(h)||ko(h)){zc(h,Ki(h),d);return}for(var m in h)on.call(h,m)&&Iv(d,m,h[m])}),x$=im(function(d,h){zc(h,Fo(h),d)}),xI=im(function(d,h,m,E){zc(h,Fo(h),d,E)}),ZTe=im(function(d,h,m,E){zc(h,Ki(h),d,E)}),XTe=md(B2);function eRe(d,h){var m=nm(d);return h==null?m:t9(m,h)}var tRe=er(function(d,h){d=gn(d);var m=-1,E=h.length,S=E>2?h[2]:e;for(S&&so(h[0],h[1],S)&&(E=1);++m<E;)for(var P=h[m],O=Fo(P),H=-1,J=O.length;++H<J;){var ce=O[H],ue=d[ce];(ue===e||Xl(ue,em[ce])&&!on.call(d,ce))&&(d[ce]=P[ce])}return d}),rRe=er(function(d){return d.push(e,O9),As(_$,e,d)});function nRe(d,h){return Uw(d,ut(h,3),Kc)}function iRe(d,h){return Uw(d,ut(h,3),T2)}function sRe(d,h){return d==null?d:D2(d,ut(h,3),Fo)}function oRe(d,h){return d==null?d:o9(d,ut(h,3),Fo)}function aRe(d,h){return d&&Kc(d,ut(h,3))}function lRe(d,h){return d&&T2(d,ut(h,3))}function cRe(d){return d==null?[]:iI(d,Ki(d))}function uRe(d){return d==null?[]:iI(d,Fo(d))}function lP(d,h,m){var E=d==null?e:Mg(d,h);return E===e?m:E}function dRe(d,h){return d!=null&&H9(d,h,MSe)}function cP(d,h){return d!=null&&H9(d,h,QSe)}var fRe=Q9(function(d,h,m){h!=null&&typeof h.toString!="function"&&(h=Gw.call(h)),d[h]=m},dP(Mo)),hRe=Q9(function(d,h,m){h!=null&&typeof h.toString!="function"&&(h=Gw.call(h)),on.call(d,h)?d[h].push(m):d[h]=[m]},ut),gRe=er(Bv);function Ki(d){return ko(d)?X6(d):M2(d)}function Fo(d){return ko(d)?X6(d,!0):GSe(d)}function pRe(d,h){var m={};return h=ut(h,3),Kc(d,function(E,S,P){pd(m,h(E,S,P),E)}),m}function ARe(d,h){var m={};return h=ut(h,3),Kc(d,function(E,S,P){pd(m,S,h(E,S,P))}),m}var mRe=im(function(d,h,m){sI(d,h,m)}),_$=im(function(d,h,m,E){sI(d,h,m,E)}),yRe=md(function(d,h){var m={};if(d==null)return m;var E=!1;h=Jr(h,function(P){return P=Nf(P,d),E||(E=P.length>1),P}),zc(d,K2(d),m),E&&(m=tl(m,c|u|f,fBe));for(var S=h.length;S--;)O2(m,h[S]);return m});function CRe(d,h){return w$(d,vI(ut(h)))}var vRe=md(function(d,h){return d==null?{}:YSe(d,h)});function w$(d,h){if(d==null)return{};var m=Jr(K2(d),function(E){return[E]});return h=ut(h),A9(d,m,function(E,S){return h(E,S[0])})}function ERe(d,h,m){h=Nf(h,d);var E=-1,S=h.length;for(S||(S=1,d=e);++E<S;){var P=d==null?e:d[Jc(h[E])];P===e&&(E=S,P=m),d=Cd(P)?P.call(d):P}return d}function bRe(d,h,m){return d==null?d:Tv(d,h,m)}function xRe(d,h,m,E){return E=typeof E=="function"?E:e,d==null?d:Tv(d,h,m,E)}var I$=L9(Ki),S$=L9(Fo);function _Re(d,h,m){var E=kt(d),S=E||Lf(d)||am(d);if(h=ut(h,4),m==null){var P=d&&d.constructor;S?m=E?new P:[]:Vn(d)?m=Cd(P)?nm(Kw(d)):{}:m={}}return(S?ms:Kc)(d,function(O,H,J){return h(m,O,H,J)}),m}function wRe(d,h){return d==null?!0:O2(d,h)}function IRe(d,h,m){return d==null?d:E9(d,h,H2(m))}function SRe(d,h,m,E){return E=typeof E=="function"?E:e,d==null?d:E9(d,h,H2(m),E)}function lm(d){return d==null?[]:Jl(d,Ki(d))}function BRe(d){return d==null?[]:Jl(d,Fo(d))}function DRe(d,h,m){return m===e&&(m=h,h=e),m!==e&&(m=il(m),m=m===m?m:0),h!==e&&(h=il(h),h=h===h?h:0),Fg(il(d),h,m)}function TRe(d,h,m){return h=vd(h),m===e?(m=h,h=0):m=vd(m),d=il(d),NSe(d,h,m)}function RRe(d,h,m){if(m&&typeof m!="boolean"&&so(d,h,m)&&(h=m=e),m===e&&(typeof h=="boolean"?(m=h,h=e):typeof d=="boolean"&&(m=d,d=e)),d===e&&h===e?(d=0,h=1):(d=vd(d),h===e?(h=d,d=0):h=vd(h)),d>h){var E=d;d=h,h=E}if(m||d%1||h%1){var S=j6();return Ns(d+S*(h-d+C2("1e-"+((S+"").length-1))),h)}return P2(d,h)}var kRe=sm(function(d,h,m){return h=h.toLowerCase(),d+(m?B$(h):h)});function B$(d){return uP(jr(d).toLowerCase())}function D$(d){return d=jr(d),d&&d.replace(a2,bIe).replace(A2,"")}function FRe(d,h,m){d=jr(d),h=ha(h);var E=d.length;m=m===e?E:Fg(Wt(m),0,E);var S=m;return m-=h.length,m>=0&&d.slice(m,S)==h}function MRe(d){return d=jr(d),d&&iv.test(d)?d.replace(vt,xIe):d}function QRe(d){return d=jr(d),d&&VA.test(d)?d.replace(Mi,"\\$&"):d}var NRe=sm(function(d,h,m){return d+(m?"-":"")+h.toLowerCase()}),PRe=sm(function(d,h,m){return d+(m?" ":"")+h.toLowerCase()}),LRe=k9("toLowerCase");function URe(d,h,m){d=jr(d),h=Wt(h);var E=h?XA(d):0;if(!h||E>=h)return d;var S=(h-E)/2;return dI(Zw(S),m)+d+dI(jw(S),m)}function ORe(d,h,m){d=jr(d),h=Wt(h);var E=h?XA(d):0;return h&&E<h?d+dI(h-E,m):d}function qRe(d,h,m){d=jr(d),h=Wt(h);var E=h?XA(d):0;return h&&E<h?dI(h-E,m)+d:d}function VRe(d,h,m){return m||h==null?h=0:h&&(h=+h),zIe(jr(d).replace(ov,""),h||0)}function HRe(d,h,m){return(m?so(d,h,m):h===e)?h=1:h=Wt(h),L2(jr(d),h)}function WRe(){var d=arguments,h=jr(d[0]);return d.length<3?h:h.replace(d[1],d[2])}var GRe=sm(function(d,h,m){return d+(m?"_":"")+h.toLowerCase()});function $Re(d,h,m){return m&&typeof m!="number"&&so(d,h,m)&&(h=m=e),m=m===e?It:m>>>0,m?(d=jr(d),d&&(typeof h=="string"||h!=null&&!aP(h))&&(h=ha(h),!h&&ZA(d))?Pf(jl(d),0,m):d.split(h,m)):[]}var YRe=sm(function(d,h,m){return d+(m?" ":"")+uP(h)});function KRe(d,h,m){return d=jr(d),m=m==null?0:Fg(Wt(m),0,d.length),h=ha(h),d.slice(m,m+h.length)==h}function zRe(d,h,m){var E=M.templateSettings;m&&so(d,h,m)&&(h=e),d=jr(d),h=xI({},h,E,U9);var S=xI({},h.imports,E.imports,U9),P=Ki(S),O=Jl(S,P),H,J,ce=0,ue=h.interpolate||HA,me="__p += '",Re=x2((h.escape||HA).source+"|"+ue.source+"|"+(ue===If?av:HA).source+"|"+(h.evaluate||HA).source+"|$","g"),ze="//# sourceURL="+(on.call(h,"sourceURL")?(h.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++y2+"]")+`
`;d.replace(Re,function(ft,or,vr,pa,oo,Aa){return vr||(vr=pa),me+=d.slice(ce,Aa).replace(l2,_Ie),or&&(H=!0,me+=`' +
__e(`+or+`) +
'`),oo&&(J=!0,me+=`';
`+oo+`;
__p += '`),vr&&(me+=`' +
((__t = (`+vr+`)) == null ? '' : __t) +
'`),ce=Aa+ft.length,ft}),me+=`';
`;var dt=on.call(h,"variable")&&h.variable;if(!dt)me=`with (obj) {
`+me+`
}
`;else if(Ig.test(dt))throw new Tt(s);me=(J?me.replace(za,""):me).replace(Ja,"$1").replace(wg,"$1;"),me="function("+(dt||"obj")+`) {
`+(dt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(H?", __e = _.escape":"")+(J?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+me+`return __p
}`;var Kt=R$(function(){return qr(P,ze+"return "+me).apply(e,O)});if(Kt.source=me,oP(Kt))throw Kt;return Kt}function JRe(d){return jr(d).toLowerCase()}function jRe(d){return jr(d).toUpperCase()}function ZRe(d,h,m){if(d=jr(d),d&&(m||h===e))return no(d);if(!d||!(h=ha(h)))return d;var E=jl(d),S=jl(h),P=Tf(E,S),O=Ow(E,S)+1;return Pf(E,P,O).join("")}function XRe(d,h,m){if(d=jr(d),d&&(m||h===e))return d.slice(0,W6(d)+1);if(!d||!(h=ha(h)))return d;var E=jl(d),S=Ow(E,jl(h))+1;return Pf(E,0,S).join("")}function eke(d,h,m){if(d=jr(d),d&&(m||h===e))return d.replace(ov,"");if(!d||!(h=ha(h)))return d;var E=jl(d),S=Tf(E,jl(h));return Pf(E,S).join("")}function tke(d,h){var m=Z,E=$;if(Vn(h)){var S="separator"in h?h.separator:S;m="length"in h?Wt(h.length):m,E="omission"in h?ha(h.omission):E}d=jr(d);var P=d.length;if(ZA(d)){var O=jl(d);P=O.length}if(m>=P)return d;var H=m-XA(E);if(H<1)return E;var J=O?Pf(O,0,H).join(""):d.slice(0,H);if(S===e)return J+E;if(O&&(H+=J.length-H),aP(S)){if(d.slice(H).search(S)){var ce,ue=J;for(S.global||(S=x2(S.source,jr(hw.exec(S))+"g")),S.lastIndex=0;ce=S.exec(ue);)var me=ce.index;J=J.slice(0,me===e?H:me)}}else if(d.indexOf(ha(S),H)!=H){var Re=J.lastIndexOf(S);Re>-1&&(J=J.slice(0,Re))}return J+E}function rke(d){return d=jr(d),d&&UA.test(d)?d.replace(Yl,RIe):d}var nke=sm(function(d,h,m){return d+(m?" ":"")+h.toUpperCase()}),uP=k9("toUpperCase");function T$(d,h,m){return d=jr(d),h=m?e:h,h===e?IIe(d)?MIe(d):E2(d):d.match(h)||[]}var R$=er(function(d,h){try{return As(d,e,h)}catch(m){return oP(m)?m:new Tt(m)}}),ike=md(function(d,h){return ms(h,function(m){m=Jc(m),pd(d,m,iP(d[m],d))}),d});function ske(d){var h=d==null?0:d.length,m=ut();return d=h?Jr(d,function(E){if(typeof E[1]!="function")throw new Xa(i);return[m(E[0]),E[1]]}):[],er(function(E){for(var S=-1;++S<h;){var P=d[S];if(As(P[0],this,E))return As(P[1],this,E)}})}function oke(d){return RSe(tl(d,c))}function dP(d){return function(){return d}}function ake(d,h){return d==null||d!==d?h:d}var lke=M9(),cke=M9(!0);function Mo(d){return d}function fP(d){return u9(typeof d=="function"?d:tl(d,c))}function uke(d){return f9(tl(d,c))}function dke(d,h){return h9(d,tl(h,c))}var fke=er(function(d,h){return function(m){return Bv(m,d,h)}}),hke=er(function(d,h){return function(m){return Bv(d,m,h)}});function hP(d,h,m){var E=Ki(h),S=iI(h,E);m==null&&!(Vn(h)&&(S.length||!E.length))&&(m=h,h=d,d=this,S=iI(h,Ki(h)));var P=!(Vn(m)&&"chain"in m)||!!m.chain,O=Cd(d);return ms(S,function(H){var J=h[H];d[H]=J,O&&(d.prototype[H]=function(){var ce=this.__chain__;if(P||ce){var ue=d(this.__wrapped__),me=ue.__actions__=Ro(this.__actions__);return me.push({func:J,args:arguments,thisArg:d}),ue.__chain__=ce,ue}return J.apply(d,ro([this.value()],arguments))})}),d}function gke(){return wi._===this&&(wi._=OIe),this}function gP(){}function pke(d){return d=Wt(d),er(function(h){return g9(h,d)})}var Ake=G2(Jr),mke=G2(Pw),yke=G2(Dg);function k$(d){return Z2(d)?re(Jc(d)):KSe(d)}function Cke(d){return function(h){return d==null?e:Mg(d,h)}}var vke=N9(),Eke=N9(!0);function pP(){return[]}function AP(){return!1}function bke(){return{}}function xke(){return""}function _ke(){return!0}function wke(d,h){if(d=Wt(d),d<1||d>z)return[];var m=It,E=Ns(d,It);h=ut(h),d-=It;for(var S=hn(E,h);++m<d;)h(m);return S}function Ike(d){return kt(d)?Jr(d,Jc):ga(d)?[d]:Ro(Z9(jr(d)))}function Ske(d){var h=++LIe;return jr(d)+h}var Bke=uI(function(d,h){return d+h},0),Dke=$2("ceil"),Tke=uI(function(d,h){return d/h},1),Rke=$2("floor");function kke(d){return d&&d.length?nI(d,Mo,R2):e}function Fke(d,h){return d&&d.length?nI(d,ut(h,2),R2):e}function Mke(d){return L(d,Mo)}function Qke(d,h){return L(d,ut(h,2))}function Nke(d){return d&&d.length?nI(d,Mo,Q2):e}function Pke(d,h){return d&&d.length?nI(d,ut(h,2),Q2):e}var Lke=uI(function(d,h){return d*h},1),Uke=$2("round"),Oke=uI(function(d,h){return d-h},0);function qke(d){return d&&d.length?Ht(d,Mo):0}function Vke(d,h){return d&&d.length?Ht(d,ut(h,2)):0}return M.after=uTe,M.ary=c$,M.assign=jTe,M.assignIn=x$,M.assignInWith=xI,M.assignWith=ZTe,M.at=XTe,M.before=u$,M.bind=iP,M.bindAll=ike,M.bindKey=d$,M.castArray=bTe,M.chain=o$,M.chunk=RBe,M.compact=kBe,M.concat=FBe,M.cond=ske,M.conforms=oke,M.constant=dP,M.countBy=qDe,M.create=eRe,M.curry=f$,M.curryRight=h$,M.debounce=g$,M.defaults=tRe,M.defaultsDeep=rRe,M.defer=dTe,M.delay=fTe,M.difference=MBe,M.differenceBy=QBe,M.differenceWith=NBe,M.drop=PBe,M.dropRight=LBe,M.dropRightWhile=UBe,M.dropWhile=OBe,M.fill=qBe,M.filter=HDe,M.flatMap=$De,M.flatMapDeep=YDe,M.flatMapDepth=KDe,M.flatten=r$,M.flattenDeep=VBe,M.flattenDepth=HBe,M.flip=hTe,M.flow=lke,M.flowRight=cke,M.fromPairs=WBe,M.functions=cRe,M.functionsIn=uRe,M.groupBy=zDe,M.initial=$Be,M.intersection=YBe,M.intersectionBy=KBe,M.intersectionWith=zBe,M.invert=fRe,M.invertBy=hRe,M.invokeMap=jDe,M.iteratee=fP,M.keyBy=ZDe,M.keys=Ki,M.keysIn=Fo,M.map=mI,M.mapKeys=pRe,M.mapValues=ARe,M.matches=uke,M.matchesProperty=dke,M.memoize=CI,M.merge=mRe,M.mergeWith=_$,M.method=fke,M.methodOf=hke,M.mixin=hP,M.negate=vI,M.nthArg=pke,M.omit=yRe,M.omitBy=CRe,M.once=gTe,M.orderBy=XDe,M.over=Ake,M.overArgs=pTe,M.overEvery=mke,M.overSome=yke,M.partial=sP,M.partialRight=p$,M.partition=eTe,M.pick=vRe,M.pickBy=w$,M.property=k$,M.propertyOf=Cke,M.pull=XBe,M.pullAll=i$,M.pullAllBy=eDe,M.pullAllWith=tDe,M.pullAt=rDe,M.range=vke,M.rangeRight=Eke,M.rearg=ATe,M.reject=nTe,M.remove=nDe,M.rest=mTe,M.reverse=rP,M.sampleSize=sTe,M.set=bRe,M.setWith=xRe,M.shuffle=oTe,M.slice=iDe,M.sortBy=cTe,M.sortedUniq=dDe,M.sortedUniqBy=fDe,M.split=$Re,M.spread=yTe,M.tail=hDe,M.take=gDe,M.takeRight=pDe,M.takeRightWhile=ADe,M.takeWhile=mDe,M.tap=kDe,M.throttle=CTe,M.thru=AI,M.toArray=v$,M.toPairs=I$,M.toPairsIn=S$,M.toPath=Ike,M.toPlainObject=b$,M.transform=_Re,M.unary=vTe,M.union=yDe,M.unionBy=CDe,M.unionWith=vDe,M.uniq=EDe,M.uniqBy=bDe,M.uniqWith=xDe,M.unset=wRe,M.unzip=nP,M.unzipWith=s$,M.update=IRe,M.updateWith=SRe,M.values=lm,M.valuesIn=BRe,M.without=_De,M.words=T$,M.wrap=ETe,M.xor=wDe,M.xorBy=IDe,M.xorWith=SDe,M.zip=BDe,M.zipObject=DDe,M.zipObjectDeep=TDe,M.zipWith=RDe,M.entries=I$,M.entriesIn=S$,M.extend=x$,M.extendWith=xI,hP(M,M),M.add=Bke,M.attempt=R$,M.camelCase=kRe,M.capitalize=B$,M.ceil=Dke,M.clamp=DRe,M.clone=xTe,M.cloneDeep=wTe,M.cloneDeepWith=ITe,M.cloneWith=_Te,M.conformsTo=STe,M.deburr=D$,M.defaultTo=ake,M.divide=Tke,M.endsWith=FRe,M.eq=Xl,M.escape=MRe,M.escapeRegExp=QRe,M.every=VDe,M.find=WDe,M.findIndex=e$,M.findKey=nRe,M.findLast=GDe,M.findLastIndex=t$,M.findLastKey=iRe,M.floor=Rke,M.forEach=a$,M.forEachRight=l$,M.forIn=sRe,M.forInRight=oRe,M.forOwn=aRe,M.forOwnRight=lRe,M.get=lP,M.gt=BTe,M.gte=DTe,M.has=dRe,M.hasIn=cP,M.head=n$,M.identity=Mo,M.includes=JDe,M.indexOf=GBe,M.inRange=TRe,M.invoke=gRe,M.isArguments=Pg,M.isArray=kt,M.isArrayBuffer=TTe,M.isArrayLike=ko,M.isArrayLikeObject=pi,M.isBoolean=RTe,M.isBuffer=Lf,M.isDate=kTe,M.isElement=FTe,M.isEmpty=MTe,M.isEqual=QTe,M.isEqualWith=NTe,M.isError=oP,M.isFinite=PTe,M.isFunction=Cd,M.isInteger=A$,M.isLength=EI,M.isMap=m$,M.isMatch=LTe,M.isMatchWith=UTe,M.isNaN=OTe,M.isNative=qTe,M.isNil=HTe,M.isNull=VTe,M.isNumber=y$,M.isObject=Vn,M.isObjectLike=ei,M.isPlainObject=Mv,M.isRegExp=aP,M.isSafeInteger=WTe,M.isSet=C$,M.isString=bI,M.isSymbol=ga,M.isTypedArray=am,M.isUndefined=GTe,M.isWeakMap=$Te,M.isWeakSet=YTe,M.join=JBe,M.kebabCase=NRe,M.last=nl,M.lastIndexOf=jBe,M.lowerCase=PRe,M.lowerFirst=LRe,M.lt=KTe,M.lte=zTe,M.max=kke,M.maxBy=Fke,M.mean=Mke,M.meanBy=Qke,M.min=Nke,M.minBy=Pke,M.stubArray=pP,M.stubFalse=AP,M.stubObject=bke,M.stubString=xke,M.stubTrue=_ke,M.multiply=Lke,M.nth=ZBe,M.noConflict=gke,M.noop=gP,M.now=yI,M.pad=URe,M.padEnd=ORe,M.padStart=qRe,M.parseInt=VRe,M.random=RRe,M.reduce=tTe,M.reduceRight=rTe,M.repeat=HRe,M.replace=WRe,M.result=ERe,M.round=Uke,M.runInContext=K,M.sample=iTe,M.size=aTe,M.snakeCase=GRe,M.some=lTe,M.sortedIndex=sDe,M.sortedIndexBy=oDe,M.sortedIndexOf=aDe,M.sortedLastIndex=lDe,M.sortedLastIndexBy=cDe,M.sortedLastIndexOf=uDe,M.startCase=YRe,M.startsWith=KRe,M.subtract=Oke,M.sum=qke,M.sumBy=Vke,M.template=zRe,M.times=wke,M.toFinite=vd,M.toInteger=Wt,M.toLength=E$,M.toLower=JRe,M.toNumber=il,M.toSafeInteger=JTe,M.toString=jr,M.toUpper=jRe,M.trim=ZRe,M.trimEnd=XRe,M.trimStart=eke,M.truncate=tke,M.unescape=rke,M.uniqueId=Ske,M.upperCase=nke,M.upperFirst=uP,M.each=a$,M.eachRight=l$,M.first=n$,hP(M,function(){var d={};return Kc(M,function(h,m){on.call(M.prototype,m)||(d[m]=h)}),d}(),{chain:!1}),M.VERSION=t,ms(["bind","bindKey","curry","curryRight","partial","partialRight"],function(d){M[d].placeholder=M}),ms(["drop","take"],function(d,h){hr.prototype[d]=function(m){m=m===e?1:Pi(Wt(m),0);var E=this.__filtered__&&!h?new hr(this):this.clone();return E.__filtered__?E.__takeCount__=Ns(m,E.__takeCount__):E.__views__.push({size:Ns(m,It),type:d+(E.__dir__<0?"Right":"")}),E},hr.prototype[d+"Right"]=function(m){return this.reverse()[d](m).reverse()}}),ms(["filter","map","takeWhile"],function(d,h){var m=h+1,E=m==ge||m==N;hr.prototype[d]=function(S){var P=this.clone();return P.__iteratees__.push({iteratee:ut(S,3),type:m}),P.__filtered__=P.__filtered__||E,P}}),ms(["head","last"],function(d,h){var m="take"+(h?"Right":"");hr.prototype[d]=function(){return this[m](1).value()[0]}}),ms(["initial","tail"],function(d,h){var m="drop"+(h?"":"Right");hr.prototype[d]=function(){return this.__filtered__?new hr(this):this[m](1)}}),hr.prototype.compact=function(){return this.filter(Mo)},hr.prototype.find=function(d){return this.filter(d).head()},hr.prototype.findLast=function(d){return this.reverse().find(d)},hr.prototype.invokeMap=er(function(d,h){return typeof d=="function"?new hr(this):this.map(function(m){return Bv(m,d,h)})}),hr.prototype.reject=function(d){return this.filter(vI(ut(d)))},hr.prototype.slice=function(d,h){d=Wt(d);var m=this;return m.__filtered__&&(d>0||h<0)?new hr(m):(d<0?m=m.takeRight(-d):d&&(m=m.drop(d)),h!==e&&(h=Wt(h),m=h<0?m.dropRight(-h):m.take(h-d)),m)},hr.prototype.takeRightWhile=function(d){return this.reverse().takeWhile(d).reverse()},hr.prototype.toArray=function(){return this.take(It)},Kc(hr.prototype,function(d,h){var m=/^(?:filter|find|map|reject)|While$/.test(h),E=/^(?:head|last)$/.test(h),S=M[E?"take"+(h=="last"?"Right":""):h],P=E||/^find/.test(h);S&&(M.prototype[h]=function(){var O=this.__wrapped__,H=E?[1]:arguments,J=O instanceof hr,ce=H[0],ue=J||kt(O),me=function(or){var vr=S.apply(M,ro([or],H));return E&&Re?vr[0]:vr};ue&&m&&typeof ce=="function"&&ce.length!=1&&(J=ue=!1);var Re=this.__chain__,ze=!!this.__actions__.length,dt=P&&!Re,Kt=J&&!ze;if(!P&&ue){O=Kt?O:new hr(this);var ft=d.apply(O,H);return ft.__actions__.push({func:AI,args:[me],thisArg:e}),new el(ft,Re)}return dt&&Kt?d.apply(this,H):(ft=this.thru(me),dt?E?ft.value()[0]:ft.value():ft)})}),ms(["pop","push","shift","sort","splice","unshift"],function(d){var h=Vw[d],m=/^(?:push|sort|unshift)$/.test(d)?"tap":"thru",E=/^(?:pop|shift)$/.test(d);M.prototype[d]=function(){var S=arguments;if(E&&!this.__chain__){var P=this.value();return h.apply(kt(P)?P:[],S)}return this[m](function(O){return h.apply(kt(O)?O:[],S)})}}),Kc(hr.prototype,function(d,h){var m=M[h];if(m){var E=m.name+"";on.call(rm,E)||(rm[E]=[]),rm[E].push({name:h,func:m})}}),rm[cI(e,y).name]=[{name:"wrapper",func:e}],hr.prototype.clone=rSe,hr.prototype.reverse=nSe,hr.prototype.value=iSe,M.prototype.at=FDe,M.prototype.chain=MDe,M.prototype.commit=QDe,M.prototype.next=NDe,M.prototype.plant=LDe,M.prototype.reverse=UDe,M.prototype.toJSON=M.prototype.valueOf=M.prototype.value=ODe,M.prototype.first=M.prototype.head,Ev&&(M.prototype[Ev]=PDe),M},kf=QIe();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(wi._=kf,define(function(){return kf})):ud?((ud.exports=kf)._=kf,Av._=kf):wi._=kf}).call(xm)});var Nm=x((qxt,_z)=>{"use strict";_z.exports=ap;ap.CAPTURING_PHASE=1;ap.AT_TARGET=2;ap.BUBBLING_PHASE=3;function ap(e,t){if(this.type="",this.target=null,this.currentTarget=null,this.eventPhase=ap.AT_TARGET,this.bubbles=!1,this.cancelable=!1,this.isTrusted=!1,this.defaultPrevented=!1,this.timeStamp=Date.now(),this._propagationStopped=!1,this._immediatePropagationStopped=!1,this._initialized=!0,this._dispatching=!1,e&&(this.type=e),t)for(var r in t)this[r]=t[r]}ap.prototype=Object.create(Object.prototype,{constructor:{value:ap},stopPropagation:{value:function(){this._propagationStopped=!0}},stopImmediatePropagation:{value:function(){this._propagationStopped=!0,this._immediatePropagationStopped=!0}},preventDefault:{value:function(){this.cancelable&&(this.defaultPrevented=!0)}},initEvent:{value:function(t,r,n){this._initialized=!0,!this._dispatching&&(this._propagationStopped=!1,this._immediatePropagationStopped=!1,this.defaultPrevented=!1,this.isTrusted=!1,this.target=null,this.type=t,this.bubbles=r,this.cancelable=n)}}})});var yL=x((Vxt,Iz)=>{"use strict";var wz=Nm();Iz.exports=mL;function mL(){wz.call(this),this.view=null,this.detail=0}mL.prototype=Object.create(wz.prototype,{constructor:{value:mL},initUIEvent:{value:function(e,t,r,n,i){this.initEvent(e,t,r),this.view=n,this.detail=i}}})});var vL=x((Hxt,Bz)=>{"use strict";var Sz=yL();Bz.exports=CL;function CL(){Sz.call(this),this.screenX=this.screenY=this.clientX=this.clientY=0,this.ctrlKey=this.altKey=this.shiftKey=this.metaKey=!1,this.button=0,this.buttons=1,this.relatedTarget=null}CL.prototype=Object.create(Sz.prototype,{constructor:{value:CL},initMouseEvent:{value:function(e,t,r,n,i,s,o,a,l,c,u,f,p,g,A){switch(this.initEvent(e,t,r,n,i),this.screenX=s,this.screenY=o,this.clientX=a,this.clientY=l,this.ctrlKey=c,this.altKey=u,this.shiftKey=f,this.metaKey=p,this.button=g,g){case 0:this.buttons=1;break;case 1:this.buttons=4;break;case 2:this.buttons=2;break;default:this.buttons=0;break}this.relatedTarget=A}},getModifierState:{value:function(e){switch(e){case"Alt":return this.altKey;case"Control":return this.ctrlKey;case"Shift":return this.shiftKey;case"Meta":return this.metaKey;default:return!1}}}})});var wS=x((Wxt,Tz)=>{"use strict";Tz.exports=_S;var z2e=1,J2e=3,j2e=4,Z2e=5,X2e=7,ePe=8,tPe=9,rPe=11,nPe=12,iPe=13,sPe=14,oPe=15,aPe=17,lPe=18,cPe=19,uPe=20,dPe=21,fPe=22,hPe=23,gPe=24,pPe=25,APe=[null,"INDEX_SIZE_ERR",null,"HIERARCHY_REQUEST_ERR","WRONG_DOCUMENT_ERR","INVALID_CHARACTER_ERR",null,"NO_MODIFICATION_ALLOWED_ERR","NOT_FOUND_ERR","NOT_SUPPORTED_ERR","INUSE_ATTRIBUTE_ERR","INVALID_STATE_ERR","SYNTAX_ERR","INVALID_MODIFICATION_ERR","NAMESPACE_ERR","INVALID_ACCESS_ERR",null,"TYPE_MISMATCH_ERR","SECURITY_ERR","NETWORK_ERR","ABORT_ERR","URL_MISMATCH_ERR","QUOTA_EXCEEDED_ERR","TIMEOUT_ERR","INVALID_NODE_TYPE_ERR","DATA_CLONE_ERR"],mPe=[null,"INDEX_SIZE_ERR (1): the index is not in the allowed range",null,"HIERARCHY_REQUEST_ERR (3): the operation would yield an incorrect nodes model","WRONG_DOCUMENT_ERR (4): the object is in the wrong Document, a call to importNode is required","INVALID_CHARACTER_ERR (5): the string contains invalid characters",null,"NO_MODIFICATION_ALLOWED_ERR (7): the object can not be modified","NOT_FOUND_ERR (8): the object can not be found here","NOT_SUPPORTED_ERR (9): this operation is not supported","INUSE_ATTRIBUTE_ERR (10): setAttributeNode called on owned Attribute","INVALID_STATE_ERR (11): the object is in an invalid state","SYNTAX_ERR (12): the string did not match the expected pattern","INVALID_MODIFICATION_ERR (13): the object can not be modified in this way","NAMESPACE_ERR (14): the operation is not allowed by Namespaces in XML","INVALID_ACCESS_ERR (15): the object does not support the operation or argument",null,"TYPE_MISMATCH_ERR (17): the type of the object does not match the expected type","SECURITY_ERR (18): the operation is insecure","NETWORK_ERR (19): a network error occurred","ABORT_ERR (20): the user aborted an operation","URL_MISMATCH_ERR (21): the given URL does not match another URL","QUOTA_EXCEEDED_ERR (22): the quota has been exceeded","TIMEOUT_ERR (23): a timeout occurred","INVALID_NODE_TYPE_ERR (24): the supplied node is invalid or has an invalid ancestor for this operation","DATA_CLONE_ERR (25): the object can not be cloned."],Dz={INDEX_SIZE_ERR:z2e,DOMSTRING_SIZE_ERR:2,HIERARCHY_REQUEST_ERR:J2e,WRONG_DOCUMENT_ERR:j2e,INVALID_CHARACTER_ERR:Z2e,NO_DATA_ALLOWED_ERR:6,NO_MODIFICATION_ALLOWED_ERR:X2e,NOT_FOUND_ERR:ePe,NOT_SUPPORTED_ERR:tPe,INUSE_ATTRIBUTE_ERR:10,INVALID_STATE_ERR:rPe,SYNTAX_ERR:nPe,INVALID_MODIFICATION_ERR:iPe,NAMESPACE_ERR:sPe,INVALID_ACCESS_ERR:oPe,VALIDATION_ERR:16,TYPE_MISMATCH_ERR:aPe,SECURITY_ERR:lPe,NETWORK_ERR:cPe,ABORT_ERR:uPe,URL_MISMATCH_ERR:dPe,QUOTA_EXCEEDED_ERR:fPe,TIMEOUT_ERR:hPe,INVALID_NODE_TYPE_ERR:gPe,DATA_CLONE_ERR:pPe};function _S(e){Error.call(this),Error.captureStackTrace(this,this.constructor),this.code=e,this.message=mPe[e],this.name=APe[e]}_S.prototype.__proto__=Error.prototype;for(xS in Dz)EL={value:Dz[xS]},Object.defineProperty(_S,xS,EL),Object.defineProperty(_S.prototype,xS,EL);var EL,xS});var IS=x(Rz=>{"use strict";Rz.isApiWritable=!globalThis.__domino_frozen__});var ni=x(Hr=>{"use strict";var ri=wS(),mi=ri,yPe=IS().isApiWritable;Hr.NAMESPACE={HTML:"http://www.w3.org/1999/xhtml",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/",MATHML:"http://www.w3.org/1998/Math/MathML",SVG:"http://www.w3.org/2000/svg",XLINK:"http://www.w3.org/1999/xlink"};Hr.IndexSizeError=function(){throw new ri(mi.INDEX_SIZE_ERR)};Hr.HierarchyRequestError=function(){throw new ri(mi.HIERARCHY_REQUEST_ERR)};Hr.WrongDocumentError=function(){throw new ri(mi.WRONG_DOCUMENT_ERR)};Hr.InvalidCharacterError=function(){throw new ri(mi.INVALID_CHARACTER_ERR)};Hr.NoModificationAllowedError=function(){throw new ri(mi.NO_MODIFICATION_ALLOWED_ERR)};Hr.NotFoundError=function(){throw new ri(mi.NOT_FOUND_ERR)};Hr.NotSupportedError=function(){throw new ri(mi.NOT_SUPPORTED_ERR)};Hr.InvalidStateError=function(){throw new ri(mi.INVALID_STATE_ERR)};Hr.SyntaxError=function(){throw new ri(mi.SYNTAX_ERR)};Hr.InvalidModificationError=function(){throw new ri(mi.INVALID_MODIFICATION_ERR)};Hr.NamespaceError=function(){throw new ri(mi.NAMESPACE_ERR)};Hr.InvalidAccessError=function(){throw new ri(mi.INVALID_ACCESS_ERR)};Hr.TypeMismatchError=function(){throw new ri(mi.TYPE_MISMATCH_ERR)};Hr.SecurityError=function(){throw new ri(mi.SECURITY_ERR)};Hr.NetworkError=function(){throw new ri(mi.NETWORK_ERR)};Hr.AbortError=function(){throw new ri(mi.ABORT_ERR)};Hr.UrlMismatchError=function(){throw new ri(mi.URL_MISMATCH_ERR)};Hr.QuotaExceededError=function(){throw new ri(mi.QUOTA_EXCEEDED_ERR)};Hr.TimeoutError=function(){throw new ri(mi.TIMEOUT_ERR)};Hr.InvalidNodeTypeError=function(){throw new ri(mi.INVALID_NODE_TYPE_ERR)};Hr.DataCloneError=function(){throw new ri(mi.DATA_CLONE_ERR)};Hr.nyi=function(){throw new Error("NotYetImplemented")};Hr.shouldOverride=function(){throw new Error("Abstract function; should be overriding in subclass.")};Hr.assert=function(e,t){if(!e)throw new Error("Assertion failed: "+(t||"")+`
`+new Error().stack)};Hr.expose=function(e,t){for(var r in e)Object.defineProperty(t.prototype,r,{value:e[r],writable:yPe})};Hr.merge=function(e,t){for(var r in t)e[r]=t[r]};Hr.documentOrder=function(e,t){return 3-(e.compareDocumentPosition(t)&6)};Hr.toASCIILowerCase=function(e){return e.replace(/[A-Z]+/g,function(t){return t.toLowerCase()})};Hr.toASCIIUpperCase=function(e){return e.replace(/[a-z]+/g,function(t){return t.toUpperCase()})}});var bL=x((Yxt,Fz)=>{"use strict";var lp=Nm(),CPe=vL(),vPe=ni();Fz.exports=kz;function kz(){}kz.prototype={addEventListener:function(t,r,n){if(r){n===void 0&&(n=!1),this._listeners||(this._listeners=Object.create(null)),this._listeners[t]||(this._listeners[t]=[]);for(var i=this._listeners[t],s=0,o=i.length;s<o;s++){var a=i[s];if(a.listener===r&&a.capture===n)return}var l={listener:r,capture:n};typeof r=="function"&&(l.f=r),i.push(l)}},removeEventListener:function(t,r,n){if(n===void 0&&(n=!1),this._listeners){var i=this._listeners[t];if(i)for(var s=0,o=i.length;s<o;s++){var a=i[s];if(a.listener===r&&a.capture===n){i.length===1?this._listeners[t]=void 0:i.splice(s,1);return}}}},dispatchEvent:function(t){return this._dispatchEvent(t,!1)},_dispatchEvent:function(t,r){typeof r!="boolean"&&(r=!1);function n(c,u){var f=u.type,p=u.eventPhase;if(u.currentTarget=c,p!==lp.CAPTURING_PHASE&&c._handlers&&c._handlers[f]){var g=c._handlers[f],A;if(typeof g=="function")A=g.call(u.currentTarget,u);else{var y=g.handleEvent;if(typeof y!="function")throw new TypeError("handleEvent property of event handler object isnot a function.");A=y.call(g,u)}switch(u.type){case"mouseover":A===!0&&u.preventDefault();break;case"beforeunload":default:A===!1&&u.preventDefault();break}}var C=c._listeners&&c._listeners[f];if(C){C=C.slice();for(var v=0,b=C.length;v<b;v++){if(u._immediatePropagationStopped)return;var w=C[v];if(!(p===lp.CAPTURING_PHASE&&!w.capture||p===lp.BUBBLING_PHASE&&w.capture))if(w.f)w.f.call(u.currentTarget,u);else{var B=w.listener.handleEvent;if(typeof B!="function")throw new TypeError("handleEvent property of event listener object is not a function.");B.call(w.listener,u)}}}}(!t._initialized||t._dispatching)&&vPe.InvalidStateError(),t.isTrusted=r,t._dispatching=!0,t.target=this;for(var i=[],s=this.parentNode;s;s=s.parentNode)i.push(s);t.eventPhase=lp.CAPTURING_PHASE;for(var o=i.length-1;o>=0&&(n(i[o],t),!t._propagationStopped);o--);if(t._propagationStopped||(t.eventPhase=lp.AT_TARGET,n(this,t)),t.bubbles&&!t._propagationStopped){t.eventPhase=lp.BUBBLING_PHASE;for(var a=0,l=i.length;a<l&&(n(i[a],t),!t._propagationStopped);a++);}if(t._dispatching=!1,t.eventPhase=lp.AT_TARGET,t.currentTarget=null,r&&!t.defaultPrevented&&t instanceof CPe)switch(t.type){case"mousedown":this._armed={x:t.clientX,y:t.clientY,t:t.timeStamp};break;case"mouseout":case"mouseover":this._armed=null;break;case"mouseup":this._isClick(t)&&this._doClick(t),this._armed=null;break}return!t.defaultPrevented},_isClick:function(e){return this._armed!==null&&e.type==="mouseup"&&e.isTrusted&&e.button===0&&e.timeStamp-this._armed.t<1e3&&Math.abs(e.clientX-this._armed.x)<10&&Math.abs(e.clientY-this._armed.Y)<10},_doClick:function(e){if(!this._click_in_progress){this._click_in_progress=!0;for(var t=this;t&&!t._post_click_activation_steps;)t=t.parentNode;t&&t._pre_click_activation_steps&&t._pre_click_activation_steps();var r=this.ownerDocument.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,this.ownerDocument.defaultView,1,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,null);var n=this._dispatchEvent(r,!0);t&&(n?t._post_click_activation_steps&&t._post_click_activation_steps(r):t._cancelled_activation_steps&&t._cancelled_activation_steps())}},_setEventHandler:function(t,r){this._handlers||(this._handlers=Object.create(null)),this._handlers[t]=r},_getEventHandler:function(t){return this._handlers&&this._handlers[t]||null}}});var xL=x((Kxt,Mz)=>{"use strict";var Dd=ni(),ul=Mz.exports={valid:function(e){return Dd.assert(e,"list falsy"),Dd.assert(e._previousSibling,"previous falsy"),Dd.assert(e._nextSibling,"next falsy"),!0},insertBefore:function(e,t){Dd.assert(ul.valid(e)&&ul.valid(t));var r=e,n=e._previousSibling,i=t,s=t._previousSibling;r._previousSibling=s,n._nextSibling=i,s._nextSibling=r,i._previousSibling=n,Dd.assert(ul.valid(e)&&ul.valid(t))},replace:function(e,t){Dd.assert(ul.valid(e)&&(t===null||ul.valid(t))),t!==null&&ul.insertBefore(t,e),ul.remove(e),Dd.assert(ul.valid(e)&&(t===null||ul.valid(t)))},remove:function(e){Dd.assert(ul.valid(e));var t=e._previousSibling;if(t!==e){var r=e._nextSibling;t._nextSibling=r,r._previousSibling=t,e._previousSibling=e._nextSibling=e,Dd.assert(ul.valid(e))}}}});var _L=x((zxt,Vz)=>{"use strict";Vz.exports={serializeOne:SPe,\u0275escapeMatchingClosingTag:Uz,\u0275escapeClosingCommentTag:Oz,\u0275escapeProcessingInstructionContent:qz};var Lz=ni(),cp=Lz.NAMESPACE,Qz={STYLE:!0,SCRIPT:!0,XMP:!0,IFRAME:!0,NOEMBED:!0,NOFRAMES:!0,PLAINTEXT:!0},EPe={area:!0,base:!0,basefont:!0,bgsound:!0,br:!0,col:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},bPe={},Nz=/[&<>\u00A0]/g,Pz=/[&"<>\u00A0]/g;function xPe(e){return Nz.test(e)?e.replace(Nz,t=>{switch(t){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case"\xA0":return"&nbsp;"}}):e}function _Pe(e){return Pz.test(e)?e.replace(Pz,t=>{switch(t){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case'"':return"&quot;";case"\xA0":return"&nbsp;"}}):e}function wPe(e){var t=e.namespaceURI;return t?t===cp.XML?"xml:"+e.localName:t===cp.XLINK?"xlink:"+e.localName:t===cp.XMLNS?e.localName==="xmlns"?"xmlns":"xmlns:"+e.localName:e.name:e.localName}function Uz(e,t){let r="</"+t;if(!e.toLowerCase().includes(r))return e;let n=[...e],i=e.matchAll(new RegExp(r,"ig"));for(let s of i)n[s.index]="&lt;";return n.join("")}var IPe=/--!?>/;function Oz(e){return IPe.test(e)?e.replace(/(--\!?)>/g,"$1&gt;"):e}function qz(e){return e.includes(">")?e.replaceAll(">","&gt;"):e}function SPe(e,t){var r="";switch(e.nodeType){case 1:var n=e.namespaceURI,i=n===cp.HTML,s=i||n===cp.SVG||n===cp.MATHML?e.localName:e.tagName;r+="<"+s;for(var o=0,a=e._numattrs;o<a;o++){var l=e._attr(o);r+=" "+wPe(l),l.value!==void 0&&(r+='="'+_Pe(l.value)+'"')}if(r+=">",!(i&&EPe[s])){var c=e.serialize();Qz[s.toUpperCase()]&&(c=Uz(c,s)),i&&bPe[s]&&c.charAt(0)===`
`&&(r+=`
`),r+=c,r+="</"+s+">"}break;case 3:case 4:var u;t.nodeType===1&&t.namespaceURI===cp.HTML?u=t.tagName:u="",Qz[u]||u==="NOSCRIPT"&&t.ownerDocument._scripting_enabled?r+=e.data:r+=xPe(e.data);break;case 8:r+="<!--"+Oz(e.data)+"-->";break;case 7:let f=qz(e.data);r+="<?"+e.target+" "+f+"?>";break;case 10:r+="<!DOCTYPE "+e.name,r+=">";break;default:Lz.InvalidStateError()}return r}});var Es=x((Jxt,Kz)=>{"use strict";Kz.exports=Ln;var Yz=bL(),SS=xL(),Hz=_L(),Wr=ni();function Ln(){Yz.call(this),this.parentNode=null,this._nextSibling=this._previousSibling=this,this._index=void 0}var Uo=Ln.ELEMENT_NODE=1,wL=Ln.ATTRIBUTE_NODE=2,BS=Ln.TEXT_NODE=3,BPe=Ln.CDATA_SECTION_NODE=4,DPe=Ln.ENTITY_REFERENCE_NODE=5,IL=Ln.ENTITY_NODE=6,Wz=Ln.PROCESSING_INSTRUCTION_NODE=7,Gz=Ln.COMMENT_NODE=8,uE=Ln.DOCUMENT_NODE=9,dl=Ln.DOCUMENT_TYPE_NODE=10,Jf=Ln.DOCUMENT_FRAGMENT_NODE=11,SL=Ln.NOTATION_NODE=12,BL=Ln.DOCUMENT_POSITION_DISCONNECTED=1,DL=Ln.DOCUMENT_POSITION_PRECEDING=2,TL=Ln.DOCUMENT_POSITION_FOLLOWING=4,$z=Ln.DOCUMENT_POSITION_CONTAINS=8,RL=Ln.DOCUMENT_POSITION_CONTAINED_BY=16,kL=Ln.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC=32;Ln.prototype=Object.create(Yz.prototype,{baseURI:{get:Wr.nyi},parentElement:{get:function(){return this.parentNode&&this.parentNode.nodeType===Uo?this.parentNode:null}},hasChildNodes:{value:Wr.shouldOverride},firstChild:{get:Wr.shouldOverride},lastChild:{get:Wr.shouldOverride},isConnected:{get:function(){let e=this;for(;e!=null;){if(e.nodeType===Ln.DOCUMENT_NODE)return!0;e=e.parentNode,e!=null&&e.nodeType===Ln.DOCUMENT_FRAGMENT_NODE&&(e=e.host)}return!1}},previousSibling:{get:function(){var e=this.parentNode;return!e||this===e.firstChild?null:this._previousSibling}},nextSibling:{get:function(){var e=this.parentNode,t=this._nextSibling;return!e||t===e.firstChild?null:t}},textContent:{get:function(){return null},set:function(e){}},innerText:{get:function(){return null},set:function(e){}},_countChildrenOfType:{value:function(e){for(var t=0,r=this.firstChild;r!==null;r=r.nextSibling)r.nodeType===e&&t++;return t}},_ensureInsertValid:{value:function(t,r,n){var i=this,s,o;if(!t.nodeType)throw new TypeError("not a node");switch(i.nodeType){case uE:case Jf:case Uo:break;default:Wr.HierarchyRequestError()}switch(t.isAncestor(i)&&Wr.HierarchyRequestError(),(r!==null||!n)&&r.parentNode!==i&&Wr.NotFoundError(),t.nodeType){case Jf:case dl:case Uo:case BS:case Wz:case Gz:break;default:Wr.HierarchyRequestError()}if(i.nodeType===uE)switch(t.nodeType){case BS:Wr.HierarchyRequestError();break;case Jf:switch(t._countChildrenOfType(BS)>0&&Wr.HierarchyRequestError(),t._countChildrenOfType(Uo)){case 0:break;case 1:if(r!==null)for(n&&r.nodeType===dl&&Wr.HierarchyRequestError(),o=r.nextSibling;o!==null;o=o.nextSibling)o.nodeType===dl&&Wr.HierarchyRequestError();s=i._countChildrenOfType(Uo),n?s>0&&Wr.HierarchyRequestError():(s>1||s===1&&r.nodeType!==Uo)&&Wr.HierarchyRequestError();break;default:Wr.HierarchyRequestError()}break;case Uo:if(r!==null)for(n&&r.nodeType===dl&&Wr.HierarchyRequestError(),o=r.nextSibling;o!==null;o=o.nextSibling)o.nodeType===dl&&Wr.HierarchyRequestError();s=i._countChildrenOfType(Uo),n?s>0&&Wr.HierarchyRequestError():(s>1||s===1&&r.nodeType!==Uo)&&Wr.HierarchyRequestError();break;case dl:if(r===null)i._countChildrenOfType(Uo)&&Wr.HierarchyRequestError();else for(o=i.firstChild;o!==null&&o!==r;o=o.nextSibling)o.nodeType===Uo&&Wr.HierarchyRequestError();s=i._countChildrenOfType(dl),n?s>0&&Wr.HierarchyRequestError():(s>1||s===1&&r.nodeType!==dl)&&Wr.HierarchyRequestError();break}else t.nodeType===dl&&Wr.HierarchyRequestError()}},insertBefore:{value:function(t,r){var n=this;n._ensureInsertValid(t,r,!0);var i=r;return i===t&&(i=t.nextSibling),n.doc.adoptNode(t),t._insertOrReplace(n,i,!1),t}},appendChild:{value:function(e){return this.insertBefore(e,null)}},_appendChild:{value:function(e){e._insertOrReplace(this,null,!1)}},removeChild:{value:function(t){var r=this;if(!t.nodeType)throw new TypeError("not a node");return t.parentNode!==r&&Wr.NotFoundError(),t.remove(),t}},replaceChild:{value:function(t,r){var n=this;return n._ensureInsertValid(t,r,!1),t.doc!==n.doc&&n.doc.adoptNode(t),t._insertOrReplace(n,r,!0),r}},contains:{value:function(t){return t===null?!1:this===t?!0:(this.compareDocumentPosition(t)&RL)!==0}},compareDocumentPosition:{value:function(t){if(this===t)return 0;if(this.doc!==t.doc||this.rooted!==t.rooted)return BL+kL;for(var r=[],n=[],i=this;i!==null;i=i.parentNode)r.push(i);for(i=t;i!==null;i=i.parentNode)n.push(i);if(r.reverse(),n.reverse(),r[0]!==n[0])return BL+kL;i=Math.min(r.length,n.length);for(var s=1;s<i;s++)if(r[s]!==n[s])return r[s].index<n[s].index?TL:DL;return r.length<n.length?TL+RL:DL+$z}},isSameNode:{value:function(t){return this===t}},isEqualNode:{value:function(t){if(!t||t.nodeType!==this.nodeType||!this.isEqual(t))return!1;for(var r=this.firstChild,n=t.firstChild;r&&n;r=r.nextSibling,n=n.nextSibling)if(!r.isEqualNode(n))return!1;return r===null&&n===null}},cloneNode:{value:function(e){var t=this.clone();if(e)for(var r=this.firstChild;r!==null;r=r.nextSibling)t._appendChild(r.cloneNode(!0));return t}},lookupPrefix:{value:function(t){var r;if(t===""||t===null||t===void 0)return null;switch(this.nodeType){case Uo:return this._lookupNamespacePrefix(t,this);case uE:return r=this.documentElement,r?r.lookupPrefix(t):null;case IL:case SL:case Jf:case dl:return null;case wL:return r=this.ownerElement,r?r.lookupPrefix(t):null;default:return r=this.parentElement,r?r.lookupPrefix(t):null}}},lookupNamespaceURI:{value:function(t){(t===""||t===void 0)&&(t=null);var r;switch(this.nodeType){case Uo:return Wr.shouldOverride();case uE:return r=this.documentElement,r?r.lookupNamespaceURI(t):null;case IL:case SL:case dl:case Jf:return null;case wL:return r=this.ownerElement,r?r.lookupNamespaceURI(t):null;default:return r=this.parentElement,r?r.lookupNamespaceURI(t):null}}},isDefaultNamespace:{value:function(t){(t===""||t===void 0)&&(t=null);var r=this.lookupNamespaceURI(null);return r===t}},index:{get:function(){var e=this.parentNode;if(this===e.firstChild)return 0;var t=e.childNodes;if(this._index===void 0||t[this._index]!==this){for(var r=0;r<t.length;r++)t[r]._index=r;Wr.assert(t[this._index]===this)}return this._index}},isAncestor:{value:function(e){if(this.doc!==e.doc||this.rooted!==e.rooted)return!1;for(var t=e;t;t=t.parentNode)if(t===this)return!0;return!1}},ensureSameDoc:{value:function(e){e.ownerDocument===null?e.ownerDocument=this.doc:e.ownerDocument!==this.doc&&Wr.WrongDocumentError()}},removeChildren:{value:Wr.shouldOverride},_insertOrReplace:{value:function(t,r,n){var i=this,s,o;if(i.nodeType===Jf&&i.rooted&&Wr.HierarchyRequestError(),t._childNodes&&(s=r===null?t._childNodes.length:r.index,i.parentNode===t)){var a=i.index;a<s&&s--}n&&(r.rooted&&r.doc.mutateRemove(r),r.parentNode=null);var l=r;l===null&&(l=t.firstChild);var c=i.rooted&&t.rooted;if(i.nodeType===Jf){for(var u=[0,n?1:0],f,p=i.firstChild;p!==null;p=f)f=p.nextSibling,u.push(p),p.parentNode=t;var g=u.length;if(n?SS.replace(l,g>2?u[2]:null):g>2&&l!==null&&SS.insertBefore(u[2],l),t._childNodes)for(u[0]=r===null?t._childNodes.length:r._index,t._childNodes.splice.apply(t._childNodes,u),o=2;o<g;o++)u[o]._index=u[0]+(o-2);else t._firstChild===r&&(g>2?t._firstChild=u[2]:n&&(t._firstChild=null));if(i._childNodes?i._childNodes.length=0:i._firstChild=null,t.rooted)for(t.modify(),o=2;o<g;o++)t.doc.mutateInsert(u[o])}else{if(r===i)return;c?i._remove():i.parentNode&&i.remove(),i.parentNode=t,n?(SS.replace(l,i),t._childNodes?(i._index=s,t._childNodes[s]=i):t._firstChild===r&&(t._firstChild=i)):(l!==null&&SS.insertBefore(i,l),t._childNodes?(i._index=s,t._childNodes.splice(s,0,i)):t._firstChild===r&&(t._firstChild=i)),c?(t.modify(),t.doc.mutateMove(i)):t.rooted&&(t.modify(),t.doc.mutateInsert(i))}}},lastModTime:{get:function(){return this._lastModTime||(this._lastModTime=this.doc.modclock),this._lastModTime}},modify:{value:function(){if(this.doc.modclock)for(var e=++this.doc.modclock,t=this;t;t=t.parentElement)t._lastModTime&&(t._lastModTime=e)}},doc:{get:function(){return this.ownerDocument||this}},rooted:{get:function(){return!!this._nid}},normalize:{value:function(){for(var e,t=this.firstChild;t!==null;t=e)if(e=t.nextSibling,t.normalize&&t.normalize(),t.nodeType===Ln.TEXT_NODE){if(t.nodeValue===""){this.removeChild(t);continue}var r=t.previousSibling;r!==null&&r.nodeType===Ln.TEXT_NODE&&(r.appendData(t.nodeValue),this.removeChild(t))}}},serialize:{value:function(){if(this._innerHTML)return this._innerHTML;for(var e="",t=this.firstChild;t!==null;t=t.nextSibling)e+=Hz.serializeOne(t,this);return e}},outerHTML:{get:function(){return Hz.serializeOne(this,{nodeType:0})},set:Wr.nyi},ELEMENT_NODE:{value:Uo},ATTRIBUTE_NODE:{value:wL},TEXT_NODE:{value:BS},CDATA_SECTION_NODE:{value:BPe},ENTITY_REFERENCE_NODE:{value:DPe},ENTITY_NODE:{value:IL},PROCESSING_INSTRUCTION_NODE:{value:Wz},COMMENT_NODE:{value:Gz},DOCUMENT_NODE:{value:uE},DOCUMENT_TYPE_NODE:{value:dl},DOCUMENT_FRAGMENT_NODE:{value:Jf},NOTATION_NODE:{value:SL},DOCUMENT_POSITION_DISCONNECTED:{value:BL},DOCUMENT_POSITION_PRECEDING:{value:DL},DOCUMENT_POSITION_FOLLOWING:{value:TL},DOCUMENT_POSITION_CONTAINS:{value:$z},DOCUMENT_POSITION_CONTAINED_BY:{value:RL},DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC:{value:kL}})});var Jz=x((Zxt,zz)=>{"use strict";zz.exports=class extends Array{constructor(t){if(super(t&&t.length||0),t)for(var r in t)this[r]=t[r]}item(t){return this[t]||null}}});var Zz=x((Xxt,jz)=>{"use strict";function TPe(e){return this[e]||null}function RPe(e){return e||(e=[]),e.item=TPe,e}jz.exports=RPe});var up=x((e_t,Xz)=>{"use strict";var FL;try{FL=Jz()}catch{FL=Zz()}Xz.exports=FL});var DS=x((t_t,rJ)=>{"use strict";rJ.exports=tJ;var eJ=Es(),kPe=up();function tJ(){eJ.call(this),this._firstChild=this._childNodes=null}tJ.prototype=Object.create(eJ.prototype,{hasChildNodes:{value:function(){return this._childNodes?this._childNodes.length>0:this._firstChild!==null}},childNodes:{get:function(){return this._ensureChildNodes(),this._childNodes}},firstChild:{get:function(){return this._childNodes?this._childNodes.length===0?null:this._childNodes[0]:this._firstChild}},lastChild:{get:function(){var e=this._childNodes,t;return e?e.length===0?null:e[e.length-1]:(t=this._firstChild,t===null?null:t._previousSibling)}},_ensureChildNodes:{value:function(){if(!this._childNodes){var e=this._firstChild,t=e,r=this._childNodes=new kPe;if(e)do r.push(t),t=t._nextSibling;while(t!==e);this._firstChild=null}}},removeChildren:{value:function(){for(var t=this.rooted?this.ownerDocument:null,r=this.firstChild,n;r!==null;)n=r,r=n.nextSibling,t&&t.mutateRemove(n),n.parentNode=null;this._childNodes?this._childNodes.length=0:this._firstChild=null,this.modify()}}})});var TS=x(NL=>{"use strict";NL.isValidName=UPe;NL.isValidQName=OPe;var FPe=/^[_:A-Za-z][-.:\w]+$/,MPe=/^([_A-Za-z][-.\w]+|[_A-Za-z][-.\w]+:[_A-Za-z][-.\w]+)$/,dE="_A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD",fE="-._A-Za-z0-9\xB7\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0300-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD",dp="["+dE+"]["+fE+"]*",ML=dE+":",QL=fE+":",QPe=new RegExp("^["+ML+"]["+QL+"]*$"),NPe=new RegExp("^("+dp+"|"+dp+":"+dp+")$"),nJ=/[\uD800-\uDB7F\uDC00-\uDFFF]/,iJ=/[\uD800-\uDB7F\uDC00-\uDFFF]/g,sJ=/[\uD800-\uDB7F][\uDC00-\uDFFF]/g;dE+="\uD800-\u{EFC00}-\uDFFF";fE+="\uD800-\u{EFC00}-\uDFFF";dp="["+dE+"]["+fE+"]*";ML=dE+":";QL=fE+":";var PPe=new RegExp("^["+ML+"]["+QL+"]*$"),LPe=new RegExp("^("+dp+"|"+dp+":"+dp+")$");function UPe(e){if(FPe.test(e)||QPe.test(e))return!0;if(!nJ.test(e)||!PPe.test(e))return!1;var t=e.match(iJ),r=e.match(sJ);return r!==null&&2*r.length===t.length}function OPe(e){if(MPe.test(e)||NPe.test(e))return!0;if(!nJ.test(e)||!LPe.test(e))return!1;var t=e.match(iJ),r=e.match(sJ);return r!==null&&2*r.length===t.length}});var LL=x(PL=>{"use strict";var oJ=ni();PL.property=function(e){if(Array.isArray(e.type)){var t=Object.create(null);e.type.forEach(function(i){t[i.value||i]=i.alias||i});var r=e.missing;r===void 0&&(r=null);var n=e.invalid;return n===void 0&&(n=r),{get:function(){var i=this._getattr(e.name);return i===null?r:(i=t[i.toLowerCase()],i!==void 0?i:n!==null?n:i)},set:function(i){this._setattr(e.name,i)}}}else{if(e.type===Boolean)return{get:function(){return this.hasAttribute(e.name)},set:function(i){i?this._setattr(e.name,""):this.removeAttribute(e.name)}};if(e.type===Number||e.type==="long"||e.type==="unsigned long"||e.type==="limited unsigned long with fallback")return qPe(e);if(!e.type||e.type===String)return{get:function(){return this._getattr(e.name)||""},set:function(i){e.treatNullAsEmptyString&&i===null&&(i=""),this._setattr(e.name,i)}};if(typeof e.type=="function")return e.type(e.name,e)}throw new Error("Invalid attribute definition")};function qPe(e){var t;typeof e.default=="function"?t=e.default:typeof e.default=="number"?t=function(){return e.default}:t=function(){oJ.assert(!1,typeof e.default)};var r=e.type==="unsigned long",n=e.type==="long",i=e.type==="limited unsigned long with fallback",s=e.min,o=e.max,a=e.setmin;return s===void 0&&(r&&(s=0),n&&(s=-2147483648),i&&(s=1)),o===void 0&&(r||n||i)&&(o=2147483647),{get:function(){var l=this._getattr(e.name),c=e.float?parseFloat(l):parseInt(l,10);if(l===null||!isFinite(c)||s!==void 0&&c<s||o!==void 0&&c>o)return t.call(this);if(r||n||i){if(!/^[ \t\n\f\r]*[-+]?[0-9]/.test(l))return t.call(this);c=c|0}return c},set:function(l){e.float||(l=Math.floor(l)),a!==void 0&&l<a&&oJ.IndexSizeError(e.name+" set to "+l),r?l=l<0||l>2147483647?t.call(this):l|0:i?l=l<1||l>2147483647?t.call(this):l|0:n&&(l=l<-2147483648||l>2147483647?t.call(this):l|0),this._setattr(e.name,String(l))}}}PL.registerChangeHandler=function(e,t,r){var n=e.prototype;Object.prototype.hasOwnProperty.call(n,"_attributeChangeHandlers")||(n._attributeChangeHandlers=Object.create(n._attributeChangeHandlers||null)),n._attributeChangeHandlers[t]=r}});var cJ=x((i_t,lJ)=>{"use strict";lJ.exports=aJ;var VPe=Es();function aJ(e,t){this.root=e,this.filter=t,this.lastModTime=e.lastModTime,this.done=!1,this.cache=[],this.traverse()}aJ.prototype=Object.create(Object.prototype,{length:{get:function(){return this.checkcache(),this.done||this.traverse(),this.cache.length}},item:{value:function(e){return this.checkcache(),!this.done&&e>=this.cache.length&&this.traverse(),this.cache[e]}},checkcache:{value:function(){if(this.lastModTime!==this.root.lastModTime){for(var e=this.cache.length-1;e>=0;e--)this[e]=void 0;this.cache.length=0,this.done=!1,this.lastModTime=this.root.lastModTime}}},traverse:{value:function(e){e!==void 0&&e++;for(var t;(t=this.next())!==null;)if(this[this.cache.length]=t,this.cache.push(t),e&&this.cache.length===e)return;this.done=!0}},next:{value:function(){var e=this.cache.length===0?this.root:this.cache[this.cache.length-1],t;for(e.nodeType===VPe.DOCUMENT_NODE?t=e.documentElement:t=e.nextElement(this.root);t;){if(this.filter(t))return t;t=t.nextElement(this.root)}return null}}})});var OL=x((s_t,fJ)=>{"use strict";var UL=ni();fJ.exports=dJ;function dJ(e,t){this._getString=e,this._setString=t,this._length=0,this._lastStringValue="",this._update()}Object.defineProperties(dJ.prototype,{length:{get:function(){return this._length}},item:{value:function(e){var t=Pm(this);return e<0||e>=t.length?null:t[e]}},contains:{value:function(e){e=String(e);var t=Pm(this);return t.indexOf(e)>-1}},add:{value:function(){for(var e=Pm(this),t=0,r=arguments.length;t<r;t++){var n=hE(arguments[t]);e.indexOf(n)<0&&e.push(n)}this._update(e)}},remove:{value:function(){for(var e=Pm(this),t=0,r=arguments.length;t<r;t++){var n=hE(arguments[t]),i=e.indexOf(n);i>-1&&e.splice(i,1)}this._update(e)}},toggle:{value:function(t,r){return t=hE(t),this.contains(t)?r===void 0||r===!1?(this.remove(t),!1):!0:r===void 0||r===!0?(this.add(t),!0):!1}},replace:{value:function(t,r){String(r)===""&&UL.SyntaxError(),t=hE(t),r=hE(r);var n=Pm(this),i=n.indexOf(t);if(i<0)return!1;var s=n.indexOf(r);return s<0?n[i]=r:i<s?(n[i]=r,n.splice(s,1)):n.splice(i,1),this._update(n),!0}},toString:{value:function(){return this._getString()}},value:{get:function(){return this._getString()},set:function(e){this._setString(e),this._update()}},_update:{value:function(e){e?(uJ(this,e),this._setString(e.join(" ").trim())):uJ(this,Pm(this)),this._lastStringValue=this._getString()}}});function uJ(e,t){var r=e._length,n;for(e._length=t.length,n=0;n<t.length;n++)e[n]=t[n];for(;n<r;n++)e[n]=void 0}function hE(e){return e=String(e),e===""&&UL.SyntaxError(),/[ \t\r\n\f]/.test(e)&&UL.InvalidCharacterError(),e}function HPe(e){for(var t=e._length,r=Array(t),n=0;n<t;n++)r[n]=e[n];return r}function Pm(e){var t=e._getString();if(t===e._lastStringValue)return HPe(e);var r=t.replace(/(^[ \t\r\n\f]+)|([ \t\r\n\f]+$)/g,"");if(r==="")return[];var n=Object.create(null);return r.split(/[ \t\r\n\f]+/g).filter(function(i){var s="$"+i;return n[s]?!1:(n[s]=!0,!0)})}});var MS=x((Om,yJ)=>{"use strict";var RS=Object.create(null,{location:{get:function(){throw new Error("window.location is not supported.")}}}),WPe=function(e,t){return e.compareDocumentPosition(t)},GPe=function(e,t){return WPe(e,t)&2?1:-1},FS=function(e){for(;(e=e.nextSibling)&&e.nodeType!==1;);return e},Um=function(e){for(;(e=e.previousSibling)&&e.nodeType!==1;);return e},$Pe=function(e){if(e=e.firstChild)for(;e.nodeType!==1&&(e=e.nextSibling););return e},YPe=function(e){if(e=e.lastChild)for(;e.nodeType!==1&&(e=e.previousSibling););return e},Lm=function(e){if(!e.parentNode)return!1;var t=e.parentNode.nodeType;return t===1||t===9},hJ=function(e){if(!e)return e;var t=e[0];return t==='"'||t==="'"?(e[e.length-1]===t?e=e.slice(1,-1):e=e.slice(1),e.replace(yt.str_escape,function(r){var n=/^\\(?:([0-9A-Fa-f]+)|([\r\n\f]+))/.exec(r);if(!n)return r.slice(1);if(n[2])return"";var i=parseInt(n[1],16);return String.fromCodePoint?String.fromCodePoint(i):String.fromCharCode(i)})):yt.ident.test(e)?jf(e):e},jf=function(e){return e.replace(yt.escape,function(t){var r=/^\\([0-9A-Fa-f]+)/.exec(t);if(!r)return t[1];var n=parseInt(r[1],16);return String.fromCodePoint?String.fromCodePoint(n):String.fromCharCode(n)})},KPe=function(){return Array.prototype.indexOf?Array.prototype.indexOf:function(e,t){for(var r=this.length;r--;)if(this[r]===t)return r;return-1}}(),pJ=function(e,t){var r=yt.inside.source.replace(/</g,e).replace(/>/g,t);return new RegExp(r)},Oo=function(e,t,r){return e=e.source,e=e.replace(t,r.source||r),new RegExp(e)},gJ=function(e,t){return e.replace(/^(?:\w+:\/\/|\/+)/,"").replace(/(?:\/+|\/*#.*?)$/,"").split("/",t).join("/")},zPe=function(e,t){var r=e.replace(/\s+/g,""),n;return r==="even"?r="2n+0":r==="odd"?r="2n+1":r.indexOf("n")===-1&&(r="0n"+r),n=/^([+-])?(\d+)?n([+-])?(\d+)?$/.exec(r),{group:n[1]==="-"?-(n[2]||1):+(n[2]||1),offset:n[4]?n[3]==="-"?-n[4]:+n[4]:0}},qL=function(e,t,r){var n=zPe(e),i=n.group,s=n.offset,o=r?YPe:$Pe,a=r?Um:FS;return function(l){if(Lm(l))for(var c=o(l.parentNode),u=0;c;){if(t(c,l)&&u++,c===l)return u-=s,i&&u?u%i===0&&u<0==i<0:!u;c=a(c)}}},Ji={"*":function(){return function(){return!0}}(),type:function(e){return e=e.toLowerCase(),function(t){return t.nodeName.toLowerCase()===e}},attr:function(e,t,r,n){return t=AJ[t],function(i){var s;switch(e){case"for":s=i.htmlFor;break;case"class":s=i.className,s===""&&i.getAttribute("class")==null&&(s=null);break;case"href":case"src":s=i.getAttribute(e,2);break;case"title":s=i.getAttribute("title")||null;break;case"id":case"lang":case"dir":case"accessKey":case"hidden":case"tabIndex":case"style":if(i.getAttribute){s=i.getAttribute(e);break}default:if(i.hasAttribute&&!i.hasAttribute(e))break;s=i[e]!=null?i[e]:i.getAttribute&&i.getAttribute(e);break}if(s!=null)return s=s+"",n&&(s=s.toLowerCase(),r=r.toLowerCase()),t(s,r)}},":first-child":function(e){return!Um(e)&&Lm(e)},":last-child":function(e){return!FS(e)&&Lm(e)},":only-child":function(e){return!Um(e)&&!FS(e)&&Lm(e)},":nth-child":function(e,t){return qL(e,function(){return!0},t)},":nth-last-child":function(e){return Ji[":nth-child"](e,!0)},":root":function(e){return e.ownerDocument.documentElement===e},":empty":function(e){return!e.firstChild},":not":function(e){var t=HL(e);return function(r){return!t(r)}},":first-of-type":function(e){if(Lm(e)){for(var t=e.nodeName;e=Um(e);)if(e.nodeName===t)return;return!0}},":last-of-type":function(e){if(Lm(e)){for(var t=e.nodeName;e=FS(e);)if(e.nodeName===t)return;return!0}},":only-of-type":function(e){return Ji[":first-of-type"](e)&&Ji[":last-of-type"](e)},":nth-of-type":function(e,t){return qL(e,function(r,n){return r.nodeName===n.nodeName},t)},":nth-last-of-type":function(e){return Ji[":nth-of-type"](e,!0)},":checked":function(e){return!!(e.checked||e.selected)},":indeterminate":function(e){return!Ji[":checked"](e)},":enabled":function(e){return!e.disabled&&e.type!=="hidden"},":disabled":function(e){return!!e.disabled},":target":function(e){return e.id===RS.location.hash.substring(1)},":focus":function(e){return e===e.ownerDocument.activeElement},":is":function(e){return HL(e)},":matches":function(e){return Ji[":is"](e)},":nth-match":function(e,t){var r=e.split(/\s*,\s*/),n=r.shift(),i=HL(r.join(","));return qL(n,i,t)},":nth-last-match":function(e){return Ji[":nth-match"](e,!0)},":links-here":function(e){return e+""==RS.location+""},":lang":function(e){return function(t){for(;t;){if(t.lang)return t.lang.indexOf(e)===0;t=t.parentNode}}},":dir":function(e){return function(t){for(;t;){if(t.dir)return t.dir===e;t=t.parentNode}}},":scope":function(e,t){var r=t||e.ownerDocument;return r.nodeType===9?e===r.documentElement:e===r},":any-link":function(e){return typeof e.href=="string"},":local-link":function(e){if(e.nodeName)return e.href&&e.host===RS.location.host;var t=+e+1;return function(r){if(r.href){var n=RS.location+"",i=r+"";return gJ(n,t)===gJ(i,t)}}},":default":function(e){return!!e.defaultSelected},":valid":function(e){return e.willValidate||e.validity&&e.validity.valid},":invalid":function(e){return!Ji[":valid"](e)},":in-range":function(e){return e.value>e.min&&e.value<=e.max},":out-of-range":function(e){return!Ji[":in-range"](e)},":required":function(e){return!!e.required},":optional":function(e){return!e.required},":read-only":function(e){if(e.readOnly)return!0;var t=e.getAttribute("contenteditable"),r=e.contentEditable,n=e.nodeName.toLowerCase();return n=n!=="input"&&n!=="textarea",(n||e.disabled)&&t==null&&r!=="true"},":read-write":function(e){return!Ji[":read-only"](e)},":hover":function(){throw new Error(":hover is not supported.")},":active":function(){throw new Error(":active is not supported.")},":link":function(){throw new Error(":link is not supported.")},":visited":function(){throw new Error(":visited is not supported.")},":column":function(){throw new Error(":column is not supported.")},":nth-column":function(){throw new Error(":nth-column is not supported.")},":nth-last-column":function(){throw new Error(":nth-last-column is not supported.")},":current":function(){throw new Error(":current is not supported.")},":past":function(){throw new Error(":past is not supported.")},":future":function(){throw new Error(":future is not supported.")},":contains":function(e){return function(t){var r=t.innerText||t.textContent||t.value||"";return r.indexOf(e)!==-1}},":has":function(e){return function(t){return mJ(e,t).length>0}}},AJ={"-":function(){return!0},"=":function(e,t){return e===t},"*=":function(e,t){return e.indexOf(t)!==-1},"~=":function(e,t){var r,n,i,s;for(n=0;;n=r+1){if(r=e.indexOf(t,n),r===-1)return!1;if(i=e[r-1],s=e[r+t.length],(!i||i===" ")&&(!s||s===" "))return!0}},"|=":function(e,t){var r=e.indexOf(t),n;if(r===0)return n=e[r+t.length],n==="-"||!n},"^=":function(e,t){return e.indexOf(t)===0},"$=":function(e,t){var r=e.lastIndexOf(t);return r!==-1&&r+t.length===e.length},"!=":function(e,t){return e!==t}},gE={" ":function(e){return function(t){for(;t=t.parentNode;)if(e(t))return t}},">":function(e){return function(t){if(t=t.parentNode)return e(t)&&t}},"+":function(e){return function(t){if(t=Um(t))return e(t)&&t}},"~":function(e){return function(t){for(;t=Um(t);)if(e(t))return t}},noop:function(e){return function(t){return e(t)&&t}},ref:function(e,t){var r;function n(i){for(var s=i.ownerDocument,o=s.getElementsByTagName("*"),a=o.length;a--;)if(r=o[a],n.test(i))return r=null,!0;r=null}return n.combinator=function(i){if(!(!r||!r.getAttribute)){var s=r.getAttribute(t)||"";if(s[0]==="#"&&(s=s.substring(1)),s===i.id&&e(r))return r}},n}},yt={escape:/\\(?:[^0-9A-Fa-f\r\n]|[0-9A-Fa-f]{1,6}[\r\n\t ]?)/g,str_escape:/(escape)|\\(\n|\r\n?|\f)/g,nonascii:/[\u00A0-\uFFFF]/,cssid:/(?:(?!-?[0-9])(?:escape|nonascii|[-_a-zA-Z0-9])+)/,qname:/^ *(cssid|\*)/,simple:/^(?:([.#]cssid)|pseudo|attr)/,ref:/^ *\/(cssid)\/ */,combinator:/^(?: +([^ \w*.#\\]) +|( )+|([^ \w*.#\\]))(?! *$)/,attr:/^\[(cssid)(?:([^\w]?=)(inside))?\]/,pseudo:/^(:cssid)(?:\((inside)\))?/,inside:/(?:"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|<[^"'>]*>|\\["'>]|[^"'>])*/,ident:/^(cssid)$/};yt.cssid=Oo(yt.cssid,"nonascii",yt.nonascii);yt.cssid=Oo(yt.cssid,"escape",yt.escape);yt.qname=Oo(yt.qname,"cssid",yt.cssid);yt.simple=Oo(yt.simple,"cssid",yt.cssid);yt.ref=Oo(yt.ref,"cssid",yt.cssid);yt.attr=Oo(yt.attr,"cssid",yt.cssid);yt.pseudo=Oo(yt.pseudo,"cssid",yt.cssid);yt.inside=Oo(yt.inside,`[^"'>]*`,yt.inside);yt.attr=Oo(yt.attr,"inside",pJ("\\[","\\]"));yt.pseudo=Oo(yt.pseudo,"inside",pJ("\\(","\\)"));yt.simple=Oo(yt.simple,"pseudo",yt.pseudo);yt.simple=Oo(yt.simple,"attr",yt.attr);yt.ident=Oo(yt.ident,"cssid",yt.cssid);yt.str_escape=Oo(yt.str_escape,"escape",yt.escape);var pE=function(e){for(var t=e.replace(/^\s+|\s+$/g,""),r,n=[],i=[],s,o,a,l,c;t;){if(a=yt.qname.exec(t))t=t.substring(a[0].length),o=jf(a[1]),i.push(kS(o,!0));else if(a=yt.simple.exec(t))t=t.substring(a[0].length),o="*",i.push(kS(o,!0)),i.push(kS(a));else throw new SyntaxError("Invalid selector.");for(;a=yt.simple.exec(t);)t=t.substring(a[0].length),i.push(kS(a));if(t[0]==="!"&&(t=t.substring(1),s=jPe(),s.qname=o,i.push(s.simple)),a=yt.ref.exec(t)){t=t.substring(a[0].length),c=gE.ref(VL(i),jf(a[1])),n.push(c.combinator),i=[];continue}if(a=yt.combinator.exec(t)){if(t=t.substring(a[0].length),l=a[1]||a[2]||a[3],l===","){n.push(gE.noop(VL(i)));break}}else l="noop";if(!gE[l])throw new SyntaxError("Bad combinator.");n.push(gE[l](VL(i))),i=[]}return r=JPe(n),r.qname=o,r.sel=t,s&&(s.lname=r.qname,s.test=r,s.qname=s.qname,s.sel=r.sel,r=s),c&&(c.test=r,c.qname=r.qname,c.sel=r.sel,r=c),r},kS=function(e,t){if(t)return e==="*"?Ji["*"]:Ji.type(e);if(e[1])return e[1][0]==="."?Ji.attr("class","~=",jf(e[1].substring(1)),!1):Ji.attr("id","=",jf(e[1].substring(1)),!1);if(e[2])return e[3]?Ji[jf(e[2])](hJ(e[3])):Ji[jf(e[2])];if(e[4]){var r=e[6],n=/["'\s]\s*I$/i.test(r);return n&&(r=r.replace(/\s*I$/i,"")),Ji.attr(jf(e[4]),e[5]||"-",hJ(r),n)}throw new SyntaxError("Unknown Selector.")},VL=function(e){var t=e.length,r;return t<2?e[0]:function(n){if(n){for(r=0;r<t;r++)if(!e[r](n))return;return!0}}},JPe=function(e){return e.length<2?function(t){return!!e[0](t)}:function(t){for(var r=e.length;r--;)if(!(t=e[r](t)))return;return!0}},jPe=function(){var e;function t(r){for(var n=r.ownerDocument,i=n.getElementsByTagName(t.lname),s=i.length;s--;)if(t.test(i[s])&&e===r)return e=null,!0;e=null}return t.simple=function(r){return e=r,!0},t},HL=function(e){for(var t=pE(e),r=[t];t.sel;)t=pE(t.sel),r.push(t);return r.length<2?t:function(n){for(var i=r.length,s=0;s<i;s++)if(r[s](n))return!0}},mJ=function(e,t){for(var r=[],n=pE(e),i=t.getElementsByTagName(n.qname),s=0,o;o=i[s++];)n(o)&&r.push(o);if(n.sel){for(;n.sel;)for(n=pE(n.sel),i=t.getElementsByTagName(n.qname),s=0;o=i[s++];)n(o)&&KPe.call(r,o)===-1&&r.push(o);r.sort(GPe)}return r};yJ.exports=Om=function(e,t){var r,n;if(t.nodeType!==11&&e.indexOf(" ")===-1){if(e[0]==="#"&&t.rooted&&/^#[A-Z_][-A-Z0-9_]*$/i.test(e)&&t.doc._hasMultipleElementsWithId&&(r=e.substring(1),!t.doc._hasMultipleElementsWithId(r)))return n=t.doc.getElementById(r),n?[n]:[];if(e[0]==="."&&/^\.\w+$/.test(e))return t.getElementsByClassName(e.substring(1));if(/^\w+$/.test(e))return t.getElementsByTagName(e)}return mJ(e,t)};Om.selectors=Ji;Om.operators=AJ;Om.combinators=gE;Om.matches=function(e,t){var r={sel:t};do if(r=pE(r.sel),r(e))return!0;while(r.sel);return!1}});var QS=x((o_t,CJ)=>{"use strict";var ZPe=Es(),XPe=xL(),WL=function(e,t){for(var r=e.createDocumentFragment(),n=0;n<t.length;n++){var i=t[n],s=i instanceof ZPe;r.appendChild(s?i:e.createTextNode(String(i)))}return r},eLe={after:{value:function(){var t=Array.prototype.slice.call(arguments),r=this.parentNode,n=this.nextSibling;if(r!==null){for(;n&&t.some(function(s){return s===n});)n=n.nextSibling;var i=WL(this.doc,t);r.insertBefore(i,n)}}},before:{value:function(){var t=Array.prototype.slice.call(arguments),r=this.parentNode,n=this.previousSibling;if(r!==null){for(;n&&t.some(function(o){return o===n});)n=n.previousSibling;var i=WL(this.doc,t),s=n?n.nextSibling:r.firstChild;r.insertBefore(i,s)}}},remove:{value:function(){this.parentNode!==null&&(this.doc&&(this.doc._preremoveNodeIterators(this),this.rooted&&this.doc.mutateRemove(this)),this._remove(),this.parentNode=null)}},_remove:{value:function(){var t=this.parentNode;t!==null&&(t._childNodes?t._childNodes.splice(this.index,1):t._firstChild===this&&(this._nextSibling===this?t._firstChild=null:t._firstChild=this._nextSibling),XPe.remove(this),t.modify())}},replaceWith:{value:function(){var t=Array.prototype.slice.call(arguments),r=this.parentNode,n=this.nextSibling;if(r!==null){for(;n&&t.some(function(s){return s===n});)n=n.nextSibling;var i=WL(this.doc,t);this.parentNode===r?r.replaceChild(i,this):r.insertBefore(i,n)}}}};CJ.exports=eLe});var GL=x((a_t,EJ)=>{"use strict";var vJ=Es(),tLe={nextElementSibling:{get:function(){if(this.parentNode){for(var e=this.nextSibling;e!==null;e=e.nextSibling)if(e.nodeType===vJ.ELEMENT_NODE)return e}return null}},previousElementSibling:{get:function(){if(this.parentNode){for(var e=this.previousSibling;e!==null;e=e.previousSibling)if(e.nodeType===vJ.ELEMENT_NODE)return e}return null}}};EJ.exports=tLe});var $L=x((l_t,xJ)=>{"use strict";xJ.exports=bJ;var qm=ni();function bJ(e){this.element=e}Object.defineProperties(bJ.prototype,{length:{get:qm.shouldOverride},item:{value:qm.shouldOverride},getNamedItem:{value:function(t){return this.element.getAttributeNode(t)}},getNamedItemNS:{value:function(t,r){return this.element.getAttributeNodeNS(t,r)}},setNamedItem:{value:qm.nyi},setNamedItemNS:{value:qm.nyi},removeNamedItem:{value:function(t){var r=this.element.getAttributeNode(t);if(r)return this.element.removeAttribute(t),r;qm.NotFoundError()}},removeNamedItemNS:{value:function(t,r){var n=this.element.getAttributeNodeNS(t,r);if(n)return this.element.removeAttributeNS(t,r),n;qm.NotFoundError()}}})});var Hm=x((c_t,BJ)=>{"use strict";BJ.exports=Zf;var YL=TS(),Wn=ni(),ru=Wn.NAMESPACE,PS=LL(),lc=Es(),KL=up(),rLe=_L(),NS=cJ(),Vm=wS(),nLe=OL(),zL=MS(),wJ=DS(),iLe=QS(),sLe=GL(),IJ=$L(),_J=Object.create(null);function Zf(e,t,r,n){wJ.call(this),this.nodeType=lc.ELEMENT_NODE,this.ownerDocument=e,this.localName=t,this.namespaceURI=r,this.prefix=n,this._tagName=void 0,this._attrsByQName=Object.create(null),this._attrsByLName=Object.create(null),this._attrKeys=[]}function JL(e,t){if(e.nodeType===lc.TEXT_NODE)t.push(e._data);else for(var r=0,n=e.childNodes.length;r<n;r++)JL(e.childNodes[r],t)}Zf.prototype=Object.create(wJ.prototype,{isHTML:{get:function(){return this.namespaceURI===ru.HTML&&this.ownerDocument.isHTML}},tagName:{get:function(){if(this._tagName===void 0){var t;if(this.prefix===null?t=this.localName:t=this.prefix+":"+this.localName,this.isHTML){var r=_J[t];r||(_J[t]=r=Wn.toASCIIUpperCase(t)),t=r}this._tagName=t}return this._tagName}},nodeName:{get:function(){return this.tagName}},nodeValue:{get:function(){return null},set:function(){}},textContent:{get:function(){var e=[];return JL(this,e),e.join("")},set:function(e){this.removeChildren(),e!=null&&e!==""&&this._appendChild(this.ownerDocument.createTextNode(e))}},innerText:{get:function(){var e=[];return JL(this,e),e.join("").replace(/[ \t\n\f\r]+/g," ").trim()},set:function(e){this.removeChildren(),e!=null&&e!==""&&this._appendChild(this.ownerDocument.createTextNode(e))}},innerHTML:{get:function(){return this.serialize()},set:Wn.nyi},outerHTML:{get:function(){return rLe.serializeOne(this,{nodeType:0})},set:function(e){var t=this.ownerDocument,r=this.parentNode;if(r!==null){r.nodeType===lc.DOCUMENT_NODE&&Wn.NoModificationAllowedError(),r.nodeType===lc.DOCUMENT_FRAGMENT_NODE&&(r=r.ownerDocument.createElement("body"));var n=t.implementation.mozHTMLParser(t._address,r);n.parse(e===null?"":String(e),!0),this.replaceWith(n._asDocumentFragment())}}},_insertAdjacent:{value:function(t,r){var n=!1;switch(t){case"beforebegin":n=!0;case"afterend":var i=this.parentNode;return i===null?null:i.insertBefore(r,n?this:this.nextSibling);case"afterbegin":n=!0;case"beforeend":return this.insertBefore(r,n?this.firstChild:null);default:return Wn.SyntaxError()}}},insertAdjacentElement:{value:function(t,r){if(r.nodeType!==lc.ELEMENT_NODE)throw new TypeError("not an element");return t=Wn.toASCIILowerCase(String(t)),this._insertAdjacent(t,r)}},insertAdjacentText:{value:function(t,r){var n=this.ownerDocument.createTextNode(r);t=Wn.toASCIILowerCase(String(t)),this._insertAdjacent(t,n)}},insertAdjacentHTML:{value:function(t,r){t=Wn.toASCIILowerCase(String(t)),r=String(r);var n;switch(t){case"beforebegin":case"afterend":n=this.parentNode,(n===null||n.nodeType===lc.DOCUMENT_NODE)&&Wn.NoModificationAllowedError();break;case"afterbegin":case"beforeend":n=this;break;default:Wn.SyntaxError()}(!(n instanceof Zf)||n.ownerDocument.isHTML&&n.localName==="html"&&n.namespaceURI===ru.HTML)&&(n=n.ownerDocument.createElementNS(ru.HTML,"body"));var i=this.ownerDocument.implementation.mozHTMLParser(this.ownerDocument._address,n);i.parse(r,!0),this._insertAdjacent(t,i._asDocumentFragment())}},children:{get:function(){return this._children||(this._children=new SJ(this)),this._children}},attributes:{get:function(){return this._attributes||(this._attributes=new ZL(this)),this._attributes}},firstElementChild:{get:function(){for(var e=this.firstChild;e!==null;e=e.nextSibling)if(e.nodeType===lc.ELEMENT_NODE)return e;return null}},lastElementChild:{get:function(){for(var e=this.lastChild;e!==null;e=e.previousSibling)if(e.nodeType===lc.ELEMENT_NODE)return e;return null}},childElementCount:{get:function(){return this.children.length}},nextElement:{value:function(e){e||(e=this.ownerDocument.documentElement);var t=this.firstElementChild;if(!t){if(this===e)return null;t=this.nextElementSibling}if(t)return t;for(var r=this.parentElement;r&&r!==e;r=r.parentElement)if(t=r.nextElementSibling,t)return t;return null}},getElementsByTagName:{value:function(t){var r;return t?(t==="*"?r=function(){return!0}:this.isHTML?r=oLe(t):r=jL(t),new NS(this,r)):new KL}},getElementsByTagNameNS:{value:function(t,r){var n;return t==="*"&&r==="*"?n=function(){return!0}:t==="*"?n=jL(r):r==="*"?n=aLe(t):n=lLe(t,r),new NS(this,n)}},getElementsByClassName:{value:function(t){if(t=String(t).trim(),t===""){var r=new KL;return r}return t=t.split(/[ \t\r\n\f]+/),new NS(this,cLe(t))}},getElementsByName:{value:function(t){return new NS(this,uLe(String(t)))}},clone:{value:function(){var t;this.namespaceURI!==ru.HTML||this.prefix||!this.ownerDocument.isHTML?t=this.ownerDocument.createElementNS(this.namespaceURI,this.prefix!==null?this.prefix+":"+this.localName:this.localName):t=this.ownerDocument.createElement(this.localName);for(var r=0,n=this._attrKeys.length;r<n;r++){var i=this._attrKeys[r],s=this._attrsByLName[i],o=s.cloneNode();o._setOwnerElement(t),t._attrsByLName[i]=o,t._addQName(o)}return t._attrKeys=this._attrKeys.concat(),t}},isEqual:{value:function(t){if(this.localName!==t.localName||this.namespaceURI!==t.namespaceURI||this.prefix!==t.prefix||this._numattrs!==t._numattrs)return!1;for(var r=0,n=this._numattrs;r<n;r++){var i=this._attr(r);if(!t.hasAttributeNS(i.namespaceURI,i.localName)||t.getAttributeNS(i.namespaceURI,i.localName)!==i.value)return!1}return!0}},_lookupNamespacePrefix:{value:function(t,r){if(this.namespaceURI&&this.namespaceURI===t&&this.prefix!==null&&r.lookupNamespaceURI(this.prefix)===t)return this.prefix;for(var n=0,i=this._numattrs;n<i;n++){var s=this._attr(n);if(s.prefix==="xmlns"&&s.value===t&&r.lookupNamespaceURI(s.localName)===t)return s.localName}var o=this.parentElement;return o?o._lookupNamespacePrefix(t,r):null}},lookupNamespaceURI:{value:function(t){if((t===""||t===void 0)&&(t=null),this.namespaceURI!==null&&this.prefix===t)return this.namespaceURI;for(var r=0,n=this._numattrs;r<n;r++){var i=this._attr(r);if(i.namespaceURI===ru.XMLNS&&(i.prefix==="xmlns"&&i.localName===t||t===null&&i.prefix===null&&i.localName==="xmlns"))return i.value||null}var s=this.parentElement;return s?s.lookupNamespaceURI(t):null}},getAttribute:{value:function(t){var r=this.getAttributeNode(t);return r?r.value:null}},getAttributeNS:{value:function(t,r){var n=this.getAttributeNodeNS(t,r);return n?n.value:null}},getAttributeNode:{value:function(t){t=String(t),/[A-Z]/.test(t)&&this.isHTML&&(t=Wn.toASCIILowerCase(t));var r=this._attrsByQName[t];return r?(Array.isArray(r)&&(r=r[0]),r):null}},getAttributeNodeNS:{value:function(t,r){t=t==null?"":String(t),r=String(r);var n=this._attrsByLName[t+"|"+r];return n||null}},hasAttribute:{value:function(t){return t=String(t),/[A-Z]/.test(t)&&this.isHTML&&(t=Wn.toASCIILowerCase(t)),this._attrsByQName[t]!==void 0}},hasAttributeNS:{value:function(t,r){t=t==null?"":String(t),r=String(r);var n=t+"|"+r;return this._attrsByLName[n]!==void 0}},hasAttributes:{value:function(){return this._numattrs>0}},toggleAttribute:{value:function(t,r){t=String(t),YL.isValidName(t)||Wn.InvalidCharacterError(),/[A-Z]/.test(t)&&this.isHTML&&(t=Wn.toASCIILowerCase(t));var n=this._attrsByQName[t];return n===void 0?r===void 0||r===!0?(this._setAttribute(t,""),!0):!1:r===void 0||r===!1?(this.removeAttribute(t),!1):!0}},_setAttribute:{value:function(t,r){var n=this._attrsByQName[t],i;n?Array.isArray(n)&&(n=n[0]):(n=this._newattr(t),i=!0),n.value=r,this._attributes&&(this._attributes[t]=n),i&&this._newattrhook&&this._newattrhook(t,r)}},setAttribute:{value:function(t,r){t=String(t),YL.isValidName(t)||Wn.InvalidCharacterError(),/[A-Z]/.test(t)&&this.isHTML&&(t=Wn.toASCIILowerCase(t)),this._setAttribute(t,String(r))}},_setAttributeNS:{value:function(t,r,n){var i=r.indexOf(":"),s,o;i<0?(s=null,o=r):(s=r.substring(0,i),o=r.substring(i+1)),(t===""||t===void 0)&&(t=null);var a=(t===null?"":t)+"|"+o,l=this._attrsByLName[a],c;l||(l=new AE(this,o,s,t),c=!0,this._attrsByLName[a]=l,this._attributes&&(this._attributes[this._attrKeys.length]=l),this._attrKeys.push(a),this._addQName(l)),l.value=n,c&&this._newattrhook&&this._newattrhook(r,n)}},setAttributeNS:{value:function(t,r,n){t=t==null||t===""?null:String(t),r=String(r),YL.isValidQName(r)||Wn.InvalidCharacterError();var i=r.indexOf(":"),s=i<0?null:r.substring(0,i);(s!==null&&t===null||s==="xml"&&t!==ru.XML||(r==="xmlns"||s==="xmlns")&&t!==ru.XMLNS||t===ru.XMLNS&&!(r==="xmlns"||s==="xmlns"))&&Wn.NamespaceError(),this._setAttributeNS(t,r,String(n))}},setAttributeNode:{value:function(t){if(t.ownerElement!==null&&t.ownerElement!==this)throw new Vm(Vm.INUSE_ATTRIBUTE_ERR);var r=null,n=this._attrsByQName[t.name];if(n){if(Array.isArray(n)||(n=[n]),n.some(function(i){return i===t}))return t;if(t.ownerElement!==null)throw new Vm(Vm.INUSE_ATTRIBUTE_ERR);n.forEach(function(i){this.removeAttributeNode(i)},this),r=n[0]}return this.setAttributeNodeNS(t),r}},setAttributeNodeNS:{value:function(t){if(t.ownerElement!==null)throw new Vm(Vm.INUSE_ATTRIBUTE_ERR);var r=t.namespaceURI,n=(r===null?"":r)+"|"+t.localName,i=this._attrsByLName[n];return i&&this.removeAttributeNode(i),t._setOwnerElement(this),this._attrsByLName[n]=t,this._attributes&&(this._attributes[this._attrKeys.length]=t),this._attrKeys.push(n),this._addQName(t),this._newattrhook&&this._newattrhook(t.name,t.value),i||null}},removeAttribute:{value:function(t){t=String(t),/[A-Z]/.test(t)&&this.isHTML&&(t=Wn.toASCIILowerCase(t));var r=this._attrsByQName[t];if(r){Array.isArray(r)?r.length>2?r=r.shift():(this._attrsByQName[t]=r[1],r=r[0]):this._attrsByQName[t]=void 0;var n=r.namespaceURI,i=(n===null?"":n)+"|"+r.localName;this._attrsByLName[i]=void 0;var s=this._attrKeys.indexOf(i);this._attributes&&(Array.prototype.splice.call(this._attributes,s,1),this._attributes[t]=void 0),this._attrKeys.splice(s,1);var o=r.onchange;r._setOwnerElement(null),o&&o.call(r,this,r.localName,r.value,null),this.rooted&&this.ownerDocument.mutateRemoveAttr(r)}}},removeAttributeNS:{value:function(t,r){t=t==null?"":String(t),r=String(r);var n=t+"|"+r,i=this._attrsByLName[n];if(i){this._attrsByLName[n]=void 0;var s=this._attrKeys.indexOf(n);this._attributes&&Array.prototype.splice.call(this._attributes,s,1),this._attrKeys.splice(s,1),this._removeQName(i);var o=i.onchange;i._setOwnerElement(null),o&&o.call(i,this,i.localName,i.value,null),this.rooted&&this.ownerDocument.mutateRemoveAttr(i)}}},removeAttributeNode:{value:function(t){var r=t.namespaceURI,n=(r===null?"":r)+"|"+t.localName;return this._attrsByLName[n]!==t&&Wn.NotFoundError(),this.removeAttributeNS(r,t.localName),t}},getAttributeNames:{value:function(){var t=this;return this._attrKeys.map(function(r){return t._attrsByLName[r].name})}},_getattr:{value:function(t){var r=this._attrsByQName[t];return r?r.value:null}},_setattr:{value:function(t,r){var n=this._attrsByQName[t],i;n||(n=this._newattr(t),i=!0),n.value=String(r),this._attributes&&(this._attributes[t]=n),i&&this._newattrhook&&this._newattrhook(t,r)}},_newattr:{value:function(t){var r=new AE(this,t,null,null),n="|"+t;return this._attrsByQName[t]=r,this._attrsByLName[n]=r,this._attributes&&(this._attributes[this._attrKeys.length]=r),this._attrKeys.push(n),r}},_addQName:{value:function(e){var t=e.name,r=this._attrsByQName[t];r?Array.isArray(r)?r.push(e):this._attrsByQName[t]=[r,e]:this._attrsByQName[t]=e,this._attributes&&(this._attributes[t]=e)}},_removeQName:{value:function(e){var t=e.name,r=this._attrsByQName[t];if(Array.isArray(r)){var n=r.indexOf(e);Wn.assert(n!==-1),r.length===2?(this._attrsByQName[t]=r[1-n],this._attributes&&(this._attributes[t]=this._attrsByQName[t])):(r.splice(n,1),this._attributes&&this._attributes[t]===e&&(this._attributes[t]=r[0]))}else Wn.assert(r===e),this._attrsByQName[t]=void 0,this._attributes&&(this._attributes[t]=void 0)}},_numattrs:{get:function(){return this._attrKeys.length}},_attr:{value:function(e){return this._attrsByLName[this._attrKeys[e]]}},id:PS.property({name:"id"}),className:PS.property({name:"class"}),classList:{get:function(){var e=this;if(this._classList)return this._classList;var t=new nLe(function(){return e.className||""},function(r){e.className=r});return this._classList=t,t},set:function(e){this.className=e}},matches:{value:function(e){return zL.matches(this,e)}},closest:{value:function(e){var t=this;do{if(t.matches&&t.matches(e))return t;t=t.parentElement||t.parentNode}while(t!==null&&t.nodeType===lc.ELEMENT_NODE);return null}},querySelector:{value:function(e){return zL(e,this)[0]}},querySelectorAll:{value:function(e){var t=zL(e,this);return t.item?t:new KL(t)}}});Object.defineProperties(Zf.prototype,iLe);Object.defineProperties(Zf.prototype,sLe);PS.registerChangeHandler(Zf,"id",function(e,t,r,n){e.rooted&&(r&&e.ownerDocument.delId(r,e),n&&e.ownerDocument.addId(n,e))});PS.registerChangeHandler(Zf,"class",function(e,t,r,n){e._classList&&e._classList._update()});function AE(e,t,r,n,i){this.localName=t,this.prefix=r===null||r===""?null:""+r,this.namespaceURI=n===null||n===""?null:""+n,this.data=i,this._setOwnerElement(e)}AE.prototype=Object.create(Object.prototype,{ownerElement:{get:function(){return this._ownerElement}},_setOwnerElement:{value:function(t){this._ownerElement=t,this.prefix===null&&this.namespaceURI===null&&t?this.onchange=t._attributeChangeHandlers[this.localName]:this.onchange=null}},name:{get:function(){return this.prefix?this.prefix+":"+this.localName:this.localName}},specified:{get:function(){return!0}},value:{get:function(){return this.data},set:function(e){var t=this.data;e=e===void 0?"":e+"",e!==t&&(this.data=e,this.ownerElement&&(this.onchange&&this.onchange(this.ownerElement,this.localName,t,e),this.ownerElement.rooted&&this.ownerElement.ownerDocument.mutateAttr(this,t)))}},cloneNode:{value:function(t){return new AE(null,this.localName,this.prefix,this.namespaceURI,this.data)}},nodeType:{get:function(){return lc.ATTRIBUTE_NODE}},nodeName:{get:function(){return this.name}},nodeValue:{get:function(){return this.value},set:function(e){this.value=e}},textContent:{get:function(){return this.value},set:function(e){e==null&&(e=""),this.value=e}},innerText:{get:function(){return this.value},set:function(e){e==null&&(e=""),this.value=e}}});Zf._Attr=AE;function ZL(e){IJ.call(this,e);for(var t in e._attrsByQName)this[t]=e._attrsByQName[t];for(var r=0;r<e._attrKeys.length;r++)this[r]=e._attrsByLName[e._attrKeys[r]]}ZL.prototype=Object.create(IJ.prototype,{length:{get:function(){return this.element._attrKeys.length},set:function(){}},item:{value:function(e){return e=e>>>0,e>=this.length?null:this.element._attrsByLName[this.element._attrKeys[e]]}}});globalThis.Symbol?.iterator&&(ZL.prototype[globalThis.Symbol.iterator]=function(){var e=0,t=this.length,r=this;return{next:function(){return e<t?{value:r.item(e++)}:{done:!0}}}});function SJ(e){this.element=e,this.updateCache()}SJ.prototype=Object.create(Object.prototype,{length:{get:function(){return this.updateCache(),this.childrenByNumber.length}},item:{value:function(t){return this.updateCache(),this.childrenByNumber[t]||null}},namedItem:{value:function(t){return this.updateCache(),this.childrenByName[t]||null}},namedItems:{get:function(){return this.updateCache(),this.childrenByName}},updateCache:{value:function(){var t=/^(a|applet|area|embed|form|frame|frameset|iframe|img|object)$/;if(this.lastModTime!==this.element.lastModTime){this.lastModTime=this.element.lastModTime;for(var r=this.childrenByNumber&&this.childrenByNumber.length||0,n=0;n<r;n++)this[n]=void 0;this.childrenByNumber=[],this.childrenByName=Object.create(null);for(var i=this.element.firstChild;i!==null;i=i.nextSibling)if(i.nodeType===lc.ELEMENT_NODE){this[this.childrenByNumber.length]=i,this.childrenByNumber.push(i);var s=i.getAttribute("id");s&&!this.childrenByName[s]&&(this.childrenByName[s]=i);var o=i.getAttribute("name");o&&this.element.namespaceURI===ru.HTML&&t.test(this.element.localName)&&!this.childrenByName[o]&&(this.childrenByName[s]=i)}}}}});function jL(e){return function(t){return t.localName===e}}function oLe(e){var t=Wn.toASCIILowerCase(e);return t===e?jL(e):function(r){return r.isHTML?r.localName===t:r.localName===e}}function aLe(e){return function(t){return t.namespaceURI===e}}function lLe(e,t){return function(r){return r.namespaceURI===e&&r.localName===t}}function cLe(e){return function(t){return e.every(function(r){return t.classList.contains(r)})}}function uLe(e){return function(t){return t.namespaceURI!==ru.HTML?!1:t.getAttribute("name")===e}}});var XL=x((u_t,FJ)=>{"use strict";FJ.exports=kJ;var TJ=Es(),dLe=up(),RJ=ni(),DJ=RJ.HierarchyRequestError,fLe=RJ.NotFoundError;function kJ(){TJ.call(this)}kJ.prototype=Object.create(TJ.prototype,{hasChildNodes:{value:function(){return!1}},firstChild:{value:null},lastChild:{value:null},insertBefore:{value:function(e,t){if(!e.nodeType)throw new TypeError("not a node");DJ()}},replaceChild:{value:function(e,t){if(!e.nodeType)throw new TypeError("not a node");DJ()}},removeChild:{value:function(e){if(!e.nodeType)throw new TypeError("not a node");fLe()}},removeChildren:{value:function(){}},childNodes:{get:function(){return this._childNodes||(this._childNodes=new dLe),this._childNodes}}})});var mE=x((d_t,NJ)=>{"use strict";NJ.exports=LS;var QJ=XL(),MJ=ni(),hLe=QS(),gLe=GL();function LS(){QJ.call(this)}LS.prototype=Object.create(QJ.prototype,{substringData:{value:function(t,r){if(arguments.length<2)throw new TypeError("Not enough arguments");return t=t>>>0,r=r>>>0,(t>this.data.length||t<0||r<0)&&MJ.IndexSizeError(),this.data.substring(t,t+r)}},appendData:{value:function(t){if(arguments.length<1)throw new TypeError("Not enough arguments");this.data+=String(t)}},insertData:{value:function(t,r){return this.replaceData(t,0,r)}},deleteData:{value:function(t,r){return this.replaceData(t,r,"")}},replaceData:{value:function(t,r,n){var i=this.data,s=i.length;t=t>>>0,r=r>>>0,n=String(n),(t>s||t<0)&&MJ.IndexSizeError(),t+r>s&&(r=s-t);var o=i.substring(0,t),a=i.substring(t+r);this.data=o+n+a}},isEqual:{value:function(t){return this._data===t._data}},length:{get:function(){return this.data.length}}});Object.defineProperties(LS.prototype,hLe);Object.defineProperties(LS.prototype,gLe)});var tU=x((f_t,OJ)=>{"use strict";OJ.exports=eU;var PJ=ni(),LJ=Es(),UJ=mE();function eU(e,t){UJ.call(this),this.nodeType=LJ.TEXT_NODE,this.ownerDocument=e,this._data=t,this._index=void 0}var yE={get:function(){return this._data},set:function(e){e==null?e="":e=String(e),e!==this._data&&(this._data=e,this.rooted&&this.ownerDocument.mutateValue(this),this.parentNode&&this.parentNode._textchangehook&&this.parentNode._textchangehook(this))}};eU.prototype=Object.create(UJ.prototype,{nodeName:{value:"#text"},nodeValue:yE,textContent:yE,innerText:yE,data:{get:yE.get,set:function(e){yE.set.call(this,e===null?"":String(e))}},splitText:{value:function(t){(t>this._data.length||t<0)&&PJ.IndexSizeError();var r=this._data.substring(t),n=this.ownerDocument.createTextNode(r);this.data=this.data.substring(0,t);var i=this.parentNode;return i!==null&&i.insertBefore(n,this.nextSibling),n}},wholeText:{get:function(){for(var t=this.textContent,r=this.nextSibling;r&&r.nodeType===LJ.TEXT_NODE;r=r.nextSibling)t+=r.textContent;return t}},replaceWholeText:{value:PJ.nyi},clone:{value:function(){return new eU(this.ownerDocument,this._data)}}})});var nU=x((h_t,VJ)=>{"use strict";VJ.exports=rU;var pLe=Es(),qJ=mE();function rU(e,t){qJ.call(this),this.nodeType=pLe.COMMENT_NODE,this.ownerDocument=e,this._data=t}var CE={get:function(){return this._data},set:function(e){e==null?e="":e=String(e),this._data=e,this.rooted&&this.ownerDocument.mutateValue(this)}};rU.prototype=Object.create(qJ.prototype,{nodeName:{value:"#comment"},nodeValue:CE,textContent:CE,innerText:CE,data:{get:CE.get,set:function(e){CE.set.call(this,e===null?"":String(e))}},clone:{value:function(){return new rU(this.ownerDocument,this._data)}}})});var sU=x((g_t,GJ)=>{"use strict";GJ.exports=iU;var ALe=Es(),mLe=up(),WJ=DS(),US=Hm(),yLe=MS(),HJ=ni();function iU(e){WJ.call(this),this.nodeType=ALe.DOCUMENT_FRAGMENT_NODE,this.ownerDocument=e}iU.prototype=Object.create(WJ.prototype,{nodeName:{value:"#document-fragment"},nodeValue:{get:function(){return null},set:function(){}},textContent:Object.getOwnPropertyDescriptor(US.prototype,"textContent"),innerText:Object.getOwnPropertyDescriptor(US.prototype,"innerText"),querySelector:{value:function(e){var t=this.querySelectorAll(e);return t.length?t[0]:null}},querySelectorAll:{value:function(e){var t=Object.create(this);t.isHTML=!0,t.getElementsByTagName=US.prototype.getElementsByTagName,t.nextElement=Object.getOwnPropertyDescriptor(US.prototype,"firstElementChild").get;var r=yLe(e,t);return r.item?r:new mLe(r)}},clone:{value:function(){return new iU(this.ownerDocument)}},isEqual:{value:function(t){return!0}},innerHTML:{get:function(){return this.serialize()},set:HJ.nyi},outerHTML:{get:function(){return this.serialize()},set:HJ.nyi}})});var aU=x((p_t,YJ)=>{"use strict";YJ.exports=oU;var CLe=Es(),$J=mE();function oU(e,t,r){$J.call(this),this.nodeType=CLe.PROCESSING_INSTRUCTION_NODE,this.ownerDocument=e,this.target=t,this._data=r}var vE={get:function(){return this._data},set:function(e){e==null?e="":e=String(e),this._data=e,this.rooted&&this.ownerDocument.mutateValue(this)}};oU.prototype=Object.create($J.prototype,{nodeName:{get:function(){return this.target}},nodeValue:vE,textContent:vE,innerText:vE,data:{get:vE.get,set:function(e){vE.set.call(this,e===null?"":String(e))}},clone:{value:function(){return new oU(this.ownerDocument,this.target,this._data)}},isEqual:{value:function(t){return this.target===t.target&&this._data===t._data}}})});var EE=x((A_t,KJ)=>{"use strict";var lU={FILTER_ACCEPT:1,FILTER_REJECT:2,FILTER_SKIP:3,SHOW_ALL:4294967295,SHOW_ELEMENT:1,SHOW_ATTRIBUTE:2,SHOW_TEXT:4,SHOW_CDATA_SECTION:8,SHOW_ENTITY_REFERENCE:16,SHOW_ENTITY:32,SHOW_PROCESSING_INSTRUCTION:64,SHOW_COMMENT:128,SHOW_DOCUMENT:256,SHOW_DOCUMENT_TYPE:512,SHOW_DOCUMENT_FRAGMENT:1024,SHOW_NOTATION:2048};KJ.exports=lU.constructor=lU.prototype=lU});var uU=x((y_t,JJ)=>{"use strict";var m_t=JJ.exports={nextSkippingChildren:vLe,nextAncestorSibling:cU,next:ELe,previous:bLe,deepLastChild:zJ};function vLe(e,t){return e===t?null:e.nextSibling!==null?e.nextSibling:cU(e,t)}function cU(e,t){for(e=e.parentNode;e!==null;e=e.parentNode){if(e===t)return null;if(e.nextSibling!==null)return e.nextSibling}return null}function ELe(e,t){var r;return r=e.firstChild,r!==null?r:e===t?null:(r=e.nextSibling,r!==null?r:cU(e,t))}function zJ(e){for(;e.lastChild;)e=e.lastChild;return e}function bLe(e,t){var r;return r=e.previousSibling,r!==null?zJ(r):(r=e.parentNode,r===t?null:r)}});var nj=x((C_t,rj)=>{"use strict";rj.exports=tj;var xLe=Es(),bs=EE(),jJ=uU(),ej=ni(),dU={first:"firstChild",last:"lastChild",next:"firstChild",previous:"lastChild"},fU={first:"nextSibling",last:"previousSibling",next:"nextSibling",previous:"previousSibling"};function ZJ(e,t){var r,n,i,s,o;for(n=e._currentNode[dU[t]];n!==null;){if(s=e._internalFilter(n),s===bs.FILTER_ACCEPT)return e._currentNode=n,n;if(s===bs.FILTER_SKIP&&(r=n[dU[t]],r!==null)){n=r;continue}for(;n!==null;){if(o=n[fU[t]],o!==null){n=o;break}if(i=n.parentNode,i===null||i===e.root||i===e._currentNode)return null;n=i}}return null}function XJ(e,t){var r,n,i;if(r=e._currentNode,r===e.root)return null;for(;;){for(i=r[fU[t]];i!==null;){if(r=i,n=e._internalFilter(r),n===bs.FILTER_ACCEPT)return e._currentNode=r,r;i=r[dU[t]],(n===bs.FILTER_REJECT||i===null)&&(i=r[fU[t]])}if(r=r.parentNode,r===null||r===e.root||e._internalFilter(r)===bs.FILTER_ACCEPT)return null}}function tj(e,t,r){(!e||!e.nodeType)&&ej.NotSupportedError(),this._root=e,this._whatToShow=Number(t)||0,this._filter=r||null,this._active=!1,this._currentNode=e}Object.defineProperties(tj.prototype,{root:{get:function(){return this._root}},whatToShow:{get:function(){return this._whatToShow}},filter:{get:function(){return this._filter}},currentNode:{get:function(){return this._currentNode},set:function(t){if(!(t instanceof xLe))throw new TypeError("Not a Node");this._currentNode=t}},_internalFilter:{value:function(t){var r,n;if(this._active&&ej.InvalidStateError(),!(1<<t.nodeType-1&this._whatToShow))return bs.FILTER_SKIP;if(n=this._filter,n===null)r=bs.FILTER_ACCEPT;else{this._active=!0;try{typeof n=="function"?r=n(t):r=n.acceptNode(t)}finally{this._active=!1}}return+r}},parentNode:{value:function(){for(var t=this._currentNode;t!==this.root;){if(t=t.parentNode,t===null)return null;if(this._internalFilter(t)===bs.FILTER_ACCEPT)return this._currentNode=t,t}return null}},firstChild:{value:function(){return ZJ(this,"first")}},lastChild:{value:function(){return ZJ(this,"last")}},previousSibling:{value:function(){return XJ(this,"previous")}},nextSibling:{value:function(){return XJ(this,"next")}},previousNode:{value:function(){var t,r,n,i;for(t=this._currentNode;t!==this._root;){for(n=t.previousSibling;n;n=t.previousSibling)if(t=n,r=this._internalFilter(t),r!==bs.FILTER_REJECT){for(i=t.lastChild;i&&(t=i,r=this._internalFilter(t),r!==bs.FILTER_REJECT);i=t.lastChild);if(r===bs.FILTER_ACCEPT)return this._currentNode=t,t}if(t===this.root||t.parentNode===null)return null;if(t=t.parentNode,this._internalFilter(t)===bs.FILTER_ACCEPT)return this._currentNode=t,t}return null}},nextNode:{value:function(){var t,r,n,i;t=this._currentNode,r=bs.FILTER_ACCEPT;e:for(;;){for(n=t.firstChild;n;n=t.firstChild){if(t=n,r=this._internalFilter(t),r===bs.FILTER_ACCEPT)return this._currentNode=t,t;if(r===bs.FILTER_REJECT)break}for(i=jJ.nextSkippingChildren(t,this.root);i;i=jJ.nextSkippingChildren(t,this.root)){if(t=i,r=this._internalFilter(t),r===bs.FILTER_ACCEPT)return this._currentNode=t,t;if(r===bs.FILTER_SKIP)continue e}return null}}},toString:{value:function(){return"[object TreeWalker]"}}})});var cj=x((v_t,lj)=>{"use strict";lj.exports=aj;var hU=EE(),gU=uU(),oj=ni();function _Le(e,t,r){return r?gU.next(e,t):e===t?null:gU.previous(e,null)}function ij(e,t){for(;t;t=t.parentNode)if(e===t)return!0;return!1}function sj(e,t){var r,n;for(r=e._referenceNode,n=e._pointerBeforeReferenceNode;;){if(n===t)n=!n;else if(r=_Le(r,e._root,t),r===null)return null;var i=e._internalFilter(r);if(i===hU.FILTER_ACCEPT)break}return e._referenceNode=r,e._pointerBeforeReferenceNode=n,r}function aj(e,t,r){(!e||!e.nodeType)&&oj.NotSupportedError(),this._root=e,this._referenceNode=e,this._pointerBeforeReferenceNode=!0,this._whatToShow=Number(t)||0,this._filter=r||null,this._active=!1,e.doc._attachNodeIterator(this)}Object.defineProperties(aj.prototype,{root:{get:function(){return this._root}},referenceNode:{get:function(){return this._referenceNode}},pointerBeforeReferenceNode:{get:function(){return this._pointerBeforeReferenceNode}},whatToShow:{get:function(){return this._whatToShow}},filter:{get:function(){return this._filter}},_internalFilter:{value:function(t){var r,n;if(this._active&&oj.InvalidStateError(),!(1<<t.nodeType-1&this._whatToShow))return hU.FILTER_SKIP;if(n=this._filter,n===null)r=hU.FILTER_ACCEPT;else{this._active=!0;try{typeof n=="function"?r=n(t):r=n.acceptNode(t)}finally{this._active=!1}}return+r}},_preremove:{value:function(t){if(!ij(t,this._root)&&ij(t,this._referenceNode)){if(this._pointerBeforeReferenceNode){for(var r=t;r.lastChild;)r=r.lastChild;if(r=gU.next(r,this.root),r){this._referenceNode=r;return}this._pointerBeforeReferenceNode=!1}if(t.previousSibling===null)this._referenceNode=t.parentNode;else{this._referenceNode=t.previousSibling;var n;for(n=this._referenceNode.lastChild;n;n=this._referenceNode.lastChild)this._referenceNode=n}}}},nextNode:{value:function(){return sj(this,!0)}},previousNode:{value:function(){return sj(this,!1)}},detach:{value:function(){}},toString:{value:function(){return"[object NodeIterator]"}}})});var OS=x((E_t,uj)=>{"use strict";uj.exports=xs;function xs(e){if(!e)return Object.create(xs.prototype);this.url=e.replace(/^[ \t\n\r\f]+|[ \t\n\r\f]+$/g,"");var t=xs.pattern.exec(this.url);if(t){if(t[2]&&(this.scheme=t[2]),t[4]){var r=t[4].match(xs.userinfoPattern);if(r&&(this.username=r[1],this.password=r[3],t[4]=t[4].substring(r[0].length)),t[4].match(xs.portPattern)){var n=t[4].lastIndexOf(":");this.host=t[4].substring(0,n),this.port=t[4].substring(n+1)}else this.host=t[4]}t[5]&&(this.path=t[5]),t[6]&&(this.query=t[7]),t[8]&&(this.fragment=t[9])}}xs.pattern=/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/;xs.userinfoPattern=/^([^@:]*)(:([^@]*))?@/;xs.portPattern=/:\d+$/;xs.authorityPattern=/^[^:\/?#]+:\/\//;xs.hierarchyPattern=/^[^:\/?#]+:\//;xs.percentEncode=function(t){var r=t.charCodeAt(0);if(r<256)return"%"+r.toString(16);throw Error("can't percent-encode codepoints > 255 yet")};xs.prototype={constructor:xs,isAbsolute:function(){return!!this.scheme},isAuthorityBased:function(){return xs.authorityPattern.test(this.url)},isHierarchical:function(){return xs.hierarchyPattern.test(this.url)},toString:function(){var e="";return this.scheme!==void 0&&(e+=this.scheme+":"),this.isAbsolute()&&(e+="//",(this.username||this.password)&&(e+=this.username||"",this.password&&(e+=":"+this.password),e+="@"),this.host&&(e+=this.host)),this.port!==void 0&&(e+=":"+this.port),this.path!==void 0&&(e+=this.path),this.query!==void 0&&(e+="?"+this.query),this.fragment!==void 0&&(e+="#"+this.fragment),e},resolve:function(e){var t=this,r=new xs(e),n=new xs;return r.scheme!==void 0?(n.scheme=r.scheme,n.username=r.username,n.password=r.password,n.host=r.host,n.port=r.port,n.path=s(r.path),n.query=r.query):(n.scheme=t.scheme,r.host!==void 0?(n.username=r.username,n.password=r.password,n.host=r.host,n.port=r.port,n.path=s(r.path),n.query=r.query):(n.username=t.username,n.password=t.password,n.host=t.host,n.port=t.port,r.path?(r.path.charAt(0)==="/"?n.path=s(r.path):(n.path=i(t.path,r.path),n.path=s(n.path)),n.query=r.query):(n.path=t.path,r.query!==void 0?n.query=r.query:n.query=t.query))),n.fragment=r.fragment,n.toString();function i(o,a){if(t.host!==void 0&&!t.path)return"/"+a;var l=o.lastIndexOf("/");return l===-1?a:o.substring(0,l+1)+a}function s(o){if(!o)return o;for(var a="";o.length>0;){if(o==="."||o===".."){o="";break}var l=o.substring(0,2),c=o.substring(0,3),u=o.substring(0,4);if(c==="../")o=o.substring(3);else if(l==="./")o=o.substring(2);else if(c==="/./")o="/"+o.substring(3);else if(l==="/."&&o.length===2)o="/";else if(u==="/../"||c==="/.."&&o.length===3)o="/"+o.substring(4),a=a.replace(/\/?[^\/]*$/,"");else{var f=o.match(/(\/?([^\/]*))/)[0];a+=f,o=o.substring(f.length)}}return a}}}});var hj=x((b_t,fj)=>{"use strict";fj.exports=pU;var dj=Nm();function pU(e,t){dj.call(this,e,t)}pU.prototype=Object.create(dj.prototype,{constructor:{value:pU}})});var AU=x((x_t,gj)=>{"use strict";gj.exports={Event:Nm(),UIEvent:yL(),MouseEvent:vL(),CustomEvent:hj()}});var Aj=x(Wm=>{"use strict";Object.defineProperty(Wm,"__esModule",{value:!0});Wm.hyphenate=Wm.parse=void 0;function wLe(e){let t=[],r=0,n=0,i=0,s=0,o=0,a=null;for(;r<e.length;)switch(e.charCodeAt(r++)){case 40:n++;break;case 41:n--;break;case 39:i===0?i=39:i===39&&e.charCodeAt(r-1)!==92&&(i=0);break;case 34:i===0?i=34:i===34&&e.charCodeAt(r-1)!==92&&(i=0);break;case 58:!a&&n===0&&i===0&&(a=pj(e.substring(o,r-1).trim()),s=r);break;case 59:if(a&&s>0&&n===0&&i===0){let c=e.substring(s,r-1).trim();t.push(a,c),o=r,s=0,a=null}break}if(a&&s){let l=e.slice(s).trim();t.push(a,l)}return t}Wm.parse=wLe;function pj(e){return e.replace(/[a-z][A-Z]/g,t=>t.charAt(0)+"-"+t.charAt(1)).toLowerCase()}Wm.hyphenate=pj});var qS=x((w_t,Ej)=>{"use strict";var{parse:ILe}=Aj();Ej.exports=function(e){let t=new vj(e),r={get:function(n,i){return i in n?n[i]:n.getPropertyValue(mj(i))},has:function(n,i){return!0},set:function(n,i,s){return i in n?n[i]=s:n.setProperty(mj(i),s??void 0),!0}};return new Proxy(t,r)};function mj(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function vj(e){this._element=e}var yj="!important";function Cj(e){let t={property:{},priority:{}};if(!e)return t;let r=ILe(e);if(r.length<2)return t;for(let n=0;n<r.length;n+=2){let i=r[n],s=r[n+1];s.endsWith(yj)&&(t.priority[i]="important",s=s.slice(0,-yj.length).trim()),t.property[i]=s}return t}var Gm={};vj.prototype=Object.create(Object.prototype,{_parsed:{get:function(){if(!this._parsedStyles||this.cssText!==this._lastParsedText){var e=this.cssText;this._parsedStyles=Cj(e),this._lastParsedText=e,delete this._names}return this._parsedStyles}},_serialize:{value:function(){var e=this._parsed,t="";for(var r in e.property)t&&(t+=" "),t+=r+": "+e.property[r],e.priority[r]&&(t+=" !"+e.priority[r]),t+=";";this.cssText=t,this._lastParsedText=t,delete this._names}},cssText:{get:function(){return this._element.getAttribute("style")},set:function(e){this._element.setAttribute("style",e)}},length:{get:function(){return this._names||(this._names=Object.getOwnPropertyNames(this._parsed.property)),this._names.length}},item:{value:function(e){return this._names||(this._names=Object.getOwnPropertyNames(this._parsed.property)),this._names[e]}},getPropertyValue:{value:function(e){return e=e.toLowerCase(),this._parsed.property[e]||""}},getPropertyPriority:{value:function(e){return e=e.toLowerCase(),this._parsed.priority[e]||""}},setProperty:{value:function(e,t,r){if(e=e.toLowerCase(),t==null&&(t=""),r==null&&(r=""),t!==Gm&&(t=""+t),t=t.trim(),t===""){this.removeProperty(e);return}if(!(r!==""&&r!==Gm&&!/^important$/i.test(r))){var n=this._parsed;if(t===Gm){if(!n.property[e])return;r!==""?n.priority[e]="important":delete n.priority[e]}else{if(t.indexOf(";")!==-1)return;var i=Cj(e+":"+t);if(Object.getOwnPropertyNames(i.property).length===0||Object.getOwnPropertyNames(i.priority).length!==0)return;for(var s in i.property)n.property[s]=i.property[s],r!==Gm&&(r!==""?n.priority[s]="important":n.priority[s]&&delete n.priority[s])}this._serialize()}}},setPropertyValue:{value:function(e,t){return this.setProperty(e,t,Gm)}},setPropertyPriority:{value:function(e,t){return this.setProperty(e,Gm,t)}},removeProperty:{value:function(e){e=e.toLowerCase();var t=this._parsed;e in t.property&&(delete t.property[e],delete t.priority[e],this._serialize())}}})});var mU=x((I_t,bj)=>{"use strict";var ji=OS();bj.exports=bE;function bE(){}bE.prototype=Object.create(Object.prototype,{_url:{get:function(){return new ji(this.href)}},protocol:{get:function(){var e=this._url;return e&&e.scheme?e.scheme+":":":"},set:function(e){var t=this.href,r=new ji(t);r.isAbsolute()&&(e=e.replace(/:+$/,""),e=e.replace(/[^-+\.a-zA-Z0-9]/g,ji.percentEncode),e.length>0&&(r.scheme=e,t=r.toString())),this.href=t}},host:{get:function(){var e=this._url;return e.isAbsolute()&&e.isAuthorityBased()?e.host+(e.port?":"+e.port:""):""},set:function(e){var t=this.href,r=new ji(t);r.isAbsolute()&&r.isAuthorityBased()&&(e=e.replace(/[^-+\._~!$&'()*,;:=a-zA-Z0-9]/g,ji.percentEncode),e.length>0&&(r.host=e,delete r.port,t=r.toString())),this.href=t}},hostname:{get:function(){var e=this._url;return e.isAbsolute()&&e.isAuthorityBased()?e.host:""},set:function(e){var t=this.href,r=new ji(t);r.isAbsolute()&&r.isAuthorityBased()&&(e=e.replace(/^\/+/,""),e=e.replace(/[^-+\._~!$&'()*,;:=a-zA-Z0-9]/g,ji.percentEncode),e.length>0&&(r.host=e,t=r.toString())),this.href=t}},port:{get:function(){var e=this._url;return e.isAbsolute()&&e.isAuthorityBased()&&e.port!==void 0?e.port:""},set:function(e){var t=this.href,r=new ji(t);r.isAbsolute()&&r.isAuthorityBased()&&(e=""+e,e=e.replace(/[^0-9].*$/,""),e=e.replace(/^0+/,""),e.length===0&&(e="0"),parseInt(e,10)<=65535&&(r.port=e,t=r.toString())),this.href=t}},pathname:{get:function(){var e=this._url;return e.isAbsolute()&&e.isHierarchical()?e.path:""},set:function(e){var t=this.href,r=new ji(t);r.isAbsolute()&&r.isHierarchical()&&(e.charAt(0)!=="/"&&(e="/"+e),e=e.replace(/[^-+\._~!$&'()*,;:=@\/a-zA-Z0-9]/g,ji.percentEncode),r.path=e,t=r.toString()),this.href=t}},search:{get:function(){var e=this._url;return e.isAbsolute()&&e.isHierarchical()&&e.query!==void 0?"?"+e.query:""},set:function(e){var t=this.href,r=new ji(t);r.isAbsolute()&&r.isHierarchical()&&(e.charAt(0)==="?"&&(e=e.substring(1)),e=e.replace(/[^-+\._~!$&'()*,;:=@\/?a-zA-Z0-9]/g,ji.percentEncode),r.query=e,t=r.toString()),this.href=t}},hash:{get:function(){var e=this._url;return e==null||e.fragment==null||e.fragment===""?"":"#"+e.fragment},set:function(e){var t=this.href,r=new ji(t);e.charAt(0)==="#"&&(e=e.substring(1)),e=e.replace(/[^-+\._~!$&'()*,;:=@\/?a-zA-Z0-9]/g,ji.percentEncode),r.fragment=e,t=r.toString(),this.href=t}},username:{get:function(){var e=this._url;return e.username||""},set:function(e){var t=this.href,r=new ji(t);r.isAbsolute()&&(e=e.replace(/[\x00-\x1F\x7F-\uFFFF "#<>?`\/@\\:]/g,ji.percentEncode),r.username=e,t=r.toString()),this.href=t}},password:{get:function(){var e=this._url;return e.password||""},set:function(e){var t=this.href,r=new ji(t);r.isAbsolute()&&(e===""?r.password=null:(e=e.replace(/[\x00-\x1F\x7F-\uFFFF "#<>?`\/@\\]/g,ji.percentEncode),r.password=e),t=r.toString()),this.href=t}},origin:{get:function(){var e=this._url;if(e==null)return"";var t=function(r){var n=[e.scheme,e.host,+e.port||r];return n[0]+"://"+n[1]+(n[2]===r?"":":"+n[2])};switch(e.scheme){case"ftp":return t(21);case"gopher":return t(70);case"http":case"ws":return t(80);case"https":case"wss":return t(443);default:return e.scheme+"://"}}}});bE._inherit=function(e){Object.getOwnPropertyNames(bE.prototype).forEach(function(t){if(!(t==="constructor"||t==="href")){var r=Object.getOwnPropertyDescriptor(bE.prototype,t);Object.defineProperty(e,t,r)}})}});var yU=x((S_t,wj)=>{"use strict";var xj=LL(),SLe=IS().isApiWritable;wj.exports=function(e,t,r,n){var i=e.ctor;if(i){var s=e.props||{};if(e.attributes)for(var o in e.attributes){var a=e.attributes[o];(typeof a!="object"||Array.isArray(a))&&(a={type:a}),a.name||(a.name=o.toLowerCase()),s[o]=xj.property(a)}s.constructor={value:i,writable:SLe},i.prototype=Object.create((e.superclass||t).prototype,s),e.events&&DLe(i,e.events),r[e.name]=i}else i=t;return(e.tags||e.tag&&[e.tag]||[]).forEach(function(l){n[l]=i}),i};function _j(e,t,r,n){this.body=e,this.document=t,this.form=r,this.element=n}_j.prototype.build=function(){return()=>{}};function BLe(e,t,r,n){var i=e.ownerDocument||Object.create(null),s=e.form||Object.create(null);e[t]=new _j(n,i,s,e).build()}function DLe(e,t){var r=e.prototype;t.forEach(function(n){Object.defineProperty(r,"on"+n,{get:function(){return this._getEventHandler(n)},set:function(i){this._setEventHandler(n,i)}}),xj.registerChangeHandler(e,"on"+n,BLe)})}});var WS=x(HS=>{"use strict";var CU=Es(),Ij=Hm(),TLe=qS(),Ea=ni(),Sj=mU(),RLe=yU(),Td=HS.elements={},xE=Object.create(null);HS.createElement=function(e,t,r){var n=xE[t]||FLe;return new n(e,t,r)};function Me(e){return RLe(e,Ze,Td,xE)}function ii(e){return{get:function(){var t=this._getattr(e);if(t===null)return"";var r=this.doc._resolve(t);return r===null?t:r},set:function(t){this._setattr(e,t)}}}function VS(e){return{get:function(){var t=this._getattr(e);return t===null?null:t.toLowerCase()==="use-credentials"?"use-credentials":"anonymous"},set:function(t){t==null?this.removeAttribute(e):this._setattr(e,t)}}}var $m={type:["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"],missing:""},kLe={A:!0,LINK:!0,BUTTON:!0,INPUT:!0,SELECT:!0,TEXTAREA:!0,COMMAND:!0},cc=function(e,t,r){Ze.call(this,e,t,r),this._form=null},Ze=HS.HTMLElement=Me({superclass:Ij,name:"HTMLElement",ctor:function(t,r,n){Ij.call(this,t,r,Ea.NAMESPACE.HTML,n)},props:{dangerouslySetInnerHTML:{set:function(e){this._innerHTML=e}},innerHTML:{get:function(){return this.serialize()},set:function(e){var t=this.ownerDocument.implementation.mozHTMLParser(this.ownerDocument._address,this);t.parse(e===null?"":String(e),!0);for(var r=this instanceof xE.template?this.content:this;r.hasChildNodes();)r.removeChild(r.firstChild);r.appendChild(t._asDocumentFragment())}},style:{get:function(){return this._style||(this._style=new TLe(this)),this._style},set:function(e){e==null&&(e=""),this._setattr("style",String(e))}},blur:{value:function(){}},focus:{value:function(){}},forceSpellCheck:{value:function(){}},click:{value:function(){if(!this._click_in_progress){this._click_in_progress=!0;try{this._pre_click_activation_steps&&this._pre_click_activation_steps();var e=this.ownerDocument.createEvent("MouseEvent");e.initMouseEvent("click",!0,!0,this.ownerDocument.defaultView,1,0,0,0,0,!1,!1,!1,!1,0,null);var t=this.dispatchEvent(e);t?this._post_click_activation_steps&&this._post_click_activation_steps(e):this._cancelled_activation_steps&&this._cancelled_activation_steps()}finally{this._click_in_progress=!1}}}},submit:{value:Ea.nyi}},attributes:{title:String,lang:String,dir:{type:["ltr","rtl","auto"],missing:""},draggable:{type:["true","false"],treatNullAsEmptyString:!0},spellcheck:{type:["true","false"],missing:""},enterKeyHint:{type:["enter","done","go","next","previous","search","send"],missing:""},autoCapitalize:{type:["off","on","none","sentences","words","characters"],missing:""},autoFocus:Boolean,accessKey:String,nonce:String,hidden:Boolean,translate:{type:["no","yes"],missing:""},tabIndex:{type:"long",default:function(){return this.tagName in kLe||this.contentEditable?0:-1}}},events:["abort","canplay","canplaythrough","change","click","contextmenu","cuechange","dblclick","drag","dragend","dragenter","dragleave","dragover","dragstart","drop","durationchange","emptied","ended","input","invalid","keydown","keypress","keyup","loadeddata","loadedmetadata","loadstart","mousedown","mousemove","mouseout","mouseover","mouseup","mousewheel","pause","play","playing","progress","ratechange","readystatechange","reset","seeked","seeking","select","show","stalled","submit","suspend","timeupdate","volumechange","waiting","blur","error","focus","load","scroll"]}),FLe=Me({name:"HTMLUnknownElement",ctor:function(t,r,n){Ze.call(this,t,r,n)}}),uc={form:{get:function(){return this._form}}};Me({tag:"a",name:"HTMLAnchorElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},props:{_post_click_activation_steps:{value:function(e){this.href&&(this.ownerDocument.defaultView.location=this.href)}}},attributes:{href:ii,ping:String,download:String,target:String,rel:String,media:String,hreflang:String,type:String,referrerPolicy:$m,coords:String,charset:String,name:String,rev:String,shape:String}});Sj._inherit(xE.a.prototype);Me({tag:"area",name:"HTMLAreaElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{alt:String,target:String,download:String,rel:String,media:String,href:ii,hreflang:String,type:String,shape:String,coords:String,ping:String,referrerPolicy:$m,noHref:Boolean}});Sj._inherit(xE.area.prototype);Me({tag:"br",name:"HTMLBRElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{clear:String}});Me({tag:"base",name:"HTMLBaseElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{target:String}});Me({tag:"body",name:"HTMLBodyElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},events:["afterprint","beforeprint","beforeunload","blur","error","focus","hashchange","load","message","offline","online","pagehide","pageshow","popstate","resize","scroll","storage","unload"],attributes:{text:{type:String,treatNullAsEmptyString:!0},link:{type:String,treatNullAsEmptyString:!0},vLink:{type:String,treatNullAsEmptyString:!0},aLink:{type:String,treatNullAsEmptyString:!0},bgColor:{type:String,treatNullAsEmptyString:!0},background:String}});Me({tag:"button",name:"HTMLButtonElement",ctor:function(t,r,n){cc.call(this,t,r,n)},props:uc,attributes:{name:String,value:String,disabled:Boolean,autofocus:Boolean,type:{type:["submit","reset","button","menu"],missing:"submit"},formTarget:String,formAction:ii,formNoValidate:Boolean,formMethod:{type:["get","post","dialog"],invalid:"get",missing:""},formEnctype:{type:["application/x-www-form-urlencoded","multipart/form-data","text/plain"],invalid:"application/x-www-form-urlencoded",missing:""}}});Me({tag:"dl",name:"HTMLDListElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{compact:Boolean}});Me({tag:"data",name:"HTMLDataElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{value:String}});Me({tag:"datalist",name:"HTMLDataListElement",ctor:function(t,r,n){Ze.call(this,t,r,n)}});Me({tag:"details",name:"HTMLDetailsElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{open:Boolean}});Me({tag:"div",name:"HTMLDivElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{align:String}});Me({tag:"embed",name:"HTMLEmbedElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{src:ii,type:String,width:String,height:String,align:String,name:String}});Me({tag:"fieldset",name:"HTMLFieldSetElement",ctor:function(t,r,n){cc.call(this,t,r,n)},props:uc,attributes:{disabled:Boolean,name:String}});Me({tag:"form",name:"HTMLFormElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{action:String,autocomplete:{type:["on","off"],missing:"on"},name:String,acceptCharset:{name:"accept-charset"},target:String,noValidate:Boolean,method:{type:["get","post","dialog"],invalid:"get",missing:"get"},enctype:{type:["application/x-www-form-urlencoded","multipart/form-data","text/plain"],invalid:"application/x-www-form-urlencoded",missing:"application/x-www-form-urlencoded"},encoding:{name:"enctype",type:["application/x-www-form-urlencoded","multipart/form-data","text/plain"],invalid:"application/x-www-form-urlencoded",missing:"application/x-www-form-urlencoded"}}});Me({tag:"hr",name:"HTMLHRElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{align:String,color:String,noShade:Boolean,size:String,width:String}});Me({tag:"head",name:"HTMLHeadElement",ctor:function(t,r,n){Ze.call(this,t,r,n)}});Me({tags:["h1","h2","h3","h4","h5","h6"],name:"HTMLHeadingElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{align:String}});Me({tag:"html",name:"HTMLHtmlElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{xmlns:ii,version:String}});Me({tag:"iframe",name:"HTMLIFrameElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{src:ii,srcdoc:String,name:String,width:String,height:String,seamless:Boolean,allow:Boolean,allowFullscreen:Boolean,allowUserMedia:Boolean,allowPaymentRequest:Boolean,referrerPolicy:$m,loading:{type:["eager","lazy"],treatNullAsEmptyString:!0},align:String,scrolling:String,frameBorder:String,longDesc:ii,marginHeight:{type:String,treatNullAsEmptyString:!0},marginWidth:{type:String,treatNullAsEmptyString:!0}}});Me({tag:"img",name:"HTMLImageElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{alt:String,src:ii,srcset:String,crossOrigin:VS,useMap:String,isMap:Boolean,sizes:String,height:{type:"unsigned long",default:0},width:{type:"unsigned long",default:0},referrerPolicy:$m,loading:{type:["eager","lazy"],missing:""},name:String,lowsrc:ii,align:String,hspace:{type:"unsigned long",default:0},vspace:{type:"unsigned long",default:0},longDesc:ii,border:{type:String,treatNullAsEmptyString:!0}}});Me({tag:"input",name:"HTMLInputElement",ctor:function(t,r,n){cc.call(this,t,r,n)},props:{form:uc.form,_post_click_activation_steps:{value:function(e){if(this.type==="checkbox")this.checked=!this.checked;else if(this.type==="radio")for(var t=this.form.getElementsByName(this.name),r=t.length-1;r>=0;r--){var n=t[r];n.checked=n===this}}}},attributes:{name:String,disabled:Boolean,autofocus:Boolean,accept:String,alt:String,max:String,min:String,pattern:String,placeholder:String,step:String,dirName:String,defaultValue:{name:"value"},multiple:Boolean,required:Boolean,readOnly:Boolean,checked:Boolean,value:String,src:ii,defaultChecked:{name:"checked",type:Boolean},size:{type:"unsigned long",default:20,min:1,setmin:1},width:{type:"unsigned long",min:0,setmin:0,default:0},height:{type:"unsigned long",min:0,setmin:0,default:0},minLength:{type:"unsigned long",min:0,setmin:0,default:-1},maxLength:{type:"unsigned long",min:0,setmin:0,default:-1},autocomplete:String,type:{type:["text","hidden","search","tel","url","email","password","datetime","date","month","week","time","datetime-local","number","range","color","checkbox","radio","file","submit","image","reset","button"],missing:"text"},formTarget:String,formNoValidate:Boolean,formMethod:{type:["get","post"],invalid:"get",missing:""},formEnctype:{type:["application/x-www-form-urlencoded","multipart/form-data","text/plain"],invalid:"application/x-www-form-urlencoded",missing:""},inputMode:{type:["verbatim","latin","latin-name","latin-prose","full-width-latin","kana","kana-name","katakana","numeric","tel","email","url"],missing:""},align:String,useMap:String}});Me({tag:"keygen",name:"HTMLKeygenElement",ctor:function(t,r,n){cc.call(this,t,r,n)},props:uc,attributes:{name:String,disabled:Boolean,autofocus:Boolean,challenge:String,keytype:{type:["rsa"],missing:""}}});Me({tag:"li",name:"HTMLLIElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{value:{type:"long",default:0},type:String}});Me({tag:"label",name:"HTMLLabelElement",ctor:function(t,r,n){cc.call(this,t,r,n)},props:uc,attributes:{htmlFor:{name:"for",type:String}}});Me({tag:"legend",name:"HTMLLegendElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{align:String}});Me({tag:"link",name:"HTMLLinkElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{href:ii,rel:String,media:String,hreflang:String,type:String,crossOrigin:VS,nonce:String,integrity:String,referrerPolicy:$m,imageSizes:String,imageSrcset:String,charset:String,rev:String,target:String}});Me({tag:"map",name:"HTMLMapElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{name:String}});Me({tag:"menu",name:"HTMLMenuElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{type:{type:["context","popup","toolbar"],missing:"toolbar"},label:String,compact:Boolean}});Me({tag:"meta",name:"HTMLMetaElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{name:String,content:String,httpEquiv:{name:"http-equiv",type:String},scheme:String}});Me({tag:"meter",name:"HTMLMeterElement",ctor:function(t,r,n){cc.call(this,t,r,n)},props:uc});Me({tags:["ins","del"],name:"HTMLModElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{cite:ii,dateTime:String}});Me({tag:"ol",name:"HTMLOListElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},props:{_numitems:{get:function(){var e=0;return this.childNodes.forEach(function(t){t.nodeType===CU.ELEMENT_NODE&&t.tagName==="LI"&&e++}),e}}},attributes:{type:String,reversed:Boolean,start:{type:"long",default:function(){return this.reversed?this._numitems:1}},compact:Boolean}});Me({tag:"object",name:"HTMLObjectElement",ctor:function(t,r,n){cc.call(this,t,r,n)},props:uc,attributes:{data:ii,type:String,name:String,useMap:String,typeMustMatch:Boolean,width:String,height:String,align:String,archive:String,code:String,declare:Boolean,hspace:{type:"unsigned long",default:0},standby:String,vspace:{type:"unsigned long",default:0},codeBase:ii,codeType:String,border:{type:String,treatNullAsEmptyString:!0}}});Me({tag:"optgroup",name:"HTMLOptGroupElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{disabled:Boolean,label:String}});Me({tag:"option",name:"HTMLOptionElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},props:{form:{get:function(){for(var e=this.parentNode;e&&e.nodeType===CU.ELEMENT_NODE;){if(e.localName==="select")return e.form;e=e.parentNode}}},value:{get:function(){return this._getattr("value")||this.text},set:function(e){this._setattr("value",e)}},text:{get:function(){return this.textContent.replace(/[ \t\n\f\r]+/g," ").trim()},set:function(e){this.textContent=e}}},attributes:{disabled:Boolean,defaultSelected:{name:"selected",type:Boolean},label:String}});Me({tag:"output",name:"HTMLOutputElement",ctor:function(t,r,n){cc.call(this,t,r,n)},props:uc,attributes:{name:String}});Me({tag:"p",name:"HTMLParagraphElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{align:String}});Me({tag:"param",name:"HTMLParamElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{name:String,value:String,type:String,valueType:String}});Me({tags:["pre","listing","xmp"],name:"HTMLPreElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{width:{type:"long",default:0}}});Me({tag:"progress",name:"HTMLProgressElement",ctor:function(t,r,n){cc.call(this,t,r,n)},props:uc,attributes:{max:{type:Number,float:!0,default:1,min:0}}});Me({tags:["q","blockquote"],name:"HTMLQuoteElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{cite:ii}});Me({tag:"script",name:"HTMLScriptElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},props:{text:{get:function(){for(var e="",t=0,r=this.childNodes.length;t<r;t++){var n=this.childNodes[t];n.nodeType===CU.TEXT_NODE&&(e+=n._data)}return e},set:function(e){this.removeChildren(),e!==null&&e!==""&&this.appendChild(this.ownerDocument.createTextNode(e))}}},attributes:{src:ii,type:String,charset:String,referrerPolicy:$m,defer:Boolean,async:Boolean,nomodule:Boolean,crossOrigin:VS,nonce:String,integrity:String}});Me({tag:"select",name:"HTMLSelectElement",ctor:function(t,r,n){cc.call(this,t,r,n)},props:{form:uc.form,options:{get:function(){return this.getElementsByTagName("option")}}},attributes:{autocomplete:String,name:String,disabled:Boolean,autofocus:Boolean,multiple:Boolean,required:Boolean,size:{type:"unsigned long",default:0}}});Me({tag:"span",name:"HTMLSpanElement",ctor:function(t,r,n){Ze.call(this,t,r,n)}});Me({tag:"style",name:"HTMLStyleElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{media:String,type:String,scoped:Boolean}});Me({tag:"caption",name:"HTMLTableCaptionElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{align:String}});Me({name:"HTMLTableCellElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{colSpan:{type:"unsigned long",default:1},rowSpan:{type:"unsigned long",default:1},scope:{type:["row","col","rowgroup","colgroup"],missing:""},abbr:String,align:String,axis:String,height:String,width:String,ch:{name:"char",type:String},chOff:{name:"charoff",type:String},noWrap:Boolean,vAlign:String,bgColor:{type:String,treatNullAsEmptyString:!0}}});Me({tags:["col","colgroup"],name:"HTMLTableColElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{span:{type:"limited unsigned long with fallback",default:1,min:1},align:String,ch:{name:"char",type:String},chOff:{name:"charoff",type:String},vAlign:String,width:String}});Me({tag:"table",name:"HTMLTableElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},props:{rows:{get:function(){return this.getElementsByTagName("tr")}}},attributes:{align:String,border:String,frame:String,rules:String,summary:String,width:String,bgColor:{type:String,treatNullAsEmptyString:!0},cellPadding:{type:String,treatNullAsEmptyString:!0},cellSpacing:{type:String,treatNullAsEmptyString:!0}}});Me({tag:"template",name:"HTMLTemplateElement",ctor:function(t,r,n){Ze.call(this,t,r,n),this._contentFragment=t._templateDoc.createDocumentFragment()},props:{content:{get:function(){return this._contentFragment}},serialize:{value:function(){return this.content.serialize()}}}});Me({tag:"tr",name:"HTMLTableRowElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},props:{cells:{get:function(){return this.querySelectorAll("td,th")}}},attributes:{align:String,ch:{name:"char",type:String},chOff:{name:"charoff",type:String},vAlign:String,bgColor:{type:String,treatNullAsEmptyString:!0}}});Me({tags:["thead","tfoot","tbody"],name:"HTMLTableSectionElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},props:{rows:{get:function(){return this.getElementsByTagName("tr")}}},attributes:{align:String,ch:{name:"char",type:String},chOff:{name:"charoff",type:String},vAlign:String}});Me({tag:"textarea",name:"HTMLTextAreaElement",ctor:function(t,r,n){cc.call(this,t,r,n)},props:{form:uc.form,type:{get:function(){return"textarea"}},defaultValue:{get:function(){return this.textContent},set:function(e){this.textContent=e}},value:{get:function(){return this.defaultValue},set:function(e){this.defaultValue=e}},textLength:{get:function(){return this.value.length}}},attributes:{autocomplete:String,name:String,disabled:Boolean,autofocus:Boolean,placeholder:String,wrap:String,dirName:String,required:Boolean,readOnly:Boolean,rows:{type:"limited unsigned long with fallback",default:2},cols:{type:"limited unsigned long with fallback",default:20},maxLength:{type:"unsigned long",min:0,setmin:0,default:-1},minLength:{type:"unsigned long",min:0,setmin:0,default:-1},inputMode:{type:["verbatim","latin","latin-name","latin-prose","full-width-latin","kana","kana-name","katakana","numeric","tel","email","url"],missing:""}}});Me({tag:"time",name:"HTMLTimeElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{dateTime:String,pubDate:Boolean}});Me({tag:"title",name:"HTMLTitleElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},props:{text:{get:function(){return this.textContent}}}});Me({tag:"ul",name:"HTMLUListElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{type:String,compact:Boolean}});Me({name:"HTMLMediaElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{src:ii,crossOrigin:VS,preload:{type:["metadata","none","auto",{value:"",alias:"auto"}],missing:"auto"},loop:Boolean,autoplay:Boolean,mediaGroup:String,controls:Boolean,defaultMuted:{name:"muted",type:Boolean}}});Me({name:"HTMLAudioElement",tag:"audio",superclass:Td.HTMLMediaElement,ctor:function(t,r,n){Td.HTMLMediaElement.call(this,t,r,n)}});Me({name:"HTMLVideoElement",tag:"video",superclass:Td.HTMLMediaElement,ctor:function(t,r,n){Td.HTMLMediaElement.call(this,t,r,n)},attributes:{poster:ii,width:{type:"unsigned long",min:0,default:0},height:{type:"unsigned long",min:0,default:0}}});Me({tag:"td",name:"HTMLTableDataCellElement",superclass:Td.HTMLTableCellElement,ctor:function(t,r,n){Td.HTMLTableCellElement.call(this,t,r,n)}});Me({tag:"th",name:"HTMLTableHeaderCellElement",superclass:Td.HTMLTableCellElement,ctor:function(t,r,n){Td.HTMLTableCellElement.call(this,t,r,n)}});Me({tag:"frameset",name:"HTMLFrameSetElement",ctor:function(t,r,n){Ze.call(this,t,r,n)}});Me({tag:"frame",name:"HTMLFrameElement",ctor:function(t,r,n){Ze.call(this,t,r,n)}});Me({tag:"canvas",name:"HTMLCanvasElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},props:{getContext:{value:Ea.nyi},probablySupportsContext:{value:Ea.nyi},setContext:{value:Ea.nyi},transferControlToProxy:{value:Ea.nyi},toDataURL:{value:Ea.nyi},toBlob:{value:Ea.nyi}},attributes:{width:{type:"unsigned long",default:300},height:{type:"unsigned long",default:150}}});Me({tag:"dialog",name:"HTMLDialogElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},props:{show:{value:Ea.nyi},showModal:{value:Ea.nyi},close:{value:Ea.nyi}},attributes:{open:Boolean,returnValue:String}});Me({tag:"menuitem",name:"HTMLMenuItemElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},props:{_label:{get:function(){var e=this._getattr("label");return e!==null&&e!==""?e:(e=this.textContent,e.replace(/[ \t\n\f\r]+/g," ").trim())}},label:{get:function(){var e=this._getattr("label");return e!==null?e:this._label},set:function(e){this._setattr("label",e)}}},attributes:{type:{type:["command","checkbox","radio"],missing:"command"},icon:ii,disabled:Boolean,checked:Boolean,radiogroup:String,default:Boolean}});Me({tag:"source",name:"HTMLSourceElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{srcset:String,sizes:String,media:String,src:ii,type:String,width:String,height:String}});Me({tag:"track",name:"HTMLTrackElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{src:ii,srclang:String,label:String,default:Boolean,kind:{type:["subtitles","captions","descriptions","chapters","metadata"],missing:"subtitles",invalid:"metadata"}},props:{NONE:{get:function(){return 0}},LOADING:{get:function(){return 1}},LOADED:{get:function(){return 2}},ERROR:{get:function(){return 3}},readyState:{get:Ea.nyi},track:{get:Ea.nyi}}});Me({tag:"font",name:"HTMLFontElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{color:{type:String,treatNullAsEmptyString:!0},face:{type:String},size:{type:String}}});Me({tag:"dir",name:"HTMLDirectoryElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{compact:Boolean}});Me({tags:["abbr","address","article","aside","b","bdi","bdo","cite","content","code","dd","dfn","dt","em","figcaption","figure","footer","header","hgroup","i","kbd","main","mark","nav","noscript","rb","rp","rt","rtc","ruby","s","samp","section","small","strong","sub","summary","sup","u","var","wbr","acronym","basefont","big","center","nobr","noembed","noframes","plaintext","strike","tt"]})});var bU=x(GS=>{"use strict";var Bj=Hm(),MLe=yU(),QLe=ni(),NLe=qS(),PLe=GS.elements={},Dj=Object.create(null);GS.createElement=function(e,t,r){var n=Dj[t]||EU;return new n(e,t,r)};function vU(e){return MLe(e,EU,PLe,Dj)}var EU=vU({superclass:Bj,name:"SVGElement",ctor:function(t,r,n){Bj.call(this,t,r,QLe.NAMESPACE.SVG,n)},props:{style:{get:function(){return this._style||(this._style=new NLe(this)),this._style}}}});vU({name:"SVGSVGElement",ctor:function(t,r,n){EU.call(this,t,r,n)},tag:"svg",props:{createSVGRect:{value:function(){return GS.createElement(this.ownerDocument,"rect",null)}}}});vU({tags:["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"]})});var Rj=x((T_t,Tj)=>{"use strict";Tj.exports={VALUE:1,ATTR:2,REMOVE_ATTR:3,REMOVE:4,MOVE:5,INSERT:6}});var YS=x((R_t,qj)=>{"use strict";qj.exports=wE;var qs=Es(),LLe=up(),Pj=DS(),Xf=Hm(),ULe=tU(),OLe=nU(),_E=Nm(),qLe=sU(),VLe=aU(),HLe=IE(),WLe=nj(),GLe=cj(),kj=EE(),Fj=OS(),Mj=MS(),$Le=AU(),$S=TS(),xU=WS(),YLe=bU(),Nr=ni(),Ym=Rj(),zm=Nr.NAMESPACE,_U=IS().isApiWritable;function wE(e,t){Pj.call(this),this.nodeType=qs.DOCUMENT_NODE,this.isHTML=e,this._address=t||"about:blank",this.readyState="loading",this.implementation=new HLe(this),this.ownerDocument=null,this._contentType=e?"text/html":"application/xml",this.doctype=null,this.documentElement=null,this._templateDocCache=null,this._nodeIterators=null,this._nid=1,this._nextnid=2,this._nodes=[null,this],this.byId=Object.create(null),this.modclock=0}var KLe={event:"Event",customevent:"CustomEvent",uievent:"UIEvent",mouseevent:"MouseEvent"},zLe={events:"event",htmlevents:"event",mouseevents:"mouseevent",mutationevents:"mutationevent",uievents:"uievent"},Km=function(e,t,r){return{get:function(){var n=e.call(this);return n?n[t]:r},set:function(n){var i=e.call(this);i&&(i[t]=n)}}};function Qj(e,t){var r,n,i;return e===""&&(e=null),$S.isValidQName(t)||Nr.InvalidCharacterError(),r=null,n=t,i=t.indexOf(":"),i>=0&&(r=t.substring(0,i),n=t.substring(i+1)),r!==null&&e===null&&Nr.NamespaceError(),r==="xml"&&e!==zm.XML&&Nr.NamespaceError(),(r==="xmlns"||t==="xmlns")&&e!==zm.XMLNS&&Nr.NamespaceError(),e===zm.XMLNS&&!(r==="xmlns"||t==="xmlns")&&Nr.NamespaceError(),{namespace:e,prefix:r,localName:n}}wE.prototype=Object.create(Pj.prototype,{_setMutationHandler:{value:function(e){this.mutationHandler=e}},_dispatchRendererEvent:{value:function(e,t,r){var n=this._nodes[e];n&&n._dispatchEvent(new _E(t,r),!0)}},nodeName:{value:"#document"},nodeValue:{get:function(){return null},set:function(){}},documentURI:{get:function(){return this._address},set:Nr.nyi},compatMode:{get:function(){return this._quirks?"BackCompat":"CSS1Compat"}},createTextNode:{value:function(e){return new ULe(this,String(e))}},createComment:{value:function(e){return new OLe(this,e)}},createDocumentFragment:{value:function(){return new qLe(this)}},createProcessingInstruction:{value:function(e,t){return(!$S.isValidName(e)||t.indexOf("?>")!==-1)&&Nr.InvalidCharacterError(),new VLe(this,e,t)}},createAttribute:{value:function(e){return e=String(e),$S.isValidName(e)||Nr.InvalidCharacterError(),this.isHTML&&(e=Nr.toASCIILowerCase(e)),new Xf._Attr(null,e,null,null,"")}},createAttributeNS:{value:function(e,t){e=e==null||e===""?null:String(e),t=String(t);var r=Qj(e,t);return new Xf._Attr(null,r.localName,r.prefix,r.namespace,"")}},createElement:{value:function(e){return e=String(e),$S.isValidName(e)||Nr.InvalidCharacterError(),this.isHTML?(/[A-Z]/.test(e)&&(e=Nr.toASCIILowerCase(e)),xU.createElement(this,e,null)):this.contentType==="application/xhtml+xml"?xU.createElement(this,e,null):new Xf(this,e,null,null)},writable:_U},createElementNS:{value:function(e,t){e=e==null||e===""?null:String(e),t=String(t);var r=Qj(e,t);return this._createElementNS(r.localName,r.namespace,r.prefix)},writable:_U},_createElementNS:{value:function(e,t,r){return t===zm.HTML?xU.createElement(this,e,r):t===zm.SVG?YLe.createElement(this,e,r):new Xf(this,e,t,r)}},createEvent:{value:function(t){t=t.toLowerCase();var r=zLe[t]||t,n=$Le[KLe[r]];if(n){var i=new n;return i._initialized=!1,i}else Nr.NotSupportedError()}},createTreeWalker:{value:function(e,t,r){if(!e)throw new TypeError("root argument is required");if(!(e instanceof qs))throw new TypeError("root not a node");return t=t===void 0?kj.SHOW_ALL:+t,r=r===void 0?null:r,new WLe(e,t,r)}},createNodeIterator:{value:function(e,t,r){if(!e)throw new TypeError("root argument is required");if(!(e instanceof qs))throw new TypeError("root not a node");return t=t===void 0?kj.SHOW_ALL:+t,r=r===void 0?null:r,new GLe(e,t,r)}},_attachNodeIterator:{value:function(e){this._nodeIterators||(this._nodeIterators=[]),this._nodeIterators.push(e)}},_detachNodeIterator:{value:function(e){var t=this._nodeIterators.indexOf(e);this._nodeIterators.splice(t,1)}},_preremoveNodeIterators:{value:function(e){this._nodeIterators&&this._nodeIterators.forEach(function(t){t._preremove(e)})}},_updateDocTypeElement:{value:function(){this.doctype=this.documentElement=null;for(var t=this.firstChild;t!==null;t=t.nextSibling)t.nodeType===qs.DOCUMENT_TYPE_NODE?this.doctype=t:t.nodeType===qs.ELEMENT_NODE&&(this.documentElement=t)}},insertBefore:{value:function(t,r){return qs.prototype.insertBefore.call(this,t,r),this._updateDocTypeElement(),t}},replaceChild:{value:function(t,r){return qs.prototype.replaceChild.call(this,t,r),this._updateDocTypeElement(),r}},removeChild:{value:function(t){return qs.prototype.removeChild.call(this,t),this._updateDocTypeElement(),t}},getElementById:{value:function(e){var t=this.byId[e];return t?t instanceof Rd?t.getFirst():t:null}},_hasMultipleElementsWithId:{value:function(e){return this.byId[e]instanceof Rd}},getElementsByName:{value:Xf.prototype.getElementsByName},getElementsByTagName:{value:Xf.prototype.getElementsByTagName},getElementsByTagNameNS:{value:Xf.prototype.getElementsByTagNameNS},getElementsByClassName:{value:Xf.prototype.getElementsByClassName},adoptNode:{value:function(t){return t.nodeType===qs.DOCUMENT_NODE&&Nr.NotSupportedError(),t.nodeType===qs.ATTRIBUTE_NODE||(t.parentNode&&t.parentNode.removeChild(t),t.ownerDocument!==this&&Oj(t,this)),t}},importNode:{value:function(t,r){return this.adoptNode(t.cloneNode(r))},writable:_U},origin:{get:function(){return null}},characterSet:{get:function(){return"UTF-8"}},contentType:{get:function(){return this._contentType}},URL:{get:function(){return this._address}},domain:{get:Nr.nyi,set:Nr.nyi},referrer:{get:Nr.nyi},cookie:{get:Nr.nyi,set:Nr.nyi},lastModified:{get:Nr.nyi},location:{get:function(){return this.defaultView?this.defaultView.location:null},set:Nr.nyi},_titleElement:{get:function(){return this.getElementsByTagName("title").item(0)||null}},title:{get:function(){var e=this._titleElement,t=e?e.textContent:"";return t.replace(/[ \t\n\r\f]+/g," ").replace(/(^ )|( $)/g,"")},set:function(e){var t=this._titleElement,r=this.head;!t&&!r||(t||(t=this.createElement("title"),r.appendChild(t)),t.textContent=e)}},dir:Km(function(){var e=this.documentElement;if(e&&e.tagName==="HTML")return e},"dir",""),fgColor:Km(function(){return this.body},"text",""),linkColor:Km(function(){return this.body},"link",""),vlinkColor:Km(function(){return this.body},"vLink",""),alinkColor:Km(function(){return this.body},"aLink",""),bgColor:Km(function(){return this.body},"bgColor",""),charset:{get:function(){return this.characterSet}},inputEncoding:{get:function(){return this.characterSet}},scrollingElement:{get:function(){return this._quirks?this.body:this.documentElement}},body:{get:function(){return Nj(this.documentElement,"body")},set:Nr.nyi},head:{get:function(){return Nj(this.documentElement,"head")}},images:{get:Nr.nyi},embeds:{get:Nr.nyi},plugins:{get:Nr.nyi},links:{get:Nr.nyi},forms:{get:Nr.nyi},scripts:{get:Nr.nyi},applets:{get:function(){return[]}},activeElement:{get:function(){return null}},innerHTML:{get:function(){return this.serialize()},set:Nr.nyi},outerHTML:{get:function(){return this.serialize()},set:Nr.nyi},write:{value:function(e){if(this.isHTML||Nr.InvalidStateError(),!!this._parser){this._parser;var t=arguments.join("");this._parser.parse(t)}}},writeln:{value:function(t){this.write(Array.prototype.join.call(arguments,"")+`
`)}},open:{value:function(){this.documentElement=null}},close:{value:function(){this.readyState="interactive",this._dispatchEvent(new _E("readystatechange"),!0),this._dispatchEvent(new _E("DOMContentLoaded"),!0),this.readyState="complete",this._dispatchEvent(new _E("readystatechange"),!0),this.defaultView&&this.defaultView._dispatchEvent(new _E("load"),!0)}},clone:{value:function(){var t=new wE(this.isHTML,this._address);return t._quirks=this._quirks,t._contentType=this._contentType,t}},cloneNode:{value:function(t){var r=qs.prototype.cloneNode.call(this,!1);if(t)for(var n=this.firstChild;n!==null;n=n.nextSibling)r._appendChild(r.importNode(n,!0));return r._updateDocTypeElement(),r}},isEqual:{value:function(t){return!0}},mutateValue:{value:function(e){this.mutationHandler&&this.mutationHandler({type:Ym.VALUE,target:e,data:e.data})}},mutateAttr:{value:function(e,t){this.mutationHandler&&this.mutationHandler({type:Ym.ATTR,target:e.ownerElement,attr:e})}},mutateRemoveAttr:{value:function(e){this.mutationHandler&&this.mutationHandler({type:Ym.REMOVE_ATTR,target:e.ownerElement,attr:e})}},mutateRemove:{value:function(e){this.mutationHandler&&this.mutationHandler({type:Ym.REMOVE,target:e.parentNode,node:e}),Uj(e)}},mutateInsert:{value:function(e){Lj(e),this.mutationHandler&&this.mutationHandler({type:Ym.INSERT,target:e.parentNode,node:e})}},mutateMove:{value:function(e){this.mutationHandler&&this.mutationHandler({type:Ym.MOVE,target:e})}},addId:{value:function(t,r){var n=this.byId[t];n?(n instanceof Rd||(n=new Rd(n),this.byId[t]=n),n.add(r)):this.byId[t]=r}},delId:{value:function(t,r){var n=this.byId[t];Nr.assert(n),n instanceof Rd?(n.del(r),n.length===1&&(this.byId[t]=n.downgrade())):this.byId[t]=void 0}},_resolve:{value:function(e){return new Fj(this._documentBaseURL).resolve(e)}},_documentBaseURL:{get:function(){var e=this._address;e==="about:blank"&&(e="/");var t=this.querySelector("base[href]");return t?new Fj(e).resolve(t.getAttribute("href")):e}},_templateDoc:{get:function(){if(!this._templateDocCache){var e=new wE(this.isHTML,this._address);this._templateDocCache=e._templateDocCache=e}return this._templateDocCache}},querySelector:{value:function(e){return Mj(e,this)[0]}},querySelectorAll:{value:function(e){var t=Mj(e,this);return t.item?t:new LLe(t)}}});var JLe=["abort","canplay","canplaythrough","change","click","contextmenu","cuechange","dblclick","drag","dragend","dragenter","dragleave","dragover","dragstart","drop","durationchange","emptied","ended","input","invalid","keydown","keypress","keyup","loadeddata","loadedmetadata","loadstart","mousedown","mousemove","mouseout","mouseover","mouseup","mousewheel","pause","play","playing","progress","ratechange","readystatechange","reset","seeked","seeking","select","show","stalled","submit","suspend","timeupdate","volumechange","waiting","blur","error","focus","load","scroll"];JLe.forEach(function(e){Object.defineProperty(wE.prototype,"on"+e,{get:function(){return this._getEventHandler(e)},set:function(t){this._setEventHandler(e,t)}})});function Nj(e,t){if(e&&e.isHTML){for(var r=e.firstChild;r!==null;r=r.nextSibling)if(r.nodeType===qs.ELEMENT_NODE&&r.localName===t&&r.namespaceURI===zm.HTML)return r}return null}function jLe(e){if(e._nid=e.ownerDocument._nextnid++,e.ownerDocument._nodes[e._nid]=e,e.nodeType===qs.ELEMENT_NODE){var t=e.getAttribute("id");t&&e.ownerDocument.addId(t,e),e._roothook&&e._roothook()}}function ZLe(e){if(e.nodeType===qs.ELEMENT_NODE){var t=e.getAttribute("id");t&&e.ownerDocument.delId(t,e)}e.ownerDocument._nodes[e._nid]=void 0,e._nid=void 0}function Lj(e){if(jLe(e),e.nodeType===qs.ELEMENT_NODE)for(var t=e.firstChild;t!==null;t=t.nextSibling)Lj(t)}function Uj(e){ZLe(e);for(var t=e.firstChild;t!==null;t=t.nextSibling)Uj(t)}function Oj(e,t){e.ownerDocument=t,e._lastModTime=void 0,Object.prototype.hasOwnProperty.call(e,"_tagName")&&(e._tagName=void 0);for(var r=e.firstChild;r!==null;r=r.nextSibling)Oj(r,t)}function Rd(e){this.nodes=Object.create(null),this.nodes[e._nid]=e,this.length=1,this.firstNode=void 0}Rd.prototype.add=function(e){this.nodes[e._nid]||(this.nodes[e._nid]=e,this.length++,this.firstNode=void 0)};Rd.prototype.del=function(e){this.nodes[e._nid]&&(delete this.nodes[e._nid],this.length--,this.firstNode=void 0)};Rd.prototype.getFirst=function(){if(!this.firstNode){var e;for(e in this.nodes)(this.firstNode===void 0||this.firstNode.compareDocumentPosition(this.nodes[e])&qs.DOCUMENT_POSITION_PRECEDING)&&(this.firstNode=this.nodes[e])}return this.firstNode};Rd.prototype.downgrade=function(){if(this.length===1){var e;for(e in this.nodes)return this.nodes[e]}return this}});var zS=x((k_t,Hj)=>{"use strict";Hj.exports=KS;var XLe=Es(),Vj=XL(),eUe=QS();function KS(e,t,r,n){Vj.call(this),this.nodeType=XLe.DOCUMENT_TYPE_NODE,this.ownerDocument=e||null,this.name=t,this.publicId=r||"",this.systemId=n||""}KS.prototype=Object.create(Vj.prototype,{nodeName:{get:function(){return this.name}},nodeValue:{get:function(){return null},set:function(){}},clone:{value:function(){return new KS(this.ownerDocument,this.name,this.publicId,this.systemId)}},isEqual:{value:function(t){return this.name===t.name&&this.publicId===t.publicId&&this.systemId===t.systemId}}});Object.defineProperties(KS.prototype,eUe)});var rB=x((F_t,f7)=>{"use strict";f7.exports=Br;var tUe=YS(),rUe=zS(),wU=Es(),at=ni().NAMESPACE,i7=WS(),Zr=i7.elements,fp=Function.prototype.apply.bind(Array.prototype.push),JS=-1,Jm=1,Vs=2,ar=3,nu=4,nUe=5,iUe=[],sUe=/^HTML$|^-\/\/W3O\/\/DTD W3 HTML Strict 3\.0\/\/EN\/\/$|^-\/W3C\/DTD HTML 4\.0 Transitional\/EN$|^\+\/\/Silmaril\/\/dtd html Pro v0r11 19970101\/\/|^-\/\/AdvaSoft Ltd\/\/DTD HTML 3\.0 asWedit \+ extensions\/\/|^-\/\/AS\/\/DTD HTML 3\.0 asWedit \+ extensions\/\/|^-\/\/IETF\/\/DTD HTML 2\.0 Level 1\/\/|^-\/\/IETF\/\/DTD HTML 2\.0 Level 2\/\/|^-\/\/IETF\/\/DTD HTML 2\.0 Strict Level 1\/\/|^-\/\/IETF\/\/DTD HTML 2\.0 Strict Level 2\/\/|^-\/\/IETF\/\/DTD HTML 2\.0 Strict\/\/|^-\/\/IETF\/\/DTD HTML 2\.0\/\/|^-\/\/IETF\/\/DTD HTML 2\.1E\/\/|^-\/\/IETF\/\/DTD HTML 3\.0\/\/|^-\/\/IETF\/\/DTD HTML 3\.2 Final\/\/|^-\/\/IETF\/\/DTD HTML 3\.2\/\/|^-\/\/IETF\/\/DTD HTML 3\/\/|^-\/\/IETF\/\/DTD HTML Level 0\/\/|^-\/\/IETF\/\/DTD HTML Level 1\/\/|^-\/\/IETF\/\/DTD HTML Level 2\/\/|^-\/\/IETF\/\/DTD HTML Level 3\/\/|^-\/\/IETF\/\/DTD HTML Strict Level 0\/\/|^-\/\/IETF\/\/DTD HTML Strict Level 1\/\/|^-\/\/IETF\/\/DTD HTML Strict Level 2\/\/|^-\/\/IETF\/\/DTD HTML Strict Level 3\/\/|^-\/\/IETF\/\/DTD HTML Strict\/\/|^-\/\/IETF\/\/DTD HTML\/\/|^-\/\/Metrius\/\/DTD Metrius Presentational\/\/|^-\/\/Microsoft\/\/DTD Internet Explorer 2\.0 HTML Strict\/\/|^-\/\/Microsoft\/\/DTD Internet Explorer 2\.0 HTML\/\/|^-\/\/Microsoft\/\/DTD Internet Explorer 2\.0 Tables\/\/|^-\/\/Microsoft\/\/DTD Internet Explorer 3\.0 HTML Strict\/\/|^-\/\/Microsoft\/\/DTD Internet Explorer 3\.0 HTML\/\/|^-\/\/Microsoft\/\/DTD Internet Explorer 3\.0 Tables\/\/|^-\/\/Netscape Comm\. Corp\.\/\/DTD HTML\/\/|^-\/\/Netscape Comm\. Corp\.\/\/DTD Strict HTML\/\/|^-\/\/O'Reilly and Associates\/\/DTD HTML 2\.0\/\/|^-\/\/O'Reilly and Associates\/\/DTD HTML Extended 1\.0\/\/|^-\/\/O'Reilly and Associates\/\/DTD HTML Extended Relaxed 1\.0\/\/|^-\/\/SoftQuad Software\/\/DTD HoTMetaL PRO 6\.0::19990601::extensions to HTML 4\.0\/\/|^-\/\/SoftQuad\/\/DTD HoTMetaL PRO 4\.0::19971010::extensions to HTML 4\.0\/\/|^-\/\/Spyglass\/\/DTD HTML 2\.0 Extended\/\/|^-\/\/SQ\/\/DTD HTML 2\.0 HoTMetaL \+ extensions\/\/|^-\/\/Sun Microsystems Corp\.\/\/DTD HotJava HTML\/\/|^-\/\/Sun Microsystems Corp\.\/\/DTD HotJava Strict HTML\/\/|^-\/\/W3C\/\/DTD HTML 3 1995-03-24\/\/|^-\/\/W3C\/\/DTD HTML 3\.2 Draft\/\/|^-\/\/W3C\/\/DTD HTML 3\.2 Final\/\/|^-\/\/W3C\/\/DTD HTML 3\.2\/\/|^-\/\/W3C\/\/DTD HTML 3\.2S Draft\/\/|^-\/\/W3C\/\/DTD HTML 4\.0 Frameset\/\/|^-\/\/W3C\/\/DTD HTML 4\.0 Transitional\/\/|^-\/\/W3C\/\/DTD HTML Experimental 19960712\/\/|^-\/\/W3C\/\/DTD HTML Experimental 970421\/\/|^-\/\/W3C\/\/DTD W3 HTML\/\/|^-\/\/W3O\/\/DTD W3 HTML 3\.0\/\/|^-\/\/WebTechs\/\/DTD Mozilla HTML 2\.0\/\/|^-\/\/WebTechs\/\/DTD Mozilla HTML\/\//i,oUe="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",Wj=/^-\/\/W3C\/\/DTD HTML 4\.01 Frameset\/\/|^-\/\/W3C\/\/DTD HTML 4\.01 Transitional\/\//i,aUe=/^-\/\/W3C\/\/DTD XHTML 1\.0 Frameset\/\/|^-\/\/W3C\/\/DTD XHTML 1\.0 Transitional\/\//i,gp=Object.create(null);gp[at.HTML]={__proto__:null,address:!0,applet:!0,area:!0,article:!0,aside:!0,base:!0,basefont:!0,bgsound:!0,blockquote:!0,body:!0,br:!0,button:!0,caption:!0,center:!0,col:!0,colgroup:!0,dd:!0,details:!0,dir:!0,div:!0,dl:!0,dt:!0,embed:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,frame:!0,frameset:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,head:!0,header:!0,hgroup:!0,hr:!0,html:!0,iframe:!0,img:!0,input:!0,li:!0,link:!0,listing:!0,main:!0,marquee:!0,menu:!0,meta:!0,nav:!0,noembed:!0,noframes:!0,noscript:!0,object:!0,ol:!0,p:!0,param:!0,plaintext:!0,pre:!0,script:!0,section:!0,select:!0,source:!0,style:!0,summary:!0,table:!0,tbody:!0,td:!0,template:!0,textarea:!0,tfoot:!0,th:!0,thead:!0,title:!0,tr:!0,track:!0,ul:!0,wbr:!0,xmp:!0};gp[at.SVG]={__proto__:null,foreignObject:!0,desc:!0,title:!0};gp[at.MATHML]={__proto__:null,mi:!0,mo:!0,mn:!0,ms:!0,mtext:!0,"annotation-xml":!0};var BU=Object.create(null);BU[at.HTML]={__proto__:null,address:!0,div:!0,p:!0};var s7=Object.create(null);s7[at.HTML]={__proto__:null,dd:!0,dt:!0};var jm=Object.create(null);jm[at.HTML]={__proto__:null,table:!0,thead:!0,tbody:!0,tfoot:!0,tr:!0};var o7=Object.create(null);o7[at.HTML]={__proto__:null,dd:!0,dt:!0,li:!0,menuitem:!0,optgroup:!0,option:!0,p:!0,rb:!0,rp:!0,rt:!0,rtc:!0};var a7=Object.create(null);a7[at.HTML]={__proto__:null,caption:!0,colgroup:!0,dd:!0,dt:!0,li:!0,optgroup:!0,option:!0,p:!0,rb:!0,rp:!0,rt:!0,rtc:!0,tbody:!0,td:!0,tfoot:!0,th:!0,thead:!0,tr:!0};var XS=Object.create(null);XS[at.HTML]={__proto__:null,table:!0,template:!0,html:!0};var eB=Object.create(null);eB[at.HTML]={__proto__:null,tbody:!0,tfoot:!0,thead:!0,template:!0,html:!0};var DU=Object.create(null);DU[at.HTML]={__proto__:null,tr:!0,template:!0,html:!0};var l7=Object.create(null);l7[at.HTML]={__proto__:null,button:!0,fieldset:!0,input:!0,keygen:!0,object:!0,output:!0,select:!0,textarea:!0,img:!0};var iu=Object.create(null);iu[at.HTML]={__proto__:null,applet:!0,caption:!0,html:!0,table:!0,td:!0,th:!0,marquee:!0,object:!0,template:!0};iu[at.MATHML]={__proto__:null,mi:!0,mo:!0,mn:!0,ms:!0,mtext:!0,"annotation-xml":!0};iu[at.SVG]={__proto__:null,foreignObject:!0,desc:!0,title:!0};var tB=Object.create(iu);tB[at.HTML]=Object.create(iu[at.HTML]);tB[at.HTML].ol=!0;tB[at.HTML].ul=!0;var TU=Object.create(iu);TU[at.HTML]=Object.create(iu[at.HTML]);TU[at.HTML].button=!0;var c7=Object.create(null);c7[at.HTML]={__proto__:null,html:!0,table:!0,template:!0};var lUe=Object.create(null);lUe[at.HTML]={__proto__:null,optgroup:!0,option:!0};var u7=Object.create(null);u7[at.MATHML]={__proto__:null,mi:!0,mo:!0,mn:!0,ms:!0,mtext:!0};var d7=Object.create(null);d7[at.SVG]={__proto__:null,foreignObject:!0,desc:!0,title:!0};var Gj={__proto__:null,"xlink:actuate":at.XLINK,"xlink:arcrole":at.XLINK,"xlink:href":at.XLINK,"xlink:role":at.XLINK,"xlink:show":at.XLINK,"xlink:title":at.XLINK,"xlink:type":at.XLINK,"xml:base":at.XML,"xml:lang":at.XML,"xml:space":at.XML,xmlns:at.XMLNS,"xmlns:xlink":at.XMLNS},$j={__proto__:null,attributename:"attributeName",attributetype:"attributeType",basefrequency:"baseFrequency",baseprofile:"baseProfile",calcmode:"calcMode",clippathunits:"clipPathUnits",diffuseconstant:"diffuseConstant",edgemode:"edgeMode",filterunits:"filterUnits",glyphref:"glyphRef",gradienttransform:"gradientTransform",gradientunits:"gradientUnits",kernelmatrix:"kernelMatrix",kernelunitlength:"kernelUnitLength",keypoints:"keyPoints",keysplines:"keySplines",keytimes:"keyTimes",lengthadjust:"lengthAdjust",limitingconeangle:"limitingConeAngle",markerheight:"markerHeight",markerunits:"markerUnits",markerwidth:"markerWidth",maskcontentunits:"maskContentUnits",maskunits:"maskUnits",numoctaves:"numOctaves",pathlength:"pathLength",patterncontentunits:"patternContentUnits",patterntransform:"patternTransform",patternunits:"patternUnits",pointsatx:"pointsAtX",pointsaty:"pointsAtY",pointsatz:"pointsAtZ",preservealpha:"preserveAlpha",preserveaspectratio:"preserveAspectRatio",primitiveunits:"primitiveUnits",refx:"refX",refy:"refY",repeatcount:"repeatCount",repeatdur:"repeatDur",requiredextensions:"requiredExtensions",requiredfeatures:"requiredFeatures",specularconstant:"specularConstant",specularexponent:"specularExponent",spreadmethod:"spreadMethod",startoffset:"startOffset",stddeviation:"stdDeviation",stitchtiles:"stitchTiles",surfacescale:"surfaceScale",systemlanguage:"systemLanguage",tablevalues:"tableValues",targetx:"targetX",targety:"targetY",textlength:"textLength",viewbox:"viewBox",viewtarget:"viewTarget",xchannelselector:"xChannelSelector",ychannelselector:"yChannelSelector",zoomandpan:"zoomAndPan"},Yj={__proto__:null,altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient",textpath:"textPath"},Kj={__proto__:null,0:65533,128:8364,130:8218,131:402,132:8222,133:8230,134:8224,135:8225,136:710,137:8240,138:352,139:8249,140:338,142:381,145:8216,146:8217,147:8220,148:8221,149:8226,150:8211,151:8212,152:732,153:8482,154:353,155:8250,156:339,158:382,159:376},cUe={__proto__:null,AElig:198,"AElig;":198,AMP:38,"AMP;":38,Aacute:193,"Aacute;":193,"Abreve;":258,Acirc:194,"Acirc;":194,"Acy;":1040,"Afr;":[55349,56580],Agrave:192,"Agrave;":192,"Alpha;":913,"Amacr;":256,"And;":10835,"Aogon;":260,"Aopf;":[55349,56632],"ApplyFunction;":8289,Aring:197,"Aring;":197,"Ascr;":[55349,56476],"Assign;":8788,Atilde:195,"Atilde;":195,Auml:196,"Auml;":196,"Backslash;":8726,"Barv;":10983,"Barwed;":8966,"Bcy;":1041,"Because;":8757,"Bernoullis;":8492,"Beta;":914,"Bfr;":[55349,56581],"Bopf;":[55349,56633],"Breve;":728,"Bscr;":8492,"Bumpeq;":8782,"CHcy;":1063,COPY:169,"COPY;":169,"Cacute;":262,"Cap;":8914,"CapitalDifferentialD;":8517,"Cayleys;":8493,"Ccaron;":268,Ccedil:199,"Ccedil;":199,"Ccirc;":264,"Cconint;":8752,"Cdot;":266,"Cedilla;":184,"CenterDot;":183,"Cfr;":8493,"Chi;":935,"CircleDot;":8857,"CircleMinus;":8854,"CirclePlus;":8853,"CircleTimes;":8855,"ClockwiseContourIntegral;":8754,"CloseCurlyDoubleQuote;":8221,"CloseCurlyQuote;":8217,"Colon;":8759,"Colone;":10868,"Congruent;":8801,"Conint;":8751,"ContourIntegral;":8750,"Copf;":8450,"Coproduct;":8720,"CounterClockwiseContourIntegral;":8755,"Cross;":10799,"Cscr;":[55349,56478],"Cup;":8915,"CupCap;":8781,"DD;":8517,"DDotrahd;":10513,"DJcy;":1026,"DScy;":1029,"DZcy;":1039,"Dagger;":8225,"Darr;":8609,"Dashv;":10980,"Dcaron;":270,"Dcy;":1044,"Del;":8711,"Delta;":916,"Dfr;":[55349,56583],"DiacriticalAcute;":180,"DiacriticalDot;":729,"DiacriticalDoubleAcute;":733,"DiacriticalGrave;":96,"DiacriticalTilde;":732,"Diamond;":8900,"DifferentialD;":8518,"Dopf;":[55349,56635],"Dot;":168,"DotDot;":8412,"DotEqual;":8784,"DoubleContourIntegral;":8751,"DoubleDot;":168,"DoubleDownArrow;":8659,"DoubleLeftArrow;":8656,"DoubleLeftRightArrow;":8660,"DoubleLeftTee;":10980,"DoubleLongLeftArrow;":10232,"DoubleLongLeftRightArrow;":10234,"DoubleLongRightArrow;":10233,"DoubleRightArrow;":8658,"DoubleRightTee;":8872,"DoubleUpArrow;":8657,"DoubleUpDownArrow;":8661,"DoubleVerticalBar;":8741,"DownArrow;":8595,"DownArrowBar;":10515,"DownArrowUpArrow;":8693,"DownBreve;":785,"DownLeftRightVector;":10576,"DownLeftTeeVector;":10590,"DownLeftVector;":8637,"DownLeftVectorBar;":10582,"DownRightTeeVector;":10591,"DownRightVector;":8641,"DownRightVectorBar;":10583,"DownTee;":8868,"DownTeeArrow;":8615,"Downarrow;":8659,"Dscr;":[55349,56479],"Dstrok;":272,"ENG;":330,ETH:208,"ETH;":208,Eacute:201,"Eacute;":201,"Ecaron;":282,Ecirc:202,"Ecirc;":202,"Ecy;":1069,"Edot;":278,"Efr;":[55349,56584],Egrave:200,"Egrave;":200,"Element;":8712,"Emacr;":274,"EmptySmallSquare;":9723,"EmptyVerySmallSquare;":9643,"Eogon;":280,"Eopf;":[55349,56636],"Epsilon;":917,"Equal;":10869,"EqualTilde;":8770,"Equilibrium;":8652,"Escr;":8496,"Esim;":10867,"Eta;":919,Euml:203,"Euml;":203,"Exists;":8707,"ExponentialE;":8519,"Fcy;":1060,"Ffr;":[55349,56585],"FilledSmallSquare;":9724,"FilledVerySmallSquare;":9642,"Fopf;":[55349,56637],"ForAll;":8704,"Fouriertrf;":8497,"Fscr;":8497,"GJcy;":1027,GT:62,"GT;":62,"Gamma;":915,"Gammad;":988,"Gbreve;":286,"Gcedil;":290,"Gcirc;":284,"Gcy;":1043,"Gdot;":288,"Gfr;":[55349,56586],"Gg;":8921,"Gopf;":[55349,56638],"GreaterEqual;":8805,"GreaterEqualLess;":8923,"GreaterFullEqual;":8807,"GreaterGreater;":10914,"GreaterLess;":8823,"GreaterSlantEqual;":10878,"GreaterTilde;":8819,"Gscr;":[55349,56482],"Gt;":8811,"HARDcy;":1066,"Hacek;":711,"Hat;":94,"Hcirc;":292,"Hfr;":8460,"HilbertSpace;":8459,"Hopf;":8461,"HorizontalLine;":9472,"Hscr;":8459,"Hstrok;":294,"HumpDownHump;":8782,"HumpEqual;":8783,"IEcy;":1045,"IJlig;":306,"IOcy;":1025,Iacute:205,"Iacute;":205,Icirc:206,"Icirc;":206,"Icy;":1048,"Idot;":304,"Ifr;":8465,Igrave:204,"Igrave;":204,"Im;":8465,"Imacr;":298,"ImaginaryI;":8520,"Implies;":8658,"Int;":8748,"Integral;":8747,"Intersection;":8898,"InvisibleComma;":8291,"InvisibleTimes;":8290,"Iogon;":302,"Iopf;":[55349,56640],"Iota;":921,"Iscr;":8464,"Itilde;":296,"Iukcy;":1030,Iuml:207,"Iuml;":207,"Jcirc;":308,"Jcy;":1049,"Jfr;":[55349,56589],"Jopf;":[55349,56641],"Jscr;":[55349,56485],"Jsercy;":1032,"Jukcy;":1028,"KHcy;":1061,"KJcy;":1036,"Kappa;":922,"Kcedil;":310,"Kcy;":1050,"Kfr;":[55349,56590],"Kopf;":[55349,56642],"Kscr;":[55349,56486],"LJcy;":1033,LT:60,"LT;":60,"Lacute;":313,"Lambda;":923,"Lang;":10218,"Laplacetrf;":8466,"Larr;":8606,"Lcaron;":317,"Lcedil;":315,"Lcy;":1051,"LeftAngleBracket;":10216,"LeftArrow;":8592,"LeftArrowBar;":8676,"LeftArrowRightArrow;":8646,"LeftCeiling;":8968,"LeftDoubleBracket;":10214,"LeftDownTeeVector;":10593,"LeftDownVector;":8643,"LeftDownVectorBar;":10585,"LeftFloor;":8970,"LeftRightArrow;":8596,"LeftRightVector;":10574,"LeftTee;":8867,"LeftTeeArrow;":8612,"LeftTeeVector;":10586,"LeftTriangle;":8882,"LeftTriangleBar;":10703,"LeftTriangleEqual;":8884,"LeftUpDownVector;":10577,"LeftUpTeeVector;":10592,"LeftUpVector;":8639,"LeftUpVectorBar;":10584,"LeftVector;":8636,"LeftVectorBar;":10578,"Leftarrow;":8656,"Leftrightarrow;":8660,"LessEqualGreater;":8922,"LessFullEqual;":8806,"LessGreater;":8822,"LessLess;":10913,"LessSlantEqual;":10877,"LessTilde;":8818,"Lfr;":[55349,56591],"Ll;":8920,"Lleftarrow;":8666,"Lmidot;":319,"LongLeftArrow;":10229,"LongLeftRightArrow;":10231,"LongRightArrow;":10230,"Longleftarrow;":10232,"Longleftrightarrow;":10234,"Longrightarrow;":10233,"Lopf;":[55349,56643],"LowerLeftArrow;":8601,"LowerRightArrow;":8600,"Lscr;":8466,"Lsh;":8624,"Lstrok;":321,"Lt;":8810,"Map;":10501,"Mcy;":1052,"MediumSpace;":8287,"Mellintrf;":8499,"Mfr;":[55349,56592],"MinusPlus;":8723,"Mopf;":[55349,56644],"Mscr;":8499,"Mu;":924,"NJcy;":1034,"Nacute;":323,"Ncaron;":327,"Ncedil;":325,"Ncy;":1053,"NegativeMediumSpace;":8203,"NegativeThickSpace;":8203,"NegativeThinSpace;":8203,"NegativeVeryThinSpace;":8203,"NestedGreaterGreater;":8811,"NestedLessLess;":8810,"NewLine;":10,"Nfr;":[55349,56593],"NoBreak;":8288,"NonBreakingSpace;":160,"Nopf;":8469,"Not;":10988,"NotCongruent;":8802,"NotCupCap;":8813,"NotDoubleVerticalBar;":8742,"NotElement;":8713,"NotEqual;":8800,"NotEqualTilde;":[8770,824],"NotExists;":8708,"NotGreater;":8815,"NotGreaterEqual;":8817,"NotGreaterFullEqual;":[8807,824],"NotGreaterGreater;":[8811,824],"NotGreaterLess;":8825,"NotGreaterSlantEqual;":[10878,824],"NotGreaterTilde;":8821,"NotHumpDownHump;":[8782,824],"NotHumpEqual;":[8783,824],"NotLeftTriangle;":8938,"NotLeftTriangleBar;":[10703,824],"NotLeftTriangleEqual;":8940,"NotLess;":8814,"NotLessEqual;":8816,"NotLessGreater;":8824,"NotLessLess;":[8810,824],"NotLessSlantEqual;":[10877,824],"NotLessTilde;":8820,"NotNestedGreaterGreater;":[10914,824],"NotNestedLessLess;":[10913,824],"NotPrecedes;":8832,"NotPrecedesEqual;":[10927,824],"NotPrecedesSlantEqual;":8928,"NotReverseElement;":8716,"NotRightTriangle;":8939,"NotRightTriangleBar;":[10704,824],"NotRightTriangleEqual;":8941,"NotSquareSubset;":[8847,824],"NotSquareSubsetEqual;":8930,"NotSquareSuperset;":[8848,824],"NotSquareSupersetEqual;":8931,"NotSubset;":[8834,8402],"NotSubsetEqual;":8840,"NotSucceeds;":8833,"NotSucceedsEqual;":[10928,824],"NotSucceedsSlantEqual;":8929,"NotSucceedsTilde;":[8831,824],"NotSuperset;":[8835,8402],"NotSupersetEqual;":8841,"NotTilde;":8769,"NotTildeEqual;":8772,"NotTildeFullEqual;":8775,"NotTildeTilde;":8777,"NotVerticalBar;":8740,"Nscr;":[55349,56489],Ntilde:209,"Ntilde;":209,"Nu;":925,"OElig;":338,Oacute:211,"Oacute;":211,Ocirc:212,"Ocirc;":212,"Ocy;":1054,"Odblac;":336,"Ofr;":[55349,56594],Ograve:210,"Ograve;":210,"Omacr;":332,"Omega;":937,"Omicron;":927,"Oopf;":[55349,56646],"OpenCurlyDoubleQuote;":8220,"OpenCurlyQuote;":8216,"Or;":10836,"Oscr;":[55349,56490],Oslash:216,"Oslash;":216,Otilde:213,"Otilde;":213,"Otimes;":10807,Ouml:214,"Ouml;":214,"OverBar;":8254,"OverBrace;":9182,"OverBracket;":9140,"OverParenthesis;":9180,"PartialD;":8706,"Pcy;":1055,"Pfr;":[55349,56595],"Phi;":934,"Pi;":928,"PlusMinus;":177,"Poincareplane;":8460,"Popf;":8473,"Pr;":10939,"Precedes;":8826,"PrecedesEqual;":10927,"PrecedesSlantEqual;":8828,"PrecedesTilde;":8830,"Prime;":8243,"Product;":8719,"Proportion;":8759,"Proportional;":8733,"Pscr;":[55349,56491],"Psi;":936,QUOT:34,"QUOT;":34,"Qfr;":[55349,56596],"Qopf;":8474,"Qscr;":[55349,56492],"RBarr;":10512,REG:174,"REG;":174,"Racute;":340,"Rang;":10219,"Rarr;":8608,"Rarrtl;":10518,"Rcaron;":344,"Rcedil;":342,"Rcy;":1056,"Re;":8476,"ReverseElement;":8715,"ReverseEquilibrium;":8651,"ReverseUpEquilibrium;":10607,"Rfr;":8476,"Rho;":929,"RightAngleBracket;":10217,"RightArrow;":8594,"RightArrowBar;":8677,"RightArrowLeftArrow;":8644,"RightCeiling;":8969,"RightDoubleBracket;":10215,"RightDownTeeVector;":10589,"RightDownVector;":8642,"RightDownVectorBar;":10581,"RightFloor;":8971,"RightTee;":8866,"RightTeeArrow;":8614,"RightTeeVector;":10587,"RightTriangle;":8883,"RightTriangleBar;":10704,"RightTriangleEqual;":8885,"RightUpDownVector;":10575,"RightUpTeeVector;":10588,"RightUpVector;":8638,"RightUpVectorBar;":10580,"RightVector;":8640,"RightVectorBar;":10579,"Rightarrow;":8658,"Ropf;":8477,"RoundImplies;":10608,"Rrightarrow;":8667,"Rscr;":8475,"Rsh;":8625,"RuleDelayed;":10740,"SHCHcy;":1065,"SHcy;":1064,"SOFTcy;":1068,"Sacute;":346,"Sc;":10940,"Scaron;":352,"Scedil;":350,"Scirc;":348,"Scy;":1057,"Sfr;":[55349,56598],"ShortDownArrow;":8595,"ShortLeftArrow;":8592,"ShortRightArrow;":8594,"ShortUpArrow;":8593,"Sigma;":931,"SmallCircle;":8728,"Sopf;":[55349,56650],"Sqrt;":8730,"Square;":9633,"SquareIntersection;":8851,"SquareSubset;":8847,"SquareSubsetEqual;":8849,"SquareSuperset;":8848,"SquareSupersetEqual;":8850,"SquareUnion;":8852,"Sscr;":[55349,56494],"Star;":8902,"Sub;":8912,"Subset;":8912,"SubsetEqual;":8838,"Succeeds;":8827,"SucceedsEqual;":10928,"SucceedsSlantEqual;":8829,"SucceedsTilde;":8831,"SuchThat;":8715,"Sum;":8721,"Sup;":8913,"Superset;":8835,"SupersetEqual;":8839,"Supset;":8913,THORN:222,"THORN;":222,"TRADE;":8482,"TSHcy;":1035,"TScy;":1062,"Tab;":9,"Tau;":932,"Tcaron;":356,"Tcedil;":354,"Tcy;":1058,"Tfr;":[55349,56599],"Therefore;":8756,"Theta;":920,"ThickSpace;":[8287,8202],"ThinSpace;":8201,"Tilde;":8764,"TildeEqual;":8771,"TildeFullEqual;":8773,"TildeTilde;":8776,"Topf;":[55349,56651],"TripleDot;":8411,"Tscr;":[55349,56495],"Tstrok;":358,Uacute:218,"Uacute;":218,"Uarr;":8607,"Uarrocir;":10569,"Ubrcy;":1038,"Ubreve;":364,Ucirc:219,"Ucirc;":219,"Ucy;":1059,"Udblac;":368,"Ufr;":[55349,56600],Ugrave:217,"Ugrave;":217,"Umacr;":362,"UnderBar;":95,"UnderBrace;":9183,"UnderBracket;":9141,"UnderParenthesis;":9181,"Union;":8899,"UnionPlus;":8846,"Uogon;":370,"Uopf;":[55349,56652],"UpArrow;":8593,"UpArrowBar;":10514,"UpArrowDownArrow;":8645,"UpDownArrow;":8597,"UpEquilibrium;":10606,"UpTee;":8869,"UpTeeArrow;":8613,"Uparrow;":8657,"Updownarrow;":8661,"UpperLeftArrow;":8598,"UpperRightArrow;":8599,"Upsi;":978,"Upsilon;":933,"Uring;":366,"Uscr;":[55349,56496],"Utilde;":360,Uuml:220,"Uuml;":220,"VDash;":8875,"Vbar;":10987,"Vcy;":1042,"Vdash;":8873,"Vdashl;":10982,"Vee;":8897,"Verbar;":8214,"Vert;":8214,"VerticalBar;":8739,"VerticalLine;":124,"VerticalSeparator;":10072,"VerticalTilde;":8768,"VeryThinSpace;":8202,"Vfr;":[55349,56601],"Vopf;":[55349,56653],"Vscr;":[55349,56497],"Vvdash;":8874,"Wcirc;":372,"Wedge;":8896,"Wfr;":[55349,56602],"Wopf;":[55349,56654],"Wscr;":[55349,56498],"Xfr;":[55349,56603],"Xi;":926,"Xopf;":[55349,56655],"Xscr;":[55349,56499],"YAcy;":1071,"YIcy;":1031,"YUcy;":1070,Yacute:221,"Yacute;":221,"Ycirc;":374,"Ycy;":1067,"Yfr;":[55349,56604],"Yopf;":[55349,56656],"Yscr;":[55349,56500],"Yuml;":376,"ZHcy;":1046,"Zacute;":377,"Zcaron;":381,"Zcy;":1047,"Zdot;":379,"ZeroWidthSpace;":8203,"Zeta;":918,"Zfr;":8488,"Zopf;":8484,"Zscr;":[55349,56501],aacute:225,"aacute;":225,"abreve;":259,"ac;":8766,"acE;":[8766,819],"acd;":8767,acirc:226,"acirc;":226,acute:180,"acute;":180,"acy;":1072,aelig:230,"aelig;":230,"af;":8289,"afr;":[55349,56606],agrave:224,"agrave;":224,"alefsym;":8501,"aleph;":8501,"alpha;":945,"amacr;":257,"amalg;":10815,amp:38,"amp;":38,"and;":8743,"andand;":10837,"andd;":10844,"andslope;":10840,"andv;":10842,"ang;":8736,"ange;":10660,"angle;":8736,"angmsd;":8737,"angmsdaa;":10664,"angmsdab;":10665,"angmsdac;":10666,"angmsdad;":10667,"angmsdae;":10668,"angmsdaf;":10669,"angmsdag;":10670,"angmsdah;":10671,"angrt;":8735,"angrtvb;":8894,"angrtvbd;":10653,"angsph;":8738,"angst;":197,"angzarr;":9084,"aogon;":261,"aopf;":[55349,56658],"ap;":8776,"apE;":10864,"apacir;":10863,"ape;":8778,"apid;":8779,"apos;":39,"approx;":8776,"approxeq;":8778,aring:229,"aring;":229,"ascr;":[55349,56502],"ast;":42,"asymp;":8776,"asympeq;":8781,atilde:227,"atilde;":227,auml:228,"auml;":228,"awconint;":8755,"awint;":10769,"bNot;":10989,"backcong;":8780,"backepsilon;":1014,"backprime;":8245,"backsim;":8765,"backsimeq;":8909,"barvee;":8893,"barwed;":8965,"barwedge;":8965,"bbrk;":9141,"bbrktbrk;":9142,"bcong;":8780,"bcy;":1073,"bdquo;":8222,"becaus;":8757,"because;":8757,"bemptyv;":10672,"bepsi;":1014,"bernou;":8492,"beta;":946,"beth;":8502,"between;":8812,"bfr;":[55349,56607],"bigcap;":8898,"bigcirc;":9711,"bigcup;":8899,"bigodot;":10752,"bigoplus;":10753,"bigotimes;":10754,"bigsqcup;":10758,"bigstar;":9733,"bigtriangledown;":9661,"bigtriangleup;":9651,"biguplus;":10756,"bigvee;":8897,"bigwedge;":8896,"bkarow;":10509,"blacklozenge;":10731,"blacksquare;":9642,"blacktriangle;":9652,"blacktriangledown;":9662,"blacktriangleleft;":9666,"blacktriangleright;":9656,"blank;":9251,"blk12;":9618,"blk14;":9617,"blk34;":9619,"block;":9608,"bne;":[61,8421],"bnequiv;":[8801,8421],"bnot;":8976,"bopf;":[55349,56659],"bot;":8869,"bottom;":8869,"bowtie;":8904,"boxDL;":9559,"boxDR;":9556,"boxDl;":9558,"boxDr;":9555,"boxH;":9552,"boxHD;":9574,"boxHU;":9577,"boxHd;":9572,"boxHu;":9575,"boxUL;":9565,"boxUR;":9562,"boxUl;":9564,"boxUr;":9561,"boxV;":9553,"boxVH;":9580,"boxVL;":9571,"boxVR;":9568,"boxVh;":9579,"boxVl;":9570,"boxVr;":9567,"boxbox;":10697,"boxdL;":9557,"boxdR;":9554,"boxdl;":9488,"boxdr;":9484,"boxh;":9472,"boxhD;":9573,"boxhU;":9576,"boxhd;":9516,"boxhu;":9524,"boxminus;":8863,"boxplus;":8862,"boxtimes;":8864,"boxuL;":9563,"boxuR;":9560,"boxul;":9496,"boxur;":9492,"boxv;":9474,"boxvH;":9578,"boxvL;":9569,"boxvR;":9566,"boxvh;":9532,"boxvl;":9508,"boxvr;":9500,"bprime;":8245,"breve;":728,brvbar:166,"brvbar;":166,"bscr;":[55349,56503],"bsemi;":8271,"bsim;":8765,"bsime;":8909,"bsol;":92,"bsolb;":10693,"bsolhsub;":10184,"bull;":8226,"bullet;":8226,"bump;":8782,"bumpE;":10926,"bumpe;":8783,"bumpeq;":8783,"cacute;":263,"cap;":8745,"capand;":10820,"capbrcup;":10825,"capcap;":10827,"capcup;":10823,"capdot;":10816,"caps;":[8745,65024],"caret;":8257,"caron;":711,"ccaps;":10829,"ccaron;":269,ccedil:231,"ccedil;":231,"ccirc;":265,"ccups;":10828,"ccupssm;":10832,"cdot;":267,cedil:184,"cedil;":184,"cemptyv;":10674,cent:162,"cent;":162,"centerdot;":183,"cfr;":[55349,56608],"chcy;":1095,"check;":10003,"checkmark;":10003,"chi;":967,"cir;":9675,"cirE;":10691,"circ;":710,"circeq;":8791,"circlearrowleft;":8634,"circlearrowright;":8635,"circledR;":174,"circledS;":9416,"circledast;":8859,"circledcirc;":8858,"circleddash;":8861,"cire;":8791,"cirfnint;":10768,"cirmid;":10991,"cirscir;":10690,"clubs;":9827,"clubsuit;":9827,"colon;":58,"colone;":8788,"coloneq;":8788,"comma;":44,"commat;":64,"comp;":8705,"compfn;":8728,"complement;":8705,"complexes;":8450,"cong;":8773,"congdot;":10861,"conint;":8750,"copf;":[55349,56660],"coprod;":8720,copy:169,"copy;":169,"copysr;":8471,"crarr;":8629,"cross;":10007,"cscr;":[55349,56504],"csub;":10959,"csube;":10961,"csup;":10960,"csupe;":10962,"ctdot;":8943,"cudarrl;":10552,"cudarrr;":10549,"cuepr;":8926,"cuesc;":8927,"cularr;":8630,"cularrp;":10557,"cup;":8746,"cupbrcap;":10824,"cupcap;":10822,"cupcup;":10826,"cupdot;":8845,"cupor;":10821,"cups;":[8746,65024],"curarr;":8631,"curarrm;":10556,"curlyeqprec;":8926,"curlyeqsucc;":8927,"curlyvee;":8910,"curlywedge;":8911,curren:164,"curren;":164,"curvearrowleft;":8630,"curvearrowright;":8631,"cuvee;":8910,"cuwed;":8911,"cwconint;":8754,"cwint;":8753,"cylcty;":9005,"dArr;":8659,"dHar;":10597,"dagger;":8224,"daleth;":8504,"darr;":8595,"dash;":8208,"dashv;":8867,"dbkarow;":10511,"dblac;":733,"dcaron;":271,"dcy;":1076,"dd;":8518,"ddagger;":8225,"ddarr;":8650,"ddotseq;":10871,deg:176,"deg;":176,"delta;":948,"demptyv;":10673,"dfisht;":10623,"dfr;":[55349,56609],"dharl;":8643,"dharr;":8642,"diam;":8900,"diamond;":8900,"diamondsuit;":9830,"diams;":9830,"die;":168,"digamma;":989,"disin;":8946,"div;":247,divide:247,"divide;":247,"divideontimes;":8903,"divonx;":8903,"djcy;":1106,"dlcorn;":8990,"dlcrop;":8973,"dollar;":36,"dopf;":[55349,56661],"dot;":729,"doteq;":8784,"doteqdot;":8785,"dotminus;":8760,"dotplus;":8724,"dotsquare;":8865,"doublebarwedge;":8966,"downarrow;":8595,"downdownarrows;":8650,"downharpoonleft;":8643,"downharpoonright;":8642,"drbkarow;":10512,"drcorn;":8991,"drcrop;":8972,"dscr;":[55349,56505],"dscy;":1109,"dsol;":10742,"dstrok;":273,"dtdot;":8945,"dtri;":9663,"dtrif;":9662,"duarr;":8693,"duhar;":10607,"dwangle;":10662,"dzcy;":1119,"dzigrarr;":10239,"eDDot;":10871,"eDot;":8785,eacute:233,"eacute;":233,"easter;":10862,"ecaron;":283,"ecir;":8790,ecirc:234,"ecirc;":234,"ecolon;":8789,"ecy;":1101,"edot;":279,"ee;":8519,"efDot;":8786,"efr;":[55349,56610],"eg;":10906,egrave:232,"egrave;":232,"egs;":10902,"egsdot;":10904,"el;":10905,"elinters;":9191,"ell;":8467,"els;":10901,"elsdot;":10903,"emacr;":275,"empty;":8709,"emptyset;":8709,"emptyv;":8709,"emsp13;":8196,"emsp14;":8197,"emsp;":8195,"eng;":331,"ensp;":8194,"eogon;":281,"eopf;":[55349,56662],"epar;":8917,"eparsl;":10723,"eplus;":10865,"epsi;":949,"epsilon;":949,"epsiv;":1013,"eqcirc;":8790,"eqcolon;":8789,"eqsim;":8770,"eqslantgtr;":10902,"eqslantless;":10901,"equals;":61,"equest;":8799,"equiv;":8801,"equivDD;":10872,"eqvparsl;":10725,"erDot;":8787,"erarr;":10609,"escr;":8495,"esdot;":8784,"esim;":8770,"eta;":951,eth:240,"eth;":240,euml:235,"euml;":235,"euro;":8364,"excl;":33,"exist;":8707,"expectation;":8496,"exponentiale;":8519,"fallingdotseq;":8786,"fcy;":1092,"female;":9792,"ffilig;":64259,"fflig;":64256,"ffllig;":64260,"ffr;":[55349,56611],"filig;":64257,"fjlig;":[102,106],"flat;":9837,"fllig;":64258,"fltns;":9649,"fnof;":402,"fopf;":[55349,56663],"forall;":8704,"fork;":8916,"forkv;":10969,"fpartint;":10765,frac12:189,"frac12;":189,"frac13;":8531,frac14:188,"frac14;":188,"frac15;":8533,"frac16;":8537,"frac18;":8539,"frac23;":8532,"frac25;":8534,frac34:190,"frac34;":190,"frac35;":8535,"frac38;":8540,"frac45;":8536,"frac56;":8538,"frac58;":8541,"frac78;":8542,"frasl;":8260,"frown;":8994,"fscr;":[55349,56507],"gE;":8807,"gEl;":10892,"gacute;":501,"gamma;":947,"gammad;":989,"gap;":10886,"gbreve;":287,"gcirc;":285,"gcy;":1075,"gdot;":289,"ge;":8805,"gel;":8923,"geq;":8805,"geqq;":8807,"geqslant;":10878,"ges;":10878,"gescc;":10921,"gesdot;":10880,"gesdoto;":10882,"gesdotol;":10884,"gesl;":[8923,65024],"gesles;":10900,"gfr;":[55349,56612],"gg;":8811,"ggg;":8921,"gimel;":8503,"gjcy;":1107,"gl;":8823,"glE;":10898,"gla;":10917,"glj;":10916,"gnE;":8809,"gnap;":10890,"gnapprox;":10890,"gne;":10888,"gneq;":10888,"gneqq;":8809,"gnsim;":8935,"gopf;":[55349,56664],"grave;":96,"gscr;":8458,"gsim;":8819,"gsime;":10894,"gsiml;":10896,gt:62,"gt;":62,"gtcc;":10919,"gtcir;":10874,"gtdot;":8919,"gtlPar;":10645,"gtquest;":10876,"gtrapprox;":10886,"gtrarr;":10616,"gtrdot;":8919,"gtreqless;":8923,"gtreqqless;":10892,"gtrless;":8823,"gtrsim;":8819,"gvertneqq;":[8809,65024],"gvnE;":[8809,65024],"hArr;":8660,"hairsp;":8202,"half;":189,"hamilt;":8459,"hardcy;":1098,"harr;":8596,"harrcir;":10568,"harrw;":8621,"hbar;":8463,"hcirc;":293,"hearts;":9829,"heartsuit;":9829,"hellip;":8230,"hercon;":8889,"hfr;":[55349,56613],"hksearow;":10533,"hkswarow;":10534,"hoarr;":8703,"homtht;":8763,"hookleftarrow;":8617,"hookrightarrow;":8618,"hopf;":[55349,56665],"horbar;":8213,"hscr;":[55349,56509],"hslash;":8463,"hstrok;":295,"hybull;":8259,"hyphen;":8208,iacute:237,"iacute;":237,"ic;":8291,icirc:238,"icirc;":238,"icy;":1080,"iecy;":1077,iexcl:161,"iexcl;":161,"iff;":8660,"ifr;":[55349,56614],igrave:236,"igrave;":236,"ii;":8520,"iiiint;":10764,"iiint;":8749,"iinfin;":10716,"iiota;":8489,"ijlig;":307,"imacr;":299,"image;":8465,"imagline;":8464,"imagpart;":8465,"imath;":305,"imof;":8887,"imped;":437,"in;":8712,"incare;":8453,"infin;":8734,"infintie;":10717,"inodot;":305,"int;":8747,"intcal;":8890,"integers;":8484,"intercal;":8890,"intlarhk;":10775,"intprod;":10812,"iocy;":1105,"iogon;":303,"iopf;":[55349,56666],"iota;":953,"iprod;":10812,iquest:191,"iquest;":191,"iscr;":[55349,56510],"isin;":8712,"isinE;":8953,"isindot;":8949,"isins;":8948,"isinsv;":8947,"isinv;":8712,"it;":8290,"itilde;":297,"iukcy;":1110,iuml:239,"iuml;":239,"jcirc;":309,"jcy;":1081,"jfr;":[55349,56615],"jmath;":567,"jopf;":[55349,56667],"jscr;":[55349,56511],"jsercy;":1112,"jukcy;":1108,"kappa;":954,"kappav;":1008,"kcedil;":311,"kcy;":1082,"kfr;":[55349,56616],"kgreen;":312,"khcy;":1093,"kjcy;":1116,"kopf;":[55349,56668],"kscr;":[55349,56512],"lAarr;":8666,"lArr;":8656,"lAtail;":10523,"lBarr;":10510,"lE;":8806,"lEg;":10891,"lHar;":10594,"lacute;":314,"laemptyv;":10676,"lagran;":8466,"lambda;":955,"lang;":10216,"langd;":10641,"langle;":10216,"lap;":10885,laquo:171,"laquo;":171,"larr;":8592,"larrb;":8676,"larrbfs;":10527,"larrfs;":10525,"larrhk;":8617,"larrlp;":8619,"larrpl;":10553,"larrsim;":10611,"larrtl;":8610,"lat;":10923,"latail;":10521,"late;":10925,"lates;":[10925,65024],"lbarr;":10508,"lbbrk;":10098,"lbrace;":123,"lbrack;":91,"lbrke;":10635,"lbrksld;":10639,"lbrkslu;":10637,"lcaron;":318,"lcedil;":316,"lceil;":8968,"lcub;":123,"lcy;":1083,"ldca;":10550,"ldquo;":8220,"ldquor;":8222,"ldrdhar;":10599,"ldrushar;":10571,"ldsh;":8626,"le;":8804,"leftarrow;":8592,"leftarrowtail;":8610,"leftharpoondown;":8637,"leftharpoonup;":8636,"leftleftarrows;":8647,"leftrightarrow;":8596,"leftrightarrows;":8646,"leftrightharpoons;":8651,"leftrightsquigarrow;":8621,"leftthreetimes;":8907,"leg;":8922,"leq;":8804,"leqq;":8806,"leqslant;":10877,"les;":10877,"lescc;":10920,"lesdot;":10879,"lesdoto;":10881,"lesdotor;":10883,"lesg;":[8922,65024],"lesges;":10899,"lessapprox;":10885,"lessdot;":8918,"lesseqgtr;":8922,"lesseqqgtr;":10891,"lessgtr;":8822,"lesssim;":8818,"lfisht;":10620,"lfloor;":8970,"lfr;":[55349,56617],"lg;":8822,"lgE;":10897,"lhard;":8637,"lharu;":8636,"lharul;":10602,"lhblk;":9604,"ljcy;":1113,"ll;":8810,"llarr;":8647,"llcorner;":8990,"llhard;":10603,"lltri;":9722,"lmidot;":320,"lmoust;":9136,"lmoustache;":9136,"lnE;":8808,"lnap;":10889,"lnapprox;":10889,"lne;":10887,"lneq;":10887,"lneqq;":8808,"lnsim;":8934,"loang;":10220,"loarr;":8701,"lobrk;":10214,"longleftarrow;":10229,"longleftrightarrow;":10231,"longmapsto;":10236,"longrightarrow;":10230,"looparrowleft;":8619,"looparrowright;":8620,"lopar;":10629,"lopf;":[55349,56669],"loplus;":10797,"lotimes;":10804,"lowast;":8727,"lowbar;":95,"loz;":9674,"lozenge;":9674,"lozf;":10731,"lpar;":40,"lparlt;":10643,"lrarr;":8646,"lrcorner;":8991,"lrhar;":8651,"lrhard;":10605,"lrm;":8206,"lrtri;":8895,"lsaquo;":8249,"lscr;":[55349,56513],"lsh;":8624,"lsim;":8818,"lsime;":10893,"lsimg;":10895,"lsqb;":91,"lsquo;":8216,"lsquor;":8218,"lstrok;":322,lt:60,"lt;":60,"ltcc;":10918,"ltcir;":10873,"ltdot;":8918,"lthree;":8907,"ltimes;":8905,"ltlarr;":10614,"ltquest;":10875,"ltrPar;":10646,"ltri;":9667,"ltrie;":8884,"ltrif;":9666,"lurdshar;":10570,"luruhar;":10598,"lvertneqq;":[8808,65024],"lvnE;":[8808,65024],"mDDot;":8762,macr:175,"macr;":175,"male;":9794,"malt;":10016,"maltese;":10016,"map;":8614,"mapsto;":8614,"mapstodown;":8615,"mapstoleft;":8612,"mapstoup;":8613,"marker;":9646,"mcomma;":10793,"mcy;":1084,"mdash;":8212,"measuredangle;":8737,"mfr;":[55349,56618],"mho;":8487,micro:181,"micro;":181,"mid;":8739,"midast;":42,"midcir;":10992,middot:183,"middot;":183,"minus;":8722,"minusb;":8863,"minusd;":8760,"minusdu;":10794,"mlcp;":10971,"mldr;":8230,"mnplus;":8723,"models;":8871,"mopf;":[55349,56670],"mp;":8723,"mscr;":[55349,56514],"mstpos;":8766,"mu;":956,"multimap;":8888,"mumap;":8888,"nGg;":[8921,824],"nGt;":[8811,8402],"nGtv;":[8811,824],"nLeftarrow;":8653,"nLeftrightarrow;":8654,"nLl;":[8920,824],"nLt;":[8810,8402],"nLtv;":[8810,824],"nRightarrow;":8655,"nVDash;":8879,"nVdash;":8878,"nabla;":8711,"nacute;":324,"nang;":[8736,8402],"nap;":8777,"napE;":[10864,824],"napid;":[8779,824],"napos;":329,"napprox;":8777,"natur;":9838,"natural;":9838,"naturals;":8469,nbsp:160,"nbsp;":160,"nbump;":[8782,824],"nbumpe;":[8783,824],"ncap;":10819,"ncaron;":328,"ncedil;":326,"ncong;":8775,"ncongdot;":[10861,824],"ncup;":10818,"ncy;":1085,"ndash;":8211,"ne;":8800,"neArr;":8663,"nearhk;":10532,"nearr;":8599,"nearrow;":8599,"nedot;":[8784,824],"nequiv;":8802,"nesear;":10536,"nesim;":[8770,824],"nexist;":8708,"nexists;":8708,"nfr;":[55349,56619],"ngE;":[8807,824],"nge;":8817,"ngeq;":8817,"ngeqq;":[8807,824],"ngeqslant;":[10878,824],"nges;":[10878,824],"ngsim;":8821,"ngt;":8815,"ngtr;":8815,"nhArr;":8654,"nharr;":8622,"nhpar;":10994,"ni;":8715,"nis;":8956,"nisd;":8954,"niv;":8715,"njcy;":1114,"nlArr;":8653,"nlE;":[8806,824],"nlarr;":8602,"nldr;":8229,"nle;":8816,"nleftarrow;":8602,"nleftrightarrow;":8622,"nleq;":8816,"nleqq;":[8806,824],"nleqslant;":[10877,824],"nles;":[10877,824],"nless;":8814,"nlsim;":8820,"nlt;":8814,"nltri;":8938,"nltrie;":8940,"nmid;":8740,"nopf;":[55349,56671],not:172,"not;":172,"notin;":8713,"notinE;":[8953,824],"notindot;":[8949,824],"notinva;":8713,"notinvb;":8951,"notinvc;":8950,"notni;":8716,"notniva;":8716,"notnivb;":8958,"notnivc;":8957,"npar;":8742,"nparallel;":8742,"nparsl;":[11005,8421],"npart;":[8706,824],"npolint;":10772,"npr;":8832,"nprcue;":8928,"npre;":[10927,824],"nprec;":8832,"npreceq;":[10927,824],"nrArr;":8655,"nrarr;":8603,"nrarrc;":[10547,824],"nrarrw;":[8605,824],"nrightarrow;":8603,"nrtri;":8939,"nrtrie;":8941,"nsc;":8833,"nsccue;":8929,"nsce;":[10928,824],"nscr;":[55349,56515],"nshortmid;":8740,"nshortparallel;":8742,"nsim;":8769,"nsime;":8772,"nsimeq;":8772,"nsmid;":8740,"nspar;":8742,"nsqsube;":8930,"nsqsupe;":8931,"nsub;":8836,"nsubE;":[10949,824],"nsube;":8840,"nsubset;":[8834,8402],"nsubseteq;":8840,"nsubseteqq;":[10949,824],"nsucc;":8833,"nsucceq;":[10928,824],"nsup;":8837,"nsupE;":[10950,824],"nsupe;":8841,"nsupset;":[8835,8402],"nsupseteq;":8841,"nsupseteqq;":[10950,824],"ntgl;":8825,ntilde:241,"ntilde;":241,"ntlg;":8824,"ntriangleleft;":8938,"ntrianglelefteq;":8940,"ntriangleright;":8939,"ntrianglerighteq;":8941,"nu;":957,"num;":35,"numero;":8470,"numsp;":8199,"nvDash;":8877,"nvHarr;":10500,"nvap;":[8781,8402],"nvdash;":8876,"nvge;":[8805,8402],"nvgt;":[62,8402],"nvinfin;":10718,"nvlArr;":10498,"nvle;":[8804,8402],"nvlt;":[60,8402],"nvltrie;":[8884,8402],"nvrArr;":10499,"nvrtrie;":[8885,8402],"nvsim;":[8764,8402],"nwArr;":8662,"nwarhk;":10531,"nwarr;":8598,"nwarrow;":8598,"nwnear;":10535,"oS;":9416,oacute:243,"oacute;":243,"oast;":8859,"ocir;":8858,ocirc:244,"ocirc;":244,"ocy;":1086,"odash;":8861,"odblac;":337,"odiv;":10808,"odot;":8857,"odsold;":10684,"oelig;":339,"ofcir;":10687,"ofr;":[55349,56620],"ogon;":731,ograve:242,"ograve;":242,"ogt;":10689,"ohbar;":10677,"ohm;":937,"oint;":8750,"olarr;":8634,"olcir;":10686,"olcross;":10683,"oline;":8254,"olt;":10688,"omacr;":333,"omega;":969,"omicron;":959,"omid;":10678,"ominus;":8854,"oopf;":[55349,56672],"opar;":10679,"operp;":10681,"oplus;":8853,"or;":8744,"orarr;":8635,"ord;":10845,"order;":8500,"orderof;":8500,ordf:170,"ordf;":170,ordm:186,"ordm;":186,"origof;":8886,"oror;":10838,"orslope;":10839,"orv;":10843,"oscr;":8500,oslash:248,"oslash;":248,"osol;":8856,otilde:245,"otilde;":245,"otimes;":8855,"otimesas;":10806,ouml:246,"ouml;":246,"ovbar;":9021,"par;":8741,para:182,"para;":182,"parallel;":8741,"parsim;":10995,"parsl;":11005,"part;":8706,"pcy;":1087,"percnt;":37,"period;":46,"permil;":8240,"perp;":8869,"pertenk;":8241,"pfr;":[55349,56621],"phi;":966,"phiv;":981,"phmmat;":8499,"phone;":9742,"pi;":960,"pitchfork;":8916,"piv;":982,"planck;":8463,"planckh;":8462,"plankv;":8463,"plus;":43,"plusacir;":10787,"plusb;":8862,"pluscir;":10786,"plusdo;":8724,"plusdu;":10789,"pluse;":10866,plusmn:177,"plusmn;":177,"plussim;":10790,"plustwo;":10791,"pm;":177,"pointint;":10773,"popf;":[55349,56673],pound:163,"pound;":163,"pr;":8826,"prE;":10931,"prap;":10935,"prcue;":8828,"pre;":10927,"prec;":8826,"precapprox;":10935,"preccurlyeq;":8828,"preceq;":10927,"precnapprox;":10937,"precneqq;":10933,"precnsim;":8936,"precsim;":8830,"prime;":8242,"primes;":8473,"prnE;":10933,"prnap;":10937,"prnsim;":8936,"prod;":8719,"profalar;":9006,"profline;":8978,"profsurf;":8979,"prop;":8733,"propto;":8733,"prsim;":8830,"prurel;":8880,"pscr;":[55349,56517],"psi;":968,"puncsp;":8200,"qfr;":[55349,56622],"qint;":10764,"qopf;":[55349,56674],"qprime;":8279,"qscr;":[55349,56518],"quaternions;":8461,"quatint;":10774,"quest;":63,"questeq;":8799,quot:34,"quot;":34,"rAarr;":8667,"rArr;":8658,"rAtail;":10524,"rBarr;":10511,"rHar;":10596,"race;":[8765,817],"racute;":341,"radic;":8730,"raemptyv;":10675,"rang;":10217,"rangd;":10642,"range;":10661,"rangle;":10217,raquo:187,"raquo;":187,"rarr;":8594,"rarrap;":10613,"rarrb;":8677,"rarrbfs;":10528,"rarrc;":10547,"rarrfs;":10526,"rarrhk;":8618,"rarrlp;":8620,"rarrpl;":10565,"rarrsim;":10612,"rarrtl;":8611,"rarrw;":8605,"ratail;":10522,"ratio;":8758,"rationals;":8474,"rbarr;":10509,"rbbrk;":10099,"rbrace;":125,"rbrack;":93,"rbrke;":10636,"rbrksld;":10638,"rbrkslu;":10640,"rcaron;":345,"rcedil;":343,"rceil;":8969,"rcub;":125,"rcy;":1088,"rdca;":10551,"rdldhar;":10601,"rdquo;":8221,"rdquor;":8221,"rdsh;":8627,"real;":8476,"realine;":8475,"realpart;":8476,"reals;":8477,"rect;":9645,reg:174,"reg;":174,"rfisht;":10621,"rfloor;":8971,"rfr;":[55349,56623],"rhard;":8641,"rharu;":8640,"rharul;":10604,"rho;":961,"rhov;":1009,"rightarrow;":8594,"rightarrowtail;":8611,"rightharpoondown;":8641,"rightharpoonup;":8640,"rightleftarrows;":8644,"rightleftharpoons;":8652,"rightrightarrows;":8649,"rightsquigarrow;":8605,"rightthreetimes;":8908,"ring;":730,"risingdotseq;":8787,"rlarr;":8644,"rlhar;":8652,"rlm;":8207,"rmoust;":9137,"rmoustache;":9137,"rnmid;":10990,"roang;":10221,"roarr;":8702,"robrk;":10215,"ropar;":10630,"ropf;":[55349,56675],"roplus;":10798,"rotimes;":10805,"rpar;":41,"rpargt;":10644,"rppolint;":10770,"rrarr;":8649,"rsaquo;":8250,"rscr;":[55349,56519],"rsh;":8625,"rsqb;":93,"rsquo;":8217,"rsquor;":8217,"rthree;":8908,"rtimes;":8906,"rtri;":9657,"rtrie;":8885,"rtrif;":9656,"rtriltri;":10702,"ruluhar;":10600,"rx;":8478,"sacute;":347,"sbquo;":8218,"sc;":8827,"scE;":10932,"scap;":10936,"scaron;":353,"sccue;":8829,"sce;":10928,"scedil;":351,"scirc;":349,"scnE;":10934,"scnap;":10938,"scnsim;":8937,"scpolint;":10771,"scsim;":8831,"scy;":1089,"sdot;":8901,"sdotb;":8865,"sdote;":10854,"seArr;":8664,"searhk;":10533,"searr;":8600,"searrow;":8600,sect:167,"sect;":167,"semi;":59,"seswar;":10537,"setminus;":8726,"setmn;":8726,"sext;":10038,"sfr;":[55349,56624],"sfrown;":8994,"sharp;":9839,"shchcy;":1097,"shcy;":1096,"shortmid;":8739,"shortparallel;":8741,shy:173,"shy;":173,"sigma;":963,"sigmaf;":962,"sigmav;":962,"sim;":8764,"simdot;":10858,"sime;":8771,"simeq;":8771,"simg;":10910,"simgE;":10912,"siml;":10909,"simlE;":10911,"simne;":8774,"simplus;":10788,"simrarr;":10610,"slarr;":8592,"smallsetminus;":8726,"smashp;":10803,"smeparsl;":10724,"smid;":8739,"smile;":8995,"smt;":10922,"smte;":10924,"smtes;":[10924,65024],"softcy;":1100,"sol;":47,"solb;":10692,"solbar;":9023,"sopf;":[55349,56676],"spades;":9824,"spadesuit;":9824,"spar;":8741,"sqcap;":8851,"sqcaps;":[8851,65024],"sqcup;":8852,"sqcups;":[8852,65024],"sqsub;":8847,"sqsube;":8849,"sqsubset;":8847,"sqsubseteq;":8849,"sqsup;":8848,"sqsupe;":8850,"sqsupset;":8848,"sqsupseteq;":8850,"squ;":9633,"square;":9633,"squarf;":9642,"squf;":9642,"srarr;":8594,"sscr;":[55349,56520],"ssetmn;":8726,"ssmile;":8995,"sstarf;":8902,"star;":9734,"starf;":9733,"straightepsilon;":1013,"straightphi;":981,"strns;":175,"sub;":8834,"subE;":10949,"subdot;":10941,"sube;":8838,"subedot;":10947,"submult;":10945,"subnE;":10955,"subne;":8842,"subplus;":10943,"subrarr;":10617,"subset;":8834,"subseteq;":8838,"subseteqq;":10949,"subsetneq;":8842,"subsetneqq;":10955,"subsim;":10951,"subsub;":10965,"subsup;":10963,"succ;":8827,"succapprox;":10936,"succcurlyeq;":8829,"succeq;":10928,"succnapprox;":10938,"succneqq;":10934,"succnsim;":8937,"succsim;":8831,"sum;":8721,"sung;":9834,sup1:185,"sup1;":185,sup2:178,"sup2;":178,sup3:179,"sup3;":179,"sup;":8835,"supE;":10950,"supdot;":10942,"supdsub;":10968,"supe;":8839,"supedot;":10948,"suphsol;":10185,"suphsub;":10967,"suplarr;":10619,"supmult;":10946,"supnE;":10956,"supne;":8843,"supplus;":10944,"supset;":8835,"supseteq;":8839,"supseteqq;":10950,"supsetneq;":8843,"supsetneqq;":10956,"supsim;":10952,"supsub;":10964,"supsup;":10966,"swArr;":8665,"swarhk;":10534,"swarr;":8601,"swarrow;":8601,"swnwar;":10538,szlig:223,"szlig;":223,"target;":8982,"tau;":964,"tbrk;":9140,"tcaron;":357,"tcedil;":355,"tcy;":1090,"tdot;":8411,"telrec;":8981,"tfr;":[55349,56625],"there4;":8756,"therefore;":8756,"theta;":952,"thetasym;":977,"thetav;":977,"thickapprox;":8776,"thicksim;":8764,"thinsp;":8201,"thkap;":8776,"thksim;":8764,thorn:254,"thorn;":254,"tilde;":732,times:215,"times;":215,"timesb;":8864,"timesbar;":10801,"timesd;":10800,"tint;":8749,"toea;":10536,"top;":8868,"topbot;":9014,"topcir;":10993,"topf;":[55349,56677],"topfork;":10970,"tosa;":10537,"tprime;":8244,"trade;":8482,"triangle;":9653,"triangledown;":9663,"triangleleft;":9667,"trianglelefteq;":8884,"triangleq;":8796,"triangleright;":9657,"trianglerighteq;":8885,"tridot;":9708,"trie;":8796,"triminus;":10810,"triplus;":10809,"trisb;":10701,"tritime;":10811,"trpezium;":9186,"tscr;":[55349,56521],"tscy;":1094,"tshcy;":1115,"tstrok;":359,"twixt;":8812,"twoheadleftarrow;":8606,"twoheadrightarrow;":8608,"uArr;":8657,"uHar;":10595,uacute:250,"uacute;":250,"uarr;":8593,"ubrcy;":1118,"ubreve;":365,ucirc:251,"ucirc;":251,"ucy;":1091,"udarr;":8645,"udblac;":369,"udhar;":10606,"ufisht;":10622,"ufr;":[55349,56626],ugrave:249,"ugrave;":249,"uharl;":8639,"uharr;":8638,"uhblk;":9600,"ulcorn;":8988,"ulcorner;":8988,"ulcrop;":8975,"ultri;":9720,"umacr;":363,uml:168,"uml;":168,"uogon;":371,"uopf;":[55349,56678],"uparrow;":8593,"updownarrow;":8597,"upharpoonleft;":8639,"upharpoonright;":8638,"uplus;":8846,"upsi;":965,"upsih;":978,"upsilon;":965,"upuparrows;":8648,"urcorn;":8989,"urcorner;":8989,"urcrop;":8974,"uring;":367,"urtri;":9721,"uscr;":[55349,56522],"utdot;":8944,"utilde;":361,"utri;":9653,"utrif;":9652,"uuarr;":8648,uuml:252,"uuml;":252,"uwangle;":10663,"vArr;":8661,"vBar;":10984,"vBarv;":10985,"vDash;":8872,"vangrt;":10652,"varepsilon;":1013,"varkappa;":1008,"varnothing;":8709,"varphi;":981,"varpi;":982,"varpropto;":8733,"varr;":8597,"varrho;":1009,"varsigma;":962,"varsubsetneq;":[8842,65024],"varsubsetneqq;":[10955,65024],"varsupsetneq;":[8843,65024],"varsupsetneqq;":[10956,65024],"vartheta;":977,"vartriangleleft;":8882,"vartriangleright;":8883,"vcy;":1074,"vdash;":8866,"vee;":8744,"veebar;":8891,"veeeq;":8794,"vellip;":8942,"verbar;":124,"vert;":124,"vfr;":[55349,56627],"vltri;":8882,"vnsub;":[8834,8402],"vnsup;":[8835,8402],"vopf;":[55349,56679],"vprop;":8733,"vrtri;":8883,"vscr;":[55349,56523],"vsubnE;":[10955,65024],"vsubne;":[8842,65024],"vsupnE;":[10956,65024],"vsupne;":[8843,65024],"vzigzag;":10650,"wcirc;":373,"wedbar;":10847,"wedge;":8743,"wedgeq;":8793,"weierp;":8472,"wfr;":[55349,56628],"wopf;":[55349,56680],"wp;":8472,"wr;":8768,"wreath;":8768,"wscr;":[55349,56524],"xcap;":8898,"xcirc;":9711,"xcup;":8899,"xdtri;":9661,"xfr;":[55349,56629],"xhArr;":10234,"xharr;":10231,"xi;":958,"xlArr;":10232,"xlarr;":10229,"xmap;":10236,"xnis;":8955,"xodot;":10752,"xopf;":[55349,56681],"xoplus;":10753,"xotime;":10754,"xrArr;":10233,"xrarr;":10230,"xscr;":[55349,56525],"xsqcup;":10758,"xuplus;":10756,"xutri;":9651,"xvee;":8897,"xwedge;":8896,yacute:253,"yacute;":253,"yacy;":1103,"ycirc;":375,"ycy;":1099,yen:165,"yen;":165,"yfr;":[55349,56630],"yicy;":1111,"yopf;":[55349,56682],"yscr;":[55349,56526],"yucy;":1102,yuml:255,"yuml;":255,"zacute;":378,"zcaron;":382,"zcy;":1079,"zdot;":380,"zeetrf;":8488,"zeta;":950,"zfr;":[55349,56631],"zhcy;":1078,"zigrarr;":8669,"zopf;":[55349,56683],"zscr;":[55349,56527],"zwj;":8205,"zwnj;":8204},zj=/(A(?:Elig;?|MP;?|acute;?|breve;|c(?:irc;?|y;)|fr;|grave;?|lpha;|macr;|nd;|o(?:gon;|pf;)|pplyFunction;|ring;?|s(?:cr;|sign;)|tilde;?|uml;?)|B(?:a(?:ckslash;|r(?:v;|wed;))|cy;|e(?:cause;|rnoullis;|ta;)|fr;|opf;|reve;|scr;|umpeq;)|C(?:Hcy;|OPY;?|a(?:cute;|p(?:;|italDifferentialD;)|yleys;)|c(?:aron;|edil;?|irc;|onint;)|dot;|e(?:dilla;|nterDot;)|fr;|hi;|ircle(?:Dot;|Minus;|Plus;|Times;)|lo(?:ckwiseContourIntegral;|seCurly(?:DoubleQuote;|Quote;))|o(?:lon(?:;|e;)|n(?:gruent;|int;|tourIntegral;)|p(?:f;|roduct;)|unterClockwiseContourIntegral;)|ross;|scr;|up(?:;|Cap;))|D(?:D(?:;|otrahd;)|Jcy;|Scy;|Zcy;|a(?:gger;|rr;|shv;)|c(?:aron;|y;)|el(?:;|ta;)|fr;|i(?:a(?:critical(?:Acute;|Do(?:t;|ubleAcute;)|Grave;|Tilde;)|mond;)|fferentialD;)|o(?:pf;|t(?:;|Dot;|Equal;)|uble(?:ContourIntegral;|Do(?:t;|wnArrow;)|L(?:eft(?:Arrow;|RightArrow;|Tee;)|ong(?:Left(?:Arrow;|RightArrow;)|RightArrow;))|Right(?:Arrow;|Tee;)|Up(?:Arrow;|DownArrow;)|VerticalBar;)|wn(?:Arrow(?:;|Bar;|UpArrow;)|Breve;|Left(?:RightVector;|TeeVector;|Vector(?:;|Bar;))|Right(?:TeeVector;|Vector(?:;|Bar;))|Tee(?:;|Arrow;)|arrow;))|s(?:cr;|trok;))|E(?:NG;|TH;?|acute;?|c(?:aron;|irc;?|y;)|dot;|fr;|grave;?|lement;|m(?:acr;|pty(?:SmallSquare;|VerySmallSquare;))|o(?:gon;|pf;)|psilon;|qu(?:al(?:;|Tilde;)|ilibrium;)|s(?:cr;|im;)|ta;|uml;?|x(?:ists;|ponentialE;))|F(?:cy;|fr;|illed(?:SmallSquare;|VerySmallSquare;)|o(?:pf;|rAll;|uriertrf;)|scr;)|G(?:Jcy;|T;?|amma(?:;|d;)|breve;|c(?:edil;|irc;|y;)|dot;|fr;|g;|opf;|reater(?:Equal(?:;|Less;)|FullEqual;|Greater;|Less;|SlantEqual;|Tilde;)|scr;|t;)|H(?:ARDcy;|a(?:cek;|t;)|circ;|fr;|ilbertSpace;|o(?:pf;|rizontalLine;)|s(?:cr;|trok;)|ump(?:DownHump;|Equal;))|I(?:Ecy;|Jlig;|Ocy;|acute;?|c(?:irc;?|y;)|dot;|fr;|grave;?|m(?:;|a(?:cr;|ginaryI;)|plies;)|n(?:t(?:;|e(?:gral;|rsection;))|visible(?:Comma;|Times;))|o(?:gon;|pf;|ta;)|scr;|tilde;|u(?:kcy;|ml;?))|J(?:c(?:irc;|y;)|fr;|opf;|s(?:cr;|ercy;)|ukcy;)|K(?:Hcy;|Jcy;|appa;|c(?:edil;|y;)|fr;|opf;|scr;)|L(?:Jcy;|T;?|a(?:cute;|mbda;|ng;|placetrf;|rr;)|c(?:aron;|edil;|y;)|e(?:ft(?:A(?:ngleBracket;|rrow(?:;|Bar;|RightArrow;))|Ceiling;|Do(?:ubleBracket;|wn(?:TeeVector;|Vector(?:;|Bar;)))|Floor;|Right(?:Arrow;|Vector;)|T(?:ee(?:;|Arrow;|Vector;)|riangle(?:;|Bar;|Equal;))|Up(?:DownVector;|TeeVector;|Vector(?:;|Bar;))|Vector(?:;|Bar;)|arrow;|rightarrow;)|ss(?:EqualGreater;|FullEqual;|Greater;|Less;|SlantEqual;|Tilde;))|fr;|l(?:;|eftarrow;)|midot;|o(?:ng(?:Left(?:Arrow;|RightArrow;)|RightArrow;|left(?:arrow;|rightarrow;)|rightarrow;)|pf;|wer(?:LeftArrow;|RightArrow;))|s(?:cr;|h;|trok;)|t;)|M(?:ap;|cy;|e(?:diumSpace;|llintrf;)|fr;|inusPlus;|opf;|scr;|u;)|N(?:Jcy;|acute;|c(?:aron;|edil;|y;)|e(?:gative(?:MediumSpace;|Thi(?:ckSpace;|nSpace;)|VeryThinSpace;)|sted(?:GreaterGreater;|LessLess;)|wLine;)|fr;|o(?:Break;|nBreakingSpace;|pf;|t(?:;|C(?:ongruent;|upCap;)|DoubleVerticalBar;|E(?:lement;|qual(?:;|Tilde;)|xists;)|Greater(?:;|Equal;|FullEqual;|Greater;|Less;|SlantEqual;|Tilde;)|Hump(?:DownHump;|Equal;)|Le(?:ftTriangle(?:;|Bar;|Equal;)|ss(?:;|Equal;|Greater;|Less;|SlantEqual;|Tilde;))|Nested(?:GreaterGreater;|LessLess;)|Precedes(?:;|Equal;|SlantEqual;)|R(?:everseElement;|ightTriangle(?:;|Bar;|Equal;))|S(?:quareSu(?:bset(?:;|Equal;)|perset(?:;|Equal;))|u(?:bset(?:;|Equal;)|cceeds(?:;|Equal;|SlantEqual;|Tilde;)|perset(?:;|Equal;)))|Tilde(?:;|Equal;|FullEqual;|Tilde;)|VerticalBar;))|scr;|tilde;?|u;)|O(?:Elig;|acute;?|c(?:irc;?|y;)|dblac;|fr;|grave;?|m(?:acr;|ega;|icron;)|opf;|penCurly(?:DoubleQuote;|Quote;)|r;|s(?:cr;|lash;?)|ti(?:lde;?|mes;)|uml;?|ver(?:B(?:ar;|rac(?:e;|ket;))|Parenthesis;))|P(?:artialD;|cy;|fr;|hi;|i;|lusMinus;|o(?:incareplane;|pf;)|r(?:;|ecedes(?:;|Equal;|SlantEqual;|Tilde;)|ime;|o(?:duct;|portion(?:;|al;)))|s(?:cr;|i;))|Q(?:UOT;?|fr;|opf;|scr;)|R(?:Barr;|EG;?|a(?:cute;|ng;|rr(?:;|tl;))|c(?:aron;|edil;|y;)|e(?:;|verse(?:E(?:lement;|quilibrium;)|UpEquilibrium;))|fr;|ho;|ight(?:A(?:ngleBracket;|rrow(?:;|Bar;|LeftArrow;))|Ceiling;|Do(?:ubleBracket;|wn(?:TeeVector;|Vector(?:;|Bar;)))|Floor;|T(?:ee(?:;|Arrow;|Vector;)|riangle(?:;|Bar;|Equal;))|Up(?:DownVector;|TeeVector;|Vector(?:;|Bar;))|Vector(?:;|Bar;)|arrow;)|o(?:pf;|undImplies;)|rightarrow;|s(?:cr;|h;)|uleDelayed;)|S(?:H(?:CHcy;|cy;)|OFTcy;|acute;|c(?:;|aron;|edil;|irc;|y;)|fr;|hort(?:DownArrow;|LeftArrow;|RightArrow;|UpArrow;)|igma;|mallCircle;|opf;|q(?:rt;|uare(?:;|Intersection;|Su(?:bset(?:;|Equal;)|perset(?:;|Equal;))|Union;))|scr;|tar;|u(?:b(?:;|set(?:;|Equal;))|c(?:ceeds(?:;|Equal;|SlantEqual;|Tilde;)|hThat;)|m;|p(?:;|erset(?:;|Equal;)|set;)))|T(?:HORN;?|RADE;|S(?:Hcy;|cy;)|a(?:b;|u;)|c(?:aron;|edil;|y;)|fr;|h(?:e(?:refore;|ta;)|i(?:ckSpace;|nSpace;))|ilde(?:;|Equal;|FullEqual;|Tilde;)|opf;|ripleDot;|s(?:cr;|trok;))|U(?:a(?:cute;?|rr(?:;|ocir;))|br(?:cy;|eve;)|c(?:irc;?|y;)|dblac;|fr;|grave;?|macr;|n(?:der(?:B(?:ar;|rac(?:e;|ket;))|Parenthesis;)|ion(?:;|Plus;))|o(?:gon;|pf;)|p(?:Arrow(?:;|Bar;|DownArrow;)|DownArrow;|Equilibrium;|Tee(?:;|Arrow;)|arrow;|downarrow;|per(?:LeftArrow;|RightArrow;)|si(?:;|lon;))|ring;|scr;|tilde;|uml;?)|V(?:Dash;|bar;|cy;|dash(?:;|l;)|e(?:e;|r(?:bar;|t(?:;|ical(?:Bar;|Line;|Separator;|Tilde;))|yThinSpace;))|fr;|opf;|scr;|vdash;)|W(?:circ;|edge;|fr;|opf;|scr;)|X(?:fr;|i;|opf;|scr;)|Y(?:Acy;|Icy;|Ucy;|acute;?|c(?:irc;|y;)|fr;|opf;|scr;|uml;)|Z(?:Hcy;|acute;|c(?:aron;|y;)|dot;|e(?:roWidthSpace;|ta;)|fr;|opf;|scr;)|a(?:acute;?|breve;|c(?:;|E;|d;|irc;?|ute;?|y;)|elig;?|f(?:;|r;)|grave;?|l(?:e(?:fsym;|ph;)|pha;)|m(?:a(?:cr;|lg;)|p;?)|n(?:d(?:;|and;|d;|slope;|v;)|g(?:;|e;|le;|msd(?:;|a(?:a;|b;|c;|d;|e;|f;|g;|h;))|rt(?:;|vb(?:;|d;))|s(?:ph;|t;)|zarr;))|o(?:gon;|pf;)|p(?:;|E;|acir;|e;|id;|os;|prox(?:;|eq;))|ring;?|s(?:cr;|t;|ymp(?:;|eq;))|tilde;?|uml;?|w(?:conint;|int;))|b(?:Not;|a(?:ck(?:cong;|epsilon;|prime;|sim(?:;|eq;))|r(?:vee;|wed(?:;|ge;)))|brk(?:;|tbrk;)|c(?:ong;|y;)|dquo;|e(?:caus(?:;|e;)|mptyv;|psi;|rnou;|t(?:a;|h;|ween;))|fr;|ig(?:c(?:ap;|irc;|up;)|o(?:dot;|plus;|times;)|s(?:qcup;|tar;)|triangle(?:down;|up;)|uplus;|vee;|wedge;)|karow;|l(?:a(?:ck(?:lozenge;|square;|triangle(?:;|down;|left;|right;))|nk;)|k(?:1(?:2;|4;)|34;)|ock;)|n(?:e(?:;|quiv;)|ot;)|o(?:pf;|t(?:;|tom;)|wtie;|x(?:D(?:L;|R;|l;|r;)|H(?:;|D;|U;|d;|u;)|U(?:L;|R;|l;|r;)|V(?:;|H;|L;|R;|h;|l;|r;)|box;|d(?:L;|R;|l;|r;)|h(?:;|D;|U;|d;|u;)|minus;|plus;|times;|u(?:L;|R;|l;|r;)|v(?:;|H;|L;|R;|h;|l;|r;)))|prime;|r(?:eve;|vbar;?)|s(?:cr;|emi;|im(?:;|e;)|ol(?:;|b;|hsub;))|u(?:ll(?:;|et;)|mp(?:;|E;|e(?:;|q;))))|c(?:a(?:cute;|p(?:;|and;|brcup;|c(?:ap;|up;)|dot;|s;)|r(?:et;|on;))|c(?:a(?:ps;|ron;)|edil;?|irc;|ups(?:;|sm;))|dot;|e(?:dil;?|mptyv;|nt(?:;|erdot;|))|fr;|h(?:cy;|eck(?:;|mark;)|i;)|ir(?:;|E;|c(?:;|eq;|le(?:arrow(?:left;|right;)|d(?:R;|S;|ast;|circ;|dash;)))|e;|fnint;|mid;|scir;)|lubs(?:;|uit;)|o(?:lon(?:;|e(?:;|q;))|m(?:ma(?:;|t;)|p(?:;|fn;|le(?:ment;|xes;)))|n(?:g(?:;|dot;)|int;)|p(?:f;|rod;|y(?:;|sr;|)))|r(?:arr;|oss;)|s(?:cr;|u(?:b(?:;|e;)|p(?:;|e;)))|tdot;|u(?:darr(?:l;|r;)|e(?:pr;|sc;)|larr(?:;|p;)|p(?:;|brcap;|c(?:ap;|up;)|dot;|or;|s;)|r(?:arr(?:;|m;)|ly(?:eq(?:prec;|succ;)|vee;|wedge;)|ren;?|vearrow(?:left;|right;))|vee;|wed;)|w(?:conint;|int;)|ylcty;)|d(?:Arr;|Har;|a(?:gger;|leth;|rr;|sh(?:;|v;))|b(?:karow;|lac;)|c(?:aron;|y;)|d(?:;|a(?:gger;|rr;)|otseq;)|e(?:g;?|lta;|mptyv;)|f(?:isht;|r;)|har(?:l;|r;)|i(?:am(?:;|ond(?:;|suit;)|s;)|e;|gamma;|sin;|v(?:;|ide(?:;|ontimes;|)|onx;))|jcy;|lc(?:orn;|rop;)|o(?:llar;|pf;|t(?:;|eq(?:;|dot;)|minus;|plus;|square;)|ublebarwedge;|wn(?:arrow;|downarrows;|harpoon(?:left;|right;)))|r(?:bkarow;|c(?:orn;|rop;))|s(?:c(?:r;|y;)|ol;|trok;)|t(?:dot;|ri(?:;|f;))|u(?:arr;|har;)|wangle;|z(?:cy;|igrarr;))|e(?:D(?:Dot;|ot;)|a(?:cute;?|ster;)|c(?:aron;|ir(?:;|c;?)|olon;|y;)|dot;|e;|f(?:Dot;|r;)|g(?:;|rave;?|s(?:;|dot;))|l(?:;|inters;|l;|s(?:;|dot;))|m(?:acr;|pty(?:;|set;|v;)|sp(?:1(?:3;|4;)|;))|n(?:g;|sp;)|o(?:gon;|pf;)|p(?:ar(?:;|sl;)|lus;|si(?:;|lon;|v;))|q(?:c(?:irc;|olon;)|s(?:im;|lant(?:gtr;|less;))|u(?:als;|est;|iv(?:;|DD;))|vparsl;)|r(?:Dot;|arr;)|s(?:cr;|dot;|im;)|t(?:a;|h;?)|u(?:ml;?|ro;)|x(?:cl;|ist;|p(?:ectation;|onentiale;)))|f(?:allingdotseq;|cy;|emale;|f(?:ilig;|l(?:ig;|lig;)|r;)|ilig;|jlig;|l(?:at;|lig;|tns;)|nof;|o(?:pf;|r(?:all;|k(?:;|v;)))|partint;|r(?:a(?:c(?:1(?:2;?|3;|4;?|5;|6;|8;)|2(?:3;|5;)|3(?:4;?|5;|8;)|45;|5(?:6;|8;)|78;)|sl;)|own;)|scr;)|g(?:E(?:;|l;)|a(?:cute;|mma(?:;|d;)|p;)|breve;|c(?:irc;|y;)|dot;|e(?:;|l;|q(?:;|q;|slant;)|s(?:;|cc;|dot(?:;|o(?:;|l;))|l(?:;|es;)))|fr;|g(?:;|g;)|imel;|jcy;|l(?:;|E;|a;|j;)|n(?:E;|ap(?:;|prox;)|e(?:;|q(?:;|q;))|sim;)|opf;|rave;|s(?:cr;|im(?:;|e;|l;))|t(?:;|c(?:c;|ir;)|dot;|lPar;|quest;|r(?:a(?:pprox;|rr;)|dot;|eq(?:less;|qless;)|less;|sim;)|)|v(?:ertneqq;|nE;))|h(?:Arr;|a(?:irsp;|lf;|milt;|r(?:dcy;|r(?:;|cir;|w;)))|bar;|circ;|e(?:arts(?:;|uit;)|llip;|rcon;)|fr;|ks(?:earow;|warow;)|o(?:arr;|mtht;|ok(?:leftarrow;|rightarrow;)|pf;|rbar;)|s(?:cr;|lash;|trok;)|y(?:bull;|phen;))|i(?:acute;?|c(?:;|irc;?|y;)|e(?:cy;|xcl;?)|f(?:f;|r;)|grave;?|i(?:;|i(?:int;|nt;)|nfin;|ota;)|jlig;|m(?:a(?:cr;|g(?:e;|line;|part;)|th;)|of;|ped;)|n(?:;|care;|fin(?:;|tie;)|odot;|t(?:;|cal;|e(?:gers;|rcal;)|larhk;|prod;))|o(?:cy;|gon;|pf;|ta;)|prod;|quest;?|s(?:cr;|in(?:;|E;|dot;|s(?:;|v;)|v;))|t(?:;|ilde;)|u(?:kcy;|ml;?))|j(?:c(?:irc;|y;)|fr;|math;|opf;|s(?:cr;|ercy;)|ukcy;)|k(?:appa(?:;|v;)|c(?:edil;|y;)|fr;|green;|hcy;|jcy;|opf;|scr;)|l(?:A(?:arr;|rr;|tail;)|Barr;|E(?:;|g;)|Har;|a(?:cute;|emptyv;|gran;|mbda;|ng(?:;|d;|le;)|p;|quo;?|rr(?:;|b(?:;|fs;)|fs;|hk;|lp;|pl;|sim;|tl;)|t(?:;|ail;|e(?:;|s;)))|b(?:arr;|brk;|r(?:ac(?:e;|k;)|k(?:e;|sl(?:d;|u;))))|c(?:aron;|e(?:dil;|il;)|ub;|y;)|d(?:ca;|quo(?:;|r;)|r(?:dhar;|ushar;)|sh;)|e(?:;|ft(?:arrow(?:;|tail;)|harpoon(?:down;|up;)|leftarrows;|right(?:arrow(?:;|s;)|harpoons;|squigarrow;)|threetimes;)|g;|q(?:;|q;|slant;)|s(?:;|cc;|dot(?:;|o(?:;|r;))|g(?:;|es;)|s(?:approx;|dot;|eq(?:gtr;|qgtr;)|gtr;|sim;)))|f(?:isht;|loor;|r;)|g(?:;|E;)|h(?:ar(?:d;|u(?:;|l;))|blk;)|jcy;|l(?:;|arr;|corner;|hard;|tri;)|m(?:idot;|oust(?:;|ache;))|n(?:E;|ap(?:;|prox;)|e(?:;|q(?:;|q;))|sim;)|o(?:a(?:ng;|rr;)|brk;|ng(?:left(?:arrow;|rightarrow;)|mapsto;|rightarrow;)|oparrow(?:left;|right;)|p(?:ar;|f;|lus;)|times;|w(?:ast;|bar;)|z(?:;|enge;|f;))|par(?:;|lt;)|r(?:arr;|corner;|har(?:;|d;)|m;|tri;)|s(?:aquo;|cr;|h;|im(?:;|e;|g;)|q(?:b;|uo(?:;|r;))|trok;)|t(?:;|c(?:c;|ir;)|dot;|hree;|imes;|larr;|quest;|r(?:Par;|i(?:;|e;|f;))|)|ur(?:dshar;|uhar;)|v(?:ertneqq;|nE;))|m(?:DDot;|a(?:cr;?|l(?:e;|t(?:;|ese;))|p(?:;|sto(?:;|down;|left;|up;))|rker;)|c(?:omma;|y;)|dash;|easuredangle;|fr;|ho;|i(?:cro;?|d(?:;|ast;|cir;|dot;?)|nus(?:;|b;|d(?:;|u;)))|l(?:cp;|dr;)|nplus;|o(?:dels;|pf;)|p;|s(?:cr;|tpos;)|u(?:;|ltimap;|map;))|n(?:G(?:g;|t(?:;|v;))|L(?:eft(?:arrow;|rightarrow;)|l;|t(?:;|v;))|Rightarrow;|V(?:Dash;|dash;)|a(?:bla;|cute;|ng;|p(?:;|E;|id;|os;|prox;)|tur(?:;|al(?:;|s;)))|b(?:sp;?|ump(?:;|e;))|c(?:a(?:p;|ron;)|edil;|ong(?:;|dot;)|up;|y;)|dash;|e(?:;|Arr;|ar(?:hk;|r(?:;|ow;))|dot;|quiv;|s(?:ear;|im;)|xist(?:;|s;))|fr;|g(?:E;|e(?:;|q(?:;|q;|slant;)|s;)|sim;|t(?:;|r;))|h(?:Arr;|arr;|par;)|i(?:;|s(?:;|d;)|v;)|jcy;|l(?:Arr;|E;|arr;|dr;|e(?:;|ft(?:arrow;|rightarrow;)|q(?:;|q;|slant;)|s(?:;|s;))|sim;|t(?:;|ri(?:;|e;)))|mid;|o(?:pf;|t(?:;|in(?:;|E;|dot;|v(?:a;|b;|c;))|ni(?:;|v(?:a;|b;|c;))|))|p(?:ar(?:;|allel;|sl;|t;)|olint;|r(?:;|cue;|e(?:;|c(?:;|eq;))))|r(?:Arr;|arr(?:;|c;|w;)|ightarrow;|tri(?:;|e;))|s(?:c(?:;|cue;|e;|r;)|hort(?:mid;|parallel;)|im(?:;|e(?:;|q;))|mid;|par;|qsu(?:be;|pe;)|u(?:b(?:;|E;|e;|set(?:;|eq(?:;|q;)))|cc(?:;|eq;)|p(?:;|E;|e;|set(?:;|eq(?:;|q;)))))|t(?:gl;|ilde;?|lg;|riangle(?:left(?:;|eq;)|right(?:;|eq;)))|u(?:;|m(?:;|ero;|sp;))|v(?:Dash;|Harr;|ap;|dash;|g(?:e;|t;)|infin;|l(?:Arr;|e;|t(?:;|rie;))|r(?:Arr;|trie;)|sim;)|w(?:Arr;|ar(?:hk;|r(?:;|ow;))|near;))|o(?:S;|a(?:cute;?|st;)|c(?:ir(?:;|c;?)|y;)|d(?:ash;|blac;|iv;|ot;|sold;)|elig;|f(?:cir;|r;)|g(?:on;|rave;?|t;)|h(?:bar;|m;)|int;|l(?:arr;|c(?:ir;|ross;)|ine;|t;)|m(?:acr;|ega;|i(?:cron;|d;|nus;))|opf;|p(?:ar;|erp;|lus;)|r(?:;|arr;|d(?:;|er(?:;|of;)|f;?|m;?)|igof;|or;|slope;|v;)|s(?:cr;|lash;?|ol;)|ti(?:lde;?|mes(?:;|as;))|uml;?|vbar;)|p(?:ar(?:;|a(?:;|llel;|)|s(?:im;|l;)|t;)|cy;|er(?:cnt;|iod;|mil;|p;|tenk;)|fr;|h(?:i(?:;|v;)|mmat;|one;)|i(?:;|tchfork;|v;)|l(?:an(?:ck(?:;|h;)|kv;)|us(?:;|acir;|b;|cir;|d(?:o;|u;)|e;|mn;?|sim;|two;))|m;|o(?:intint;|pf;|und;?)|r(?:;|E;|ap;|cue;|e(?:;|c(?:;|approx;|curlyeq;|eq;|n(?:approx;|eqq;|sim;)|sim;))|ime(?:;|s;)|n(?:E;|ap;|sim;)|o(?:d;|f(?:alar;|line;|surf;)|p(?:;|to;))|sim;|urel;)|s(?:cr;|i;)|uncsp;)|q(?:fr;|int;|opf;|prime;|scr;|u(?:at(?:ernions;|int;)|est(?:;|eq;)|ot;?))|r(?:A(?:arr;|rr;|tail;)|Barr;|Har;|a(?:c(?:e;|ute;)|dic;|emptyv;|ng(?:;|d;|e;|le;)|quo;?|rr(?:;|ap;|b(?:;|fs;)|c;|fs;|hk;|lp;|pl;|sim;|tl;|w;)|t(?:ail;|io(?:;|nals;)))|b(?:arr;|brk;|r(?:ac(?:e;|k;)|k(?:e;|sl(?:d;|u;))))|c(?:aron;|e(?:dil;|il;)|ub;|y;)|d(?:ca;|ldhar;|quo(?:;|r;)|sh;)|e(?:al(?:;|ine;|part;|s;)|ct;|g;?)|f(?:isht;|loor;|r;)|h(?:ar(?:d;|u(?:;|l;))|o(?:;|v;))|i(?:ght(?:arrow(?:;|tail;)|harpoon(?:down;|up;)|left(?:arrows;|harpoons;)|rightarrows;|squigarrow;|threetimes;)|ng;|singdotseq;)|l(?:arr;|har;|m;)|moust(?:;|ache;)|nmid;|o(?:a(?:ng;|rr;)|brk;|p(?:ar;|f;|lus;)|times;)|p(?:ar(?:;|gt;)|polint;)|rarr;|s(?:aquo;|cr;|h;|q(?:b;|uo(?:;|r;)))|t(?:hree;|imes;|ri(?:;|e;|f;|ltri;))|uluhar;|x;)|s(?:acute;|bquo;|c(?:;|E;|a(?:p;|ron;)|cue;|e(?:;|dil;)|irc;|n(?:E;|ap;|sim;)|polint;|sim;|y;)|dot(?:;|b;|e;)|e(?:Arr;|ar(?:hk;|r(?:;|ow;))|ct;?|mi;|swar;|tm(?:inus;|n;)|xt;)|fr(?:;|own;)|h(?:arp;|c(?:hcy;|y;)|ort(?:mid;|parallel;)|y;?)|i(?:gma(?:;|f;|v;)|m(?:;|dot;|e(?:;|q;)|g(?:;|E;)|l(?:;|E;)|ne;|plus;|rarr;))|larr;|m(?:a(?:llsetminus;|shp;)|eparsl;|i(?:d;|le;)|t(?:;|e(?:;|s;)))|o(?:ftcy;|l(?:;|b(?:;|ar;))|pf;)|pa(?:des(?:;|uit;)|r;)|q(?:c(?:ap(?:;|s;)|up(?:;|s;))|su(?:b(?:;|e;|set(?:;|eq;))|p(?:;|e;|set(?:;|eq;)))|u(?:;|ar(?:e;|f;)|f;))|rarr;|s(?:cr;|etmn;|mile;|tarf;)|t(?:ar(?:;|f;)|r(?:aight(?:epsilon;|phi;)|ns;))|u(?:b(?:;|E;|dot;|e(?:;|dot;)|mult;|n(?:E;|e;)|plus;|rarr;|s(?:et(?:;|eq(?:;|q;)|neq(?:;|q;))|im;|u(?:b;|p;)))|cc(?:;|approx;|curlyeq;|eq;|n(?:approx;|eqq;|sim;)|sim;)|m;|ng;|p(?:1;?|2;?|3;?|;|E;|d(?:ot;|sub;)|e(?:;|dot;)|hs(?:ol;|ub;)|larr;|mult;|n(?:E;|e;)|plus;|s(?:et(?:;|eq(?:;|q;)|neq(?:;|q;))|im;|u(?:b;|p;))))|w(?:Arr;|ar(?:hk;|r(?:;|ow;))|nwar;)|zlig;?)|t(?:a(?:rget;|u;)|brk;|c(?:aron;|edil;|y;)|dot;|elrec;|fr;|h(?:e(?:re(?:4;|fore;)|ta(?:;|sym;|v;))|i(?:ck(?:approx;|sim;)|nsp;)|k(?:ap;|sim;)|orn;?)|i(?:lde;|mes(?:;|b(?:;|ar;)|d;|)|nt;)|o(?:ea;|p(?:;|bot;|cir;|f(?:;|ork;))|sa;)|prime;|r(?:ade;|i(?:angle(?:;|down;|left(?:;|eq;)|q;|right(?:;|eq;))|dot;|e;|minus;|plus;|sb;|time;)|pezium;)|s(?:c(?:r;|y;)|hcy;|trok;)|w(?:ixt;|ohead(?:leftarrow;|rightarrow;)))|u(?:Arr;|Har;|a(?:cute;?|rr;)|br(?:cy;|eve;)|c(?:irc;?|y;)|d(?:arr;|blac;|har;)|f(?:isht;|r;)|grave;?|h(?:ar(?:l;|r;)|blk;)|l(?:c(?:orn(?:;|er;)|rop;)|tri;)|m(?:acr;|l;?)|o(?:gon;|pf;)|p(?:arrow;|downarrow;|harpoon(?:left;|right;)|lus;|si(?:;|h;|lon;)|uparrows;)|r(?:c(?:orn(?:;|er;)|rop;)|ing;|tri;)|scr;|t(?:dot;|ilde;|ri(?:;|f;))|u(?:arr;|ml;?)|wangle;)|v(?:Arr;|Bar(?:;|v;)|Dash;|a(?:ngrt;|r(?:epsilon;|kappa;|nothing;|p(?:hi;|i;|ropto;)|r(?:;|ho;)|s(?:igma;|u(?:bsetneq(?:;|q;)|psetneq(?:;|q;)))|t(?:heta;|riangle(?:left;|right;))))|cy;|dash;|e(?:e(?:;|bar;|eq;)|llip;|r(?:bar;|t;))|fr;|ltri;|nsu(?:b;|p;)|opf;|prop;|rtri;|s(?:cr;|u(?:bn(?:E;|e;)|pn(?:E;|e;)))|zigzag;)|w(?:circ;|e(?:d(?:bar;|ge(?:;|q;))|ierp;)|fr;|opf;|p;|r(?:;|eath;)|scr;)|x(?:c(?:ap;|irc;|up;)|dtri;|fr;|h(?:Arr;|arr;)|i;|l(?:Arr;|arr;)|map;|nis;|o(?:dot;|p(?:f;|lus;)|time;)|r(?:Arr;|arr;)|s(?:cr;|qcup;)|u(?:plus;|tri;)|vee;|wedge;)|y(?:ac(?:ute;?|y;)|c(?:irc;|y;)|en;?|fr;|icy;|opf;|scr;|u(?:cy;|ml;?))|z(?:acute;|c(?:aron;|y;)|dot;|e(?:etrf;|ta;)|fr;|hcy;|igrarr;|opf;|scr;|w(?:j;|nj;)))|[\s\S]/g,uUe=32,dUe=/[^\r"&\u0000]+/g,fUe=/[^\r'&\u0000]+/g,hUe=/[^\r\t\n\f &>\u0000]+/g,gUe=/[^\r\t\n\f \/>A-Z\u0000]+/g,pUe=/[^\r\t\n\f \/=>A-Z\u0000]+/g,AUe=/[^\]\r\u0000\uffff]*/g,mUe=/[^&<\r\u0000\uffff]*/g,Jj=/[^<\r\u0000\uffff]*/g,yUe=/[^\r\u0000\uffff]*/g,jj=/(?:(\/)?([a-z]+)>)|[\s\S]/g,Zj=/(?:([-a-z]+)[ \t\n\f]*=[ \t\n\f]*('[^'&\r\u0000]*'|"[^"&\r\u0000]*"|[^\t\n\r\f "&'\u0000>][^&> \t\n\r\f\u0000]*[ \t\n\f]))|[\s\S]/g,jS=/[^\x09\x0A\x0C\x0D\x20]/,IU=/[^\x09\x0A\x0C\x0D\x20]/g,CUe=/[^\x00\x09\x0A\x0C\x0D\x20]/,hp=/^[\x09\x0A\x0C\x0D\x20]+/,ZS=/\x00/g;function Hs(e){var t=16384;if(e.length<t)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<e.length;n+=t)r+=String.fromCharCode.apply(String,e.slice(n,n+t));return r}function vUe(e){for(var t=[],r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}function Xr(e,t){if(typeof t=="string")return e.namespaceURI===at.HTML&&e.localName===t;var r=t[e.namespaceURI];return r&&r[e.localName]}function Xj(e){return Xr(e,u7)}function e7(e){if(Xr(e,d7))return!0;if(e.namespaceURI===at.MATHML&&e.localName==="annotation-xml"){var t=e.getAttribute("encoding");if(t&&(t=t.toLowerCase()),t==="text/html"||t==="application/xhtml+xml")return!0}return!1}function EUe(e){return e in Yj?Yj[e]:e}function t7(e){for(var t=0,r=e.length;t<r;t++)e[t][0]in $j&&(e[t][0]=$j[e[t][0]])}function r7(e){for(var t=0,r=e.length;t<r;t++)if(e[t][0]==="definitionurl"){e[t][0]="definitionURL";break}}function SU(e){for(var t=0,r=e.length;t<r;t++)e[t][0]in Gj&&e[t].push(Gj[e[t][0]])}function n7(e,t){for(var r=0,n=e.length;r<n;r++){var i=e[r][0],s=e[r][1];t.hasAttribute(i)||t._setAttribute(i,s)}}Br.ElementStack=function(){this.elements=[],this.top=null};Br.ElementStack.prototype.push=function(e){this.elements.push(e),this.top=e};Br.ElementStack.prototype.pop=function(e){this.elements.pop(),this.top=this.elements[this.elements.length-1]};Br.ElementStack.prototype.popTag=function(e){for(var t=this.elements.length-1;t>0;t--){var r=this.elements[t];if(Xr(r,e))break}this.elements.length=t,this.top=this.elements[t-1]};Br.ElementStack.prototype.popElementType=function(e){for(var t=this.elements.length-1;t>0&&!(this.elements[t]instanceof e);t--);this.elements.length=t,this.top=this.elements[t-1]};Br.ElementStack.prototype.popElement=function(e){for(var t=this.elements.length-1;t>0&&this.elements[t]!==e;t--);this.elements.length=t,this.top=this.elements[t-1]};Br.ElementStack.prototype.removeElement=function(e){if(this.top===e)this.pop();else{var t=this.elements.lastIndexOf(e);t!==-1&&this.elements.splice(t,1)}};Br.ElementStack.prototype.clearToContext=function(e){for(var t=this.elements.length-1;t>0&&!Xr(this.elements[t],e);t--);this.elements.length=t+1,this.top=this.elements[t]};Br.ElementStack.prototype.contains=function(e){return this.inSpecificScope(e,Object.create(null))};Br.ElementStack.prototype.inSpecificScope=function(e,t){for(var r=this.elements.length-1;r>=0;r--){var n=this.elements[r];if(Xr(n,e))return!0;if(Xr(n,t))return!1}return!1};Br.ElementStack.prototype.elementInSpecificScope=function(e,t){for(var r=this.elements.length-1;r>=0;r--){var n=this.elements[r];if(n===e)return!0;if(Xr(n,t))return!1}return!1};Br.ElementStack.prototype.elementTypeInSpecificScope=function(e,t){for(var r=this.elements.length-1;r>=0;r--){var n=this.elements[r];if(n instanceof e)return!0;if(Xr(n,t))return!1}return!1};Br.ElementStack.prototype.inScope=function(e){return this.inSpecificScope(e,iu)};Br.ElementStack.prototype.elementInScope=function(e){return this.elementInSpecificScope(e,iu)};Br.ElementStack.prototype.elementTypeInScope=function(e){return this.elementTypeInSpecificScope(e,iu)};Br.ElementStack.prototype.inButtonScope=function(e){return this.inSpecificScope(e,TU)};Br.ElementStack.prototype.inListItemScope=function(e){return this.inSpecificScope(e,tB)};Br.ElementStack.prototype.inTableScope=function(e){return this.inSpecificScope(e,c7)};Br.ElementStack.prototype.inSelectScope=function(e){for(var t=this.elements.length-1;t>=0;t--){var r=this.elements[t];if(r.namespaceURI!==at.HTML)return!1;var n=r.localName;if(n===e)return!0;if(n!=="optgroup"&&n!=="option")return!1}return!1};Br.ElementStack.prototype.generateImpliedEndTags=function(e,t){for(var r=t?a7:o7,n=this.elements.length-1;n>=0;n--){var i=this.elements[n];if(e&&Xr(i,e)||!Xr(this.elements[n],r))break}this.elements.length=n+1,this.top=this.elements[n]};Br.ActiveFormattingElements=function(){this.list=[],this.attrs=[]};Br.ActiveFormattingElements.prototype.MARKER={localName:"|"};Br.ActiveFormattingElements.prototype.insertMarker=function(){this.list.push(this.MARKER),this.attrs.push(this.MARKER)};Br.ActiveFormattingElements.prototype.push=function(e,t){for(var r=0,n=this.list.length-1;n>=0&&this.list[n]!==this.MARKER;n--)if(o(e,this.list[n],this.attrs[n])&&(r++,r===3)){this.list.splice(n,1),this.attrs.splice(n,1);break}this.list.push(e);for(var i=[],s=0;s<t.length;s++)i[s]=t[s];this.attrs.push(i);function o(a,l,c){if(a.localName!==l.localName||a._numattrs!==c.length)return!1;for(var u=0,f=c.length;u<f;u++){var p=c[u][0],g=c[u][1];if(!a.hasAttribute(p)||a.getAttribute(p)!==g)return!1}return!0}};Br.ActiveFormattingElements.prototype.clearToMarker=function(){for(var e=this.list.length-1;e>=0&&this.list[e]!==this.MARKER;e--);e<0&&(e=0),this.list.length=e,this.attrs.length=e};Br.ActiveFormattingElements.prototype.findElementByTag=function(e){for(var t=this.list.length-1;t>=0;t--){var r=this.list[t];if(r===this.MARKER)break;if(r.localName===e)return r}return null};Br.ActiveFormattingElements.prototype.indexOf=function(e){return this.list.lastIndexOf(e)};Br.ActiveFormattingElements.prototype.remove=function(e){var t=this.list.lastIndexOf(e);t!==-1&&(this.list.splice(t,1),this.attrs.splice(t,1))};Br.ActiveFormattingElements.prototype.replace=function(e,t,r){var n=this.list.lastIndexOf(e);n!==-1&&(this.list[n]=t,this.attrs[n]=r)};Br.ActiveFormattingElements.prototype.insertAfter=function(e,t){var r=this.list.lastIndexOf(e);r!==-1&&(this.list.splice(r,0,t),this.attrs.splice(r,0,t))};function Br(e,t,r){var n=null,i=0,s=0,o=!1,a=!1,l=0,c=[],u="",f=!0,p=0,g=Xt,A,y,C="",v="",b=[],w="",B="",F=[],Q=[],W=[],Z=[],$=[],ee=!1,U=Nw,ge=null,Se=[],N=new Br.ElementStack,se=new Br.ActiveFormattingElements,z=t!==void 0,ne=null,Ke=null,It=!0;t&&(It=t.ownerDocument._scripting_enabled),r&&r.scripting_enabled===!1&&(It=!1);var ye=!0,Lt=!1,Zt,Rt,de=[],kr=!1,ir=!1,Lr={document:function(){return He},_asDocumentFragment:function(){for(var _=He.createDocumentFragment(),I=He.firstChild;I.hasChildNodes();)_.appendChild(I.firstChild);return _},pause:function(){p++},resume:function(){p--,this.parse("")},parse:function(_,I,L){var re;return p>0?(u+=_,!0):(l===0?(u&&(_=u+_,u=""),I&&(_+="\uFFFF",o=!0),n=_,i=_.length,s=0,f&&(f=!1,n.charCodeAt(0)===65279&&(s=1)),l++,re=fr(L),u=n.substring(s,i),l--):(l++,c.push(n,i,s),n=_,i=_.length,s=0,fr(),re=!1,u=n.substring(s,i),s=c.pop(),i=c.pop(),n=c.pop(),u&&(n=u+n.substring(s),i=n.length,s=0,u=""),l--),re)}},He=new tUe(!0,e);if(He._parser=Lr,He._scripting_enabled=It,t){if(t.ownerDocument._quirks&&(He._quirks=!0),t.ownerDocument._limitedQuirks&&(He._limitedQuirks=!0),t.namespaceURI===at.HTML)switch(t.localName){case"title":case"textarea":g=Wc;break;case"style":case"xmp":case"iframe":case"noembed":case"noframes":case"script":case"plaintext":g=av;break}var sn=He.createElement("html");He._appendChild(sn),N.push(sn),t instanceof Zr.HTMLTemplateElement&&Se.push(Dg),If();for(var Ur=t;Ur!==null;Ur=Ur.parentElement)if(Ur instanceof Zr.HTMLFormElement){Ke=Ur;break}}function fr(_){for(var I,L,re,oe;s<i;){if(p>0||_&&_())return!0;switch(typeof g.lookahead){case"undefined":if(I=n.charCodeAt(s++),a&&(a=!1,I===10)){s++;continue}switch(I){case 13:s<i?n.charCodeAt(s)===10&&s++:a=!0,g(10);break;case 65535:if(o&&s===i){g(JS);break}default:g(I);break}break;case"number":I=n.charCodeAt(s);var De=g.lookahead,st=!0;if(De<0&&(st=!1,De=-De),De<i-s)L=st?n.substring(s,s+De):null,oe=!1;else if(o)L=st?n.substring(s,i):null,oe=!0,I===65535&&s===i-1&&(I=JS);else return!0;g(I,L,oe);break;case"string":I=n.charCodeAt(s),re=g.lookahead;var Ht=n.indexOf(re,s);if(Ht!==-1)L=n.substring(s,Ht+re.length),oe=!1;else{if(!o)return!0;L=n.substring(s,i),I===65535&&s===i-1&&(I=JS),oe=!0}g(I,L,oe);break}}return!1}function be(_,I){for(var L=0;L<$.length;L++)if($[L][0]===_)return;I!==void 0?$.push([_,I]):$.push([_])}function Fr(){Zj.lastIndex=s-1;var _=Zj.exec(n);if(!_)throw new Error("should never happen");var I=_[1];if(!I)return!1;var L=_[2],re=L.length;switch(L[0]){case'"':case"'":L=L.substring(1,re-1),s+=_[0].length-1,g=YA;break;default:g=to,s+=_[0].length-1,L=L.substring(0,re-1);break}for(var oe=0;oe<$.length;oe++)if($[oe][0]===I)return!0;return $.push([I,L]),!0}function fe(){ee=!1,C="",$.length=0}function Ee(){ee=!0,C="",$.length=0}function bt(){b.length=0}function ln(){w=""}function _n(){B=""}function _i(){F.length=0}function eo(){Q.length=0,W=null,Z=null}function id(){W=[]}function Hc(){Z=[]}function sr(){Lt=!0}function e2(){return N.top&&N.top.namespaceURI!=="http://www.w3.org/1999/xhtml"}function Yi(_){return v===_}function ca(){if(de.length>0){var _=Hs(de);if(de.length=0,ir&&(ir=!1,_[0]===`
`&&(_=_.substring(1)),_.length===0))return;wn(Jm,_),kr=!1}ir=!1}function sd(_){_.lastIndex=s-1;var I=_.exec(n);if(I&&I.index===s-1)return I=I[0],s+=I.length-1,o&&s===i&&(I=I.slice(0,-1),s--),I;throw new Error("should never happen")}function od(_){_.lastIndex=s-1;var I=_.exec(n)[0];return I?(tv(I),s+=I.length-1,!0):!1}function tv(_){de.length>0&&ca(),!(ir&&(ir=!1,_[0]===`
`&&(_=_.substring(1)),_.length===0))&&wn(Jm,_)}function ua(){if(ee)wn(ar,C);else{var _=C;C="",v=_,wn(Vs,_,$)}}function rv(){if(s===i)return!1;jj.lastIndex=s;var _=jj.exec(n);if(!_)throw new Error("should never happen");var I=_[2];if(!I)return!1;var L=_[1];return L?(s+=I.length+2,wn(ar,I)):(s+=I.length+1,v=I,wn(Vs,I,iUe)),!0}function nv(){ee?wn(ar,C,null,!0):wn(Vs,C,$,!0)}function Cr(){wn(nUe,Hs(Q),W?Hs(W):void 0,Z?Hs(Z):void 0)}function St(){ca(),U(JS),He.modclock=1}var wn=Lr.insertToken=function(I,L,re,oe){ca();var De=N.top;!De||De.namespaceURI===at.HTML?U(I,L,re,oe):I!==Vs&&I!==Jm?fd(I,L,re,oe):Xj(De)&&(I===Jm||I===Vs&&L!=="mglyph"&&L!=="malignmark")||I===Vs&&L==="svg"&&De.namespaceURI===at.MATHML&&De.localName==="annotation-xml"||e7(De)?(Rt=!0,U(I,L,re,oe),Rt=!1):fd(I,L,re,oe)};function za(_){var I=N.top;Yl&&Xr(I,jm)?OA(function(L){return L.createComment(_)}):(I instanceof Zr.HTMLTemplateElement&&(I=I.content),I._appendChild(I.ownerDocument.createComment(_)))}function Ja(_){var I=N.top;if(Yl&&Xr(I,jm))OA(function(re){return re.createTextNode(_)});else{I instanceof Zr.HTMLTemplateElement&&(I=I.content);var L=I.lastChild;L&&L.nodeType===wU.TEXT_NODE?L.appendData(_):I._appendChild(I.ownerDocument.createTextNode(_))}}function wg(_,I,L){var re=i7.createElement(_,I,null);if(L)for(var oe=0,De=L.length;oe<De;oe++)re._setAttribute(L[oe][0],L[oe][1]);return re}var Yl=!1;function vt(_,I){var L=UA(function(re){return wg(re,_,I)});return Xr(L,l7)&&(L._form=Ke),L}function UA(_){var I;return Yl&&Xr(N.top,jm)?I=OA(_):N.top instanceof Zr.HTMLTemplateElement?(I=_(N.top.content.ownerDocument),N.top.content._appendChild(I)):(I=_(N.top.ownerDocument),N.top._appendChild(I)),N.push(I),I}function iv(_,I,L){return UA(function(re){var oe=re._createElementNS(_,L,null);if(I)for(var De=0,st=I.length;De<st;De++){var Ht=I[De];Ht.length===2?oe._setAttribute(Ht[0],Ht[1]):oe._setAttributeNS(Ht[2],Ht[0],Ht[1])}return oe})}function fw(_){for(var I=N.elements.length-1;I>=0;I--)if(N.elements[I]instanceof _)return I;return-1}function OA(_){var I,L,re=-1,oe=-1,De;if(re=fw(Zr.HTMLTableElement),oe=fw(Zr.HTMLTemplateElement),oe>=0&&(re<0||oe>re)?I=N.elements[oe]:re>=0&&(I=N.elements[re].parentNode,I?L=N.elements[re]:I=N.elements[re-1]),I||(I=N.elements[0]),I instanceof Zr.HTMLTemplateElement&&(I=I.content),De=_(I.ownerDocument),De.nodeType===wU.TEXT_NODE){var st;if(L?st=L.previousSibling:st=I.lastChild,st&&st.nodeType===wU.TEXT_NODE)return st.appendData(De.data),De}return L?I.insertBefore(De,L):I._appendChild(De),De}function If(){for(var _=!1,I=N.elements.length-1;I>=0;I--){var L=N.elements[I];if(I===0&&(_=!0,z&&(L=t)),L.namespaceURI===at.HTML){var re=L.localName;switch(re){case"select":for(var oe=I;oe>0;){var De=N.elements[--oe];if(De instanceof Zr.HTMLTemplateElement)break;if(De instanceof Zr.HTMLTableElement){U=JA;return}}U=fa;return;case"tr":U=Jr;return;case"tbody":case"tfoot":case"thead":U=zl;return;case"caption":U=Za;return;case"colgroup":U=dd;return;case"table":U=Do;return;case"template":U=Se[Se.length-1];return;case"body":U=it;return;case"frameset":U=vv;return;case"html":ne===null?U=Bg:U=As;return;default:if(!_){if(re==="head"){U=In;return}if(re==="td"||re==="th"){U=ro;return}}}}if(_){U=it;return}}}function qA(_,I){vt(_,I),g=Ig,ge=U,U=ms}function t2(_,I){vt(_,I),g=Wc,ge=U,U=ms}function sv(_,I){return{elt:wg(_,se.list[I].localName,se.attrs[I]),attrs:se.attrs[I]}}function Mi(){if(se.list.length!==0){var _=se.list[se.list.length-1];if(_!==se.MARKER&&N.elements.lastIndexOf(_)===-1){for(var I=se.list.length-2;I>=0&&(_=se.list[I],!(_===se.MARKER||N.elements.lastIndexOf(_)!==-1));I--);for(I=I+1;I<se.list.length;I++){var L=UA(function(re){return sv(re,I).elt});se.list[I]=L}}}}var VA={localName:"BM"};function ov(_){if(Xr(N.top,_)&&se.indexOf(N.top)===-1)return N.pop(),!0;for(var I=0;I<8;){I++;var L=se.findElementByTag(_);if(!L)return!1;var re=N.elements.lastIndexOf(L);if(re===-1)return se.remove(L),!0;if(!N.elementInScope(L))return!0;for(var oe=null,De,st=re+1;st<N.elements.length;st++)if(Xr(N.elements[st],gp)){oe=N.elements[st],De=st;break}if(oe){var Ht=N.elements[re-1];se.insertAfter(L,VA);for(var hn=oe,Qi=oe,no=De,Sn,Jl=0;Jl++,hn=N.elements[--no],hn!==L;){if(Sn=se.indexOf(hn),Jl>3&&Sn!==-1&&(se.remove(hn),Sn=-1),Sn===-1){N.removeElement(hn);continue}var To=sv(Ht.ownerDocument,Sn);se.replace(hn,To.elt,To.attrs),N.elements[no]=To.elt,hn=To.elt,Qi===oe&&(se.remove(VA),se.insertAfter(To.elt,VA)),hn._appendChild(Qi),Qi=hn}Yl&&Xr(Ht,jm)?OA(function(){return Qi}):Ht instanceof Zr.HTMLTemplateElement?Ht.content._appendChild(Qi):Ht._appendChild(Qi);for(var Tf=sv(oe.ownerDocument,se.indexOf(L));oe.hasChildNodes();)Tf.elt._appendChild(oe.firstChild);oe._appendChild(Tf.elt),se.remove(L),se.replace(VA,Tf.elt,Tf.attrs),N.removeElement(L);var Ow=N.elements.lastIndexOf(oe);N.elements.splice(Ow+1,0,Tf.elt)}else return N.popElement(L),se.remove(L),!0}return!0}function r2(){N.pop(),U=ge}function ad(){delete He._parser,N.elements.length=0,He.defaultView&&He.defaultView.dispatchEvent(new Zr.Event("load",{}))}function je(_,I){g=I,s--}function Xt(_){switch(_){case 38:A=Xt,g=Df;break;case 60:if(rv())break;g=hw;break;case 0:de.push(_),kr=!0;break;case-1:St();break;default:od(mUe)||de.push(_);break}}function Wc(_){switch(_){case 38:A=Wc,g=Df;break;case 60:g=i2;break;case 0:de.push(65533),kr=!0;break;case-1:St();break;default:de.push(_);break}}function Ig(_){switch(_){case 60:g=a2;break;case 0:de.push(65533);break;case-1:St();break;default:od(Jj)||de.push(_);break}}function Gc(_){switch(_){case 60:g=WA;break;case 0:de.push(65533);break;case-1:St();break;default:od(Jj)||de.push(_);break}}function av(_){switch(_){case 0:de.push(65533);break;case-1:St();break;default:od(yUe)||de.push(_);break}}function hw(_){switch(_){case 33:g=ld;break;case 47:g=n2;break;case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:fe(),je(_,gw);break;case 63:je(_,Bf);break;default:de.push(60),je(_,Xt);break}}function n2(_){switch(_){case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:Ee(),je(_,gw);break;case 62:g=Xt;break;case-1:de.push(60),de.push(47),St();break;default:je(_,Bf);break}}function gw(_){switch(_){case 9:case 10:case 12:case 32:g=to;break;case 47:g=ja;break;case 62:g=Xt,ua();break;case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:C+=String.fromCharCode(_+32);break;case 0:C+="\uFFFD";break;case-1:St();break;default:C+=sd(gUe);break}}function i2(_){_===47?(bt(),g=s2):(de.push(60),je(_,Wc))}function s2(_){switch(_){case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:Ee(),je(_,o2);break;default:de.push(60),de.push(47),je(_,Wc);break}}function o2(_){switch(_){case 9:case 10:case 12:case 32:if(Yi(C)){g=to;return}break;case 47:if(Yi(C)){g=ja;return}break;case 62:if(Yi(C)){g=Xt,ua();return}break;case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:C+=String.fromCharCode(_+32),b.push(_);return;case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:C+=String.fromCharCode(_),b.push(_);return;default:break}de.push(60),de.push(47),fp(de,b),je(_,Wc)}function a2(_){_===47?(bt(),g=HA):(de.push(60),je(_,Ig))}function HA(_){switch(_){case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:Ee(),je(_,l2);break;default:de.push(60),de.push(47),je(_,Ig);break}}function l2(_){switch(_){case 9:case 10:case 12:case 32:if(Yi(C)){g=to;return}break;case 47:if(Yi(C)){g=ja;return}break;case 62:if(Yi(C)){g=Xt,ua();return}break;case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:C+=String.fromCharCode(_+32),b.push(_);return;case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:C+=String.fromCharCode(_),b.push(_);return;default:break}de.push(60),de.push(47),fp(de,b),je(_,Ig)}function WA(_){switch(_){case 47:bt(),g=c2;break;case 33:g=d2,de.push(60),de.push(33);break;default:de.push(60),je(_,Gc);break}}function c2(_){switch(_){case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:Ee(),je(_,u2);break;default:de.push(60),de.push(47),je(_,Gc);break}}function u2(_){switch(_){case 9:case 10:case 12:case 32:if(Yi(C)){g=to;return}break;case 47:if(Yi(C)){g=ja;return}break;case 62:if(Yi(C)){g=Xt,ua();return}break;case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:C+=String.fromCharCode(_+32),b.push(_);return;case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:C+=String.fromCharCode(_),b.push(_);return;default:break}de.push(60),de.push(47),fp(de,b),je(_,Gc)}function d2(_){_===45?(g=pw,de.push(45)):je(_,Gc)}function pw(_){_===45?(g=mw,de.push(45)):je(_,Gc)}function da(_){switch(_){case 45:g=Aw,de.push(45);break;case 60:g=lv;break;case 0:de.push(65533);break;case-1:St();break;default:de.push(_);break}}function Aw(_){switch(_){case 45:g=mw,de.push(45);break;case 60:g=lv;break;case 0:g=da,de.push(65533);break;case-1:St();break;default:g=da,de.push(_);break}}function mw(_){switch(_){case 45:de.push(45);break;case 60:g=lv;break;case 62:g=Gc,de.push(62);break;case 0:g=da,de.push(65533);break;case-1:St();break;default:g=da,de.push(_);break}}function lv(_){switch(_){case 47:bt(),g=f2;break;case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:bt(),de.push(60),je(_,yw);break;default:de.push(60),je(_,da);break}}function f2(_){switch(_){case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:Ee(),je(_,h2);break;default:de.push(60),de.push(47),je(_,da);break}}function h2(_){switch(_){case 9:case 10:case 12:case 32:if(Yi(C)){g=to;return}break;case 47:if(Yi(C)){g=ja;return}break;case 62:if(Yi(C)){g=Xt,ua();return}break;case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:C+=String.fromCharCode(_+32),b.push(_);return;case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:C+=String.fromCharCode(_),b.push(_);return;default:break}de.push(60),de.push(47),fp(de,b),je(_,da)}function yw(_){switch(_){case 9:case 10:case 12:case 32:case 47:case 62:Hs(b)==="script"?g=Kl:g=da,de.push(_);break;case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:b.push(_+32),de.push(_);break;case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:b.push(_),de.push(_);break;default:je(_,da);break}}function Kl(_){switch(_){case 45:g=Cw,de.push(45);break;case 60:g=uv,de.push(60);break;case 0:de.push(65533);break;case-1:St();break;default:de.push(_);break}}function Cw(_){switch(_){case 45:g=cv,de.push(45);break;case 60:g=uv,de.push(60);break;case 0:g=Kl,de.push(65533);break;case-1:St();break;default:g=Kl,de.push(_);break}}function cv(_){switch(_){case 45:de.push(45);break;case 60:g=uv,de.push(60);break;case 62:g=Gc,de.push(62);break;case 0:g=Kl,de.push(65533);break;case-1:St();break;default:g=Kl,de.push(_);break}}function uv(_){_===47?(bt(),g=vw,de.push(47)):je(_,Kl)}function vw(_){switch(_){case 9:case 10:case 12:case 32:case 47:case 62:Hs(b)==="script"?g=da:g=Kl,de.push(_);break;case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:b.push(_+32),de.push(_);break;case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:b.push(_),de.push(_);break;default:je(_,Kl);break}}function to(_){switch(_){case 9:case 10:case 12:case 32:break;case 47:g=ja;break;case 62:g=Xt,ua();break;case-1:St();break;case 61:ln(),w+=String.fromCharCode(_),g=GA;break;default:if(Fr())break;ln(),je(_,GA);break}}function GA(_){switch(_){case 9:case 10:case 12:case 32:case 47:case 62:case-1:je(_,g2);break;case 61:g=dv;break;case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:w+=String.fromCharCode(_+32);break;case 0:w+="\uFFFD";break;case 34:case 39:case 60:default:w+=sd(pUe);break}}function g2(_){switch(_){case 9:case 10:case 12:case 32:break;case 47:be(w),g=ja;break;case 61:g=dv;break;case 62:g=Xt,be(w),ua();break;case-1:be(w),St();break;default:be(w),ln(),je(_,GA);break}}function dv(_){switch(_){case 9:case 10:case 12:case 32:break;case 34:_n(),g=Sg;break;case 39:_n(),g=Sf;break;case 62:default:_n(),je(_,$A);break}}function Sg(_){switch(_){case 34:be(w,B),g=YA;break;case 38:A=Sg,g=Df;break;case 0:B+="\uFFFD";break;case-1:St();break;case 10:B+=String.fromCharCode(_);break;default:B+=sd(dUe);break}}function Sf(_){switch(_){case 39:be(w,B),g=YA;break;case 38:A=Sf,g=Df;break;case 0:B+="\uFFFD";break;case-1:St();break;case 10:B+=String.fromCharCode(_);break;default:B+=sd(fUe);break}}function $A(_){switch(_){case 9:case 10:case 12:case 32:be(w,B),g=to;break;case 38:A=$A,g=Df;break;case 62:be(w,B),g=Xt,ua();break;case 0:B+="\uFFFD";break;case-1:s--,g=Xt;break;case 34:case 39:case 60:case 61:case 96:default:B+=sd(hUe);break}}function YA(_){switch(_){case 9:case 10:case 12:case 32:g=to;break;case 47:g=ja;break;case 62:g=Xt,ua();break;case-1:St();break;default:je(_,to);break}}function ja(_){switch(_){case 62:g=Xt,nv(!0);break;case-1:St();break;default:je(_,to);break}}function Bf(_,I,L){var re=I.length;L?s+=re-1:s+=re;var oe=I.substring(0,re-1);oe=oe.replace(/\u0000/g,"\uFFFD"),oe=oe.replace(/\u000D\u000A/g,`
`),oe=oe.replace(/\u000D/g,`
`),wn(nu,oe),g=Xt}Bf.lookahead=">";function ld(_,I,L){if(I[0]==="-"&&I[1]==="-"){s+=2,_i(),g=Ew;return}I.toUpperCase()==="DOCTYPE"?(s+=7,g=Sw):I==="[CDATA["&&e2()?(s+=7,g=pv):g=Bf}ld.lookahead=7;function Ew(_){switch(_i(),_){case 45:g=bw;break;case 62:g=Xt,wn(nu,Hs(F));break;default:je(_,cd);break}}function bw(_){switch(_){case 45:g=KA;break;case 62:g=Xt,wn(nu,Hs(F));break;case-1:wn(nu,Hs(F)),St();break;default:F.push(45),je(_,cd);break}}function cd(_){switch(_){case 60:F.push(_),g=xw;break;case 45:g=fv;break;case 0:F.push(65533);break;case-1:wn(nu,Hs(F)),St();break;default:F.push(_);break}}function xw(_){switch(_){case 33:F.push(_),g=_w;break;case 60:F.push(_);break;default:je(_,cd);break}}function _w(_){switch(_){case 45:g=ww;break;default:je(_,cd);break}}function ww(_){switch(_){case 45:g=Iw;break;default:je(_,fv);break}}function Iw(_){switch(_){case 62:case-1:je(_,KA);break;default:je(_,KA);break}}function fv(_){switch(_){case 45:g=KA;break;case-1:wn(nu,Hs(F)),St();break;default:F.push(45),je(_,cd);break}}function KA(_){switch(_){case 62:g=Xt,wn(nu,Hs(F));break;case 33:g=p2;break;case 45:F.push(45);break;case-1:wn(nu,Hs(F)),St();break;default:F.push(45),F.push(45),je(_,cd);break}}function p2(_){switch(_){case 45:F.push(45),F.push(45),F.push(33),g=fv;break;case 62:g=Xt,wn(nu,Hs(F));break;case-1:wn(nu,Hs(F)),St();break;default:F.push(45),F.push(45),F.push(33),je(_,cd);break}}function Sw(_){switch(_){case 9:case 10:case 12:case 32:g=Bw;break;case-1:eo(),sr(),Cr(),St();break;default:je(_,Bw);break}}function Bw(_){switch(_){case 9:case 10:case 12:case 32:break;case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:eo(),Q.push(_+32),g=hv;break;case 0:eo(),Q.push(65533),g=hv;break;case 62:eo(),sr(),g=Xt,Cr();break;case-1:eo(),sr(),Cr(),St();break;default:eo(),Q.push(_),g=hv;break}}function hv(_){switch(_){case 9:case 10:case 12:case 32:g=Dw;break;case 62:g=Xt,Cr();break;case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:Q.push(_+32);break;case 0:Q.push(65533);break;case-1:sr(),Cr(),St();break;default:Q.push(_);break}}function Dw(_,I,L){switch(_){case 9:case 10:case 12:case 32:s+=1;break;case 62:g=Xt,s+=1,Cr();break;case-1:sr(),Cr(),St();break;default:I=I.toUpperCase(),I==="PUBLIC"?(s+=6,g=A2):I==="SYSTEM"?(s+=6,g=y2):(sr(),g=$c);break}}Dw.lookahead=6;function A2(_){switch(_){case 9:case 10:case 12:case 32:g=gv;break;case 34:id(),g=Tw;break;case 39:id(),g=Rw;break;case 62:sr(),g=Xt,Cr();break;case-1:sr(),Cr(),St();break;default:sr(),g=$c;break}}function gv(_){switch(_){case 9:case 10:case 12:case 32:break;case 34:id(),g=Tw;break;case 39:id(),g=Rw;break;case 62:sr(),g=Xt,Cr();break;case-1:sr(),Cr(),St();break;default:sr(),g=$c;break}}function Tw(_){switch(_){case 34:g=kw;break;case 0:W.push(65533);break;case 62:sr(),g=Xt,Cr();break;case-1:sr(),Cr(),St();break;default:W.push(_);break}}function Rw(_){switch(_){case 39:g=kw;break;case 0:W.push(65533);break;case 62:sr(),g=Xt,Cr();break;case-1:sr(),Cr(),St();break;default:W.push(_);break}}function kw(_){switch(_){case 9:case 10:case 12:case 32:g=m2;break;case 62:g=Xt,Cr();break;case 34:Hc(),g=Or;break;case 39:Hc(),g=zA;break;case-1:sr(),Cr(),St();break;default:sr(),g=$c;break}}function m2(_){switch(_){case 9:case 10:case 12:case 32:break;case 62:g=Xt,Cr();break;case 34:Hc(),g=Or;break;case 39:Hc(),g=zA;break;case-1:sr(),Cr(),St();break;default:sr(),g=$c;break}}function y2(_){switch(_){case 9:case 10:case 12:case 32:g=fn;break;case 34:Hc(),g=Or;break;case 39:Hc(),g=zA;break;case 62:sr(),g=Xt,Cr();break;case-1:sr(),Cr(),St();break;default:sr(),g=$c;break}}function fn(_){switch(_){case 9:case 10:case 12:case 32:break;case 34:Hc(),g=Or;break;case 39:Hc(),g=zA;break;case 62:sr(),g=Xt,Cr();break;case-1:sr(),Cr(),St();break;default:sr(),g=$c;break}}function Or(_){switch(_){case 34:g=Fw;break;case 0:Z.push(65533);break;case 62:sr(),g=Xt,Cr();break;case-1:sr(),Cr(),St();break;default:Z.push(_);break}}function zA(_){switch(_){case 39:g=Fw;break;case 0:Z.push(65533);break;case 62:sr(),g=Xt,Cr();break;case-1:sr(),Cr(),St();break;default:Z.push(_);break}}function Fw(_){switch(_){case 9:case 10:case 12:case 32:break;case 62:g=Xt,Cr();break;case-1:sr(),Cr(),St();break;default:g=$c;break}}function $c(_){switch(_){case 62:g=Xt,Cr();break;case-1:Cr(),St();break;default:break}}function pv(_){switch(_){case 93:g=C2;break;case-1:St();break;case 0:kr=!0;default:od(AUe)||de.push(_);break}}function C2(_){switch(_){case 93:g=v2;break;default:de.push(93),je(_,pv);break}}function v2(_){switch(_){case 93:de.push(93);break;case 62:ca(),g=Xt;break;default:de.push(93),de.push(93),je(_,pv);break}}function Df(_){switch(bt(),b.push(38),_){case 9:case 10:case 12:case 32:case 60:case 38:case-1:je(_,Yc);break;case 35:b.push(_),g=wi;break;default:je(_,Mw);break}}function Mw(_){zj.lastIndex=s;var I=zj.exec(n);if(!I)throw new Error("should never happen");var L=I[1];if(!L){g=Yc;return}switch(s+=L.length,fp(b,vUe(L)),A){case Sg:case Sf:case $A:if(L[L.length-1]!==";"&&/[=A-Za-z0-9]/.test(n[s])){g=Yc;return}break;default:break}bt();var re=cUe[L];typeof re=="number"?b.push(re):fp(b,re),g=Yc}Mw.lookahead=-uUe;function wi(_){switch(y=0,_){case 120:case 88:b.push(_),g=Av;break;default:je(_,ud);break}}function Av(_){switch(_){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 65:case 66:case 67:case 68:case 69:case 70:case 97:case 98:case 99:case 100:case 101:case 102:je(_,Qw);break;default:je(_,Yc);break}}function ud(_){switch(_){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:je(_,mv);break;default:je(_,Yc);break}}function Qw(_){switch(_){case 65:case 66:case 67:case 68:case 69:case 70:y*=16,y+=_-55;break;case 97:case 98:case 99:case 100:case 101:case 102:y*=16,y+=_-87;break;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:y*=16,y+=_-48;break;case 59:g=ps;break;default:je(_,ps);break}}function mv(_){switch(_){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:y*=10,y+=_-48;break;case 59:g=ps;break;default:je(_,ps);break}}function ps(_){y in Kj?y=Kj[y]:(y>1114111||y>=55296&&y<57344)&&(y=65533),bt(),y<=65535?b.push(y):(y=y-65536,b.push(55296+(y>>10)),b.push(56320+(y&1023))),je(_,Yc)}function Yc(_){switch(A){case Sg:case Sf:case $A:B+=Hs(b);break;default:fp(de,b);break}je(_,A)}function Nw(_,I,L,re){switch(_){case 1:if(I=I.replace(hp,""),I.length===0)return;break;case 4:He._appendChild(He.createComment(I));return;case 5:var oe=I,De=L,st=re;He.appendChild(new rUe(He,oe,De,st)),Lt||oe.toLowerCase()!=="html"||sUe.test(De)||st&&st.toLowerCase()===oUe||st===void 0&&Wj.test(De)?He._quirks=!0:(aUe.test(De)||st!==void 0&&Wj.test(De))&&(He._limitedQuirks=!0),U=yv;return}He._quirks=!0,U=yv,U(_,I,L,re)}function yv(_,I,L,re){var oe;switch(_){case 1:if(I=I.replace(hp,""),I.length===0)return;break;case 5:return;case 4:He._appendChild(He.createComment(I));return;case 2:if(I==="html"){oe=wg(He,I,L),N.push(oe),He.appendChild(oe),U=Bg;return}break;case 3:switch(I){case"html":case"head":case"body":case"br":break;default:return}}oe=wg(He,"html",null),N.push(oe),He.appendChild(oe),U=Bg,U(_,I,L,re)}function Bg(_,I,L,re){switch(_){case 1:if(I=I.replace(hp,""),I.length===0)return;break;case 5:return;case 4:za(I);return;case 2:switch(I){case"html":it(_,I,L,re);return;case"head":var oe=vt(I,L);ne=oe,U=In;return}break;case 3:switch(I){case"html":case"head":case"body":case"br":break;default:return}}Bg(Vs,"head",null),U(_,I,L,re)}function In(_,I,L,re){switch(_){case 1:var oe=I.match(hp);if(oe&&(Ja(oe[0]),I=I.substring(oe[0].length)),I.length===0)return;break;case 4:za(I);return;case 5:return;case 2:switch(I){case"html":it(_,I,L,re);return;case"meta":case"base":case"basefont":case"bgsound":case"link":vt(I,L),N.pop();return;case"title":t2(I,L);return;case"noscript":if(!It){vt(I,L),U=Cv;return}case"noframes":case"style":qA(I,L);return;case"script":UA(function(De){var st=wg(De,I,L);return st._parser_inserted=!0,st._force_async=!1,z&&(st._already_started=!0),ca(),st}),g=Gc,ge=U,U=ms;return;case"template":vt(I,L),se.insertMarker(),ye=!1,U=Dg,Se.push(U);return;case"head":return}break;case 3:switch(I){case"head":N.pop(),U=As;return;case"body":case"html":case"br":break;case"template":if(!N.contains("template"))return;N.generateImpliedEndTags(null,"thorough"),N.popTag("template"),se.clearToMarker(),Se.pop(),If();return;default:return}break}In(ar,"head",null),U(_,I,L,re)}function Cv(_,I,L,re){switch(_){case 5:return;case 4:In(_,I);return;case 1:var oe=I.match(hp);if(oe&&(In(_,oe[0]),I=I.substring(oe[0].length)),I.length===0)return;break;case 2:switch(I){case"html":it(_,I,L,re);return;case"basefont":case"bgsound":case"link":case"meta":case"noframes":case"style":In(_,I,L);return;case"head":case"noscript":return}break;case 3:switch(I){case"noscript":N.pop(),U=In;return;case"br":break;default:return}break}Cv(ar,"noscript",null),U(_,I,L,re)}function As(_,I,L,re){switch(_){case 1:var oe=I.match(hp);if(oe&&(Ja(oe[0]),I=I.substring(oe[0].length)),I.length===0)return;break;case 4:za(I);return;case 5:return;case 2:switch(I){case"html":it(_,I,L,re);return;case"body":vt(I,L),ye=!1,U=it;return;case"frameset":vt(I,L),U=vv;return;case"base":case"basefont":case"bgsound":case"link":case"meta":case"noframes":case"script":case"style":case"template":case"title":N.push(ne),In(Vs,I,L),N.removeElement(ne);return;case"head":return}break;case 3:switch(I){case"template":return In(_,I,L,re);case"body":case"html":case"br":break;default:return}break}As(Vs,"body",null),ye=!0,U(_,I,L,re)}function it(_,I,L,re){var oe,De,st,Ht;switch(_){case 1:if(kr&&(I=I.replace(ZS,""),I.length===0))return;ye&&jS.test(I)&&(ye=!1),Mi(),Ja(I);return;case 5:return;case 4:za(I);return;case-1:if(Se.length)return Dg(_);ad();return;case 2:switch(I){case"html":if(N.contains("template"))return;n7(L,N.elements[0]);return;case"base":case"basefont":case"bgsound":case"link":case"meta":case"noframes":case"script":case"style":case"template":case"title":In(Vs,I,L);return;case"body":if(oe=N.elements[1],!oe||!(oe instanceof Zr.HTMLBodyElement)||N.contains("template"))return;ye=!1,n7(L,oe);return;case"frameset":if(!ye||(oe=N.elements[1],!oe||!(oe instanceof Zr.HTMLBodyElement)))return;for(oe.parentNode&&oe.parentNode.removeChild(oe);!(N.top instanceof Zr.HTMLHtmlElement);)N.pop();vt(I,L),U=vv;return;case"address":case"article":case"aside":case"blockquote":case"center":case"details":case"dialog":case"dir":case"div":case"dl":case"fieldset":case"figcaption":case"figure":case"footer":case"header":case"hgroup":case"main":case"nav":case"ol":case"p":case"section":case"summary":case"ul":N.inButtonScope("p")&&it(ar,"p"),vt(I,L);return;case"menu":N.inButtonScope("p")&&it(ar,"p"),Xr(N.top,"menuitem")&&N.pop(),vt(I,L);return;case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":N.inButtonScope("p")&&it(ar,"p"),N.top instanceof Zr.HTMLHeadingElement&&N.pop(),vt(I,L);return;case"pre":case"listing":N.inButtonScope("p")&&it(ar,"p"),vt(I,L),ir=!0,ye=!1;return;case"form":if(Ke&&!N.contains("template"))return;N.inButtonScope("p")&&it(ar,"p"),Ht=vt(I,L),N.contains("template")||(Ke=Ht);return;case"li":for(ye=!1,De=N.elements.length-1;De>=0;De--){if(st=N.elements[De],st instanceof Zr.HTMLLIElement){it(ar,"li");break}if(Xr(st,gp)&&!Xr(st,BU))break}N.inButtonScope("p")&&it(ar,"p"),vt(I,L);return;case"dd":case"dt":for(ye=!1,De=N.elements.length-1;De>=0;De--){if(st=N.elements[De],Xr(st,s7)){it(ar,st.localName);break}if(Xr(st,gp)&&!Xr(st,BU))break}N.inButtonScope("p")&&it(ar,"p"),vt(I,L);return;case"plaintext":N.inButtonScope("p")&&it(ar,"p"),vt(I,L),g=av;return;case"button":N.inScope("button")?(it(ar,"button"),U(_,I,L,re)):(Mi(),vt(I,L),ye=!1);return;case"a":var hn=se.findElementByTag("a");hn&&(it(ar,I),se.remove(hn),N.removeElement(hn));case"b":case"big":case"code":case"em":case"font":case"i":case"s":case"small":case"strike":case"strong":case"tt":case"u":Mi(),se.push(vt(I,L),L);return;case"nobr":Mi(),N.inScope(I)&&(it(ar,I),Mi()),se.push(vt(I,L),L);return;case"applet":case"marquee":case"object":Mi(),vt(I,L),se.insertMarker(),ye=!1;return;case"table":!He._quirks&&N.inButtonScope("p")&&it(ar,"p"),vt(I,L),ye=!1,U=Do;return;case"area":case"br":case"embed":case"img":case"keygen":case"wbr":Mi(),vt(I,L),N.pop(),ye=!1;return;case"input":Mi(),Ht=vt(I,L),N.pop();var Qi=Ht.getAttribute("type");(!Qi||Qi.toLowerCase()!=="hidden")&&(ye=!1);return;case"param":case"source":case"track":vt(I,L),N.pop();return;case"hr":N.inButtonScope("p")&&it(ar,"p"),Xr(N.top,"menuitem")&&N.pop(),vt(I,L),N.pop(),ye=!1;return;case"image":it(Vs,"img",L,re);return;case"textarea":vt(I,L),ir=!0,ye=!1,g=Wc,ge=U,U=ms;return;case"xmp":N.inButtonScope("p")&&it(ar,"p"),Mi(),ye=!1,qA(I,L);return;case"iframe":ye=!1,qA(I,L);return;case"noembed":qA(I,L);return;case"select":Mi(),vt(I,L),ye=!1,U===Do||U===Za||U===zl||U===Jr||U===ro?U=JA:U=fa;return;case"optgroup":case"option":N.top instanceof Zr.HTMLOptionElement&&it(ar,"option"),Mi(),vt(I,L);return;case"menuitem":Xr(N.top,"menuitem")&&N.pop(),Mi(),vt(I,L);return;case"rb":case"rtc":N.inScope("ruby")&&N.generateImpliedEndTags(),vt(I,L);return;case"rp":case"rt":N.inScope("ruby")&&N.generateImpliedEndTags("rtc"),vt(I,L);return;case"math":Mi(),r7(L),SU(L),iv(I,L,at.MATHML),re&&N.pop();return;case"svg":Mi(),t7(L),SU(L),iv(I,L,at.SVG),re&&N.pop();return;case"caption":case"col":case"colgroup":case"frame":case"head":case"tbody":case"td":case"tfoot":case"th":case"thead":case"tr":return}Mi(),vt(I,L);return;case 3:switch(I){case"template":In(ar,I,L);return;case"body":if(!N.inScope("body"))return;U=Lw;return;case"html":if(!N.inScope("body"))return;U=Lw,U(_,I,L);return;case"address":case"article":case"aside":case"blockquote":case"button":case"center":case"details":case"dialog":case"dir":case"div":case"dl":case"fieldset":case"figcaption":case"figure":case"footer":case"header":case"hgroup":case"listing":case"main":case"menu":case"nav":case"ol":case"pre":case"section":case"summary":case"ul":if(!N.inScope(I))return;N.generateImpliedEndTags(),N.popTag(I);return;case"form":if(N.contains("template")){if(!N.inScope("form"))return;N.generateImpliedEndTags(),N.popTag("form")}else{var no=Ke;if(Ke=null,!no||!N.elementInScope(no))return;N.generateImpliedEndTags(),N.removeElement(no)}return;case"p":N.inButtonScope(I)?(N.generateImpliedEndTags(I),N.popTag(I)):(it(Vs,I,null),U(_,I,L,re));return;case"li":if(!N.inListItemScope(I))return;N.generateImpliedEndTags(I),N.popTag(I);return;case"dd":case"dt":if(!N.inScope(I))return;N.generateImpliedEndTags(I),N.popTag(I);return;case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":if(!N.elementTypeInScope(Zr.HTMLHeadingElement))return;N.generateImpliedEndTags(),N.popElementType(Zr.HTMLHeadingElement);return;case"sarcasm":break;case"a":case"b":case"big":case"code":case"em":case"font":case"i":case"nobr":case"s":case"small":case"strike":case"strong":case"tt":case"u":var Sn=ov(I);if(Sn)return;break;case"applet":case"marquee":case"object":if(!N.inScope(I))return;N.generateImpliedEndTags(),N.popTag(I),se.clearToMarker();return;case"br":it(Vs,I,null);return}for(De=N.elements.length-1;De>=0;De--)if(st=N.elements[De],Xr(st,I)){N.generateImpliedEndTags(I),N.popElement(st);break}else if(Xr(st,gp))return;return}}function ms(_,I,L,re){switch(_){case 1:Ja(I);return;case-1:N.top instanceof Zr.HTMLScriptElement&&(N.top._already_started=!0),N.pop(),U=ge,U(_);return;case 3:I==="script"?r2():(N.pop(),U=ge);return;default:return}}function Do(_,I,L,re){function oe(st){for(var Ht=0,hn=st.length;Ht<hn;Ht++)if(st[Ht][0]==="type")return st[Ht][1].toLowerCase();return null}switch(_){case 1:if(Rt){it(_,I,L,re);return}else if(Xr(N.top,jm)){Zt=[],ge=U,U=Pw,U(_,I,L,re);return}break;case 4:za(I);return;case 5:return;case 2:switch(I){case"caption":N.clearToContext(XS),se.insertMarker(),vt(I,L),U=Za;return;case"colgroup":N.clearToContext(XS),vt(I,L),U=dd;return;case"col":Do(Vs,"colgroup",null),U(_,I,L,re);return;case"tbody":case"tfoot":case"thead":N.clearToContext(XS),vt(I,L),U=zl;return;case"td":case"th":case"tr":Do(Vs,"tbody",null),U(_,I,L,re);return;case"table":if(!N.inTableScope(I))return;Do(ar,I),U(_,I,L,re);return;case"style":case"script":case"template":In(_,I,L,re);return;case"input":var De=oe(L);if(De!=="hidden")break;vt(I,L),N.pop();return;case"form":if(Ke||N.contains("template"))return;Ke=vt(I,L),N.popElement(Ke);return}break;case 3:switch(I){case"table":if(!N.inTableScope(I))return;N.popTag(I),If();return;case"body":case"caption":case"col":case"colgroup":case"html":case"tbody":case"td":case"tfoot":case"th":case"thead":case"tr":return;case"template":In(_,I,L,re);return}break;case-1:it(_,I,L,re);return}Yl=!0,it(_,I,L,re),Yl=!1}function Pw(_,I,L,re){if(_===Jm){if(kr&&(I=I.replace(ZS,""),I.length===0))return;Zt.push(I)}else{var oe=Zt.join("");Zt.length=0,jS.test(oe)?(Yl=!0,it(Jm,oe),Yl=!1):Ja(oe),U=ge,U(_,I,L,re)}}function Za(_,I,L,re){function oe(){return N.inTableScope("caption")?(N.generateImpliedEndTags(),N.popTag("caption"),se.clearToMarker(),U=Do,!0):!1}switch(_){case 2:switch(I){case"caption":case"col":case"colgroup":case"tbody":case"td":case"tfoot":case"th":case"thead":case"tr":oe()&&U(_,I,L,re);return}break;case 3:switch(I){case"caption":oe();return;case"table":oe()&&U(_,I,L,re);return;case"body":case"col":case"colgroup":case"html":case"tbody":case"td":case"tfoot":case"th":case"thead":case"tr":return}break}it(_,I,L,re)}function dd(_,I,L,re){switch(_){case 1:var oe=I.match(hp);if(oe&&(Ja(oe[0]),I=I.substring(oe[0].length)),I.length===0)return;break;case 4:za(I);return;case 5:return;case 2:switch(I){case"html":it(_,I,L,re);return;case"col":vt(I,L),N.pop();return;case"template":In(_,I,L,re);return}break;case 3:switch(I){case"colgroup":if(!Xr(N.top,"colgroup"))return;N.pop(),U=Do;return;case"col":return;case"template":In(_,I,L,re);return}break;case-1:it(_,I,L,re);return}Xr(N.top,"colgroup")&&(dd(ar,"colgroup"),U(_,I,L,re))}function zl(_,I,L,re){function oe(){!N.inTableScope("tbody")&&!N.inTableScope("thead")&&!N.inTableScope("tfoot")||(N.clearToContext(eB),zl(ar,N.top.localName,null),U(_,I,L,re))}switch(_){case 2:switch(I){case"tr":N.clearToContext(eB),vt(I,L),U=Jr;return;case"th":case"td":zl(Vs,"tr",null),U(_,I,L,re);return;case"caption":case"col":case"colgroup":case"tbody":case"tfoot":case"thead":oe();return}break;case 3:switch(I){case"table":oe();return;case"tbody":case"tfoot":case"thead":N.inTableScope(I)&&(N.clearToContext(eB),N.pop(),U=Do);return;case"body":case"caption":case"col":case"colgroup":case"html":case"td":case"th":case"tr":return}break}Do(_,I,L,re)}function Jr(_,I,L,re){function oe(){return N.inTableScope("tr")?(N.clearToContext(DU),N.pop(),U=zl,!0):!1}switch(_){case 2:switch(I){case"th":case"td":N.clearToContext(DU),vt(I,L),U=ro,se.insertMarker();return;case"caption":case"col":case"colgroup":case"tbody":case"tfoot":case"thead":case"tr":oe()&&U(_,I,L,re);return}break;case 3:switch(I){case"tr":oe();return;case"table":oe()&&U(_,I,L,re);return;case"tbody":case"tfoot":case"thead":N.inTableScope(I)&&oe()&&U(_,I,L,re);return;case"body":case"caption":case"col":case"colgroup":case"html":case"td":case"th":return}break}Do(_,I,L,re)}function ro(_,I,L,re){switch(_){case 2:switch(I){case"caption":case"col":case"colgroup":case"tbody":case"td":case"tfoot":case"th":case"thead":case"tr":N.inTableScope("td")?(ro(ar,"td"),U(_,I,L,re)):N.inTableScope("th")&&(ro(ar,"th"),U(_,I,L,re));return}break;case 3:switch(I){case"td":case"th":if(!N.inTableScope(I))return;N.generateImpliedEndTags(),N.popTag(I),se.clearToMarker(),U=Jr;return;case"body":case"caption":case"col":case"colgroup":case"html":return;case"table":case"tbody":case"tfoot":case"thead":case"tr":if(!N.inTableScope(I))return;ro(ar,N.inTableScope("td")?"td":"th"),U(_,I,L,re);return}break}it(_,I,L,re)}function fa(_,I,L,re){switch(_){case 1:if(kr&&(I=I.replace(ZS,""),I.length===0))return;Ja(I);return;case 4:za(I);return;case 5:return;case-1:it(_,I,L,re);return;case 2:switch(I){case"html":it(_,I,L,re);return;case"option":N.top instanceof Zr.HTMLOptionElement&&fa(ar,I),vt(I,L);return;case"optgroup":N.top instanceof Zr.HTMLOptionElement&&fa(ar,"option"),N.top instanceof Zr.HTMLOptGroupElement&&fa(ar,I),vt(I,L);return;case"select":fa(ar,I);return;case"input":case"keygen":case"textarea":if(!N.inSelectScope("select"))return;fa(ar,"select"),U(_,I,L,re);return;case"script":case"template":In(_,I,L,re);return}break;case 3:switch(I){case"optgroup":N.top instanceof Zr.HTMLOptionElement&&N.elements[N.elements.length-2]instanceof Zr.HTMLOptGroupElement&&fa(ar,"option"),N.top instanceof Zr.HTMLOptGroupElement&&N.pop();return;case"option":N.top instanceof Zr.HTMLOptionElement&&N.pop();return;case"select":if(!N.inSelectScope(I))return;N.popTag(I),If();return;case"template":In(_,I,L,re);return}break}}function JA(_,I,L,re){switch(I){case"caption":case"table":case"tbody":case"tfoot":case"thead":case"tr":case"td":case"th":switch(_){case 2:JA(ar,"select"),U(_,I,L,re);return;case 3:N.inTableScope(I)&&(JA(ar,"select"),U(_,I,L,re));return}}fa(_,I,L,re)}function Dg(_,I,L,re){function oe(De){U=De,Se[Se.length-1]=U,U(_,I,L,re)}switch(_){case 1:case 4:case 5:it(_,I,L,re);return;case-1:N.contains("template")?(N.popTag("template"),se.clearToMarker(),Se.pop(),If(),U(_,I,L,re)):ad();return;case 2:switch(I){case"base":case"basefont":case"bgsound":case"link":case"meta":case"noframes":case"script":case"style":case"template":case"title":In(_,I,L,re);return;case"caption":case"colgroup":case"tbody":case"tfoot":case"thead":oe(Do);return;case"col":oe(dd);return;case"tr":oe(zl);return;case"td":case"th":oe(Jr);return}oe(it);return;case 3:switch(I){case"template":In(_,I,L,re);return;default:return}}}function Lw(_,I,L,re){switch(_){case 1:if(jS.test(I))break;it(_,I);return;case 4:N.elements[0]._appendChild(He.createComment(I));return;case 5:return;case-1:ad();return;case 2:if(I==="html"){it(_,I,L,re);return}break;case 3:if(I==="html"){if(z)return;U=Uw;return}break}U=it,U(_,I,L,re)}function vv(_,I,L,re){switch(_){case 1:I=I.replace(IU,""),I.length>0&&Ja(I);return;case 4:za(I);return;case 5:return;case-1:ad();return;case 2:switch(I){case"html":it(_,I,L,re);return;case"frameset":vt(I,L);return;case"frame":vt(I,L),N.pop();return;case"noframes":In(_,I,L,re);return}break;case 3:if(I==="frameset"){if(z&&N.top instanceof Zr.HTMLHtmlElement)return;N.pop(),!z&&!(N.top instanceof Zr.HTMLFrameSetElement)&&(U=E2);return}break}}function E2(_,I,L,re){switch(_){case 1:I=I.replace(IU,""),I.length>0&&Ja(I);return;case 4:za(I);return;case 5:return;case-1:ad();return;case 2:switch(I){case"html":it(_,I,L,re);return;case"noframes":In(_,I,L,re);return}break;case 3:if(I==="html"){U=jA;return}break}}function Uw(_,I,L,re){switch(_){case 1:if(jS.test(I))break;it(_,I,L,re);return;case 4:He._appendChild(He.createComment(I));return;case 5:it(_,I,L,re);return;case-1:ad();return;case 2:if(I==="html"){it(_,I,L,re);return}break}U=it,U(_,I,L,re)}function jA(_,I,L,re){switch(_){case 1:I=I.replace(IU,""),I.length>0&&it(_,I,L,re);return;case 4:He._appendChild(He.createComment(I));return;case 5:it(_,I,L,re);return;case-1:ad();return;case 2:switch(I){case"html":it(_,I,L,re);return;case"noframes":In(_,I,L,re);return}break}}function fd(_,I,L,re){function oe(hn){for(var Qi=0,no=hn.length;Qi<no;Qi++)switch(hn[Qi][0]){case"color":case"face":case"size":return!0}return!1}var De;switch(_){case 1:ye&&CUe.test(I)&&(ye=!1),kr&&(I=I.replace(ZS,"\uFFFD")),Ja(I);return;case 4:za(I);return;case 5:return;case 2:switch(I){case"font":if(!oe(L))break;case"b":case"big":case"blockquote":case"body":case"br":case"center":case"code":case"dd":case"div":case"dl":case"dt":case"em":case"embed":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":case"head":case"hr":case"i":case"img":case"li":case"listing":case"menu":case"meta":case"nobr":case"ol":case"p":case"pre":case"ruby":case"s":case"small":case"span":case"strong":case"strike":case"sub":case"sup":case"table":case"tt":case"u":case"ul":case"var":if(z)break;do N.pop(),De=N.top;while(De.namespaceURI!==at.HTML&&!Xj(De)&&!e7(De));wn(_,I,L,re);return}De=N.elements.length===1&&z?t:N.top,De.namespaceURI===at.MATHML?r7(L):De.namespaceURI===at.SVG&&(I=EUe(I),t7(L)),SU(L),iv(I,L,De.namespaceURI),re&&(I==="script"&&(De.namespaceURI,at.SVG),N.pop());return;case 3:if(De=N.top,I==="script"&&De.namespaceURI===at.SVG&&De.localName==="script")N.pop();else for(var st=N.elements.length-1,Ht=N.elements[st];;){if(Ht.localName.toLowerCase()===I){N.popElement(Ht);break}if(Ht=N.elements[--st],Ht.namespaceURI===at.HTML){U(_,I,L,re);break}}return}}return Lr.testTokenizer=function(_,I,L,re){var oe=[];switch(I){case"PCDATA state":g=Xt;break;case"RCDATA state":g=Wc;break;case"RAWTEXT state":g=Ig;break;case"PLAINTEXT state":g=av;break}if(L&&(v=L),wn=function(st,Ht,hn,Qi){switch(ca(),st){case 1:oe.length>0&&oe[oe.length-1][0]==="Character"?oe[oe.length-1][1]+=Ht:oe.push(["Character",Ht]);break;case 4:oe.push(["Comment",Ht]);break;case 5:oe.push(["DOCTYPE",Ht,hn===void 0?null:hn,Qi===void 0?null:Qi,!Lt]);break;case 2:for(var no=Object.create(null),Sn=0;Sn<hn.length;Sn++){var Jl=hn[Sn];Jl.length===1?no[Jl[0]]="":no[Jl[0]]=Jl[1]}var To=["StartTag",Ht,no];Qi&&To.push(!0),oe.push(To);break;case 3:oe.push(["EndTag",Ht]);break;case-1:break}},!re)this.parse(_,!0);else{for(var De=0;De<_.length;De++)this.parse(_[De]);this.parse("",!0)}return oe},Lr}});var IE=x((M_t,A7)=>{"use strict";A7.exports=p7;var h7=YS(),g7=zS(),bUe=rB(),nB=ni(),xUe=TS();function p7(e){this.contextObject=e}var _Ue={xml:{"":!0,"1.0":!0,"2.0":!0},core:{"":!0,"2.0":!0},html:{"":!0,"1.0":!0,"2.0":!0},xhtml:{"":!0,"1.0":!0,"2.0":!0}};p7.prototype={hasFeature:function(t,r){var n=_Ue[(t||"").toLowerCase()];return n&&n[r||""]||!1},createDocumentType:function(t,r,n){return xUe.isValidQName(t)||nB.InvalidCharacterError(),new g7(this.contextObject,t,r,n)},createDocument:function(t,r,n){var i=new h7(!1,null),s;return r?s=i.createElementNS(t,r):s=null,n&&i.appendChild(n),s&&i.appendChild(s),t===nB.NAMESPACE.HTML?i._contentType="application/xhtml+xml":t===nB.NAMESPACE.SVG?i._contentType="image/svg+xml":i._contentType="application/xml",i},createHTMLDocument:function(t){var r=new h7(!0,null);r.appendChild(new g7(r,"html"));var n=r.createElement("html");r.appendChild(n);var i=r.createElement("head");if(n.appendChild(i),t!==void 0){var s=r.createElement("title");i.appendChild(s),s.appendChild(r.createTextNode(t))}return n.appendChild(r.createElement("body")),r.modclock=1,r},mozSetOutputMutationHandler:function(e,t){e.mutationHandler=t},mozGetInputMutationHandler:function(e){nB.nyi()},mozHTMLParser:bUe}});var y7=x((Q_t,m7)=>{"use strict";var wUe=OS(),IUe=mU();m7.exports=RU;function RU(e,t){this._window=e,this._href=t}RU.prototype=Object.create(IUe.prototype,{constructor:{value:RU},href:{get:function(){return this._href},set:function(e){this.assign(e)}},assign:{value:function(e){var t=new wUe(this._href),r=t.resolve(e);this._href=r}},replace:{value:function(e){this.assign(e)}},reload:{value:function(){this.assign(this.href)}},toString:{value:function(){return this.href}}})});var v7=x((N_t,C7)=>{"use strict";var SUe=Object.create(null,{appCodeName:{value:"Mozilla"},appName:{value:"Netscape"},appVersion:{value:"4.0"},platform:{value:""},product:{value:"Gecko"},productSub:{value:"20100101"},userAgent:{value:""},vendor:{value:""},vendorSub:{value:""},taintEnabled:{value:function(){return!1}}});C7.exports=SUe});var b7=x((P_t,E7)=>{"use strict";var BUe={setTimeout,clearTimeout,setInterval,clearInterval};E7.exports=BUe});var FU=x((SE,x7)=>{"use strict";var kU=ni();SE=x7.exports={CSSStyleDeclaration:qS(),CharacterData:mE(),Comment:nU(),DOMException:wS(),DOMImplementation:IE(),DOMTokenList:OL(),Document:YS(),DocumentFragment:sU(),DocumentType:zS(),Element:Hm(),HTMLParser:rB(),NamedNodeMap:$L(),Node:Es(),NodeList:up(),NodeFilter:EE(),ProcessingInstruction:aU(),Text:tU(),Window:MU()};kU.merge(SE,AU());kU.merge(SE,WS().elements);kU.merge(SE,bU().elements)});var MU=x((L_t,_7)=>{"use strict";var DUe=IE(),TUe=bL(),RUe=y7(),BE=ni();_7.exports=iB;function iB(e){this.document=e||new DUe(null).createHTMLDocument(""),this.document._scripting_enabled=!0,this.document.defaultView=this,this.location=new RUe(this,this.document._address||"about:blank")}iB.prototype=Object.create(TUe.prototype,{console:{value:console},history:{value:{back:BE.nyi,forward:BE.nyi,go:BE.nyi}},navigator:{value:v7()},window:{get:function(){return this}},self:{get:function(){return this}},frames:{get:function(){return this}},parent:{get:function(){return this}},top:{get:function(){return this}},length:{value:0},frameElement:{value:null},opener:{value:null},onload:{get:function(){return this._getEventHandler("load")},set:function(e){this._setEventHandler("load",e)}},getComputedStyle:{value:function(t){return t.style}}});BE.expose(b7(),iB);BE.expose(FU(),iB)});var B7=x(pp=>{"use strict";var w7=IE(),I7=rB(),U_t=MU(),S7=FU();pp.createDOMImplementation=function(){return new w7(null)};pp.createDocument=function(e,t){if(e||t){var r=new I7;return r.parse(e||"",!0),r.document()}return new w7(null).createHTMLDocument("")};pp.createIncrementalHTMLParser=function(){var e=new I7;return{write:function(t){t.length>0&&e.parse(t,!1,function(){return!0})},end:function(t){e.parse(t||"",!0,function(){return!0})},process:function(t){return e.parse("",!1,t)},document:function(){return e.document()}}};pp.createWindow=function(e,t){var r=pp.createDocument(e);return t!==void 0&&(r._address=t),new S7.Window(r)};pp.impl=S7});var O7=x((q_t,U7)=>{"use strict";function kUe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])}return e}function LU(e,t){return Array(t+1).join(e)}function FUe(e){return e.replace(/^\n*/,"")}function MUe(e){for(var t=e.length;t>0&&e[t-1]===`
`;)t--;return e.substring(0,t)}var QUe=["ADDRESS","ARTICLE","ASIDE","AUDIO","BLOCKQUOTE","BODY","CANVAS","CENTER","DD","DIR","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","FRAMESET","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","HTML","ISINDEX","LI","MAIN","MENU","NAV","NOFRAMES","NOSCRIPT","OL","OUTPUT","P","PRE","SECTION","TABLE","TBODY","TD","TFOOT","TH","THEAD","TR","UL"];function UU(e){return OU(e,QUe)}var R7=["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"];function k7(e){return OU(e,R7)}function NUe(e){return M7(e,R7)}var F7=["A","TABLE","THEAD","TBODY","TFOOT","TH","TD","IFRAME","SCRIPT","AUDIO","VIDEO"];function PUe(e){return OU(e,F7)}function LUe(e){return M7(e,F7)}function OU(e,t){return t.indexOf(e.nodeName)>=0}function M7(e,t){return e.getElementsByTagName&&t.some(function(r){return e.getElementsByTagName(r).length})}var Ws={};Ws.paragraph={filter:"p",replacement:function(e){return`

`+e+`

`}};Ws.lineBreak={filter:"br",replacement:function(e,t,r){return r.br+`
`}};Ws.heading={filter:["h1","h2","h3","h4","h5","h6"],replacement:function(e,t,r){var n=Number(t.nodeName.charAt(1));if(r.headingStyle==="setext"&&n<3){var i=LU(n===1?"=":"-",e.length);return`

`+e+`
`+i+`

`}else return`

`+LU("#",n)+" "+e+`

`}};Ws.blockquote={filter:"blockquote",replacement:function(e){return e=e.replace(/^\n+|\n+$/g,""),e=e.replace(/^/gm,"> "),`

`+e+`

`}};Ws.list={filter:["ul","ol"],replacement:function(e,t){var r=t.parentNode;return r.nodeName==="LI"&&r.lastElementChild===t?`
`+e:`

`+e+`

`}};Ws.listItem={filter:"li",replacement:function(e,t,r){e=e.replace(/^\n+/,"").replace(/\n+$/,`
`).replace(/\n/gm,`
    `);var n=r.bulletListMarker+"   ",i=t.parentNode;if(i.nodeName==="OL"){var s=i.getAttribute("start"),o=Array.prototype.indexOf.call(i.children,t);n=(s?Number(s)+o:o+1)+".  "}return n+e+(t.nextSibling&&!/\n$/.test(e)?`
`:"")}};Ws.indentedCodeBlock={filter:function(e,t){return t.codeBlockStyle==="indented"&&e.nodeName==="PRE"&&e.firstChild&&e.firstChild.nodeName==="CODE"},replacement:function(e,t,r){return`

    `+t.firstChild.textContent.replace(/\n/g,`
    `)+`

`}};Ws.fencedCodeBlock={filter:function(e,t){return t.codeBlockStyle==="fenced"&&e.nodeName==="PRE"&&e.firstChild&&e.firstChild.nodeName==="CODE"},replacement:function(e,t,r){for(var n=t.firstChild.getAttribute("class")||"",i=(n.match(/language-(\S+)/)||[null,""])[1],s=t.firstChild.textContent,o=r.fence.charAt(0),a=3,l=new RegExp("^"+o+"{3,}","gm"),c;c=l.exec(s);)c[0].length>=a&&(a=c[0].length+1);var u=LU(o,a);return`

`+u+i+`
`+s.replace(/\n$/,"")+`
`+u+`

`}};Ws.horizontalRule={filter:"hr",replacement:function(e,t,r){return`

`+r.hr+`

`}};Ws.inlineLink={filter:function(e,t){return t.linkStyle==="inlined"&&e.nodeName==="A"&&e.getAttribute("href")},replacement:function(e,t){var r=t.getAttribute("href");r&&(r=r.replace(/([()])/g,"\\$1"));var n=sB(t.getAttribute("title"));return n&&(n=' "'+n.replace(/"/g,'\\"')+'"'),"["+e+"]("+r+n+")"}};Ws.referenceLink={filter:function(e,t){return t.linkStyle==="referenced"&&e.nodeName==="A"&&e.getAttribute("href")},replacement:function(e,t,r){var n=t.getAttribute("href"),i=sB(t.getAttribute("title"));i&&(i=' "'+i+'"');var s,o;switch(r.linkReferenceStyle){case"collapsed":s="["+e+"][]",o="["+e+"]: "+n+i;break;case"shortcut":s="["+e+"]",o="["+e+"]: "+n+i;break;default:var a=this.references.length+1;s="["+e+"]["+a+"]",o="["+a+"]: "+n+i}return this.references.push(o),s},references:[],append:function(e){var t="";return this.references.length&&(t=`

`+this.references.join(`
`)+`

`,this.references=[]),t}};Ws.emphasis={filter:["em","i"],replacement:function(e,t,r){return e.trim()?r.emDelimiter+e+r.emDelimiter:""}};Ws.strong={filter:["strong","b"],replacement:function(e,t,r){return e.trim()?r.strongDelimiter+e+r.strongDelimiter:""}};Ws.code={filter:function(e){var t=e.previousSibling||e.nextSibling,r=e.parentNode.nodeName==="PRE"&&!t;return e.nodeName==="CODE"&&!r},replacement:function(e){if(!e)return"";e=e.replace(/\r?\n|\r/g," ");for(var t=/^`|^ .*?[^ ].* $|`$/.test(e)?" ":"",r="`",n=e.match(/`+/gm)||[];n.indexOf(r)!==-1;)r=r+"`";return r+t+e+t+r}};Ws.image={filter:"img",replacement:function(e,t){var r=sB(t.getAttribute("alt")),n=t.getAttribute("src")||"",i=sB(t.getAttribute("title")),s=i?' "'+i+'"':"";return n?"!["+r+"]("+n+s+")":""}};function sB(e){return e?e.replace(/(\n+\s*)+/g,`
`):""}function Q7(e){this.options=e,this._keep=[],this._remove=[],this.blankRule={replacement:e.blankReplacement},this.keepReplacement=e.keepReplacement,this.defaultRule={replacement:e.defaultReplacement},this.array=[];for(var t in e.rules)this.array.push(e.rules[t])}Q7.prototype={add:function(e,t){this.array.unshift(t)},keep:function(e){this._keep.unshift({filter:e,replacement:this.keepReplacement})},remove:function(e){this._remove.unshift({filter:e,replacement:function(){return""}})},forNode:function(e){if(e.isBlank)return this.blankRule;var t;return(t=QU(this.array,e,this.options))||(t=QU(this._keep,e,this.options))||(t=QU(this._remove,e,this.options))?t:this.defaultRule},forEach:function(e){for(var t=0;t<this.array.length;t++)e(this.array[t],t)}};function QU(e,t,r){for(var n=0;n<e.length;n++){var i=e[n];if(UUe(i,t,r))return i}}function UUe(e,t,r){var n=e.filter;if(typeof n=="string"){if(n===t.nodeName.toLowerCase())return!0}else if(Array.isArray(n)){if(n.indexOf(t.nodeName.toLowerCase())>-1)return!0}else if(typeof n=="function"){if(n.call(e,t,r))return!0}else throw new TypeError("`filter` needs to be a string, array, or function")}function OUe(e){var t=e.element,r=e.isBlock,n=e.isVoid,i=e.isPre||function(f){return f.nodeName==="PRE"};if(!(!t.firstChild||i(t))){for(var s=null,o=!1,a=null,l=D7(a,t,i);l!==t;){if(l.nodeType===3||l.nodeType===4){var c=l.data.replace(/[ \r\n\t]+/g," ");if((!s||/ $/.test(s.data))&&!o&&c[0]===" "&&(c=c.substr(1)),!c){l=NU(l);continue}l.data=c,s=l}else if(l.nodeType===1)r(l)||l.nodeName==="BR"?(s&&(s.data=s.data.replace(/ $/,"")),s=null,o=!1):n(l)||i(l)?(s=null,o=!0):s&&(o=!1);else{l=NU(l);continue}var u=D7(a,l,i);a=l,l=u}s&&(s.data=s.data.replace(/ $/,""),s.data||NU(s))}}function NU(e){var t=e.nextSibling||e.parentNode;return e.parentNode.removeChild(e),t}function D7(e,t,r){return e&&e.parentNode===t||r(t)?t.nextSibling||t.parentNode:t.firstChild||t.nextSibling||t.parentNode}var N7=typeof window<"u"?window:{};function qUe(){var e=N7.DOMParser,t=!1;try{new e().parseFromString("","text/html")&&(t=!0)}catch{}return t}function VUe(){var e=function(){};{var t=B7();e.prototype.parseFromString=function(r){return t.createDocument(r)}}return e}var HUe=qUe()?N7.DOMParser:VUe();function WUe(e,t){var r;if(typeof e=="string"){var n=GUe().parseFromString('<x-turndown id="turndown-root">'+e+"</x-turndown>","text/html");r=n.getElementById("turndown-root")}else r=e.cloneNode(!0);return OUe({element:r,isBlock:UU,isVoid:k7,isPre:t.preformattedCode?$Ue:null}),r}var PU;function GUe(){return PU=PU||new HUe,PU}function $Ue(e){return e.nodeName==="PRE"||e.nodeName==="CODE"}function YUe(e,t){return e.isBlock=UU(e),e.isCode=e.nodeName==="CODE"||e.parentNode.isCode,e.isBlank=KUe(e),e.flankingWhitespace=zUe(e,t),e}function KUe(e){return!k7(e)&&!PUe(e)&&/^\s*$/i.test(e.textContent)&&!NUe(e)&&!LUe(e)}function zUe(e,t){if(e.isBlock||t.preformattedCode&&e.isCode)return{leading:"",trailing:""};var r=JUe(e.textContent);return r.leadingAscii&&T7("left",e,t)&&(r.leading=r.leadingNonAscii),r.trailingAscii&&T7("right",e,t)&&(r.trailing=r.trailingNonAscii),{leading:r.leading,trailing:r.trailing}}function JUe(e){var t=e.match(/^(([ \t\r\n]*)(\s*))(?:(?=\S)[\s\S]*\S)?((\s*?)([ \t\r\n]*))$/);return{leading:t[1],leadingAscii:t[2],leadingNonAscii:t[3],trailing:t[4],trailingNonAscii:t[5],trailingAscii:t[6]}}function T7(e,t,r){var n,i,s;return e==="left"?(n=t.previousSibling,i=/ $/):(n=t.nextSibling,i=/^ /),n&&(n.nodeType===3?s=i.test(n.nodeValue):r.preformattedCode&&n.nodeName==="CODE"?s=!1:n.nodeType===1&&!UU(n)&&(s=i.test(n.textContent))),s}var jUe=Array.prototype.reduce,ZUe=[[/\\/g,"\\\\"],[/\*/g,"\\*"],[/^-/g,"\\-"],[/^\+ /g,"\\+ "],[/^(=+)/g,"\\$1"],[/^(#{1,6}) /g,"\\$1 "],[/`/g,"\\`"],[/^~~~/g,"\\~~~"],[/\[/g,"\\["],[/\]/g,"\\]"],[/^>/g,"\\>"],[/_/g,"\\_"],[/^(\d+)\. /g,"$1\\. "]];function oB(e){if(!(this instanceof oB))return new oB(e);var t={rules:Ws,headingStyle:"setext",hr:"* * *",bulletListMarker:"*",codeBlockStyle:"indented",fence:"```",emDelimiter:"_",strongDelimiter:"**",linkStyle:"inlined",linkReferenceStyle:"full",br:"  ",preformattedCode:!1,blankReplacement:function(r,n){return n.isBlock?`

`:""},keepReplacement:function(r,n){return n.isBlock?`

`+n.outerHTML+`

`:n.outerHTML},defaultReplacement:function(r,n){return n.isBlock?`

`+r+`

`:r}};this.options=kUe({},t,e),this.rules=new Q7(this.options)}oB.prototype={turndown:function(e){if(!tOe(e))throw new TypeError(e+" is not a string, or an element/document/fragment node.");if(e==="")return"";var t=P7.call(this,new WUe(e,this.options));return XUe.call(this,t)},use:function(e){if(Array.isArray(e))for(var t=0;t<e.length;t++)this.use(e[t]);else if(typeof e=="function")e(this);else throw new TypeError("plugin must be a Function or an Array of Functions");return this},addRule:function(e,t){return this.rules.add(e,t),this},keep:function(e){return this.rules.keep(e),this},remove:function(e){return this.rules.remove(e),this},escape:function(e){return ZUe.reduce(function(t,r){return t.replace(r[0],r[1])},e)}};function P7(e){var t=this;return jUe.call(e.childNodes,function(r,n){n=new YUe(n,t.options);var i="";return n.nodeType===3?i=n.isCode?n.nodeValue:t.escape(n.nodeValue):n.nodeType===1&&(i=eOe.call(t,n)),L7(r,i)},"")}function XUe(e){var t=this;return this.rules.forEach(function(r){typeof r.append=="function"&&(e=L7(e,r.append(t.options)))}),e.replace(/^[\t\r\n]+/,"").replace(/[\t\r\n\s]+$/,"")}function eOe(e){var t=this.rules.forNode(e),r=P7.call(this,e),n=e.flankingWhitespace;return(n.leading||n.trailing)&&(r=r.trim()),n.leading+t.replacement(r,e,this.options)+n.trailing}function L7(e,t){var r=MUe(e),n=FUe(t),i=Math.max(e.length-r.length,t.length-n.length),s=`

`.substring(0,i);return r+s+n}function tOe(e){return e!=null&&(typeof e=="string"||e.nodeType&&(e.nodeType===1||e.nodeType===9||e.nodeType===11))}U7.exports=oB});var Y7=x((Xwt,$7)=>{"use strict";function iOe(){this.__data__=[],this.size=0}$7.exports=iOe});var vB=x((eIt,K7)=>{"use strict";function sOe(e,t){return e===t||e!==e&&t!==t}K7.exports=sOe});var RE=x((tIt,z7)=>{"use strict";var oOe=vB();function aOe(e,t){for(var r=e.length;r--;)if(oOe(e[r][0],t))return r;return-1}z7.exports=aOe});var j7=x((rIt,J7)=>{"use strict";var lOe=RE(),cOe=Array.prototype,uOe=cOe.splice;function dOe(e){var t=this.__data__,r=lOe(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():uOe.call(t,r,1),--this.size,!0}J7.exports=dOe});var X7=x((nIt,Z7)=>{"use strict";var fOe=RE();function hOe(e){var t=this.__data__,r=fOe(t,e);return r<0?void 0:t[r][1]}Z7.exports=hOe});var tZ=x((iIt,eZ)=>{"use strict";var gOe=RE();function pOe(e){return gOe(this.__data__,e)>-1}eZ.exports=pOe});var nZ=x((sIt,rZ)=>{"use strict";var AOe=RE();function mOe(e,t){var r=this.__data__,n=AOe(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}rZ.exports=mOe});var kE=x((oIt,iZ)=>{"use strict";var yOe=Y7(),COe=j7(),vOe=X7(),EOe=tZ(),bOe=nZ();function Xm(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Xm.prototype.clear=yOe;Xm.prototype.delete=COe;Xm.prototype.get=vOe;Xm.prototype.has=EOe;Xm.prototype.set=bOe;iZ.exports=Xm});var oZ=x((aIt,sZ)=>{"use strict";var xOe=kE();function _Oe(){this.__data__=new xOe,this.size=0}sZ.exports=_Oe});var lZ=x((lIt,aZ)=>{"use strict";function wOe(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}aZ.exports=wOe});var uZ=x((cIt,cZ)=>{"use strict";function IOe(e){return this.__data__.get(e)}cZ.exports=IOe});var fZ=x((uIt,dZ)=>{"use strict";function SOe(e){return this.__data__.has(e)}dZ.exports=SOe});var qU=x((dIt,hZ)=>{"use strict";var BOe=cm(),DOe=xd(),TOe="[object AsyncFunction]",ROe="[object Function]",kOe="[object GeneratorFunction]",FOe="[object Proxy]";function MOe(e){if(!DOe(e))return!1;var t=BOe(e);return t==ROe||t==kOe||t==TOe||t==FOe}hZ.exports=MOe});var pZ=x((fIt,gZ)=>{"use strict";var QOe=sl(),NOe=QOe["__core-js_shared__"];gZ.exports=NOe});var yZ=x((hIt,mZ)=>{"use strict";var VU=pZ(),AZ=function(){var e=/[^.]+$/.exec(VU&&VU.keys&&VU.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function POe(e){return!!AZ&&AZ in e}mZ.exports=POe});var HU=x((gIt,CZ)=>{"use strict";var LOe=Function.prototype,UOe=LOe.toString;function OOe(e){if(e!=null){try{return UOe.call(e)}catch{}try{return e+""}catch{}}return""}CZ.exports=OOe});var EZ=x((pIt,vZ)=>{"use strict";var qOe=qU(),VOe=yZ(),HOe=xd(),WOe=HU(),GOe=/[\\^$.*+?()[\]{}|]/g,$Oe=/^\[object .+?Constructor\]$/,YOe=Function.prototype,KOe=Object.prototype,zOe=YOe.toString,JOe=KOe.hasOwnProperty,jOe=RegExp("^"+zOe.call(JOe).replace(GOe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ZOe(e){if(!HOe(e)||VOe(e))return!1;var t=qOe(e)?jOe:$Oe;return t.test(WOe(e))}vZ.exports=ZOe});var xZ=x((AIt,bZ)=>{"use strict";function XOe(e,t){return e?.[t]}bZ.exports=XOe});var nh=x((mIt,_Z)=>{"use strict";var eqe=EZ(),tqe=xZ();function rqe(e,t){var r=tqe(e,t);return eqe(r)?r:void 0}_Z.exports=rqe});var EB=x((yIt,wZ)=>{"use strict";var nqe=nh(),iqe=sl(),sqe=nqe(iqe,"Map");wZ.exports=sqe});var FE=x((CIt,IZ)=>{"use strict";var oqe=nh(),aqe=oqe(Object,"create");IZ.exports=aqe});var DZ=x((vIt,BZ)=>{"use strict";var SZ=FE();function lqe(){this.__data__=SZ?SZ(null):{},this.size=0}BZ.exports=lqe});var RZ=x((EIt,TZ)=>{"use strict";function cqe(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}TZ.exports=cqe});var FZ=x((bIt,kZ)=>{"use strict";var uqe=FE(),dqe="__lodash_hash_undefined__",fqe=Object.prototype,hqe=fqe.hasOwnProperty;function gqe(e){var t=this.__data__;if(uqe){var r=t[e];return r===dqe?void 0:r}return hqe.call(t,e)?t[e]:void 0}kZ.exports=gqe});var QZ=x((xIt,MZ)=>{"use strict";var pqe=FE(),Aqe=Object.prototype,mqe=Aqe.hasOwnProperty;function yqe(e){var t=this.__data__;return pqe?t[e]!==void 0:mqe.call(t,e)}MZ.exports=yqe});var PZ=x((_It,NZ)=>{"use strict";var Cqe=FE(),vqe="__lodash_hash_undefined__";function Eqe(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Cqe&&t===void 0?vqe:t,this}NZ.exports=Eqe});var UZ=x((wIt,LZ)=>{"use strict";var bqe=DZ(),xqe=RZ(),_qe=FZ(),wqe=QZ(),Iqe=PZ();function e0(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}e0.prototype.clear=bqe;e0.prototype.delete=xqe;e0.prototype.get=_qe;e0.prototype.has=wqe;e0.prototype.set=Iqe;LZ.exports=e0});var VZ=x((IIt,qZ)=>{"use strict";var OZ=UZ(),Sqe=kE(),Bqe=EB();function Dqe(){this.size=0,this.__data__={hash:new OZ,map:new(Bqe||Sqe),string:new OZ}}qZ.exports=Dqe});var WZ=x((SIt,HZ)=>{"use strict";function Tqe(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}HZ.exports=Tqe});var ME=x((BIt,GZ)=>{"use strict";var Rqe=WZ();function kqe(e,t){var r=e.__data__;return Rqe(t)?r[typeof t=="string"?"string":"hash"]:r.map}GZ.exports=kqe});var YZ=x((DIt,$Z)=>{"use strict";var Fqe=ME();function Mqe(e){var t=Fqe(this,e).delete(e);return this.size-=t?1:0,t}$Z.exports=Mqe});var zZ=x((TIt,KZ)=>{"use strict";var Qqe=ME();function Nqe(e){return Qqe(this,e).get(e)}KZ.exports=Nqe});var jZ=x((RIt,JZ)=>{"use strict";var Pqe=ME();function Lqe(e){return Pqe(this,e).has(e)}JZ.exports=Lqe});var XZ=x((kIt,ZZ)=>{"use strict";var Uqe=ME();function Oqe(e,t){var r=Uqe(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}ZZ.exports=Oqe});var WU=x((FIt,eX)=>{"use strict";var qqe=VZ(),Vqe=YZ(),Hqe=zZ(),Wqe=jZ(),Gqe=XZ();function t0(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}t0.prototype.clear=qqe;t0.prototype.delete=Vqe;t0.prototype.get=Hqe;t0.prototype.has=Wqe;t0.prototype.set=Gqe;eX.exports=t0});var rX=x((MIt,tX)=>{"use strict";var $qe=kE(),Yqe=EB(),Kqe=WU(),zqe=200;function Jqe(e,t){var r=this.__data__;if(r instanceof $qe){var n=r.__data__;if(!Yqe||n.length<zqe-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Kqe(n)}return r.set(e,t),this.size=r.size,this}tX.exports=Jqe});var GU=x((QIt,nX)=>{"use strict";var jqe=kE(),Zqe=oZ(),Xqe=lZ(),eVe=uZ(),tVe=fZ(),rVe=rX();function r0(e){var t=this.__data__=new jqe(e);this.size=t.size}r0.prototype.clear=Zqe;r0.prototype.delete=Xqe;r0.prototype.get=eVe;r0.prototype.has=tVe;r0.prototype.set=rVe;nX.exports=r0});var sX=x((NIt,iX)=>{"use strict";var nVe="__lodash_hash_undefined__";function iVe(e){return this.__data__.set(e,nVe),this}iX.exports=iVe});var aX=x((PIt,oX)=>{"use strict";function sVe(e){return this.__data__.has(e)}oX.exports=sVe});var cX=x((LIt,lX)=>{"use strict";var oVe=WU(),aVe=sX(),lVe=aX();function bB(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new oVe;++t<r;)this.add(e[t])}bB.prototype.add=bB.prototype.push=aVe;bB.prototype.has=lVe;lX.exports=bB});var dX=x((UIt,uX)=>{"use strict";function cVe(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}uX.exports=cVe});var hX=x((OIt,fX)=>{"use strict";function uVe(e,t){return e.has(t)}fX.exports=uVe});var $U=x((qIt,gX)=>{"use strict";var dVe=cX(),fVe=dX(),hVe=hX(),gVe=1,pVe=2;function AVe(e,t,r,n,i,s){var o=r&gVe,a=e.length,l=t.length;if(a!=l&&!(o&&l>a))return!1;var c=s.get(e),u=s.get(t);if(c&&u)return c==t&&u==e;var f=-1,p=!0,g=r&pVe?new dVe:void 0;for(s.set(e,t),s.set(t,e);++f<a;){var A=e[f],y=t[f];if(n)var C=o?n(y,A,f,t,e,s):n(A,y,f,e,t,s);if(C!==void 0){if(C)continue;p=!1;break}if(g){if(!fVe(t,function(v,b){if(!hVe(g,b)&&(A===v||i(A,v,r,n,s)))return g.push(b)})){p=!1;break}}else if(!(A===y||i(A,y,r,n,s))){p=!1;break}}return s.delete(e),s.delete(t),p}gX.exports=AVe});var YU=x((VIt,pX)=>{"use strict";var mVe=sl(),yVe=mVe.Uint8Array;pX.exports=yVe});var mX=x((HIt,AX)=>{"use strict";function CVe(e){var t=-1,r=Array(e.size);return e.forEach(function(n,i){r[++t]=[i,n]}),r}AX.exports=CVe});var CX=x((WIt,yX)=>{"use strict";function vVe(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}yX.exports=vVe});var _X=x((GIt,xX)=>{"use strict";var vX=Uv(),EX=YU(),EVe=vB(),bVe=$U(),xVe=mX(),_Ve=CX(),wVe=1,IVe=2,SVe="[object Boolean]",BVe="[object Date]",DVe="[object Error]",TVe="[object Map]",RVe="[object Number]",kVe="[object RegExp]",FVe="[object Set]",MVe="[object String]",QVe="[object Symbol]",NVe="[object ArrayBuffer]",PVe="[object DataView]",bX=vX?vX.prototype:void 0,KU=bX?bX.valueOf:void 0;function LVe(e,t,r,n,i,s,o){switch(r){case PVe:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case NVe:return!(e.byteLength!=t.byteLength||!s(new EX(e),new EX(t)));case SVe:case BVe:case RVe:return EVe(+e,+t);case DVe:return e.name==t.name&&e.message==t.message;case kVe:case MVe:return e==t+"";case TVe:var a=xVe;case FVe:var l=n&wVe;if(a||(a=_Ve),e.size!=t.size&&!l)return!1;var c=o.get(e);if(c)return c==t;n|=IVe,o.set(e,t);var u=bVe(a(e),a(t),n,i,s,o);return o.delete(e),u;case QVe:if(KU)return KU.call(e)==KU.call(t)}return!1}xX.exports=LVe});var zU=x(($It,wX)=>{"use strict";function UVe(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}wX.exports=UVe});var QE=x((YIt,IX)=>{"use strict";var OVe=Array.isArray;IX.exports=OVe});var JU=x((KIt,SX)=>{"use strict";var qVe=zU(),VVe=QE();function HVe(e,t,r){var n=t(e);return VVe(e)?n:qVe(n,r(e))}SX.exports=HVe});var DX=x((zIt,BX)=>{"use strict";function WVe(e,t){for(var r=-1,n=e==null?0:e.length,i=0,s=[];++r<n;){var o=e[r];t(o,r,e)&&(s[i++]=o)}return s}BX.exports=WVe});var jU=x((JIt,TX)=>{"use strict";function GVe(){return[]}TX.exports=GVe});var xB=x((jIt,kX)=>{"use strict";var $Ve=DX(),YVe=jU(),KVe=Object.prototype,zVe=KVe.propertyIsEnumerable,RX=Object.getOwnPropertySymbols,JVe=RX?function(e){return e==null?[]:(e=Object(e),$Ve(RX(e),function(t){return zVe.call(e,t)}))}:YVe;kX.exports=JVe});var MX=x((ZIt,FX)=>{"use strict";function jVe(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}FX.exports=jVe});var NX=x((XIt,QX)=>{"use strict";var ZVe=cm(),XVe=qf(),e3e="[object Arguments]";function t3e(e){return XVe(e)&&ZVe(e)==e3e}QX.exports=t3e});var OX=x((eSt,UX)=>{"use strict";var PX=NX(),r3e=qf(),LX=Object.prototype,n3e=LX.hasOwnProperty,i3e=LX.propertyIsEnumerable,s3e=PX(function(){return arguments}())?PX:function(e){return r3e(e)&&n3e.call(e,"callee")&&!i3e.call(e,"callee")};UX.exports=s3e});var VX=x((tSt,qX)=>{"use strict";function o3e(){return!1}qX.exports=o3e});var _B=x((NE,n0)=>{"use strict";var a3e=sl(),l3e=VX(),GX=typeof NE=="object"&&NE&&!NE.nodeType&&NE,HX=GX&&typeof n0=="object"&&n0&&!n0.nodeType&&n0,c3e=HX&&HX.exports===GX,WX=c3e?a3e.Buffer:void 0,u3e=WX?WX.isBuffer:void 0,d3e=u3e||l3e;n0.exports=d3e});var YX=x((rSt,$X)=>{"use strict";var f3e=9007199254740991,h3e=/^(?:0|[1-9]\d*)$/;function g3e(e,t){var r=typeof e;return t=t??f3e,!!t&&(r=="number"||r!="symbol"&&h3e.test(e))&&e>-1&&e%1==0&&e<t}$X.exports=g3e});var ZU=x((nSt,KX)=>{"use strict";var p3e=9007199254740991;function A3e(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=p3e}KX.exports=A3e});var JX=x((iSt,zX)=>{"use strict";var m3e=cm(),y3e=ZU(),C3e=qf(),v3e="[object Arguments]",E3e="[object Array]",b3e="[object Boolean]",x3e="[object Date]",_3e="[object Error]",w3e="[object Function]",I3e="[object Map]",S3e="[object Number]",B3e="[object Object]",D3e="[object RegExp]",T3e="[object Set]",R3e="[object String]",k3e="[object WeakMap]",F3e="[object ArrayBuffer]",M3e="[object DataView]",Q3e="[object Float32Array]",N3e="[object Float64Array]",P3e="[object Int8Array]",L3e="[object Int16Array]",U3e="[object Int32Array]",O3e="[object Uint8Array]",q3e="[object Uint8ClampedArray]",V3e="[object Uint16Array]",H3e="[object Uint32Array]",Bn={};Bn[Q3e]=Bn[N3e]=Bn[P3e]=Bn[L3e]=Bn[U3e]=Bn[O3e]=Bn[q3e]=Bn[V3e]=Bn[H3e]=!0;Bn[v3e]=Bn[E3e]=Bn[F3e]=Bn[b3e]=Bn[M3e]=Bn[x3e]=Bn[_3e]=Bn[w3e]=Bn[I3e]=Bn[S3e]=Bn[B3e]=Bn[D3e]=Bn[T3e]=Bn[R3e]=Bn[k3e]=!1;function W3e(e){return C3e(e)&&y3e(e.length)&&!!Bn[m3e(e)]}zX.exports=W3e});var wB=x((sSt,jX)=>{"use strict";function G3e(e){return function(t){return e(t)}}jX.exports=G3e});var IB=x((PE,i0)=>{"use strict";var $3e=EP(),ZX=typeof PE=="object"&&PE&&!PE.nodeType&&PE,LE=ZX&&typeof i0=="object"&&i0&&!i0.nodeType&&i0,Y3e=LE&&LE.exports===ZX,XU=Y3e&&$3e.process,K3e=function(){try{var e=LE&&LE.require&&LE.require("util").types;return e||XU&&XU.binding&&XU.binding("util")}catch{}}();i0.exports=K3e});var eO=x((oSt,tee)=>{"use strict";var z3e=JX(),J3e=wB(),XX=IB(),eee=XX&&XX.isTypedArray,j3e=eee?J3e(eee):z3e;tee.exports=j3e});var tO=x((aSt,ree)=>{"use strict";var Z3e=MX(),X3e=OX(),e5e=QE(),t5e=_B(),r5e=YX(),n5e=eO(),i5e=Object.prototype,s5e=i5e.hasOwnProperty;function o5e(e,t){var r=e5e(e),n=!r&&X3e(e),i=!r&&!n&&t5e(e),s=!r&&!n&&!i&&n5e(e),o=r||n||i||s,a=o?Z3e(e.length,String):[],l=a.length;for(var c in e)(t||s5e.call(e,c))&&!(o&&(c=="length"||i&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||r5e(c,l)))&&a.push(c);return a}ree.exports=o5e});var SB=x((lSt,nee)=>{"use strict";var a5e=Object.prototype;function l5e(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||a5e;return e===r}nee.exports=l5e});var rO=x((cSt,iee)=>{"use strict";function c5e(e,t){return function(r){return e(t(r))}}iee.exports=c5e});var oee=x((uSt,see)=>{"use strict";var u5e=rO(),d5e=u5e(Object.keys,Object);see.exports=d5e});var lee=x((dSt,aee)=>{"use strict";var f5e=SB(),h5e=oee(),g5e=Object.prototype,p5e=g5e.hasOwnProperty;function A5e(e){if(!f5e(e))return h5e(e);var t=[];for(var r in Object(e))p5e.call(e,r)&&r!="constructor"&&t.push(r);return t}aee.exports=A5e});var nO=x((fSt,cee)=>{"use strict";var m5e=qU(),y5e=ZU();function C5e(e){return e!=null&&y5e(e.length)&&!m5e(e)}cee.exports=C5e});var BB=x((hSt,uee)=>{"use strict";var v5e=tO(),E5e=lee(),b5e=nO();function x5e(e){return b5e(e)?v5e(e):E5e(e)}uee.exports=x5e});var iO=x((gSt,dee)=>{"use strict";var _5e=JU(),w5e=xB(),I5e=BB();function S5e(e){return _5e(e,I5e,w5e)}dee.exports=S5e});var gee=x((pSt,hee)=>{"use strict";var fee=iO(),B5e=1,D5e=Object.prototype,T5e=D5e.hasOwnProperty;function R5e(e,t,r,n,i,s){var o=r&B5e,a=fee(e),l=a.length,c=fee(t),u=c.length;if(l!=u&&!o)return!1;for(var f=l;f--;){var p=a[f];if(!(o?p in t:T5e.call(t,p)))return!1}var g=s.get(e),A=s.get(t);if(g&&A)return g==t&&A==e;var y=!0;s.set(e,t),s.set(t,e);for(var C=o;++f<l;){p=a[f];var v=e[p],b=t[p];if(n)var w=o?n(b,v,p,t,e,s):n(v,b,p,e,t,s);if(!(w===void 0?v===b||i(v,b,r,n,s):w)){y=!1;break}C||(C=p=="constructor")}if(y&&!C){var B=e.constructor,F=t.constructor;B!=F&&"constructor"in e&&"constructor"in t&&!(typeof B=="function"&&B instanceof B&&typeof F=="function"&&F instanceof F)&&(y=!1)}return s.delete(e),s.delete(t),y}hee.exports=R5e});var Aee=x((ASt,pee)=>{"use strict";var k5e=nh(),F5e=sl(),M5e=k5e(F5e,"DataView");pee.exports=M5e});var yee=x((mSt,mee)=>{"use strict";var Q5e=nh(),N5e=sl(),P5e=Q5e(N5e,"Promise");mee.exports=P5e});var vee=x((ySt,Cee)=>{"use strict";var L5e=nh(),U5e=sl(),O5e=L5e(U5e,"Set");Cee.exports=O5e});var bee=x((CSt,Eee)=>{"use strict";var q5e=nh(),V5e=sl(),H5e=q5e(V5e,"WeakMap");Eee.exports=H5e});var UE=x((vSt,Dee)=>{"use strict";var sO=Aee(),oO=EB(),aO=yee(),lO=vee(),cO=bee(),Bee=cm(),s0=HU(),xee="[object Map]",W5e="[object Object]",_ee="[object Promise]",wee="[object Set]",Iee="[object WeakMap]",See="[object DataView]",G5e=s0(sO),$5e=s0(oO),Y5e=s0(aO),K5e=s0(lO),z5e=s0(cO),mp=Bee;(sO&&mp(new sO(new ArrayBuffer(1)))!=See||oO&&mp(new oO)!=xee||aO&&mp(aO.resolve())!=_ee||lO&&mp(new lO)!=wee||cO&&mp(new cO)!=Iee)&&(mp=function(e){var t=Bee(e),r=t==W5e?e.constructor:void 0,n=r?s0(r):"";if(n)switch(n){case G5e:return See;case $5e:return xee;case Y5e:return _ee;case K5e:return wee;case z5e:return Iee}return t});Dee.exports=mp});var Pee=x((ESt,Nee)=>{"use strict";var uO=GU(),J5e=$U(),j5e=_X(),Z5e=gee(),Tee=UE(),Ree=QE(),kee=_B(),X5e=eO(),eHe=1,Fee="[object Arguments]",Mee="[object Array]",DB="[object Object]",tHe=Object.prototype,Qee=tHe.hasOwnProperty;function rHe(e,t,r,n,i,s){var o=Ree(e),a=Ree(t),l=o?Mee:Tee(e),c=a?Mee:Tee(t);l=l==Fee?DB:l,c=c==Fee?DB:c;var u=l==DB,f=c==DB,p=l==c;if(p&&kee(e)){if(!kee(t))return!1;o=!0,u=!1}if(p&&!u)return s||(s=new uO),o||X5e(e)?J5e(e,t,r,n,i,s):j5e(e,t,l,r,n,i,s);if(!(r&eHe)){var g=u&&Qee.call(e,"__wrapped__"),A=f&&Qee.call(t,"__wrapped__");if(g||A){var y=g?e.value():e,C=A?t.value():t;return s||(s=new uO),i(y,C,r,n,s)}}return p?(s||(s=new uO),Z5e(e,t,r,n,i,s)):!1}Nee.exports=rHe});var qee=x((bSt,Oee)=>{"use strict";var nHe=Pee(),Lee=qf();function Uee(e,t,r,n,i){return e===t?!0:e==null||t==null||!Lee(e)&&!Lee(t)?e!==e&&t!==t:nHe(e,t,r,n,Uee,i)}Oee.exports=Uee});var Hee=x((xSt,Vee)=>{"use strict";var iHe=qee();function sHe(e,t){return iHe(e,t)}Vee.exports=sHe});var Un=x((_St,Wee)=>{"use strict";Wee.exports={kClose:Symbol("close"),kDestroy:Symbol("destroy"),kDispatch:Symbol("dispatch"),kUrl:Symbol("url"),kWriting:Symbol("writing"),kResuming:Symbol("resuming"),kQueue:Symbol("queue"),kConnect:Symbol("connect"),kConnecting:Symbol("connecting"),kKeepAliveDefaultTimeout:Symbol("default keep alive timeout"),kKeepAliveMaxTimeout:Symbol("max keep alive timeout"),kKeepAliveTimeoutThreshold:Symbol("keep alive timeout threshold"),kKeepAliveTimeoutValue:Symbol("keep alive timeout"),kKeepAlive:Symbol("keep alive"),kHeadersTimeout:Symbol("headers timeout"),kBodyTimeout:Symbol("body timeout"),kServerName:Symbol("server name"),kLocalAddress:Symbol("local address"),kHost:Symbol("host"),kNoRef:Symbol("no ref"),kBodyUsed:Symbol("used"),kBody:Symbol("abstracted request body"),kRunning:Symbol("running"),kBlocking:Symbol("blocking"),kPending:Symbol("pending"),kSize:Symbol("size"),kBusy:Symbol("busy"),kQueued:Symbol("queued"),kFree:Symbol("free"),kConnected:Symbol("connected"),kClosed:Symbol("closed"),kNeedDrain:Symbol("need drain"),kReset:Symbol("reset"),kDestroyed:Symbol.for("nodejs.stream.destroyed"),kResume:Symbol("resume"),kOnError:Symbol("on error"),kMaxHeadersSize:Symbol("max headers size"),kRunningIdx:Symbol("running index"),kPendingIdx:Symbol("pending index"),kError:Symbol("error"),kClients:Symbol("clients"),kClient:Symbol("client"),kParser:Symbol("parser"),kOnDestroyed:Symbol("destroy callbacks"),kPipelining:Symbol("pipelining"),kSocket:Symbol("socket"),kHostHeader:Symbol("host header"),kConnector:Symbol("connector"),kStrictContentLength:Symbol("strict content length"),kMaxRedirections:Symbol("maxRedirections"),kMaxRequests:Symbol("maxRequestsPerClient"),kProxy:Symbol("proxy agent options"),kCounter:Symbol("socket request counter"),kInterceptors:Symbol("dispatch interceptors"),kMaxResponseSize:Symbol("max response size"),kHTTP2Session:Symbol("http2Session"),kHTTP2SessionState:Symbol("http2Session state"),kRetryHandlerDefaultRetry:Symbol("retry agent default retry"),kConstruct:Symbol("constructable"),kListeners:Symbol("listeners"),kHTTPContext:Symbol("http context"),kMaxConcurrentStreams:Symbol("max concurrent streams"),kNoProxyAgent:Symbol("no proxy agent"),kHttpProxyAgent:Symbol("http proxy agent"),kHttpsProxyAgent:Symbol("https proxy agent")}});var $r=x((wSt,Gee)=>{"use strict";var Gn=class extends Error{constructor(t){super(t),this.name="UndiciError",this.code="UND_ERR"}},dO=class extends Gn{constructor(t){super(t),this.name="ConnectTimeoutError",this.message=t||"Connect Timeout Error",this.code="UND_ERR_CONNECT_TIMEOUT"}},fO=class extends Gn{constructor(t){super(t),this.name="HeadersTimeoutError",this.message=t||"Headers Timeout Error",this.code="UND_ERR_HEADERS_TIMEOUT"}},hO=class extends Gn{constructor(t){super(t),this.name="HeadersOverflowError",this.message=t||"Headers Overflow Error",this.code="UND_ERR_HEADERS_OVERFLOW"}},gO=class extends Gn{constructor(t){super(t),this.name="BodyTimeoutError",this.message=t||"Body Timeout Error",this.code="UND_ERR_BODY_TIMEOUT"}},pO=class extends Gn{constructor(t,r,n,i){super(t),this.name="ResponseStatusCodeError",this.message=t||"Response Status Code Error",this.code="UND_ERR_RESPONSE_STATUS_CODE",this.body=i,this.status=r,this.statusCode=r,this.headers=n}},AO=class extends Gn{constructor(t){super(t),this.name="InvalidArgumentError",this.message=t||"Invalid Argument Error",this.code="UND_ERR_INVALID_ARG"}},mO=class extends Gn{constructor(t){super(t),this.name="InvalidReturnValueError",this.message=t||"Invalid Return Value Error",this.code="UND_ERR_INVALID_RETURN_VALUE"}},TB=class extends Gn{constructor(t){super(t),this.name="AbortError",this.message=t||"The operation was aborted"}},yO=class extends TB{constructor(t){super(t),this.name="AbortError",this.message=t||"Request aborted",this.code="UND_ERR_ABORTED"}},CO=class extends Gn{constructor(t){super(t),this.name="InformationalError",this.message=t||"Request information",this.code="UND_ERR_INFO"}},vO=class extends Gn{constructor(t){super(t),this.name="RequestContentLengthMismatchError",this.message=t||"Request body length does not match content-length header",this.code="UND_ERR_REQ_CONTENT_LENGTH_MISMATCH"}},EO=class extends Gn{constructor(t){super(t),this.name="ResponseContentLengthMismatchError",this.message=t||"Response body length does not match content-length header",this.code="UND_ERR_RES_CONTENT_LENGTH_MISMATCH"}},bO=class extends Gn{constructor(t){super(t),this.name="ClientDestroyedError",this.message=t||"The client is destroyed",this.code="UND_ERR_DESTROYED"}},xO=class extends Gn{constructor(t){super(t),this.name="ClientClosedError",this.message=t||"The client is closed",this.code="UND_ERR_CLOSED"}},_O=class extends Gn{constructor(t,r){super(t),this.name="SocketError",this.message=t||"Socket error",this.code="UND_ERR_SOCKET",this.socket=r}},wO=class extends Gn{constructor(t){super(t),this.name="NotSupportedError",this.message=t||"Not supported error",this.code="UND_ERR_NOT_SUPPORTED"}},IO=class extends Gn{constructor(t){super(t),this.name="MissingUpstreamError",this.message=t||"No upstream has been added to the BalancedPool",this.code="UND_ERR_BPL_MISSING_UPSTREAM"}},SO=class extends Error{constructor(t,r,n){super(t),this.name="HTTPParserError",this.code=r?`HPE_${r}`:void 0,this.data=n?n.toString():void 0}},BO=class extends Gn{constructor(t){super(t),this.name="ResponseExceededMaxSizeError",this.message=t||"Response content exceeded max size",this.code="UND_ERR_RES_EXCEEDED_MAX_SIZE"}},DO=class extends Gn{constructor(t,r,{headers:n,data:i}){super(t),this.name="RequestRetryError",this.message=t||"Request retry error",this.code="UND_ERR_REQ_RETRY",this.statusCode=r,this.data=i,this.headers=n}},TO=class extends Gn{constructor(t,r,{headers:n,data:i}){super(t),this.name="ResponseError",this.message=t||"Response error",this.code="UND_ERR_RESPONSE",this.statusCode=r,this.data=i,this.headers=n}},RO=class extends Gn{constructor(t,r,n){super(r,{cause:t,...n??{}}),this.name="SecureProxyConnectionError",this.message=r||"Secure Proxy Connection failed",this.code="UND_ERR_PRX_TLS",this.cause=t}};Gee.exports={AbortError:TB,HTTPParserError:SO,UndiciError:Gn,HeadersTimeoutError:fO,HeadersOverflowError:hO,BodyTimeoutError:gO,RequestContentLengthMismatchError:vO,ConnectTimeoutError:dO,ResponseStatusCodeError:pO,InvalidArgumentError:AO,InvalidReturnValueError:mO,RequestAbortedError:yO,ClientDestroyedError:bO,ClientClosedError:xO,InformationalError:CO,SocketError:_O,NotSupportedError:wO,ResponseContentLengthMismatchError:EO,BalancedPoolMissingUpstreamError:IO,ResponseExceededMaxSizeError:BO,RequestRetryError:DO,ResponseError:TO,SecureProxyConnectionError:RO}});var kB=x((ISt,$ee)=>{"use strict";var RB={},kO=["Accept","Accept-Encoding","Accept-Language","Accept-Ranges","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Age","Allow","Alt-Svc","Alt-Used","Authorization","Cache-Control","Clear-Site-Data","Connection","Content-Disposition","Content-Encoding","Content-Language","Content-Length","Content-Location","Content-Range","Content-Security-Policy","Content-Security-Policy-Report-Only","Content-Type","Cookie","Cross-Origin-Embedder-Policy","Cross-Origin-Opener-Policy","Cross-Origin-Resource-Policy","Date","Device-Memory","Downlink","ECT","ETag","Expect","Expect-CT","Expires","Forwarded","From","Host","If-Match","If-Modified-Since","If-None-Match","If-Range","If-Unmodified-Since","Keep-Alive","Last-Modified","Link","Location","Max-Forwards","Origin","Permissions-Policy","Pragma","Proxy-Authenticate","Proxy-Authorization","RTT","Range","Referer","Referrer-Policy","Refresh","Retry-After","Sec-WebSocket-Accept","Sec-WebSocket-Extensions","Sec-WebSocket-Key","Sec-WebSocket-Protocol","Sec-WebSocket-Version","Server","Server-Timing","Service-Worker-Allowed","Service-Worker-Navigation-Preload","Set-Cookie","SourceMap","Strict-Transport-Security","Supports-Loading-Mode","TE","Timing-Allow-Origin","Trailer","Transfer-Encoding","Upgrade","Upgrade-Insecure-Requests","User-Agent","Vary","Via","WWW-Authenticate","X-Content-Type-Options","X-DNS-Prefetch-Control","X-Frame-Options","X-Permitted-Cross-Domain-Policies","X-Powered-By","X-Requested-With","X-XSS-Protection"];for(let e=0;e<kO.length;++e){let t=kO[e],r=t.toLowerCase();RB[t]=RB[r]=r}Object.setPrototypeOf(RB,null);$ee.exports={wellknownHeaderNames:kO,headerNameLowerCasedRecord:RB}});var Jee=x((SSt,zee)=>{"use strict";var{wellknownHeaderNames:Yee,headerNameLowerCasedRecord:oHe}=kB(),FO=class e{value=null;left=null;middle=null;right=null;code;constructor(t,r,n){if(n===void 0||n>=t.length)throw new TypeError("Unreachable");if((this.code=t.charCodeAt(n))>127)throw new TypeError("key must be ascii string");t.length!==++n?this.middle=new e(t,r,n):this.value=r}add(t,r){let n=t.length;if(n===0)throw new TypeError("Unreachable");let i=0,s=this;for(;;){let o=t.charCodeAt(i);if(o>127)throw new TypeError("key must be ascii string");if(s.code===o)if(n===++i){s.value=r;break}else if(s.middle!==null)s=s.middle;else{s.middle=new e(t,r,i);break}else if(s.code<o)if(s.left!==null)s=s.left;else{s.left=new e(t,r,i);break}else if(s.right!==null)s=s.right;else{s.right=new e(t,r,i);break}}}search(t){let r=t.length,n=0,i=this;for(;i!==null&&n<r;){let s=t[n];for(s<=90&&s>=65&&(s|=32);i!==null;){if(s===i.code){if(r===++n)return i;i=i.middle;break}i=i.code<s?i.left:i.right}}return null}},FB=class{node=null;insert(t,r){this.node===null?this.node=new FO(t,r,0):this.node.add(t,r)}lookup(t){return this.node?.search(t)?.value??null}},Kee=new FB;for(let e=0;e<Yee.length;++e){let t=oHe[Yee[e]];Kee.insert(t,t)}zee.exports={TernarySearchTree:FB,tree:Kee}});var rr=x((BSt,fte)=>{"use strict";var OE=require("assert"),{kDestroyed:Zee,kBodyUsed:o0,kListeners:MO,kBody:jee}=Un(),{IncomingMessage:aHe}=require("http"),NB=require("stream"),lHe=require("net"),{Blob:cHe}=require("buffer"),uHe=require("util"),{stringify:dHe}=require("querystring"),{EventEmitter:fHe}=require("events"),{InvalidArgumentError:Xi}=$r(),{headerNameLowerCasedRecord:hHe}=kB(),{tree:Xee}=Jee(),[gHe,pHe]=process.versions.node.split(".").map(e=>Number(e)),QB=class{constructor(t){this[jee]=t,this[o0]=!1}async*[Symbol.asyncIterator](){OE(!this[o0],"disturbed"),this[o0]=!0,yield*this[jee]}};function AHe(e){return PB(e)?(ite(e)===0&&e.on("data",function(){OE(!1)}),typeof e.readableDidRead!="boolean"&&(e[o0]=!1,fHe.prototype.on.call(e,"data",function(){this[o0]=!0})),e):e&&typeof e.pipeTo=="function"?new QB(e):e&&typeof e!="string"&&!ArrayBuffer.isView(e)&&nte(e)?new QB(e):e}function mHe(){}function PB(e){return e&&typeof e=="object"&&typeof e.pipe=="function"&&typeof e.on=="function"}function ete(e){if(e===null)return!1;if(e instanceof cHe)return!0;if(typeof e!="object")return!1;{let t=e[Symbol.toStringTag];return(t==="Blob"||t==="File")&&("stream"in e&&typeof e.stream=="function"||"arrayBuffer"in e&&typeof e.arrayBuffer=="function")}}function yHe(e,t){if(e.includes("?")||e.includes("#"))throw new Error('Query params cannot be passed when url already contains "?" or "#".');let r=dHe(t);return r&&(e+="?"+r),e}function tte(e){let t=parseInt(e,10);return t===Number(e)&&t>=0&&t<=65535}function MB(e){return e!=null&&e[0]==="h"&&e[1]==="t"&&e[2]==="t"&&e[3]==="p"&&(e[4]===":"||e[4]==="s"&&e[5]===":")}function rte(e){if(typeof e=="string"){if(e=new URL(e),!MB(e.origin||e.protocol))throw new Xi("Invalid URL protocol: the URL must start with `http:` or `https:`.");return e}if(!e||typeof e!="object")throw new Xi("Invalid URL: The URL argument must be a non-null object.");if(!(e instanceof URL)){if(e.port!=null&&e.port!==""&&tte(e.port)===!1)throw new Xi("Invalid URL: port must be a valid integer or a string representation of an integer.");if(e.path!=null&&typeof e.path!="string")throw new Xi("Invalid URL path: the path must be a string or null/undefined.");if(e.pathname!=null&&typeof e.pathname!="string")throw new Xi("Invalid URL pathname: the pathname must be a string or null/undefined.");if(e.hostname!=null&&typeof e.hostname!="string")throw new Xi("Invalid URL hostname: the hostname must be a string or null/undefined.");if(e.origin!=null&&typeof e.origin!="string")throw new Xi("Invalid URL origin: the origin must be a string or null/undefined.");if(!MB(e.origin||e.protocol))throw new Xi("Invalid URL protocol: the URL must start with `http:` or `https:`.");let t=e.port!=null?e.port:e.protocol==="https:"?443:80,r=e.origin!=null?e.origin:`${e.protocol||""}//${e.hostname||""}:${t}`,n=e.path!=null?e.path:`${e.pathname||""}${e.search||""}`;return r[r.length-1]==="/"&&(r=r.slice(0,r.length-1)),n&&n[0]!=="/"&&(n=`/${n}`),new URL(`${r}${n}`)}if(!MB(e.origin||e.protocol))throw new Xi("Invalid URL protocol: the URL must start with `http:` or `https:`.");return e}function CHe(e){if(e=rte(e),e.pathname!=="/"||e.search||e.hash)throw new Xi("invalid url");return e}function vHe(e){if(e[0]==="["){let r=e.indexOf("]");return OE(r!==-1),e.substring(1,r)}let t=e.indexOf(":");return t===-1?e:e.substring(0,t)}function EHe(e){if(!e)return null;OE(typeof e=="string");let t=vHe(e);return lHe.isIP(t)?"":t}function bHe(e){return JSON.parse(JSON.stringify(e))}function xHe(e){return e!=null&&typeof e[Symbol.asyncIterator]=="function"}function nte(e){return e!=null&&(typeof e[Symbol.iterator]=="function"||typeof e[Symbol.asyncIterator]=="function")}function ite(e){if(e==null)return 0;if(PB(e)){let t=e._readableState;return t&&t.objectMode===!1&&t.ended===!0&&Number.isFinite(t.length)?t.length:null}else{if(ete(e))return e.size!=null?e.size:null;if(ate(e))return e.byteLength}return null}function ste(e){return e&&!!(e.destroyed||e[Zee]||NB.isDestroyed?.(e))}function _He(e,t){e==null||!PB(e)||ste(e)||(typeof e.destroy=="function"?(Object.getPrototypeOf(e).constructor===aHe&&(e.socket=null),e.destroy(t)):t&&queueMicrotask(()=>{e.emit("error",t)}),e.destroyed!==!0&&(e[Zee]=!0))}var wHe=/timeout=(\d+)/;function IHe(e){let t=e.toString().match(wHe);return t?parseInt(t[1],10)*1e3:null}function ote(e){return typeof e=="string"?hHe[e]??e.toLowerCase():Xee.lookup(e)??e.toString("latin1").toLowerCase()}function SHe(e){return Xee.lookup(e)??e.toString("latin1").toLowerCase()}function BHe(e,t){t===void 0&&(t={});for(let r=0;r<e.length;r+=2){let n=ote(e[r]),i=t[n];if(i)typeof i=="string"&&(i=[i],t[n]=i),i.push(e[r+1].toString("utf8"));else{let s=e[r+1];typeof s=="string"?t[n]=s:t[n]=Array.isArray(s)?s.map(o=>o.toString("utf8")):s.toString("utf8")}}return"content-length"in t&&"content-disposition"in t&&(t["content-disposition"]=Buffer.from(t["content-disposition"]).toString("latin1")),t}function DHe(e){let t=e.length,r=new Array(t),n=!1,i=-1,s,o,a=0;for(let l=0;l<e.length;l+=2)s=e[l],o=e[l+1],typeof s!="string"&&(s=s.toString()),typeof o!="string"&&(o=o.toString("utf8")),a=s.length,a===14&&s[7]==="-"&&(s==="content-length"||s.toLowerCase()==="content-length")?n=!0:a===19&&s[7]==="-"&&(s==="content-disposition"||s.toLowerCase()==="content-disposition")&&(i=l+1),r[l]=s,r[l+1]=o;return n&&i!==-1&&(r[i]=Buffer.from(r[i]).toString("latin1")),r}function ate(e){return e instanceof Uint8Array||Buffer.isBuffer(e)}function THe(e,t,r){if(!e||typeof e!="object")throw new Xi("handler must be an object");if(typeof e.onConnect!="function")throw new Xi("invalid onConnect method");if(typeof e.onError!="function")throw new Xi("invalid onError method");if(typeof e.onBodySent!="function"&&e.onBodySent!==void 0)throw new Xi("invalid onBodySent method");if(r||t==="CONNECT"){if(typeof e.onUpgrade!="function")throw new Xi("invalid onUpgrade method")}else{if(typeof e.onHeaders!="function")throw new Xi("invalid onHeaders method");if(typeof e.onData!="function")throw new Xi("invalid onData method");if(typeof e.onComplete!="function")throw new Xi("invalid onComplete method")}}function RHe(e){return!!(e&&(NB.isDisturbed(e)||e[o0]))}function kHe(e){return!!(e&&NB.isErrored(e))}function FHe(e){return!!(e&&NB.isReadable(e))}function MHe(e){return{localAddress:e.localAddress,localPort:e.localPort,remoteAddress:e.remoteAddress,remotePort:e.remotePort,remoteFamily:e.remoteFamily,timeout:e.timeout,bytesWritten:e.bytesWritten,bytesRead:e.bytesRead}}function QHe(e){let t;return new ReadableStream({async start(){t=e[Symbol.asyncIterator]()},async pull(r){let{done:n,value:i}=await t.next();if(n)queueMicrotask(()=>{r.close(),r.byobRequest?.respond(0)});else{let s=Buffer.isBuffer(i)?i:Buffer.from(i);s.byteLength&&r.enqueue(new Uint8Array(s))}return r.desiredSize>0},async cancel(r){await t.return()},type:"bytes"})}function NHe(e){return e&&typeof e=="object"&&typeof e.append=="function"&&typeof e.delete=="function"&&typeof e.get=="function"&&typeof e.getAll=="function"&&typeof e.has=="function"&&typeof e.set=="function"&&e[Symbol.toStringTag]==="FormData"}function PHe(e,t){return"addEventListener"in e?(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)):(e.addListener("abort",t),()=>e.removeListener("abort",t))}var LHe=typeof String.prototype.toWellFormed=="function",UHe=typeof String.prototype.isWellFormed=="function";function lte(e){return LHe?`${e}`.toWellFormed():uHe.toUSVString(e)}function OHe(e){return UHe?`${e}`.isWellFormed():lte(e)===`${e}`}function cte(e){switch(e){case 34:case 40:case 41:case 44:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 123:case 125:return!1;default:return e>=33&&e<=126}}function qHe(e){if(e.length===0)return!1;for(let t=0;t<e.length;++t)if(!cte(e.charCodeAt(t)))return!1;return!0}var VHe=/[^\t\x20-\x7e\x80-\xff]/;function HHe(e){return!VHe.test(e)}function WHe(e){if(e==null||e==="")return{start:0,end:null,size:null};let t=e?e.match(/^bytes (\d+)-(\d+)\/(\d+)?$/):null;return t?{start:parseInt(t[1]),end:t[2]?parseInt(t[2]):null,size:t[3]?parseInt(t[3]):null}:null}function GHe(e,t,r){return(e[MO]??=[]).push([t,r]),e.on(t,r),e}function $He(e){for(let[t,r]of e[MO]??[])e.removeListener(t,r);e[MO]=null}function YHe(e,t,r){try{t.onError(r),OE(t.aborted)}catch(n){e.emit("error",n)}}var ute=Object.create(null);ute.enumerable=!0;var QO={delete:"DELETE",DELETE:"DELETE",get:"GET",GET:"GET",head:"HEAD",HEAD:"HEAD",options:"OPTIONS",OPTIONS:"OPTIONS",post:"POST",POST:"POST",put:"PUT",PUT:"PUT"},dte={...QO,patch:"patch",PATCH:"PATCH"};Object.setPrototypeOf(QO,null);Object.setPrototypeOf(dte,null);fte.exports={kEnumerableProperty:ute,nop:mHe,isDisturbed:RHe,isErrored:kHe,isReadable:FHe,toUSVString:lte,isUSVString:OHe,isBlobLike:ete,parseOrigin:CHe,parseURL:rte,getServerName:EHe,isStream:PB,isIterable:nte,isAsyncIterable:xHe,isDestroyed:ste,headerNameToString:ote,bufferToLowerCasedHeaderName:SHe,addListener:GHe,removeAllListeners:$He,errorRequest:YHe,parseRawHeaders:DHe,parseHeaders:BHe,parseKeepAliveTimeout:IHe,destroy:_He,bodyLength:ite,deepClone:bHe,ReadableStreamFrom:QHe,isBuffer:ate,validateHandler:THe,getSocketInfo:MHe,isFormDataLike:NHe,buildURL:yHe,addAbortListener:PHe,isValidHTTPToken:qHe,isValidHeaderValue:HHe,isTokenCharCode:cte,parseRangeHeader:WHe,normalizedMethodRecordsBase:QO,normalizedMethodRecords:dte,isValidPort:tte,isHttpOrHttpsPrefixed:MB,nodeMajor:gHe,nodeMinor:pHe,safeHTTPMethods:["GET","HEAD","OPTIONS","TRACE"],wrapRequestBody:AHe}});var a0=x((DSt,gte)=>{"use strict";var en=require("diagnostics_channel"),PO=require("util"),LB=PO.debuglog("undici"),NO=PO.debuglog("fetch"),yp=PO.debuglog("websocket"),hte=!1,KHe={beforeConnect:en.channel("undici:client:beforeConnect"),connected:en.channel("undici:client:connected"),connectError:en.channel("undici:client:connectError"),sendHeaders:en.channel("undici:client:sendHeaders"),create:en.channel("undici:request:create"),bodySent:en.channel("undici:request:bodySent"),headers:en.channel("undici:request:headers"),trailers:en.channel("undici:request:trailers"),error:en.channel("undici:request:error"),open:en.channel("undici:websocket:open"),close:en.channel("undici:websocket:close"),socketError:en.channel("undici:websocket:socket_error"),ping:en.channel("undici:websocket:ping"),pong:en.channel("undici:websocket:pong")};if(LB.enabled||NO.enabled){let e=NO.enabled?NO:LB;en.channel("undici:client:beforeConnect").subscribe(t=>{let{connectParams:{version:r,protocol:n,port:i,host:s}}=t;e("connecting to %s using %s%s",`${s}${i?`:${i}`:""}`,n,r)}),en.channel("undici:client:connected").subscribe(t=>{let{connectParams:{version:r,protocol:n,port:i,host:s}}=t;e("connected to %s using %s%s",`${s}${i?`:${i}`:""}`,n,r)}),en.channel("undici:client:connectError").subscribe(t=>{let{connectParams:{version:r,protocol:n,port:i,host:s},error:o}=t;e("connection to %s using %s%s errored - %s",`${s}${i?`:${i}`:""}`,n,r,o.message)}),en.channel("undici:client:sendHeaders").subscribe(t=>{let{request:{method:r,path:n,origin:i}}=t;e("sending request to %s %s/%s",r,i,n)}),en.channel("undici:request:headers").subscribe(t=>{let{request:{method:r,path:n,origin:i},response:{statusCode:s}}=t;e("received response to %s %s/%s - HTTP %d",r,i,n,s)}),en.channel("undici:request:trailers").subscribe(t=>{let{request:{method:r,path:n,origin:i}}=t;e("trailers received from %s %s/%s",r,i,n)}),en.channel("undici:request:error").subscribe(t=>{let{request:{method:r,path:n,origin:i},error:s}=t;e("request to %s %s/%s errored - %s",r,i,n,s.message)}),hte=!0}if(yp.enabled){if(!hte){let e=LB.enabled?LB:yp;en.channel("undici:client:beforeConnect").subscribe(t=>{let{connectParams:{version:r,protocol:n,port:i,host:s}}=t;e("connecting to %s%s using %s%s",s,i?`:${i}`:"",n,r)}),en.channel("undici:client:connected").subscribe(t=>{let{connectParams:{version:r,protocol:n,port:i,host:s}}=t;e("connected to %s%s using %s%s",s,i?`:${i}`:"",n,r)}),en.channel("undici:client:connectError").subscribe(t=>{let{connectParams:{version:r,protocol:n,port:i,host:s},error:o}=t;e("connection to %s%s using %s%s errored - %s",s,i?`:${i}`:"",n,r,o.message)}),en.channel("undici:client:sendHeaders").subscribe(t=>{let{request:{method:r,path:n,origin:i}}=t;e("sending request to %s %s/%s",r,i,n)})}en.channel("undici:websocket:open").subscribe(e=>{let{address:{address:t,port:r}}=e;yp("connection opened %s%s",t,r?`:${r}`:"")}),en.channel("undici:websocket:close").subscribe(e=>{let{websocket:t,code:r,reason:n}=e;yp("closed connection to %s - %s %s",t.url,r,n)}),en.channel("undici:websocket:socket_error").subscribe(e=>{yp("connection errored - %s",e.message)}),en.channel("undici:websocket:ping").subscribe(e=>{yp("ping received")}),en.channel("undici:websocket:pong").subscribe(e=>{yp("pong received")})}gte.exports={channels:KHe}});var Cte=x((TSt,yte)=>{"use strict";var{InvalidArgumentError:$n,NotSupportedError:zHe}=$r(),kd=require("assert"),{isValidHTTPToken:mte,isValidHeaderValue:pte,isStream:JHe,destroy:jHe,isBuffer:ZHe,isFormDataLike:XHe,isIterable:eWe,isBlobLike:tWe,buildURL:rWe,validateHandler:nWe,getServerName:iWe,normalizedMethodRecords:sWe}=rr(),{channels:su}=a0(),{headerNameLowerCasedRecord:Ate}=kB(),oWe=/[^\u0021-\u00ff]/,fl=Symbol("handler"),LO=class{constructor(t,{path:r,method:n,body:i,headers:s,query:o,idempotent:a,blocking:l,upgrade:c,headersTimeout:u,bodyTimeout:f,reset:p,throwOnError:g,expectContinue:A,servername:y},C){if(typeof r!="string")throw new $n("path must be a string");if(r[0]!=="/"&&!(r.startsWith("http://")||r.startsWith("https://"))&&n!=="CONNECT")throw new $n("path must be an absolute URL or start with a slash");if(oWe.test(r))throw new $n("invalid request path");if(typeof n!="string")throw new $n("method must be a string");if(sWe[n]===void 0&&!mte(n))throw new $n("invalid request method");if(c&&typeof c!="string")throw new $n("upgrade must be a string");if(u!=null&&(!Number.isFinite(u)||u<0))throw new $n("invalid headersTimeout");if(f!=null&&(!Number.isFinite(f)||f<0))throw new $n("invalid bodyTimeout");if(p!=null&&typeof p!="boolean")throw new $n("invalid reset");if(A!=null&&typeof A!="boolean")throw new $n("invalid expectContinue");if(this.headersTimeout=u,this.bodyTimeout=f,this.throwOnError=g===!0,this.method=n,this.abort=null,i==null)this.body=null;else if(JHe(i)){this.body=i;let v=this.body._readableState;(!v||!v.autoDestroy)&&(this.endHandler=function(){jHe(this)},this.body.on("end",this.endHandler)),this.errorHandler=b=>{this.abort?this.abort(b):this.error=b},this.body.on("error",this.errorHandler)}else if(ZHe(i))this.body=i.byteLength?i:null;else if(ArrayBuffer.isView(i))this.body=i.buffer.byteLength?Buffer.from(i.buffer,i.byteOffset,i.byteLength):null;else if(i instanceof ArrayBuffer)this.body=i.byteLength?Buffer.from(i):null;else if(typeof i=="string")this.body=i.length?Buffer.from(i):null;else if(XHe(i)||eWe(i)||tWe(i))this.body=i;else throw new $n("body must be a string, a Buffer, a Readable stream, an iterable, or an async iterable");if(this.completed=!1,this.aborted=!1,this.upgrade=c||null,this.path=o?rWe(r,o):r,this.origin=t,this.idempotent=a??(n==="HEAD"||n==="GET"),this.blocking=l??!1,this.reset=p??null,this.host=null,this.contentLength=null,this.contentType=null,this.headers=[],this.expectContinue=A??!1,Array.isArray(s)){if(s.length%2!==0)throw new $n("headers array must be even");for(let v=0;v<s.length;v+=2)UB(this,s[v],s[v+1])}else if(s&&typeof s=="object")if(s[Symbol.iterator])for(let v of s){if(!Array.isArray(v)||v.length!==2)throw new $n("headers must be in key-value pair format");UB(this,v[0],v[1])}else{let v=Object.keys(s);for(let b=0;b<v.length;++b)UB(this,v[b],s[v[b]])}else if(s!=null)throw new $n("headers must be an object or an array");nWe(C,n,c),this.servername=y||iWe(this.host),this[fl]=C,su.create.hasSubscribers&&su.create.publish({request:this})}onBodySent(t){if(this[fl].onBodySent)try{return this[fl].onBodySent(t)}catch(r){this.abort(r)}}onRequestSent(){if(su.bodySent.hasSubscribers&&su.bodySent.publish({request:this}),this[fl].onRequestSent)try{return this[fl].onRequestSent()}catch(t){this.abort(t)}}onConnect(t){if(kd(!this.aborted),kd(!this.completed),this.error)t(this.error);else return this.abort=t,this[fl].onConnect(t)}onResponseStarted(){return this[fl].onResponseStarted?.()}onHeaders(t,r,n,i){kd(!this.aborted),kd(!this.completed),su.headers.hasSubscribers&&su.headers.publish({request:this,response:{statusCode:t,headers:r,statusText:i}});try{return this[fl].onHeaders(t,r,n,i)}catch(s){this.abort(s)}}onData(t){kd(!this.aborted),kd(!this.completed);try{return this[fl].onData(t)}catch(r){return this.abort(r),!1}}onUpgrade(t,r,n){return kd(!this.aborted),kd(!this.completed),this[fl].onUpgrade(t,r,n)}onComplete(t){this.onFinally(),kd(!this.aborted),this.completed=!0,su.trailers.hasSubscribers&&su.trailers.publish({request:this,trailers:t});try{return this[fl].onComplete(t)}catch(r){this.onError(r)}}onError(t){if(this.onFinally(),su.error.hasSubscribers&&su.error.publish({request:this,error:t}),!this.aborted)return this.aborted=!0,this[fl].onError(t)}onFinally(){this.errorHandler&&(this.body.off("error",this.errorHandler),this.errorHandler=null),this.endHandler&&(this.body.off("end",this.endHandler),this.endHandler=null)}addHeader(t,r){return UB(this,t,r),this}};function UB(e,t,r){if(r&&typeof r=="object"&&!Array.isArray(r))throw new $n(`invalid ${t} header`);if(r===void 0)return;let n=Ate[t];if(n===void 0&&(n=t.toLowerCase(),Ate[n]===void 0&&!mte(n)))throw new $n("invalid header key");if(Array.isArray(r)){let i=[];for(let s=0;s<r.length;s++)if(typeof r[s]=="string"){if(!pte(r[s]))throw new $n(`invalid ${t} header`);i.push(r[s])}else if(r[s]===null)i.push("");else{if(typeof r[s]=="object")throw new $n(`invalid ${t} header`);i.push(`${r[s]}`)}r=i}else if(typeof r=="string"){if(!pte(r))throw new $n(`invalid ${t} header`)}else r===null?r="":r=`${r}`;if(e.host===null&&n==="host"){if(typeof r!="string")throw new $n("invalid host header");e.host=r}else if(e.contentLength===null&&n==="content-length"){if(e.contentLength=parseInt(r,10),!Number.isFinite(e.contentLength))throw new $n("invalid content-length header")}else if(e.contentType===null&&n==="content-type")e.contentType=r,e.headers.push(t,r);else{if(n==="transfer-encoding"||n==="keep-alive"||n==="upgrade")throw new $n(`invalid ${n} header`);if(n==="connection"){let i=typeof r=="string"?r.toLowerCase():null;if(i!=="close"&&i!=="keep-alive")throw new $n("invalid connection header");i==="close"&&(e.reset=!0)}else{if(n==="expect")throw new zHe("expect header not supported");e.headers.push(t,r)}}}yte.exports=LO});var qE=x((RSt,vte)=>{"use strict";var aWe=require("events"),OB=class extends aWe{dispatch(){throw new Error("not implemented")}close(){throw new Error("not implemented")}destroy(){throw new Error("not implemented")}compose(...t){let r=Array.isArray(t[0])?t[0]:t,n=this.dispatch.bind(this);for(let i of r)if(i!=null){if(typeof i!="function")throw new TypeError(`invalid interceptor, expected function received ${typeof i}`);if(n=i(n),n==null||typeof n!="function"||n.length!==2)throw new TypeError("invalid interceptor")}return new UO(this,n)}},UO=class extends OB{#e=null;#t=null;constructor(t,r){super(),this.#e=t,this.#t=r}dispatch(...t){this.#t(...t)}close(...t){return this.#e.close(...t)}destroy(...t){return this.#e.destroy(...t)}};vte.exports=OB});var d0=x((kSt,Ete)=>{"use strict";var lWe=qE(),{ClientDestroyedError:OO,ClientClosedError:cWe,InvalidArgumentError:l0}=$r(),{kDestroy:uWe,kClose:dWe,kClosed:VE,kDestroyed:c0,kDispatch:qO,kInterceptors:Cp}=Un(),Fd=Symbol("onDestroyed"),u0=Symbol("onClosed"),qB=Symbol("Intercepted Dispatch"),VO=class extends lWe{constructor(){super(),this[c0]=!1,this[Fd]=null,this[VE]=!1,this[u0]=[]}get destroyed(){return this[c0]}get closed(){return this[VE]}get interceptors(){return this[Cp]}set interceptors(t){if(t){for(let r=t.length-1;r>=0;r--)if(typeof this[Cp][r]!="function")throw new l0("interceptor must be an function")}this[Cp]=t}close(t){if(t===void 0)return new Promise((n,i)=>{this.close((s,o)=>s?i(s):n(o))});if(typeof t!="function")throw new l0("invalid callback");if(this[c0]){queueMicrotask(()=>t(new OO,null));return}if(this[VE]){this[u0]?this[u0].push(t):queueMicrotask(()=>t(null,null));return}this[VE]=!0,this[u0].push(t);let r=()=>{let n=this[u0];this[u0]=null;for(let i=0;i<n.length;i++)n[i](null,null)};this[dWe]().then(()=>this.destroy()).then(()=>{queueMicrotask(r)})}destroy(t,r){if(typeof t=="function"&&(r=t,t=null),r===void 0)return new Promise((i,s)=>{this.destroy(t,(o,a)=>o?s(o):i(a))});if(typeof r!="function")throw new l0("invalid callback");if(this[c0]){this[Fd]?this[Fd].push(r):queueMicrotask(()=>r(null,null));return}t||(t=new OO),this[c0]=!0,this[Fd]=this[Fd]||[],this[Fd].push(r);let n=()=>{let i=this[Fd];this[Fd]=null;for(let s=0;s<i.length;s++)i[s](null,null)};this[uWe](t).then(()=>{queueMicrotask(n)})}[qB](t,r){if(!this[Cp]||this[Cp].length===0)return this[qB]=this[qO],this[qO](t,r);let n=this[qO].bind(this);for(let i=this[Cp].length-1;i>=0;i--)n=this[Cp][i](n);return this[qB]=n,n(t,r)}dispatch(t,r){if(!r||typeof r!="object")throw new l0("handler must be an object");try{if(!t||typeof t!="object")throw new l0("opts must be an object.");if(this[c0]||this[Fd])throw new OO;if(this[VE])throw new cWe;return this[qB](t,r)}catch(n){if(typeof r.onError!="function")throw new l0("invalid onError method");return r.onError(n),!1}}};Ete.exports=VO});var zO=x((FSt,wte)=>{"use strict";var f0=0,HO=1e3,WO=(HO>>1)-1,Md,GO=Symbol("kFastTimer"),Qd=[],$O=-2,YO=-1,xte=0,bte=1;function KO(){f0+=WO;let e=0,t=Qd.length;for(;e<t;){let r=Qd[e];r._state===xte?(r._idleStart=f0-WO,r._state=bte):r._state===bte&&f0>=r._idleStart+r._idleTimeout&&(r._state=YO,r._idleStart=-1,r._onTimeout(r._timerArg)),r._state===YO?(r._state=$O,--t!==0&&(Qd[e]=Qd[t])):++e}Qd.length=t,Qd.length!==0&&_te()}function _te(){Md?Md.refresh():(clearTimeout(Md),Md=setTimeout(KO,WO),Md.unref&&Md.unref())}var VB=class{[GO]=!0;_state=$O;_idleTimeout=-1;_idleStart=-1;_onTimeout;_timerArg;constructor(t,r,n){this._onTimeout=t,this._idleTimeout=r,this._timerArg=n,this.refresh()}refresh(){this._state===$O&&Qd.push(this),(!Md||Qd.length===1)&&_te(),this._state=xte}clear(){this._state=YO,this._idleStart=-1}};wte.exports={setTimeout(e,t,r){return t<=HO?setTimeout(e,t,r):new VB(e,t,r)},clearTimeout(e){e[GO]?e.clear():clearTimeout(e)},setFastTimeout(e,t,r){return new VB(e,t,r)},clearFastTimeout(e){e.clear()},now(){return f0},tick(e=0){f0+=e-HO+1,KO(),KO()},reset(){f0=0,Qd.length=0,clearTimeout(Md),Md=null},kFastTimer:GO}});var HE=x((NSt,Tte)=>{"use strict";var fWe=require("net"),Ite=require("assert"),Dte=rr(),{InvalidArgumentError:hWe,ConnectTimeoutError:gWe}=$r(),HB=zO();function Ste(){}var JO,jO;global.FinalizationRegistry&&!(process.env.NODE_V8_COVERAGE||process.env.UNDICI_NO_FG)?jO=class{constructor(t){this._maxCachedSessions=t,this._sessionCache=new Map,this._sessionRegistry=new global.FinalizationRegistry(r=>{if(this._sessionCache.size<this._maxCachedSessions)return;let n=this._sessionCache.get(r);n!==void 0&&n.deref()===void 0&&this._sessionCache.delete(r)})}get(t){let r=this._sessionCache.get(t);return r?r.deref():null}set(t,r){this._maxCachedSessions!==0&&(this._sessionCache.set(t,new WeakRef(r)),this._sessionRegistry.register(r,t))}}:jO=class{constructor(t){this._maxCachedSessions=t,this._sessionCache=new Map}get(t){return this._sessionCache.get(t)}set(t,r){if(this._maxCachedSessions!==0){if(this._sessionCache.size>=this._maxCachedSessions){let{value:n}=this._sessionCache.keys().next();this._sessionCache.delete(n)}this._sessionCache.set(t,r)}}};function pWe({allowH2:e,maxCachedSessions:t,socketPath:r,timeout:n,session:i,...s}){if(t!=null&&(!Number.isInteger(t)||t<0))throw new hWe("maxCachedSessions must be a positive integer or zero");let o={path:r,...s},a=new jO(t??100);return n=n??1e4,e=e??!1,function({hostname:c,host:u,protocol:f,port:p,servername:g,localAddress:A,httpSocket:y},C){let v;if(f==="https:"){JO||(JO=require("tls")),g=g||o.servername||Dte.getServerName(u)||null;let w=g||c;Ite(w);let B=i||a.get(w)||null;p=p||443,v=JO.connect({highWaterMark:16384,...o,servername:g,session:B,localAddress:A,ALPNProtocols:e?["http/1.1","h2"]:["http/1.1"],socket:y,port:p,host:c}),v.on("session",function(F){a.set(w,F)})}else Ite(!y,"httpSocket can only be sent on TLS update"),p=p||80,v=fWe.connect({highWaterMark:64*1024,...o,localAddress:A,port:p,host:c});if(o.keepAlive==null||o.keepAlive){let w=o.keepAliveInitialDelay===void 0?6e4:o.keepAliveInitialDelay;v.setKeepAlive(!0,w)}let b=AWe(new WeakRef(v),{timeout:n,hostname:c,port:p});return v.setNoDelay(!0).once(f==="https:"?"secureConnect":"connect",function(){if(queueMicrotask(b),C){let w=C;C=null,w(null,this)}}).on("error",function(w){if(queueMicrotask(b),C){let B=C;C=null,B(w)}}),v}}var AWe=process.platform==="win32"?(e,t)=>{if(!t.timeout)return Ste;let r=null,n=null,i=HB.setFastTimeout(()=>{r=setImmediate(()=>{n=setImmediate(()=>Bte(e.deref(),t))})},t.timeout);return()=>{HB.clearFastTimeout(i),clearImmediate(r),clearImmediate(n)}}:(e,t)=>{if(!t.timeout)return Ste;let r=null,n=HB.setFastTimeout(()=>{r=setImmediate(()=>{Bte(e.deref(),t)})},t.timeout);return()=>{HB.clearFastTimeout(n),clearImmediate(r)}};function Bte(e,t){if(e==null)return;let r="Connect Timeout Error";Array.isArray(e.autoSelectFamilyAttemptedAddresses)?r+=` (attempted addresses: ${e.autoSelectFamilyAttemptedAddresses.join(", ")},`:r+=` (attempted address: ${t.hostname}:${t.port},`,r+=` timeout: ${t.timeout}ms)`,Dte.destroy(e,new gWe(r))}Tte.exports=pWe});var Rte=x(WB=>{"use strict";Object.defineProperty(WB,"__esModule",{value:!0});WB.enumToMap=void 0;function mWe(e){let t={};return Object.keys(e).forEach(r=>{let n=e[r];typeof n=="number"&&(t[r]=n)}),t}WB.enumToMap=mWe});var kte=x(_e=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0});_e.SPECIAL_HEADERS=_e.HEADER_STATE=_e.MINOR=_e.MAJOR=_e.CONNECTION_TOKEN_CHARS=_e.HEADER_CHARS=_e.TOKEN=_e.STRICT_TOKEN=_e.HEX=_e.URL_CHAR=_e.STRICT_URL_CHAR=_e.USERINFO_CHARS=_e.MARK=_e.ALPHANUM=_e.NUM=_e.HEX_MAP=_e.NUM_MAP=_e.ALPHA=_e.FINISH=_e.H_METHOD_MAP=_e.METHOD_MAP=_e.METHODS_RTSP=_e.METHODS_ICE=_e.METHODS_HTTP=_e.METHODS=_e.LENIENT_FLAGS=_e.FLAGS=_e.TYPE=_e.ERROR=void 0;var yWe=Rte(),CWe;(function(e){e[e.OK=0]="OK",e[e.INTERNAL=1]="INTERNAL",e[e.STRICT=2]="STRICT",e[e.LF_EXPECTED=3]="LF_EXPECTED",e[e.UNEXPECTED_CONTENT_LENGTH=4]="UNEXPECTED_CONTENT_LENGTH",e[e.CLOSED_CONNECTION=5]="CLOSED_CONNECTION",e[e.INVALID_METHOD=6]="INVALID_METHOD",e[e.INVALID_URL=7]="INVALID_URL",e[e.INVALID_CONSTANT=8]="INVALID_CONSTANT",e[e.INVALID_VERSION=9]="INVALID_VERSION",e[e.INVALID_HEADER_TOKEN=10]="INVALID_HEADER_TOKEN",e[e.INVALID_CONTENT_LENGTH=11]="INVALID_CONTENT_LENGTH",e[e.INVALID_CHUNK_SIZE=12]="INVALID_CHUNK_SIZE",e[e.INVALID_STATUS=13]="INVALID_STATUS",e[e.INVALID_EOF_STATE=14]="INVALID_EOF_STATE",e[e.INVALID_TRANSFER_ENCODING=15]="INVALID_TRANSFER_ENCODING",e[e.CB_MESSAGE_BEGIN=16]="CB_MESSAGE_BEGIN",e[e.CB_HEADERS_COMPLETE=17]="CB_HEADERS_COMPLETE",e[e.CB_MESSAGE_COMPLETE=18]="CB_MESSAGE_COMPLETE",e[e.CB_CHUNK_HEADER=19]="CB_CHUNK_HEADER",e[e.CB_CHUNK_COMPLETE=20]="CB_CHUNK_COMPLETE",e[e.PAUSED=21]="PAUSED",e[e.PAUSED_UPGRADE=22]="PAUSED_UPGRADE",e[e.PAUSED_H2_UPGRADE=23]="PAUSED_H2_UPGRADE",e[e.USER=24]="USER"})(CWe=_e.ERROR||(_e.ERROR={}));var vWe;(function(e){e[e.BOTH=0]="BOTH",e[e.REQUEST=1]="REQUEST",e[e.RESPONSE=2]="RESPONSE"})(vWe=_e.TYPE||(_e.TYPE={}));var EWe;(function(e){e[e.CONNECTION_KEEP_ALIVE=1]="CONNECTION_KEEP_ALIVE",e[e.CONNECTION_CLOSE=2]="CONNECTION_CLOSE",e[e.CONNECTION_UPGRADE=4]="CONNECTION_UPGRADE",e[e.CHUNKED=8]="CHUNKED",e[e.UPGRADE=16]="UPGRADE",e[e.CONTENT_LENGTH=32]="CONTENT_LENGTH",e[e.SKIPBODY=64]="SKIPBODY",e[e.TRAILING=128]="TRAILING",e[e.TRANSFER_ENCODING=512]="TRANSFER_ENCODING"})(EWe=_e.FLAGS||(_e.FLAGS={}));var bWe;(function(e){e[e.HEADERS=1]="HEADERS",e[e.CHUNKED_LENGTH=2]="CHUNKED_LENGTH",e[e.KEEP_ALIVE=4]="KEEP_ALIVE"})(bWe=_e.LENIENT_FLAGS||(_e.LENIENT_FLAGS={}));var lt;(function(e){e[e.DELETE=0]="DELETE",e[e.GET=1]="GET",e[e.HEAD=2]="HEAD",e[e.POST=3]="POST",e[e.PUT=4]="PUT",e[e.CONNECT=5]="CONNECT",e[e.OPTIONS=6]="OPTIONS",e[e.TRACE=7]="TRACE",e[e.COPY=8]="COPY",e[e.LOCK=9]="LOCK",e[e.MKCOL=10]="MKCOL",e[e.MOVE=11]="MOVE",e[e.PROPFIND=12]="PROPFIND",e[e.PROPPATCH=13]="PROPPATCH",e[e.SEARCH=14]="SEARCH",e[e.UNLOCK=15]="UNLOCK",e[e.BIND=16]="BIND",e[e.REBIND=17]="REBIND",e[e.UNBIND=18]="UNBIND",e[e.ACL=19]="ACL",e[e.REPORT=20]="REPORT",e[e.MKACTIVITY=21]="MKACTIVITY",e[e.CHECKOUT=22]="CHECKOUT",e[e.MERGE=23]="MERGE",e[e["M-SEARCH"]=24]="M-SEARCH",e[e.NOTIFY=25]="NOTIFY",e[e.SUBSCRIBE=26]="SUBSCRIBE",e[e.UNSUBSCRIBE=27]="UNSUBSCRIBE",e[e.PATCH=28]="PATCH",e[e.PURGE=29]="PURGE",e[e.MKCALENDAR=30]="MKCALENDAR",e[e.LINK=31]="LINK",e[e.UNLINK=32]="UNLINK",e[e.SOURCE=33]="SOURCE",e[e.PRI=34]="PRI",e[e.DESCRIBE=35]="DESCRIBE",e[e.ANNOUNCE=36]="ANNOUNCE",e[e.SETUP=37]="SETUP",e[e.PLAY=38]="PLAY",e[e.PAUSE=39]="PAUSE",e[e.TEARDOWN=40]="TEARDOWN",e[e.GET_PARAMETER=41]="GET_PARAMETER",e[e.SET_PARAMETER=42]="SET_PARAMETER",e[e.REDIRECT=43]="REDIRECT",e[e.RECORD=44]="RECORD",e[e.FLUSH=45]="FLUSH"})(lt=_e.METHODS||(_e.METHODS={}));_e.METHODS_HTTP=[lt.DELETE,lt.GET,lt.HEAD,lt.POST,lt.PUT,lt.CONNECT,lt.OPTIONS,lt.TRACE,lt.COPY,lt.LOCK,lt.MKCOL,lt.MOVE,lt.PROPFIND,lt.PROPPATCH,lt.SEARCH,lt.UNLOCK,lt.BIND,lt.REBIND,lt.UNBIND,lt.ACL,lt.REPORT,lt.MKACTIVITY,lt.CHECKOUT,lt.MERGE,lt["M-SEARCH"],lt.NOTIFY,lt.SUBSCRIBE,lt.UNSUBSCRIBE,lt.PATCH,lt.PURGE,lt.MKCALENDAR,lt.LINK,lt.UNLINK,lt.PRI,lt.SOURCE];_e.METHODS_ICE=[lt.SOURCE];_e.METHODS_RTSP=[lt.OPTIONS,lt.DESCRIBE,lt.ANNOUNCE,lt.SETUP,lt.PLAY,lt.PAUSE,lt.TEARDOWN,lt.GET_PARAMETER,lt.SET_PARAMETER,lt.REDIRECT,lt.RECORD,lt.FLUSH,lt.GET,lt.POST];_e.METHOD_MAP=yWe.enumToMap(lt);_e.H_METHOD_MAP={};Object.keys(_e.METHOD_MAP).forEach(e=>{/^H/.test(e)&&(_e.H_METHOD_MAP[e]=_e.METHOD_MAP[e])});var xWe;(function(e){e[e.SAFE=0]="SAFE",e[e.SAFE_WITH_CB=1]="SAFE_WITH_CB",e[e.UNSAFE=2]="UNSAFE"})(xWe=_e.FINISH||(_e.FINISH={}));_e.ALPHA=[];for(let e=65;e<=90;e++)_e.ALPHA.push(String.fromCharCode(e)),_e.ALPHA.push(String.fromCharCode(e+32));_e.NUM_MAP={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9};_e.HEX_MAP={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15};_e.NUM=["0","1","2","3","4","5","6","7","8","9"];_e.ALPHANUM=_e.ALPHA.concat(_e.NUM);_e.MARK=["-","_",".","!","~","*","'","(",")"];_e.USERINFO_CHARS=_e.ALPHANUM.concat(_e.MARK).concat(["%",";",":","&","=","+","$",","]);_e.STRICT_URL_CHAR=["!",'"',"$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","@","[","\\","]","^","_","`","{","|","}","~"].concat(_e.ALPHANUM);_e.URL_CHAR=_e.STRICT_URL_CHAR.concat(["	","\f"]);for(let e=128;e<=255;e++)_e.URL_CHAR.push(e);_e.HEX=_e.NUM.concat(["a","b","c","d","e","f","A","B","C","D","E","F"]);_e.STRICT_TOKEN=["!","#","$","%","&","'","*","+","-",".","^","_","`","|","~"].concat(_e.ALPHANUM);_e.TOKEN=_e.STRICT_TOKEN.concat([" "]);_e.HEADER_CHARS=["	"];for(let e=32;e<=255;e++)e!==127&&_e.HEADER_CHARS.push(e);_e.CONNECTION_TOKEN_CHARS=_e.HEADER_CHARS.filter(e=>e!==44);_e.MAJOR=_e.NUM_MAP;_e.MINOR=_e.MAJOR;var h0;(function(e){e[e.GENERAL=0]="GENERAL",e[e.CONNECTION=1]="CONNECTION",e[e.CONTENT_LENGTH=2]="CONTENT_LENGTH",e[e.TRANSFER_ENCODING=3]="TRANSFER_ENCODING",e[e.UPGRADE=4]="UPGRADE",e[e.CONNECTION_KEEP_ALIVE=5]="CONNECTION_KEEP_ALIVE",e[e.CONNECTION_CLOSE=6]="CONNECTION_CLOSE",e[e.CONNECTION_UPGRADE=7]="CONNECTION_UPGRADE",e[e.TRANSFER_ENCODING_CHUNKED=8]="TRANSFER_ENCODING_CHUNKED"})(h0=_e.HEADER_STATE||(_e.HEADER_STATE={}));_e.SPECIAL_HEADERS={connection:h0.CONNECTION,"content-length":h0.CONTENT_LENGTH,"proxy-connection":h0.CONNECTION,"transfer-encoding":h0.TRANSFER_ENCODING,upgrade:h0.UPGRADE}});var ZO=x((USt,Fte)=>{"use strict";var{Buffer:_We}=require("buffer");Fte.exports=_We.from("AGFzbQEAAAABJwdgAX8Bf2ADf39/AX9gAX8AYAJ/fwBgBH9/f38Bf2AAAGADf39/AALLAQgDZW52GHdhc21fb25faGVhZGVyc19jb21wbGV0ZQAEA2VudhV3YXNtX29uX21lc3NhZ2VfYmVnaW4AAANlbnYLd2FzbV9vbl91cmwAAQNlbnYOd2FzbV9vbl9zdGF0dXMAAQNlbnYUd2FzbV9vbl9oZWFkZXJfZmllbGQAAQNlbnYUd2FzbV9vbl9oZWFkZXJfdmFsdWUAAQNlbnYMd2FzbV9vbl9ib2R5AAEDZW52GHdhc21fb25fbWVzc2FnZV9jb21wbGV0ZQAAAy0sBQYAAAIAAAAAAAACAQIAAgICAAADAAAAAAMDAwMBAQEBAQEBAQEAAAIAAAAEBQFwARISBQMBAAIGCAF/AUGA1AQLB9EFIgZtZW1vcnkCAAtfaW5pdGlhbGl6ZQAIGV9faW5kaXJlY3RfZnVuY3Rpb25fdGFibGUBAAtsbGh0dHBfaW5pdAAJGGxsaHR0cF9zaG91bGRfa2VlcF9hbGl2ZQAvDGxsaHR0cF9hbGxvYwALBm1hbGxvYwAxC2xsaHR0cF9mcmVlAAwEZnJlZQAMD2xsaHR0cF9nZXRfdHlwZQANFWxsaHR0cF9nZXRfaHR0cF9tYWpvcgAOFWxsaHR0cF9nZXRfaHR0cF9taW5vcgAPEWxsaHR0cF9nZXRfbWV0aG9kABAWbGxodHRwX2dldF9zdGF0dXNfY29kZQAREmxsaHR0cF9nZXRfdXBncmFkZQASDGxsaHR0cF9yZXNldAATDmxsaHR0cF9leGVjdXRlABQUbGxodHRwX3NldHRpbmdzX2luaXQAFQ1sbGh0dHBfZmluaXNoABYMbGxodHRwX3BhdXNlABcNbGxodHRwX3Jlc3VtZQAYG2xsaHR0cF9yZXN1bWVfYWZ0ZXJfdXBncmFkZQAZEGxsaHR0cF9nZXRfZXJybm8AGhdsbGh0dHBfZ2V0X2Vycm9yX3JlYXNvbgAbF2xsaHR0cF9zZXRfZXJyb3JfcmVhc29uABwUbGxodHRwX2dldF9lcnJvcl9wb3MAHRFsbGh0dHBfZXJybm9fbmFtZQAeEmxsaHR0cF9tZXRob2RfbmFtZQAfEmxsaHR0cF9zdGF0dXNfbmFtZQAgGmxsaHR0cF9zZXRfbGVu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PgtBhwEMPQtBiAEMPAtBiQEMOwtBigEMOgtBiwEMOQtBjAEMOAtBjQEMNwtBjgEMNgtBjwEMNQtBkAEMNAtBkQEMMwtBkgEMMgtBkwEMMQtBlAEMMAtBlQEMLwtBlgEMLgtBlwEMLQtBmAEMLAtBmQEMKwtBmgEMKgtBmwEMKQtBnAEMKAtBnQEMJwtBngEMJgtBnwEMJQtBoAEMJAtBoQEMIwtBogEMIgtBowEMIQtBpAEMIAtBpQEMHwtBpgEMHgtBpwEMHQtBqAEMHAtBqQEMGwtBqgEMGgtBqwEMGQtBrAEMGAtBrQEMFwtBrgEMFgtBAQwVC0GvAQwUC0GwAQwTC0GxAQwSC0GzAQwRC0GyAQwQC0G0AQwPC0G1AQwOC0G2AQwNC0G3AQwMC0G4AQwLC0G5AQwKC0G6AQwJC0G7AQwIC0HGAQwHC0G8AQwGC0G9AQwFC0G+AQwEC0G/AQwDC0HAAQwCC0HCAQwBC0HBAQshAwNAAkACQAJAAkACQAJAAkACQAJAIAICfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAgJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAC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iQEhAwykAgtBASABLQAAQd8ARw1nGiABQQFqIQEMXgtBigEhAyABIARGDaICIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgNAIAEtAAAgAEGMzwBqLQAARw1kIABBAUYN+gEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMogILQYsBIQMgASAERg2hAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGOzwBqLQAARw1kIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyiAgsgAkEANgIAIAZBAWohAUECDGULQYwBIQMgASAERg2gAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHwzwBqLQAARw1jIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyhAgsgAkEANgIAIAZBAWohAUEfDGQLQY0BIQMgASAERg2fAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHyzwBqLQAARw1iIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAygAgsgAkEANgIAIAZBAWohAUEJDGMLIAEgBEYEQEGOASEDDJ8CCwJAAkAgAS0AAEHJAGsOBwBiYmJiYgFiCyABQQFqIQFB+AAhAwyGAgsgAUEBaiEBQfkAIQMMhQILQY8BIQMgASAERg2dAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGRzwBqLQAARw1gIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyeAgsgAkEANgIAIAZBAWohAUEYDGELQZABIQMgASAERg2cAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGXzwBqLQAARw1fIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAydAgsgAkEANgIAIAZBAWohAUEXDGALQZEBIQMgASAERg2bAiACKAIAIgAgBCABa2ohBSABIABrQQZqIQYCQANAIAEtAAAgAEGazwBqLQAARw1eIABBBkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAycAgsgAkEANgIAIAZBAWohAUEV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JSIARQ0RIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMtAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0gIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMswELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0iIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMsgELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0OIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMsQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0dIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMsAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0fIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMrwELIABBP0cNASABQQFqCyEBQQUhAwyUAQtBACEDIAJBADYCHCACIAE2AhQgAkH9EjYCECACQQc2AgwMrAELIAJBADYCHCACIAE2AhQgAkHcCDYCECACQQc2AgxBACEDDKsBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNByACQeUANgIcIAIgATYCFCACIAA2AgxBACEDDKoBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNFiACQdMANgIcIAIgATYCFCACIAA2AgxBACEDDKkBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNGCACQdIANgIcIAIgATYCFCACIAA2AgxBACEDDKgBCyACQQA2AhwgAiABNgIUIAJBxgo2AhAgAkEHNgIMQQAhAwynAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQMgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwymAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRIgAkHTADYCHCACIAE2AhQgAiAANgIMQQAhAwylAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRQgAkHSADYCHCACIAE2AhQgAiAANgIMQQAhAwykAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQAgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwyjAQtB1QAhAwyJAQsgAEEVRwRAIAJBADYCHCACIAE2AhQgAkG5DTYCECACQRo2AgxB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AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB5ABrDvQDY2IAAWFhYWFhYQIDBAVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhBgcICQoLDA0OD2FhYWFhEGFhYWFhYWFhYWFhEWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYRITFBUWFxgZGhthYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzNDU2YTc4OTphYWFhYWFhYTthYWE8YWFhYT0+P2FhYWFhYWFhQGFhQWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYUJDREVGR0hJSktMTU5PUFFSU2FhYWFhYWFhVFVWV1hZWlthXF1hYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFeYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhX2BhC0HhJw8LQaQhDwtByywPC0H+MQ8LQcAkDwtBqyQPC0GNKA8LQeImDwtBgDAPC0G5Lw8LQdckDwtB7x8PC0HhHw8LQfofDwtB8iAPC0GoLw8LQa4yDwtBiDAPC0HsJw8LQYIiDwtBjh0PC0HQLg8LQcojDwtBxTIPC0HfHA8LQdIcDwtBxCAPC0HXIA8LQaIfDwtB7S4PC0GrMA8LQdQlDwtBzC4PC0H6Lg8LQfwrDwtB0jAPC0HxHQ8LQbsgDwtB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CABB3AgLii1JbnZhbGlkIGNoYXIgaW4gdXJsIHF1ZXJ5AFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fYm9keQBDb250ZW50LUxlbmd0aCBvdmVyZmxvdwBDaHVuayBzaXplIG92ZXJmbG93AFJlc3BvbnNlIG92ZXJmbG93AEludmFsaWQgbWV0aG9kIGZvciBIVFRQL3gueCByZXF1ZXN0AEludmFsaWQgbWV0aG9kIGZvciBSVFNQL3gueCByZXF1ZXN0AEV4cGVjdGVkIFNPVVJDRSBtZXRob2QgZm9yIElDRS94LnggcmVxdWVzdABJbnZhbGlkIGNoYXIgaW4gdXJsIGZyYWdtZW50IHN0YXJ0AEV4cGVjdGVkIGRvdABTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX3N0YXR1cwBJbnZhbGlkIHJlc3BvbnNlIHN0YXR1cwBJbnZhbGlkIGNoYXJhY3RlciBpbiBjaHVuayBleHRlbnNpb25zAFVzZXIgY2FsbGJhY2sgZXJyb3IAYG9uX3Jlc2V0YCBjYWxsYmFjayBlcnJvcgBgb25fY2h1bmtfaGVhZGVyYCBjYWxsYmFjayBlcnJvcgBgb25fbWVzc2FnZV9iZWdpbmAgY2FsbGJhY2sgZXJyb3IAYG9uX2NodW5rX2V4dGVuc2lvbl92YWx1ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX3N0YXR1c19jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX3ZlcnNpb25fY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl91cmxfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9jaHVua19jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX2hlYWRlcl92YWx1ZV9jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX21lc3NhZ2VfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9tZXRob2RfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9oZWFkZXJfZmllbGRfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9jaHVua19leHRlbnNpb25fbmFtZWAgY2FsbGJhY2sgZXJyb3IAVW5leHBlY3RlZCBjaGFyIGluIHVybCBzZXJ2ZXIASW52YWxpZCBoZWFkZXIgdmFsdWUgY2hhcgBJbnZhbGlkIGhlYWRlciBmaWVsZCBjaGFyAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fdmVyc2lvbgBJbnZhbGlkIG1pbm9yIHZlcnNpb24ASW52YWxpZCBtYWpvciB2ZXJzaW9uAEV4cGVjdGVkIHNwYWNlIGFmdGVyIHZlcnNpb24ARXhwZWN0ZWQgQ1JMRiBhZnRlciB2ZXJzaW9uAEludmFsaWQgSFRUUCB2ZXJzaW9uAEludmFsaWQgaGVhZGVyIHRva2VuAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fdXJsAEludmFsaWQgY2hhcmFjdGVycyBpbiB1cmwAVW5leHBlY3RlZCBzdGFydCBjaGFyIGluIHVybABEb3VibGUgQCBpbiB1cmwARW1wdHkgQ29udGVudC1MZW5ndGgASW52YWxpZCBjaGFyYWN0ZXIgaW4gQ29udGVudC1MZW5ndGgARHVwbGljYXRlIENvbnRlbnQtTGVuZ3RoAEludmFsaWQgY2hhciBpbiB1cmwgcGF0aABDb250ZW50LUxlbmd0aCBjYW4ndCBiZSBwcmVzZW50IHdpdGggVHJhbnNmZXItRW5jb2RpbmcASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgc2l6ZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2hlYWRlcl92YWx1ZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2NodW5rX2V4dGVuc2lvbl92YWx1ZQBJbnZhbGlkIGNoYXJhY3RlciBpbiBjaHVuayBleHRlbnNpb25zIHZhbHVlAE1pc3NpbmcgZXhwZWN0ZWQgTEYgYWZ0ZXIgaGVhZGVyIHZhbHVlAEludmFsaWQgYFRyYW5zZmVyLUVuY29kaW5nYCBoZWFkZXIgdmFsdWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyBxdW90ZSB2YWx1ZQBJbnZhbGlkIGNoYXJhY3RlciBpbiBjaHVuayBleHRlbnNpb25zIHF1b3RlZCB2YWx1ZQBQYXVzZWQgYnkgb25faGVhZGVyc19jb21wbGV0ZQBJbnZhbGlkIEVPRiBzdGF0ZQBvbl9yZXNldCBwYXVzZQBvbl9jaHVua19oZWFkZXIgcGF1c2UAb25fbWVzc2FnZV9iZWdpbiBwYXVzZQBvbl9jaHVua19leHRlbnNpb25fdmFsdWUgcGF1c2UAb25fc3RhdHVzX2NvbXBsZXRlIHBhdXNlAG9uX3ZlcnNpb25fY29tcGxldGUgcGF1c2UAb25fdXJsX2NvbXBsZXRlIHBhdXNlAG9uX2NodW5rX2NvbXBsZXRlIHBhdXNlAG9uX2hlYWRlcl92YWx1ZV9jb21wbGV0ZSBwYXVzZQBvbl9tZXNzYWdlX2NvbXBsZXRlIHBhdXNlAG9uX21ldGhvZF9jb21wbGV0ZSBwYXVzZQBvbl9oZWFkZXJfZmllbGRfY29tcGxldGUgcGF1c2UAb25fY2h1bmtfZXh0ZW5zaW9uX25hbWUgcGF1c2UAVW5leHBlY3RlZCBzcGFjZSBhZnRlciBzdGFydCBsaW5lAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fY2h1bmtfZXh0ZW5zaW9uX25hbWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyBuYW1lAFBhdXNlIG9uIENPTk5FQ1QvVXBncmFkZQBQYXVzZSBvbiBQUkkvVXBncmFkZQBFeHBlY3RlZCBIVFRQLzIgQ29ubmVjdGlvbiBQcmVmYWNlAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fbWV0aG9kAEV4cGVjdGVkIHNwYWNlIGFmdGVyIG1ldGhvZABTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2hlYWRlcl9maWVsZABQYXVzZWQASW52YWxpZCB3b3JkIGVuY291bnRlcmVkAEludmFsaWQgbWV0aG9kIGVuY291bnRlcmVkAFVuZXhwZWN0ZWQgY2hhciBpbiB1cmwgc2NoZW1hAFJlcXVlc3QgaGFzIGludmFsaWQgYFRyYW5zZmVyLUVuY29kaW5nYABTV0lUQ0hfUFJPWFkAVVNFX1BST1hZAE1LQUNUSVZJVFkAVU5QUk9DRVNTQUJMRV9FTlRJVFkAQ09QWQBNT1ZFRF9QRVJNQU5FTlRMWQBUT09fRUFSTFkATk9USUZZAEZBSUxFRF9ERVBFTkRFTkNZAEJBRF9HQVRFV0FZAFBMQVkAUFVUAENIRUNLT1VUAEdBVEVXQVlfVElNRU9VVABSRVFVRVNUX1RJTUVPVVQATkVUV09SS19DT05ORUNUX1RJTUVPVVQAQ09OTkVDVElPTl9USU1FT1VUAExPR0lOX1RJTUVPVVQATkVUV09SS19SRUFEX1RJTUVPVVQAUE9TVABNSVNESVJFQ1RFRF9SRVFVRVNUAENMSUVOVF9DTE9TRURfUkVRVUVTVABDTElFTlRfQ0xPU0VEX0xPQURfQkFMQU5DRURfUkVRVUVTVABCQURfUkVRVUVTVABIVFRQX1JFUVVFU1RfU0VOVF9UT19IVFRQU19QT1JUAFJFUE9SVABJTV9BX1RFQVBPVABSRVNFVF9DT05URU5UAE5PX0NPTlRFTlQAUEFSVElBTF9DT05URU5UAEhQRV9JTlZBTElEX0NPTlNUQU5UAEhQRV9DQl9SRVNFVABHRVQASFBFX1NUUklDVABDT05GTElDVABURU1QT1JBUllfUkVESVJFQ1QAUEVSTUFORU5UX1JFRElSRUNUAENPTk5FQ1QATVVMVElfU1RBVFVTAEhQRV9JTlZBTElEX1NUQVRVUwBUT09fTUFOWV9SRVFVRVNUUwBFQVJMWV9ISU5UUwBVTkFWQUlMQUJMRV9GT1JfTEVHQUxfUkVBU09OUwBPUFRJT05TAFNXSVRDSElOR19QUk9UT0NPTFMAVkFSSUFOVF9BTFNPX05FR09USUFURVMATVVMVElQTEVfQ0hPSUNFUwBJTlRFUk5BTF9TRVJWRVJfRVJST1IAV0VCX1NFUlZFUl9VTktOT1dOX0VSUk9SAFJBSUxHVU5fRVJST1IASURFTlRJVFlfUFJPVklERVJfQVVUSEVOVElDQVRJT05fRVJST1IAU1NMX0NFUlRJRklDQVRFX0VSUk9SAElOVkFMSURfWF9GT1JXQVJERURfRk9SAFNFVF9QQVJBTUVURVIAR0VUX1BBUkFNRVRFUgBIUEVfVVNFUgBTRUVfT1RIRVIASFBFX0NCX0NIVU5LX0hFQURFUgBNS0NBTEVOREFSAFNFVFVQAFdFQl9TRVJWRVJfSVNfRE9XTgBURUFSRE9XTgBIUEVfQ0xPU0VEX0NPTk5FQ1RJT04ASEVVUklTVElDX0VYUElSQVRJT04ARElTQ09OTkVDVEVEX09QRVJBVElPTgBOT05fQVVUSE9SSVRBVElWRV9JTkZPUk1BVElPTgBIUEVfSU5WQUxJRF9WRVJTSU9OAEhQRV9DQl9NRVNTQUdFX0JFR0lOAFNJVEVfSVNfRlJPWkVOAEhQRV9JTlZBTElEX0hFQURFUl9UT0tFTgBJTlZBTElEX1RPS0VOAEZPUkJJRERFTgBFTkhBTkNFX1lPVVJfQ0FMTQBIUEVfSU5WQUxJRF9VUkwAQkxPQ0tFRF9CWV9QQVJFTlRBTF9DT05UUk9MAE1LQ09MAEFDTABIUEVfSU5URVJOQUwAUkVRVUVTVF9IRUFERVJfRklFTERTX1RPT19MQVJHRV9VTk9GRklDSUFMAEhQRV9PSwBVTkxJTksAVU5MT0NLAFBSSQBSRVRSWV9XSVRIAEhQRV9JTlZBTElEX0NPTlRFTlRfTEVOR1RIAEhQRV9VTkVYUEVDVEVEX0NPTlRFTlRfTEVOR1RIAEZMVVNIAFBST1BQQVRDSABNLVNFQVJDSABVUklfVE9PX0xPTkcAUFJPQ0VTU0lORwBNSVNDRUxMQU5FT1VTX1BFUlNJU1RFTlRfV0FSTklORwBNSVNDRUxMQU5FT1VTX1dBUk5JTkcASFBFX0lOVkFMSURfVFJBTlNGRVJfRU5DT0RJTkcARXhwZWN0ZWQgQ1JMRgBIUEVfSU5WQUxJRF9DSFVOS19TSVpFAE1PVkUAQ09OVElOVUUASFBFX0NCX1NUQVRVU19DT01QTEVURQBIUEVfQ0JfSEVBREVSU19DT01QTEVURQBIUEVfQ0JfVkVSU0lPTl9DT01QTEVURQBIUEVfQ0JfVVJMX0NPTVBMRVRFAEhQRV9DQl9DSFVOS19DT01QTEVURQBIUEVfQ0JfSEVBREVSX1ZBTFVFX0NPTVBMRVRFAEhQRV9DQl9DSFVOS19FWFRFTlNJT05fVkFMVUVfQ09NUExFVEUASFBFX0NCX0NIVU5LX0VYVEVOU0lPTl9OQU1FX0NPTVBMRVRFAEhQRV9DQl9NRVNTQUdFX0NPTVBMRVRFAEhQRV9DQl9NRVRIT0RfQ09NUExFVEUASFBFX0NCX0hFQURFUl9GSUVMRF9DT01QTEVURQBERUxFVEUASFBFX0lOVkFMSURfRU9GX1NUQVRFAElOVkFMSURfU1NMX0NFUlRJRklDQVRFAFBBVVNFAE5PX1JFU1BPTlNFAFVOU1VQUE9SVEVEX01FRElBX1RZUEUAR09ORQBOT1RfQUNDRVBUQUJMRQBTRVJWSUNFX1VOQVZBSUxBQkxFAFJBTkdFX05PVF9TQVRJU0ZJQUJMRQBPUklHSU5fSVNfVU5SRUFDSEFCTEUAUkVTUE9OU0VfSVNfU1RBTEUAUFVSR0UATUVSR0UAUkVRVUVTVF9IRUFERVJfRklFTERTX1RPT19MQVJHRQBSRVFVRVNUX0hFQURFUl9UT09fTEFSR0UAUEFZTE9BRF9UT09fTEFSR0UASU5TVUZGSUNJRU5UX1NUT1JBR0UASFBFX1BBVVNFRF9VUEdSQURFAEhQRV9QQVVTRURfSDJfVVBHUkFERQBTT1VSQ0UAQU5OT1VOQ0UAVFJBQ0UASFBFX1VORVhQRUNURURfU1BBQ0UAREVTQ1JJQkUAVU5TVUJTQ1JJQkUAUkVDT1JEAEhQRV9JTlZBTElEX01FVEhPRABOT1RfRk9VTkQAUFJPUEZJTkQAVU5CSU5EAFJFQklORABVTkFVVEhPUklaRUQATUVUSE9EX05PVF9BTExPV0VEAEhUVFBfVkVSU0lPTl9OT1RfU1VQUE9SVEVEAEFMUkVBRFlfUkVQT1JURUQAQUNDRVBURUQATk9UX0lNUExFTUVOVEVEAExPT1BfREVURUNURUQASFBFX0NSX0VYUEVDVEVEAEhQRV9MRl9FWFBFQ1RFRABDUkVBVEVEAElNX1VTRUQASFBFX1BBVVNFRABUSU1FT1VUX09DQ1VSRUQAUEFZTUVOVF9SRVFVSVJFRABQUkVDT05ESVRJT05fUkVRVUlSRUQAUFJPWFlfQVVUSEVOVElDQVRJT05fUkVRVUlSRUQATkVUV09SS19BVVRIRU5USUNBVElPTl9SRVFVSVJFRABMRU5HVEhfUkVRVUlSRUQAU1NMX0NFUlRJRklDQVRFX1JFUVVJUkVEAFVQR1JBREVfUkVRVUlSRUQAUEFHRV9FWFBJUkVEAFBSRUNPTkRJVElPTl9GQUlMRUQARVhQRUNUQVRJT05fRkFJTEVEAFJFVkFMSURBVElPTl9GQUlMRUQAU1NMX0hBTkRTSEFLRV9GQUlMRUQATE9DS0VEAFRSQU5TRk9STUFUSU9OX0FQUExJRUQATk9UX01PRElGSUVEAE5PVF9FWFRFTkRFRABCQU5EV0lEVEhfTElNSVRfRVhDRUVERUQAU0lURV9JU19PVkVSTE9BREVEAEhFQUQARXhwZWN0ZWQgSFRUUC8AAF4TAAAmEwAAMBAAAPAXAACdEwAAFRIAADkXAADwEgAAChAAAHUSAACtEgAAghMAAE8UAAB/EAAAoBUAACMUAACJEgAAixQAAE0VAADUEQAAzxQAABAYAADJFgAA3BYAAMERAADgFwAAuxQAAHQUAAB8FQAA5RQAAAgXAAAfEAAAZRUAAKMUAAAoFQAAAhUAAJkVAAAsEAAAixkAAE8PAADUDgAAahAAAM4QAAACFwAAiQ4AAG4TAAAcEwAAZhQAAFYXAADBEwAAzRMAAGwTAABoFwAAZhcAAF8XAAAiEwAAzg8AAGkOAADYDgAAYxYAAMsTAACqDgAAKBcAACYXAADFEwAAXRYAAOgRAABnEwAAZRMAAPIWAABzEwAAHRcAAPkWAADzEQAAzw4AAM4VAAAMEgAAsxEAAKURAABhEAAAMhcAALsTAEH5NQsBAQBBkDYL4AEBAQIBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB/TcLAQEAQZE4C14CAwICAgICAAACAgACAgACAgICAgICAgICAAQAAAAAAAICAgICAgICAgICAgICAgICAgICAgICAgICAAAAAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAAgACAEH9OQsBAQBBkToLXgIAAgICAgIAAAICAAICAAICAgICAgICAgIAAwAEAAAAAgICAgICAgICAgICAgICAgICAgICAgICAgIAAAACAgICAgICAgICAgICAgICAgICAgICAgICAgICAgACAAIAQfA7Cw1sb3NlZWVwLWFsaXZlAEGJPAsBAQBBoDwL4AEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBBiT4LAQEAQaA+C+cBAQEBAQEBAQEBAQEBAgEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQFjaHVua2VkAEGwwAALXwEBAAEBAQEBAAABAQABAQABAQEBAQEBAQEBAAAAAAAAAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAAAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQABAEGQwgALIWVjdGlvbmVudC1sZW5ndGhvbnJveHktY29ubmVjdGlvbgBBwMIACy1yYW5zZmVyLWVuY29kaW5ncGdyYWRlDQoNCg0KU00NCg0KVFRQL0NFL1RTUC8AQfnCAAsFAQIAAQMAQZDDAAvgAQQBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAEH5xAALBQECAAEDAEGQxQAL4AEEAQEFAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB+cYACwQBAAABAEGRxwAL3wEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAEH6yAALBAEAAAIAQZDJAAtfAwQAAAQEBAQEBAQEBAQEBQQEBAQEBAQEBAQEBAAEAAYHBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQABAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAAAAQAQfrKAAsEAQAAAQBBkMsACwEBAEGqywALQQIAAAAAAAADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwAAAAAAAAMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAEH6zAALBAEAAAEAQZDNAAsBAQBBms0ACwYCAAAAAAIAQbHNAAs6AwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAAAAAAAADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwBB8M4AC5YBTk9VTkNFRUNLT1VUTkVDVEVURUNSSUJFTFVTSEVURUFEU0VBUkNIUkdFQ1RJVklUWUxFTkRBUlZFT1RJRllQVElPTlNDSFNFQVlTVEFUQ0hHRU9SRElSRUNUT1JUUkNIUEFSQU1FVEVSVVJDRUJTQ1JJQkVBUkRPV05BQ0VJTkROS0NLVUJTQ1JJQkVIVFRQL0FEVFAv","base64")});var Qte=x((OSt,Mte)=>{"use strict";var{Buffer:wWe}=require("buffer");Mte.exports=wWe.from("AGFzbQEAAAABJwdgAX8Bf2ADf39/AX9gAX8AYAJ/fwBgBH9/f38Bf2AAAGADf39/AALLAQgDZW52GHdhc21fb25faGVhZGVyc19jb21wbGV0ZQAEA2VudhV3YXNtX29uX21lc3NhZ2VfYmVnaW4AAANlbnYLd2FzbV9vbl91cmwAAQNlbnYOd2FzbV9vbl9zdGF0dXMAAQNlbnYUd2FzbV9vbl9oZWFkZXJfZmllbGQAAQNlbnYUd2FzbV9vbl9oZWFkZXJfdmFsdWUAAQNlbnYMd2FzbV9vbl9ib2R5AAEDZW52GHdhc21fb25fbWVzc2FnZV9jb21wbGV0ZQAAAy0sBQYAAAIAAAAAAAACAQIAAgICAAADAAAAAAMDAwMBAQEBAQEBAQEAAAIAAAAEBQFwARISBQMBAAIGCAF/AUGA1AQLB9EFIgZtZW1vcnkCAAtfaW5pdGlhbGl6ZQAIGV9faW5kaXJlY3RfZnVuY3Rpb25fdGFibGUBAAtsbGh0dHBfaW5pdAAJGGxsaHR0cF9zaG91bGRfa2VlcF9hbGl2ZQAvDGxsaHR0cF9hbGxvYwALBm1hbGxvYwAxC2xsaHR0cF9mcmVlAAwEZnJlZQAMD2xsaHR0cF9nZXRfdHlwZQANFWxsaHR0cF9nZXRfaHR0cF9tYWpvcgAOFWxsaHR0cF9nZXRfaHR0cF9taW5vcgAPEWxsaHR0cF9nZXRfbWV0aG9kABAWbGxodHRwX2dldF9zdGF0dXNfY29kZQAREmxsaHR0cF9nZXRfdXBncmFkZQASDGxsaHR0cF9yZXNldAATDmxsaHR0cF9leGVjdXRlABQUbGxodHRwX3NldHRpbmdzX2luaXQAFQ1sbGh0dHBfZmluaXNoABYMbGxodHRwX3BhdXNlABcNbGxodHRwX3Jlc3VtZQAYG2xsaHR0cF9yZXN1bWVfYWZ0ZXJfdXBncmFkZQAZEGxsaHR0cF9nZXRfZXJybm8AGhdsbGh0dHBfZ2V0X2Vycm9yX3JlYXNvbgAbF2xsaHR0cF9zZXRfZXJyb3JfcmVhc29uABwUbGxodHRwX2dldF9lcnJvcl9wb3MAHRFsbGh0dHBfZXJybm9fbmFtZQAeEmxsaHR0cF9tZXRob2RfbmFtZQAfEmxsaHR0cF9zdGF0dXNfbmFtZQAgGmxsaHR0cF9zZXRfbGVu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PgtBhwEMPQtBiAEMPAtBiQEMOwtBigEMOgtBiwEMOQtBjAEMOAtBjQEMNwtBjgEMNgtBjwEMNQtBkAEMNAtBkQEMMwtBkgEMMgtBkwEMMQtBlAEMMAtBlQEMLwtBlgEMLgtBlwEMLQtBmAEMLAtBmQEMKwtBmgEMKgtBmwEMKQtBnAEMKAtBnQEMJwtBngEMJgtBnwEMJQtBoAEMJAtBoQEMIwtBogEMIgtBowEMIQtBpAEMIAtBpQEMHwtBpgEMHgtBpwEMHQtBqAEMHAtBqQEMGwtBqgEMGgtBqwEMGQtBrAEMGAtBrQEMFwtBrgEMFgtBAQwVC0GvAQwUC0GwAQwTC0GxAQwSC0GzAQwRC0GyAQwQC0G0AQwPC0G1AQwOC0G2AQwNC0G3AQwMC0G4AQwLC0G5AQwKC0G6AQwJC0G7AQwIC0HGAQwHC0G8AQwGC0G9AQwFC0G+AQwEC0G/AQwDC0HAAQwCC0HCAQwBC0HBAQshAwNAAkACQAJAAkACQAJAAkACQAJAIAICfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAgJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAC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iQEhAwykAgtBASABLQAAQd8ARw1nGiABQQFqIQEMXgtBigEhAyABIARGDaICIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgNAIAEtAAAgAEGMzwBqLQAARw1kIABBAUYN+gEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMogILQYsBIQMgASAERg2hAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGOzwBqLQAARw1kIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyiAgsgAkEANgIAIAZBAWohAUECDGULQYwBIQMgASAERg2gAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHwzwBqLQAARw1jIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyhAgsgAkEANgIAIAZBAWohAUEfDGQLQY0BIQMgASAERg2fAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHyzwBqLQAARw1iIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAygAgsgAkEANgIAIAZBAWohAUEJDGMLIAEgBEYEQEGOASEDDJ8CCwJAAkAgAS0AAEHJAGsOBwBiYmJiYgFiCyABQQFqIQFB+AAhAwyGAgsgAUEBaiEBQfkAIQMMhQILQY8BIQMgASAERg2dAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGRzwBqLQAARw1gIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyeAgsgAkEANgIAIAZBAWohAUEYDGELQZABIQMgASAERg2cAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGXzwBqLQAARw1fIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAydAgsgAkEANgIAIAZBAWohAUEXDGALQZEBIQMgASAERg2bAiACKAIAIgAgBCABa2ohBSABIABrQQZqIQYCQANAIAEtAAAgAEGazwBqLQAARw1eIABBBkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAycAgsgAkEANgIAIAZBAWohAUEV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JSIARQ0RIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMtAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0gIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMswELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0iIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMsgELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0OIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMsQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0dIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMsAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0fIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMrwELIABBP0cNASABQQFqCyEBQQUhAwyUAQtBACEDIAJBADYCHCACIAE2AhQgAkH9EjYCECACQQc2AgwMrAELIAJBADYCHCACIAE2AhQgAkHcCDYCECACQQc2AgxBACEDDKsBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNByACQeUANgIcIAIgATYCFCACIAA2AgxBACEDDKoBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNFiACQdMANgIcIAIgATYCFCACIAA2AgxBACEDDKkBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNGCACQdIANgIcIAIgATYCFCACIAA2AgxBACEDDKgBCyACQQA2AhwgAiABNgIUIAJBxgo2AhAgAkEHNgIMQQAhAwynAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQMgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwymAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRIgAkHTADYCHCACIAE2AhQgAiAANgIMQQAhAwylAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRQgAkHSADYCHCACIAE2AhQgAiAANgIMQQAhAwykAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQAgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwyjAQtB1QAhAwyJAQsgAEEVRwRAIAJBADYCHCACIAE2AhQgAkG5DTYCECACQRo2AgxB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AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB5ABrDvQDY2IAAWFhYWFhYQIDBAVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhBgcICQoLDA0OD2FhYWFhEGFhYWFhYWFhYWFhEWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYRITFBUWFxgZGhthYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzNDU2YTc4OTphYWFhYWFhYTthYWE8YWFhYT0+P2FhYWFhYWFhQGFhQWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYUJDREVGR0hJSktMTU5PUFFSU2FhYWFhYWFhVFVWV1hZWlthXF1hYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFeYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhX2BhC0HhJw8LQaQhDwtByywPC0H+MQ8LQcAkDwtBqyQPC0GNKA8LQeImDwtBgDAPC0G5Lw8LQdckDwtB7x8PC0HhHw8LQfofDwtB8iAPC0GoLw8LQa4yDwtBiDAPC0HsJw8LQYIiDwtBjh0PC0HQLg8LQcojDwtBxTIPC0HfHA8LQdIcDwtBxCAPC0HXIA8LQaIfDwtB7S4PC0GrMA8LQdQlDwtBzC4PC0H6Lg8LQfwrDwtB0jAPC0HxHQ8LQbsgDwtB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AAADAEGUCAsFBAAAAAUAQaQICwkGAAAABwAAAAgAQdwIC4otSW52YWxpZCBjaGFyIGluIHVybCBxdWVyeQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2JvZHkAQ29udGVudC1MZW5ndGggb3ZlcmZsb3cAQ2h1bmsgc2l6ZSBvdmVyZmxvdwBSZXNwb25zZSBvdmVyZmxvdwBJbnZhbGlkIG1ldGhvZCBmb3IgSFRUUC94LnggcmVxdWVzdABJbnZhbGlkIG1ldGhvZCBmb3IgUlRTUC94LnggcmVxdWVzdABFeHBlY3RlZCBTT1VSQ0UgbWV0aG9kIGZvciBJQ0UveC54IHJlcXVlc3QASW52YWxpZCBjaGFyIGluIHVybCBmcmFnbWVudCBzdGFydABFeHBlY3RlZCBkb3QAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9zdGF0dXMASW52YWxpZCByZXNwb25zZSBzdGF0dXMASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucwBVc2VyIGNhbGxiYWNrIGVycm9yAGBvbl9yZXNldGAgY2FsbGJhY2sgZXJyb3IAYG9uX2NodW5rX2hlYWRlcmAgY2FsbGJhY2sgZXJyb3IAYG9uX21lc3NhZ2VfYmVnaW5gIGNhbGxiYWNrIGVycm9yAGBvbl9jaHVua19leHRlbnNpb25fdmFsdWVgIGNhbGxiYWNrIGVycm9yAGBvbl9zdGF0dXNfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl92ZXJzaW9uX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fdXJsX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fY2h1bmtfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9oZWFkZXJfdmFsdWVfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9tZXNzYWdlX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fbWV0aG9kX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25faGVhZGVyX2ZpZWxkX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fY2h1bmtfZXh0ZW5zaW9uX25hbWVgIGNhbGxiYWNrIGVycm9yAFVuZXhwZWN0ZWQgY2hhciBpbiB1cmwgc2VydmVyAEludmFsaWQgaGVhZGVyIHZhbHVlIGNoYXIASW52YWxpZCBoZWFkZXIgZmllbGQgY2hhcgBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX3ZlcnNpb24ASW52YWxpZCBtaW5vciB2ZXJzaW9uAEludmFsaWQgbWFqb3IgdmVyc2lvbgBFeHBlY3RlZCBzcGFjZSBhZnRlciB2ZXJzaW9uAEV4cGVjdGVkIENSTEYgYWZ0ZXIgdmVyc2lvbgBJbnZhbGlkIEhUVFAgdmVyc2lvbgBJbnZhbGlkIGhlYWRlciB0b2tlbgBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX3VybABJbnZhbGlkIGNoYXJhY3RlcnMgaW4gdXJsAFVuZXhwZWN0ZWQgc3RhcnQgY2hhciBpbiB1cmwARG91YmxlIEAgaW4gdXJsAEVtcHR5IENvbnRlbnQtTGVuZ3RoAEludmFsaWQgY2hhcmFjdGVyIGluIENvbnRlbnQtTGVuZ3RoAER1cGxpY2F0ZSBDb250ZW50LUxlbmd0aABJbnZhbGlkIGNoYXIgaW4gdXJsIHBhdGgAQ29udGVudC1MZW5ndGggY2FuJ3QgYmUgcHJlc2VudCB3aXRoIFRyYW5zZmVyLUVuY29kaW5nAEludmFsaWQgY2hhcmFjdGVyIGluIGNodW5rIHNpemUAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9oZWFkZXJfdmFsdWUAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9jaHVua19leHRlbnNpb25fdmFsdWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyB2YWx1ZQBNaXNzaW5nIGV4cGVjdGVkIExGIGFmdGVyIGhlYWRlciB2YWx1ZQBJbnZhbGlkIGBUcmFuc2Zlci1FbmNvZGluZ2AgaGVhZGVyIHZhbHVlAEludmFsaWQgY2hhcmFjdGVyIGluIGNodW5rIGV4dGVuc2lvbnMgcXVvdGUgdmFsdWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyBxdW90ZWQgdmFsdWUAUGF1c2VkIGJ5IG9uX2hlYWRlcnNfY29tcGxldGUASW52YWxpZCBFT0Ygc3RhdGUAb25fcmVzZXQgcGF1c2UAb25fY2h1bmtfaGVhZGVyIHBhdXNlAG9uX21lc3NhZ2VfYmVnaW4gcGF1c2UAb25fY2h1bmtfZXh0ZW5zaW9uX3ZhbHVlIHBhdXNlAG9uX3N0YXR1c19jb21wbGV0ZSBwYXVzZQBvbl92ZXJzaW9uX2NvbXBsZXRlIHBhdXNlAG9uX3VybF9jb21wbGV0ZSBwYXVzZQBvbl9jaHVua19jb21wbGV0ZSBwYXVzZQBvbl9oZWFkZXJfdmFsdWVfY29tcGxldGUgcGF1c2UAb25fbWVzc2FnZV9jb21wbGV0ZSBwYXVzZQBvbl9tZXRob2RfY29tcGxldGUgcGF1c2UAb25faGVhZGVyX2ZpZWxkX2NvbXBsZXRlIHBhdXNlAG9uX2NodW5rX2V4dGVuc2lvbl9uYW1lIHBhdXNlAFVuZXhwZWN0ZWQgc3BhY2UgYWZ0ZXIgc3RhcnQgbGluZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2NodW5rX2V4dGVuc2lvbl9uYW1lAEludmFsaWQgY2hhcmFjdGVyIGluIGNodW5rIGV4dGVuc2lvbnMgbmFtZQBQYXVzZSBvbiBDT05ORUNUL1VwZ3JhZGUAUGF1c2Ugb24gUFJJL1VwZ3JhZGUARXhwZWN0ZWQgSFRUUC8yIENvbm5lY3Rpb24gUHJlZmFjZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX21ldGhvZABFeHBlY3RlZCBzcGFjZSBhZnRlciBtZXRob2QAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9oZWFkZXJfZmllbGQAUGF1c2VkAEludmFsaWQgd29yZCBlbmNvdW50ZXJlZABJbnZhbGlkIG1ldGhvZCBlbmNvdW50ZXJlZABVbmV4cGVjdGVkIGNoYXIgaW4gdXJsIHNjaGVtYQBSZXF1ZXN0IGhhcyBpbnZhbGlkIGBUcmFuc2Zlci1FbmNvZGluZ2AAU1dJVENIX1BST1hZAFVTRV9QUk9YWQBNS0FDVElWSVRZAFVOUFJPQ0VTU0FCTEVfRU5USVRZAENPUFkATU9WRURfUEVSTUFORU5UTFkAVE9PX0VBUkxZAE5PVElGWQBGQUlMRURfREVQRU5ERU5DWQBCQURfR0FURVdBWQBQTEFZAFBVVABDSEVDS09VVABHQVRFV0FZX1RJTUVPVVQAUkVRVUVTVF9USU1FT1VUAE5FVFdPUktfQ09OTkVDVF9USU1FT1VUAENPTk5FQ1RJT05fVElNRU9VVABMT0dJTl9USU1FT1VUAE5FVFdPUktfUkVBRF9USU1FT1VUAFBPU1QATUlTRElSRUNURURfUkVRVUVTVABDTElFTlRfQ0xPU0VEX1JFUVVFU1QAQ0xJRU5UX0NMT1NFRF9MT0FEX0JBTEFOQ0VEX1JFUVVFU1QAQkFEX1JFUVVFU1QASFRUUF9SRVFVRVNUX1NFTlRfVE9fSFRUUFNfUE9SVABSRVBPUlQASU1fQV9URUFQT1QAUkVTRVRfQ09OVEVOVABOT19DT05URU5UAFBBUlRJQUxfQ09OVEVOVABIUEVfSU5WQUxJRF9DT05TVEFOVABIUEVfQ0JfUkVTRVQAR0VUAEhQRV9TVFJJQ1QAQ09ORkxJQ1QAVEVNUE9SQVJZX1JFRElSRUNUAFBFUk1BTkVOVF9SRURJUkVDVABDT05ORUNUAE1VTFRJX1NUQVRVUwBIUEVfSU5WQUxJRF9TVEFUVVMAVE9PX01BTllfUkVRVUVTVFMARUFSTFlfSElOVFMAVU5BVkFJTEFCTEVfRk9SX0xFR0FMX1JFQVNPTlMAT1BUSU9OUwBTV0lUQ0hJTkdfUFJPVE9DT0xTAFZBUklBTlRfQUxTT19ORUdPVElBVEVTAE1VTFRJUExFX0NIT0lDRVMASU5URVJOQUxfU0VSVkVSX0VSUk9SAFdFQl9TRVJWRVJfVU5LTk9XTl9FUlJPUgBSQUlMR1VOX0VSUk9SAElERU5USVRZX1BST1ZJREVSX0FVVEhFTlRJQ0FUSU9OX0VSUk9SAFNTTF9DRVJUSUZJQ0FURV9FUlJPUgBJTlZBTElEX1hfRk9SV0FSREVEX0ZPUgBTRVRfUEFSQU1FVEVSAEdFVF9QQVJBTUVURVIASFBFX1VTRVIAU0VFX09USEVSAEhQRV9DQl9DSFVOS19IRUFERVIATUtDQUxFTkRBUgBTRVRVUABXRUJfU0VSVkVSX0lTX0RPV04AVEVBUkRPV04ASFBFX0NMT1NFRF9DT05ORUNUSU9OAEhFVVJJU1RJQ19FWFBJUkFUSU9OAERJU0NPTk5FQ1RFRF9PUEVSQVRJT04ATk9OX0FVVEhPUklUQVRJVkVfSU5GT1JNQVRJT04ASFBFX0lOVkFMSURfVkVSU0lPTgBIUEVfQ0JfTUVTU0FHRV9CRUdJTgBTSVRFX0lTX0ZST1pFTgBIUEVfSU5WQUxJRF9IRUFERVJfVE9LRU4ASU5WQUxJRF9UT0tFTgBGT1JCSURERU4ARU5IQU5DRV9ZT1VSX0NBTE0ASFBFX0lOVkFMSURfVVJMAEJMT0NLRURfQllfUEFSRU5UQUxfQ09OVFJPTABNS0NPTABBQ0wASFBFX0lOVEVSTkFMAFJFUVVFU1RfSEVBREVSX0ZJRUxEU19UT09fTEFSR0VfVU5PRkZJQ0lBTABIUEVfT0sAVU5MSU5LAFVOTE9DSwBQUkkAUkVUUllfV0lUSABIUEVfSU5WQUxJRF9DT05URU5UX0xFTkdUSABIUEVfVU5FWFBFQ1RFRF9DT05URU5UX0xFTkdUSABGTFVTSABQUk9QUEFUQ0gATS1TRUFSQ0gAVVJJX1RPT19MT05HAFBST0NFU1NJTkcATUlTQ0VMTEFORU9VU19QRVJTSVNURU5UX1dBUk5JTkcATUlTQ0VMTEFORU9VU19XQVJOSU5HAEhQRV9JTlZBTElEX1RSQU5TRkVSX0VOQ09ESU5HAEV4cGVjdGVkIENSTEYASFBFX0lOVkFMSURfQ0hVTktfU0laRQBNT1ZFAENPTlRJTlVFAEhQRV9DQl9TVEFUVVNfQ09NUExFVEUASFBFX0NCX0hFQURFUlNfQ09NUExFVEUASFBFX0NCX1ZFUlNJT05fQ09NUExFVEUASFBFX0NCX1VSTF9DT01QTEVURQBIUEVfQ0JfQ0hVTktfQ09NUExFVEUASFBFX0NCX0hFQURFUl9WQUxVRV9DT01QTEVURQBIUEVfQ0JfQ0hVTktfRVhURU5TSU9OX1ZBTFVFX0NPTVBMRVRFAEhQRV9DQl9DSFVOS19FWFRFTlNJT05fTkFNRV9DT01QTEVURQBIUEVfQ0JfTUVTU0FHRV9DT01QTEVURQBIUEVfQ0JfTUVUSE9EX0NPTVBMRVRFAEhQRV9DQl9IRUFERVJfRklFTERfQ09NUExFVEUAREVMRVRFAEhQRV9JTlZBTElEX0VPRl9TVEFURQBJTlZBTElEX1NTTF9DRVJUSUZJQ0FURQBQQVVTRQBOT19SRVNQT05TRQBVTlNVUFBPUlRFRF9NRURJQV9UWVBFAEdPTkUATk9UX0FDQ0VQVEFCTEUAU0VSVklDRV9VTkFWQUlMQUJMRQBSQU5HRV9OT1RfU0FUSVNGSUFCTEUAT1JJR0lOX0lTX1VOUkVBQ0hBQkxFAFJFU1BPTlNFX0lTX1NUQUxFAFBVUkdFAE1FUkdFAFJFUVVFU1RfSEVBREVSX0ZJRUxEU19UT09fTEFSR0UAUkVRVUVTVF9IRUFERVJfVE9PX0xBUkdFAFBBWUxPQURfVE9PX0xBUkdFAElOU1VGRklDSUVOVF9TVE9SQUdFAEhQRV9QQVVTRURfVVBHUkFERQBIUEVfUEFVU0VEX0gyX1VQR1JBREUAU09VUkNFAEFOTk9VTkNFAFRSQUNFAEhQRV9VTkVYUEVDVEVEX1NQQUNFAERFU0NSSUJFAFVOU1VCU0NSSUJFAFJFQ09SRABIUEVfSU5WQUxJRF9NRVRIT0QATk9UX0ZPVU5EAFBST1BGSU5EAFVOQklORABSRUJJTkQAVU5BVVRIT1JJWkVEAE1FVEhPRF9OT1RfQUxMT1dFRABIVFRQX1ZFUlNJT05fTk9UX1NVUFBPUlRFRABBTFJFQURZX1JFUE9SVEVEAEFDQ0VQVEVEAE5PVF9JTVBMRU1FTlRFRABMT09QX0RFVEVDVEVEAEhQRV9DUl9FWFBFQ1RFRABIUEVfTEZfRVhQRUNURUQAQ1JFQVRFRABJTV9VU0VEAEhQRV9QQVVTRUQAVElNRU9VVF9PQ0NVUkVEAFBBWU1FTlRfUkVRVUlSRUQAUFJFQ09ORElUSU9OX1JFUVVJUkVEAFBST1hZX0FVVEhFTlRJQ0FUSU9OX1JFUVVJUkVEAE5FVFdPUktfQVVUSEVOVElDQVRJT05fUkVRVUlSRUQATEVOR1RIX1JFUVVJUkVEAFNTTF9DRVJUSUZJQ0FURV9SRVFVSVJFRABVUEdSQURFX1JFUVVJUkVEAFBBR0VfRVhQSVJFRABQUkVDT05ESVRJT05fRkFJTEVEAEVYUEVDVEFUSU9OX0ZBSUxFRABSRVZBTElEQVRJT05fRkFJTEVEAFNTTF9IQU5EU0hBS0VfRkFJTEVEAExPQ0tFRABUUkFOU0ZPUk1BVElPTl9BUFBMSUVEAE5PVF9NT0RJRklFRABOT1RfRVhURU5ERUQAQkFORFdJRFRIX0xJTUlUX0VYQ0VFREVEAFNJVEVfSVNfT1ZFUkxPQURFRABIRUFEAEV4cGVjdGVkIEhUVFAvAABeEwAAJhMAADAQAADwFwAAnRMAABUSAAA5FwAA8BIAAAoQAAB1EgAArRIAAIITAABPFAAAfxAAAKAVAAAjFAAAiRIAAIsUAABNFQAA1BEAAM8UAAAQGAAAyRYAANwWAADBEQAA4BcAALsUAAB0FAAAfBUAAOUUAAAIFwAAHxAAAGUVAACjFAAAKBUAAAIVAACZFQAALBAAAIsZAABPDwAA1A4AAGoQAADOEAAAAhcAAIkOAABuEwAAHBMAAGYUAABWFwAAwRMAAM0TAABsEwAAaBcAAGYXAABfFwAAIhMAAM4PAABpDgAA2A4AAGMWAADLEwAAqg4AACgXAAAmFwAAxRMAAF0WAADoEQAAZxMAAGUTAADyFgAAcxMAAB0XAAD5FgAA8xEAAM8OAADOFQAADBIAALMRAAClEQAAYRAAADIXAAC7EwBB+TULAQEAQZA2C+ABAQECAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAQf03CwEBAEGROAteAgMCAgICAgAAAgIAAgIAAgICAgICAgICAgAEAAAAAAACAgICAgICAgICAgICAgICAgICAgICAgICAgAAAAICAgICAgICAgICAgICAgICAgICAgICAgICAgICAAIAAgBB/TkLAQEAQZE6C14CAAICAgICAAACAgACAgACAgICAgICAgICAAMABAAAAAICAgICAgICAgICAgICAgICAgICAgICAgICAAAAAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAAgACAEHwOwsNbG9zZWVlcC1hbGl2ZQBBiTwLAQEAQaA8C+ABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAQYk+CwEBAEGgPgvnAQEBAQEBAQEBAQEBAQIBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBY2h1bmtlZABBsMAAC18BAQABAQEBAQAAAQEAAQEAAQEBAQEBAQEBAQAAAAAAAAABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQAAAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEAAQBBkMIACyFlY3Rpb25lbnQtbGVuZ3Rob25yb3h5LWNvbm5lY3Rpb24AQcDCAAstcmFuc2Zlci1lbmNvZGluZ3BncmFkZQ0KDQoNClNNDQoNClRUUC9DRS9UU1AvAEH5wgALBQECAAEDAEGQwwAL4AEEAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB+cQACwUBAgABAwBBkMUAC+ABBAEBBQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAQfnGAAsEAQAAAQBBkccAC98BAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB+sgACwQBAAACAEGQyQALXwMEAAAEBAQEBAQEBAQEBAUEBAQEBAQEBAQEBAQABAAGBwQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEAAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQAAAAEAEH6ygALBAEAAAEAQZDLAAsBAQBBqssAC0ECAAAAAAAAAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAAAAAAAADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwBB+swACwQBAAABAEGQzQALAQEAQZrNAAsGAgAAAAACAEGxzQALOgMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAAAAAAAAAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAQfDOAAuWAU5PVU5DRUVDS09VVE5FQ1RFVEVDUklCRUxVU0hFVEVBRFNFQVJDSFJHRUNUSVZJVFlMRU5EQVJWRU9USUZZUFRJT05TQ0hTRUFZU1RBVENIR0VPUkRJUkVDVE9SVFJDSFBBUkFNRVRFUlVSQ0VCU0NSSUJFQVJET1dOQUNFSU5ETktDS1VCU0NSSUJFSFRUUC9BRFRQLw==","base64")});var WE=x((qSt,Hte)=>{"use strict";var Nte=["GET","HEAD","POST"],IWe=new Set(Nte),SWe=[101,204,205,304],Pte=[301,302,303,307,308],BWe=new Set(Pte),Lte=["1","7","9","11","13","15","17","19","20","21","22","23","25","37","42","43","53","69","77","79","87","95","101","102","103","104","109","110","111","113","115","117","119","123","135","137","139","143","161","179","389","427","465","512","513","514","515","526","530","531","532","540","548","554","556","563","587","601","636","989","990","993","995","1719","1720","1723","2049","3659","4045","4190","5060","5061","6000","6566","6665","6666","6667","6668","6669","6679","6697","10080"],DWe=new Set(Lte),Ute=["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"],TWe=new Set(Ute),RWe=["follow","manual","error"],Ote=["GET","HEAD","OPTIONS","TRACE"],kWe=new Set(Ote),FWe=["navigate","same-origin","no-cors","cors"],MWe=["omit","same-origin","include"],QWe=["default","no-store","reload","no-cache","force-cache","only-if-cached"],NWe=["content-encoding","content-language","content-location","content-type","content-length"],PWe=["half"],qte=["CONNECT","TRACE","TRACK"],LWe=new Set(qte),Vte=["audio","audioworklet","font","image","manifest","paintworklet","script","style","track","video","xslt",""],UWe=new Set(Vte);Hte.exports={subresource:Vte,forbiddenMethods:qte,requestBodyHeader:NWe,referrerPolicy:Ute,requestRedirect:RWe,requestMode:FWe,requestCredentials:MWe,requestCache:QWe,redirectStatus:Pte,corsSafeListedMethods:Nte,nullBodyStatus:SWe,safeMethods:Ote,badPorts:Lte,requestDuplex:PWe,subresourceSet:UWe,badPortsSet:DWe,redirectStatusSet:BWe,corsSafeListedMethodsSet:IWe,safeMethodsSet:kWe,forbiddenMethodsSet:LWe,referrerPolicySet:TWe}});var eq=x((VSt,Wte)=>{"use strict";var XO=Symbol.for("undici.globalOrigin.1");function OWe(){return globalThis[XO]}function qWe(e){if(e===void 0){Object.defineProperty(globalThis,XO,{value:void 0,writable:!0,enumerable:!1,configurable:!1});return}let t=new URL(e);if(t.protocol!=="http:"&&t.protocol!=="https:")throw new TypeError(`Only http & https urls are allowed, received ${t.protocol}`);Object.defineProperty(globalThis,XO,{value:t,writable:!0,enumerable:!1,configurable:!1})}Wte.exports={getGlobalOrigin:OWe,setGlobalOrigin:qWe}});var Vo=x((HSt,jte)=>{"use strict";var $B=require("assert"),VWe=new TextEncoder,GE=/^[!#$%&'*+\-.^_|~A-Za-z0-9]+$/,HWe=/[\u000A\u000D\u0009\u0020]/,WWe=/[\u0009\u000A\u000C\u000D\u0020]/g,GWe=/^[\u0009\u0020-\u007E\u0080-\u00FF]+$/;function $We(e){$B(e.protocol==="data:");let t=Yte(e,!0);t=t.slice(5);let r={position:0},n=g0(",",t,r),i=n.length;if(n=ZWe(n,!0,!0),r.position>=t.length)return"failure";r.position++;let s=t.slice(i+1),o=Kte(s);if(/;(\u0020){0,}base64$/i.test(n)){let l=Jte(o);if(o=KWe(l),o==="failure")return"failure";n=n.slice(0,-6),n=n.replace(/(\u0020)+$/,""),n=n.slice(0,-1)}n.startsWith(";")&&(n="text/plain"+n);let a=tq(n);return a==="failure"&&(a=tq("text/plain;charset=US-ASCII")),{mimeType:a,body:o}}function Yte(e,t=!1){if(!t)return e.href;let r=e.href,n=e.hash.length,i=n===0?r:r.substring(0,r.length-n);return!n&&r.endsWith("#")?i.slice(0,-1):i}function YB(e,t,r){let n="";for(;r.position<t.length&&e(t[r.position]);)n+=t[r.position],r.position++;return n}function g0(e,t,r){let n=t.indexOf(e,r.position),i=r.position;return n===-1?(r.position=t.length,t.slice(i)):(r.position=n,t.slice(i,r.position))}function Kte(e){let t=VWe.encode(e);return YWe(t)}function Gte(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function $te(e){return e>=48&&e<=57?e-48:(e&223)-55}function YWe(e){let t=e.length,r=new Uint8Array(t),n=0;for(let i=0;i<t;++i){let s=e[i];s!==37?r[n++]=s:s===37&&!(Gte(e[i+1])&&Gte(e[i+2]))?r[n++]=37:(r[n++]=$te(e[i+1])<<4|$te(e[i+2]),i+=2)}return t===n?r:r.subarray(0,n)}function tq(e){e=GB(e,!0,!0);let t={position:0},r=g0("/",e,t);if(r.length===0||!GE.test(r)||t.position>e.length)return"failure";t.position++;let n=g0(";",e,t);if(n=GB(n,!1,!0),n.length===0||!GE.test(n))return"failure";let i=r.toLowerCase(),s=n.toLowerCase(),o={type:i,subtype:s,parameters:new Map,essence:`${i}/${s}`};for(;t.position<e.length;){t.position++,YB(c=>HWe.test(c),e,t);let a=YB(c=>c!==";"&&c!=="=",e,t);if(a=a.toLowerCase(),t.position<e.length){if(e[t.position]===";")continue;t.position++}if(t.position>e.length)break;let l=null;if(e[t.position]==='"')l=zte(e,t,!0),g0(";",e,t);else if(l=g0(";",e,t),l=GB(l,!1,!0),l.length===0)continue;a.length!==0&&GE.test(a)&&(l.length===0||GWe.test(l))&&!o.parameters.has(a)&&o.parameters.set(a,l)}return o}function KWe(e){e=e.replace(WWe,"");let t=e.length;if(t%4===0&&e.charCodeAt(t-1)===61&&(--t,e.charCodeAt(t-1)===61&&--t),t%4===1||/[^+/0-9A-Za-z]/.test(e.length===t?e:e.substring(0,t)))return"failure";let r=Buffer.from(e,"base64");return new Uint8Array(r.buffer,r.byteOffset,r.byteLength)}function zte(e,t,r){let n=t.position,i="";for($B(e[t.position]==='"'),t.position++;i+=YB(o=>o!=='"'&&o!=="\\",e,t),!(t.position>=e.length);){let s=e[t.position];if(t.position++,s==="\\"){if(t.position>=e.length){i+="\\";break}i+=e[t.position],t.position++}else{$B(s==='"');break}}return r?i:e.slice(n,t.position)}function zWe(e){$B(e!=="failure");let{parameters:t,essence:r}=e,n=r;for(let[i,s]of t.entries())n+=";",n+=i,n+="=",GE.test(s)||(s=s.replace(/(\\|")/g,"\\$1"),s='"'+s,s+='"'),n+=s;return n}function JWe(e){return e===13||e===10||e===9||e===32}function GB(e,t=!0,r=!0){return rq(e,t,r,JWe)}function jWe(e){return e===13||e===10||e===9||e===12||e===32}function ZWe(e,t=!0,r=!0){return rq(e,t,r,jWe)}function rq(e,t,r,n){let i=0,s=e.length-1;if(t)for(;i<e.length&&n(e.charCodeAt(i));)i++;if(r)for(;s>0&&n(e.charCodeAt(s));)s--;return i===0&&s===e.length-1?e:e.slice(i,s+1)}function Jte(e){let t=e.length;if(65535>t)return String.fromCharCode.apply(null,e);let r="",n=0,i=65535;for(;n<t;)n+i>t&&(i=t-n),r+=String.fromCharCode.apply(null,e.subarray(n,n+=i));return r}function XWe(e){switch(e.essence){case"application/ecmascript":case"application/javascript":case"application/x-ecmascript":case"application/x-javascript":case"text/ecmascript":case"text/javascript":case"text/javascript1.0":case"text/javascript1.1":case"text/javascript1.2":case"text/javascript1.3":case"text/javascript1.4":case"text/javascript1.5":case"text/jscript":case"text/livescript":case"text/x-ecmascript":case"text/x-javascript":return"text/javascript";case"application/json":case"text/json":return"application/json";case"image/svg+xml":return"image/svg+xml";case"text/xml":case"application/xml":return"application/xml"}return e.subtype.endsWith("+json")?"application/json":e.subtype.endsWith("+xml")?"application/xml":""}jte.exports={dataURLProcessor:$We,URLSerializer:Yte,collectASequenceOfCodePoints:YB,collectASequenceOfCodePointsFast:g0,stringPercentDecode:Kte,parseMIMEType:tq,collectAnHTTPQuotedString:zte,serializeAMimeType:zWe,removeChars:rq,removeHTTPWhitespace:GB,minimizeSupportedMimeType:XWe,HTTP_TOKEN_CODEPOINTS:GE,isomorphicDecode:Jte}});var _s=x((WSt,Zte)=>{"use strict";var{types:ou,inspect:eGe}=require("util"),{markAsUncloneable:tGe}=require("worker_threads"),{toUSVString:rGe}=rr(),xe={};xe.converters={};xe.util={};xe.errors={};xe.errors.exception=function(e){return new TypeError(`${e.header}: ${e.message}`)};xe.errors.conversionFailed=function(e){let t=e.types.length===1?"":" one of",r=`${e.argument} could not be converted to${t}: ${e.types.join(", ")}.`;return xe.errors.exception({header:e.prefix,message:r})};xe.errors.invalidArgument=function(e){return xe.errors.exception({header:e.prefix,message:`"${e.value}" is an invalid ${e.type}.`})};xe.brandCheck=function(e,t,r){if(r?.strict!==!1){if(!(e instanceof t)){let n=new TypeError("Illegal invocation");throw n.code="ERR_INVALID_THIS",n}}else if(e?.[Symbol.toStringTag]!==t.prototype[Symbol.toStringTag]){let n=new TypeError("Illegal invocation");throw n.code="ERR_INVALID_THIS",n}};xe.argumentLengthCheck=function({length:e},t,r){if(e<t)throw xe.errors.exception({message:`${t} argument${t!==1?"s":""} required, but${e?" only":""} ${e} found.`,header:r})};xe.illegalConstructor=function(){throw xe.errors.exception({header:"TypeError",message:"Illegal constructor"})};xe.util.Type=function(e){switch(typeof e){case"undefined":return"Undefined";case"boolean":return"Boolean";case"string":return"String";case"symbol":return"Symbol";case"number":return"Number";case"bigint":return"BigInt";case"function":case"object":return e===null?"Null":"Object"}};xe.util.markAsUncloneable=tGe||(()=>{});xe.util.ConvertToInt=function(e,t,r,n){let i,s;t===64?(i=Math.pow(2,53)-1,r==="unsigned"?s=0:s=Math.pow(-2,53)+1):r==="unsigned"?(s=0,i=Math.pow(2,t)-1):(s=Math.pow(-2,t)-1,i=Math.pow(2,t-1)-1);let o=Number(e);if(o===0&&(o=0),n?.enforceRange===!0){if(Number.isNaN(o)||o===Number.POSITIVE_INFINITY||o===Number.NEGATIVE_INFINITY)throw xe.errors.exception({header:"Integer conversion",message:`Could not convert ${xe.util.Stringify(e)} to an integer.`});if(o=xe.util.IntegerPart(o),o<s||o>i)throw xe.errors.exception({header:"Integer conversion",message:`Value must be between ${s}-${i}, got ${o}.`});return o}return!Number.isNaN(o)&&n?.clamp===!0?(o=Math.min(Math.max(o,s),i),Math.floor(o)%2===0?o=Math.floor(o):o=Math.ceil(o),o):Number.isNaN(o)||o===0&&Object.is(0,o)||o===Number.POSITIVE_INFINITY||o===Number.NEGATIVE_INFINITY?0:(o=xe.util.IntegerPart(o),o=o%Math.pow(2,t),r==="signed"&&o>=Math.pow(2,t)-1?o-Math.pow(2,t):o)};xe.util.IntegerPart=function(e){let t=Math.floor(Math.abs(e));return e<0?-1*t:t};xe.util.Stringify=function(e){switch(xe.util.Type(e)){case"Symbol":return`Symbol(${e.description})`;case"Object":return eGe(e);case"String":return`"${e}"`;default:return`${e}`}};xe.sequenceConverter=function(e){return(t,r,n,i)=>{if(xe.util.Type(t)!=="Object")throw xe.errors.exception({header:r,message:`${n} (${xe.util.Stringify(t)}) is not iterable.`});let s=typeof i=="function"?i():t?.[Symbol.iterator]?.(),o=[],a=0;if(s===void 0||typeof s.next!="function")throw xe.errors.exception({header:r,message:`${n} is not iterable.`});for(;;){let{done:l,value:c}=s.next();if(l)break;o.push(e(c,r,`${n}[${a++}]`))}return o}};xe.recordConverter=function(e,t){return(r,n,i)=>{if(xe.util.Type(r)!=="Object")throw xe.errors.exception({header:n,message:`${i} ("${xe.util.Type(r)}") is not an Object.`});let s={};if(!ou.isProxy(r)){let a=[...Object.getOwnPropertyNames(r),...Object.getOwnPropertySymbols(r)];for(let l of a){let c=e(l,n,i),u=t(r[l],n,i);s[c]=u}return s}let o=Reflect.ownKeys(r);for(let a of o)if(Reflect.getOwnPropertyDescriptor(r,a)?.enumerable){let c=e(a,n,i),u=t(r[a],n,i);s[c]=u}return s}};xe.interfaceConverter=function(e){return(t,r,n,i)=>{if(i?.strict!==!1&&!(t instanceof e))throw xe.errors.exception({header:r,message:`Expected ${n} ("${xe.util.Stringify(t)}") to be an instance of ${e.name}.`});return t}};xe.dictionaryConverter=function(e){return(t,r,n)=>{let i=xe.util.Type(t),s={};if(i==="Null"||i==="Undefined")return s;if(i!=="Object")throw xe.errors.exception({header:r,message:`Expected ${t} to be one of: Null, Undefined, Object.`});for(let o of e){let{key:a,defaultValue:l,required:c,converter:u}=o;if(c===!0&&!Object.hasOwn(t,a))throw xe.errors.exception({header:r,message:`Missing required key "${a}".`});let f=t[a],p=Object.hasOwn(o,"defaultValue");if(p&&f!==null&&(f??=l()),c||p||f!==void 0){if(f=u(f,r,`${n}.${a}`),o.allowedValues&&!o.allowedValues.includes(f))throw xe.errors.exception({header:r,message:`${f} is not an accepted type. Expected one of ${o.allowedValues.join(", ")}.`});s[a]=f}}return s}};xe.nullableConverter=function(e){return(t,r,n)=>t===null?t:e(t,r,n)};xe.converters.DOMString=function(e,t,r,n){if(e===null&&n?.legacyNullToEmptyString)return"";if(typeof e=="symbol")throw xe.errors.exception({header:t,message:`${r} is a symbol, which cannot be converted to a DOMString.`});return String(e)};xe.converters.ByteString=function(e,t,r){let n=xe.converters.DOMString(e,t,r);for(let i=0;i<n.length;i++)if(n.charCodeAt(i)>255)throw new TypeError(`Cannot convert argument to a ByteString because the character at index ${i} has a value of ${n.charCodeAt(i)} which is greater than 255.`);return n};xe.converters.USVString=rGe;xe.converters.boolean=function(e){return!!e};xe.converters.any=function(e){return e};xe.converters["long long"]=function(e,t,r){return xe.util.ConvertToInt(e,64,"signed",void 0,t,r)};xe.converters["unsigned long long"]=function(e,t,r){return xe.util.ConvertToInt(e,64,"unsigned",void 0,t,r)};xe.converters["unsigned long"]=function(e,t,r){return xe.util.ConvertToInt(e,32,"unsigned",void 0,t,r)};xe.converters["unsigned short"]=function(e,t,r,n){return xe.util.ConvertToInt(e,16,"unsigned",n,t,r)};xe.converters.ArrayBuffer=function(e,t,r,n){if(xe.util.Type(e)!=="Object"||!ou.isAnyArrayBuffer(e))throw xe.errors.conversionFailed({prefix:t,argument:`${r} ("${xe.util.Stringify(e)}")`,types:["ArrayBuffer"]});if(n?.allowShared===!1&&ou.isSharedArrayBuffer(e))throw xe.errors.exception({header:"ArrayBuffer",message:"SharedArrayBuffer is not allowed."});if(e.resizable||e.growable)throw xe.errors.exception({header:"ArrayBuffer",message:"Received a resizable ArrayBuffer."});return e};xe.converters.TypedArray=function(e,t,r,n,i){if(xe.util.Type(e)!=="Object"||!ou.isTypedArray(e)||e.constructor.name!==t.name)throw xe.errors.conversionFailed({prefix:r,argument:`${n} ("${xe.util.Stringify(e)}")`,types:[t.name]});if(i?.allowShared===!1&&ou.isSharedArrayBuffer(e.buffer))throw xe.errors.exception({header:"ArrayBuffer",message:"SharedArrayBuffer is not allowed."});if(e.buffer.resizable||e.buffer.growable)throw xe.errors.exception({header:"ArrayBuffer",message:"Received a resizable ArrayBuffer."});return e};xe.converters.DataView=function(e,t,r,n){if(xe.util.Type(e)!=="Object"||!ou.isDataView(e))throw xe.errors.exception({header:t,message:`${r} is not a DataView.`});if(n?.allowShared===!1&&ou.isSharedArrayBuffer(e.buffer))throw xe.errors.exception({header:"ArrayBuffer",message:"SharedArrayBuffer is not allowed."});if(e.buffer.resizable||e.buffer.growable)throw xe.errors.exception({header:"ArrayBuffer",message:"Received a resizable ArrayBuffer."});return e};xe.converters.BufferSource=function(e,t,r,n){if(ou.isAnyArrayBuffer(e))return xe.converters.ArrayBuffer(e,t,r,{...n,allowShared:!1});if(ou.isTypedArray(e))return xe.converters.TypedArray(e,e.constructor,t,r,{...n,allowShared:!1});if(ou.isDataView(e))return xe.converters.DataView(e,t,r,{...n,allowShared:!1});throw xe.errors.conversionFailed({prefix:t,argument:`${r} ("${xe.util.Stringify(e)}")`,types:["BufferSource"]})};xe.converters["sequence<ByteString>"]=xe.sequenceConverter(xe.converters.ByteString);xe.converters["sequence<sequence<ByteString>>"]=xe.sequenceConverter(xe.converters["sequence<ByteString>"]);xe.converters["record<ByteString, ByteString>"]=xe.recordConverter(xe.converters.ByteString,xe.converters.ByteString);Zte.exports={webidl:xe}});var ba=x((GSt,fre)=>{"use strict";var{Transform:nGe}=require("stream"),Xte=require("zlib"),{redirectStatusSet:iGe,referrerPolicySet:sGe,badPortsSet:oGe}=WE(),{getGlobalOrigin:ere}=eq(),{collectASequenceOfCodePoints:vp,collectAnHTTPQuotedString:aGe,removeChars:lGe,parseMIMEType:cGe}=Vo(),{performance:uGe}=require("perf_hooks"),{isBlobLike:dGe,ReadableStreamFrom:fGe,isValidHTTPToken:tre,normalizedMethodRecordsBase:hGe}=rr(),Ep=require("assert"),{isUint8Array:gGe}=require("util/types"),{webidl:$E}=_s(),rre=[],zB;try{zB=require("crypto");let e=["sha256","sha384","sha512"];rre=zB.getHashes().filter(t=>e.includes(t))}catch{}function nre(e){let t=e.urlList,r=t.length;return r===0?null:t[r-1].toString()}function pGe(e,t){if(!iGe.has(e.status))return null;let r=e.headersList.get("location",!0);return r!==null&&sre(r)&&(ire(r)||(r=AGe(r)),r=new URL(r,nre(e))),r&&!r.hash&&(r.hash=t),r}function ire(e){for(let t=0;t<e.length;++t){let r=e.charCodeAt(t);if(r>126||r<32)return!1}return!0}function AGe(e){return Buffer.from(e,"binary").toString("utf8")}function KE(e){return e.urlList[e.urlList.length-1]}function mGe(e){let t=KE(e);return ure(t)&&oGe.has(t.port)?"blocked":"allowed"}function yGe(e){return e instanceof Error||e?.constructor?.name==="Error"||e?.constructor?.name==="DOMException"}function CGe(e){for(let t=0;t<e.length;++t){let r=e.charCodeAt(t);if(!(r===9||r>=32&&r<=126||r>=128&&r<=255))return!1}return!0}var vGe=tre;function sre(e){return(e[0]==="	"||e[0]===" "||e[e.length-1]==="	"||e[e.length-1]===" "||e.includes(`
`)||e.includes("\r")||e.includes("\0"))===!1}function EGe(e,t){let{headersList:r}=t,n=(r.get("referrer-policy",!0)??"").split(","),i="";if(n.length>0)for(let s=n.length;s!==0;s--){let o=n[s-1].trim();if(sGe.has(o)){i=o;break}}i!==""&&(e.referrerPolicy=i)}function bGe(){return"allowed"}function xGe(){return"success"}function _Ge(){return"success"}function wGe(e){let t=null;t=e.mode,e.headersList.set("sec-fetch-mode",t,!0)}function IGe(e){let t=e.origin;if(!(t==="client"||t===void 0)){if(e.responseTainting==="cors"||e.mode==="websocket")e.headersList.append("origin",t,!0);else if(e.method!=="GET"&&e.method!=="HEAD"){switch(e.referrerPolicy){case"no-referrer":t=null;break;case"no-referrer-when-downgrade":case"strict-origin":case"strict-origin-when-cross-origin":e.origin&&iq(e.origin)&&!iq(KE(e))&&(t=null);break;case"same-origin":JB(e,KE(e))||(t=null);break;default:}e.headersList.append("origin",t,!0)}}}function p0(e,t){return e}function SGe(e,t,r){return!e?.startTime||e.startTime<t?{domainLookupStartTime:t,domainLookupEndTime:t,connectionStartTime:t,connectionEndTime:t,secureConnectionStartTime:t,ALPNNegotiatedProtocol:e?.ALPNNegotiatedProtocol}:{domainLookupStartTime:p0(e.domainLookupStartTime,r),domainLookupEndTime:p0(e.domainLookupEndTime,r),connectionStartTime:p0(e.connectionStartTime,r),connectionEndTime:p0(e.connectionEndTime,r),secureConnectionStartTime:p0(e.secureConnectionStartTime,r),ALPNNegotiatedProtocol:e.ALPNNegotiatedProtocol}}function BGe(e){return p0(uGe.now(),e)}function DGe(e){return{startTime:e.startTime??0,redirectStartTime:0,redirectEndTime:0,postRedirectStartTime:e.startTime??0,finalServiceWorkerStartTime:0,finalNetworkResponseStartTime:0,finalNetworkRequestStartTime:0,endTime:0,encodedBodySize:0,decodedBodySize:0,finalConnectionTimingInfo:null}}function ore(){return{referrerPolicy:"strict-origin-when-cross-origin"}}function TGe(e){return{referrerPolicy:e.referrerPolicy}}function RGe(e){let t=e.referrerPolicy;Ep(t);let r=null;if(e.referrer==="client"){let a=ere();if(!a||a.origin==="null")return"no-referrer";r=new URL(a)}else e.referrer instanceof URL&&(r=e.referrer);let n=nq(r),i=nq(r,!0);n.toString().length>4096&&(n=i);let s=JB(e,n),o=YE(n)&&!YE(e.url);switch(t){case"origin":return i??nq(r,!0);case"unsafe-url":return n;case"same-origin":return s?i:"no-referrer";case"origin-when-cross-origin":return s?n:i;case"strict-origin-when-cross-origin":{let a=KE(e);return JB(n,a)?n:YE(n)&&!YE(a)?"no-referrer":i}case"strict-origin":case"no-referrer-when-downgrade":default:return o?"no-referrer":i}}function nq(e,t){return Ep(e instanceof URL),e=new URL(e),e.protocol==="file:"||e.protocol==="about:"||e.protocol==="blank:"?"no-referrer":(e.username="",e.password="",e.hash="",t&&(e.pathname="",e.search=""),e)}function YE(e){if(!(e instanceof URL))return!1;if(e.href==="about:blank"||e.href==="about:srcdoc"||e.protocol==="data:"||e.protocol==="file:")return!0;return t(e.origin);function t(r){if(r==null||r==="null")return!1;let n=new URL(r);return!!(n.protocol==="https:"||n.protocol==="wss:"||/^127(?:\.[0-9]+){0,2}\.[0-9]+$|^\[(?:0*:)*?:?0*1\]$/.test(n.hostname)||n.hostname==="localhost"||n.hostname.includes("localhost.")||n.hostname.endsWith(".localhost"))}}function kGe(e,t){if(zB===void 0)return!0;let r=are(t);if(r==="no metadata"||r.length===0)return!0;let n=MGe(r),i=QGe(r,n);for(let s of i){let o=s.algo,a=s.hash,l=zB.createHash(o).update(e).digest("base64");if(l[l.length-1]==="="&&(l[l.length-2]==="="?l=l.slice(0,-2):l=l.slice(0,-1)),NGe(l,a))return!0}return!1}var FGe=/(?<algo>sha256|sha384|sha512)-((?<hash>[A-Za-z0-9+/]+|[A-Za-z0-9_-]+)={0,2}(?:\s|$)( +[!-~]*)?)?/i;function are(e){let t=[],r=!0;for(let n of e.split(" ")){r=!1;let i=FGe.exec(n);if(i===null||i.groups===void 0||i.groups.algo===void 0)continue;let s=i.groups.algo.toLowerCase();rre.includes(s)&&t.push(i.groups)}return r===!0?"no metadata":t}function MGe(e){let t=e[0].algo;if(t[3]==="5")return t;for(let r=1;r<e.length;++r){let n=e[r];if(n.algo[3]==="5"){t="sha512";break}else{if(t[3]==="3")continue;n.algo[3]==="3"&&(t="sha384")}}return t}function QGe(e,t){if(e.length===1)return e;let r=0;for(let n=0;n<e.length;++n)e[n].algo===t&&(e[r++]=e[n]);return e.length=r,e}function NGe(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;++r)if(e[r]!==t[r]){if(e[r]==="+"&&t[r]==="-"||e[r]==="/"&&t[r]==="_")continue;return!1}return!0}function PGe(e){}function JB(e,t){return e.origin===t.origin&&e.origin==="null"||e.protocol===t.protocol&&e.hostname===t.hostname&&e.port===t.port}function LGe(){let e,t;return{promise:new Promise((n,i)=>{e=n,t=i}),resolve:e,reject:t}}function UGe(e){return e.controller.state==="aborted"}function OGe(e){return e.controller.state==="aborted"||e.controller.state==="terminated"}function qGe(e){return hGe[e.toLowerCase()]??e}function VGe(e){let t=JSON.stringify(e);if(t===void 0)throw new TypeError("Value is not JSON serializable");return Ep(typeof t=="string"),t}var HGe=Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]()));function lre(e,t,r=0,n=1){class i{#e;#t;#i;constructor(o,a){this.#e=o,this.#t=a,this.#i=0}next(){if(typeof this!="object"||this===null||!(#e in this))throw new TypeError(`'next' called on an object that does not implement interface ${e} Iterator.`);let o=this.#i,a=this.#e[t],l=a.length;if(o>=l)return{value:void 0,done:!0};let{[r]:c,[n]:u}=a[o];this.#i=o+1;let f;switch(this.#t){case"key":f=c;break;case"value":f=u;break;case"key+value":f=[c,u];break}return{value:f,done:!1}}}return delete i.prototype.constructor,Object.setPrototypeOf(i.prototype,HGe),Object.defineProperties(i.prototype,{[Symbol.toStringTag]:{writable:!1,enumerable:!1,configurable:!0,value:`${e} Iterator`},next:{writable:!0,enumerable:!0,configurable:!0}}),function(s,o){return new i(s,o)}}function WGe(e,t,r,n=0,i=1){let s=lre(e,r,n,i),o={keys:{writable:!0,enumerable:!0,configurable:!0,value:function(){return $E.brandCheck(this,t),s(this,"key")}},values:{writable:!0,enumerable:!0,configurable:!0,value:function(){return $E.brandCheck(this,t),s(this,"value")}},entries:{writable:!0,enumerable:!0,configurable:!0,value:function(){return $E.brandCheck(this,t),s(this,"key+value")}},forEach:{writable:!0,enumerable:!0,configurable:!0,value:function(l,c=globalThis){if($E.brandCheck(this,t),$E.argumentLengthCheck(arguments,1,`${e}.forEach`),typeof l!="function")throw new TypeError(`Failed to execute 'forEach' on '${e}': parameter 1 is not of type 'Function'.`);for(let{0:u,1:f}of s(this,"key+value"))l.call(c,f,u,this)}}};return Object.defineProperties(t.prototype,{...o,[Symbol.iterator]:{writable:!0,enumerable:!1,configurable:!0,value:o.entries.value}})}async function GGe(e,t,r){let n=t,i=r,s;try{s=e.stream.getReader()}catch(o){i(o);return}try{n(await cre(s))}catch(o){i(o)}}function $Ge(e){return e instanceof ReadableStream||e[Symbol.toStringTag]==="ReadableStream"&&typeof e.tee=="function"}function YGe(e){try{e.close(),e.byobRequest?.respond(0)}catch(t){if(!t.message.includes("Controller is already closed")&&!t.message.includes("ReadableStream is already closed"))throw t}}var KGe=/[^\x00-\xFF]/;function KB(e){return Ep(!KGe.test(e)),e}async function cre(e){let t=[],r=0;for(;;){let{done:n,value:i}=await e.read();if(n)return Buffer.concat(t,r);if(!gGe(i))throw new TypeError("Received non-Uint8Array chunk");t.push(i),r+=i.length}}function zGe(e){Ep("protocol"in e);let t=e.protocol;return t==="about:"||t==="blob:"||t==="data:"}function iq(e){return typeof e=="string"&&e[5]===":"&&e[0]==="h"&&e[1]==="t"&&e[2]==="t"&&e[3]==="p"&&e[4]==="s"||e.protocol==="https:"}function ure(e){Ep("protocol"in e);let t=e.protocol;return t==="http:"||t==="https:"}function JGe(e,t){let r=e;if(!r.startsWith("bytes"))return"failure";let n={position:5};if(t&&vp(l=>l==="	"||l===" ",r,n),r.charCodeAt(n.position)!==61)return"failure";n.position++,t&&vp(l=>l==="	"||l===" ",r,n);let i=vp(l=>{let c=l.charCodeAt(0);return c>=48&&c<=57},r,n),s=i.length?Number(i):null;if(t&&vp(l=>l==="	"||l===" ",r,n),r.charCodeAt(n.position)!==45)return"failure";n.position++,t&&vp(l=>l==="	"||l===" ",r,n);let o=vp(l=>{let c=l.charCodeAt(0);return c>=48&&c<=57},r,n),a=o.length?Number(o):null;return n.position<r.length||a===null&&s===null||s>a?"failure":{rangeStartValue:s,rangeEndValue:a}}function jGe(e,t,r){let n="bytes ";return n+=KB(`${e}`),n+="-",n+=KB(`${t}`),n+="/",n+=KB(`${r}`),n}var sq=class extends nGe{#e;constructor(t){super(),this.#e=t}_transform(t,r,n){if(!this._inflateStream){if(t.length===0){n();return}this._inflateStream=(t[0]&15)===8?Xte.createInflate(this.#e):Xte.createInflateRaw(this.#e),this._inflateStream.on("data",this.push.bind(this)),this._inflateStream.on("end",()=>this.push(null)),this._inflateStream.on("error",i=>this.destroy(i))}this._inflateStream.write(t,r,n)}_final(t){this._inflateStream&&(this._inflateStream.end(),this._inflateStream=null),t()}};function ZGe(e){return new sq(e)}function XGe(e){let t=null,r=null,n=null,i=dre("content-type",e);if(i===null)return"failure";for(let s of i){let o=cGe(s);o==="failure"||o.essence==="*/*"||(n=o,n.essence!==r?(t=null,n.parameters.has("charset")&&(t=n.parameters.get("charset")),r=n.essence):!n.parameters.has("charset")&&t!==null&&n.parameters.set("charset",t))}return n??"failure"}function e4e(e){let t=e,r={position:0},n=[],i="";for(;r.position<t.length;){if(i+=vp(s=>s!=='"'&&s!==",",t,r),r.position<t.length)if(t.charCodeAt(r.position)===34){if(i+=aGe(t,r),r.position<t.length)continue}else Ep(t.charCodeAt(r.position)===44),r.position++;i=lGe(i,!0,!0,s=>s===9||s===32),n.push(i),i=""}return n}function dre(e,t){let r=t.get(e,!0);return r===null?null:e4e(r)}var t4e=new TextDecoder;function r4e(e){return e.length===0?"":(e[0]===239&&e[1]===187&&e[2]===191&&(e=e.subarray(3)),t4e.decode(e))}var oq=class{get baseUrl(){return ere()}get origin(){return this.baseUrl?.origin}policyContainer=ore()},aq=class{settingsObject=new oq},n4e=new aq;fre.exports={isAborted:UGe,isCancelled:OGe,isValidEncodedURL:ire,createDeferredPromise:LGe,ReadableStreamFrom:fGe,tryUpgradeRequestToAPotentiallyTrustworthyURL:PGe,clampAndCoarsenConnectionTimingInfo:SGe,coarsenedSharedCurrentTime:BGe,determineRequestsReferrer:RGe,makePolicyContainer:ore,clonePolicyContainer:TGe,appendFetchMetadata:wGe,appendRequestOriginHeader:IGe,TAOCheck:_Ge,corsCheck:xGe,crossOriginResourcePolicyCheck:bGe,createOpaqueTimingInfo:DGe,setRequestReferrerPolicyOnRedirect:EGe,isValidHTTPToken:tre,requestBadPort:mGe,requestCurrentURL:KE,responseURL:nre,responseLocationURL:pGe,isBlobLike:dGe,isURLPotentiallyTrustworthy:YE,isValidReasonPhrase:CGe,sameOrigin:JB,normalizeMethod:qGe,serializeJavascriptValueToJSONString:VGe,iteratorMixin:WGe,createIterator:lre,isValidHeaderName:vGe,isValidHeaderValue:sre,isErrorLike:yGe,fullyReadBody:GGe,bytesMatch:kGe,isReadableStreamLike:$Ge,readableStreamClose:YGe,isomorphicEncode:KB,urlIsLocal:zGe,urlHasHttpsScheme:iq,urlIsHttpHttpsScheme:ure,readAllBytes:cre,simpleRangeHeaderValue:JGe,buildContentRange:jGe,parseMetadata:are,createInflate:ZGe,extractMimeType:XGe,getDecodeSplit:dre,utf8DecodeBytes:r4e,environmentSettingsObject:n4e}});var ih=x(($St,hre)=>{"use strict";hre.exports={kUrl:Symbol("url"),kHeaders:Symbol("headers"),kSignal:Symbol("signal"),kState:Symbol("state"),kDispatcher:Symbol("dispatcher")}});var cq=x((YSt,gre)=>{"use strict";var{Blob:i4e,File:s4e}=require("buffer"),{kState:Nd}=ih(),{webidl:au}=_s(),lq=class e{constructor(t,r,n={}){let i=r,s=n.type,o=n.lastModified??Date.now();this[Nd]={blobLike:t,name:i,type:s,lastModified:o}}stream(...t){return au.brandCheck(this,e),this[Nd].blobLike.stream(...t)}arrayBuffer(...t){return au.brandCheck(this,e),this[Nd].blobLike.arrayBuffer(...t)}slice(...t){return au.brandCheck(this,e),this[Nd].blobLike.slice(...t)}text(...t){return au.brandCheck(this,e),this[Nd].blobLike.text(...t)}get size(){return au.brandCheck(this,e),this[Nd].blobLike.size}get type(){return au.brandCheck(this,e),this[Nd].blobLike.type}get name(){return au.brandCheck(this,e),this[Nd].name}get lastModified(){return au.brandCheck(this,e),this[Nd].lastModified}get[Symbol.toStringTag](){return"File"}};au.converters.Blob=au.interfaceConverter(i4e);function o4e(e){return e instanceof s4e||e&&(typeof e.stream=="function"||typeof e.arrayBuffer=="function")&&e[Symbol.toStringTag]==="File"}gre.exports={FileLike:lq,isFileLike:o4e}});var JE=x((KSt,Cre)=>{"use strict";var{isBlobLike:jB,iteratorMixin:a4e}=ba(),{kState:co}=ih(),{kEnumerableProperty:A0}=rr(),{FileLike:pre,isFileLike:l4e}=cq(),{webidl:yn}=_s(),{File:yre}=require("buffer"),Are=require("util"),mre=globalThis.File??yre,zE=class e{constructor(t){if(yn.util.markAsUncloneable(this),t!==void 0)throw yn.errors.conversionFailed({prefix:"FormData constructor",argument:"Argument 1",types:["undefined"]});this[co]=[]}append(t,r,n=void 0){yn.brandCheck(this,e);let i="FormData.append";if(yn.argumentLengthCheck(arguments,2,i),arguments.length===3&&!jB(r))throw new TypeError("Failed to execute 'append' on 'FormData': parameter 2 is not of type 'Blob'");t=yn.converters.USVString(t,i,"name"),r=jB(r)?yn.converters.Blob(r,i,"value",{strict:!1}):yn.converters.USVString(r,i,"value"),n=arguments.length===3?yn.converters.USVString(n,i,"filename"):void 0;let s=uq(t,r,n);this[co].push(s)}delete(t){yn.brandCheck(this,e);let r="FormData.delete";yn.argumentLengthCheck(arguments,1,r),t=yn.converters.USVString(t,r,"name"),this[co]=this[co].filter(n=>n.name!==t)}get(t){yn.brandCheck(this,e);let r="FormData.get";yn.argumentLengthCheck(arguments,1,r),t=yn.converters.USVString(t,r,"name");let n=this[co].findIndex(i=>i.name===t);return n===-1?null:this[co][n].value}getAll(t){yn.brandCheck(this,e);let r="FormData.getAll";return yn.argumentLengthCheck(arguments,1,r),t=yn.converters.USVString(t,r,"name"),this[co].filter(n=>n.name===t).map(n=>n.value)}has(t){yn.brandCheck(this,e);let r="FormData.has";return yn.argumentLengthCheck(arguments,1,r),t=yn.converters.USVString(t,r,"name"),this[co].findIndex(n=>n.name===t)!==-1}set(t,r,n=void 0){yn.brandCheck(this,e);let i="FormData.set";if(yn.argumentLengthCheck(arguments,2,i),arguments.length===3&&!jB(r))throw new TypeError("Failed to execute 'set' on 'FormData': parameter 2 is not of type 'Blob'");t=yn.converters.USVString(t,i,"name"),r=jB(r)?yn.converters.Blob(r,i,"name",{strict:!1}):yn.converters.USVString(r,i,"name"),n=arguments.length===3?yn.converters.USVString(n,i,"name"):void 0;let s=uq(t,r,n),o=this[co].findIndex(a=>a.name===t);o!==-1?this[co]=[...this[co].slice(0,o),s,...this[co].slice(o+1).filter(a=>a.name!==t)]:this[co].push(s)}[Are.inspect.custom](t,r){let n=this[co].reduce((s,o)=>(s[o.name]?Array.isArray(s[o.name])?s[o.name].push(o.value):s[o.name]=[s[o.name],o.value]:s[o.name]=o.value,s),{__proto__:null});r.depth??=t,r.colors??=!0;let i=Are.formatWithOptions(r,n);return`FormData ${i.slice(i.indexOf("]")+2)}`}};a4e("FormData",zE,co,"name","value");Object.defineProperties(zE.prototype,{append:A0,delete:A0,get:A0,getAll:A0,has:A0,set:A0,[Symbol.toStringTag]:{value:"FormData",configurable:!0}});function uq(e,t,r){if(typeof t!="string"){if(l4e(t)||(t=t instanceof Blob?new mre([t],"blob",{type:t.type}):new pre(t,"blob",{type:t.type})),r!==void 0){let n={type:t.type,lastModified:t.lastModified};t=t instanceof yre?new mre([t],r,n):new pre(t,r,n)}}return{name:e,value:t}}Cre.exports={FormData:zE,makeEntry:uq}});var wre=x((zSt,_re)=>{"use strict";var{isUSVString:vre,bufferToLowerCasedHeaderName:c4e}=rr(),{utf8DecodeBytes:u4e}=ba(),{HTTP_TOKEN_CODEPOINTS:d4e,isomorphicDecode:Ere}=Vo(),{isFileLike:f4e}=cq(),{makeEntry:h4e}=JE(),ZB=require("assert"),{File:g4e}=require("buffer"),p4e=globalThis.File??g4e,A4e=Buffer.from('form-data; name="'),bre=Buffer.from("; filename"),m4e=Buffer.from("--"),y4e=Buffer.from(`--\r
`);function C4e(e){for(let t=0;t<e.length;++t)if(e.charCodeAt(t)&-128)return!1;return!0}function v4e(e){let t=e.length;if(t<27||t>70)return!1;for(let r=0;r<t;++r){let n=e.charCodeAt(r);if(!(n>=48&&n<=57||n>=65&&n<=90||n>=97&&n<=122||n===39||n===45||n===95))return!1}return!0}function E4e(e,t){ZB(t!=="failure"&&t.essence==="multipart/form-data");let r=t.parameters.get("boundary");if(r===void 0)return"failure";let n=Buffer.from(`--${r}`,"utf8"),i=[],s={position:0};for(;e[s.position]===13&&e[s.position+1]===10;)s.position+=2;let o=e.length;for(;e[o-1]===10&&e[o-2]===13;)o-=2;for(o!==e.length&&(e=e.subarray(0,o));;){if(e.subarray(s.position,s.position+n.length).equals(n))s.position+=n.length;else return"failure";if(s.position===e.length-2&&XB(e,m4e,s)||s.position===e.length-4&&XB(e,y4e,s))return i;if(e[s.position]!==13||e[s.position+1]!==10)return"failure";s.position+=2;let a=b4e(e,s);if(a==="failure")return"failure";let{name:l,filename:c,contentType:u,encoding:f}=a;s.position+=2;let p;{let A=e.indexOf(n.subarray(2),s.position);if(A===-1)return"failure";p=e.subarray(s.position,A-4),s.position+=p.length,f==="base64"&&(p=Buffer.from(p.toString(),"base64"))}if(e[s.position]!==13||e[s.position+1]!==10)return"failure";s.position+=2;let g;c!==null?(u??="text/plain",C4e(u)||(u=""),g=new p4e([p],c,{type:u})):g=u4e(Buffer.from(p)),ZB(vre(l)),ZB(typeof g=="string"&&vre(g)||f4e(g)),i.push(h4e(l,g,c))}}function b4e(e,t){let r=null,n=null,i=null,s=null;for(;;){if(e[t.position]===13&&e[t.position+1]===10)return r===null?"failure":{name:r,filename:n,contentType:i,encoding:s};let o=m0(a=>a!==10&&a!==13&&a!==58,e,t);if(o=dq(o,!0,!0,a=>a===9||a===32),!d4e.test(o.toString())||e[t.position]!==58)return"failure";switch(t.position++,m0(a=>a===32||a===9,e,t),c4e(o)){case"content-disposition":{if(r=n=null,!XB(e,A4e,t)||(t.position+=17,r=xre(e,t),r===null))return"failure";if(XB(e,bre,t)){let a=t.position+bre.length;if(e[a]===42&&(t.position+=1,a+=1),e[a]!==61||e[a+1]!==34||(t.position+=12,n=xre(e,t),n===null))return"failure"}break}case"content-type":{let a=m0(l=>l!==10&&l!==13,e,t);a=dq(a,!1,!0,l=>l===9||l===32),i=Ere(a);break}case"content-transfer-encoding":{let a=m0(l=>l!==10&&l!==13,e,t);a=dq(a,!1,!0,l=>l===9||l===32),s=Ere(a);break}default:m0(a=>a!==10&&a!==13,e,t)}if(e[t.position]!==13&&e[t.position+1]!==10)return"failure";t.position+=2}}function xre(e,t){ZB(e[t.position-1]===34);let r=m0(n=>n!==10&&n!==13&&n!==34,e,t);return e[t.position]!==34?null:(t.position++,r=new TextDecoder().decode(r).replace(/%0A/ig,`
`).replace(/%0D/ig,"\r").replace(/%22/g,'"'),r)}function m0(e,t,r){let n=r.position;for(;n<t.length&&e(t[n]);)++n;return t.subarray(r.position,r.position=n)}function dq(e,t,r,n){let i=0,s=e.length-1;if(t)for(;i<e.length&&n(e[i]);)i++;if(r)for(;s>0&&n(e[s]);)s--;return i===0&&s===e.length-1?e:e.subarray(i,s+1)}function XB(e,t,r){if(e.length<t.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[r.position+n])return!1;return!0}_re.exports={multipartFormDataParser:E4e,validateBoundary:v4e}});var v0=x((JSt,Fre)=>{"use strict";var jE=rr(),{ReadableStreamFrom:x4e,isBlobLike:Ire,isReadableStreamLike:_4e,readableStreamClose:w4e,createDeferredPromise:I4e,fullyReadBody:S4e,extractMimeType:B4e,utf8DecodeBytes:Dre}=ba(),{FormData:Sre}=JE(),{kState:C0}=ih(),{webidl:D4e}=_s(),{Blob:T4e}=require("buffer"),fq=require("assert"),{isErrored:Tre,isDisturbed:R4e}=require("stream"),{isArrayBuffer:k4e}=require("util/types"),{serializeAMimeType:F4e}=Vo(),{multipartFormDataParser:M4e}=wre(),hq;try{let e=require("crypto");hq=t=>e.randomInt(0,t)}catch{hq=e=>Math.floor(Math.random(e))}var eD=new TextEncoder;function Q4e(){}var gq=globalThis.FinalizationRegistry&&process.version.indexOf("v18")!==0,pq;gq&&(pq=new FinalizationRegistry(e=>{let t=e.deref();t&&!t.locked&&!R4e(t)&&!Tre(t)&&t.cancel("Response object has been garbage collected").catch(Q4e)}));function Rre(e,t=!1){let r=null;e instanceof ReadableStream?r=e:Ire(e)?r=e.stream():r=new ReadableStream({async pull(l){let c=typeof i=="string"?eD.encode(i):i;c.byteLength&&l.enqueue(c),queueMicrotask(()=>w4e(l))},start(){},type:"bytes"}),fq(_4e(r));let n=null,i=null,s=null,o=null;if(typeof e=="string")i=e,o="text/plain;charset=UTF-8";else if(e instanceof URLSearchParams)i=e.toString(),o="application/x-www-form-urlencoded;charset=UTF-8";else if(k4e(e))i=new Uint8Array(e.slice());else if(ArrayBuffer.isView(e))i=new Uint8Array(e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength));else if(jE.isFormDataLike(e)){let l=`----formdata-undici-0${`${hq(1e11)}`.padStart(11,"0")}`,c=`--${l}\r
Content-Disposition: form-data`;let u=C=>C.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),f=C=>C.replace(/\r?\n|\r/g,`\r
`),p=[],g=new Uint8Array([13,10]);s=0;let A=!1;for(let[C,v]of e)if(typeof v=="string"){let b=eD.encode(c+`; name="${u(f(C))}"\r
\r
${f(v)}\r
`);p.push(b),s+=b.byteLength}else{let b=eD.encode(`${c}; name="${u(f(C))}"`+(v.name?`; filename="${u(v.name)}"`:"")+`\r
Content-Type: ${v.type||"application/octet-stream"}\r
\r
`);p.push(b,v,g),typeof v.size=="number"?s+=b.byteLength+v.size+g.byteLength:A=!0}let y=eD.encode(`--${l}--`);p.push(y),s+=y.byteLength,A&&(s=null),i=e,n=async function*(){for(let C of p)C.stream?yield*C.stream():yield C},o=`multipart/form-data; boundary=${l}`}else if(Ire(e))i=e,s=e.size,e.type&&(o=e.type);else if(typeof e[Symbol.asyncIterator]=="function"){if(t)throw new TypeError("keepalive");if(jE.isDisturbed(e)||e.locked)throw new TypeError("Response body object should not be disturbed or locked");r=e instanceof ReadableStream?e:x4e(e)}if((typeof i=="string"||jE.isBuffer(i))&&(s=Buffer.byteLength(i)),n!=null){let l;r=new ReadableStream({async start(){l=n(e)[Symbol.asyncIterator]()},async pull(c){let{value:u,done:f}=await l.next();if(f)queueMicrotask(()=>{c.close(),c.byobRequest?.respond(0)});else if(!Tre(r)){let p=new Uint8Array(u);p.byteLength&&c.enqueue(p)}return c.desiredSize>0},async cancel(c){await l.return()},type:"bytes"})}return[{stream:r,source:i,length:s},o]}function N4e(e,t=!1){return e instanceof ReadableStream&&(fq(!jE.isDisturbed(e),"The body has already been consumed."),fq(!e.locked,"The stream is locked.")),Rre(e,t)}function P4e(e,t){let[r,n]=t.stream.tee();return gq&&pq.register(e,new WeakRef(r)),t.stream=r,{stream:n,length:t.length,source:t.source}}function L4e(e){if(e.aborted)throw new DOMException("The operation was aborted.","AbortError")}function U4e(e){return{blob(){return y0(this,r=>{let n=Bre(this);return n===null?n="":n&&(n=F4e(n)),new T4e([r],{type:n})},e)},arrayBuffer(){return y0(this,r=>new Uint8Array(r).buffer,e)},text(){return y0(this,Dre,e)},json(){return y0(this,q4e,e)},formData(){return y0(this,r=>{let n=Bre(this);if(n!==null)switch(n.essence){case"multipart/form-data":{let i=M4e(r,n);if(i==="failure")throw new TypeError("Failed to parse body as FormData.");let s=new Sre;return s[C0]=i,s}case"application/x-www-form-urlencoded":{let i=new URLSearchParams(r.toString()),s=new Sre;for(let[o,a]of i)s.append(o,a);return s}}throw new TypeError('Content-Type was not one of "multipart/form-data" or "application/x-www-form-urlencoded".')},e)},bytes(){return y0(this,r=>new Uint8Array(r),e)}}}function O4e(e){Object.assign(e.prototype,U4e(e))}async function y0(e,t,r){if(D4e.brandCheck(e,r),kre(e))throw new TypeError("Body is unusable: Body has already been read");L4e(e[C0]);let n=I4e(),i=o=>n.reject(o),s=o=>{try{n.resolve(t(o))}catch(a){i(a)}};return e[C0].body==null?(s(Buffer.allocUnsafe(0)),n.promise):(await S4e(e[C0].body,s,i),n.promise)}function kre(e){let t=e[C0].body;return t!=null&&(t.stream.locked||jE.isDisturbed(t.stream))}function q4e(e){return JSON.parse(Dre(e))}function Bre(e){let t=e[C0].headersList,r=B4e(t);return r==="failure"?null:r}Fre.exports={extractBody:Rre,safelyExtractBody:N4e,cloneBody:P4e,mixinBody:O4e,streamRegistry:pq,hasFinalizationRegistry:gq,bodyUnusable:kre}});var Wre=x((jSt,Hre)=>{"use strict";var ht=require("assert"),Bt=rr(),{channels:Mre}=a0(),Aq=zO(),{RequestContentLengthMismatchError:bp,ResponseContentLengthMismatchError:V4e,RequestAbortedError:Ore,HeadersTimeoutError:H4e,HeadersOverflowError:W4e,SocketError:oD,InformationalError:E0,BodyTimeoutError:G4e,HTTPParserError:$4e,ResponseExceededMaxSizeError:Y4e}=$r(),{kUrl:qre,kReset:Ho,kClient:vq,kParser:si,kBlocking:eb,kRunning:Gs,kPending:K4e,kSize:Qre,kWriting:oh,kQueue:dc,kNoRef:ZE,kKeepAliveDefaultTimeout:z4e,kHostHeader:J4e,kPendingIdx:j4e,kRunningIdx:hl,kError:gl,kPipelining:iD,kSocket:b0,kKeepAliveTimeoutValue:aD,kMaxHeadersSize:mq,kKeepAliveMaxTimeout:Z4e,kKeepAliveTimeoutThreshold:X4e,kHeadersTimeout:e8e,kBodyTimeout:t8e,kStrictContentLength:Eq,kMaxRequests:Nre,kCounter:r8e,kMaxResponseSize:n8e,kOnError:i8e,kResume:sh,kHTTPContext:Vre}=Un(),lu=kte(),s8e=Buffer.alloc(0),tD=Buffer[Symbol.species],rD=Bt.addListener,o8e=Bt.removeAllListeners,yq;async function a8e(){let e=process.env.JEST_WORKER_ID?ZO():void 0,t;try{t=await WebAssembly.compile(Qte())}catch{t=await WebAssembly.compile(e||ZO())}return await WebAssembly.instantiate(t,{env:{wasm_on_url:(r,n,i)=>0,wasm_on_status:(r,n,i)=>{ht(Hi.ptr===r);let s=n-uu+cu.byteOffset;return Hi.onStatus(new tD(cu.buffer,s,i))||0},wasm_on_message_begin:r=>(ht(Hi.ptr===r),Hi.onMessageBegin()||0),wasm_on_header_field:(r,n,i)=>{ht(Hi.ptr===r);let s=n-uu+cu.byteOffset;return Hi.onHeaderField(new tD(cu.buffer,s,i))||0},wasm_on_header_value:(r,n,i)=>{ht(Hi.ptr===r);let s=n-uu+cu.byteOffset;return Hi.onHeaderValue(new tD(cu.buffer,s,i))||0},wasm_on_headers_complete:(r,n,i,s)=>(ht(Hi.ptr===r),Hi.onHeadersComplete(n,!!i,!!s)||0),wasm_on_body:(r,n,i)=>{ht(Hi.ptr===r);let s=n-uu+cu.byteOffset;return Hi.onBody(new tD(cu.buffer,s,i))||0},wasm_on_message_complete:r=>(ht(Hi.ptr===r),Hi.onMessageComplete()||0)}})}var Cq=null,bq=a8e();bq.catch();var Hi=null,cu=null,nD=0,uu=null,l8e=0,XE=1,x0=2|XE,sD=4|XE,xq=8|l8e,_q=class{constructor(t,r,{exports:n}){ht(Number.isFinite(t[mq])&&t[mq]>0),this.llhttp=n,this.ptr=this.llhttp.llhttp_alloc(lu.TYPE.RESPONSE),this.client=t,this.socket=r,this.timeout=null,this.timeoutValue=null,this.timeoutType=null,this.statusCode=null,this.statusText="",this.upgrade=!1,this.headers=[],this.headersSize=0,this.headersMaxSize=t[mq],this.shouldKeepAlive=!1,this.paused=!1,this.resume=this.resume.bind(this),this.bytesRead=0,this.keepAlive="",this.contentLength="",this.connection="",this.maxResponseSize=t[n8e]}setTimeout(t,r){t!==this.timeoutValue||r&XE^this.timeoutType&XE?(this.timeout&&(Aq.clearTimeout(this.timeout),this.timeout=null),t&&(r&XE?this.timeout=Aq.setFastTimeout(Pre,t,new WeakRef(this)):(this.timeout=setTimeout(Pre,t,new WeakRef(this)),this.timeout.unref())),this.timeoutValue=t):this.timeout&&this.timeout.refresh&&this.timeout.refresh(),this.timeoutType=r}resume(){this.socket.destroyed||!this.paused||(ht(this.ptr!=null),ht(Hi==null),this.llhttp.llhttp_resume(this.ptr),ht(this.timeoutType===sD),this.timeout&&this.timeout.refresh&&this.timeout.refresh(),this.paused=!1,this.execute(this.socket.read()||s8e),this.readMore())}readMore(){for(;!this.paused&&this.ptr;){let t=this.socket.read();if(t===null)break;this.execute(t)}}execute(t){ht(this.ptr!=null),ht(Hi==null),ht(!this.paused);let{socket:r,llhttp:n}=this;t.length>nD&&(uu&&n.free(uu),nD=Math.ceil(t.length/4096)*4096,uu=n.malloc(nD)),new Uint8Array(n.memory.buffer,uu,nD).set(t);try{let i;try{cu=t,Hi=this,i=n.llhttp_execute(this.ptr,uu,t.length)}catch(o){throw o}finally{Hi=null,cu=null}let s=n.llhttp_get_error_pos(this.ptr)-uu;if(i===lu.ERROR.PAUSED_UPGRADE)this.onUpgrade(t.slice(s));else if(i===lu.ERROR.PAUSED)this.paused=!0,r.unshift(t.slice(s));else if(i!==lu.ERROR.OK){let o=n.llhttp_get_error_reason(this.ptr),a="";if(o){let l=new Uint8Array(n.memory.buffer,o).indexOf(0);a="Response does not match the HTTP/1.1 protocol ("+Buffer.from(n.memory.buffer,o,l).toString()+")"}throw new $4e(a,lu.ERROR[i],t.slice(s))}}catch(i){Bt.destroy(r,i)}}destroy(){ht(this.ptr!=null),ht(Hi==null),this.llhttp.llhttp_free(this.ptr),this.ptr=null,this.timeout&&Aq.clearTimeout(this.timeout),this.timeout=null,this.timeoutValue=null,this.timeoutType=null,this.paused=!1}onStatus(t){this.statusText=t.toString()}onMessageBegin(){let{socket:t,client:r}=this;if(t.destroyed)return-1;let n=r[dc][r[hl]];if(!n)return-1;n.onResponseStarted()}onHeaderField(t){let r=this.headers.length;r&1?this.headers[r-1]=Buffer.concat([this.headers[r-1],t]):this.headers.push(t),this.trackHeader(t.length)}onHeaderValue(t){let r=this.headers.length;(r&1)===1?(this.headers.push(t),r+=1):this.headers[r-1]=Buffer.concat([this.headers[r-1],t]);let n=this.headers[r-2];if(n.length===10){let i=Bt.bufferToLowerCasedHeaderName(n);i==="keep-alive"?this.keepAlive+=t.toString():i==="connection"&&(this.connection+=t.toString())}else n.length===14&&Bt.bufferToLowerCasedHeaderName(n)==="content-length"&&(this.contentLength+=t.toString());this.trackHeader(t.length)}trackHeader(t){this.headersSize+=t,this.headersSize>=this.headersMaxSize&&Bt.destroy(this.socket,new W4e)}onUpgrade(t){let{upgrade:r,client:n,socket:i,headers:s,statusCode:o}=this;ht(r),ht(n[b0]===i),ht(!i.destroyed),ht(!this.paused),ht((s.length&1)===0);let a=n[dc][n[hl]];ht(a),ht(a.upgrade||a.method==="CONNECT"),this.statusCode=null,this.statusText="",this.shouldKeepAlive=null,this.headers=[],this.headersSize=0,i.unshift(t),i[si].destroy(),i[si]=null,i[vq]=null,i[gl]=null,o8e(i),n[b0]=null,n[Vre]=null,n[dc][n[hl]++]=null,n.emit("disconnect",n[qre],[n],new E0("upgrade"));try{a.onUpgrade(o,s,i)}catch(l){Bt.destroy(i,l)}n[sh]()}onHeadersComplete(t,r,n){let{client:i,socket:s,headers:o,statusText:a}=this;if(s.destroyed)return-1;let l=i[dc][i[hl]];if(!l)return-1;if(ht(!this.upgrade),ht(this.statusCode<200),t===100)return Bt.destroy(s,new oD("bad response",Bt.getSocketInfo(s))),-1;if(r&&!l.upgrade)return Bt.destroy(s,new oD("bad upgrade",Bt.getSocketInfo(s))),-1;if(ht(this.timeoutType===x0),this.statusCode=t,this.shouldKeepAlive=n||l.method==="HEAD"&&!s[Ho]&&this.connection.toLowerCase()==="keep-alive",this.statusCode>=200){let u=l.bodyTimeout!=null?l.bodyTimeout:i[t8e];this.setTimeout(u,sD)}else this.timeout&&this.timeout.refresh&&this.timeout.refresh();if(l.method==="CONNECT")return ht(i[Gs]===1),this.upgrade=!0,2;if(r)return ht(i[Gs]===1),this.upgrade=!0,2;if(ht((this.headers.length&1)===0),this.headers=[],this.headersSize=0,this.shouldKeepAlive&&i[iD]){let u=this.keepAlive?Bt.parseKeepAliveTimeout(this.keepAlive):null;if(u!=null){let f=Math.min(u-i[X4e],i[Z4e]);f<=0?s[Ho]=!0:i[aD]=f}else i[aD]=i[z4e]}else s[Ho]=!0;let c=l.onHeaders(t,o,this.resume,a)===!1;return l.aborted?-1:l.method==="HEAD"||t<200?1:(s[eb]&&(s[eb]=!1,i[sh]()),c?lu.ERROR.PAUSED:0)}onBody(t){let{client:r,socket:n,statusCode:i,maxResponseSize:s}=this;if(n.destroyed)return-1;let o=r[dc][r[hl]];if(ht(o),ht(this.timeoutType===sD),this.timeout&&this.timeout.refresh&&this.timeout.refresh(),ht(i>=200),s>-1&&this.bytesRead+t.length>s)return Bt.destroy(n,new Y4e),-1;if(this.bytesRead+=t.length,o.onData(t)===!1)return lu.ERROR.PAUSED}onMessageComplete(){let{client:t,socket:r,statusCode:n,upgrade:i,headers:s,contentLength:o,bytesRead:a,shouldKeepAlive:l}=this;if(r.destroyed&&(!n||l))return-1;if(i)return;ht(n>=100),ht((this.headers.length&1)===0);let c=t[dc][t[hl]];if(ht(c),this.statusCode=null,this.statusText="",this.bytesRead=0,this.contentLength="",this.keepAlive="",this.connection="",this.headers=[],this.headersSize=0,!(n<200)){if(c.method!=="HEAD"&&o&&a!==parseInt(o,10))return Bt.destroy(r,new V4e),-1;if(c.onComplete(s),t[dc][t[hl]++]=null,r[oh])return ht(t[Gs]===0),Bt.destroy(r,new E0("reset")),lu.ERROR.PAUSED;if(l){if(r[Ho]&&t[Gs]===0)return Bt.destroy(r,new E0("reset")),lu.ERROR.PAUSED;t[iD]==null||t[iD]===1?setImmediate(()=>t[sh]()):t[sh]()}else return Bt.destroy(r,new E0("reset")),lu.ERROR.PAUSED}}};function Pre(e){let{socket:t,timeoutType:r,client:n,paused:i}=e.deref();r===x0?(!t[oh]||t.writableNeedDrain||n[Gs]>1)&&(ht(!i,"cannot be paused while waiting for headers"),Bt.destroy(t,new H4e)):r===sD?i||Bt.destroy(t,new G4e):r===xq&&(ht(n[Gs]===0&&n[aD]),Bt.destroy(t,new E0("socket idle timeout")))}async function c8e(e,t){e[b0]=t,Cq||(Cq=await bq,bq=null),t[ZE]=!1,t[oh]=!1,t[Ho]=!1,t[eb]=!1,t[si]=new _q(e,t,Cq),rD(t,"error",function(n){ht(n.code!=="ERR_TLS_CERT_ALTNAME_INVALID");let i=this[si];if(n.code==="ECONNRESET"&&i.statusCode&&!i.shouldKeepAlive){i.onMessageComplete();return}this[gl]=n,this[vq][i8e](n)}),rD(t,"readable",function(){let n=this[si];n&&n.readMore()}),rD(t,"end",function(){let n=this[si];if(n.statusCode&&!n.shouldKeepAlive){n.onMessageComplete();return}Bt.destroy(this,new oD("other side closed",Bt.getSocketInfo(this)))}),rD(t,"close",function(){let n=this[vq],i=this[si];i&&(!this[gl]&&i.statusCode&&!i.shouldKeepAlive&&i.onMessageComplete(),this[si].destroy(),this[si]=null);let s=this[gl]||new oD("closed",Bt.getSocketInfo(this));if(n[b0]=null,n[Vre]=null,n.destroyed){ht(n[K4e]===0);let o=n[dc].splice(n[hl]);for(let a=0;a<o.length;a++){let l=o[a];Bt.errorRequest(n,l,s)}}else if(n[Gs]>0&&s.code!=="UND_ERR_INFO"){let o=n[dc][n[hl]];n[dc][n[hl]++]=null,Bt.errorRequest(n,o,s)}n[j4e]=n[hl],ht(n[Gs]===0),n.emit("disconnect",n[qre],[n],s),n[sh]()});let r=!1;return t.on("close",()=>{r=!0}),{version:"h1",defaultPipelining:1,write(...n){return f8e(e,...n)},resume(){u8e(e)},destroy(n,i){r?queueMicrotask(i):t.destroy(n).on("close",i)},get destroyed(){return t.destroyed},busy(n){return!!(t[oh]||t[Ho]||t[eb]||n&&(e[Gs]>0&&!n.idempotent||e[Gs]>0&&(n.upgrade||n.method==="CONNECT")||e[Gs]>0&&Bt.bodyLength(n.body)!==0&&(Bt.isStream(n.body)||Bt.isAsyncIterable(n.body)||Bt.isFormDataLike(n.body))))}}}function u8e(e){let t=e[b0];if(t&&!t.destroyed){if(e[Qre]===0?!t[ZE]&&t.unref&&(t.unref(),t[ZE]=!0):t[ZE]&&t.ref&&(t.ref(),t[ZE]=!1),e[Qre]===0)t[si].timeoutType!==xq&&t[si].setTimeout(e[aD],xq);else if(e[Gs]>0&&t[si].statusCode<200&&t[si].timeoutType!==x0){let r=e[dc][e[hl]],n=r.headersTimeout!=null?r.headersTimeout:e[e8e];t[si].setTimeout(n,x0)}}}function d8e(e){return e!=="GET"&&e!=="HEAD"&&e!=="OPTIONS"&&e!=="TRACE"&&e!=="CONNECT"}function f8e(e,t){let{method:r,path:n,host:i,upgrade:s,blocking:o,reset:a}=t,{body:l,headers:c,contentLength:u}=t,f=r==="PUT"||r==="POST"||r==="PATCH"||r==="QUERY"||r==="PROPFIND"||r==="PROPPATCH";if(Bt.isFormDataLike(l)){yq||(yq=v0().extractBody);let[C,v]=yq(l);t.contentType==null&&c.push("content-type",v),l=C.stream,u=C.length}else Bt.isBlobLike(l)&&t.contentType==null&&l.type&&c.push("content-type",l.type);l&&typeof l.read=="function"&&l.read(0);let p=Bt.bodyLength(l);if(u=p??u,u===null&&(u=t.contentLength),u===0&&!f&&(u=null),d8e(r)&&u>0&&t.contentLength!==null&&t.contentLength!==u){if(e[Eq])return Bt.errorRequest(e,t,new bp),!1;process.emitWarning(new bp)}let g=e[b0],A=C=>{t.aborted||t.completed||(Bt.errorRequest(e,t,C||new Ore),Bt.destroy(l),Bt.destroy(g,new E0("aborted")))};try{t.onConnect(A)}catch(C){Bt.errorRequest(e,t,C)}if(t.aborted)return!1;r==="HEAD"&&(g[Ho]=!0),(s||r==="CONNECT")&&(g[Ho]=!0),a!=null&&(g[Ho]=a),e[Nre]&&g[r8e]++>=e[Nre]&&(g[Ho]=!0),o&&(g[eb]=!0);let y=`${r} ${n} HTTP/1.1\r
`;if(typeof i=="string"?y+=`host: ${i}\r
`:y+=e[J4e],s?y+=`connection: upgrade\r
upgrade: ${s}\r
`:e[iD]&&!g[Ho]?y+=`connection: keep-alive\r
`:y+=`connection: close\r
`,Array.isArray(c))for(let C=0;C<c.length;C+=2){let v=c[C+0],b=c[C+1];if(Array.isArray(b))for(let w=0;w<b.length;w++)y+=`${v}: ${b[w]}\r
`;else y+=`${v}: ${b}\r
`}return Mre.sendHeaders.hasSubscribers&&Mre.sendHeaders.publish({request:t,headers:y,socket:g}),!l||p===0?Lre(A,null,e,t,g,u,y,f):Bt.isBuffer(l)?Lre(A,l,e,t,g,u,y,f):Bt.isBlobLike(l)?typeof l.stream=="function"?Ure(A,l.stream(),e,t,g,u,y,f):g8e(A,l,e,t,g,u,y,f):Bt.isStream(l)?h8e(A,l,e,t,g,u,y,f):Bt.isIterable(l)?Ure(A,l,e,t,g,u,y,f):ht(!1),!0}function h8e(e,t,r,n,i,s,o,a){ht(s!==0||r[Gs]===0,"stream body cannot be pipelined");let l=!1,c=new lD({abort:e,socket:i,request:n,contentLength:s,client:r,expectsPayload:a,header:o}),u=function(A){if(!l)try{!c.write(A)&&this.pause&&this.pause()}catch(y){Bt.destroy(this,y)}},f=function(){l||t.resume&&t.resume()},p=function(){if(queueMicrotask(()=>{t.removeListener("error",g)}),!l){let A=new Ore;queueMicrotask(()=>g(A))}},g=function(A){if(!l){if(l=!0,ht(i.destroyed||i[oh]&&r[Gs]<=1),i.off("drain",f).off("error",g),t.removeListener("data",u).removeListener("end",g).removeListener("close",p),!A)try{c.end()}catch(y){A=y}c.destroy(A),A&&(A.code!=="UND_ERR_INFO"||A.message!=="reset")?Bt.destroy(t,A):Bt.destroy(t)}};t.on("data",u).on("end",g).on("error",g).on("close",p),t.resume&&t.resume(),i.on("drain",f).on("error",g),t.errorEmitted??t.errored?setImmediate(()=>g(t.errored)):(t.endEmitted??t.readableEnded)&&setImmediate(()=>g(null)),(t.closeEmitted??t.closed)&&setImmediate(p)}function Lre(e,t,r,n,i,s,o,a){try{t?Bt.isBuffer(t)&&(ht(s===t.byteLength,"buffer body must have content length"),i.cork(),i.write(`${o}content-length: ${s}\r
\r
`,"latin1"),i.write(t),i.uncork(),n.onBodySent(t),!a&&n.reset!==!1&&(i[Ho]=!0)):s===0?i.write(`${o}content-length: 0\r
\r
`,"latin1"):(ht(s===null,"no body must not have content length"),i.write(`${o}\r
`,"latin1")),n.onRequestSent(),r[sh]()}catch(l){e(l)}}async function g8e(e,t,r,n,i,s,o,a){ht(s===t.size,"blob body must have content length");try{if(s!=null&&s!==t.size)throw new bp;let l=Buffer.from(await t.arrayBuffer());i.cork(),i.write(`${o}content-length: ${s}\r
\r
`,"latin1"),i.write(l),i.uncork(),n.onBodySent(l),n.onRequestSent(),!a&&n.reset!==!1&&(i[Ho]=!0),r[sh]()}catch(l){e(l)}}async function Ure(e,t,r,n,i,s,o,a){ht(s!==0||r[Gs]===0,"iterator body cannot be pipelined");let l=null;function c(){if(l){let p=l;l=null,p()}}let u=()=>new Promise((p,g)=>{ht(l===null),i[gl]?g(i[gl]):l=p});i.on("close",c).on("drain",c);let f=new lD({abort:e,socket:i,request:n,contentLength:s,client:r,expectsPayload:a,header:o});try{for await(let p of t){if(i[gl])throw i[gl];f.write(p)||await u()}f.end()}catch(p){f.destroy(p)}finally{i.off("close",c).off("drain",c)}}var lD=class{constructor({abort:t,socket:r,request:n,contentLength:i,client:s,expectsPayload:o,header:a}){this.socket=r,this.request=n,this.contentLength=i,this.client=s,this.bytesWritten=0,this.expectsPayload=o,this.header=a,this.abort=t,r[oh]=!0}write(t){let{socket:r,request:n,contentLength:i,client:s,bytesWritten:o,expectsPayload:a,header:l}=this;if(r[gl])throw r[gl];if(r.destroyed)return!1;let c=Buffer.byteLength(t);if(!c)return!0;if(i!==null&&o+c>i){if(s[Eq])throw new bp;process.emitWarning(new bp)}r.cork(),o===0&&(!a&&n.reset!==!1&&(r[Ho]=!0),i===null?r.write(`${l}transfer-encoding: chunked\r
`,"latin1"):r.write(`${l}content-length: ${i}\r
\r
`,"latin1")),i===null&&r.write(`\r
${c.toString(16)}\r
`,"latin1"),this.bytesWritten+=c;let u=r.write(t);return r.uncork(),n.onBodySent(t),u||r[si].timeout&&r[si].timeoutType===x0&&r[si].timeout.refresh&&r[si].timeout.refresh(),u}end(){let{socket:t,contentLength:r,client:n,bytesWritten:i,expectsPayload:s,header:o,request:a}=this;if(a.onRequestSent(),t[oh]=!1,t[gl])throw t[gl];if(!t.destroyed){if(i===0?s?t.write(`${o}content-length: 0\r
\r
`,"latin1"):t.write(`${o}\r
`,"latin1"):r===null&&t.write(`\r
0\r
\r
`,"latin1"),r!==null&&i!==r){if(n[Eq])throw new bp;process.emitWarning(new bp)}t[si].timeout&&t[si].timeoutType===x0&&t[si].timeout.refresh&&t[si].timeout.refresh(),n[sh]()}}destroy(t){let{socket:r,client:n,abort:i}=this;r[oh]=!1,t&&(ht(n[Gs]<=1,"pipeline should only contain this request"),i(t))}};Hre.exports=c8e});var Zre=x((ZSt,jre)=>{"use strict";var pl=require("assert"),{pipeline:p8e}=require("stream"),gr=rr(),{RequestContentLengthMismatchError:wq,RequestAbortedError:Gre,SocketError:tb,InformationalError:Iq}=$r(),{kUrl:cD,kReset:dD,kClient:_0,kRunning:fD,kPending:A8e,kQueue:ah,kPendingIdx:Sq,kRunningIdx:fc,kError:gc,kSocket:es,kStrictContentLength:m8e,kOnError:Bq,kMaxConcurrentStreams:Jre,kHTTP2Session:hc,kResume:lh,kSize:y8e,kHTTPContext:C8e}=Un(),Pd=Symbol("open streams"),$re,Yre=!1,uD;try{uD=require("http2")}catch{uD={constants:{}}}var{constants:{HTTP2_HEADER_AUTHORITY:v8e,HTTP2_HEADER_METHOD:E8e,HTTP2_HEADER_PATH:b8e,HTTP2_HEADER_SCHEME:x8e,HTTP2_HEADER_CONTENT_LENGTH:_8e,HTTP2_HEADER_EXPECT:w8e,HTTP2_HEADER_STATUS:I8e}}=uD;function S8e(e){let t=[];for(let[r,n]of Object.entries(e))if(Array.isArray(n))for(let i of n)t.push(Buffer.from(r),Buffer.from(i));else t.push(Buffer.from(r),Buffer.from(n));return t}async function B8e(e,t){e[es]=t,Yre||(Yre=!0,process.emitWarning("H2 support is experimental, expect them to change at any time.",{code:"UNDICI-H2"}));let r=uD.connect(e[cD],{createConnection:()=>t,peerMaxConcurrentStreams:e[Jre]});r[Pd]=0,r[_0]=e,r[es]=t,gr.addListener(r,"error",T8e),gr.addListener(r,"frameError",R8e),gr.addListener(r,"end",k8e),gr.addListener(r,"goaway",F8e),gr.addListener(r,"close",function(){let{[_0]:i}=this,{[es]:s}=i,o=this[es][gc]||this[gc]||new tb("closed",gr.getSocketInfo(s));if(i[hc]=null,i.destroyed){pl(i[A8e]===0);let a=i[ah].splice(i[fc]);for(let l=0;l<a.length;l++){let c=a[l];gr.errorRequest(i,c,o)}}}),r.unref(),e[hc]=r,t[hc]=r,gr.addListener(t,"error",function(i){pl(i.code!=="ERR_TLS_CERT_ALTNAME_INVALID"),this[gc]=i,this[_0][Bq](i)}),gr.addListener(t,"end",function(){gr.destroy(this,new tb("other side closed",gr.getSocketInfo(this)))}),gr.addListener(t,"close",function(){let i=this[gc]||new tb("closed",gr.getSocketInfo(this));e[es]=null,this[hc]!=null&&this[hc].destroy(i),e[Sq]=e[fc],pl(e[fD]===0),e.emit("disconnect",e[cD],[e],i),e[lh]()});let n=!1;return t.on("close",()=>{n=!0}),{version:"h2",defaultPipelining:1/0,write(...i){return Q8e(e,...i)},resume(){D8e(e)},destroy(i,s){n?queueMicrotask(s):t.destroy(i).on("close",s)},get destroyed(){return t.destroyed},busy(){return!1}}}function D8e(e){let t=e[es];t?.destroyed===!1&&(e[y8e]===0&&e[Jre]===0?(t.unref(),e[hc].unref()):(t.ref(),e[hc].ref()))}function T8e(e){pl(e.code!=="ERR_TLS_CERT_ALTNAME_INVALID"),this[es][gc]=e,this[_0][Bq](e)}function R8e(e,t,r){if(r===0){let n=new Iq(`HTTP/2: "frameError" received - type ${e}, code ${t}`);this[es][gc]=n,this[_0][Bq](n)}}function k8e(){let e=new tb("other side closed",gr.getSocketInfo(this[es]));this.destroy(e),gr.destroy(this[es],e)}function F8e(e){let t=this[gc]||new tb(`HTTP/2: "GOAWAY" frame received with code ${e}`,gr.getSocketInfo(this)),r=this[_0];if(r[es]=null,r[C8e]=null,this[hc]!=null&&(this[hc].destroy(t),this[hc]=null),gr.destroy(this[es],t),r[fc]<r[ah].length){let n=r[ah][r[fc]];r[ah][r[fc]++]=null,gr.errorRequest(r,n,t),r[Sq]=r[fc]}pl(r[fD]===0),r.emit("disconnect",r[cD],[r],t),r[lh]()}function M8e(e){return e!=="GET"&&e!=="HEAD"&&e!=="OPTIONS"&&e!=="TRACE"&&e!=="CONNECT"}function Q8e(e,t){let r=e[hc],{method:n,path:i,host:s,upgrade:o,expectContinue:a,signal:l,headers:c}=t,{body:u}=t;if(o)return gr.errorRequest(e,t,new Error("Upgrade not supported for H2")),!1;let f={};for(let B=0;B<c.length;B+=2){let F=c[B+0],Q=c[B+1];if(Array.isArray(Q))for(let W=0;W<Q.length;W++)f[F]?f[F]+=`,${Q[W]}`:f[F]=Q[W];else f[F]=Q}let p,{hostname:g,port:A}=e[cD];f[v8e]=s||`${g}${A?`:${A}`:""}`,f[E8e]=n;let y=B=>{t.aborted||t.completed||(B=B||new Gre,gr.errorRequest(e,t,B),p!=null&&gr.destroy(p,B),gr.destroy(u,B),e[ah][e[fc]++]=null,e[lh]())};try{t.onConnect(y)}catch(B){gr.errorRequest(e,t,B)}if(t.aborted)return!1;if(n==="CONNECT")return r.ref(),p=r.request(f,{endStream:!1,signal:l}),p.id&&!p.pending?(t.onUpgrade(null,null,p),++r[Pd],e[ah][e[fc]++]=null):p.once("ready",()=>{t.onUpgrade(null,null,p),++r[Pd],e[ah][e[fc]++]=null}),p.once("close",()=>{r[Pd]-=1,r[Pd]===0&&r.unref()}),!0;f[b8e]=i,f[x8e]="https";let C=n==="PUT"||n==="POST"||n==="PATCH";u&&typeof u.read=="function"&&u.read(0);let v=gr.bodyLength(u);if(gr.isFormDataLike(u)){$re??=v0().extractBody;let[B,F]=$re(u);f["content-type"]=F,u=B.stream,v=B.length}if(v==null&&(v=t.contentLength),(v===0||!C)&&(v=null),M8e(n)&&v>0&&t.contentLength!=null&&t.contentLength!==v){if(e[m8e])return gr.errorRequest(e,t,new wq),!1;process.emitWarning(new wq)}v!=null&&(pl(u,"no body must not have content length"),f[_8e]=`${v}`),r.ref();let b=n==="GET"||n==="HEAD"||u===null;return a?(f[w8e]="100-continue",p=r.request(f,{endStream:b,signal:l}),p.once("continue",w)):(p=r.request(f,{endStream:b,signal:l}),w()),++r[Pd],p.once("response",B=>{let{[I8e]:F,...Q}=B;if(t.onResponseStarted(),t.aborted){let W=new Gre;gr.errorRequest(e,t,W),gr.destroy(p,W);return}t.onHeaders(Number(F),S8e(Q),p.resume.bind(p),"")===!1&&p.pause(),p.on("data",W=>{t.onData(W)===!1&&p.pause()})}),p.once("end",()=>{(p.state?.state==null||p.state.state<6)&&t.onComplete([]),r[Pd]===0&&r.unref(),y(new Iq("HTTP/2: stream half-closed (remote)")),e[ah][e[fc]++]=null,e[Sq]=e[fc],e[lh]()}),p.once("close",()=>{r[Pd]-=1,r[Pd]===0&&r.unref()}),p.once("error",function(B){y(B)}),p.once("frameError",(B,F)=>{y(new Iq(`HTTP/2: "frameError" received - type ${B}, code ${F}`))}),!0;function w(){!u||v===0?Kre(y,p,null,e,t,e[es],v,C):gr.isBuffer(u)?Kre(y,p,u,e,t,e[es],v,C):gr.isBlobLike(u)?typeof u.stream=="function"?zre(y,p,u.stream(),e,t,e[es],v,C):P8e(y,p,u,e,t,e[es],v,C):gr.isStream(u)?N8e(y,e[es],C,p,u,e,t,v):gr.isIterable(u)?zre(y,p,u,e,t,e[es],v,C):pl(!1)}}function Kre(e,t,r,n,i,s,o,a){try{r!=null&&gr.isBuffer(r)&&(pl(o===r.byteLength,"buffer body must have content length"),t.cork(),t.write(r),t.uncork(),t.end(),i.onBodySent(r)),a||(s[dD]=!0),i.onRequestSent(),n[lh]()}catch(l){e(l)}}function N8e(e,t,r,n,i,s,o,a){pl(a!==0||s[fD]===0,"stream body cannot be pipelined");let l=p8e(i,n,u=>{u?(gr.destroy(l,u),e(u)):(gr.removeAllListeners(l),o.onRequestSent(),r||(t[dD]=!0),s[lh]())});gr.addListener(l,"data",c);function c(u){o.onBodySent(u)}}async function P8e(e,t,r,n,i,s,o,a){pl(o===r.size,"blob body must have content length");try{if(o!=null&&o!==r.size)throw new wq;let l=Buffer.from(await r.arrayBuffer());t.cork(),t.write(l),t.uncork(),t.end(),i.onBodySent(l),i.onRequestSent(),a||(s[dD]=!0),n[lh]()}catch(l){e(l)}}async function zre(e,t,r,n,i,s,o,a){pl(o!==0||n[fD]===0,"iterator body cannot be pipelined");let l=null;function c(){if(l){let f=l;l=null,f()}}let u=()=>new Promise((f,p)=>{pl(l===null),s[gc]?p(s[gc]):l=f});t.on("close",c).on("drain",c);try{for await(let f of r){if(s[gc])throw s[gc];let p=t.write(f);i.onBodySent(f),p||await u()}t.end(),i.onRequestSent(),a||(s[dD]=!0),n[lh]()}catch(f){e(f)}finally{t.off("close",c).off("drain",c)}}jre.exports=B8e});var gD=x((XSt,tne)=>{"use strict";var du=rr(),{kBodyUsed:rb}=Un(),Tq=require("assert"),{InvalidArgumentError:L8e}=$r(),U8e=require("events"),O8e=[300,301,302,303,307,308],Xre=Symbol("body"),hD=class{constructor(t){this[Xre]=t,this[rb]=!1}async*[Symbol.asyncIterator](){Tq(!this[rb],"disturbed"),this[rb]=!0,yield*this[Xre]}},Dq=class{constructor(t,r,n,i){if(r!=null&&(!Number.isInteger(r)||r<0))throw new L8e("maxRedirections must be a positive number");du.validateHandler(i,n.method,n.upgrade),this.dispatch=t,this.location=null,this.abort=null,this.opts={...n,maxRedirections:0},this.maxRedirections=r,this.handler=i,this.history=[],this.redirectionLimitReached=!1,du.isStream(this.opts.body)?(du.bodyLength(this.opts.body)===0&&this.opts.body.on("data",function(){Tq(!1)}),typeof this.opts.body.readableDidRead!="boolean"&&(this.opts.body[rb]=!1,U8e.prototype.on.call(this.opts.body,"data",function(){this[rb]=!0}))):this.opts.body&&typeof this.opts.body.pipeTo=="function"?this.opts.body=new hD(this.opts.body):this.opts.body&&typeof this.opts.body!="string"&&!ArrayBuffer.isView(this.opts.body)&&du.isIterable(this.opts.body)&&(this.opts.body=new hD(this.opts.body))}onConnect(t){this.abort=t,this.handler.onConnect(t,{history:this.history})}onUpgrade(t,r,n){this.handler.onUpgrade(t,r,n)}onError(t){this.handler.onError(t)}onHeaders(t,r,n,i){if(this.location=this.history.length>=this.maxRedirections||du.isDisturbed(this.opts.body)?null:q8e(t,r),this.opts.throwOnMaxRedirect&&this.history.length>=this.maxRedirections){this.request&&this.request.abort(new Error("max redirects")),this.redirectionLimitReached=!0,this.abort(new Error("max redirects"));return}if(this.opts.origin&&this.history.push(new URL(this.opts.path,this.opts.origin)),!this.location)return this.handler.onHeaders(t,r,n,i);let{origin:s,pathname:o,search:a}=du.parseURL(new URL(this.location,this.opts.origin&&new URL(this.opts.path,this.opts.origin))),l=a?`${o}${a}`:o;this.opts.headers=V8e(this.opts.headers,t===303,this.opts.origin!==s),this.opts.path=l,this.opts.origin=s,this.opts.maxRedirections=0,this.opts.query=null,t===303&&this.opts.method!=="HEAD"&&(this.opts.method="GET",this.opts.body=null)}onData(t){if(!this.location)return this.handler.onData(t)}onComplete(t){this.location?(this.location=null,this.abort=null,this.dispatch(this.opts,this)):this.handler.onComplete(t)}onBodySent(t){this.handler.onBodySent&&this.handler.onBodySent(t)}};function q8e(e,t){if(O8e.indexOf(e)===-1)return null;for(let r=0;r<t.length;r+=2)if(t[r].length===8&&du.headerNameToString(t[r])==="location")return t[r+1]}function ene(e,t,r){if(e.length===4)return du.headerNameToString(e)==="host";if(t&&du.headerNameToString(e).startsWith("content-"))return!0;if(r&&(e.length===13||e.length===6||e.length===19)){let n=du.headerNameToString(e);return n==="authorization"||n==="cookie"||n==="proxy-authorization"}return!1}function V8e(e,t,r){let n=[];if(Array.isArray(e))for(let i=0;i<e.length;i+=2)ene(e[i],t,r)||n.push(e[i],e[i+1]);else if(e&&typeof e=="object")for(let i of Object.keys(e))ene(i,t,r)||n.push(i,e[i]);else Tq(e==null,"headers must be an object or an array");return n}tne.exports=Dq});var pD=x((eBt,rne)=>{"use strict";var H8e=gD();function W8e({maxRedirections:e}){return t=>function(n,i){let{maxRedirections:s=e}=n;if(!s)return t(n,i);let o=new H8e(t,s,n,i);return n={...n,maxRedirections:0},t(n,o)}}rne.exports=W8e});var cb=x((tBt,fne)=>{"use strict";var Ld=require("assert"),lne=require("net"),G8e=require("http"),xp=rr(),{channels:w0}=a0(),$8e=Cte(),Y8e=d0(),{InvalidArgumentError:yi,InformationalError:K8e,ClientDestroyedError:z8e}=$r(),J8e=HE(),{kUrl:fu,kServerName:ch,kClient:j8e,kBusy:Rq,kConnect:Z8e,kResuming:_p,kRunning:ab,kPending:lb,kSize:ob,kQueue:pc,kConnected:X8e,kConnecting:I0,kNeedDrain:dh,kKeepAliveDefaultTimeout:nne,kHostHeader:e6e,kPendingIdx:Ac,kRunningIdx:Ud,kError:t6e,kPipelining:AD,kKeepAliveTimeoutValue:r6e,kMaxHeadersSize:n6e,kKeepAliveMaxTimeout:i6e,kKeepAliveTimeoutThreshold:s6e,kHeadersTimeout:o6e,kBodyTimeout:a6e,kStrictContentLength:l6e,kConnector:nb,kMaxRedirections:c6e,kMaxRequests:kq,kCounter:u6e,kClose:d6e,kDestroy:f6e,kDispatch:h6e,kInterceptors:ine,kLocalAddress:ib,kMaxResponseSize:g6e,kOnError:p6e,kHTTPContext:Ci,kMaxConcurrentStreams:A6e,kResume:sb}=Un(),m6e=Wre(),y6e=Zre(),sne=!1,uh=Symbol("kClosedResolve"),one=()=>{};function cne(e){return e[AD]??e[Ci]?.defaultPipelining??1}var Fq=class extends Y8e{constructor(t,{interceptors:r,maxHeaderSize:n,headersTimeout:i,socketTimeout:s,requestTimeout:o,connectTimeout:a,bodyTimeout:l,idleTimeout:c,keepAlive:u,keepAliveTimeout:f,maxKeepAliveTimeout:p,keepAliveMaxTimeout:g,keepAliveTimeoutThreshold:A,socketPath:y,pipelining:C,tls:v,strictContentLength:b,maxCachedSessions:w,maxRedirections:B,connect:F,maxRequestsPerClient:Q,localAddress:W,maxResponseSize:Z,autoSelectFamily:$,autoSelectFamilyAttemptTimeout:ee,maxConcurrentStreams:U,allowH2:ge}={}){if(super(),u!==void 0)throw new yi("unsupported keepAlive, use pipelining=0 instead");if(s!==void 0)throw new yi("unsupported socketTimeout, use headersTimeout & bodyTimeout instead");if(o!==void 0)throw new yi("unsupported requestTimeout, use headersTimeout & bodyTimeout instead");if(c!==void 0)throw new yi("unsupported idleTimeout, use keepAliveTimeout instead");if(p!==void 0)throw new yi("unsupported maxKeepAliveTimeout, use keepAliveMaxTimeout instead");if(n!=null&&!Number.isFinite(n))throw new yi("invalid maxHeaderSize");if(y!=null&&typeof y!="string")throw new yi("invalid socketPath");if(a!=null&&(!Number.isFinite(a)||a<0))throw new yi("invalid connectTimeout");if(f!=null&&(!Number.isFinite(f)||f<=0))throw new yi("invalid keepAliveTimeout");if(g!=null&&(!Number.isFinite(g)||g<=0))throw new yi("invalid keepAliveMaxTimeout");if(A!=null&&!Number.isFinite(A))throw new yi("invalid keepAliveTimeoutThreshold");if(i!=null&&(!Number.isInteger(i)||i<0))throw new yi("headersTimeout must be a positive integer or zero");if(l!=null&&(!Number.isInteger(l)||l<0))throw new yi("bodyTimeout must be a positive integer or zero");if(F!=null&&typeof F!="function"&&typeof F!="object")throw new yi("connect must be a function or an object");if(B!=null&&(!Number.isInteger(B)||B<0))throw new yi("maxRedirections must be a positive number");if(Q!=null&&(!Number.isInteger(Q)||Q<0))throw new yi("maxRequestsPerClient must be a positive number");if(W!=null&&(typeof W!="string"||lne.isIP(W)===0))throw new yi("localAddress must be valid string IP address");if(Z!=null&&(!Number.isInteger(Z)||Z<-1))throw new yi("maxResponseSize must be a positive number");if(ee!=null&&(!Number.isInteger(ee)||ee<-1))throw new yi("autoSelectFamilyAttemptTimeout must be a positive number");if(ge!=null&&typeof ge!="boolean")throw new yi("allowH2 must be a valid boolean value");if(U!=null&&(typeof U!="number"||U<1))throw new yi("maxConcurrentStreams must be a positive integer, greater than 0");typeof F!="function"&&(F=J8e({...v,maxCachedSessions:w,allowH2:ge,socketPath:y,timeout:a,...$?{autoSelectFamily:$,autoSelectFamilyAttemptTimeout:ee}:void 0,...F})),r?.Client&&Array.isArray(r.Client)?(this[ine]=r.Client,sne||(sne=!0,process.emitWarning("Client.Options#interceptor is deprecated. Use Dispatcher#compose instead.",{code:"UNDICI-CLIENT-INTERCEPTOR-DEPRECATED"}))):this[ine]=[C6e({maxRedirections:B})],this[fu]=xp.parseOrigin(t),this[nb]=F,this[AD]=C??1,this[n6e]=n||G8e.maxHeaderSize,this[nne]=f??4e3,this[i6e]=g??6e5,this[s6e]=A??2e3,this[r6e]=this[nne],this[ch]=null,this[ib]=W??null,this[_p]=0,this[dh]=0,this[e6e]=`host: ${this[fu].hostname}${this[fu].port?`:${this[fu].port}`:""}\r
`,this[a6e]=l??3e5,this[o6e]=i??3e5,this[l6e]=b??!0,this[c6e]=B,this[kq]=Q,this[uh]=null,this[g6e]=Z>-1?Z:-1,this[A6e]=U??100,this[Ci]=null,this[pc]=[],this[Ud]=0,this[Ac]=0,this[sb]=Se=>Mq(this,Se),this[p6e]=Se=>une(this,Se)}get pipelining(){return this[AD]}set pipelining(t){this[AD]=t,this[sb](!0)}get[lb](){return this[pc].length-this[Ac]}get[ab](){return this[Ac]-this[Ud]}get[ob](){return this[pc].length-this[Ud]}get[X8e](){return!!this[Ci]&&!this[I0]&&!this[Ci].destroyed}get[Rq](){return!!(this[Ci]?.busy(null)||this[ob]>=(cne(this)||1)||this[lb]>0)}[Z8e](t){dne(this),this.once("connect",t)}[h6e](t,r){let n=t.origin||this[fu].origin,i=new $8e(n,t,r);return this[pc].push(i),this[_p]||(xp.bodyLength(i.body)==null&&xp.isIterable(i.body)?(this[_p]=1,queueMicrotask(()=>Mq(this))):this[sb](!0)),this[_p]&&this[dh]!==2&&this[Rq]&&(this[dh]=2),this[dh]<2}async[d6e](){return new Promise(t=>{this[ob]?this[uh]=t:t(null)})}async[f6e](t){return new Promise(r=>{let n=this[pc].splice(this[Ac]);for(let s=0;s<n.length;s++){let o=n[s];xp.errorRequest(this,o,t)}let i=()=>{this[uh]&&(this[uh](),this[uh]=null),r(null)};this[Ci]?(this[Ci].destroy(t,i),this[Ci]=null):queueMicrotask(i),this[sb]()})}},C6e=pD();function une(e,t){if(e[ab]===0&&t.code!=="UND_ERR_INFO"&&t.code!=="UND_ERR_SOCKET"){Ld(e[Ac]===e[Ud]);let r=e[pc].splice(e[Ud]);for(let n=0;n<r.length;n++){let i=r[n];xp.errorRequest(e,i,t)}Ld(e[ob]===0)}}async function dne(e){Ld(!e[I0]),Ld(!e[Ci]);let{host:t,hostname:r,protocol:n,port:i}=e[fu];if(r[0]==="["){let s=r.indexOf("]");Ld(s!==-1);let o=r.substring(1,s);Ld(lne.isIP(o)),r=o}e[I0]=!0,w0.beforeConnect.hasSubscribers&&w0.beforeConnect.publish({connectParams:{host:t,hostname:r,protocol:n,port:i,version:e[Ci]?.version,servername:e[ch],localAddress:e[ib]},connector:e[nb]});try{let s=await new Promise((o,a)=>{e[nb]({host:t,hostname:r,protocol:n,port:i,servername:e[ch],localAddress:e[ib]},(l,c)=>{l?a(l):o(c)})});if(e.destroyed){xp.destroy(s.on("error",one),new z8e);return}Ld(s);try{e[Ci]=s.alpnProtocol==="h2"?await y6e(e,s):await m6e(e,s)}catch(o){throw s.destroy().on("error",one),o}e[I0]=!1,s[u6e]=0,s[kq]=e[kq],s[j8e]=e,s[t6e]=null,w0.connected.hasSubscribers&&w0.connected.publish({connectParams:{host:t,hostname:r,protocol:n,port:i,version:e[Ci]?.version,servername:e[ch],localAddress:e[ib]},connector:e[nb],socket:s}),e.emit("connect",e[fu],[e])}catch(s){if(e.destroyed)return;if(e[I0]=!1,w0.connectError.hasSubscribers&&w0.connectError.publish({connectParams:{host:t,hostname:r,protocol:n,port:i,version:e[Ci]?.version,servername:e[ch],localAddress:e[ib]},connector:e[nb],error:s}),s.code==="ERR_TLS_CERT_ALTNAME_INVALID")for(Ld(e[ab]===0);e[lb]>0&&e[pc][e[Ac]].servername===e[ch];){let o=e[pc][e[Ac]++];xp.errorRequest(e,o,s)}else une(e,s);e.emit("connectionError",e[fu],[e],s)}e[sb]()}function ane(e){e[dh]=0,e.emit("drain",e[fu],[e])}function Mq(e,t){e[_p]!==2&&(e[_p]=2,v6e(e,t),e[_p]=0,e[Ud]>256&&(e[pc].splice(0,e[Ud]),e[Ac]-=e[Ud],e[Ud]=0))}function v6e(e,t){for(;;){if(e.destroyed){Ld(e[lb]===0);return}if(e[uh]&&!e[ob]){e[uh](),e[uh]=null;return}if(e[Ci]&&e[Ci].resume(),e[Rq])e[dh]=2;else if(e[dh]===2){t?(e[dh]=1,queueMicrotask(()=>ane(e))):ane(e);continue}if(e[lb]===0||e[ab]>=(cne(e)||1))return;let r=e[pc][e[Ac]];if(e[fu].protocol==="https:"&&e[ch]!==r.servername){if(e[ab]>0)return;e[ch]=r.servername,e[Ci]?.destroy(new K8e("servername changed"),()=>{e[Ci]=null,Mq(e)})}if(e[I0])return;if(!e[Ci]){dne(e);return}if(e[Ci].destroyed||e[Ci].busy(r))return;!r.aborted&&e[Ci].write(r)?e[Ac]++:e[pc].splice(e[Ac],1)}}fne.exports=Fq});var Qq=x((nBt,hne)=>{"use strict";var mD=class{constructor(){this.bottom=0,this.top=0,this.list=new Array(2048),this.next=null}isEmpty(){return this.top===this.bottom}isFull(){return(this.top+1&2047)===this.bottom}push(t){this.list[this.top]=t,this.top=this.top+1&2047}shift(){let t=this.list[this.bottom];return t===void 0?null:(this.list[this.bottom]=void 0,this.bottom=this.bottom+1&2047,t)}};hne.exports=class{constructor(){this.head=this.tail=new mD}isEmpty(){return this.head.isEmpty()}push(t){this.head.isFull()&&(this.head=this.head.next=new mD),this.head.push(t)}shift(){let t=this.tail,r=t.shift();return t.isEmpty()&&t.next!==null&&(this.tail=t.next),r}}});var pne=x((iBt,gne)=>{"use strict";var{kFree:E6e,kConnected:b6e,kPending:x6e,kQueued:_6e,kRunning:w6e,kSize:I6e}=Un(),wp=Symbol("pool"),Nq=class{constructor(t){this[wp]=t}get connected(){return this[wp][b6e]}get free(){return this[wp][E6e]}get pending(){return this[wp][x6e]}get queued(){return this[wp][_6e]}get running(){return this[wp][w6e]}get size(){return this[wp][I6e]}};gne.exports=Nq});var Vq=x((sBt,wne)=>{"use strict";var S6e=d0(),B6e=Qq(),{kConnected:Pq,kSize:Ane,kRunning:mne,kPending:yne,kQueued:ub,kBusy:D6e,kFree:T6e,kUrl:R6e,kClose:k6e,kDestroy:F6e,kDispatch:M6e}=Un(),Q6e=pne(),Wo=Symbol("clients"),uo=Symbol("needDrain"),db=Symbol("queue"),Lq=Symbol("closed resolve"),Uq=Symbol("onDrain"),Cne=Symbol("onConnect"),vne=Symbol("onDisconnect"),Ene=Symbol("onConnectionError"),Oq=Symbol("get dispatcher"),xne=Symbol("add client"),_ne=Symbol("remove client"),bne=Symbol("stats"),qq=class extends S6e{constructor(){super(),this[db]=new B6e,this[Wo]=[],this[ub]=0;let t=this;this[Uq]=function(n,i){let s=t[db],o=!1;for(;!o;){let a=s.shift();if(!a)break;t[ub]--,o=!this.dispatch(a.opts,a.handler)}this[uo]=o,!this[uo]&&t[uo]&&(t[uo]=!1,t.emit("drain",n,[t,...i])),t[Lq]&&s.isEmpty()&&Promise.all(t[Wo].map(a=>a.close())).then(t[Lq])},this[Cne]=(r,n)=>{t.emit("connect",r,[t,...n])},this[vne]=(r,n,i)=>{t.emit("disconnect",r,[t,...n],i)},this[Ene]=(r,n,i)=>{t.emit("connectionError",r,[t,...n],i)},this[bne]=new Q6e(this)}get[D6e](){return this[uo]}get[Pq](){return this[Wo].filter(t=>t[Pq]).length}get[T6e](){return this[Wo].filter(t=>t[Pq]&&!t[uo]).length}get[yne](){let t=this[ub];for(let{[yne]:r}of this[Wo])t+=r;return t}get[mne](){let t=0;for(let{[mne]:r}of this[Wo])t+=r;return t}get[Ane](){let t=this[ub];for(let{[Ane]:r}of this[Wo])t+=r;return t}get stats(){return this[bne]}async[k6e](){this[db].isEmpty()?await Promise.all(this[Wo].map(t=>t.close())):await new Promise(t=>{this[Lq]=t})}async[F6e](t){for(;;){let r=this[db].shift();if(!r)break;r.handler.onError(t)}await Promise.all(this[Wo].map(r=>r.destroy(t)))}[M6e](t,r){let n=this[Oq]();return n?n.dispatch(t,r)||(n[uo]=!0,this[uo]=!this[Oq]()):(this[uo]=!0,this[db].push({opts:t,handler:r}),this[ub]++),!this[uo]}[xne](t){return t.on("drain",this[Uq]).on("connect",this[Cne]).on("disconnect",this[vne]).on("connectionError",this[Ene]),this[Wo].push(t),this[uo]&&queueMicrotask(()=>{this[uo]&&this[Uq](t[R6e],[this,t])}),this}[_ne](t){t.close(()=>{let r=this[Wo].indexOf(t);r!==-1&&this[Wo].splice(r,1)}),this[uo]=this[Wo].some(r=>!r[uo]&&r.closed!==!0&&r.destroyed!==!0)}};wne.exports={PoolBase:qq,kClients:Wo,kNeedDrain:uo,kAddClient:xne,kRemoveClient:_ne,kGetDispatcher:Oq}});var S0=x((oBt,Tne)=>{"use strict";var{PoolBase:N6e,kClients:Ine,kNeedDrain:P6e,kAddClient:L6e,kGetDispatcher:U6e}=Vq(),O6e=cb(),{InvalidArgumentError:Hq}=$r(),Sne=rr(),{kUrl:Bne,kInterceptors:q6e}=Un(),V6e=HE(),Wq=Symbol("options"),Gq=Symbol("connections"),Dne=Symbol("factory");function H6e(e,t){return new O6e(e,t)}var $q=class extends N6e{constructor(t,{connections:r,factory:n=H6e,connect:i,connectTimeout:s,tls:o,maxCachedSessions:a,socketPath:l,autoSelectFamily:c,autoSelectFamilyAttemptTimeout:u,allowH2:f,...p}={}){if(super(),r!=null&&(!Number.isFinite(r)||r<0))throw new Hq("invalid connections");if(typeof n!="function")throw new Hq("factory must be a function.");if(i!=null&&typeof i!="function"&&typeof i!="object")throw new Hq("connect must be a function or an object");typeof i!="function"&&(i=V6e({...o,maxCachedSessions:a,allowH2:f,socketPath:l,timeout:s,...c?{autoSelectFamily:c,autoSelectFamilyAttemptTimeout:u}:void 0,...i})),this[q6e]=p.interceptors?.Pool&&Array.isArray(p.interceptors.Pool)?p.interceptors.Pool:[],this[Gq]=r||null,this[Bne]=Sne.parseOrigin(t),this[Wq]={...Sne.deepClone(p),connect:i,allowH2:f},this[Wq].interceptors=p.interceptors?{...p.interceptors}:void 0,this[Dne]=n}[U6e](){for(let t of this[Ine])if(!t[P6e])return t;if(!this[Gq]||this[Ine].length<this[Gq]){let t=this[Dne](this[Bne],this[Wq]);return this[L6e](t),t}}};Tne.exports=$q});var Qne=x((aBt,Mne)=>{"use strict";var{BalancedPoolMissingUpstreamError:W6e,InvalidArgumentError:G6e}=$r(),{PoolBase:$6e,kClients:$s,kNeedDrain:fb,kAddClient:Y6e,kRemoveClient:K6e,kGetDispatcher:z6e}=Vq(),J6e=S0(),{kUrl:Yq,kInterceptors:j6e}=Un(),{parseOrigin:Rne}=rr(),kne=Symbol("factory"),yD=Symbol("options"),Fne=Symbol("kGreatestCommonDivisor"),Ip=Symbol("kCurrentWeight"),Sp=Symbol("kIndex"),Al=Symbol("kWeight"),CD=Symbol("kMaxWeightPerServer"),vD=Symbol("kErrorPenalty");function Z6e(e,t){if(e===0)return t;for(;t!==0;){let r=t;t=e%t,e=r}return e}function X6e(e,t){return new J6e(e,t)}var Kq=class extends $6e{constructor(t=[],{factory:r=X6e,...n}={}){if(super(),this[yD]=n,this[Sp]=-1,this[Ip]=0,this[CD]=this[yD].maxWeightPerServer||100,this[vD]=this[yD].errorPenalty||15,Array.isArray(t)||(t=[t]),typeof r!="function")throw new G6e("factory must be a function.");this[j6e]=n.interceptors?.BalancedPool&&Array.isArray(n.interceptors.BalancedPool)?n.interceptors.BalancedPool:[],this[kne]=r;for(let i of t)this.addUpstream(i);this._updateBalancedPoolStats()}addUpstream(t){let r=Rne(t).origin;if(this[$s].find(i=>i[Yq].origin===r&&i.closed!==!0&&i.destroyed!==!0))return this;let n=this[kne](r,Object.assign({},this[yD]));this[Y6e](n),n.on("connect",()=>{n[Al]=Math.min(this[CD],n[Al]+this[vD])}),n.on("connectionError",()=>{n[Al]=Math.max(1,n[Al]-this[vD]),this._updateBalancedPoolStats()}),n.on("disconnect",(...i)=>{let s=i[2];s&&s.code==="UND_ERR_SOCKET"&&(n[Al]=Math.max(1,n[Al]-this[vD]),this._updateBalancedPoolStats())});for(let i of this[$s])i[Al]=this[CD];return this._updateBalancedPoolStats(),this}_updateBalancedPoolStats(){let t=0;for(let r=0;r<this[$s].length;r++)t=Z6e(this[$s][r][Al],t);this[Fne]=t}removeUpstream(t){let r=Rne(t).origin,n=this[$s].find(i=>i[Yq].origin===r&&i.closed!==!0&&i.destroyed!==!0);return n&&this[K6e](n),this}get upstreams(){return this[$s].filter(t=>t.closed!==!0&&t.destroyed!==!0).map(t=>t[Yq].origin)}[z6e](){if(this[$s].length===0)throw new W6e;if(!this[$s].find(s=>!s[fb]&&s.closed!==!0&&s.destroyed!==!0)||this[$s].map(s=>s[fb]).reduce((s,o)=>s&&o,!0))return;let n=0,i=this[$s].findIndex(s=>!s[fb]);for(;n++<this[$s].length;){this[Sp]=(this[Sp]+1)%this[$s].length;let s=this[$s][this[Sp]];if(s[Al]>this[$s][i][Al]&&!s[fb]&&(i=this[Sp]),this[Sp]===0&&(this[Ip]=this[Ip]-this[Fne],this[Ip]<=0&&(this[Ip]=this[CD])),s[Al]>=this[Ip]&&!s[fb])return s}return this[Ip]=this[$s][i][Al],this[Sp]=i,this[$s][i]}};Mne.exports=Kq});var B0=x((lBt,Vne)=>{"use strict";var{InvalidArgumentError:ED}=$r(),{kClients:fh,kRunning:Nne,kClose:e9e,kDestroy:t9e,kDispatch:r9e,kInterceptors:n9e}=Un(),i9e=d0(),s9e=S0(),o9e=cb(),a9e=rr(),l9e=pD(),Pne=Symbol("onConnect"),Lne=Symbol("onDisconnect"),Une=Symbol("onConnectionError"),c9e=Symbol("maxRedirections"),One=Symbol("onDrain"),qne=Symbol("factory"),zq=Symbol("options");function u9e(e,t){return t&&t.connections===1?new o9e(e,t):new s9e(e,t)}var Jq=class extends i9e{constructor({factory:t=u9e,maxRedirections:r=0,connect:n,...i}={}){if(super(),typeof t!="function")throw new ED("factory must be a function.");if(n!=null&&typeof n!="function"&&typeof n!="object")throw new ED("connect must be a function or an object");if(!Number.isInteger(r)||r<0)throw new ED("maxRedirections must be a positive number");n&&typeof n!="function"&&(n={...n}),this[n9e]=i.interceptors?.Agent&&Array.isArray(i.interceptors.Agent)?i.interceptors.Agent:[l9e({maxRedirections:r})],this[zq]={...a9e.deepClone(i),connect:n},this[zq].interceptors=i.interceptors?{...i.interceptors}:void 0,this[c9e]=r,this[qne]=t,this[fh]=new Map,this[One]=(s,o)=>{this.emit("drain",s,[this,...o])},this[Pne]=(s,o)=>{this.emit("connect",s,[this,...o])},this[Lne]=(s,o,a)=>{this.emit("disconnect",s,[this,...o],a)},this[Une]=(s,o,a)=>{this.emit("connectionError",s,[this,...o],a)}}get[Nne](){let t=0;for(let r of this[fh].values())t+=r[Nne];return t}[r9e](t,r){let n;if(t.origin&&(typeof t.origin=="string"||t.origin instanceof URL))n=String(t.origin);else throw new ED("opts.origin must be a non-empty string or URL.");let i=this[fh].get(n);return i||(i=this[qne](t.origin,this[zq]).on("drain",this[One]).on("connect",this[Pne]).on("disconnect",this[Lne]).on("connectionError",this[Une]),this[fh].set(n,i)),i.dispatch(t,r)}async[e9e](){let t=[];for(let r of this[fh].values())t.push(r.close());this[fh].clear(),await Promise.all(t)}async[t9e](t){let r=[];for(let n of this[fh].values())r.push(n.destroy(t));this[fh].clear(),await Promise.all(r)}};Vne.exports=Jq});var Xq=x((cBt,$ne)=>{"use strict";var{kProxy:d9e,kClose:f9e,kDestroy:h9e,kInterceptors:g9e}=Un(),{URL:hb}=require("url"),p9e=B0(),A9e=S0(),m9e=d0(),{InvalidArgumentError:_D,RequestAbortedError:y9e,SecureProxyConnectionError:C9e}=$r(),Hne=HE(),bD=Symbol("proxy agent"),xD=Symbol("proxy client"),gb=Symbol("proxy headers"),jq=Symbol("request tls settings"),Wne=Symbol("proxy tls settings"),Gne=Symbol("connect endpoint function");function v9e(e){return e==="https:"?443:80}function E9e(e,t){return new A9e(e,t)}var b9e=()=>{},Zq=class extends m9e{constructor(t){if(super(),!t||typeof t=="object"&&!(t instanceof hb)&&!t.uri)throw new _D("Proxy uri is mandatory");let{clientFactory:r=E9e}=t;if(typeof r!="function")throw new _D("Proxy opts.clientFactory must be a function.");let n=this.#e(t),{href:i,origin:s,port:o,protocol:a,username:l,password:c,hostname:u}=n;if(this[d9e]={uri:i,protocol:a},this[g9e]=t.interceptors?.ProxyAgent&&Array.isArray(t.interceptors.ProxyAgent)?t.interceptors.ProxyAgent:[],this[jq]=t.requestTls,this[Wne]=t.proxyTls,this[gb]=t.headers||{},t.auth&&t.token)throw new _D("opts.auth cannot be used in combination with opts.token");t.auth?this[gb]["proxy-authorization"]=`Basic ${t.auth}`:t.token?this[gb]["proxy-authorization"]=t.token:l&&c&&(this[gb]["proxy-authorization"]=`Basic ${Buffer.from(`${decodeURIComponent(l)}:${decodeURIComponent(c)}`).toString("base64")}`);let f=Hne({...t.proxyTls});this[Gne]=Hne({...t.requestTls}),this[xD]=r(n,{connect:f}),this[bD]=new p9e({...t,connect:async(p,g)=>{let A=p.host;p.port||(A+=`:${v9e(p.protocol)}`);try{let{socket:y,statusCode:C}=await this[xD].connect({origin:s,port:o,path:A,signal:p.signal,headers:{...this[gb],host:p.host},servername:this[Wne]?.servername||u});if(C!==200&&(y.on("error",b9e).destroy(),g(new y9e(`Proxy response (${C}) !== 200 when HTTP Tunneling`))),p.protocol!=="https:"){g(null,y);return}let v;this[jq]?v=this[jq].servername:v=p.servername,this[Gne]({...p,servername:v,httpSocket:y},g)}catch(y){y.code==="ERR_TLS_CERT_ALTNAME_INVALID"?g(new C9e(y)):g(y)}}})}dispatch(t,r){let n=x9e(t.headers);if(_9e(n),n&&!("host"in n)&&!("Host"in n)){let{host:i}=new hb(t.origin);n.host=i}return this[bD].dispatch({...t,headers:n},r)}#e(t){return typeof t=="string"?new hb(t):t instanceof hb?t:new hb(t.uri)}async[f9e](){await this[bD].close(),await this[xD].close()}async[h9e](){await this[bD].destroy(),await this[xD].destroy()}};function x9e(e){if(Array.isArray(e)){let t={};for(let r=0;r<e.length;r+=2)t[e[r]]=e[r+1];return t}return e}function _9e(e){if(e&&Object.keys(e).find(r=>r.toLowerCase()==="proxy-authorization"))throw new _D("Proxy-Authorization should be sent in ProxyAgent constructor")}$ne.exports=Zq});var Zne=x((uBt,jne)=>{"use strict";var w9e=d0(),{kClose:I9e,kDestroy:S9e,kClosed:Yne,kDestroyed:Kne,kDispatch:B9e,kNoProxyAgent:pb,kHttpProxyAgent:hh,kHttpsProxyAgent:Bp}=Un(),zne=Xq(),D9e=B0(),T9e={"http:":80,"https:":443},Jne=!1,eV=class extends w9e{#e=null;#t=null;#i=null;constructor(t={}){super(),this.#i=t,Jne||(Jne=!0,process.emitWarning("EnvHttpProxyAgent is experimental, expect them to change at any time.",{code:"UNDICI-EHPA"}));let{httpProxy:r,httpsProxy:n,noProxy:i,...s}=t;this[pb]=new D9e(s);let o=r??process.env.http_proxy??process.env.HTTP_PROXY;o?this[hh]=new zne({...s,uri:o}):this[hh]=this[pb];let a=n??process.env.https_proxy??process.env.HTTPS_PROXY;a?this[Bp]=new zne({...s,uri:a}):this[Bp]=this[hh],this.#l()}[B9e](t,r){let n=new URL(t.origin);return this.#n(n).dispatch(t,r)}async[I9e](){await this[pb].close(),this[hh][Yne]||await this[hh].close(),this[Bp][Yne]||await this[Bp].close()}async[S9e](t){await this[pb].destroy(t),this[hh][Kne]||await this[hh].destroy(t),this[Bp][Kne]||await this[Bp].destroy(t)}#n(t){let{protocol:r,host:n,port:i}=t;return n=n.replace(/:\d*$/,"").toLowerCase(),i=Number.parseInt(i,10)||T9e[r]||0,this.#r(n,i)?r==="https:"?this[Bp]:this[hh]:this[pb]}#r(t,r){if(this.#o&&this.#l(),this.#t.length===0)return!0;if(this.#e==="*")return!1;for(let n=0;n<this.#t.length;n++){let i=this.#t[n];if(!(i.port&&i.port!==r)){if(/^[.*]/.test(i.hostname)){if(t.endsWith(i.hostname.replace(/^\*/,"")))return!1}else if(t===i.hostname)return!1}}return!0}#l(){let t=this.#i.noProxy??this.#u,r=t.split(/[,\s]/),n=[];for(let i=0;i<r.length;i++){let s=r[i];if(!s)continue;let o=s.match(/^(.+):(\d+)$/);n.push({hostname:(o?o[1]:s).toLowerCase(),port:o?Number.parseInt(o[2],10):0})}this.#e=t,this.#t=n}get#o(){return this.#i.noProxy!==void 0?!1:this.#e!==this.#u}get#u(){return process.env.no_proxy??process.env.NO_PROXY??""}};jne.exports=eV});var wD=x((dBt,rie)=>{"use strict";var D0=require("assert"),{kRetryHandlerDefaultRetry:Xne}=Un(),{RequestRetryError:Ab}=$r(),{isDisturbed:eie,parseHeaders:R9e,parseRangeHeader:tie,wrapRequestBody:k9e}=rr();function F9e(e){let t=Date.now();return new Date(e).getTime()-t}var tV=class e{constructor(t,r){let{retryOptions:n,...i}=t,{retry:s,maxRetries:o,maxTimeout:a,minTimeout:l,timeoutFactor:c,methods:u,errorCodes:f,retryAfter:p,statusCodes:g}=n??{};this.dispatch=r.dispatch,this.handler=r.handler,this.opts={...i,body:k9e(t.body)},this.abort=null,this.aborted=!1,this.retryOpts={retry:s??e[Xne],retryAfter:p??!0,maxTimeout:a??30*1e3,minTimeout:l??500,timeoutFactor:c??2,maxRetries:o??5,methods:u??["GET","HEAD","OPTIONS","PUT","DELETE","TRACE"],statusCodes:g??[500,502,503,504,429],errorCodes:f??["ECONNRESET","ECONNREFUSED","ENOTFOUND","ENETDOWN","ENETUNREACH","EHOSTDOWN","EHOSTUNREACH","EPIPE","UND_ERR_SOCKET"]},this.retryCount=0,this.retryCountCheckpoint=0,this.start=0,this.end=null,this.etag=null,this.resume=null,this.handler.onConnect(A=>{this.aborted=!0,this.abort?this.abort(A):this.reason=A})}onRequestSent(){this.handler.onRequestSent&&this.handler.onRequestSent()}onUpgrade(t,r,n){this.handler.onUpgrade&&this.handler.onUpgrade(t,r,n)}onConnect(t){this.aborted?t(this.reason):this.abort=t}onBodySent(t){if(this.handler.onBodySent)return this.handler.onBodySent(t)}static[Xne](t,{state:r,opts:n},i){let{statusCode:s,code:o,headers:a}=t,{method:l,retryOptions:c}=n,{maxRetries:u,minTimeout:f,maxTimeout:p,timeoutFactor:g,statusCodes:A,errorCodes:y,methods:C}=c,{counter:v}=r;if(o&&o!=="UND_ERR_REQ_RETRY"&&!y.includes(o)){i(t);return}if(Array.isArray(C)&&!C.includes(l)){i(t);return}if(s!=null&&Array.isArray(A)&&!A.includes(s)){i(t);return}if(v>u){i(t);return}let b=a?.["retry-after"];b&&(b=Number(b),b=Number.isNaN(b)?F9e(b):b*1e3);let w=b>0?Math.min(b,p):Math.min(f*g**(v-1),p);setTimeout(()=>i(null),w)}onHeaders(t,r,n,i){let s=R9e(r);if(this.retryCount+=1,t>=300)return this.retryOpts.statusCodes.includes(t)===!1?this.handler.onHeaders(t,r,n,i):(this.abort(new Ab("Request failed",t,{headers:s,data:{count:this.retryCount}})),!1);if(this.resume!=null){if(this.resume=null,t!==206&&(this.start>0||t!==200))return this.abort(new Ab("server does not support the range header and the payload was partially consumed",t,{headers:s,data:{count:this.retryCount}})),!1;let a=tie(s["content-range"]);if(!a)return this.abort(new Ab("Content-Range mismatch",t,{headers:s,data:{count:this.retryCount}})),!1;if(this.etag!=null&&this.etag!==s.etag)return this.abort(new Ab("ETag mismatch",t,{headers:s,data:{count:this.retryCount}})),!1;let{start:l,size:c,end:u=c-1}=a;return D0(this.start===l,"content-range mismatch"),D0(this.end==null||this.end===u,"content-range mismatch"),this.resume=n,!0}if(this.end==null){if(t===206){let a=tie(s["content-range"]);if(a==null)return this.handler.onHeaders(t,r,n,i);let{start:l,size:c,end:u=c-1}=a;D0(l!=null&&Number.isFinite(l),"content-range mismatch"),D0(u!=null&&Number.isFinite(u),"invalid content-length"),this.start=l,this.end=u}if(this.end==null){let a=s["content-length"];this.end=a!=null?Number(a)-1:null}return D0(Number.isFinite(this.start)),D0(this.end==null||Number.isFinite(this.end),"invalid content-length"),this.resume=n,this.etag=s.etag!=null?s.etag:null,this.etag!=null&&this.etag.startsWith("W/")&&(this.etag=null),this.handler.onHeaders(t,r,n,i)}let o=new Ab("Request failed",t,{headers:s,data:{count:this.retryCount}});return this.abort(o),!1}onData(t){return this.start+=t.length,this.handler.onData(t)}onComplete(t){return this.retryCount=0,this.handler.onComplete(t)}onError(t){if(this.aborted||eie(this.opts.body))return this.handler.onError(t);this.retryCount-this.retryCountCheckpoint>0?this.retryCount=this.retryCountCheckpoint+(this.retryCount-this.retryCountCheckpoint):this.retryCount+=1,this.retryOpts.retry(t,{state:{counter:this.retryCount},opts:{retryOptions:this.retryOpts,...this.opts}},r.bind(this));function r(n){if(n!=null||this.aborted||eie(this.opts.body))return this.handler.onError(n);if(this.start!==0){let i={range:`bytes=${this.start}-${this.end??""}`};this.etag!=null&&(i["if-match"]=this.etag),this.opts={...this.opts,headers:{...this.opts.headers,...i}}}try{this.retryCountCheckpoint=this.retryCount,this.dispatch(this.opts,this)}catch(i){this.handler.onError(i)}}}};rie.exports=tV});var iie=x((fBt,nie)=>{"use strict";var M9e=qE(),Q9e=wD(),rV=class extends M9e{#e=null;#t=null;constructor(t,r={}){super(r),this.#e=t,this.#t=r}dispatch(t,r){let n=new Q9e({...t,retryOptions:this.#t},{dispatch:this.#e.dispatch.bind(this.#e),handler:r});return this.#e.dispatch(t,n)}close(){return this.#e.close()}destroy(){return this.#e.destroy()}};nie.exports=rV});var lV=x((hBt,hie)=>{"use strict";var cie=require("assert"),{Readable:N9e}=require("stream"),{RequestAbortedError:uie,NotSupportedError:P9e,InvalidArgumentError:L9e,AbortError:nV}=$r(),die=rr(),{ReadableStreamFrom:U9e}=rr(),xa=Symbol("kConsume"),mb=Symbol("kReading"),gh=Symbol("kBody"),sie=Symbol("kAbort"),fie=Symbol("kContentType"),oie=Symbol("kContentLength"),O9e=()=>{},iV=class extends N9e{constructor({resume:t,abort:r,contentType:n="",contentLength:i,highWaterMark:s=64*1024}){super({autoDestroy:!0,read:t,highWaterMark:s}),this._readableState.dataEmitted=!1,this[sie]=r,this[xa]=null,this[gh]=null,this[fie]=n,this[oie]=i,this[mb]=!1}destroy(t){return!t&&!this._readableState.endEmitted&&(t=new uie),t&&this[sie](),super.destroy(t)}_destroy(t,r){this[mb]?r(t):setImmediate(()=>{r(t)})}on(t,...r){return(t==="data"||t==="readable")&&(this[mb]=!0),super.on(t,...r)}addListener(t,...r){return this.on(t,...r)}off(t,...r){let n=super.off(t,...r);return(t==="data"||t==="readable")&&(this[mb]=this.listenerCount("data")>0||this.listenerCount("readable")>0),n}removeListener(t,...r){return this.off(t,...r)}push(t){return this[xa]&&t!==null?(oV(this[xa],t),this[mb]?super.push(t):!0):super.push(t)}async text(){return yb(this,"text")}async json(){return yb(this,"json")}async blob(){return yb(this,"blob")}async bytes(){return yb(this,"bytes")}async arrayBuffer(){return yb(this,"arrayBuffer")}async formData(){throw new P9e}get bodyUsed(){return die.isDisturbed(this)}get body(){return this[gh]||(this[gh]=U9e(this),this[xa]&&(this[gh].getReader(),cie(this[gh].locked))),this[gh]}async dump(t){let r=Number.isFinite(t?.limit)?t.limit:131072,n=t?.signal;if(n!=null&&(typeof n!="object"||!("aborted"in n)))throw new L9e("signal must be an AbortSignal");return n?.throwIfAborted(),this._readableState.closeEmitted?null:await new Promise((i,s)=>{this[oie]>r&&this.destroy(new nV);let o=()=>{this.destroy(n.reason??new nV)};n?.addEventListener("abort",o),this.on("close",function(){n?.removeEventListener("abort",o),n?.aborted?s(n.reason??new nV):i(null)}).on("error",O9e).on("data",function(a){r-=a.length,r<=0&&this.destroy()}).resume()})}};function q9e(e){return e[gh]&&e[gh].locked===!0||e[xa]}function V9e(e){return die.isDisturbed(e)||q9e(e)}async function yb(e,t){return cie(!e[xa]),new Promise((r,n)=>{if(V9e(e)){let i=e._readableState;i.destroyed&&i.closeEmitted===!1?e.on("error",s=>{n(s)}).on("close",()=>{n(new TypeError("unusable"))}):n(i.errored??new TypeError("unusable"))}else queueMicrotask(()=>{e[xa]={type:t,stream:e,resolve:r,reject:n,length:0,body:[]},e.on("error",function(i){aV(this[xa],i)}).on("close",function(){this[xa].body!==null&&aV(this[xa],new uie)}),H9e(e[xa])})})}function H9e(e){if(e.body===null)return;let{_readableState:t}=e.stream;if(t.bufferIndex){let r=t.bufferIndex,n=t.buffer.length;for(let i=r;i<n;i++)oV(e,t.buffer[i])}else for(let r of t.buffer)oV(e,r);for(t.endEmitted?lie(this[xa]):e.stream.on("end",function(){lie(this[xa])}),e.stream.resume();e.stream.read()!=null;);}function sV(e,t){if(e.length===0||t===0)return"";let r=e.length===1?e[0]:Buffer.concat(e,t),n=r.length,i=n>2&&r[0]===239&&r[1]===187&&r[2]===191?3:0;return r.utf8Slice(i,n)}function aie(e,t){if(e.length===0||t===0)return new Uint8Array(0);if(e.length===1)return new Uint8Array(e[0]);let r=new Uint8Array(Buffer.allocUnsafeSlow(t).buffer),n=0;for(let i=0;i<e.length;++i){let s=e[i];r.set(s,n),n+=s.length}return r}function lie(e){let{type:t,body:r,resolve:n,stream:i,length:s}=e;try{t==="text"?n(sV(r,s)):t==="json"?n(JSON.parse(sV(r,s))):t==="arrayBuffer"?n(aie(r,s).buffer):t==="blob"?n(new Blob(r,{type:i[fie]})):t==="bytes"&&n(aie(r,s)),aV(e)}catch(o){i.destroy(o)}}function oV(e,t){e.length+=t.length,e.body.push(t)}function aV(e,t){e.body!==null&&(t?e.reject(t):e.resolve(),e.type=null,e.stream=null,e.resolve=null,e.reject=null,e.length=0,e.body=null)}hie.exports={Readable:iV,chunksDecode:sV}});var cV=x((gBt,yie)=>{"use strict";var W9e=require("assert"),{ResponseStatusCodeError:gie}=$r(),{chunksDecode:pie}=lV(),G9e=128*1024;async function $9e({callback:e,body:t,contentType:r,statusCode:n,statusMessage:i,headers:s}){W9e(t);let o=[],a=0;try{for await(let f of t)if(o.push(f),a+=f.length,a>G9e){o=[],a=0;break}}catch{o=[],a=0}let l=`Response status code ${n}${i?`: ${i}`:""}`;if(n===204||!r||!a){queueMicrotask(()=>e(new gie(l,n,s)));return}let c=Error.stackTraceLimit;Error.stackTraceLimit=0;let u;try{Aie(r)?u=JSON.parse(pie(o,a)):mie(r)&&(u=pie(o,a))}catch{}finally{Error.stackTraceLimit=c}queueMicrotask(()=>e(new gie(l,n,s,u)))}var Aie=e=>e.length>15&&e[11]==="/"&&e[0]==="a"&&e[1]==="p"&&e[2]==="p"&&e[3]==="l"&&e[4]==="i"&&e[5]==="c"&&e[6]==="a"&&e[7]==="t"&&e[8]==="i"&&e[9]==="o"&&e[10]==="n"&&e[12]==="j"&&e[13]==="s"&&e[14]==="o"&&e[15]==="n",mie=e=>e.length>4&&e[4]==="/"&&e[0]==="t"&&e[1]==="e"&&e[2]==="x"&&e[3]==="t";yie.exports={getResolveErrorBodyCallback:$9e,isContentTypeApplicationJson:Aie,isContentTypeText:mie}});var Eie=x((pBt,uV)=>{"use strict";var Y9e=require("assert"),{Readable:K9e}=lV(),{InvalidArgumentError:T0,RequestAbortedError:Cie}=$r(),_a=rr(),{getResolveErrorBodyCallback:z9e}=cV(),{AsyncResource:J9e}=require("async_hooks"),ID=class extends J9e{constructor(t,r){if(!t||typeof t!="object")throw new T0("invalid opts");let{signal:n,method:i,opaque:s,body:o,onInfo:a,responseHeaders:l,throwOnError:c,highWaterMark:u}=t;try{if(typeof r!="function")throw new T0("invalid callback");if(u&&(typeof u!="number"||u<0))throw new T0("invalid highWaterMark");if(n&&typeof n.on!="function"&&typeof n.addEventListener!="function")throw new T0("signal must be an EventEmitter or EventTarget");if(i==="CONNECT")throw new T0("invalid method");if(a&&typeof a!="function")throw new T0("invalid onInfo callback");super("UNDICI_REQUEST")}catch(f){throw _a.isStream(o)&&_a.destroy(o.on("error",_a.nop),f),f}this.method=i,this.responseHeaders=l||null,this.opaque=s||null,this.callback=r,this.res=null,this.abort=null,this.body=o,this.trailers={},this.context=null,this.onInfo=a||null,this.throwOnError=c,this.highWaterMark=u,this.signal=n,this.reason=null,this.removeAbortListener=null,_a.isStream(o)&&o.on("error",f=>{this.onError(f)}),this.signal&&(this.signal.aborted?this.reason=this.signal.reason??new Cie:this.removeAbortListener=_a.addAbortListener(this.signal,()=>{this.reason=this.signal.reason??new Cie,this.res?_a.destroy(this.res.on("error",_a.nop),this.reason):this.abort&&this.abort(this.reason),this.removeAbortListener&&(this.res?.off("close",this.removeAbortListener),this.removeAbortListener(),this.removeAbortListener=null)}))}onConnect(t,r){if(this.reason){t(this.reason);return}Y9e(this.callback),this.abort=t,this.context=r}onHeaders(t,r,n,i){let{callback:s,opaque:o,abort:a,context:l,responseHeaders:c,highWaterMark:u}=this,f=c==="raw"?_a.parseRawHeaders(r):_a.parseHeaders(r);if(t<200){this.onInfo&&this.onInfo({statusCode:t,headers:f});return}let p=c==="raw"?_a.parseHeaders(r):f,g=p["content-type"],A=p["content-length"],y=new K9e({resume:n,abort:a,contentType:g,contentLength:this.method!=="HEAD"&&A?Number(A):null,highWaterMark:u});this.removeAbortListener&&y.on("close",this.removeAbortListener),this.callback=null,this.res=y,s!==null&&(this.throwOnError&&t>=400?this.runInAsyncScope(z9e,null,{callback:s,body:y,contentType:g,statusCode:t,statusMessage:i,headers:f}):this.runInAsyncScope(s,null,null,{statusCode:t,headers:f,trailers:this.trailers,opaque:o,body:y,context:l}))}onData(t){return this.res.push(t)}onComplete(t){_a.parseHeaders(t,this.trailers),this.res.push(null)}onError(t){let{res:r,callback:n,body:i,opaque:s}=this;n&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(n,null,t,{opaque:s})})),r&&(this.res=null,queueMicrotask(()=>{_a.destroy(r,t)})),i&&(this.body=null,_a.destroy(i,t)),this.removeAbortListener&&(r?.off("close",this.removeAbortListener),this.removeAbortListener(),this.removeAbortListener=null)}};function vie(e,t){if(t===void 0)return new Promise((r,n)=>{vie.call(this,e,(i,s)=>i?n(i):r(s))});try{this.dispatch(e,new ID(e,t))}catch(r){if(typeof t!="function")throw r;let n=e?.opaque;queueMicrotask(()=>t(r,{opaque:n}))}}uV.exports=vie;uV.exports.RequestHandler=ID});var Cb=x((ABt,_ie)=>{"use strict";var{addAbortListener:j9e}=rr(),{RequestAbortedError:Z9e}=$r(),R0=Symbol("kListener"),hu=Symbol("kSignal");function bie(e){e.abort?e.abort(e[hu]?.reason):e.reason=e[hu]?.reason??new Z9e,xie(e)}function X9e(e,t){if(e.reason=null,e[hu]=null,e[R0]=null,!!t){if(t.aborted){bie(e);return}e[hu]=t,e[R0]=()=>{bie(e)},j9e(e[hu],e[R0])}}function xie(e){e[hu]&&("removeEventListener"in e[hu]?e[hu].removeEventListener("abort",e[R0]):e[hu].removeListener("abort",e[R0]),e[hu]=null,e[R0]=null)}_ie.exports={addSignal:X9e,removeSignal:xie}});var Bie=x((mBt,Sie)=>{"use strict";var e$e=require("assert"),{finished:t$e,PassThrough:r$e}=require("stream"),{InvalidArgumentError:k0,InvalidReturnValueError:n$e}=$r(),mc=rr(),{getResolveErrorBodyCallback:i$e}=cV(),{AsyncResource:s$e}=require("async_hooks"),{addSignal:o$e,removeSignal:wie}=Cb(),dV=class extends s$e{constructor(t,r,n){if(!t||typeof t!="object")throw new k0("invalid opts");let{signal:i,method:s,opaque:o,body:a,onInfo:l,responseHeaders:c,throwOnError:u}=t;try{if(typeof n!="function")throw new k0("invalid callback");if(typeof r!="function")throw new k0("invalid factory");if(i&&typeof i.on!="function"&&typeof i.addEventListener!="function")throw new k0("signal must be an EventEmitter or EventTarget");if(s==="CONNECT")throw new k0("invalid method");if(l&&typeof l!="function")throw new k0("invalid onInfo callback");super("UNDICI_STREAM")}catch(f){throw mc.isStream(a)&&mc.destroy(a.on("error",mc.nop),f),f}this.responseHeaders=c||null,this.opaque=o||null,this.factory=r,this.callback=n,this.res=null,this.abort=null,this.context=null,this.trailers=null,this.body=a,this.onInfo=l||null,this.throwOnError=u||!1,mc.isStream(a)&&a.on("error",f=>{this.onError(f)}),o$e(this,i)}onConnect(t,r){if(this.reason){t(this.reason);return}e$e(this.callback),this.abort=t,this.context=r}onHeaders(t,r,n,i){let{factory:s,opaque:o,context:a,callback:l,responseHeaders:c}=this,u=c==="raw"?mc.parseRawHeaders(r):mc.parseHeaders(r);if(t<200){this.onInfo&&this.onInfo({statusCode:t,headers:u});return}this.factory=null;let f;if(this.throwOnError&&t>=400){let A=(c==="raw"?mc.parseHeaders(r):u)["content-type"];f=new r$e,this.callback=null,this.runInAsyncScope(i$e,null,{callback:l,body:f,contentType:A,statusCode:t,statusMessage:i,headers:u})}else{if(s===null)return;if(f=this.runInAsyncScope(s,null,{statusCode:t,headers:u,opaque:o,context:a}),!f||typeof f.write!="function"||typeof f.end!="function"||typeof f.on!="function")throw new n$e("expected Writable");t$e(f,{readable:!1},g=>{let{callback:A,res:y,opaque:C,trailers:v,abort:b}=this;this.res=null,(g||!y.readable)&&mc.destroy(y,g),this.callback=null,this.runInAsyncScope(A,null,g||null,{opaque:C,trailers:v}),g&&b()})}return f.on("drain",n),this.res=f,(f.writableNeedDrain!==void 0?f.writableNeedDrain:f._writableState?.needDrain)!==!0}onData(t){let{res:r}=this;return r?r.write(t):!0}onComplete(t){let{res:r}=this;wie(this),r&&(this.trailers=mc.parseHeaders(t),r.end())}onError(t){let{res:r,callback:n,opaque:i,body:s}=this;wie(this),this.factory=null,r?(this.res=null,mc.destroy(r,t)):n&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(n,null,t,{opaque:i})})),s&&(this.body=null,mc.destroy(s,t))}};function Iie(e,t,r){if(r===void 0)return new Promise((n,i)=>{Iie.call(this,e,t,(s,o)=>s?i(s):n(o))});try{this.dispatch(e,new dV(e,t,r))}catch(n){if(typeof r!="function")throw n;let i=e?.opaque;queueMicrotask(()=>r(n,{opaque:i}))}}Sie.exports=Iie});var kie=x((yBt,Rie)=>{"use strict";var{Readable:Tie,Duplex:a$e,PassThrough:l$e}=require("stream"),{InvalidArgumentError:vb,InvalidReturnValueError:c$e,RequestAbortedError:fV}=$r(),ml=rr(),{AsyncResource:u$e}=require("async_hooks"),{addSignal:d$e,removeSignal:f$e}=Cb(),Die=require("assert"),F0=Symbol("resume"),hV=class extends Tie{constructor(){super({autoDestroy:!0}),this[F0]=null}_read(){let{[F0]:t}=this;t&&(this[F0]=null,t())}_destroy(t,r){this._read(),r(t)}},gV=class extends Tie{constructor(t){super({autoDestroy:!0}),this[F0]=t}_read(){this[F0]()}_destroy(t,r){!t&&!this._readableState.endEmitted&&(t=new fV),r(t)}},pV=class extends u$e{constructor(t,r){if(!t||typeof t!="object")throw new vb("invalid opts");if(typeof r!="function")throw new vb("invalid handler");let{signal:n,method:i,opaque:s,onInfo:o,responseHeaders:a}=t;if(n&&typeof n.on!="function"&&typeof n.addEventListener!="function")throw new vb("signal must be an EventEmitter or EventTarget");if(i==="CONNECT")throw new vb("invalid method");if(o&&typeof o!="function")throw new vb("invalid onInfo callback");super("UNDICI_PIPELINE"),this.opaque=s||null,this.responseHeaders=a||null,this.handler=r,this.abort=null,this.context=null,this.onInfo=o||null,this.req=new hV().on("error",ml.nop),this.ret=new a$e({readableObjectMode:t.objectMode,autoDestroy:!0,read:()=>{let{body:l}=this;l?.resume&&l.resume()},write:(l,c,u)=>{let{req:f}=this;f.push(l,c)||f._readableState.destroyed?u():f[F0]=u},destroy:(l,c)=>{let{body:u,req:f,res:p,ret:g,abort:A}=this;!l&&!g._readableState.endEmitted&&(l=new fV),A&&l&&A(),ml.destroy(u,l),ml.destroy(f,l),ml.destroy(p,l),f$e(this),c(l)}}).on("prefinish",()=>{let{req:l}=this;l.push(null)}),this.res=null,d$e(this,n)}onConnect(t,r){let{ret:n,res:i}=this;if(this.reason){t(this.reason);return}Die(!i,"pipeline cannot be retried"),Die(!n.destroyed),this.abort=t,this.context=r}onHeaders(t,r,n){let{opaque:i,handler:s,context:o}=this;if(t<200){if(this.onInfo){let l=this.responseHeaders==="raw"?ml.parseRawHeaders(r):ml.parseHeaders(r);this.onInfo({statusCode:t,headers:l})}return}this.res=new gV(n);let a;try{this.handler=null;let l=this.responseHeaders==="raw"?ml.parseRawHeaders(r):ml.parseHeaders(r);a=this.runInAsyncScope(s,null,{statusCode:t,headers:l,opaque:i,body:this.res,context:o})}catch(l){throw this.res.on("error",ml.nop),l}if(!a||typeof a.on!="function")throw new c$e("expected Readable");a.on("data",l=>{let{ret:c,body:u}=this;!c.push(l)&&u.pause&&u.pause()}).on("error",l=>{let{ret:c}=this;ml.destroy(c,l)}).on("end",()=>{let{ret:l}=this;l.push(null)}).on("close",()=>{let{ret:l}=this;l._readableState.ended||ml.destroy(l,new fV)}),this.body=a}onData(t){let{res:r}=this;return r.push(t)}onComplete(t){let{res:r}=this;r.push(null)}onError(t){let{ret:r}=this;this.handler=null,ml.destroy(r,t)}};function h$e(e,t){try{let r=new pV(e,t);return this.dispatch({...e,body:r.req},r),r.ret}catch(r){return new l$e().destroy(r)}}Rie.exports=h$e});var Lie=x((CBt,Pie)=>{"use strict";var{InvalidArgumentError:AV,SocketError:g$e}=$r(),{AsyncResource:p$e}=require("async_hooks"),Fie=rr(),{addSignal:A$e,removeSignal:Mie}=Cb(),Qie=require("assert"),mV=class extends p$e{constructor(t,r){if(!t||typeof t!="object")throw new AV("invalid opts");if(typeof r!="function")throw new AV("invalid callback");let{signal:n,opaque:i,responseHeaders:s}=t;if(n&&typeof n.on!="function"&&typeof n.addEventListener!="function")throw new AV("signal must be an EventEmitter or EventTarget");super("UNDICI_UPGRADE"),this.responseHeaders=s||null,this.opaque=i||null,this.callback=r,this.abort=null,this.context=null,A$e(this,n)}onConnect(t,r){if(this.reason){t(this.reason);return}Qie(this.callback),this.abort=t,this.context=null}onHeaders(){throw new g$e("bad upgrade",null)}onUpgrade(t,r,n){Qie(t===101);let{callback:i,opaque:s,context:o}=this;Mie(this),this.callback=null;let a=this.responseHeaders==="raw"?Fie.parseRawHeaders(r):Fie.parseHeaders(r);this.runInAsyncScope(i,null,null,{headers:a,socket:n,opaque:s,context:o})}onError(t){let{callback:r,opaque:n}=this;Mie(this),r&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(r,null,t,{opaque:n})}))}};function Nie(e,t){if(t===void 0)return new Promise((r,n)=>{Nie.call(this,e,(i,s)=>i?n(i):r(s))});try{let r=new mV(e,t);this.dispatch({...e,method:e.method||"GET",upgrade:e.protocol||"Websocket"},r)}catch(r){if(typeof t!="function")throw r;let n=e?.opaque;queueMicrotask(()=>t(r,{opaque:n}))}}Pie.exports=Nie});var Hie=x((vBt,Vie)=>{"use strict";var m$e=require("assert"),{AsyncResource:y$e}=require("async_hooks"),{InvalidArgumentError:yV,SocketError:C$e}=$r(),Uie=rr(),{addSignal:v$e,removeSignal:Oie}=Cb(),CV=class extends y$e{constructor(t,r){if(!t||typeof t!="object")throw new yV("invalid opts");if(typeof r!="function")throw new yV("invalid callback");let{signal:n,opaque:i,responseHeaders:s}=t;if(n&&typeof n.on!="function"&&typeof n.addEventListener!="function")throw new yV("signal must be an EventEmitter or EventTarget");super("UNDICI_CONNECT"),this.opaque=i||null,this.responseHeaders=s||null,this.callback=r,this.abort=null,v$e(this,n)}onConnect(t,r){if(this.reason){t(this.reason);return}m$e(this.callback),this.abort=t,this.context=r}onHeaders(){throw new C$e("bad connect",null)}onUpgrade(t,r,n){let{callback:i,opaque:s,context:o}=this;Oie(this),this.callback=null;let a=r;a!=null&&(a=this.responseHeaders==="raw"?Uie.parseRawHeaders(r):Uie.parseHeaders(r)),this.runInAsyncScope(i,null,null,{statusCode:t,headers:a,socket:n,opaque:s,context:o})}onError(t){let{callback:r,opaque:n}=this;Oie(this),r&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(r,null,t,{opaque:n})}))}};function qie(e,t){if(t===void 0)return new Promise((r,n)=>{qie.call(this,e,(i,s)=>i?n(i):r(s))});try{let r=new CV(e,t);this.dispatch({...e,method:"CONNECT"},r)}catch(r){if(typeof t!="function")throw r;let n=e?.opaque;queueMicrotask(()=>t(r,{opaque:n}))}}Vie.exports=qie});var Wie=x((EBt,M0)=>{"use strict";M0.exports.request=Eie();M0.exports.stream=Bie();M0.exports.pipeline=kie();M0.exports.upgrade=Lie();M0.exports.connect=Hie()});var EV=x((bBt,Gie)=>{"use strict";var{UndiciError:E$e}=$r(),vV=class e extends E$e{constructor(t){super(t),Error.captureStackTrace(this,e),this.name="MockNotMatchedError",this.message=t||"The request does not match any registered mock dispatches",this.code="UND_MOCK_ERR_MOCK_NOT_MATCHED"}};Gie.exports={MockNotMatchedError:vV}});var Q0=x((xBt,$ie)=>{"use strict";$ie.exports={kAgent:Symbol("agent"),kOptions:Symbol("options"),kFactory:Symbol("factory"),kDispatches:Symbol("dispatches"),kDispatchKey:Symbol("dispatch key"),kDefaultHeaders:Symbol("default headers"),kDefaultTrailers:Symbol("default trailers"),kContentLength:Symbol("content length"),kMockAgent:Symbol("mock agent"),kMockAgentSet:Symbol("mock agent set"),kMockAgentGet:Symbol("mock agent get"),kMockDispatch:Symbol("mock dispatch"),kClose:Symbol("close"),kOriginalClose:Symbol("original agent close"),kOrigin:Symbol("origin"),kIsMockActive:Symbol("is mock active"),kNetConnect:Symbol("net connect"),kGetNetConnect:Symbol("get net connect"),kConnected:Symbol("connected")}});var Eb=x((_Bt,nse)=>{"use strict";var{MockNotMatchedError:Dp}=EV(),{kDispatches:SD,kMockAgent:b$e,kOriginalDispatch:x$e,kOrigin:_$e,kGetNetConnect:w$e}=Q0(),{buildURL:I$e}=rr(),{STATUS_CODES:S$e}=require("http"),{types:{isPromise:B$e}}=require("util");function Od(e,t){return typeof e=="string"?e===t:e instanceof RegExp?e.test(t):typeof e=="function"?e(t)===!0:!1}function Kie(e){return Object.fromEntries(Object.entries(e).map(([t,r])=>[t.toLocaleLowerCase(),r]))}function zie(e,t){if(Array.isArray(e)){for(let r=0;r<e.length;r+=2)if(e[r].toLocaleLowerCase()===t.toLocaleLowerCase())return e[r+1];return}else return typeof e.get=="function"?e.get(t):Kie(e)[t.toLocaleLowerCase()]}function _V(e){let t=e.slice(),r=[];for(let n=0;n<t.length;n+=2)r.push([t[n],t[n+1]]);return Object.fromEntries(r)}function Jie(e,t){if(typeof e.headers=="function")return Array.isArray(t)&&(t=_V(t)),e.headers(t?Kie(t):{});if(typeof e.headers>"u")return!0;if(typeof t!="object"||typeof e.headers!="object")return!1;for(let[r,n]of Object.entries(e.headers)){let i=zie(t,r);if(!Od(n,i))return!1}return!0}function Yie(e){if(typeof e!="string")return e;let t=e.split("?");if(t.length!==2)return e;let r=new URLSearchParams(t.pop());return r.sort(),[...t,r.toString()].join("?")}function D$e(e,{path:t,method:r,body:n,headers:i}){let s=Od(e.path,t),o=Od(e.method,r),a=typeof e.body<"u"?Od(e.body,n):!0,l=Jie(e,i);return s&&o&&a&&l}function jie(e){return Buffer.isBuffer(e)||e instanceof Uint8Array||e instanceof ArrayBuffer?e:typeof e=="object"?JSON.stringify(e):e.toString()}function Zie(e,t){let r=t.query?I$e(t.path,t.query):t.path,n=typeof r=="string"?Yie(r):r,i=e.filter(({consumed:s})=>!s).filter(({path:s})=>Od(Yie(s),n));if(i.length===0)throw new Dp(`Mock dispatch not matched for path '${n}'`);if(i=i.filter(({method:s})=>Od(s,t.method)),i.length===0)throw new Dp(`Mock dispatch not matched for method '${t.method}' on path '${n}'`);if(i=i.filter(({body:s})=>typeof s<"u"?Od(s,t.body):!0),i.length===0)throw new Dp(`Mock dispatch not matched for body '${t.body}' on path '${n}'`);if(i=i.filter(s=>Jie(s,t.headers)),i.length===0){let s=typeof t.headers=="object"?JSON.stringify(t.headers):t.headers;throw new Dp(`Mock dispatch not matched for headers '${s}' on path '${n}'`)}return i[0]}function T$e(e,t,r){let n={timesInvoked:0,times:1,persist:!1,consumed:!1},i=typeof r=="function"?{callback:r}:{...r},s={...n,...t,pending:!0,data:{error:null,...i}};return e.push(s),s}function bV(e,t){let r=e.findIndex(n=>n.consumed?D$e(n,t):!1);r!==-1&&e.splice(r,1)}function Xie(e){let{path:t,method:r,body:n,headers:i,query:s}=e;return{path:t,method:r,body:n,headers:i,query:s}}function xV(e){let t=Object.keys(e),r=[];for(let n=0;n<t.length;++n){let i=t[n],s=e[i],o=Buffer.from(`${i}`);if(Array.isArray(s))for(let a=0;a<s.length;++a)r.push(o,Buffer.from(`${s[a]}`));else r.push(o,Buffer.from(`${s}`))}return r}function ese(e){return S$e[e]||"unknown"}async function R$e(e){let t=[];for await(let r of e)t.push(r);return Buffer.concat(t).toString("utf8")}function tse(e,t){let r=Xie(e),n=Zie(this[SD],r);n.timesInvoked++,n.data.callback&&(n.data={...n.data,...n.data.callback(e)});let{data:{statusCode:i,data:s,headers:o,trailers:a,error:l},delay:c,persist:u}=n,{timesInvoked:f,times:p}=n;if(n.consumed=!u&&f>=p,n.pending=f<p,l!==null)return bV(this[SD],r),t.onError(l),!0;typeof c=="number"&&c>0?setTimeout(()=>{g(this[SD])},c):g(this[SD]);function g(y,C=s){let v=Array.isArray(e.headers)?_V(e.headers):e.headers,b=typeof C=="function"?C({...e,headers:v}):C;if(B$e(b)){b.then(Q=>g(y,Q));return}let w=jie(b),B=xV(o),F=xV(a);t.onConnect?.(Q=>t.onError(Q),null),t.onHeaders?.(i,B,A,ese(i)),t.onData?.(Buffer.from(w)),t.onComplete?.(F),bV(y,r)}function A(){}return!0}function k$e(){let e=this[b$e],t=this[_$e],r=this[x$e];return function(i,s){if(e.isMockActive)try{tse.call(this,i,s)}catch(o){if(o instanceof Dp){let a=e[w$e]();if(a===!1)throw new Dp(`${o.message}: subsequent request to origin ${t} was not allowed (net.connect disabled)`);if(rse(a,t))r.call(this,i,s);else throw new Dp(`${o.message}: subsequent request to origin ${t} was not allowed (net.connect is not enabled for this origin)`)}else throw o}else r.call(this,i,s)}}function rse(e,t){let r=new URL(t);return e===!0?!0:!!(Array.isArray(e)&&e.some(n=>Od(n,r.host)))}function F$e(e){if(e){let{agent:t,...r}=e;return r}}nse.exports={getResponseData:jie,getMockDispatch:Zie,addMockDispatch:T$e,deleteMockDispatch:bV,buildKey:Xie,generateKeyValues:xV,matchValue:Od,getResponse:R$e,getStatusText:ese,mockDispatch:tse,buildMockDispatch:k$e,checkNetConnect:rse,buildMockOptions:F$e,getHeaderByName:zie,buildHeadersFromArray:_V}});var RV=x((wBt,TV)=>{"use strict";var{getResponseData:M$e,buildKey:Q$e,addMockDispatch:wV}=Eb(),{kDispatches:BD,kDispatchKey:DD,kDefaultHeaders:IV,kDefaultTrailers:SV,kContentLength:BV,kMockDispatch:TD}=Q0(),{InvalidArgumentError:gu}=$r(),{buildURL:N$e}=rr(),N0=class{constructor(t){this[TD]=t}delay(t){if(typeof t!="number"||!Number.isInteger(t)||t<=0)throw new gu("waitInMs must be a valid integer > 0");return this[TD].delay=t,this}persist(){return this[TD].persist=!0,this}times(t){if(typeof t!="number"||!Number.isInteger(t)||t<=0)throw new gu("repeatTimes must be a valid integer > 0");return this[TD].times=t,this}},DV=class{constructor(t,r){if(typeof t!="object")throw new gu("opts must be an object");if(typeof t.path>"u")throw new gu("opts.path must be defined");if(typeof t.method>"u"&&(t.method="GET"),typeof t.path=="string")if(t.query)t.path=N$e(t.path,t.query);else{let n=new URL(t.path,"data://");t.path=n.pathname+n.search}typeof t.method=="string"&&(t.method=t.method.toUpperCase()),this[DD]=Q$e(t),this[BD]=r,this[IV]={},this[SV]={},this[BV]=!1}createMockScopeDispatchData({statusCode:t,data:r,responseOptions:n}){let i=M$e(r),s=this[BV]?{"content-length":i.length}:{},o={...this[IV],...s,...n.headers},a={...this[SV],...n.trailers};return{statusCode:t,data:r,headers:o,trailers:a}}validateReplyParameters(t){if(typeof t.statusCode>"u")throw new gu("statusCode must be defined");if(typeof t.responseOptions!="object"||t.responseOptions===null)throw new gu("responseOptions must be an object")}reply(t){if(typeof t=="function"){let s=a=>{let l=t(a);if(typeof l!="object"||l===null)throw new gu("reply options callback must return an object");let c={data:"",responseOptions:{},...l};return this.validateReplyParameters(c),{...this.createMockScopeDispatchData(c)}},o=wV(this[BD],this[DD],s);return new N0(o)}let r={statusCode:t,data:arguments[1]===void 0?"":arguments[1],responseOptions:arguments[2]===void 0?{}:arguments[2]};this.validateReplyParameters(r);let n=this.createMockScopeDispatchData(r),i=wV(this[BD],this[DD],n);return new N0(i)}replyWithError(t){if(typeof t>"u")throw new gu("error must be defined");let r=wV(this[BD],this[DD],{error:t});return new N0(r)}defaultReplyHeaders(t){if(typeof t>"u")throw new gu("headers must be defined");return this[IV]=t,this}defaultReplyTrailers(t){if(typeof t>"u")throw new gu("trailers must be defined");return this[SV]=t,this}replyContentLength(){return this[BV]=!0,this}};TV.exports.MockInterceptor=DV;TV.exports.MockScope=N0});var MV=x((IBt,use)=>{"use strict";var{promisify:P$e}=require("util"),L$e=cb(),{buildMockDispatch:U$e}=Eb(),{kDispatches:ise,kMockAgent:sse,kClose:ose,kOriginalClose:ase,kOrigin:lse,kOriginalDispatch:O$e,kConnected:kV}=Q0(),{MockInterceptor:q$e}=RV(),cse=Un(),{InvalidArgumentError:V$e}=$r(),FV=class extends L$e{constructor(t,r){if(super(t,r),!r||!r.agent||typeof r.agent.dispatch!="function")throw new V$e("Argument opts.agent must implement Agent");this[sse]=r.agent,this[lse]=t,this[ise]=[],this[kV]=1,this[O$e]=this.dispatch,this[ase]=this.close.bind(this),this.dispatch=U$e.call(this),this.close=this[ose]}get[cse.kConnected](){return this[kV]}intercept(t){return new q$e(t,this[ise])}async[ose](){await P$e(this[ase])(),this[kV]=0,this[sse][cse.kClients].delete(this[lse])}};use.exports=FV});var PV=x((SBt,mse)=>{"use strict";var{promisify:H$e}=require("util"),W$e=S0(),{buildMockDispatch:G$e}=Eb(),{kDispatches:dse,kMockAgent:fse,kClose:hse,kOriginalClose:gse,kOrigin:pse,kOriginalDispatch:$$e,kConnected:QV}=Q0(),{MockInterceptor:Y$e}=RV(),Ase=Un(),{InvalidArgumentError:K$e}=$r(),NV=class extends W$e{constructor(t,r){if(super(t,r),!r||!r.agent||typeof r.agent.dispatch!="function")throw new K$e("Argument opts.agent must implement Agent");this[fse]=r.agent,this[pse]=t,this[dse]=[],this[QV]=1,this[$$e]=this.dispatch,this[gse]=this.close.bind(this),this.dispatch=G$e.call(this),this.close=this[hse]}get[Ase.kConnected](){return this[QV]}intercept(t){return new Y$e(t,this[dse])}async[hse](){await H$e(this[gse])(),this[QV]=0,this[fse][Ase.kClients].delete(this[pse])}};mse.exports=NV});var Cse=x((DBt,yse)=>{"use strict";var z$e={pronoun:"it",is:"is",was:"was",this:"this"},J$e={pronoun:"they",is:"are",was:"were",this:"these"};yse.exports=class{constructor(t,r){this.singular=t,this.plural=r}pluralize(t){let r=t===1,n=r?z$e:J$e,i=r?this.singular:this.plural;return{...n,count:t,noun:i}}}});var Ese=x((RBt,vse)=>{"use strict";var{Transform:j$e}=require("stream"),{Console:Z$e}=require("console"),X$e=process.versions.icu?"\u2705":"Y ",eYe=process.versions.icu?"\u274C":"N ";vse.exports=class{constructor({disableColors:t}={}){this.transform=new j$e({transform(r,n,i){i(null,r)}}),this.logger=new Z$e({stdout:this.transform,inspectOptions:{colors:!t&&!process.env.CI}})}format(t){let r=t.map(({method:n,path:i,data:{statusCode:s},persist:o,times:a,timesInvoked:l,origin:c})=>({Method:n,Origin:c,Path:i,"Status code":s,Persistent:o?X$e:eYe,Invocations:l,Remaining:o?1/0:a-l}));return this.logger.table(r),this.transform.read().toString()}}});var wse=x((kBt,_se)=>{"use strict";var{kClients:Tp}=Un(),tYe=B0(),{kAgent:LV,kMockAgentSet:RD,kMockAgentGet:bse,kDispatches:UV,kIsMockActive:kD,kNetConnect:Rp,kGetNetConnect:rYe,kOptions:FD,kFactory:MD}=Q0(),nYe=MV(),iYe=PV(),{matchValue:sYe,buildMockOptions:oYe}=Eb(),{InvalidArgumentError:xse,UndiciError:aYe}=$r(),lYe=qE(),cYe=Cse(),uYe=Ese(),OV=class extends lYe{constructor(t){if(super(t),this[Rp]=!0,this[kD]=!0,t?.agent&&typeof t.agent.dispatch!="function")throw new xse("Argument opts.agent must implement Agent");let r=t?.agent?t.agent:new tYe(t);this[LV]=r,this[Tp]=r[Tp],this[FD]=oYe(t)}get(t){let r=this[bse](t);return r||(r=this[MD](t),this[RD](t,r)),r}dispatch(t,r){return this.get(t.origin),this[LV].dispatch(t,r)}async close(){await this[LV].close(),this[Tp].clear()}deactivate(){this[kD]=!1}activate(){this[kD]=!0}enableNetConnect(t){if(typeof t=="string"||typeof t=="function"||t instanceof RegExp)Array.isArray(this[Rp])?this[Rp].push(t):this[Rp]=[t];else if(typeof t>"u")this[Rp]=!0;else throw new xse("Unsupported matcher. Must be one of String|Function|RegExp.")}disableNetConnect(){this[Rp]=!1}get isMockActive(){return this[kD]}[RD](t,r){this[Tp].set(t,r)}[MD](t){let r=Object.assign({agent:this},this[FD]);return this[FD]&&this[FD].connections===1?new nYe(t,r):new iYe(t,r)}[bse](t){let r=this[Tp].get(t);if(r)return r;if(typeof t!="string"){let n=this[MD]("http://localhost:9999");return this[RD](t,n),n}for(let[n,i]of Array.from(this[Tp]))if(i&&typeof n!="string"&&sYe(n,t)){let s=this[MD](t);return this[RD](t,s),s[UV]=i[UV],s}}[rYe](){return this[Rp]}pendingInterceptors(){let t=this[Tp];return Array.from(t.entries()).flatMap(([r,n])=>n[UV].map(i=>({...i,origin:r}))).filter(({pending:r})=>r)}assertNoPendingInterceptors({pendingInterceptorsFormatter:t=new uYe}={}){let r=this.pendingInterceptors();if(r.length===0)return;let n=new cYe("interceptor","interceptors").pluralize(r.length);throw new aYe(`
${n.count} ${n.noun} ${n.is} pending:

${t.format(r)}
`.trim())}};_se.exports=OV});var QD=x((FBt,Dse)=>{"use strict";var Ise=Symbol.for("undici.globalDispatcher.1"),{InvalidArgumentError:dYe}=$r(),fYe=B0();Bse()===void 0&&Sse(new fYe);function Sse(e){if(!e||typeof e.dispatch!="function")throw new dYe("Argument agent must implement Agent");Object.defineProperty(globalThis,Ise,{value:e,writable:!0,enumerable:!1,configurable:!1})}function Bse(){return globalThis[Ise]}Dse.exports={setGlobalDispatcher:Sse,getGlobalDispatcher:Bse}});var ND=x((QBt,Tse)=>{"use strict";Tse.exports=class{#e;constructor(t){if(typeof t!="object"||t===null)throw new TypeError("handler must be an object");this.#e=t}onConnect(...t){return this.#e.onConnect?.(...t)}onError(...t){return this.#e.onError?.(...t)}onUpgrade(...t){return this.#e.onUpgrade?.(...t)}onResponseStarted(...t){return this.#e.onResponseStarted?.(...t)}onHeaders(...t){return this.#e.onHeaders?.(...t)}onData(...t){return this.#e.onData?.(...t)}onComplete(...t){return this.#e.onComplete?.(...t)}onBodySent(...t){return this.#e.onBodySent?.(...t)}}});var kse=x((NBt,Rse)=>{"use strict";var hYe=gD();Rse.exports=e=>{let t=e?.maxRedirections;return r=>function(i,s){let{maxRedirections:o=t,...a}=i;if(!o)return r(i,s);let l=new hYe(r,o,i,s);return r(a,l)}}});var Mse=x((PBt,Fse)=>{"use strict";var gYe=wD();Fse.exports=e=>t=>function(n,i){return t(n,new gYe({...n,retryOptions:{...e,...n.retryOptions}},{handler:i,dispatch:t}))}});var Nse=x((LBt,Qse)=>{"use strict";var pYe=rr(),{InvalidArgumentError:AYe,RequestAbortedError:mYe}=$r(),yYe=ND(),qV=class extends yYe{#e=1024*1024;#t=null;#i=!1;#n=!1;#r=0;#l=null;#o=null;constructor({maxSize:t},r){if(super(r),t!=null&&(!Number.isFinite(t)||t<1))throw new AYe("maxSize must be a number greater than 0");this.#e=t??this.#e,this.#o=r}onConnect(t){this.#t=t,this.#o.onConnect(this.#u.bind(this))}#u(t){this.#n=!0,this.#l=t}onHeaders(t,r,n,i){let o=pYe.parseHeaders(r)["content-length"];if(o!=null&&o>this.#e)throw new mYe(`Response size (${o}) larger than maxSize (${this.#e})`);return this.#n?!0:this.#o.onHeaders(t,r,n,i)}onError(t){this.#i||(t=this.#l??t,this.#o.onError(t))}onData(t){return this.#r=this.#r+t.length,this.#r>=this.#e&&(this.#i=!0,this.#n?this.#o.onError(this.#l):this.#o.onComplete([])),!0}onComplete(t){if(!this.#i){if(this.#n){this.#o.onError(this.reason);return}this.#o.onComplete(t)}}};function CYe({maxSize:e}={maxSize:1024*1024}){return t=>function(n,i){let{dumpMaxSize:s=e}=n,o=new qV({maxSize:s},i);return t(n,o)}}Qse.exports=CYe});var Use=x((UBt,Lse)=>{"use strict";var{isIP:vYe}=require("net"),{lookup:EYe}=require("dns"),bYe=ND(),{InvalidArgumentError:P0,InformationalError:xYe}=$r(),Pse=Math.pow(2,31)-1,VV=class{#e=0;#t=0;#i=new Map;dualStack=!0;affinity=null;lookup=null;pick=null;constructor(t){this.#e=t.maxTTL,this.#t=t.maxItems,this.dualStack=t.dualStack,this.affinity=t.affinity,this.lookup=t.lookup??this.#n,this.pick=t.pick??this.#r}get full(){return this.#i.size===this.#t}runLookup(t,r,n){let i=this.#i.get(t.hostname);if(i==null&&this.full){n(null,t.origin);return}let s={affinity:this.affinity,dualStack:this.dualStack,lookup:this.lookup,pick:this.pick,...r.dns,maxTTL:this.#e,maxItems:this.#t};if(i==null)this.lookup(t,s,(o,a)=>{if(o||a==null||a.length===0){n(o??new xYe("No DNS entries found"));return}this.setRecords(t,a);let l=this.#i.get(t.hostname),c=this.pick(t,l,s.affinity),u;typeof c.port=="number"?u=`:${c.port}`:t.port!==""?u=`:${t.port}`:u="",n(null,`${t.protocol}//${c.family===6?`[${c.address}]`:c.address}${u}`)});else{let o=this.pick(t,i,s.affinity);if(o==null){this.#i.delete(t.hostname),this.runLookup(t,r,n);return}let a;typeof o.port=="number"?a=`:${o.port}`:t.port!==""?a=`:${t.port}`:a="",n(null,`${t.protocol}//${o.family===6?`[${o.address}]`:o.address}${a}`)}}#n(t,r,n){EYe(t.hostname,{all:!0,family:this.dualStack===!1?this.affinity:0,order:"ipv4first"},(i,s)=>{if(i)return n(i);let o=new Map;for(let a of s)o.set(`${a.address}:${a.family}`,a);n(null,o.values())})}#r(t,r,n){let i=null,{records:s,offset:o}=r,a;if(this.dualStack?(n==null&&(o==null||o===Pse?(r.offset=0,n=4):(r.offset++,n=(r.offset&1)===1?6:4)),s[n]!=null&&s[n].ips.length>0?a=s[n]:a=s[n===4?6:4]):a=s[n],a==null||a.ips.length===0)return i;a.offset==null||a.offset===Pse?a.offset=0:a.offset++;let l=a.offset%a.ips.length;return i=a.ips[l]??null,i==null?i:Date.now()-i.timestamp>i.ttl?(a.ips.splice(l,1),this.pick(t,r,n)):i}setRecords(t,r){let n=Date.now(),i={records:{4:null,6:null}};for(let s of r){s.timestamp=n,typeof s.ttl=="number"?s.ttl=Math.min(s.ttl,this.#e):s.ttl=this.#e;let o=i.records[s.family]??{ips:[]};o.ips.push(s),i.records[s.family]=o}this.#i.set(t.hostname,i)}getHandler(t,r){return new HV(this,t,r)}},HV=class extends bYe{#e=null;#t=null;#i=null;#n=null;#r=null;constructor(t,{origin:r,handler:n,dispatch:i},s){super(n),this.#r=r,this.#n=n,this.#t={...s},this.#e=t,this.#i=i}onError(t){switch(t.code){case"ETIMEDOUT":case"ECONNREFUSED":{if(this.#e.dualStack){this.#e.runLookup(this.#r,this.#t,(r,n)=>{if(r)return this.#n.onError(r);let i={...this.#t,origin:n};this.#i(i,this)});return}this.#n.onError(t);return}case"ENOTFOUND":this.#e.deleteRecord(this.#r);default:this.#n.onError(t);break}}};Lse.exports=e=>{if(e?.maxTTL!=null&&(typeof e?.maxTTL!="number"||e?.maxTTL<0))throw new P0("Invalid maxTTL. Must be a positive number");if(e?.maxItems!=null&&(typeof e?.maxItems!="number"||e?.maxItems<1))throw new P0("Invalid maxItems. Must be a positive number and greater than zero");if(e?.affinity!=null&&e?.affinity!==4&&e?.affinity!==6)throw new P0("Invalid affinity. Must be either 4 or 6");if(e?.dualStack!=null&&typeof e?.dualStack!="boolean")throw new P0("Invalid dualStack. Must be a boolean");if(e?.lookup!=null&&typeof e?.lookup!="function")throw new P0("Invalid lookup. Must be a function");if(e?.pick!=null&&typeof e?.pick!="function")throw new P0("Invalid pick. Must be a function");let t=e?.dualStack??!0,r;t?r=e?.affinity??null:r=e?.affinity??4;let n={maxTTL:e?.maxTTL??1e4,lookup:e?.lookup??null,pick:e?.pick??null,dualStack:t,affinity:r,maxItems:e?.maxItems??1/0},i=new VV(n);return s=>function(a,l){let c=a.origin.constructor===URL?a.origin:new URL(a.origin);return vYe(c.hostname)!==0?s(a,l):(i.runLookup(c,a,(u,f)=>{if(u)return l.onError(u);let p=null;p={...a,servername:c.hostname,origin:f,headers:{host:c.hostname,...a.headers}},s(p,i.getHandler({origin:c,dispatch:s,handler:l},a))}),!0)}}});var kp=x((OBt,$se)=>{"use strict";var{kConstruct:_Ye}=Un(),{kEnumerableProperty:L0}=rr(),{iteratorMixin:wYe,isValidHeaderName:bb,isValidHeaderValue:qse}=ba(),{webidl:br}=_s(),WV=require("assert"),PD=require("util"),Bi=Symbol("headers map"),wa=Symbol("headers map sorted");function Ose(e){return e===10||e===13||e===9||e===32}function Vse(e){let t=0,r=e.length;for(;r>t&&Ose(e.charCodeAt(r-1));)--r;for(;r>t&&Ose(e.charCodeAt(t));)++t;return t===0&&r===e.length?e:e.substring(t,r)}function Hse(e,t){if(Array.isArray(t))for(let r=0;r<t.length;++r){let n=t[r];if(n.length!==2)throw br.errors.exception({header:"Headers constructor",message:`expected name/value pair to be length 2, found ${n.length}.`});GV(e,n[0],n[1])}else if(typeof t=="object"&&t!==null){let r=Object.keys(t);for(let n=0;n<r.length;++n)GV(e,r[n],t[r[n]])}else throw br.errors.conversionFailed({prefix:"Headers constructor",argument:"Argument 1",types:["sequence<sequence<ByteString>>","record<ByteString, ByteString>"]})}function GV(e,t,r){if(r=Vse(r),bb(t)){if(!qse(r))throw br.errors.invalidArgument({prefix:"Headers.append",value:r,type:"header value"})}else throw br.errors.invalidArgument({prefix:"Headers.append",value:t,type:"header name"});if(Gse(e)==="immutable")throw new TypeError("immutable");return $V(e).append(t,r,!1)}function Wse(e,t){return e[0]<t[0]?-1:1}var LD=class e{cookies=null;constructor(t){t instanceof e?(this[Bi]=new Map(t[Bi]),this[wa]=t[wa],this.cookies=t.cookies===null?null:[...t.cookies]):(this[Bi]=new Map(t),this[wa]=null)}contains(t,r){return this[Bi].has(r?t:t.toLowerCase())}clear(){this[Bi].clear(),this[wa]=null,this.cookies=null}append(t,r,n){this[wa]=null;let i=n?t:t.toLowerCase(),s=this[Bi].get(i);if(s){let o=i==="cookie"?"; ":", ";this[Bi].set(i,{name:s.name,value:`${s.value}${o}${r}`})}else this[Bi].set(i,{name:t,value:r});i==="set-cookie"&&(this.cookies??=[]).push(r)}set(t,r,n){this[wa]=null;let i=n?t:t.toLowerCase();i==="set-cookie"&&(this.cookies=[r]),this[Bi].set(i,{name:t,value:r})}delete(t,r){this[wa]=null,r||(t=t.toLowerCase()),t==="set-cookie"&&(this.cookies=null),this[Bi].delete(t)}get(t,r){return this[Bi].get(r?t:t.toLowerCase())?.value??null}*[Symbol.iterator](){for(let{0:t,1:{value:r}}of this[Bi])yield[t,r]}get entries(){let t={};if(this[Bi].size!==0)for(let{name:r,value:n}of this[Bi].values())t[r]=n;return t}rawValues(){return this[Bi].values()}get entriesList(){let t=[];if(this[Bi].size!==0)for(let{0:r,1:{name:n,value:i}}of this[Bi])if(r==="set-cookie")for(let s of this.cookies)t.push([n,s]);else t.push([n,i]);return t}toSortedArray(){let t=this[Bi].size,r=new Array(t);if(t<=32){if(t===0)return r;let n=this[Bi][Symbol.iterator](),i=n.next().value;r[0]=[i[0],i[1].value],WV(i[1].value!==null);for(let s=1,o=0,a=0,l=0,c=0,u,f;s<t;++s){for(f=n.next().value,u=r[s]=[f[0],f[1].value],WV(u[1]!==null),l=0,a=s;l<a;)c=l+(a-l>>1),r[c][0]<=u[0]?l=c+1:a=c;if(s!==c){for(o=s;o>l;)r[o]=r[--o];r[l]=u}}if(!n.next().done)throw new TypeError("Unreachable");return r}else{let n=0;for(let{0:i,1:{value:s}}of this[Bi])r[n++]=[i,s],WV(s!==null);return r.sort(Wse)}}},yc=class e{#e;#t;constructor(t=void 0){br.util.markAsUncloneable(this),t!==_Ye&&(this.#t=new LD,this.#e="none",t!==void 0&&(t=br.converters.HeadersInit(t,"Headers contructor","init"),Hse(this,t)))}append(t,r){br.brandCheck(this,e),br.argumentLengthCheck(arguments,2,"Headers.append");let n="Headers.append";return t=br.converters.ByteString(t,n,"name"),r=br.converters.ByteString(r,n,"value"),GV(this,t,r)}delete(t){br.brandCheck(this,e),br.argumentLengthCheck(arguments,1,"Headers.delete");let r="Headers.delete";if(t=br.converters.ByteString(t,r,"name"),!bb(t))throw br.errors.invalidArgument({prefix:"Headers.delete",value:t,type:"header name"});if(this.#e==="immutable")throw new TypeError("immutable");this.#t.contains(t,!1)&&this.#t.delete(t,!1)}get(t){br.brandCheck(this,e),br.argumentLengthCheck(arguments,1,"Headers.get");let r="Headers.get";if(t=br.converters.ByteString(t,r,"name"),!bb(t))throw br.errors.invalidArgument({prefix:r,value:t,type:"header name"});return this.#t.get(t,!1)}has(t){br.brandCheck(this,e),br.argumentLengthCheck(arguments,1,"Headers.has");let r="Headers.has";if(t=br.converters.ByteString(t,r,"name"),!bb(t))throw br.errors.invalidArgument({prefix:r,value:t,type:"header name"});return this.#t.contains(t,!1)}set(t,r){br.brandCheck(this,e),br.argumentLengthCheck(arguments,2,"Headers.set");let n="Headers.set";if(t=br.converters.ByteString(t,n,"name"),r=br.converters.ByteString(r,n,"value"),r=Vse(r),bb(t)){if(!qse(r))throw br.errors.invalidArgument({prefix:n,value:r,type:"header value"})}else throw br.errors.invalidArgument({prefix:n,value:t,type:"header name"});if(this.#e==="immutable")throw new TypeError("immutable");this.#t.set(t,r,!1)}getSetCookie(){br.brandCheck(this,e);let t=this.#t.cookies;return t?[...t]:[]}get[wa](){if(this.#t[wa])return this.#t[wa];let t=[],r=this.#t.toSortedArray(),n=this.#t.cookies;if(n===null||n.length===1)return this.#t[wa]=r;for(let i=0;i<r.length;++i){let{0:s,1:o}=r[i];if(s==="set-cookie")for(let a=0;a<n.length;++a)t.push([s,n[a]]);else t.push([s,o])}return this.#t[wa]=t}[PD.inspect.custom](t,r){return r.depth??=t,`Headers ${PD.formatWithOptions(r,this.#t.entries)}`}static getHeadersGuard(t){return t.#e}static setHeadersGuard(t,r){t.#e=r}static getHeadersList(t){return t.#t}static setHeadersList(t,r){t.#t=r}},{getHeadersGuard:Gse,setHeadersGuard:IYe,getHeadersList:$V,setHeadersList:SYe}=yc;Reflect.deleteProperty(yc,"getHeadersGuard");Reflect.deleteProperty(yc,"setHeadersGuard");Reflect.deleteProperty(yc,"getHeadersList");Reflect.deleteProperty(yc,"setHeadersList");wYe("Headers",yc,wa,0,1);Object.defineProperties(yc.prototype,{append:L0,delete:L0,get:L0,has:L0,set:L0,getSetCookie:L0,[Symbol.toStringTag]:{value:"Headers",configurable:!0},[PD.inspect.custom]:{enumerable:!1}});br.converters.HeadersInit=function(e,t,r){if(br.util.Type(e)==="Object"){let n=Reflect.get(e,Symbol.iterator);if(!PD.types.isProxy(e)&&n===yc.prototype.entries)try{return $V(e).entriesList}catch{}return typeof n=="function"?br.converters["sequence<sequence<ByteString>>"](e,t,r,n.bind(e)):br.converters["record<ByteString, ByteString>"](e,t,r)}throw br.errors.conversionFailed({prefix:"Headers constructor",argument:"Argument 1",types:["sequence<sequence<ByteString>>","record<ByteString, ByteString>"]})};$se.exports={fill:Hse,compareHeaderName:Wse,Headers:yc,HeadersList:LD,getHeadersGuard:Gse,setHeadersGuard:IYe,setHeadersList:SYe,getHeadersList:$V}});var _b=x((qBt,roe)=>{"use strict";var{Headers:Zse,HeadersList:Yse,fill:BYe,getHeadersGuard:DYe,setHeadersGuard:Xse,setHeadersList:eoe}=kp(),{extractBody:Kse,cloneBody:TYe,mixinBody:RYe,hasFinalizationRegistry:kYe,streamRegistry:FYe,bodyUnusable:MYe}=v0(),YV=rr(),zse=require("util"),{kEnumerableProperty:Ia}=YV,{isValidReasonPhrase:QYe,isCancelled:NYe,isAborted:PYe,isBlobLike:LYe,serializeJavascriptValueToJSONString:UYe,isErrorLike:OYe,isomorphicEncode:qYe,environmentSettingsObject:VYe}=ba(),{redirectStatusSet:HYe,nullBodyStatus:WYe}=WE(),{kState:oi,kHeaders:qd}=ih(),{webidl:$t}=_s(),{FormData:GYe}=JE(),{URLSerializer:Jse}=Vo(),{kConstruct:OD}=Un(),KV=require("assert"),{types:$Ye}=require("util"),YYe=new TextEncoder("utf-8"),Fp=class e{static error(){return xb(qD(),"immutable")}static json(t,r={}){$t.argumentLengthCheck(arguments,1,"Response.json"),r!==null&&(r=$t.converters.ResponseInit(r));let n=YYe.encode(UYe(t)),i=Kse(n),s=xb(U0({}),"response");return jse(s,r,{body:i[0],type:"application/json"}),s}static redirect(t,r=302){$t.argumentLengthCheck(arguments,1,"Response.redirect"),t=$t.converters.USVString(t),r=$t.converters["unsigned short"](r);let n;try{n=new URL(t,VYe.settingsObject.baseUrl)}catch(o){throw new TypeError(`Failed to parse URL from ${t}`,{cause:o})}if(!HYe.has(r))throw new RangeError(`Invalid status code ${r}`);let i=xb(U0({}),"immutable");i[oi].status=r;let s=qYe(Jse(n));return i[oi].headersList.append("location",s,!0),i}constructor(t=null,r={}){if($t.util.markAsUncloneable(this),t===OD)return;t!==null&&(t=$t.converters.BodyInit(t)),r=$t.converters.ResponseInit(r),this[oi]=U0({}),this[qd]=new Zse(OD),Xse(this[qd],"response"),eoe(this[qd],this[oi].headersList);let n=null;if(t!=null){let[i,s]=Kse(t);n={body:i,type:s}}jse(this,r,n)}get type(){return $t.brandCheck(this,e),this[oi].type}get url(){$t.brandCheck(this,e);let t=this[oi].urlList,r=t[t.length-1]??null;return r===null?"":Jse(r,!0)}get redirected(){return $t.brandCheck(this,e),this[oi].urlList.length>1}get status(){return $t.brandCheck(this,e),this[oi].status}get ok(){return $t.brandCheck(this,e),this[oi].status>=200&&this[oi].status<=299}get statusText(){return $t.brandCheck(this,e),this[oi].statusText}get headers(){return $t.brandCheck(this,e),this[qd]}get body(){return $t.brandCheck(this,e),this[oi].body?this[oi].body.stream:null}get bodyUsed(){return $t.brandCheck(this,e),!!this[oi].body&&YV.isDisturbed(this[oi].body.stream)}clone(){if($t.brandCheck(this,e),MYe(this))throw $t.errors.exception({header:"Response.clone",message:"Body has already been consumed."});let t=zV(this[oi]);return xb(t,DYe(this[qd]))}[zse.inspect.custom](t,r){r.depth===null&&(r.depth=2),r.colors??=!0;let n={status:this.status,statusText:this.statusText,headers:this.headers,body:this.body,bodyUsed:this.bodyUsed,ok:this.ok,redirected:this.redirected,type:this.type,url:this.url};return`Response ${zse.formatWithOptions(r,n)}`}};RYe(Fp);Object.defineProperties(Fp.prototype,{type:Ia,url:Ia,status:Ia,ok:Ia,redirected:Ia,statusText:Ia,headers:Ia,clone:Ia,body:Ia,bodyUsed:Ia,[Symbol.toStringTag]:{value:"Response",configurable:!0}});Object.defineProperties(Fp,{json:Ia,redirect:Ia,error:Ia});function zV(e){if(e.internalResponse)return toe(zV(e.internalResponse),e.type);let t=U0({...e,body:null});return e.body!=null&&(t.body=TYe(t,e.body)),t}function U0(e){return{aborted:!1,rangeRequested:!1,timingAllowPassed:!1,requestIncludesCredentials:!1,type:"default",status:200,timingInfo:null,cacheState:"",statusText:"",...e,headersList:e?.headersList?new Yse(e?.headersList):new Yse,urlList:e?.urlList?[...e.urlList]:[]}}function qD(e){let t=OYe(e);return U0({type:"error",status:0,error:t?e:new Error(e&&String(e)),aborted:e&&e.name==="AbortError"})}function KYe(e){return e.type==="error"&&e.status===0}function UD(e,t){return t={internalResponse:e,...t},new Proxy(e,{get(r,n){return n in t?t[n]:r[n]},set(r,n,i){return KV(!(n in t)),r[n]=i,!0}})}function toe(e,t){if(t==="basic")return UD(e,{type:"basic",headersList:e.headersList});if(t==="cors")return UD(e,{type:"cors",headersList:e.headersList});if(t==="opaque")return UD(e,{type:"opaque",urlList:Object.freeze([]),status:0,statusText:"",body:null});if(t==="opaqueredirect")return UD(e,{type:"opaqueredirect",status:0,statusText:"",headersList:[],body:null});KV(!1)}function zYe(e,t=null){return KV(NYe(e)),PYe(e)?qD(Object.assign(new DOMException("The operation was aborted.","AbortError"),{cause:t})):qD(Object.assign(new DOMException("Request was cancelled."),{cause:t}))}function jse(e,t,r){if(t.status!==null&&(t.status<200||t.status>599))throw new RangeError('init["status"] must be in the range of 200 to 599, inclusive.');if("statusText"in t&&t.statusText!=null&&!QYe(String(t.statusText)))throw new TypeError("Invalid statusText");if("status"in t&&t.status!=null&&(e[oi].status=t.status),"statusText"in t&&t.statusText!=null&&(e[oi].statusText=t.statusText),"headers"in t&&t.headers!=null&&BYe(e[qd],t.headers),r){if(WYe.includes(e.status))throw $t.errors.exception({header:"Response constructor",message:`Invalid response status code ${e.status}`});e[oi].body=r.body,r.type!=null&&!e[oi].headersList.contains("content-type",!0)&&e[oi].headersList.append("content-type",r.type,!0)}}function xb(e,t){let r=new Fp(OD);return r[oi]=e,r[qd]=new Zse(OD),eoe(r[qd],e.headersList),Xse(r[qd],t),kYe&&e.body?.stream&&FYe.register(r,new WeakRef(e.body.stream)),r}$t.converters.ReadableStream=$t.interfaceConverter(ReadableStream);$t.converters.FormData=$t.interfaceConverter(GYe);$t.converters.URLSearchParams=$t.interfaceConverter(URLSearchParams);$t.converters.XMLHttpRequestBodyInit=function(e,t,r){return typeof e=="string"?$t.converters.USVString(e,t,r):LYe(e)?$t.converters.Blob(e,t,r,{strict:!1}):ArrayBuffer.isView(e)||$Ye.isArrayBuffer(e)?$t.converters.BufferSource(e,t,r):YV.isFormDataLike(e)?$t.converters.FormData(e,t,r,{strict:!1}):e instanceof URLSearchParams?$t.converters.URLSearchParams(e,t,r):$t.converters.DOMString(e,t,r)};$t.converters.BodyInit=function(e,t,r){return e instanceof ReadableStream?$t.converters.ReadableStream(e,t,r):e?.[Symbol.asyncIterator]?e:$t.converters.XMLHttpRequestBodyInit(e,t,r)};$t.converters.ResponseInit=$t.dictionaryConverter([{key:"status",converter:$t.converters["unsigned short"],defaultValue:()=>200},{key:"statusText",converter:$t.converters.ByteString,defaultValue:()=>""},{key:"headers",converter:$t.converters.HeadersInit}]);roe.exports={isNetworkError:KYe,makeNetworkError:qD,makeResponse:U0,makeAppropriateNetworkError:zYe,filterResponse:toe,Response:Fp,cloneResponse:zV,fromInnerResponse:xb}});var ooe=x((VBt,soe)=>{"use strict";var{kConnected:noe,kSize:ioe}=Un(),JV=class{constructor(t){this.value=t}deref(){return this.value[noe]===0&&this.value[ioe]===0?void 0:this.value}},jV=class{constructor(t){this.finalizer=t}register(t,r){t.on&&t.on("disconnect",()=>{t[noe]===0&&t[ioe]===0&&this.finalizer(r)})}unregister(t){}};soe.exports=function(){return process.env.NODE_V8_COVERAGE&&process.version.startsWith("v18")?(process._rawDebug("Using compatibility WeakRef and FinalizationRegistry"),{WeakRef:JV,FinalizationRegistry:jV}):{WeakRef,FinalizationRegistry}}});var O0=x((HBt,Eoe)=>{"use strict";var{extractBody:JYe,mixinBody:jYe,cloneBody:ZYe,bodyUnusable:aoe}=v0(),{Headers:Aoe,fill:XYe,HeadersList:GD,setHeadersGuard:XV,getHeadersGuard:eKe,setHeadersList:moe,getHeadersList:loe}=kp(),{FinalizationRegistry:tKe}=ooe()(),HD=rr(),coe=require("util"),{isValidHTTPToken:rKe,sameOrigin:uoe,environmentSettingsObject:VD}=ba(),{forbiddenMethodsSet:nKe,corsSafeListedMethodsSet:iKe,referrerPolicy:sKe,requestRedirect:oKe,requestMode:aKe,requestCredentials:lKe,requestCache:cKe,requestDuplex:uKe}=WE(),{kEnumerableProperty:Di,normalizedMethodRecordsBase:dKe,normalizedMethodRecords:fKe}=HD,{kHeaders:Sa,kSignal:WD,kState:Dn,kDispatcher:ZV}=ih(),{webidl:gt}=_s(),{URLSerializer:hKe}=Vo(),{kConstruct:$D}=Un(),gKe=require("assert"),{getMaxListeners:doe,setMaxListeners:foe,getEventListeners:pKe,defaultMaxListeners:hoe}=require("events"),AKe=Symbol("abortController"),yoe=new tKe(({signal:e,abort:t})=>{e.removeEventListener("abort",t)}),YD=new WeakMap;function goe(e){return t;function t(){let r=e.deref();if(r!==void 0){yoe.unregister(t),this.removeEventListener("abort",t),r.abort(this.reason);let n=YD.get(r.signal);if(n!==void 0){if(n.size!==0){for(let i of n){let s=i.deref();s!==void 0&&s.abort(this.reason)}n.clear()}YD.delete(r.signal)}}}}var poe=!1,ph=class e{constructor(t,r={}){if(gt.util.markAsUncloneable(this),t===$D)return;let n="Request constructor";gt.argumentLengthCheck(arguments,1,n),t=gt.converters.RequestInfo(t,n,"input"),r=gt.converters.RequestInit(r,n,"init");let i=null,s=null,o=VD.settingsObject.baseUrl,a=null;if(typeof t=="string"){this[ZV]=r.dispatcher;let v;try{v=new URL(t,o)}catch(b){throw new TypeError("Failed to parse URL from "+t,{cause:b})}if(v.username||v.password)throw new TypeError("Request cannot be constructed from a URL that includes credentials: "+t);i=KD({urlList:[v]}),s="cors"}else this[ZV]=r.dispatcher||t[ZV],gKe(t instanceof e),i=t[Dn],a=t[WD];let l=VD.settingsObject.origin,c="client";if(i.window?.constructor?.name==="EnvironmentSettingsObject"&&uoe(i.window,l)&&(c=i.window),r.window!=null)throw new TypeError(`'window' option '${c}' must be null`);"window"in r&&(c="no-window"),i=KD({method:i.method,headersList:i.headersList,unsafeRequest:i.unsafeRequest,client:VD.settingsObject,window:c,priority:i.priority,origin:i.origin,referrer:i.referrer,referrerPolicy:i.referrerPolicy,mode:i.mode,credentials:i.credentials,cache:i.cache,redirect:i.redirect,integrity:i.integrity,keepalive:i.keepalive,reloadNavigation:i.reloadNavigation,historyNavigation:i.historyNavigation,urlList:[...i.urlList]});let u=Object.keys(r).length!==0;if(u&&(i.mode==="navigate"&&(i.mode="same-origin"),i.reloadNavigation=!1,i.historyNavigation=!1,i.origin="client",i.referrer="client",i.referrerPolicy="",i.url=i.urlList[i.urlList.length-1],i.urlList=[i.url]),r.referrer!==void 0){let v=r.referrer;if(v==="")i.referrer="no-referrer";else{let b;try{b=new URL(v,o)}catch(w){throw new TypeError(`Referrer "${v}" is not a valid URL.`,{cause:w})}b.protocol==="about:"&&b.hostname==="client"||l&&!uoe(b,VD.settingsObject.baseUrl)?i.referrer="client":i.referrer=b}}r.referrerPolicy!==void 0&&(i.referrerPolicy=r.referrerPolicy);let f;if(r.mode!==void 0?f=r.mode:f=s,f==="navigate")throw gt.errors.exception({header:"Request constructor",message:"invalid request mode navigate."});if(f!=null&&(i.mode=f),r.credentials!==void 0&&(i.credentials=r.credentials),r.cache!==void 0&&(i.cache=r.cache),i.cache==="only-if-cached"&&i.mode!=="same-origin")throw new TypeError("'only-if-cached' can be set only with 'same-origin' mode");if(r.redirect!==void 0&&(i.redirect=r.redirect),r.integrity!=null&&(i.integrity=String(r.integrity)),r.keepalive!==void 0&&(i.keepalive=!!r.keepalive),r.method!==void 0){let v=r.method,b=fKe[v];if(b!==void 0)i.method=b;else{if(!rKe(v))throw new TypeError(`'${v}' is not a valid HTTP method.`);let w=v.toUpperCase();if(nKe.has(w))throw new TypeError(`'${v}' HTTP method is unsupported.`);v=dKe[w]??v,i.method=v}!poe&&i.method==="patch"&&(process.emitWarning("Using `patch` is highly likely to result in a `405 Method Not Allowed`. `PATCH` is much more likely to succeed.",{code:"UNDICI-FETCH-patch"}),poe=!0)}r.signal!==void 0&&(a=r.signal),this[Dn]=i;let p=new AbortController;if(this[WD]=p.signal,a!=null){if(!a||typeof a.aborted!="boolean"||typeof a.addEventListener!="function")throw new TypeError("Failed to construct 'Request': member signal is not of type AbortSignal.");if(a.aborted)p.abort(a.reason);else{this[AKe]=p;let v=new WeakRef(p),b=goe(v);try{(typeof doe=="function"&&doe(a)===hoe||pKe(a,"abort").length>=hoe)&&foe(1500,a)}catch{}HD.addAbortListener(a,b),yoe.register(p,{signal:a,abort:b},b)}}if(this[Sa]=new Aoe($D),moe(this[Sa],i.headersList),XV(this[Sa],"request"),f==="no-cors"){if(!iKe.has(i.method))throw new TypeError(`'${i.method} is unsupported in no-cors mode.`);XV(this[Sa],"request-no-cors")}if(u){let v=loe(this[Sa]),b=r.headers!==void 0?r.headers:new GD(v);if(v.clear(),b instanceof GD){for(let{name:w,value:B}of b.rawValues())v.append(w,B,!1);v.cookies=b.cookies}else XYe(this[Sa],b)}let g=t instanceof e?t[Dn].body:null;if((r.body!=null||g!=null)&&(i.method==="GET"||i.method==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body.");let A=null;if(r.body!=null){let[v,b]=JYe(r.body,i.keepalive);A=v,b&&!loe(this[Sa]).contains("content-type",!0)&&this[Sa].append("content-type",b)}let y=A??g;if(y!=null&&y.source==null){if(A!=null&&r.duplex==null)throw new TypeError("RequestInit: duplex option is required when sending a body.");if(i.mode!=="same-origin"&&i.mode!=="cors")throw new TypeError('If request is made from ReadableStream, mode should be "same-origin" or "cors"');i.useCORSPreflightFlag=!0}let C=y;if(A==null&&g!=null){if(aoe(t))throw new TypeError("Cannot construct a Request with a Request object that has already been used.");let v=new TransformStream;g.stream.pipeThrough(v),C={source:g.source,length:g.length,stream:v.readable}}this[Dn].body=C}get method(){return gt.brandCheck(this,e),this[Dn].method}get url(){return gt.brandCheck(this,e),hKe(this[Dn].url)}get headers(){return gt.brandCheck(this,e),this[Sa]}get destination(){return gt.brandCheck(this,e),this[Dn].destination}get referrer(){return gt.brandCheck(this,e),this[Dn].referrer==="no-referrer"?"":this[Dn].referrer==="client"?"about:client":this[Dn].referrer.toString()}get referrerPolicy(){return gt.brandCheck(this,e),this[Dn].referrerPolicy}get mode(){return gt.brandCheck(this,e),this[Dn].mode}get credentials(){return this[Dn].credentials}get cache(){return gt.brandCheck(this,e),this[Dn].cache}get redirect(){return gt.brandCheck(this,e),this[Dn].redirect}get integrity(){return gt.brandCheck(this,e),this[Dn].integrity}get keepalive(){return gt.brandCheck(this,e),this[Dn].keepalive}get isReloadNavigation(){return gt.brandCheck(this,e),this[Dn].reloadNavigation}get isHistoryNavigation(){return gt.brandCheck(this,e),this[Dn].historyNavigation}get signal(){return gt.brandCheck(this,e),this[WD]}get body(){return gt.brandCheck(this,e),this[Dn].body?this[Dn].body.stream:null}get bodyUsed(){return gt.brandCheck(this,e),!!this[Dn].body&&HD.isDisturbed(this[Dn].body.stream)}get duplex(){return gt.brandCheck(this,e),"half"}clone(){if(gt.brandCheck(this,e),aoe(this))throw new TypeError("unusable");let t=Coe(this[Dn]),r=new AbortController;if(this.signal.aborted)r.abort(this.signal.reason);else{let n=YD.get(this.signal);n===void 0&&(n=new Set,YD.set(this.signal,n));let i=new WeakRef(r);n.add(i),HD.addAbortListener(r.signal,goe(i))}return voe(t,r.signal,eKe(this[Sa]))}[coe.inspect.custom](t,r){r.depth===null&&(r.depth=2),r.colors??=!0;let n={method:this.method,url:this.url,headers:this.headers,destination:this.destination,referrer:this.referrer,referrerPolicy:this.referrerPolicy,mode:this.mode,credentials:this.credentials,cache:this.cache,redirect:this.redirect,integrity:this.integrity,keepalive:this.keepalive,isReloadNavigation:this.isReloadNavigation,isHistoryNavigation:this.isHistoryNavigation,signal:this.signal};return`Request ${coe.formatWithOptions(r,n)}`}};jYe(ph);function KD(e){return{method:e.method??"GET",localURLsOnly:e.localURLsOnly??!1,unsafeRequest:e.unsafeRequest??!1,body:e.body??null,client:e.client??null,reservedClient:e.reservedClient??null,replacesClientId:e.replacesClientId??"",window:e.window??"client",keepalive:e.keepalive??!1,serviceWorkers:e.serviceWorkers??"all",initiator:e.initiator??"",destination:e.destination??"",priority:e.priority??null,origin:e.origin??"client",policyContainer:e.policyContainer??"client",referrer:e.referrer??"client",referrerPolicy:e.referrerPolicy??"",mode:e.mode??"no-cors",useCORSPreflightFlag:e.useCORSPreflightFlag??!1,credentials:e.credentials??"same-origin",useCredentials:e.useCredentials??!1,cache:e.cache??"default",redirect:e.redirect??"follow",integrity:e.integrity??"",cryptoGraphicsNonceMetadata:e.cryptoGraphicsNonceMetadata??"",parserMetadata:e.parserMetadata??"",reloadNavigation:e.reloadNavigation??!1,historyNavigation:e.historyNavigation??!1,userActivation:e.userActivation??!1,taintedOrigin:e.taintedOrigin??!1,redirectCount:e.redirectCount??0,responseTainting:e.responseTainting??"basic",preventNoCacheCacheControlHeaderModification:e.preventNoCacheCacheControlHeaderModification??!1,done:e.done??!1,timingAllowFailed:e.timingAllowFailed??!1,urlList:e.urlList,url:e.urlList[0],headersList:e.headersList?new GD(e.headersList):new GD}}function Coe(e){let t=KD({...e,body:null});return e.body!=null&&(t.body=ZYe(t,e.body)),t}function voe(e,t,r){let n=new ph($D);return n[Dn]=e,n[WD]=t,n[Sa]=new Aoe($D),moe(n[Sa],e.headersList),XV(n[Sa],r),n}Object.defineProperties(ph.prototype,{method:Di,url:Di,headers:Di,redirect:Di,clone:Di,signal:Di,duplex:Di,destination:Di,body:Di,bodyUsed:Di,isHistoryNavigation:Di,isReloadNavigation:Di,keepalive:Di,integrity:Di,cache:Di,credentials:Di,attribute:Di,referrerPolicy:Di,referrer:Di,mode:Di,[Symbol.toStringTag]:{value:"Request",configurable:!0}});gt.converters.Request=gt.interfaceConverter(ph);gt.converters.RequestInfo=function(e,t,r){return typeof e=="string"?gt.converters.USVString(e,t,r):e instanceof ph?gt.converters.Request(e,t,r):gt.converters.USVString(e,t,r)};gt.converters.AbortSignal=gt.interfaceConverter(AbortSignal);gt.converters.RequestInit=gt.dictionaryConverter([{key:"method",converter:gt.converters.ByteString},{key:"headers",converter:gt.converters.HeadersInit},{key:"body",converter:gt.nullableConverter(gt.converters.BodyInit)},{key:"referrer",converter:gt.converters.USVString},{key:"referrerPolicy",converter:gt.converters.DOMString,allowedValues:sKe},{key:"mode",converter:gt.converters.DOMString,allowedValues:aKe},{key:"credentials",converter:gt.converters.DOMString,allowedValues:lKe},{key:"cache",converter:gt.converters.DOMString,allowedValues:cKe},{key:"redirect",converter:gt.converters.DOMString,allowedValues:oKe},{key:"integrity",converter:gt.converters.DOMString},{key:"keepalive",converter:gt.converters.boolean},{key:"signal",converter:gt.nullableConverter(e=>gt.converters.AbortSignal(e,"RequestInit","signal",{strict:!1}))},{key:"window",converter:gt.converters.any},{key:"duplex",converter:gt.converters.DOMString,allowedValues:uKe},{key:"dispatcher",converter:gt.converters.any}]);Eoe.exports={Request:ph,makeRequest:KD,fromInnerRequest:voe,cloneRequest:Coe}});var Ib=x((WBt,Noe)=>{"use strict";var{makeNetworkError:an,makeAppropriateNetworkError:zD,filterResponse:e3,makeResponse:JD,fromInnerResponse:mKe}=_b(),{HeadersList:boe}=kp(),{Request:yKe,cloneRequest:CKe}=O0(),Ah=require("zlib"),{bytesMatch:vKe,makePolicyContainer:EKe,clonePolicyContainer:bKe,requestBadPort:xKe,TAOCheck:_Ke,appendRequestOriginHeader:wKe,responseLocationURL:IKe,requestCurrentURL:pu,setRequestReferrerPolicyOnRedirect:SKe,tryUpgradeRequestToAPotentiallyTrustworthyURL:BKe,createOpaqueTimingInfo:s3,appendFetchMetadata:DKe,corsCheck:TKe,crossOriginResourcePolicyCheck:RKe,determineRequestsReferrer:kKe,coarsenedSharedCurrentTime:wb,createDeferredPromise:FKe,isBlobLike:MKe,sameOrigin:i3,isCancelled:Mp,isAborted:xoe,isErrorLike:QKe,fullyReadBody:NKe,readableStreamClose:PKe,isomorphicEncode:jD,urlIsLocal:LKe,urlIsHttpHttpsScheme:o3,urlHasHttpsScheme:UKe,clampAndCoarsenConnectionTimingInfo:OKe,simpleRangeHeaderValue:qKe,buildContentRange:VKe,createInflate:HKe,extractMimeType:WKe}=ba(),{kState:Soe,kDispatcher:GKe}=ih(),Qp=require("assert"),{safelyExtractBody:a3,extractBody:_oe}=v0(),{redirectStatusSet:Boe,nullBodyStatus:Doe,safeMethodsSet:$Ke,requestBodyHeader:YKe,subresourceSet:KKe}=WE(),zKe=require("events"),{Readable:JKe,pipeline:jKe,finished:ZKe}=require("stream"),{addAbortListener:XKe,isErrored:eze,isReadable:ZD,bufferToLowerCasedHeaderName:woe}=rr(),{dataURLProcessor:tze,serializeAMimeType:rze,minimizeSupportedMimeType:nze}=Vo(),{getGlobalDispatcher:ize}=QD(),{webidl:sze}=_s(),{STATUS_CODES:oze}=require("http"),aze=["GET","HEAD"],lze=typeof __UNDICI_IS_NODE__<"u"||typeof esbuildDetection<"u"?"node":"undici",t3,XD=class extends zKe{constructor(t){super(),this.dispatcher=t,this.connection=null,this.dump=!1,this.state="ongoing"}terminate(t){this.state==="ongoing"&&(this.state="terminated",this.connection?.destroy(t),this.emit("terminated",t))}abort(t){this.state==="ongoing"&&(this.state="aborted",t||(t=new DOMException("The operation was aborted.","AbortError")),this.serializedAbortReason=t,this.connection?.destroy(t),this.emit("terminated",t))}};function cze(e){Toe(e,"fetch")}function uze(e,t=void 0){sze.argumentLengthCheck(arguments,1,"globalThis.fetch");let r=FKe(),n;try{n=new yKe(e,t)}catch(u){return r.reject(u),r.promise}let i=n[Soe];if(n.signal.aborted)return r3(r,i,null,n.signal.reason),r.promise;i.client.globalObject?.constructor?.name==="ServiceWorkerGlobalScope"&&(i.serviceWorkers="none");let o=null,a=!1,l=null;return XKe(n.signal,()=>{a=!0,Qp(l!=null),l.abort(n.signal.reason);let u=o?.deref();r3(r,i,u,n.signal.reason)}),l=koe({request:i,processResponseEndOfBody:cze,processResponse:u=>{if(!a){if(u.aborted){r3(r,i,o,l.serializedAbortReason);return}if(u.type==="error"){r.reject(new TypeError("fetch failed",{cause:u.error}));return}o=new WeakRef(mKe(u,"immutable")),r.resolve(o.deref()),r=null}},dispatcher:n[GKe]}),r.promise}function Toe(e,t="other"){if(e.type==="error"&&e.aborted||!e.urlList?.length)return;let r=e.urlList[0],n=e.timingInfo,i=e.cacheState;o3(r)&&n!==null&&(e.timingAllowPassed||(n=s3({startTime:n.startTime}),i=""),n.endTime=wb(),e.timingInfo=n,Roe(n,r.href,t,globalThis,i))}var Roe=performance.markResourceTiming;function r3(e,t,r,n){if(e&&e.reject(n),t.body!=null&&ZD(t.body?.stream)&&t.body.stream.cancel(n).catch(s=>{if(s.code!=="ERR_INVALID_STATE")throw s}),r==null)return;let i=r[Soe];i.body!=null&&ZD(i.body?.stream)&&i.body.stream.cancel(n).catch(s=>{if(s.code!=="ERR_INVALID_STATE")throw s})}function koe({request:e,processRequestBodyChunkLength:t,processRequestEndOfBody:r,processResponse:n,processResponseEndOfBody:i,processResponseConsumeBody:s,useParallelQueue:o=!1,dispatcher:a=ize()}){Qp(a);let l=null,c=!1;e.client!=null&&(l=e.client.globalObject,c=e.client.crossOriginIsolatedCapability);let u=wb(c),f=s3({startTime:u}),p={controller:new XD(a),request:e,timingInfo:f,processRequestBodyChunkLength:t,processRequestEndOfBody:r,processResponse:n,processResponseConsumeBody:s,processResponseEndOfBody:i,taskDestination:l,crossOriginIsolatedCapability:c};if(Qp(!e.body||e.body.stream),e.window==="client"&&(e.window=e.client?.globalObject?.constructor?.name==="Window"?e.client:"no-window"),e.origin==="client"&&(e.origin=e.client.origin),e.policyContainer==="client"&&(e.client!=null?e.policyContainer=bKe(e.client.policyContainer):e.policyContainer=EKe()),!e.headersList.contains("accept",!0)){let g="*/*";e.headersList.append("accept",g,!0)}return e.headersList.contains("accept-language",!0)||e.headersList.append("accept-language","*",!0),e.priority,KKe.has(e.destination),Foe(p).catch(g=>{p.controller.terminate(g)}),p.controller}async function Foe(e,t=!1){let r=e.request,n=null;if(r.localURLsOnly&&!LKe(pu(r))&&(n=an("local URLs only")),BKe(r),xKe(r)==="blocked"&&(n=an("bad port")),r.referrerPolicy===""&&(r.referrerPolicy=r.policyContainer.referrerPolicy),r.referrer!=="no-referrer"&&(r.referrer=kKe(r)),n===null&&(n=await(async()=>{let s=pu(r);return i3(s,r.url)&&r.responseTainting==="basic"||s.protocol==="data:"||r.mode==="navigate"||r.mode==="websocket"?(r.responseTainting="basic",await Ioe(e)):r.mode==="same-origin"?an('request mode cannot be "same-origin"'):r.mode==="no-cors"?r.redirect!=="follow"?an('redirect mode cannot be "follow" for "no-cors" request'):(r.responseTainting="opaque",await Ioe(e)):o3(pu(r))?(r.responseTainting="cors",await Moe(e)):an("URL scheme must be a HTTP(S) scheme")})()),t)return n;n.status!==0&&!n.internalResponse&&(r.responseTainting,r.responseTainting==="basic"?n=e3(n,"basic"):r.responseTainting==="cors"?n=e3(n,"cors"):r.responseTainting==="opaque"?n=e3(n,"opaque"):Qp(!1));let i=n.status===0?n:n.internalResponse;if(i.urlList.length===0&&i.urlList.push(...r.urlList),r.timingAllowFailed||(n.timingAllowPassed=!0),n.type==="opaque"&&i.status===206&&i.rangeRequested&&!r.headers.contains("range",!0)&&(n=i=an()),n.status!==0&&(r.method==="HEAD"||r.method==="CONNECT"||Doe.includes(i.status))&&(i.body=null,e.controller.dump=!0),r.integrity){let s=a=>n3(e,an(a));if(r.responseTainting==="opaque"||n.body==null){s(n.error);return}let o=a=>{if(!vKe(a,r.integrity)){s("integrity mismatch");return}n.body=a3(a)[0],n3(e,n)};await NKe(n.body,o,s)}else n3(e,n)}function Ioe(e){if(Mp(e)&&e.request.redirectCount===0)return Promise.resolve(zD(e));let{request:t}=e,{protocol:r}=pu(t);switch(r){case"about:":return Promise.resolve(an("about scheme is not supported"));case"blob:":{t3||(t3=require("buffer").resolveObjectURL);let n=pu(t);if(n.search.length!==0)return Promise.resolve(an("NetworkError when attempting to fetch resource."));let i=t3(n.toString());if(t.method!=="GET"||!MKe(i))return Promise.resolve(an("invalid method"));let s=JD(),o=i.size,a=jD(`${o}`),l=i.type;if(t.headersList.contains("range",!0)){s.rangeRequested=!0;let c=t.headersList.get("range",!0),u=qKe(c,!0);if(u==="failure")return Promise.resolve(an("failed to fetch the data URL"));let{rangeStartValue:f,rangeEndValue:p}=u;if(f===null)f=o-p,p=f+p-1;else{if(f>=o)return Promise.resolve(an("Range start is greater than the blob's size."));(p===null||p>=o)&&(p=o-1)}let g=i.slice(f,p,l),A=_oe(g);s.body=A[0];let y=jD(`${g.size}`),C=VKe(f,p,o);s.status=206,s.statusText="Partial Content",s.headersList.set("content-length",y,!0),s.headersList.set("content-type",l,!0),s.headersList.set("content-range",C,!0)}else{let c=_oe(i);s.statusText="OK",s.body=c[0],s.headersList.set("content-length",a,!0),s.headersList.set("content-type",l,!0)}return Promise.resolve(s)}case"data:":{let n=pu(t),i=tze(n);if(i==="failure")return Promise.resolve(an("failed to fetch the data URL"));let s=rze(i.mimeType);return Promise.resolve(JD({statusText:"OK",headersList:[["content-type",{name:"Content-Type",value:s}]],body:a3(i.body)[0]}))}case"file:":return Promise.resolve(an("not implemented... yet..."));case"http:":case"https:":return Moe(e).catch(n=>an(n));default:return Promise.resolve(an("unknown scheme"))}}function dze(e,t){e.request.done=!0,e.processResponseDone!=null&&queueMicrotask(()=>e.processResponseDone(t))}function n3(e,t){let r=e.timingInfo,n=()=>{let s=Date.now();e.request.destination==="document"&&(e.controller.fullTimingInfo=r),e.controller.reportTimingSteps=()=>{if(e.request.url.protocol!=="https:")return;r.endTime=s;let a=t.cacheState,l=t.bodyInfo;t.timingAllowPassed||(r=s3(r),a="");let c=0;if(e.request.mode!=="navigator"||!t.hasCrossOriginRedirects){c=t.status;let u=WKe(t.headersList);u!=="failure"&&(l.contentType=nze(u))}e.request.initiatorType!=null&&Roe(r,e.request.url.href,e.request.initiatorType,globalThis,a,l,c)};let o=()=>{e.request.done=!0,e.processResponseEndOfBody!=null&&queueMicrotask(()=>e.processResponseEndOfBody(t)),e.request.initiatorType!=null&&e.controller.reportTimingSteps()};queueMicrotask(()=>o())};e.processResponse!=null&&queueMicrotask(()=>{e.processResponse(t),e.processResponse=null});let i=t.type==="error"?t:t.internalResponse??t;i.body==null?n():ZKe(i.body.stream,()=>{n()})}async function Moe(e){let t=e.request,r=null,n=null,i=e.timingInfo;if(t.serviceWorkers,r===null){if(t.redirect==="follow"&&(t.serviceWorkers="none"),n=r=await Qoe(e),t.responseTainting==="cors"&&TKe(t,r)==="failure")return an("cors failure");_Ke(t,r)==="failure"&&(t.timingAllowFailed=!0)}return(t.responseTainting==="opaque"||r.type==="opaque")&&RKe(t.origin,t.client,t.destination,n)==="blocked"?an("blocked"):(Boe.has(n.status)&&(t.redirect!=="manual"&&e.controller.connection.destroy(void 0,!1),t.redirect==="error"?r=an("unexpected redirect"):t.redirect==="manual"?r=n:t.redirect==="follow"?r=await fze(e,r):Qp(!1)),r.timingInfo=i,r)}function fze(e,t){let r=e.request,n=t.internalResponse?t.internalResponse:t,i;try{if(i=IKe(n,pu(r).hash),i==null)return t}catch(o){return Promise.resolve(an(o))}if(!o3(i))return Promise.resolve(an("URL scheme must be a HTTP(S) scheme"));if(r.redirectCount===20)return Promise.resolve(an("redirect count exceeded"));if(r.redirectCount+=1,r.mode==="cors"&&(i.username||i.password)&&!i3(r,i))return Promise.resolve(an('cross origin not allowed for request mode "cors"'));if(r.responseTainting==="cors"&&(i.username||i.password))return Promise.resolve(an('URL cannot contain credentials for request mode "cors"'));if(n.status!==303&&r.body!=null&&r.body.source==null)return Promise.resolve(an());if([301,302].includes(n.status)&&r.method==="POST"||n.status===303&&!aze.includes(r.method)){r.method="GET",r.body=null;for(let o of YKe)r.headersList.delete(o)}i3(pu(r),i)||(r.headersList.delete("authorization",!0),r.headersList.delete("proxy-authorization",!0),r.headersList.delete("cookie",!0),r.headersList.delete("host",!0)),r.body!=null&&(Qp(r.body.source!=null),r.body=a3(r.body.source)[0]);let s=e.timingInfo;return s.redirectEndTime=s.postRedirectStartTime=wb(e.crossOriginIsolatedCapability),s.redirectStartTime===0&&(s.redirectStartTime=s.startTime),r.urlList.push(i),SKe(r,n),Foe(e,!0)}async function Qoe(e,t=!1,r=!1){let n=e.request,i=null,s=null,o=null,a=null,l=!1;n.window==="no-window"&&n.redirect==="error"?(i=e,s=n):(s=CKe(n),i={...e},i.request=s);let c=n.credentials==="include"||n.credentials==="same-origin"&&n.responseTainting==="basic",u=s.body?s.body.length:null,f=null;if(s.body==null&&["POST","PUT"].includes(s.method)&&(f="0"),u!=null&&(f=jD(`${u}`)),f!=null&&s.headersList.append("content-length",f,!0),u!=null&&s.keepalive,s.referrer instanceof URL&&s.headersList.append("referer",jD(s.referrer.href),!0),wKe(s),DKe(s),s.headersList.contains("user-agent",!0)||s.headersList.append("user-agent",lze),s.cache==="default"&&(s.headersList.contains("if-modified-since",!0)||s.headersList.contains("if-none-match",!0)||s.headersList.contains("if-unmodified-since",!0)||s.headersList.contains("if-match",!0)||s.headersList.contains("if-range",!0))&&(s.cache="no-store"),s.cache==="no-cache"&&!s.preventNoCacheCacheControlHeaderModification&&!s.headersList.contains("cache-control",!0)&&s.headersList.append("cache-control","max-age=0",!0),(s.cache==="no-store"||s.cache==="reload")&&(s.headersList.contains("pragma",!0)||s.headersList.append("pragma","no-cache",!0),s.headersList.contains("cache-control",!0)||s.headersList.append("cache-control","no-cache",!0)),s.headersList.contains("range",!0)&&s.headersList.append("accept-encoding","identity",!0),s.headersList.contains("accept-encoding",!0)||(UKe(pu(s))?s.headersList.append("accept-encoding","br, gzip, deflate",!0):s.headersList.append("accept-encoding","gzip, deflate",!0)),s.headersList.delete("host",!0),a==null&&(s.cache="no-store"),s.cache!=="no-store"&&s.cache,o==null){if(s.cache==="only-if-cached")return an("only if cached");let p=await hze(i,c,r);!$Ke.has(s.method)&&p.status>=200&&p.status<=399,l&&p.status,o==null&&(o=p)}if(o.urlList=[...s.urlList],s.headersList.contains("range",!0)&&(o.rangeRequested=!0),o.requestIncludesCredentials=c,o.status===407)return n.window==="no-window"?an():Mp(e)?zD(e):an("proxy authentication required");if(o.status===421&&!r&&(n.body==null||n.body.source!=null)){if(Mp(e))return zD(e);e.controller.connection.destroy(),o=await Qoe(e,t,!0)}return o}async function hze(e,t=!1,r=!1){Qp(!e.controller.connection||e.controller.connection.destroyed),e.controller.connection={abort:null,destroyed:!1,destroy(A,y=!0){this.destroyed||(this.destroyed=!0,y&&this.abort?.(A??new DOMException("The operation was aborted.","AbortError")))}};let n=e.request,i=null,s=e.timingInfo;null==null&&(n.cache="no-store");let a=r?"yes":"no";n.mode;let l=null;if(n.body==null&&e.processRequestEndOfBody)queueMicrotask(()=>e.processRequestEndOfBody());else if(n.body!=null){let A=async function*(v){Mp(e)||(yield v,e.processRequestBodyChunkLength?.(v.byteLength))},y=()=>{Mp(e)||e.processRequestEndOfBody&&e.processRequestEndOfBody()},C=v=>{Mp(e)||(v.name==="AbortError"?e.controller.abort():e.controller.terminate(v))};l=async function*(){try{for await(let v of n.body.stream)yield*A(v);y()}catch(v){C(v)}}()}try{let{body:A,status:y,statusText:C,headersList:v,socket:b}=await g({body:l});if(b)i=JD({status:y,statusText:C,headersList:v,socket:b});else{let w=A[Symbol.asyncIterator]();e.controller.next=()=>w.next(),i=JD({status:y,statusText:C,headersList:v})}}catch(A){return A.name==="AbortError"?(e.controller.connection.destroy(),zD(e,A)):an(A)}let c=async()=>{await e.controller.resume()},u=A=>{Mp(e)||e.controller.abort(A)},f=new ReadableStream({async start(A){e.controller.controller=A},async pull(A){await c(A)},async cancel(A){await u(A)},type:"bytes"});i.body={stream:f,source:null,length:null},e.controller.onAborted=p,e.controller.on("terminated",p),e.controller.resume=async()=>{for(;;){let A,y;try{let{done:v,value:b}=await e.controller.next();if(xoe(e))break;A=v?void 0:b}catch(v){e.controller.ended&&!s.encodedBodySize?A=void 0:(A=v,y=!0)}if(A===void 0){PKe(e.controller.controller),dze(e,i);return}if(s.decodedBodySize+=A?.byteLength??0,y){e.controller.terminate(A);return}let C=new Uint8Array(A);if(C.byteLength&&e.controller.controller.enqueue(C),eze(f)){e.controller.terminate();return}if(e.controller.controller.desiredSize<=0)return}};function p(A){xoe(e)?(i.aborted=!0,ZD(f)&&e.controller.controller.error(e.controller.serializedAbortReason)):ZD(f)&&e.controller.controller.error(new TypeError("terminated",{cause:QKe(A)?A:void 0})),e.controller.connection.destroy()}return i;function g({body:A}){let y=pu(n),C=e.controller.dispatcher;return new Promise((v,b)=>C.dispatch({path:y.pathname+y.search,origin:y.origin,method:n.method,body:C.isMockActive?n.body&&(n.body.source||n.body.stream):A,headers:n.headersList.entries,maxRedirections:0,upgrade:n.mode==="websocket"?"websocket":void 0},{body:null,abort:null,onConnect(w){let{connection:B}=e.controller;s.finalConnectionTimingInfo=OKe(void 0,s.postRedirectStartTime,e.crossOriginIsolatedCapability),B.destroyed?w(new DOMException("The operation was aborted.","AbortError")):(e.controller.on("terminated",w),this.abort=B.abort=w),s.finalNetworkRequestStartTime=wb(e.crossOriginIsolatedCapability)},onResponseStarted(){s.finalNetworkResponseStartTime=wb(e.crossOriginIsolatedCapability)},onHeaders(w,B,F,Q){if(w<200)return;let W=[],Z="",$=new boe;for(let N=0;N<B.length;N+=2)$.append(woe(B[N]),B[N+1].toString("latin1"),!0);let ee=$.get("content-encoding",!0);ee&&(W=ee.toLowerCase().split(",").map(N=>N.trim())),Z=$.get("location",!0),this.body=new JKe({read:F});let U=[],ge=Z&&n.redirect==="follow"&&Boe.has(w);if(W.length!==0&&n.method!=="HEAD"&&n.method!=="CONNECT"&&!Doe.includes(w)&&!ge)for(let N=W.length-1;N>=0;--N){let se=W[N];if(se==="x-gzip"||se==="gzip")U.push(Ah.createGunzip({flush:Ah.constants.Z_SYNC_FLUSH,finishFlush:Ah.constants.Z_SYNC_FLUSH}));else if(se==="deflate")U.push(HKe({flush:Ah.constants.Z_SYNC_FLUSH,finishFlush:Ah.constants.Z_SYNC_FLUSH}));else if(se==="br")U.push(Ah.createBrotliDecompress({flush:Ah.constants.BROTLI_OPERATION_FLUSH,finishFlush:Ah.constants.BROTLI_OPERATION_FLUSH}));else{U.length=0;break}}let Se=this.onError.bind(this);return v({status:w,statusText:Q,headersList:$,body:U.length?jKe(this.body,...U,N=>{N&&this.onError(N)}).on("error",Se):this.body.on("error",Se)}),!0},onData(w){if(e.controller.dump)return;let B=w;return s.encodedBodySize+=B.byteLength,this.body.push(B)},onComplete(){this.abort&&e.controller.off("terminated",this.abort),e.controller.onAborted&&e.controller.off("terminated",e.controller.onAborted),e.controller.ended=!0,this.body.push(null)},onError(w){this.abort&&e.controller.off("terminated",this.abort),this.body?.destroy(w),e.controller.terminate(w),b(w)},onUpgrade(w,B,F){if(w!==101)return;let Q=new boe;for(let W=0;W<B.length;W+=2)Q.append(woe(B[W]),B[W+1].toString("latin1"),!0);return v({status:w,statusText:oze[w],headersList:Q,socket:F}),!0}}))}}Noe.exports={fetch:uze,Fetch:XD,fetching:koe,finalizeAndReportTiming:Toe}});var l3=x((GBt,Poe)=>{"use strict";Poe.exports={kState:Symbol("FileReader state"),kResult:Symbol("FileReader result"),kError:Symbol("FileReader error"),kLastProgressEventFired:Symbol("FileReader last progress event fired timestamp"),kEvents:Symbol("FileReader events"),kAborted:Symbol("FileReader aborted")}});var Uoe=x(($Bt,Loe)=>{"use strict";var{webidl:Ba}=_s(),eT=Symbol("ProgressEvent state"),c3=class e extends Event{constructor(t,r={}){t=Ba.converters.DOMString(t,"ProgressEvent constructor","type"),r=Ba.converters.ProgressEventInit(r??{}),super(t,r),this[eT]={lengthComputable:r.lengthComputable,loaded:r.loaded,total:r.total}}get lengthComputable(){return Ba.brandCheck(this,e),this[eT].lengthComputable}get loaded(){return Ba.brandCheck(this,e),this[eT].loaded}get total(){return Ba.brandCheck(this,e),this[eT].total}};Ba.converters.ProgressEventInit=Ba.dictionaryConverter([{key:"lengthComputable",converter:Ba.converters.boolean,defaultValue:()=>!1},{key:"loaded",converter:Ba.converters["unsigned long long"],defaultValue:()=>0},{key:"total",converter:Ba.converters["unsigned long long"],defaultValue:()=>0},{key:"bubbles",converter:Ba.converters.boolean,defaultValue:()=>!1},{key:"cancelable",converter:Ba.converters.boolean,defaultValue:()=>!1},{key:"composed",converter:Ba.converters.boolean,defaultValue:()=>!1}]);Loe.exports={ProgressEvent:c3}});var qoe=x((YBt,Ooe)=>{"use strict";function gze(e){if(!e)return"failure";switch(e.trim().toLowerCase()){case"unicode-1-1-utf-8":case"unicode11utf8":case"unicode20utf8":case"utf-8":case"utf8":case"x-unicode20utf8":return"UTF-8";case"866":case"cp866":case"csibm866":case"ibm866":return"IBM866";case"csisolatin2":case"iso-8859-2":case"iso-ir-101":case"iso8859-2":case"iso88592":case"iso_8859-2":case"iso_8859-2:1987":case"l2":case"latin2":return"ISO-8859-2";case"csisolatin3":case"iso-8859-3":case"iso-ir-109":case"iso8859-3":case"iso88593":case"iso_8859-3":case"iso_8859-3:1988":case"l3":case"latin3":return"ISO-8859-3";case"csisolatin4":case"iso-8859-4":case"iso-ir-110":case"iso8859-4":case"iso88594":case"iso_8859-4":case"iso_8859-4:1988":case"l4":case"latin4":return"ISO-8859-4";case"csisolatincyrillic":case"cyrillic":case"iso-8859-5":case"iso-ir-144":case"iso8859-5":case"iso88595":case"iso_8859-5":case"iso_8859-5:1988":return"ISO-8859-5";case"arabic":case"asmo-708":case"csiso88596e":case"csiso88596i":case"csisolatinarabic":case"ecma-114":case"iso-8859-6":case"iso-8859-6-e":case"iso-8859-6-i":case"iso-ir-127":case"iso8859-6":case"iso88596":case"iso_8859-6":case"iso_8859-6:1987":return"ISO-8859-6";case"csisolatingreek":case"ecma-118":case"elot_928":case"greek":case"greek8":case"iso-8859-7":case"iso-ir-126":case"iso8859-7":case"iso88597":case"iso_8859-7":case"iso_8859-7:1987":case"sun_eu_greek":return"ISO-8859-7";case"csiso88598e":case"csisolatinhebrew":case"hebrew":case"iso-8859-8":case"iso-8859-8-e":case"iso-ir-138":case"iso8859-8":case"iso88598":case"iso_8859-8":case"iso_8859-8:1988":case"visual":return"ISO-8859-8";case"csiso88598i":case"iso-8859-8-i":case"logical":return"ISO-8859-8-I";case"csisolatin6":case"iso-8859-10":case"iso-ir-157":case"iso8859-10":case"iso885910":case"l6":case"latin6":return"ISO-8859-10";case"iso-8859-13":case"iso8859-13":case"iso885913":return"ISO-8859-13";case"iso-8859-14":case"iso8859-14":case"iso885914":return"ISO-8859-14";case"csisolatin9":case"iso-8859-15":case"iso8859-15":case"iso885915":case"iso_8859-15":case"l9":return"ISO-8859-15";case"iso-8859-16":return"ISO-8859-16";case"cskoi8r":case"koi":case"koi8":case"koi8-r":case"koi8_r":return"KOI8-R";case"koi8-ru":case"koi8-u":return"KOI8-U";case"csmacintosh":case"mac":case"macintosh":case"x-mac-roman":return"macintosh";case"iso-8859-11":case"iso8859-11":case"iso885911":case"tis-620":case"windows-874":return"windows-874";case"cp1250":case"windows-1250":case"x-cp1250":return"windows-1250";case"cp1251":case"windows-1251":case"x-cp1251":return"windows-1251";case"ansi_x3.4-1968":case"ascii":case"cp1252":case"cp819":case"csisolatin1":case"ibm819":case"iso-8859-1":case"iso-ir-100":case"iso8859-1":case"iso88591":case"iso_8859-1":case"iso_8859-1:1987":case"l1":case"latin1":case"us-ascii":case"windows-1252":case"x-cp1252":return"windows-1252";case"cp1253":case"windows-1253":case"x-cp1253":return"windows-1253";case"cp1254":case"csisolatin5":case"iso-8859-9":case"iso-ir-148":case"iso8859-9":case"iso88599":case"iso_8859-9":case"iso_8859-9:1989":case"l5":case"latin5":case"windows-1254":case"x-cp1254":return"windows-1254";case"cp1255":case"windows-1255":case"x-cp1255":return"windows-1255";case"cp1256":case"windows-1256":case"x-cp1256":return"windows-1256";case"cp1257":case"windows-1257":case"x-cp1257":return"windows-1257";case"cp1258":case"windows-1258":case"x-cp1258":return"windows-1258";case"x-mac-cyrillic":case"x-mac-ukrainian":return"x-mac-cyrillic";case"chinese":case"csgb2312":case"csiso58gb231280":case"gb2312":case"gb_2312":case"gb_2312-80":case"gbk":case"iso-ir-58":case"x-gbk":return"GBK";case"gb18030":return"gb18030";case"big5":case"big5-hkscs":case"cn-big5":case"csbig5":case"x-x-big5":return"Big5";case"cseucpkdfmtjapanese":case"euc-jp":case"x-euc-jp":return"EUC-JP";case"csiso2022jp":case"iso-2022-jp":return"ISO-2022-JP";case"csshiftjis":case"ms932":case"ms_kanji":case"shift-jis":case"shift_jis":case"sjis":case"windows-31j":case"x-sjis":return"Shift_JIS";case"cseuckr":case"csksc56011987":case"euc-kr":case"iso-ir-149":case"korean":case"ks_c_5601-1987":case"ks_c_5601-1989":case"ksc5601":case"ksc_5601":case"windows-949":return"EUC-KR";case"csiso2022kr":case"hz-gb-2312":case"iso-2022-cn":case"iso-2022-cn-ext":case"iso-2022-kr":case"replacement":return"replacement";case"unicodefffe":case"utf-16be":return"UTF-16BE";case"csunicode":case"iso-10646-ucs-2":case"ucs-2":case"unicode":case"unicodefeff":case"utf-16":case"utf-16le":return"UTF-16LE";case"x-user-defined":return"x-user-defined";default:return"failure"}}Ooe.exports={getEncoding:gze}});var zoe=x((KBt,Koe)=>{"use strict";var{kState:q0,kError:u3,kResult:Voe,kAborted:Sb,kLastProgressEventFired:d3}=l3(),{ProgressEvent:pze}=Uoe(),{getEncoding:Hoe}=qoe(),{serializeAMimeType:Aze,parseMIMEType:Woe}=Vo(),{types:mze}=require("util"),{StringDecoder:Goe}=require("string_decoder"),{btoa:$oe}=require("buffer"),yze={enumerable:!0,writable:!1,configurable:!1};function Cze(e,t,r,n){if(e[q0]==="loading")throw new DOMException("Invalid state","InvalidStateError");e[q0]="loading",e[Voe]=null,e[u3]=null;let s=t.stream().getReader(),o=[],a=s.read(),l=!0;(async()=>{for(;!e[Sb];)try{let{done:c,value:u}=await a;if(l&&!e[Sb]&&queueMicrotask(()=>{mh("loadstart",e)}),l=!1,!c&&mze.isUint8Array(u))o.push(u),(e[d3]===void 0||Date.now()-e[d3]>=50)&&!e[Sb]&&(e[d3]=Date.now(),queueMicrotask(()=>{mh("progress",e)})),a=s.read();else if(c){queueMicrotask(()=>{e[q0]="done";try{let f=vze(o,r,t.type,n);if(e[Sb])return;e[Voe]=f,mh("load",e)}catch(f){e[u3]=f,mh("error",e)}e[q0]!=="loading"&&mh("loadend",e)});break}}catch(c){if(e[Sb])return;queueMicrotask(()=>{e[q0]="done",e[u3]=c,mh("error",e),e[q0]!=="loading"&&mh("loadend",e)});break}})()}function mh(e,t){let r=new pze(e,{bubbles:!1,cancelable:!1});t.dispatchEvent(r)}function vze(e,t,r,n){switch(t){case"DataURL":{let i="data:",s=Woe(r||"application/octet-stream");s!=="failure"&&(i+=Aze(s)),i+=";base64,";let o=new Goe("latin1");for(let a of e)i+=$oe(o.write(a));return i+=$oe(o.end()),i}case"Text":{let i="failure";if(n&&(i=Hoe(n)),i==="failure"&&r){let s=Woe(r);s!=="failure"&&(i=Hoe(s.parameters.get("charset")))}return i==="failure"&&(i="UTF-8"),Eze(e,i)}case"ArrayBuffer":return Yoe(e).buffer;case"BinaryString":{let i="",s=new Goe("latin1");for(let o of e)i+=s.write(o);return i+=s.end(),i}}}function Eze(e,t){let r=Yoe(e),n=bze(r),i=0;n!==null&&(t=n,i=n==="UTF-8"?3:2);let s=r.slice(i);return new TextDecoder(t).decode(s)}function bze(e){let[t,r,n]=e;return t===239&&r===187&&n===191?"UTF-8":t===254&&r===255?"UTF-16BE":t===255&&r===254?"UTF-16LE":null}function Yoe(e){let t=e.reduce((n,i)=>n+i.byteLength,0),r=0;return e.reduce((n,i)=>(n.set(i,r),r+=i.byteLength,n),new Uint8Array(t))}Koe.exports={staticPropertyDescriptors:yze,readOperation:Cze,fireAProgressEvent:mh}});var Xoe=x((zBt,Zoe)=>{"use strict";var{staticPropertyDescriptors:V0,readOperation:tT,fireAProgressEvent:Joe}=zoe(),{kState:Np,kError:joe,kResult:rT,kEvents:Yr,kAborted:xze}=l3(),{webidl:un}=_s(),{kEnumerableProperty:Go}=rr(),Cc=class e extends EventTarget{constructor(){super(),this[Np]="empty",this[rT]=null,this[joe]=null,this[Yr]={loadend:null,error:null,abort:null,load:null,progress:null,loadstart:null}}readAsArrayBuffer(t){un.brandCheck(this,e),un.argumentLengthCheck(arguments,1,"FileReader.readAsArrayBuffer"),t=un.converters.Blob(t,{strict:!1}),tT(this,t,"ArrayBuffer")}readAsBinaryString(t){un.brandCheck(this,e),un.argumentLengthCheck(arguments,1,"FileReader.readAsBinaryString"),t=un.converters.Blob(t,{strict:!1}),tT(this,t,"BinaryString")}readAsText(t,r=void 0){un.brandCheck(this,e),un.argumentLengthCheck(arguments,1,"FileReader.readAsText"),t=un.converters.Blob(t,{strict:!1}),r!==void 0&&(r=un.converters.DOMString(r,"FileReader.readAsText","encoding")),tT(this,t,"Text",r)}readAsDataURL(t){un.brandCheck(this,e),un.argumentLengthCheck(arguments,1,"FileReader.readAsDataURL"),t=un.converters.Blob(t,{strict:!1}),tT(this,t,"DataURL")}abort(){if(this[Np]==="empty"||this[Np]==="done"){this[rT]=null;return}this[Np]==="loading"&&(this[Np]="done",this[rT]=null),this[xze]=!0,Joe("abort",this),this[Np]!=="loading"&&Joe("loadend",this)}get readyState(){switch(un.brandCheck(this,e),this[Np]){case"empty":return this.EMPTY;case"loading":return this.LOADING;case"done":return this.DONE}}get result(){return un.brandCheck(this,e),this[rT]}get error(){return un.brandCheck(this,e),this[joe]}get onloadend(){return un.brandCheck(this,e),this[Yr].loadend}set onloadend(t){un.brandCheck(this,e),this[Yr].loadend&&this.removeEventListener("loadend",this[Yr].loadend),typeof t=="function"?(this[Yr].loadend=t,this.addEventListener("loadend",t)):this[Yr].loadend=null}get onerror(){return un.brandCheck(this,e),this[Yr].error}set onerror(t){un.brandCheck(this,e),this[Yr].error&&this.removeEventListener("error",this[Yr].error),typeof t=="function"?(this[Yr].error=t,this.addEventListener("error",t)):this[Yr].error=null}get onloadstart(){return un.brandCheck(this,e),this[Yr].loadstart}set onloadstart(t){un.brandCheck(this,e),this[Yr].loadstart&&this.removeEventListener("loadstart",this[Yr].loadstart),typeof t=="function"?(this[Yr].loadstart=t,this.addEventListener("loadstart",t)):this[Yr].loadstart=null}get onprogress(){return un.brandCheck(this,e),this[Yr].progress}set onprogress(t){un.brandCheck(this,e),this[Yr].progress&&this.removeEventListener("progress",this[Yr].progress),typeof t=="function"?(this[Yr].progress=t,this.addEventListener("progress",t)):this[Yr].progress=null}get onload(){return un.brandCheck(this,e),this[Yr].load}set onload(t){un.brandCheck(this,e),this[Yr].load&&this.removeEventListener("load",this[Yr].load),typeof t=="function"?(this[Yr].load=t,this.addEventListener("load",t)):this[Yr].load=null}get onabort(){return un.brandCheck(this,e),this[Yr].abort}set onabort(t){un.brandCheck(this,e),this[Yr].abort&&this.removeEventListener("abort",this[Yr].abort),typeof t=="function"?(this[Yr].abort=t,this.addEventListener("abort",t)):this[Yr].abort=null}};Cc.EMPTY=Cc.prototype.EMPTY=0;Cc.LOADING=Cc.prototype.LOADING=1;Cc.DONE=Cc.prototype.DONE=2;Object.defineProperties(Cc.prototype,{EMPTY:V0,LOADING:V0,DONE:V0,readAsArrayBuffer:Go,readAsBinaryString:Go,readAsText:Go,readAsDataURL:Go,abort:Go,readyState:Go,result:Go,error:Go,onloadstart:Go,onprogress:Go,onload:Go,onabort:Go,onerror:Go,onloadend:Go,[Symbol.toStringTag]:{value:"FileReader",writable:!1,enumerable:!1,configurable:!0}});Object.defineProperties(Cc,{EMPTY:V0,LOADING:V0,DONE:V0});Zoe.exports={FileReader:Cc}});var nT=x((JBt,eae)=>{"use strict";eae.exports={kConstruct:Un().kConstruct}});var nae=x((jBt,rae)=>{"use strict";var _ze=require("assert"),{URLSerializer:tae}=Vo(),{isValidHeaderName:wze}=ba();function Ize(e,t,r=!1){let n=tae(e,r),i=tae(t,r);return n===i}function Sze(e){_ze(e!==null);let t=[];for(let r of e.split(","))r=r.trim(),wze(r)&&t.push(r);return t}rae.exports={urlEquals:Ize,getFieldValues:Sze}});var oae=x((ZBt,sae)=>{"use strict";var{kConstruct:Bze}=nT(),{urlEquals:Dze,getFieldValues:f3}=nae(),{kEnumerableProperty:Pp,isDisturbed:Tze}=rr(),{webidl:tt}=_s(),{Response:Rze,cloneResponse:kze,fromInnerResponse:Fze}=_b(),{Request:Vd,fromInnerRequest:Mze}=O0(),{kState:vc}=ih(),{fetching:Qze}=Ib(),{urlIsHttpHttpsScheme:iT,createDeferredPromise:H0,readAllBytes:Nze}=ba(),h3=require("assert"),sT=class e{#e;constructor(){arguments[0]!==Bze&&tt.illegalConstructor(),tt.util.markAsUncloneable(this),this.#e=arguments[1]}async match(t,r={}){tt.brandCheck(this,e);let n="Cache.match";tt.argumentLengthCheck(arguments,1,n),t=tt.converters.RequestInfo(t,n,"request"),r=tt.converters.CacheQueryOptions(r,n,"options");let i=this.#r(t,r,1);if(i.length!==0)return i[0]}async matchAll(t=void 0,r={}){tt.brandCheck(this,e);let n="Cache.matchAll";return t!==void 0&&(t=tt.converters.RequestInfo(t,n,"request")),r=tt.converters.CacheQueryOptions(r,n,"options"),this.#r(t,r)}async add(t){tt.brandCheck(this,e);let r="Cache.add";tt.argumentLengthCheck(arguments,1,r),t=tt.converters.RequestInfo(t,r,"request");let n=[t];return await this.addAll(n)}async addAll(t){tt.brandCheck(this,e);let r="Cache.addAll";tt.argumentLengthCheck(arguments,1,r);let n=[],i=[];for(let p of t){if(p===void 0)throw tt.errors.conversionFailed({prefix:r,argument:"Argument 1",types:["undefined is not allowed"]});if(p=tt.converters.RequestInfo(p),typeof p=="string")continue;let g=p[vc];if(!iT(g.url)||g.method!=="GET")throw tt.errors.exception({header:r,message:"Expected http/s scheme when method is not GET."})}let s=[];for(let p of t){let g=new Vd(p)[vc];if(!iT(g.url))throw tt.errors.exception({header:r,message:"Expected http/s scheme."});g.initiator="fetch",g.destination="subresource",i.push(g);let A=H0();s.push(Qze({request:g,processResponse(y){if(y.type==="error"||y.status===206||y.status<200||y.status>299)A.reject(tt.errors.exception({header:"Cache.addAll",message:"Received an invalid status code or the request failed."}));else if(y.headersList.contains("vary")){let C=f3(y.headersList.get("vary"));for(let v of C)if(v==="*"){A.reject(tt.errors.exception({header:"Cache.addAll",message:"invalid vary field value"}));for(let b of s)b.abort();return}}},processResponseEndOfBody(y){if(y.aborted){A.reject(new DOMException("aborted","AbortError"));return}A.resolve(y)}})),n.push(A.promise)}let a=await Promise.all(n),l=[],c=0;for(let p of a){let g={type:"put",request:i[c],response:p};l.push(g),c++}let u=H0(),f=null;try{this.#t(l)}catch(p){f=p}return queueMicrotask(()=>{f===null?u.resolve(void 0):u.reject(f)}),u.promise}async put(t,r){tt.brandCheck(this,e);let n="Cache.put";tt.argumentLengthCheck(arguments,2,n),t=tt.converters.RequestInfo(t,n,"request"),r=tt.converters.Response(r,n,"response");let i=null;if(t instanceof Vd?i=t[vc]:i=new Vd(t)[vc],!iT(i.url)||i.method!=="GET")throw tt.errors.exception({header:n,message:"Expected an http/s scheme when method is not GET"});let s=r[vc];if(s.status===206)throw tt.errors.exception({header:n,message:"Got 206 status"});if(s.headersList.contains("vary")){let g=f3(s.headersList.get("vary"));for(let A of g)if(A==="*")throw tt.errors.exception({header:n,message:"Got * vary field value"})}if(s.body&&(Tze(s.body.stream)||s.body.stream.locked))throw tt.errors.exception({header:n,message:"Response body is locked or disturbed"});let o=kze(s),a=H0();if(s.body!=null){let A=s.body.stream.getReader();Nze(A).then(a.resolve,a.reject)}else a.resolve(void 0);let l=[],c={type:"put",request:i,response:o};l.push(c);let u=await a.promise;o.body!=null&&(o.body.source=u);let f=H0(),p=null;try{this.#t(l)}catch(g){p=g}return queueMicrotask(()=>{p===null?f.resolve():f.reject(p)}),f.promise}async delete(t,r={}){tt.brandCheck(this,e);let n="Cache.delete";tt.argumentLengthCheck(arguments,1,n),t=tt.converters.RequestInfo(t,n,"request"),r=tt.converters.CacheQueryOptions(r,n,"options");let i=null;if(t instanceof Vd){if(i=t[vc],i.method!=="GET"&&!r.ignoreMethod)return!1}else h3(typeof t=="string"),i=new Vd(t)[vc];let s=[],o={type:"delete",request:i,options:r};s.push(o);let a=H0(),l=null,c;try{c=this.#t(s)}catch(u){l=u}return queueMicrotask(()=>{l===null?a.resolve(!!c?.length):a.reject(l)}),a.promise}async keys(t=void 0,r={}){tt.brandCheck(this,e);let n="Cache.keys";t!==void 0&&(t=tt.converters.RequestInfo(t,n,"request")),r=tt.converters.CacheQueryOptions(r,n,"options");let i=null;if(t!==void 0)if(t instanceof Vd){if(i=t[vc],i.method!=="GET"&&!r.ignoreMethod)return[]}else typeof t=="string"&&(i=new Vd(t)[vc]);let s=H0(),o=[];if(t===void 0)for(let a of this.#e)o.push(a[0]);else{let a=this.#i(i,r);for(let l of a)o.push(l[0])}return queueMicrotask(()=>{let a=[];for(let l of o){let c=Mze(l,new AbortController().signal,"immutable");a.push(c)}s.resolve(Object.freeze(a))}),s.promise}#t(t){let r=this.#e,n=[...r],i=[],s=[];try{for(let o of t){if(o.type!=="delete"&&o.type!=="put")throw tt.errors.exception({header:"Cache.#batchCacheOperations",message:'operation type does not match "delete" or "put"'});if(o.type==="delete"&&o.response!=null)throw tt.errors.exception({header:"Cache.#batchCacheOperations",message:"delete operation should not have an associated response"});if(this.#i(o.request,o.options,i).length)throw new DOMException("???","InvalidStateError");let a;if(o.type==="delete"){if(a=this.#i(o.request,o.options),a.length===0)return[];for(let l of a){let c=r.indexOf(l);h3(c!==-1),r.splice(c,1)}}else if(o.type==="put"){if(o.response==null)throw tt.errors.exception({header:"Cache.#batchCacheOperations",message:"put operation should have an associated response"});let l=o.request;if(!iT(l.url))throw tt.errors.exception({header:"Cache.#batchCacheOperations",message:"expected http or https scheme"});if(l.method!=="GET")throw tt.errors.exception({header:"Cache.#batchCacheOperations",message:"not get method"});if(o.options!=null)throw tt.errors.exception({header:"Cache.#batchCacheOperations",message:"options must not be defined"});a=this.#i(o.request);for(let c of a){let u=r.indexOf(c);h3(u!==-1),r.splice(u,1)}r.push([o.request,o.response]),i.push([o.request,o.response])}s.push([o.request,o.response])}return s}catch(o){throw this.#e.length=0,this.#e=n,o}}#i(t,r,n){let i=[],s=n??this.#e;for(let o of s){let[a,l]=o;this.#n(t,a,l,r)&&i.push(o)}return i}#n(t,r,n=null,i){let s=new URL(t.url),o=new URL(r.url);if(i?.ignoreSearch&&(o.search="",s.search=""),!Dze(s,o,!0))return!1;if(n==null||i?.ignoreVary||!n.headersList.contains("vary"))return!0;let a=f3(n.headersList.get("vary"));for(let l of a){if(l==="*")return!1;let c=r.headersList.get(l),u=t.headersList.get(l);if(c!==u)return!1}return!0}#r(t,r,n=1/0){let i=null;if(t!==void 0)if(t instanceof Vd){if(i=t[vc],i.method!=="GET"&&!r.ignoreMethod)return[]}else typeof t=="string"&&(i=new Vd(t)[vc]);let s=[];if(t===void 0)for(let a of this.#e)s.push(a[1]);else{let a=this.#i(i,r);for(let l of a)s.push(l[1])}let o=[];for(let a of s){let l=Fze(a,"immutable");if(o.push(l.clone()),o.length>=n)break}return Object.freeze(o)}};Object.defineProperties(sT.prototype,{[Symbol.toStringTag]:{value:"Cache",configurable:!0},match:Pp,matchAll:Pp,add:Pp,addAll:Pp,put:Pp,delete:Pp,keys:Pp});var iae=[{key:"ignoreSearch",converter:tt.converters.boolean,defaultValue:()=>!1},{key:"ignoreMethod",converter:tt.converters.boolean,defaultValue:()=>!1},{key:"ignoreVary",converter:tt.converters.boolean,defaultValue:()=>!1}];tt.converters.CacheQueryOptions=tt.dictionaryConverter(iae);tt.converters.MultiCacheQueryOptions=tt.dictionaryConverter([...iae,{key:"cacheName",converter:tt.converters.DOMString}]);tt.converters.Response=tt.interfaceConverter(Rze);tt.converters["sequence<RequestInfo>"]=tt.sequenceConverter(tt.converters.RequestInfo);sae.exports={Cache:sT}});var lae=x((XBt,aae)=>{"use strict";var{kConstruct:Bb}=nT(),{Cache:oT}=oae(),{webidl:Ys}=_s(),{kEnumerableProperty:Db}=rr(),aT=class e{#e=new Map;constructor(){arguments[0]!==Bb&&Ys.illegalConstructor(),Ys.util.markAsUncloneable(this)}async match(t,r={}){if(Ys.brandCheck(this,e),Ys.argumentLengthCheck(arguments,1,"CacheStorage.match"),t=Ys.converters.RequestInfo(t),r=Ys.converters.MultiCacheQueryOptions(r),r.cacheName!=null){if(this.#e.has(r.cacheName)){let n=this.#e.get(r.cacheName);return await new oT(Bb,n).match(t,r)}}else for(let n of this.#e.values()){let s=await new oT(Bb,n).match(t,r);if(s!==void 0)return s}}async has(t){Ys.brandCheck(this,e);let r="CacheStorage.has";return Ys.argumentLengthCheck(arguments,1,r),t=Ys.converters.DOMString(t,r,"cacheName"),this.#e.has(t)}async open(t){Ys.brandCheck(this,e);let r="CacheStorage.open";if(Ys.argumentLengthCheck(arguments,1,r),t=Ys.converters.DOMString(t,r,"cacheName"),this.#e.has(t)){let i=this.#e.get(t);return new oT(Bb,i)}let n=[];return this.#e.set(t,n),new oT(Bb,n)}async delete(t){Ys.brandCheck(this,e);let r="CacheStorage.delete";return Ys.argumentLengthCheck(arguments,1,r),t=Ys.converters.DOMString(t,r,"cacheName"),this.#e.delete(t)}async keys(){return Ys.brandCheck(this,e),[...this.#e.keys()]}};Object.defineProperties(aT.prototype,{[Symbol.toStringTag]:{value:"CacheStorage",configurable:!0},match:Db,has:Db,open:Db,delete:Db,keys:Db});aae.exports={CacheStorage:aT}});var uae=x((eDt,cae)=>{"use strict";cae.exports={maxAttributeValueSize:1024,maxNameValuePairSize:4096}});var g3=x((tDt,pae)=>{"use strict";function Pze(e){for(let t=0;t<e.length;++t){let r=e.charCodeAt(t);if(r>=0&&r<=8||r>=10&&r<=31||r===127)return!0}return!1}function dae(e){for(let t=0;t<e.length;++t){let r=e.charCodeAt(t);if(r<33||r>126||r===34||r===40||r===41||r===60||r===62||r===64||r===44||r===59||r===58||r===92||r===47||r===91||r===93||r===63||r===61||r===123||r===125)throw new Error("Invalid cookie name")}}function fae(e){let t=e.length,r=0;if(e[0]==='"'){if(t===1||e[t-1]!=='"')throw new Error("Invalid cookie value");--t,++r}for(;r<t;){let n=e.charCodeAt(r++);if(n<33||n>126||n===34||n===44||n===59||n===92)throw new Error("Invalid cookie value")}}function hae(e){for(let t=0;t<e.length;++t){let r=e.charCodeAt(t);if(r<32||r===127||r===59)throw new Error("Invalid cookie path")}}function Lze(e){if(e.startsWith("-")||e.endsWith(".")||e.endsWith("-"))throw new Error("Invalid cookie domain")}var Uze=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Oze=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],lT=Array(61).fill(0).map((e,t)=>t.toString().padStart(2,"0"));function gae(e){return typeof e=="number"&&(e=new Date(e)),`${Uze[e.getUTCDay()]}, ${lT[e.getUTCDate()]} ${Oze[e.getUTCMonth()]} ${e.getUTCFullYear()} ${lT[e.getUTCHours()]}:${lT[e.getUTCMinutes()]}:${lT[e.getUTCSeconds()]} GMT`}function qze(e){if(e<0)throw new Error("Invalid cookie max-age")}function Vze(e){if(e.name.length===0)return null;dae(e.name),fae(e.value);let t=[`${e.name}=${e.value}`];e.name.startsWith("__Secure-")&&(e.secure=!0),e.name.startsWith("__Host-")&&(e.secure=!0,e.domain=null,e.path="/"),e.secure&&t.push("Secure"),e.httpOnly&&t.push("HttpOnly"),typeof e.maxAge=="number"&&(qze(e.maxAge),t.push(`Max-Age=${e.maxAge}`)),e.domain&&(Lze(e.domain),t.push(`Domain=${e.domain}`)),e.path&&(hae(e.path),t.push(`Path=${e.path}`)),e.expires&&e.expires.toString()!=="Invalid Date"&&t.push(`Expires=${gae(e.expires)}`),e.sameSite&&t.push(`SameSite=${e.sameSite}`);for(let r of e.unparsed){if(!r.includes("="))throw new Error("Invalid unparsed");let[n,...i]=r.split("=");t.push(`${n.trim()}=${i.join("=")}`)}return t.join("; ")}pae.exports={isCTLExcludingHtab:Pze,validateCookieName:dae,validateCookiePath:hae,validateCookieValue:fae,toIMFDate:gae,stringify:Vze}});var mae=x((rDt,Aae)=>{"use strict";var{maxNameValuePairSize:Hze,maxAttributeValueSize:Wze}=uae(),{isCTLExcludingHtab:Gze}=g3(),{collectASequenceOfCodePointsFast:cT}=Vo(),$ze=require("assert");function Yze(e){if(Gze(e))return null;let t="",r="",n="",i="";if(e.includes(";")){let s={position:0};t=cT(";",e,s),r=e.slice(s.position)}else t=e;if(!t.includes("="))i=t;else{let s={position:0};n=cT("=",t,s),i=t.slice(s.position+1)}return n=n.trim(),i=i.trim(),n.length+i.length>Hze?null:{name:n,value:i,...W0(r)}}function W0(e,t={}){if(e.length===0)return t;$ze(e[0]===";"),e=e.slice(1);let r="";e.includes(";")?(r=cT(";",e,{position:0}),e=e.slice(r.length)):(r=e,e="");let n="",i="";if(r.includes("=")){let o={position:0};n=cT("=",r,o),i=r.slice(o.position+1)}else n=r;if(n=n.trim(),i=i.trim(),i.length>Wze)return W0(e,t);let s=n.toLowerCase();if(s==="expires"){let o=new Date(i);t.expires=o}else if(s==="max-age"){let o=i.charCodeAt(0);if((o<48||o>57)&&i[0]!=="-"||!/^\d+$/.test(i))return W0(e,t);let a=Number(i);t.maxAge=a}else if(s==="domain"){let o=i;o[0]==="."&&(o=o.slice(1)),o=o.toLowerCase(),t.domain=o}else if(s==="path"){let o="";i.length===0||i[0]!=="/"?o="/":o=i,t.path=o}else if(s==="secure")t.secure=!0;else if(s==="httponly")t.httpOnly=!0;else if(s==="samesite"){let o="Default",a=i.toLowerCase();a.includes("none")&&(o="None"),a.includes("strict")&&(o="Strict"),a.includes("lax")&&(o="Lax"),t.sameSite=o}else t.unparsed??=[],t.unparsed.push(`${n}=${i}`);return W0(e,t)}Aae.exports={parseSetCookie:Yze,parseUnparsedAttributes:W0}});var vae=x((nDt,Cae)=>{"use strict";var{parseSetCookie:Kze}=mae(),{stringify:zze}=g3(),{webidl:pr}=_s(),{Headers:uT}=kp();function Jze(e){pr.argumentLengthCheck(arguments,1,"getCookies"),pr.brandCheck(e,uT,{strict:!1});let t=e.get("cookie"),r={};if(!t)return r;for(let n of t.split(";")){let[i,...s]=n.split("=");r[i.trim()]=s.join("=")}return r}function jze(e,t,r){pr.brandCheck(e,uT,{strict:!1});let n="deleteCookie";pr.argumentLengthCheck(arguments,2,n),t=pr.converters.DOMString(t,n,"name"),r=pr.converters.DeleteCookieAttributes(r),yae(e,{name:t,value:"",expires:new Date(0),...r})}function Zze(e){pr.argumentLengthCheck(arguments,1,"getSetCookies"),pr.brandCheck(e,uT,{strict:!1});let t=e.getSetCookie();return t?t.map(r=>Kze(r)):[]}function yae(e,t){pr.argumentLengthCheck(arguments,2,"setCookie"),pr.brandCheck(e,uT,{strict:!1}),t=pr.converters.Cookie(t);let r=zze(t);r&&e.append("Set-Cookie",r)}pr.converters.DeleteCookieAttributes=pr.dictionaryConverter([{converter:pr.nullableConverter(pr.converters.DOMString),key:"path",defaultValue:()=>null},{converter:pr.nullableConverter(pr.converters.DOMString),key:"domain",defaultValue:()=>null}]);pr.converters.Cookie=pr.dictionaryConverter([{converter:pr.converters.DOMString,key:"name"},{converter:pr.converters.DOMString,key:"value"},{converter:pr.nullableConverter(e=>typeof e=="number"?pr.converters["unsigned long long"](e):new Date(e)),key:"expires",defaultValue:()=>null},{converter:pr.nullableConverter(pr.converters["long long"]),key:"maxAge",defaultValue:()=>null},{converter:pr.nullableConverter(pr.converters.DOMString),key:"domain",defaultValue:()=>null},{converter:pr.nullableConverter(pr.converters.DOMString),key:"path",defaultValue:()=>null},{converter:pr.nullableConverter(pr.converters.boolean),key:"secure",defaultValue:()=>null},{converter:pr.nullableConverter(pr.converters.boolean),key:"httpOnly",defaultValue:()=>null},{converter:pr.converters.USVString,key:"sameSite",allowedValues:["Strict","Lax","None"]},{converter:pr.sequenceConverter(pr.converters.DOMString),key:"unparsed",defaultValue:()=>new Array(0)}]);Cae.exports={getCookies:Jze,deleteCookie:jze,getSetCookies:Zze,setCookie:yae}});var $0=x((iDt,bae)=>{"use strict";var{webidl:et}=_s(),{kEnumerableProperty:$o}=rr(),{kConstruct:Eae}=Un(),{MessagePort:Xze}=require("worker_threads"),G0=class e extends Event{#e;constructor(t,r={}){if(t===Eae){super(arguments[1],arguments[2]),et.util.markAsUncloneable(this);return}let n="MessageEvent constructor";et.argumentLengthCheck(arguments,1,n),t=et.converters.DOMString(t,n,"type"),r=et.converters.MessageEventInit(r,n,"eventInitDict"),super(t,r),this.#e=r,et.util.markAsUncloneable(this)}get data(){return et.brandCheck(this,e),this.#e.data}get origin(){return et.brandCheck(this,e),this.#e.origin}get lastEventId(){return et.brandCheck(this,e),this.#e.lastEventId}get source(){return et.brandCheck(this,e),this.#e.source}get ports(){return et.brandCheck(this,e),Object.isFrozen(this.#e.ports)||Object.freeze(this.#e.ports),this.#e.ports}initMessageEvent(t,r=!1,n=!1,i=null,s="",o="",a=null,l=[]){return et.brandCheck(this,e),et.argumentLengthCheck(arguments,1,"MessageEvent.initMessageEvent"),new e(t,{bubbles:r,cancelable:n,data:i,origin:s,lastEventId:o,source:a,ports:l})}static createFastMessageEvent(t,r){let n=new e(Eae,t,r);return n.#e=r,n.#e.data??=null,n.#e.origin??="",n.#e.lastEventId??="",n.#e.source??=null,n.#e.ports??=[],n}},{createFastMessageEvent:eJe}=G0;delete G0.createFastMessageEvent;var dT=class e extends Event{#e;constructor(t,r={}){let n="CloseEvent constructor";et.argumentLengthCheck(arguments,1,n),t=et.converters.DOMString(t,n,"type"),r=et.converters.CloseEventInit(r),super(t,r),this.#e=r,et.util.markAsUncloneable(this)}get wasClean(){return et.brandCheck(this,e),this.#e.wasClean}get code(){return et.brandCheck(this,e),this.#e.code}get reason(){return et.brandCheck(this,e),this.#e.reason}},fT=class e extends Event{#e;constructor(t,r){let n="ErrorEvent constructor";et.argumentLengthCheck(arguments,1,n),super(t,r),et.util.markAsUncloneable(this),t=et.converters.DOMString(t,n,"type"),r=et.converters.ErrorEventInit(r??{}),this.#e=r}get message(){return et.brandCheck(this,e),this.#e.message}get filename(){return et.brandCheck(this,e),this.#e.filename}get lineno(){return et.brandCheck(this,e),this.#e.lineno}get colno(){return et.brandCheck(this,e),this.#e.colno}get error(){return et.brandCheck(this,e),this.#e.error}};Object.defineProperties(G0.prototype,{[Symbol.toStringTag]:{value:"MessageEvent",configurable:!0},data:$o,origin:$o,lastEventId:$o,source:$o,ports:$o,initMessageEvent:$o});Object.defineProperties(dT.prototype,{[Symbol.toStringTag]:{value:"CloseEvent",configurable:!0},reason:$o,code:$o,wasClean:$o});Object.defineProperties(fT.prototype,{[Symbol.toStringTag]:{value:"ErrorEvent",configurable:!0},message:$o,filename:$o,lineno:$o,colno:$o,error:$o});et.converters.MessagePort=et.interfaceConverter(Xze);et.converters["sequence<MessagePort>"]=et.sequenceConverter(et.converters.MessagePort);var p3=[{key:"bubbles",converter:et.converters.boolean,defaultValue:()=>!1},{key:"cancelable",converter:et.converters.boolean,defaultValue:()=>!1},{key:"composed",converter:et.converters.boolean,defaultValue:()=>!1}];et.converters.MessageEventInit=et.dictionaryConverter([...p3,{key:"data",converter:et.converters.any,defaultValue:()=>null},{key:"origin",converter:et.converters.USVString,defaultValue:()=>""},{key:"lastEventId",converter:et.converters.DOMString,defaultValue:()=>""},{key:"source",converter:et.nullableConverter(et.converters.MessagePort),defaultValue:()=>null},{key:"ports",converter:et.converters["sequence<MessagePort>"],defaultValue:()=>new Array(0)}]);et.converters.CloseEventInit=et.dictionaryConverter([...p3,{key:"wasClean",converter:et.converters.boolean,defaultValue:()=>!1},{key:"code",converter:et.converters["unsigned short"],defaultValue:()=>0},{key:"reason",converter:et.converters.USVString,defaultValue:()=>""}]);et.converters.ErrorEventInit=et.dictionaryConverter([...p3,{key:"message",converter:et.converters.DOMString,defaultValue:()=>""},{key:"filename",converter:et.converters.USVString,defaultValue:()=>""},{key:"lineno",converter:et.converters["unsigned long"],defaultValue:()=>0},{key:"colno",converter:et.converters["unsigned long"],defaultValue:()=>0},{key:"error",converter:et.converters.any}]);bae.exports={MessageEvent:G0,CloseEvent:dT,ErrorEvent:fT,createFastMessageEvent:eJe}});var Lp=x((sDt,xae)=>{"use strict";var tJe="258EAFA5-E914-47DA-95CA-C5AB0DC85B11",rJe={enumerable:!0,writable:!1,configurable:!1},nJe={CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3},iJe={NOT_SENT:0,PROCESSING:1,SENT:2},sJe={CONTINUATION:0,TEXT:1,BINARY:2,CLOSE:8,PING:9,PONG:10},oJe=2**16-1,aJe={INFO:0,PAYLOADLENGTH_16:2,PAYLOADLENGTH_64:3,READ_DATA:4},lJe=Buffer.allocUnsafe(0),cJe={string:1,typedArray:2,arrayBuffer:3,blob:4};xae.exports={uid:tJe,sentCloseFrameState:iJe,staticPropertyDescriptors:rJe,states:nJe,opcodes:sJe,maxUnsigned16Bit:oJe,parserStates:aJe,emptyBuffer:lJe,sendHints:cJe}});var Tb=x((oDt,_ae)=>{"use strict";_ae.exports={kWebSocketURL:Symbol("url"),kReadyState:Symbol("ready state"),kController:Symbol("controller"),kResponse:Symbol("response"),kBinaryType:Symbol("binary type"),kSentClose:Symbol("sent close"),kReceivedClose:Symbol("received close"),kByteParser:Symbol("byte parser")}});var Fb=x((aDt,Fae)=>{"use strict";var{kReadyState:Rb,kController:uJe,kResponse:dJe,kBinaryType:fJe,kWebSocketURL:hJe}=Tb(),{states:kb,opcodes:yh}=Lp(),{ErrorEvent:gJe,createFastMessageEvent:pJe}=$0(),{isUtf8:AJe}=require("buffer"),{collectASequenceOfCodePointsFast:mJe,removeHTTPWhitespace:wae}=Vo();function yJe(e){return e[Rb]===kb.CONNECTING}function CJe(e){return e[Rb]===kb.OPEN}function vJe(e){return e[Rb]===kb.CLOSING}function EJe(e){return e[Rb]===kb.CLOSED}function A3(e,t,r=(i,s)=>new Event(i,s),n={}){let i=r(e,n);t.dispatchEvent(i)}function bJe(e,t,r){if(e[Rb]!==kb.OPEN)return;let n;if(t===yh.TEXT)try{n=kae(r)}catch{Sae(e,"Received invalid UTF-8 in text frame.");return}else t===yh.BINARY&&(e[fJe]==="blob"?n=new Blob([r]):n=xJe(r));A3("message",e,pJe,{origin:e[hJe].origin,data:n})}function xJe(e){return e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}function _Je(e){if(e.length===0)return!1;for(let t=0;t<e.length;++t){let r=e.charCodeAt(t);if(r<33||r>126||r===34||r===40||r===41||r===44||r===47||r===58||r===59||r===60||r===61||r===62||r===63||r===64||r===91||r===92||r===93||r===123||r===125)return!1}return!0}function wJe(e){return e>=1e3&&e<1015?e!==1004&&e!==1005&&e!==1006:e>=3e3&&e<=4999}function Sae(e,t){let{[uJe]:r,[dJe]:n}=e;r.abort(),n?.socket&&!n.socket.destroyed&&n.socket.destroy(),t&&A3("error",e,(i,s)=>new gJe(i,s),{error:new Error(t),message:t})}function Bae(e){return e===yh.CLOSE||e===yh.PING||e===yh.PONG}function Dae(e){return e===yh.CONTINUATION}function Tae(e){return e===yh.TEXT||e===yh.BINARY}function IJe(e){return Tae(e)||Dae(e)||Bae(e)}function SJe(e){let t={position:0},r=new Map;for(;t.position<e.length;){let n=mJe(";",e,t),[i,s=""]=n.split("=");r.set(wae(i,!0,!1),wae(s,!1,!0)),t.position++}return r}function BJe(e){for(let t=0;t<e.length;t++){let r=e.charCodeAt(t);if(r<48||r>57)return!1}return!0}var Rae=typeof process.versions.icu=="string",Iae=Rae?new TextDecoder("utf-8",{fatal:!0}):void 0,kae=Rae?Iae.decode.bind(Iae):function(e){if(AJe(e))return e.toString("utf-8");throw new TypeError("Invalid utf-8 received.")};Fae.exports={isConnecting:yJe,isEstablished:CJe,isClosing:vJe,isClosed:EJe,fireEvent:A3,isValidSubprotocol:_Je,isValidStatusCode:wJe,failWebsocketConnection:Sae,websocketMessageReceived:bJe,utf8Decode:kae,isControlFrame:Bae,isContinuationFrame:Dae,isTextBinaryFrame:Tae,isValidOpcode:IJe,parseExtensions:SJe,isValidClientWindowBits:BJe}});var gT=x((lDt,Mae)=>{"use strict";var{maxUnsigned16Bit:DJe}=Lp(),hT=16386,m3,Mb=null,Y0=hT;try{m3=require("crypto")}catch{m3={randomFillSync:function(t,r,n){for(let i=0;i<t.length;++i)t[i]=Math.random()*255|0;return t}}}function TJe(){return Y0===hT&&(Y0=0,m3.randomFillSync(Mb??=Buffer.allocUnsafe(hT),0,hT)),[Mb[Y0++],Mb[Y0++],Mb[Y0++],Mb[Y0++]]}var y3=class{constructor(t){this.frameData=t}createFrame(t){let r=this.frameData,n=TJe(),i=r?.byteLength??0,s=i,o=6;i>DJe?(o+=8,s=127):i>125&&(o+=2,s=126);let a=Buffer.allocUnsafe(i+o);a[0]=a[1]=0,a[0]|=128,a[0]=(a[0]&240)+t;a[o-4]=n[0],a[o-3]=n[1],a[o-2]=n[2],a[o-1]=n[3],a[1]=s,s===126?a.writeUInt16BE(i,2):s===127&&(a[2]=a[3]=0,a.writeUIntBE(i,4,6)),a[1]|=128;for(let l=0;l<i;++l)a[o+l]=r[l]^n[l&3];return a}};Mae.exports={WebsocketFrameSend:y3}});var v3=x((cDt,qae)=>{"use strict";var{uid:RJe,states:Qb,sentCloseFrameState:pT,emptyBuffer:kJe,opcodes:FJe}=Lp(),{kReadyState:Nb,kSentClose:AT,kByteParser:Nae,kReceivedClose:Qae,kResponse:Pae}=Tb(),{fireEvent:MJe,failWebsocketConnection:Ch,isClosing:QJe,isClosed:NJe,isEstablished:PJe,parseExtensions:LJe}=Fb(),{channels:K0}=a0(),{CloseEvent:UJe}=$0(),{makeRequest:OJe}=O0(),{fetching:qJe}=Ib(),{Headers:VJe,getHeadersList:HJe}=kp(),{getDecodeSplit:WJe}=ba(),{WebsocketFrameSend:GJe}=gT(),C3;try{C3=require("crypto")}catch{}function $Je(e,t,r,n,i,s){let o=e;o.protocol=e.protocol==="ws:"?"http:":"https:";let a=OJe({urlList:[o],client:r,serviceWorkers:"none",referrer:"no-referrer",mode:"websocket",credentials:"include",cache:"no-store",redirect:"error"});if(s.headers){let f=HJe(new VJe(s.headers));a.headersList=f}let l=C3.randomBytes(16).toString("base64");a.headersList.append("sec-websocket-key",l),a.headersList.append("sec-websocket-version","13");for(let f of t)a.headersList.append("sec-websocket-protocol",f);let c="permessage-deflate; client_max_window_bits";return a.headersList.append("sec-websocket-extensions",c),qJe({request:a,useParallelQueue:!0,dispatcher:s.dispatcher,processResponse(f){if(f.type==="error"||f.status!==101){Ch(n,"Received network error or non-101 status code.");return}if(t.length!==0&&!f.headersList.get("Sec-WebSocket-Protocol")){Ch(n,"Server did not respond with sent protocols.");return}if(f.headersList.get("Upgrade")?.toLowerCase()!=="websocket"){Ch(n,'Server did not set Upgrade header to "websocket".');return}if(f.headersList.get("Connection")?.toLowerCase()!=="upgrade"){Ch(n,'Server did not set Connection header to "upgrade".');return}let p=f.headersList.get("Sec-WebSocket-Accept"),g=C3.createHash("sha1").update(l+RJe).digest("base64");if(p!==g){Ch(n,"Incorrect hash received in Sec-WebSocket-Accept header.");return}let A=f.headersList.get("Sec-WebSocket-Extensions"),y;if(A!==null&&(y=LJe(A),!y.has("permessage-deflate"))){Ch(n,"Sec-WebSocket-Extensions header does not match.");return}let C=f.headersList.get("Sec-WebSocket-Protocol");if(C!==null&&!WJe("sec-websocket-protocol",a.headersList).includes(C)){Ch(n,"Protocol was not set in the opening handshake.");return}f.socket.on("data",Lae),f.socket.on("close",Uae),f.socket.on("error",Oae),K0.open.hasSubscribers&&K0.open.publish({address:f.socket.address(),protocol:C,extensions:A}),i(f,y)}})}function YJe(e,t,r,n){if(!(QJe(e)||NJe(e)))if(!PJe(e))Ch(e,"Connection was closed before it was established."),e[Nb]=Qb.CLOSING;else if(e[AT]===pT.NOT_SENT){e[AT]=pT.PROCESSING;let i=new GJe;t!==void 0&&r===void 0?(i.frameData=Buffer.allocUnsafe(2),i.frameData.writeUInt16BE(t,0)):t!==void 0&&r!==void 0?(i.frameData=Buffer.allocUnsafe(2+n),i.frameData.writeUInt16BE(t,0),i.frameData.write(r,2,"utf-8")):i.frameData=kJe,e[Pae].socket.write(i.createFrame(FJe.CLOSE)),e[AT]=pT.SENT,e[Nb]=Qb.CLOSING}else e[Nb]=Qb.CLOSING}function Lae(e){this.ws[Nae].write(e)||this.pause()}function Uae(){let{ws:e}=this,{[Pae]:t}=e;t.socket.off("data",Lae),t.socket.off("close",Uae),t.socket.off("error",Oae);let r=e[AT]===pT.SENT&&e[Qae],n=1005,i="",s=e[Nae].closingInfo;s&&!s.error?(n=s.code??1005,i=s.reason):e[Qae]||(n=1006),e[Nb]=Qb.CLOSED,MJe("close",e,(o,a)=>new UJe(o,a),{wasClean:r,code:n,reason:i}),K0.close.hasSubscribers&&K0.close.publish({websocket:e,code:n,reason:i})}function Oae(e){let{ws:t}=this;t[Nb]=Qb.CLOSING,K0.socketError.hasSubscribers&&K0.socketError.publish(e),this.destroy()}qae.exports={establishWebSocketConnection:$Je,closeWebSocketConnection:YJe}});var Hae=x((uDt,Vae)=>{"use strict";var{createInflateRaw:KJe,Z_DEFAULT_WINDOWBITS:zJe}=require("zlib"),{isValidClientWindowBits:JJe}=Fb(),jJe=Buffer.from([0,0,255,255]),mT=Symbol("kBuffer"),yT=Symbol("kLength"),E3=class{#e;#t={};constructor(t){this.#t.serverNoContextTakeover=t.has("server_no_context_takeover"),this.#t.serverMaxWindowBits=t.get("server_max_window_bits")}decompress(t,r,n){if(!this.#e){let i=zJe;if(this.#t.serverMaxWindowBits){if(!JJe(this.#t.serverMaxWindowBits)){n(new Error("Invalid server_max_window_bits"));return}i=Number.parseInt(this.#t.serverMaxWindowBits)}this.#e=KJe({windowBits:i}),this.#e[mT]=[],this.#e[yT]=0,this.#e.on("data",s=>{this.#e[mT].push(s),this.#e[yT]+=s.length}),this.#e.on("error",s=>{this.#e=null,n(s)})}this.#e.write(t),r&&this.#e.write(jJe),this.#e.flush(()=>{let i=Buffer.concat(this.#e[mT],this.#e[yT]);this.#e[mT].length=0,this.#e[yT]=0,n(null,i)})}};Vae.exports={PerMessageDeflate:E3}});var ele=x((dDt,Xae)=>{"use strict";var{Writable:ZJe}=require("stream"),XJe=require("assert"),{parserStates:Yo,opcodes:z0,states:eje,emptyBuffer:Wae,sentCloseFrameState:Gae}=Lp(),{kReadyState:tje,kSentClose:$ae,kResponse:Yae,kReceivedClose:Kae}=Tb(),{channels:CT}=a0(),{isValidStatusCode:rje,isValidOpcode:nje,failWebsocketConnection:yl,websocketMessageReceived:zae,utf8Decode:ije,isControlFrame:Jae,isTextBinaryFrame:b3,isContinuationFrame:sje}=Fb(),{WebsocketFrameSend:jae}=gT(),{closeWebSocketConnection:Zae}=v3(),{PerMessageDeflate:oje}=Hae(),x3=class extends ZJe{#e=[];#t=0;#i=!1;#n=Yo.INFO;#r={};#l=[];#o;constructor(t,r){super(),this.ws=t,this.#o=r??new Map,this.#o.has("permessage-deflate")&&this.#o.set("permessage-deflate",new oje(r))}_write(t,r,n){this.#e.push(t),this.#t+=t.length,this.#i=!0,this.run(n)}run(t){for(;this.#i;)if(this.#n===Yo.INFO){if(this.#t<2)return t();let r=this.consume(2),n=(r[0]&128)!==0,i=r[0]&15,s=(r[1]&128)===128,o=!n&&i!==z0.CONTINUATION,a=r[1]&127,l=r[0]&64,c=r[0]&32,u=r[0]&16;if(!nje(i))return yl(this.ws,"Invalid opcode received"),t();if(s)return yl(this.ws,"Frame cannot be masked"),t();if(l!==0&&!this.#o.has("permessage-deflate")){yl(this.ws,"Expected RSV1 to be clear.");return}if(c!==0||u!==0){yl(this.ws,"RSV1, RSV2, RSV3 must be clear");return}if(o&&!b3(i)){yl(this.ws,"Invalid frame type was fragmented.");return}if(b3(i)&&this.#l.length>0){yl(this.ws,"Expected continuation frame");return}if(this.#r.fragmented&&o){yl(this.ws,"Fragmented frame exceeded 125 bytes.");return}if((a>125||o)&&Jae(i)){yl(this.ws,"Control frame either too large or fragmented");return}if(sje(i)&&this.#l.length===0&&!this.#r.compressed){yl(this.ws,"Unexpected continuation frame");return}a<=125?(this.#r.payloadLength=a,this.#n=Yo.READ_DATA):a===126?this.#n=Yo.PAYLOADLENGTH_16:a===127&&(this.#n=Yo.PAYLOADLENGTH_64),b3(i)&&(this.#r.binaryType=i,this.#r.compressed=l!==0),this.#r.opcode=i,this.#r.masked=s,this.#r.fin=n,this.#r.fragmented=o}else if(this.#n===Yo.PAYLOADLENGTH_16){if(this.#t<2)return t();let r=this.consume(2);this.#r.payloadLength=r.readUInt16BE(0),this.#n=Yo.READ_DATA}else if(this.#n===Yo.PAYLOADLENGTH_64){if(this.#t<8)return t();let r=this.consume(8),n=r.readUInt32BE(0);if(n>2**31-1){yl(this.ws,"Received payload length > 2^31 bytes.");return}let i=r.readUInt32BE(4);this.#r.payloadLength=(n<<8)+i,this.#n=Yo.READ_DATA}else if(this.#n===Yo.READ_DATA){if(this.#t<this.#r.payloadLength)return t();let r=this.consume(this.#r.payloadLength);if(Jae(this.#r.opcode))this.#i=this.parseControlFrame(r),this.#n=Yo.INFO;else if(this.#r.compressed){this.#o.get("permessage-deflate").decompress(r,this.#r.fin,(n,i)=>{if(n){Zae(this.ws,1007,n.message,n.message.length);return}if(this.#l.push(i),!this.#r.fin){this.#n=Yo.INFO,this.#i=!0,this.run(t);return}zae(this.ws,this.#r.binaryType,Buffer.concat(this.#l)),this.#i=!0,this.#n=Yo.INFO,this.#l.length=0,this.run(t)}),this.#i=!1;break}else{if(this.#l.push(r),!this.#r.fragmented&&this.#r.fin){let n=Buffer.concat(this.#l);zae(this.ws,this.#r.binaryType,n),this.#l.length=0}this.#n=Yo.INFO}}}consume(t){if(t>this.#t)throw new Error("Called consume() before buffers satiated.");if(t===0)return Wae;if(this.#e[0].length===t)return this.#t-=this.#e[0].length,this.#e.shift();let r=Buffer.allocUnsafe(t),n=0;for(;n!==t;){let i=this.#e[0],{length:s}=i;if(s+n===t){r.set(this.#e.shift(),n);break}else if(s+n>t){r.set(i.subarray(0,t-n),n),this.#e[0]=i.subarray(t-n);break}else r.set(this.#e.shift(),n),n+=i.length}return this.#t-=t,r}parseCloseBody(t){XJe(t.length!==1);let r;if(t.length>=2&&(r=t.readUInt16BE(0)),r!==void 0&&!rje(r))return{code:1002,reason:"Invalid status code",error:!0};let n=t.subarray(2);n[0]===239&&n[1]===187&&n[2]===191&&(n=n.subarray(3));try{n=ije(n)}catch{return{code:1007,reason:"Invalid UTF-8",error:!0}}return{code:r,reason:n,error:!1}}parseControlFrame(t){let{opcode:r,payloadLength:n}=this.#r;if(r===z0.CLOSE){if(n===1)return yl(this.ws,"Received close frame with a 1-byte body."),!1;if(this.#r.closeInfo=this.parseCloseBody(t),this.#r.closeInfo.error){let{code:i,reason:s}=this.#r.closeInfo;return Zae(this.ws,i,s,s.length),yl(this.ws,s),!1}if(this.ws[$ae]!==Gae.SENT){let i=Wae;this.#r.closeInfo.code&&(i=Buffer.allocUnsafe(2),i.writeUInt16BE(this.#r.closeInfo.code,0));let s=new jae(i);this.ws[Yae].socket.write(s.createFrame(z0.CLOSE),o=>{o||(this.ws[$ae]=Gae.SENT)})}return this.ws[tje]=eje.CLOSING,this.ws[Kae]=!0,!1}else if(r===z0.PING){if(!this.ws[Kae]){let i=new jae(t);this.ws[Yae].socket.write(i.createFrame(z0.PONG)),CT.ping.hasSubscribers&&CT.ping.publish({payload:t})}}else r===z0.PONG&&CT.pong.hasSubscribers&&CT.pong.publish({payload:t});return!0}get closingInfo(){return this.#r.closeInfo}};Xae.exports={ByteParser:x3}});var sle=x((fDt,ile)=>{"use strict";var{WebsocketFrameSend:aje}=gT(),{opcodes:tle,sendHints:J0}=Lp(),lje=Qq(),rle=Buffer[Symbol.species],_3=class{#e=new lje;#t=!1;#i;constructor(t){this.#i=t}add(t,r,n){if(n!==J0.blob){let s=nle(t,n);if(!this.#t)this.#i.write(s,r);else{let o={promise:null,callback:r,frame:s};this.#e.push(o)}return}let i={promise:t.arrayBuffer().then(s=>{i.promise=null,i.frame=nle(s,n)}),callback:r,frame:null};this.#e.push(i),this.#t||this.#n()}async#n(){this.#t=!0;let t=this.#e;for(;!t.isEmpty();){let r=t.shift();r.promise!==null&&await r.promise,this.#i.write(r.frame,r.callback),r.callback=r.frame=null}this.#t=!1}};function nle(e,t){return new aje(cje(e,t)).createFrame(t===J0.string?tle.TEXT:tle.BINARY)}function cje(e,t){switch(t){case J0.string:return Buffer.from(e);case J0.arrayBuffer:case J0.blob:return new rle(e);case J0.typedArray:return new rle(e.buffer,e.byteOffset,e.byteLength)}}ile.exports={SendQueue:_3}});var gle=x((hDt,hle)=>{"use strict";var{webidl:xt}=_s(),{URLSerializer:uje}=Vo(),{environmentSettingsObject:ole}=ba(),{staticPropertyDescriptors:vh,states:Pb,sentCloseFrameState:dje,sendHints:vT}=Lp(),{kWebSocketURL:ale,kReadyState:w3,kController:fje,kBinaryType:ET,kResponse:lle,kSentClose:hje,kByteParser:gje}=Tb(),{isConnecting:pje,isEstablished:Aje,isClosing:mje,isValidSubprotocol:yje,fireEvent:cle}=Fb(),{establishWebSocketConnection:Cje,closeWebSocketConnection:ule}=v3(),{ByteParser:vje}=ele(),{kEnumerableProperty:Cl,isBlobLike:dle}=rr(),{getGlobalDispatcher:Eje}=QD(),{types:fle}=require("util"),{ErrorEvent:bje,CloseEvent:xje}=$0(),{SendQueue:_je}=sle(),Da=class e extends EventTarget{#e={open:null,error:null,close:null,message:null};#t=0;#i="";#n="";#r;constructor(t,r=[]){super(),xt.util.markAsUncloneable(this);let n="WebSocket constructor";xt.argumentLengthCheck(arguments,1,n);let i=xt.converters["DOMString or sequence<DOMString> or WebSocketInit"](r,n,"options");t=xt.converters.USVString(t,n,"url"),r=i.protocols;let s=ole.settingsObject.baseUrl,o;try{o=new URL(t,s)}catch(l){throw new DOMException(l,"SyntaxError")}if(o.protocol==="http:"?o.protocol="ws:":o.protocol==="https:"&&(o.protocol="wss:"),o.protocol!=="ws:"&&o.protocol!=="wss:")throw new DOMException(`Expected a ws: or wss: protocol, got ${o.protocol}`,"SyntaxError");if(o.hash||o.href.endsWith("#"))throw new DOMException("Got fragment","SyntaxError");if(typeof r=="string"&&(r=[r]),r.length!==new Set(r.map(l=>l.toLowerCase())).size)throw new DOMException("Invalid Sec-WebSocket-Protocol value","SyntaxError");if(r.length>0&&!r.every(l=>yje(l)))throw new DOMException("Invalid Sec-WebSocket-Protocol value","SyntaxError");this[ale]=new URL(o.href);let a=ole.settingsObject;this[fje]=Cje(o,r,a,this,(l,c)=>this.#l(l,c),i),this[w3]=e.CONNECTING,this[hje]=dje.NOT_SENT,this[ET]="blob"}close(t=void 0,r=void 0){xt.brandCheck(this,e);let n="WebSocket.close";if(t!==void 0&&(t=xt.converters["unsigned short"](t,n,"code",{clamp:!0})),r!==void 0&&(r=xt.converters.USVString(r,n,"reason")),t!==void 0&&t!==1e3&&(t<3e3||t>4999))throw new DOMException("invalid code","InvalidAccessError");let i=0;if(r!==void 0&&(i=Buffer.byteLength(r),i>123))throw new DOMException(`Reason must be less than 123 bytes; received ${i}`,"SyntaxError");ule(this,t,r,i)}send(t){xt.brandCheck(this,e);let r="WebSocket.send";if(xt.argumentLengthCheck(arguments,1,r),t=xt.converters.WebSocketSendData(t,r,"data"),pje(this))throw new DOMException("Sent before connected.","InvalidStateError");if(!(!Aje(this)||mje(this)))if(typeof t=="string"){let n=Buffer.byteLength(t);this.#t+=n,this.#r.add(t,()=>{this.#t-=n},vT.string)}else fle.isArrayBuffer(t)?(this.#t+=t.byteLength,this.#r.add(t,()=>{this.#t-=t.byteLength},vT.arrayBuffer)):ArrayBuffer.isView(t)?(this.#t+=t.byteLength,this.#r.add(t,()=>{this.#t-=t.byteLength},vT.typedArray)):dle(t)&&(this.#t+=t.size,this.#r.add(t,()=>{this.#t-=t.size},vT.blob))}get readyState(){return xt.brandCheck(this,e),this[w3]}get bufferedAmount(){return xt.brandCheck(this,e),this.#t}get url(){return xt.brandCheck(this,e),uje(this[ale])}get extensions(){return xt.brandCheck(this,e),this.#n}get protocol(){return xt.brandCheck(this,e),this.#i}get onopen(){return xt.brandCheck(this,e),this.#e.open}set onopen(t){xt.brandCheck(this,e),this.#e.open&&this.removeEventListener("open",this.#e.open),typeof t=="function"?(this.#e.open=t,this.addEventListener("open",t)):this.#e.open=null}get onerror(){return xt.brandCheck(this,e),this.#e.error}set onerror(t){xt.brandCheck(this,e),this.#e.error&&this.removeEventListener("error",this.#e.error),typeof t=="function"?(this.#e.error=t,this.addEventListener("error",t)):this.#e.error=null}get onclose(){return xt.brandCheck(this,e),this.#e.close}set onclose(t){xt.brandCheck(this,e),this.#e.close&&this.removeEventListener("close",this.#e.close),typeof t=="function"?(this.#e.close=t,this.addEventListener("close",t)):this.#e.close=null}get onmessage(){return xt.brandCheck(this,e),this.#e.message}set onmessage(t){xt.brandCheck(this,e),this.#e.message&&this.removeEventListener("message",this.#e.message),typeof t=="function"?(this.#e.message=t,this.addEventListener("message",t)):this.#e.message=null}get binaryType(){return xt.brandCheck(this,e),this[ET]}set binaryType(t){xt.brandCheck(this,e),t!=="blob"&&t!=="arraybuffer"?this[ET]="blob":this[ET]=t}#l(t,r){this[lle]=t;let n=new vje(this,r);n.on("drain",wje),n.on("error",Ije.bind(this)),t.socket.ws=this,this[gje]=n,this.#r=new _je(t.socket),this[w3]=Pb.OPEN;let i=t.headersList.get("sec-websocket-extensions");i!==null&&(this.#n=i);let s=t.headersList.get("sec-websocket-protocol");s!==null&&(this.#i=s),cle("open",this)}};Da.CONNECTING=Da.prototype.CONNECTING=Pb.CONNECTING;Da.OPEN=Da.prototype.OPEN=Pb.OPEN;Da.CLOSING=Da.prototype.CLOSING=Pb.CLOSING;Da.CLOSED=Da.prototype.CLOSED=Pb.CLOSED;Object.defineProperties(Da.prototype,{CONNECTING:vh,OPEN:vh,CLOSING:vh,CLOSED:vh,url:Cl,readyState:Cl,bufferedAmount:Cl,onopen:Cl,onerror:Cl,onclose:Cl,close:Cl,onmessage:Cl,binaryType:Cl,send:Cl,extensions:Cl,protocol:Cl,[Symbol.toStringTag]:{value:"WebSocket",writable:!1,enumerable:!1,configurable:!0}});Object.defineProperties(Da,{CONNECTING:vh,OPEN:vh,CLOSING:vh,CLOSED:vh});xt.converters["sequence<DOMString>"]=xt.sequenceConverter(xt.converters.DOMString);xt.converters["DOMString or sequence<DOMString>"]=function(e,t,r){return xt.util.Type(e)==="Object"&&Symbol.iterator in e?xt.converters["sequence<DOMString>"](e):xt.converters.DOMString(e,t,r)};xt.converters.WebSocketInit=xt.dictionaryConverter([{key:"protocols",converter:xt.converters["DOMString or sequence<DOMString>"],defaultValue:()=>new Array(0)},{key:"dispatcher",converter:xt.converters.any,defaultValue:()=>Eje()},{key:"headers",converter:xt.nullableConverter(xt.converters.HeadersInit)}]);xt.converters["DOMString or sequence<DOMString> or WebSocketInit"]=function(e){return xt.util.Type(e)==="Object"&&!(Symbol.iterator in e)?xt.converters.WebSocketInit(e):{protocols:xt.converters["DOMString or sequence<DOMString>"](e)}};xt.converters.WebSocketSendData=function(e){if(xt.util.Type(e)==="Object"){if(dle(e))return xt.converters.Blob(e,{strict:!1});if(ArrayBuffer.isView(e)||fle.isArrayBuffer(e))return xt.converters.BufferSource(e)}return xt.converters.USVString(e)};function wje(){this.ws[lle].socket.resume()}function Ije(e){let t,r;e instanceof xje?(t=e.reason,r=e.code):t=e.message,cle("error",this,()=>new bje("error",{error:e,message:t})),ule(this,r)}hle.exports={WebSocket:Da}});var I3=x((gDt,ple)=>{"use strict";function Sje(e){return e.indexOf("\0")===-1}function Bje(e){if(e.length===0)return!1;for(let t=0;t<e.length;t++)if(e.charCodeAt(t)<48||e.charCodeAt(t)>57)return!1;return!0}function Dje(e){return new Promise(t=>{setTimeout(t,e).unref()})}ple.exports={isValidLastEventId:Sje,isASCIINumber:Bje,delay:Dje}});var Cle=x((pDt,yle)=>{"use strict";var{Transform:Tje}=require("stream"),{isASCIINumber:Ale,isValidLastEventId:mle}=I3(),Hd=[239,187,191],S3=10,bT=13,Rje=58,kje=32,B3=class extends Tje{state=null;checkBOM=!0;crlfCheck=!1;eventEndCheck=!1;buffer=null;pos=0;event={data:void 0,event:void 0,id:void 0,retry:void 0};constructor(t={}){t.readableObjectMode=!0,super(t),this.state=t.eventSourceSettings||{},t.push&&(this.push=t.push)}_transform(t,r,n){if(t.length===0){n();return}if(this.buffer?this.buffer=Buffer.concat([this.buffer,t]):this.buffer=t,this.checkBOM)switch(this.buffer.length){case 1:if(this.buffer[0]===Hd[0]){n();return}this.checkBOM=!1,n();return;case 2:if(this.buffer[0]===Hd[0]&&this.buffer[1]===Hd[1]){n();return}this.checkBOM=!1;break;case 3:if(this.buffer[0]===Hd[0]&&this.buffer[1]===Hd[1]&&this.buffer[2]===Hd[2]){this.buffer=Buffer.alloc(0),this.checkBOM=!1,n();return}this.checkBOM=!1;break;default:this.buffer[0]===Hd[0]&&this.buffer[1]===Hd[1]&&this.buffer[2]===Hd[2]&&(this.buffer=this.buffer.subarray(3)),this.checkBOM=!1;break}for(;this.pos<this.buffer.length;){if(this.eventEndCheck){if(this.crlfCheck){if(this.buffer[this.pos]===S3){this.buffer=this.buffer.subarray(this.pos+1),this.pos=0,this.crlfCheck=!1;continue}this.crlfCheck=!1}if(this.buffer[this.pos]===S3||this.buffer[this.pos]===bT){this.buffer[this.pos]===bT&&(this.crlfCheck=!0),this.buffer=this.buffer.subarray(this.pos+1),this.pos=0,(this.event.data!==void 0||this.event.event||this.event.id||this.event.retry)&&this.processEvent(this.event),this.clearEvent();continue}this.eventEndCheck=!1;continue}if(this.buffer[this.pos]===S3||this.buffer[this.pos]===bT){this.buffer[this.pos]===bT&&(this.crlfCheck=!0),this.parseLine(this.buffer.subarray(0,this.pos),this.event),this.buffer=this.buffer.subarray(this.pos+1),this.pos=0,this.eventEndCheck=!0;continue}this.pos++}n()}parseLine(t,r){if(t.length===0)return;let n=t.indexOf(Rje);if(n===0)return;let i="",s="";if(n!==-1){i=t.subarray(0,n).toString("utf8");let o=n+1;t[o]===kje&&++o,s=t.subarray(o).toString("utf8")}else i=t.toString("utf8"),s="";switch(i){case"data":r[i]===void 0?r[i]=s:r[i]+=`
${s}`;break;case"retry":Ale(s)&&(r[i]=s);break;case"id":mle(s)&&(r[i]=s);break;case"event":s.length>0&&(r[i]=s);break}}processEvent(t){t.retry&&Ale(t.retry)&&(this.state.reconnectionTime=parseInt(t.retry,10)),t.id&&mle(t.id)&&(this.state.lastEventId=t.id),t.data!==void 0&&this.push({type:t.event||"message",options:{data:t.data,lastEventId:this.state.lastEventId,origin:this.state.origin}})}clearEvent(){this.event={data:void 0,event:void 0,id:void 0,retry:void 0}}};yle.exports={EventSourceStream:B3}});var Sle=x((ADt,Ile)=>{"use strict";var{pipeline:Fje}=require("stream"),{fetching:Mje}=Ib(),{makeRequest:Qje}=O0(),{webidl:Wd}=_s(),{EventSourceStream:Nje}=Cle(),{parseMIMEType:Pje}=Vo(),{createFastMessageEvent:Lje}=$0(),{isNetworkError:vle}=_b(),{delay:Uje}=I3(),{kEnumerableProperty:Up}=rr(),{environmentSettingsObject:Ele}=ba(),ble=!1,xle=3e3,Lb=0,_le=1,Ub=2,Oje="anonymous",qje="use-credentials",j0=class e extends EventTarget{#e={open:null,error:null,message:null};#t=null;#i=!1;#n=Lb;#r=null;#l=null;#o;#u;constructor(t,r={}){super(),Wd.util.markAsUncloneable(this);let n="EventSource constructor";Wd.argumentLengthCheck(arguments,1,n),ble||(ble=!0,process.emitWarning("EventSource is experimental, expect them to change at any time.",{code:"UNDICI-ES"})),t=Wd.converters.USVString(t,n,"url"),r=Wd.converters.EventSourceInitDict(r,n,"eventSourceInitDict"),this.#o=r.dispatcher,this.#u={lastEventId:"",reconnectionTime:xle};let i=Ele,s;try{s=new URL(t,i.settingsObject.baseUrl),this.#u.origin=s.origin}catch(l){throw new DOMException(l,"SyntaxError")}this.#t=s.href;let o=Oje;r.withCredentials&&(o=qje,this.#i=!0);let a={redirect:"follow",keepalive:!0,mode:"cors",credentials:o==="anonymous"?"same-origin":"omit",referrer:"no-referrer"};a.client=Ele.settingsObject,a.headersList=[["accept",{name:"accept",value:"text/event-stream"}]],a.cache="no-store",a.initiator="other",a.urlList=[new URL(this.#t)],this.#r=Qje(a),this.#d()}get readyState(){return this.#n}get url(){return this.#t}get withCredentials(){return this.#i}#d(){if(this.#n===Ub)return;this.#n=Lb;let t={request:this.#r,dispatcher:this.#o},r=n=>{vle(n)&&(this.dispatchEvent(new Event("error")),this.close()),this.#a()};t.processResponseEndOfBody=r,t.processResponse=n=>{if(vle(n))if(n.aborted){this.close(),this.dispatchEvent(new Event("error"));return}else{this.#a();return}let i=n.headersList.get("content-type",!0),s=i!==null?Pje(i):"failure",o=s!=="failure"&&s.essence==="text/event-stream";if(n.status!==200||o===!1){this.close(),this.dispatchEvent(new Event("error"));return}this.#n=_le,this.dispatchEvent(new Event("open")),this.#u.origin=n.urlList[n.urlList.length-1].origin;let a=new Nje({eventSourceSettings:this.#u,push:l=>{this.dispatchEvent(Lje(l.type,l.options))}});Fje(n.body.stream,a,l=>{l?.aborted===!1&&(this.close(),this.dispatchEvent(new Event("error")))})},this.#l=Mje(t)}async#a(){this.#n!==Ub&&(this.#n=Lb,this.dispatchEvent(new Event("error")),await Uje(this.#u.reconnectionTime),this.#n===Lb&&(this.#u.lastEventId.length&&this.#r.headersList.set("last-event-id",this.#u.lastEventId,!0),this.#d()))}close(){Wd.brandCheck(this,e),this.#n!==Ub&&(this.#n=Ub,this.#l.abort(),this.#r=null)}get onopen(){return this.#e.open}set onopen(t){this.#e.open&&this.removeEventListener("open",this.#e.open),typeof t=="function"?(this.#e.open=t,this.addEventListener("open",t)):this.#e.open=null}get onmessage(){return this.#e.message}set onmessage(t){this.#e.message&&this.removeEventListener("message",this.#e.message),typeof t=="function"?(this.#e.message=t,this.addEventListener("message",t)):this.#e.message=null}get onerror(){return this.#e.error}set onerror(t){this.#e.error&&this.removeEventListener("error",this.#e.error),typeof t=="function"?(this.#e.error=t,this.addEventListener("error",t)):this.#e.error=null}},wle={CONNECTING:{__proto__:null,configurable:!1,enumerable:!0,value:Lb,writable:!1},OPEN:{__proto__:null,configurable:!1,enumerable:!0,value:_le,writable:!1},CLOSED:{__proto__:null,configurable:!1,enumerable:!0,value:Ub,writable:!1}};Object.defineProperties(j0,wle);Object.defineProperties(j0.prototype,wle);Object.defineProperties(j0.prototype,{close:Up,onerror:Up,onmessage:Up,onopen:Up,readyState:Up,url:Up,withCredentials:Up});Wd.converters.EventSourceInitDict=Wd.dictionaryConverter([{key:"withCredentials",converter:Wd.converters.boolean,defaultValue:()=>!1},{key:"dispatcher",converter:Wd.converters.any}]);Ile.exports={EventSource:j0,defaultReconnectionTime:xle}});var Rle=x((mDt,Ct)=>{"use strict";var Vje=cb(),Ble=qE(),Hje=S0(),Wje=Qne(),Gje=B0(),$je=Xq(),Yje=Zne(),Kje=iie(),Dle=$r(),_T=rr(),{InvalidArgumentError:xT}=Dle,Z0=Wie(),zje=HE(),Jje=MV(),jje=wse(),Zje=PV(),Xje=EV(),e7e=wD(),{getGlobalDispatcher:Tle,setGlobalDispatcher:t7e}=QD(),r7e=ND(),n7e=gD(),i7e=pD();Object.assign(Ble.prototype,Z0);Ct.exports.Dispatcher=Ble;Ct.exports.Client=Vje;Ct.exports.Pool=Hje;Ct.exports.BalancedPool=Wje;Ct.exports.Agent=Gje;Ct.exports.ProxyAgent=$je;Ct.exports.EnvHttpProxyAgent=Yje;Ct.exports.RetryAgent=Kje;Ct.exports.RetryHandler=e7e;Ct.exports.DecoratorHandler=r7e;Ct.exports.RedirectHandler=n7e;Ct.exports.createRedirectInterceptor=i7e;Ct.exports.interceptors={redirect:kse(),retry:Mse(),dump:Nse(),dns:Use()};Ct.exports.buildConnector=zje;Ct.exports.errors=Dle;Ct.exports.util={parseHeaders:_T.parseHeaders,headerNameToString:_T.headerNameToString};function Ob(e){return(t,r,n)=>{if(typeof r=="function"&&(n=r,r=null),!t||typeof t!="string"&&typeof t!="object"&&!(t instanceof URL))throw new xT("invalid url");if(r!=null&&typeof r!="object")throw new xT("invalid opts");if(r&&r.path!=null){if(typeof r.path!="string")throw new xT("invalid opts.path");let o=r.path;r.path.startsWith("/")||(o=`/${o}`),t=new URL(_T.parseOrigin(t).origin+o)}else r||(r=typeof t=="object"?t:{}),t=_T.parseURL(t);let{agent:i,dispatcher:s=Tle()}=r;if(i)throw new xT("unsupported opts.agent. Did you mean opts.client?");return e.call(s,{...r,origin:t.origin,path:t.search?`${t.pathname}${t.search}`:t.pathname,method:r.method||(r.body?"PUT":"GET")},n)}}Ct.exports.setGlobalDispatcher=t7e;Ct.exports.getGlobalDispatcher=Tle;var s7e=Ib().fetch;Ct.exports.fetch=async function(t,r=void 0){try{return await s7e(t,r)}catch(n){throw n&&typeof n=="object"&&Error.captureStackTrace(n),n}};Ct.exports.Headers=kp().Headers;Ct.exports.Response=_b().Response;Ct.exports.Request=O0().Request;Ct.exports.FormData=JE().FormData;Ct.exports.File=globalThis.File??require("buffer").File;Ct.exports.FileReader=Xoe().FileReader;var{setGlobalOrigin:o7e,getGlobalOrigin:a7e}=eq();Ct.exports.setGlobalOrigin=o7e;Ct.exports.getGlobalOrigin=a7e;var{CacheStorage:l7e}=lae(),{kConstruct:c7e}=nT();Ct.exports.caches=new l7e(c7e);var{deleteCookie:u7e,getCookies:d7e,getSetCookies:f7e,setCookie:h7e}=vae();Ct.exports.deleteCookie=u7e;Ct.exports.getCookies=d7e;Ct.exports.getSetCookies=f7e;Ct.exports.setCookie=h7e;var{parseMIMEType:g7e,serializeAMimeType:p7e}=Vo();Ct.exports.parseMIMEType=g7e;Ct.exports.serializeAMimeType=p7e;var{CloseEvent:A7e,ErrorEvent:m7e,MessageEvent:y7e}=$0();Ct.exports.WebSocket=gle().WebSocket;Ct.exports.CloseEvent=A7e;Ct.exports.ErrorEvent=m7e;Ct.exports.MessageEvent=y7e;Ct.exports.request=Ob(Z0.request);Ct.exports.stream=Ob(Z0.stream);Ct.exports.pipeline=Ob(Z0.pipeline);Ct.exports.connect=Ob(Z0.connect);Ct.exports.upgrade=Ob(Z0.upgrade);Ct.exports.MockClient=Jje;Ct.exports.MockPool=Zje;Ct.exports.MockAgent=jje;Ct.exports.mockErrors=Xje;var{EventSource:C7e}=Sle();Ct.exports.EventSource=C7e});var Jt=x((yDt,kle)=>{"use strict";kle.exports={options:{usePureJavaScript:!1}}});var Qle=x((CDt,Mle)=>{"use strict";var D3={};Mle.exports=D3;var Fle={};D3.encode=function(e,t,r){if(typeof t!="string")throw new TypeError('"alphabet" must be a string.');if(r!==void 0&&typeof r!="number")throw new TypeError('"maxline" must be a number.');var n="";if(!(e instanceof Uint8Array))n=v7e(e,t);else{var i=0,s=t.length,o=t.charAt(0),a=[0];for(i=0;i<e.length;++i){for(var l=0,c=e[i];l<a.length;++l)c+=a[l]<<8,a[l]=c%s,c=c/s|0;for(;c>0;)a.push(c%s),c=c/s|0}for(i=0;e[i]===0&&i<e.length-1;++i)n+=o;for(i=a.length-1;i>=0;--i)n+=t[a[i]]}if(r){var u=new RegExp(".{1,"+r+"}","g");n=n.match(u).join(`\r
`)}return n};D3.decode=function(e,t){if(typeof e!="string")throw new TypeError('"input" must be a string.');if(typeof t!="string")throw new TypeError('"alphabet" must be a string.');var r=Fle[t];if(!r){r=Fle[t]=[];for(var n=0;n<t.length;++n)r[t.charCodeAt(n)]=n}e=e.replace(/\s/g,"");for(var i=t.length,s=t.charAt(0),o=[0],n=0;n<e.length;n++){var a=r[e.charCodeAt(n)];if(a===void 0)return;for(var l=0,c=a;l<o.length;++l)c+=o[l]*i,o[l]=c&255,c>>=8;for(;c>0;)o.push(c&255),c>>=8}for(var u=0;e[u]===s&&u<e.length-1;++u)o.push(0);return typeof Buffer<"u"?Buffer.from(o.reverse()):new Uint8Array(o.reverse())};function v7e(e,t){var r=0,n=t.length,i=t.charAt(0),s=[0];for(r=0;r<e.length();++r){for(var o=0,a=e.at(r);o<s.length;++o)a+=s[o]<<8,s[o]=a%n,a=a/n|0;for(;a>0;)s.push(a%n),a=a/n|0}var l="";for(r=0;e.at(r)===0&&r<e.length()-1;++r)l+=i;for(r=s.length-1;r>=0;--r)l+=t[s[r]];return l}});var Dr=x((vDt,Ule)=>{"use strict";var Nle=Jt(),Ple=Qle(),Y=Ule.exports=Nle.util=Nle.util||{};(function(){if(typeof process<"u"&&process.nextTick&&!process.browser){Y.nextTick=process.nextTick,typeof setImmediate=="function"?Y.setImmediate=setImmediate:Y.setImmediate=Y.nextTick;return}if(typeof setImmediate=="function"){Y.setImmediate=function(){return setImmediate.apply(void 0,arguments)},Y.nextTick=function(a){return setImmediate(a)};return}if(Y.setImmediate=function(a){setTimeout(a,0)},typeof window<"u"&&typeof window.postMessage=="function"){let a=function(l){if(l.source===window&&l.data===e){l.stopPropagation();var c=t.slice();t.length=0,c.forEach(function(u){u()})}};var o=a,e="forge.setImmediate",t=[];Y.setImmediate=function(l){t.push(l),t.length===1&&window.postMessage(e,"*")},window.addEventListener("message",a,!0)}if(typeof MutationObserver<"u"){var r=Date.now(),n=!0,i=document.createElement("div"),t=[];new MutationObserver(function(){var l=t.slice();t.length=0,l.forEach(function(c){c()})}).observe(i,{attributes:!0});var s=Y.setImmediate;Y.setImmediate=function(l){Date.now()-r>15?(r=Date.now(),s(l)):(t.push(l),t.length===1&&i.setAttribute("a",n=!n))}}Y.nextTick=Y.setImmediate})();Y.isNodejs=typeof process<"u"&&process.versions&&process.versions.node;Y.globalScope=function(){return Y.isNodejs?global:typeof self>"u"?window:self}();Y.isArray=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};Y.isArrayBuffer=function(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer};Y.isArrayBufferView=function(e){return e&&Y.isArrayBuffer(e.buffer)&&e.byteLength!==void 0};function qb(e){if(!(e===8||e===16||e===24||e===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+e)}Y.ByteBuffer=T3;function T3(e){if(this.data="",this.read=0,typeof e=="string")this.data=e;else if(Y.isArrayBuffer(e)||Y.isArrayBufferView(e))if(typeof Buffer<"u"&&e instanceof Buffer)this.data=e.toString("binary");else{var t=new Uint8Array(e);try{this.data=String.fromCharCode.apply(null,t)}catch{for(var r=0;r<t.length;++r)this.putByte(t[r])}}else(e instanceof T3||typeof e=="object"&&typeof e.data=="string"&&typeof e.read=="number")&&(this.data=e.data,this.read=e.read);this._constructedStringLength=0}Y.ByteStringBuffer=T3;var E7e=4096;Y.ByteStringBuffer.prototype._optimizeConstructedString=function(e){this._constructedStringLength+=e,this._constructedStringLength>E7e&&(this.data.substr(0,1),this._constructedStringLength=0)};Y.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};Y.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};Y.ByteStringBuffer.prototype.putByte=function(e){return this.putBytes(String.fromCharCode(e))};Y.ByteStringBuffer.prototype.fillWithByte=function(e,t){e=String.fromCharCode(e);for(var r=this.data;t>0;)t&1&&(r+=e),t>>>=1,t>0&&(e+=e);return this.data=r,this._optimizeConstructedString(t),this};Y.ByteStringBuffer.prototype.putBytes=function(e){return this.data+=e,this._optimizeConstructedString(e.length),this};Y.ByteStringBuffer.prototype.putString=function(e){return this.putBytes(Y.encodeUtf8(e))};Y.ByteStringBuffer.prototype.putInt16=function(e){return this.putBytes(String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};Y.ByteStringBuffer.prototype.putInt24=function(e){return this.putBytes(String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};Y.ByteStringBuffer.prototype.putInt32=function(e){return this.putBytes(String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};Y.ByteStringBuffer.prototype.putInt16Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255))};Y.ByteStringBuffer.prototype.putInt24Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255))};Y.ByteStringBuffer.prototype.putInt32Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>24&255))};Y.ByteStringBuffer.prototype.putInt=function(e,t){qb(t);var r="";do t-=8,r+=String.fromCharCode(e>>t&255);while(t>0);return this.putBytes(r)};Y.ByteStringBuffer.prototype.putSignedInt=function(e,t){return e<0&&(e+=2<<t-1),this.putInt(e,t)};Y.ByteStringBuffer.prototype.putBuffer=function(e){return this.putBytes(e.getBytes())};Y.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};Y.ByteStringBuffer.prototype.getInt16=function(){var e=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,e};Y.ByteStringBuffer.prototype.getInt24=function(){var e=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,e};Y.ByteStringBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e};Y.ByteStringBuffer.prototype.getInt16Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,e};Y.ByteStringBuffer.prototype.getInt24Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,e};Y.ByteStringBuffer.prototype.getInt32Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,e};Y.ByteStringBuffer.prototype.getInt=function(e){qb(e);var t=0;do t=(t<<8)+this.data.charCodeAt(this.read++),e-=8;while(e>0);return t};Y.ByteStringBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t};Y.ByteStringBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):e===0?t="":(t=this.read===0?this.data:this.data.slice(this.read),this.clear()),t};Y.ByteStringBuffer.prototype.bytes=function(e){return typeof e>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+e)};Y.ByteStringBuffer.prototype.at=function(e){return this.data.charCodeAt(this.read+e)};Y.ByteStringBuffer.prototype.setAt=function(e,t){return this.data=this.data.substr(0,this.read+e)+String.fromCharCode(t)+this.data.substr(this.read+e+1),this};Y.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};Y.ByteStringBuffer.prototype.copy=function(){var e=Y.createBuffer(this.data);return e.read=this.read,e};Y.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};Y.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};Y.ByteStringBuffer.prototype.truncate=function(e){var t=Math.max(0,this.length()-e);return this.data=this.data.substr(this.read,t),this.read=0,this};Y.ByteStringBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var r=this.data.charCodeAt(t);r<16&&(e+="0"),e+=r.toString(16)}return e};Y.ByteStringBuffer.prototype.toString=function(){return Y.decodeUtf8(this.bytes())};function b7e(e,t){t=t||{},this.read=t.readOffset||0,this.growSize=t.growSize||1024;var r=Y.isArrayBuffer(e),n=Y.isArrayBufferView(e);if(r||n){r?this.data=new DataView(e):this.data=new DataView(e.buffer,e.byteOffset,e.byteLength),this.write="writeOffset"in t?t.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,e!=null&&this.putBytes(e),"writeOffset"in t&&(this.write=t.writeOffset)}Y.DataBuffer=b7e;Y.DataBuffer.prototype.length=function(){return this.write-this.read};Y.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};Y.DataBuffer.prototype.accommodate=function(e,t){if(this.length()>=e)return this;t=Math.max(t||this.growSize,e);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+t);return n.set(r),this.data=new DataView(n.buffer),this};Y.DataBuffer.prototype.putByte=function(e){return this.accommodate(1),this.data.setUint8(this.write++,e),this};Y.DataBuffer.prototype.fillWithByte=function(e,t){this.accommodate(t);for(var r=0;r<t;++r)this.data.setUint8(e);return this};Y.DataBuffer.prototype.putBytes=function(e,t){if(Y.isArrayBufferView(e)){var r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),n=r.byteLength-r.byteOffset;this.accommodate(n);var i=new Uint8Array(this.data.buffer,this.write);return i.set(r),this.write+=n,this}if(Y.isArrayBuffer(e)){var r=new Uint8Array(e);this.accommodate(r.byteLength);var i=new Uint8Array(this.data.buffer);return i.set(r,this.write),this.write+=r.byteLength,this}if(e instanceof Y.DataBuffer||typeof e=="object"&&typeof e.read=="number"&&typeof e.write=="number"&&Y.isArrayBufferView(e.data)){var r=new Uint8Array(e.data.byteLength,e.read,e.length());this.accommodate(r.byteLength);var i=new Uint8Array(e.data.byteLength,this.write);return i.set(r),this.write+=r.byteLength,this}if(e instanceof Y.ByteStringBuffer&&(e=e.data,t="binary"),t=t||"binary",typeof e=="string"){var s;if(t==="hex")return this.accommodate(Math.ceil(e.length/2)),s=new Uint8Array(this.data.buffer,this.write),this.write+=Y.binary.hex.decode(e,s,this.write),this;if(t==="base64")return this.accommodate(Math.ceil(e.length/4)*3),s=new Uint8Array(this.data.buffer,this.write),this.write+=Y.binary.base64.decode(e,s,this.write),this;if(t==="utf8"&&(e=Y.encodeUtf8(e),t="binary"),t==="binary"||t==="raw")return this.accommodate(e.length),s=new Uint8Array(this.data.buffer,this.write),this.write+=Y.binary.raw.decode(s),this;if(t==="utf16")return this.accommodate(e.length*2),s=new Uint16Array(this.data.buffer,this.write),this.write+=Y.text.utf16.encode(s),this;throw new Error("Invalid encoding: "+t)}throw Error("Invalid parameter: "+e)};Y.DataBuffer.prototype.putBuffer=function(e){return this.putBytes(e),e.clear(),this};Y.DataBuffer.prototype.putString=function(e){return this.putBytes(e,"utf16")};Y.DataBuffer.prototype.putInt16=function(e){return this.accommodate(2),this.data.setInt16(this.write,e),this.write+=2,this};Y.DataBuffer.prototype.putInt24=function(e){return this.accommodate(3),this.data.setInt16(this.write,e>>8&65535),this.data.setInt8(this.write,e>>16&255),this.write+=3,this};Y.DataBuffer.prototype.putInt32=function(e){return this.accommodate(4),this.data.setInt32(this.write,e),this.write+=4,this};Y.DataBuffer.prototype.putInt16Le=function(e){return this.accommodate(2),this.data.setInt16(this.write,e,!0),this.write+=2,this};Y.DataBuffer.prototype.putInt24Le=function(e){return this.accommodate(3),this.data.setInt8(this.write,e>>16&255),this.data.setInt16(this.write,e>>8&65535,!0),this.write+=3,this};Y.DataBuffer.prototype.putInt32Le=function(e){return this.accommodate(4),this.data.setInt32(this.write,e,!0),this.write+=4,this};Y.DataBuffer.prototype.putInt=function(e,t){qb(t),this.accommodate(t/8);do t-=8,this.data.setInt8(this.write++,e>>t&255);while(t>0);return this};Y.DataBuffer.prototype.putSignedInt=function(e,t){return qb(t),this.accommodate(t/8),e<0&&(e+=2<<t-1),this.putInt(e,t)};Y.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};Y.DataBuffer.prototype.getInt16=function(){var e=this.data.getInt16(this.read);return this.read+=2,e};Y.DataBuffer.prototype.getInt24=function(){var e=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,e};Y.DataBuffer.prototype.getInt32=function(){var e=this.data.getInt32(this.read);return this.read+=4,e};Y.DataBuffer.prototype.getInt16Le=function(){var e=this.data.getInt16(this.read,!0);return this.read+=2,e};Y.DataBuffer.prototype.getInt24Le=function(){var e=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,e};Y.DataBuffer.prototype.getInt32Le=function(){var e=this.data.getInt32(this.read,!0);return this.read+=4,e};Y.DataBuffer.prototype.getInt=function(e){qb(e);var t=0;do t=(t<<8)+this.data.getInt8(this.read++),e-=8;while(e>0);return t};Y.DataBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t};Y.DataBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):e===0?t="":(t=this.read===0?this.data:this.data.slice(this.read),this.clear()),t};Y.DataBuffer.prototype.bytes=function(e){return typeof e>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+e)};Y.DataBuffer.prototype.at=function(e){return this.data.getUint8(this.read+e)};Y.DataBuffer.prototype.setAt=function(e,t){return this.data.setUint8(e,t),this};Y.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};Y.DataBuffer.prototype.copy=function(){return new Y.DataBuffer(this)};Y.DataBuffer.prototype.compact=function(){if(this.read>0){var e=new Uint8Array(this.data.buffer,this.read),t=new Uint8Array(e.byteLength);t.set(e),this.data=new DataView(t),this.write-=this.read,this.read=0}return this};Y.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};Y.DataBuffer.prototype.truncate=function(e){return this.write=Math.max(0,this.length()-e),this.read=Math.min(this.read,this.write),this};Y.DataBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.byteLength;++t){var r=this.data.getUint8(t);r<16&&(e+="0"),e+=r.toString(16)}return e};Y.DataBuffer.prototype.toString=function(e){var t=new Uint8Array(this.data,this.read,this.length());if(e=e||"utf8",e==="binary"||e==="raw")return Y.binary.raw.encode(t);if(e==="hex")return Y.binary.hex.encode(t);if(e==="base64")return Y.binary.base64.encode(t);if(e==="utf8")return Y.text.utf8.decode(t);if(e==="utf16")return Y.text.utf16.decode(t);throw new Error("Invalid encoding: "+e)};Y.createBuffer=function(e,t){return t=t||"raw",e!==void 0&&t==="utf8"&&(e=Y.encodeUtf8(e)),new Y.ByteBuffer(e)};Y.fillString=function(e,t){for(var r="";t>0;)t&1&&(r+=e),t>>>=1,t>0&&(e+=e);return r};Y.xorBytes=function(e,t,r){for(var n="",i="",s="",o=0,a=0;r>0;--r,++o)i=e.charCodeAt(o)^t.charCodeAt(o),a>=10&&(n+=s,s="",a=0),s+=String.fromCharCode(i),++a;return n+=s,n};Y.hexToBytes=function(e){var t="",r=0;for(e.length&!0&&(r=1,t+=String.fromCharCode(parseInt(e[0],16)));r<e.length;r+=2)t+=String.fromCharCode(parseInt(e.substr(r,2),16));return t};Y.bytesToHex=function(e){return Y.createBuffer(e).toHex()};Y.int32ToBytes=function(e){return String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255)};var Eh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bh=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],Lle="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";Y.encode64=function(e,t){for(var r="",n="",i,s,o,a=0;a<e.length;)i=e.charCodeAt(a++),s=e.charCodeAt(a++),o=e.charCodeAt(a++),r+=Eh.charAt(i>>2),r+=Eh.charAt((i&3)<<4|s>>4),isNaN(s)?r+="==":(r+=Eh.charAt((s&15)<<2|o>>6),r+=isNaN(o)?"=":Eh.charAt(o&63)),t&&r.length>t&&(n+=r.substr(0,t)+`\r
`,r=r.substr(t));return n+=r,n};Y.decode64=function(e){e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var t="",r,n,i,s,o=0;o<e.length;)r=bh[e.charCodeAt(o++)-43],n=bh[e.charCodeAt(o++)-43],i=bh[e.charCodeAt(o++)-43],s=bh[e.charCodeAt(o++)-43],t+=String.fromCharCode(r<<2|n>>4),i!==64&&(t+=String.fromCharCode((n&15)<<4|i>>2),s!==64&&(t+=String.fromCharCode((i&3)<<6|s)));return t};Y.encodeUtf8=function(e){return unescape(encodeURIComponent(e))};Y.decodeUtf8=function(e){return decodeURIComponent(escape(e))};Y.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:Ple.encode,decode:Ple.decode}};Y.binary.raw.encode=function(e){return String.fromCharCode.apply(null,e)};Y.binary.raw.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(e.length)),r=r||0;for(var i=r,s=0;s<e.length;++s)n[i++]=e.charCodeAt(s);return t?i-r:n};Y.binary.hex.encode=Y.bytesToHex;Y.binary.hex.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(Math.ceil(e.length/2))),r=r||0;var i=0,s=r;for(e.length&1&&(i=1,n[s++]=parseInt(e[0],16));i<e.length;i+=2)n[s++]=parseInt(e.substr(i,2),16);return t?s-r:n};Y.binary.base64.encode=function(e,t){for(var r="",n="",i,s,o,a=0;a<e.byteLength;)i=e[a++],s=e[a++],o=e[a++],r+=Eh.charAt(i>>2),r+=Eh.charAt((i&3)<<4|s>>4),isNaN(s)?r+="==":(r+=Eh.charAt((s&15)<<2|o>>6),r+=isNaN(o)?"=":Eh.charAt(o&63)),t&&r.length>t&&(n+=r.substr(0,t)+`\r
`,r=r.substr(t));return n+=r,n};Y.binary.base64.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(Math.ceil(e.length/4)*3)),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var i,s,o,a,l=0,c=r;l<e.length;)i=bh[e.charCodeAt(l++)-43],s=bh[e.charCodeAt(l++)-43],o=bh[e.charCodeAt(l++)-43],a=bh[e.charCodeAt(l++)-43],n[c++]=i<<2|s>>4,o!==64&&(n[c++]=(s&15)<<4|o>>2,a!==64&&(n[c++]=(o&3)<<6|a));return t?c-r:n.subarray(0,c)};Y.binary.base58.encode=function(e,t){return Y.binary.baseN.encode(e,Lle,t)};Y.binary.base58.decode=function(e,t){return Y.binary.baseN.decode(e,Lle,t)};Y.text={utf8:{},utf16:{}};Y.text.utf8.encode=function(e,t,r){e=Y.encodeUtf8(e);var n=t;n||(n=new Uint8Array(e.length)),r=r||0;for(var i=r,s=0;s<e.length;++s)n[i++]=e.charCodeAt(s);return t?i-r:n};Y.text.utf8.decode=function(e){return Y.decodeUtf8(String.fromCharCode.apply(null,e))};Y.text.utf16.encode=function(e,t,r){var n=t;n||(n=new Uint8Array(e.length*2));var i=new Uint16Array(n.buffer);r=r||0;for(var s=r,o=r,a=0;a<e.length;++a)i[o++]=e.charCodeAt(a),s+=2;return t?s-r:n};Y.text.utf16.decode=function(e){return String.fromCharCode.apply(null,new Uint16Array(e.buffer))};Y.deflate=function(e,t,r){if(t=Y.decode64(e.deflate(Y.encode64(t)).rval),r){var n=2,i=t.charCodeAt(1);i&32&&(n=6),t=t.substring(n,t.length-4)}return t};Y.inflate=function(e,t,r){var n=e.inflate(Y.encode64(t)).rval;return n===null?null:Y.decode64(n)};var R3=function(e,t,r){if(!e)throw new Error("WebStorage not available.");var n;if(r===null?n=e.removeItem(t):(r=Y.encode64(JSON.stringify(r)),n=e.setItem(t,r)),typeof n<"u"&&n.rval!==!0){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}},k3=function(e,t){if(!e)throw new Error("WebStorage not available.");var r=e.getItem(t);if(e.init)if(r.rval===null){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return r!==null&&(r=JSON.parse(Y.decode64(r))),r},x7e=function(e,t,r,n){var i=k3(e,t);i===null&&(i={}),i[r]=n,R3(e,t,i)},_7e=function(e,t,r){var n=k3(e,t);return n!==null&&(n=r in n?n[r]:null),n},w7e=function(e,t,r){var n=k3(e,t);if(n!==null&&r in n){delete n[r];var i=!0;for(var s in n){i=!1;break}i&&(n=null),R3(e,t,n)}},I7e=function(e,t){R3(e,t,null)},wT=function(e,t,r){var n=null;typeof r>"u"&&(r=["web","flash"]);var i,s=!1,o=null;for(var a in r){i=r[a];try{if(i==="flash"||i==="both"){if(t[0]===null)throw new Error("Flash local storage not available.");n=e.apply(this,t),s=i==="flash"}(i==="web"||i==="both")&&(t[0]=localStorage,n=e.apply(this,t),s=!0)}catch(l){o=l}if(s)break}if(!s)throw o;return n};Y.setItem=function(e,t,r,n,i){wT(x7e,arguments,i)};Y.getItem=function(e,t,r,n){return wT(_7e,arguments,n)};Y.removeItem=function(e,t,r,n){wT(w7e,arguments,n)};Y.clearItems=function(e,t,r){wT(I7e,arguments,r)};Y.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0};Y.format=function(e){for(var t=/%./g,r,n,i=0,s=[],o=0;r=t.exec(e);){n=e.substring(o,t.lastIndex-2),n.length>0&&s.push(n),o=t.lastIndex;var a=r[0][1];switch(a){case"s":case"o":i<arguments.length?s.push(arguments[i+++1]):s.push("<?>");break;case"%":s.push("%");break;default:s.push("<%"+a+"?>")}}return s.push(e.substring(o)),s.join("")};Y.formatNumber=function(e,t,r,n){var i=e,s=isNaN(t=Math.abs(t))?2:t,o=r===void 0?",":r,a=n===void 0?".":n,l=i<0?"-":"",c=parseInt(i=Math.abs(+i||0).toFixed(s),10)+"",u=c.length>3?c.length%3:0;return l+(u?c.substr(0,u)+a:"")+c.substr(u).replace(/(\d{3})(?=\d)/g,"$1"+a)+(s?o+Math.abs(i-c).toFixed(s).slice(2):"")};Y.formatSize=function(e){return e>=1073741824?e=Y.formatNumber(e/1073741824,2,".","")+" GiB":e>=1048576?e=Y.formatNumber(e/1048576,2,".","")+" MiB":e>=1024?e=Y.formatNumber(e/1024,0)+" KiB":e=Y.formatNumber(e,0)+" bytes",e};Y.bytesFromIP=function(e){return e.indexOf(".")!==-1?Y.bytesFromIPv4(e):e.indexOf(":")!==-1?Y.bytesFromIPv6(e):null};Y.bytesFromIPv4=function(e){if(e=e.split("."),e.length!==4)return null;for(var t=Y.createBuffer(),r=0;r<e.length;++r){var n=parseInt(e[r],10);if(isNaN(n))return null;t.putByte(n)}return t.getBytes()};Y.bytesFromIPv6=function(e){var t=0;e=e.split(":").filter(function(o){return o.length===0&&++t,!0});for(var r=(8-e.length+t)*2,n=Y.createBuffer(),i=0;i<8;++i){if(!e[i]||e[i].length===0){n.fillWithByte(0,r),r=0;continue}var s=Y.hexToBytes(e[i]);s.length<2&&n.putByte(0),n.putBytes(s)}return n.getBytes()};Y.bytesToIP=function(e){return e.length===4?Y.bytesToIPv4(e):e.length===16?Y.bytesToIPv6(e):null};Y.bytesToIPv4=function(e){if(e.length!==4)return null;for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t.join(".")};Y.bytesToIPv6=function(e){if(e.length!==16)return null;for(var t=[],r=[],n=0,i=0;i<e.length;i+=2){for(var s=Y.bytesToHex(e[i]+e[i+1]);s[0]==="0"&&s!=="0";)s=s.substr(1);if(s==="0"){var o=r[r.length-1],a=t.length;!o||a!==o.end+1?r.push({start:a,end:a}):(o.end=a,o.end-o.start>r[n].end-r[n].start&&(n=r.length-1))}t.push(s)}if(r.length>0){var l=r[n];l.end-l.start>0&&(t.splice(l.start,l.end-l.start+1,""),l.start===0&&t.unshift(""),l.end===7&&t.push(""))}return t.join(":")};Y.estimateCores=function(e,t){if(typeof e=="function"&&(t=e,e={}),e=e||{},"cores"in Y&&!e.update)return t(null,Y.cores);if(typeof navigator<"u"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return Y.cores=navigator.hardwareConcurrency,t(null,Y.cores);if(typeof Worker>"u")return Y.cores=1,t(null,Y.cores);if(typeof Blob>"u")return Y.cores=2,t(null,Y.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(o){for(var a=Date.now(),l=a+4;Date.now()<l;);self.postMessage({st:a,et:l})})}.toString(),")()"],{type:"application/javascript"}));n([],5,16);function n(o,a,l){if(a===0){var c=Math.floor(o.reduce(function(u,f){return u+f},0)/o.length);return Y.cores=Math.max(1,c),URL.revokeObjectURL(r),t(null,Y.cores)}i(l,function(u,f){o.push(s(l,f)),n(o,a-1,l)})}function i(o,a){for(var l=[],c=[],u=0;u<o;++u){var f=new Worker(r);f.addEventListener("message",function(p){if(c.push(p.data),c.length===o){for(var g=0;g<o;++g)l[g].terminate();a(null,c)}}),l.push(f)}for(var u=0;u<o;++u)l[u].postMessage(u)}function s(o,a){for(var l=[],c=0;c<o;++c)for(var u=a[c],f=l[c]=[],p=0;p<o;++p)if(c!==p){var g=a[p];(u.st>g.st&&u.st<g.et||g.st>u.st&&g.st<u.et)&&f.push(p)}return l.reduce(function(A,y){return Math.max(A,y.length)},0)}}});var IT=x((EDt,Ole)=>{"use strict";var ts=Jt();Dr();Ole.exports=ts.cipher=ts.cipher||{};ts.cipher.algorithms=ts.cipher.algorithms||{};ts.cipher.createCipher=function(e,t){var r=e;if(typeof r=="string"&&(r=ts.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+e);return new ts.cipher.BlockCipher({algorithm:r,key:t,decrypt:!1})};ts.cipher.createDecipher=function(e,t){var r=e;if(typeof r=="string"&&(r=ts.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+e);return new ts.cipher.BlockCipher({algorithm:r,key:t,decrypt:!0})};ts.cipher.registerAlgorithm=function(e,t){e=e.toUpperCase(),ts.cipher.algorithms[e]=t};ts.cipher.getAlgorithm=function(e){return e=e.toUpperCase(),e in ts.cipher.algorithms?ts.cipher.algorithms[e]:null};var F3=ts.cipher.BlockCipher=function(e){this.algorithm=e.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=e.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=e.decrypt,this.algorithm.initialize(e)};F3.prototype.start=function(e){e=e||{};var t={};for(var r in e)t[r]=e[r];t.decrypt=this._decrypt,this._finish=!1,this._input=ts.util.createBuffer(),this.output=e.output||ts.util.createBuffer(),this.mode.start(t)};F3.prototype.update=function(e){for(e&&this._input.putBuffer(e);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};F3.prototype.finish=function(e){e&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(r){return e(this.blockSize,r,!1)},this.mode.unpad=function(r){return e(this.blockSize,r,!0)});var t={};return t.decrypt=this._decrypt,t.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,t)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,t))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,t))}});var Q3=x((bDt,qle)=>{"use strict";var rs=Jt();Dr();rs.cipher=rs.cipher||{};var lr=qle.exports=rs.cipher.modes=rs.cipher.modes||{};lr.ecb=function(e){e=e||{},this.name="ECB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};lr.ecb.prototype.start=function(e){};lr.ecb.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])};lr.ecb.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])};lr.ecb.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0};lr.ecb.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return n>this.blockSize<<2?!1:(e.truncate(n),!0)};lr.cbc=function(e){e=e||{},this.name="CBC",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};lr.cbc.prototype.start=function(e){if(e.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in e)this._iv=ST(e.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};lr.cbc.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._outBlock[n]);this._prev=this._outBlock};lr.cbc.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)};lr.cbc.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0};lr.cbc.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return n>this.blockSize<<2?!1:(e.truncate(n),!0)};lr.cfb=function(e){e=e||{},this.name="CFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=rs.util.createBuffer(),this._partialBytes=0};lr.cfb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=ST(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};lr.cfb.prototype.encrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32()^this._outBlock[i],t.putInt32(this._inBlock[i]);return}var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(s>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};lr.cfb.prototype.decrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32(),t.putInt32(this._inBlock[i]^this._outBlock[i]);return}var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(s>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};lr.ofb=function(e){e=e||{},this.name="OFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=rs.util.createBuffer(),this._partialBytes=0};lr.ofb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=ST(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};lr.ofb.prototype.encrypt=function(e,t,r){var n=e.length();if(e.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];return}var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(s>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};lr.ofb.prototype.decrypt=lr.ofb.prototype.encrypt;lr.ctr=function(e){e=e||{},this.name="CTR",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=rs.util.createBuffer(),this._partialBytes=0};lr.ctr.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=ST(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};lr.ctr.prototype.encrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize)for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]);else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(s>0&&(e.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}BT(this._inBlock)};lr.ctr.prototype.decrypt=lr.ctr.prototype.encrypt;lr.gcm=function(e){e=e||{},this.name="GCM",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=rs.util.createBuffer(),this._partialBytes=0,this._R=3774873600};lr.gcm.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");var t=rs.util.createBuffer(e.iv);this._cipherLength=0;var r;if("additionalData"in e?r=rs.util.createBuffer(e.additionalData):r=rs.util.createBuffer(),"tagLength"in e?this._tagLength=e.tagLength:this._tagLength=128,this._tag=null,e.decrypt&&(this._tag=rs.util.createBuffer(e.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var n=t.length();if(n===12)this._j0=[t.getInt32(),t.getInt32(),t.getInt32(),1];else{for(this._j0=[0,0,0,0];t.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[t.getInt32(),t.getInt32(),t.getInt32(),t.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(M3(n*8)))}this._inBlock=this._j0.slice(0),BT(this._inBlock),this._partialBytes=0,r=rs.util.createBuffer(r),this._aDataLength=M3(r.length()*8);var i=r.length()%this.blockSize;for(i&&r.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];r.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()])};lr.gcm.prototype.encrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^=e.getInt32());this._cipherLength+=this.blockSize}else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(s<=0||r){if(r){var o=n%this.blockSize;this._cipherLength+=o,this._partialOutput.truncate(this.blockSize-o)}else this._cipherLength+=this.blockSize;for(var i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.read-=this.blockSize,t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),BT(this._inBlock)};lr.gcm.prototype.decrypt=function(e,t,r){var n=e.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),BT(this._inBlock),this._hashBlock[0]=e.getInt32(),this._hashBlock[1]=e.getInt32(),this._hashBlock[2]=e.getInt32(),this._hashBlock[3]=e.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^this._hashBlock[i]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize};lr.gcm.prototype.afterFinish=function(e,t){var r=!0;t.decrypt&&t.overflow&&e.truncate(this.blockSize-t.overflow),this.tag=rs.util.createBuffer();var n=this._aDataLength.concat(M3(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,n);var i=[];this.cipher.encrypt(this._j0,i);for(var s=0;s<this._ints;++s)this.tag.putInt32(this._s[s]^i[s]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),t.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r};lr.gcm.prototype.multiply=function(e,t){for(var r=[0,0,0,0],n=t.slice(0),i=0;i<128;++i){var s=e[i/32|0]&1<<31-i%32;s&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r};lr.gcm.prototype.pow=function(e,t){for(var r=e[3]&1,n=3;n>0;--n)t[n]=e[n]>>>1|(e[n-1]&1)<<31;t[0]=e[0]>>>1,r&&(t[0]^=this._R)};lr.gcm.prototype.tableMultiply=function(e){for(var t=[0,0,0,0],r=0;r<32;++r){var n=r/8|0,i=e[n]>>>(7-r%8)*4&15,s=this._m[r][i];t[0]^=s[0],t[1]^=s[1],t[2]^=s[2],t[3]^=s[3]}return t};lr.gcm.prototype.ghash=function(e,t,r){return t[0]^=r[0],t[1]^=r[1],t[2]^=r[2],t[3]^=r[3],this.tableMultiply(t)};lr.gcm.prototype.generateHashTable=function(e,t){for(var r=8/t,n=4*r,i=16*r,s=new Array(i),o=0;o<i;++o){var a=[0,0,0,0],l=o/n|0,c=(n-1-o%n)*t;a[l]=1<<t-1<<c,s[o]=this.generateSubHashTable(this.multiply(a,e),t)}return s};lr.gcm.prototype.generateSubHashTable=function(e,t){var r=1<<t,n=r>>>1,i=new Array(r);i[n]=e.slice(0);for(var s=n>>>1;s>0;)this.pow(i[2*s],i[s]=[]),s>>=1;for(s=2;s<n;){for(var o=1;o<s;++o){var a=i[s],l=i[o];i[s+o]=[a[0]^l[0],a[1]^l[1],a[2]^l[2],a[3]^l[3]]}s*=2}for(i[0]=[0,0,0,0],s=n+1;s<r;++s){var c=i[s^n];i[s]=[e[0]^c[0],e[1]^c[1],e[2]^c[2],e[3]^c[3]]}return i};function ST(e,t){if(typeof e=="string"&&(e=rs.util.createBuffer(e)),rs.util.isArray(e)&&e.length>4){var r=e;e=rs.util.createBuffer();for(var n=0;n<r.length;++n)e.putByte(r[n])}if(e.length()<t)throw new Error("Invalid IV length; got "+e.length()+" bytes and expected "+t+" bytes.");if(!rs.util.isArray(e)){for(var i=[],s=t/4,n=0;n<s;++n)i.push(e.getInt32());e=i}return e}function BT(e){e[e.length-1]=e[e.length-1]+1&4294967295}function M3(e){return[e/4294967296|0,e&4294967295]}});var xh=x((xDt,Gle)=>{"use strict";var Cn=Jt();IT();Q3();Dr();Gle.exports=Cn.aes=Cn.aes||{};Cn.aes.startEncrypting=function(e,t,r,n){var i=DT({key:e,output:r,decrypt:!1,mode:n});return i.start(t),i};Cn.aes.createEncryptionCipher=function(e,t){return DT({key:e,output:null,decrypt:!1,mode:t})};Cn.aes.startDecrypting=function(e,t,r,n){var i=DT({key:e,output:r,decrypt:!0,mode:n});return i.start(t),i};Cn.aes.createDecryptionCipher=function(e,t){return DT({key:e,output:null,decrypt:!0,mode:t})};Cn.aes.Algorithm=function(e,t){L3||Hle();var r=this;r.name=e,r.mode=new t({blockSize:16,cipher:{encrypt:function(n,i){return P3(r._w,n,i,!1)},decrypt:function(n,i){return P3(r._w,n,i,!0)}}}),r._init=!1};Cn.aes.Algorithm.prototype.initialize=function(e){if(!this._init){var t=e.key,r;if(typeof t=="string"&&(t.length===16||t.length===24||t.length===32))t=Cn.util.createBuffer(t);else if(Cn.util.isArray(t)&&(t.length===16||t.length===24||t.length===32)){r=t,t=Cn.util.createBuffer();for(var n=0;n<r.length;++n)t.putByte(r[n])}if(!Cn.util.isArray(t)){r=t,t=[];var i=r.length();if(i===16||i===24||i===32){i=i>>>2;for(var n=0;n<i;++n)t.push(r.getInt32())}}if(!Cn.util.isArray(t)||!(t.length===4||t.length===6||t.length===8))throw new Error("Invalid key parameter.");var s=this.mode.name,o=["CFB","OFB","CTR","GCM"].indexOf(s)!==-1;this._w=Wle(t,e.decrypt&&!o),this._init=!0}};Cn.aes._expandKey=function(e,t){return L3||Hle(),Wle(e,t)};Cn.aes._updateBlock=P3;ey("AES-ECB",Cn.cipher.modes.ecb);ey("AES-CBC",Cn.cipher.modes.cbc);ey("AES-CFB",Cn.cipher.modes.cfb);ey("AES-OFB",Cn.cipher.modes.ofb);ey("AES-CTR",Cn.cipher.modes.ctr);ey("AES-GCM",Cn.cipher.modes.gcm);function ey(e,t){var r=function(){return new Cn.aes.Algorithm(e,t)};Cn.cipher.registerAlgorithm(e,r)}var L3=!1,X0=4,fo,N3,Vle,Op,Ec;function Hle(){L3=!0,Vle=[0,1,2,4,8,16,32,64,128,27,54];for(var e=new Array(256),t=0;t<128;++t)e[t]=t<<1,e[t+128]=t+128<<1^283;fo=new Array(256),N3=new Array(256),Op=new Array(4),Ec=new Array(4);for(var t=0;t<4;++t)Op[t]=new Array(256),Ec[t]=new Array(256);for(var r=0,n=0,i,s,o,a,l,c,u,t=0;t<256;++t){a=n^n<<1^n<<2^n<<3^n<<4,a=a>>8^a&255^99,fo[r]=a,N3[a]=r,l=e[a],i=e[r],s=e[i],o=e[s],c=l<<24^a<<16^a<<8^(a^l),u=(i^s^o)<<24^(r^o)<<16^(r^s^o)<<8^(r^i^o);for(var f=0;f<4;++f)Op[f][r]=c,Ec[f][a]=u,c=c<<24|c>>>8,u=u<<24|u>>>8;r===0?r=n=1:(r=i^e[e[e[i^o]]],n^=e[e[n]])}}function Wle(e,t){for(var r=e.slice(0),n,i=1,s=r.length,o=s+6+1,a=X0*o,l=s;l<a;++l)n=r[l-1],l%s===0?(n=fo[n>>>16&255]<<24^fo[n>>>8&255]<<16^fo[n&255]<<8^fo[n>>>24]^Vle[i]<<24,i++):s>6&&l%s===4&&(n=fo[n>>>24]<<24^fo[n>>>16&255]<<16^fo[n>>>8&255]<<8^fo[n&255]),r[l]=r[l-s]^n;if(t){var c,u=Ec[0],f=Ec[1],p=Ec[2],g=Ec[3],A=r.slice(0);a=r.length;for(var l=0,y=a-X0;l<a;l+=X0,y-=X0)if(l===0||l===a-X0)A[l]=r[y],A[l+1]=r[y+3],A[l+2]=r[y+2],A[l+3]=r[y+1];else for(var C=0;C<X0;++C)c=r[y+C],A[l+(3&-C)]=u[fo[c>>>24]]^f[fo[c>>>16&255]]^p[fo[c>>>8&255]]^g[fo[c&255]];r=A}return r}function P3(e,t,r,n){var i=e.length/4-1,s,o,a,l,c;n?(s=Ec[0],o=Ec[1],a=Ec[2],l=Ec[3],c=N3):(s=Op[0],o=Op[1],a=Op[2],l=Op[3],c=fo);var u,f,p,g,A,y,C;u=t[0]^e[0],f=t[n?3:1]^e[1],p=t[2]^e[2],g=t[n?1:3]^e[3];for(var v=3,b=1;b<i;++b)A=s[u>>>24]^o[f>>>16&255]^a[p>>>8&255]^l[g&255]^e[++v],y=s[f>>>24]^o[p>>>16&255]^a[g>>>8&255]^l[u&255]^e[++v],C=s[p>>>24]^o[g>>>16&255]^a[u>>>8&255]^l[f&255]^e[++v],g=s[g>>>24]^o[u>>>16&255]^a[f>>>8&255]^l[p&255]^e[++v],u=A,f=y,p=C;r[0]=c[u>>>24]<<24^c[f>>>16&255]<<16^c[p>>>8&255]<<8^c[g&255]^e[++v],r[n?3:1]=c[f>>>24]<<24^c[p>>>16&255]<<16^c[g>>>8&255]<<8^c[u&255]^e[++v],r[2]=c[p>>>24]<<24^c[g>>>16&255]<<16^c[u>>>8&255]<<8^c[f&255]^e[++v],r[n?1:3]=c[g>>>24]<<24^c[u>>>16&255]<<16^c[f>>>8&255]<<8^c[p&255]^e[++v]}function DT(e){e=e||{};var t=(e.mode||"CBC").toUpperCase(),r="AES-"+t,n;e.decrypt?n=Cn.cipher.createDecipher(r,e.key):n=Cn.cipher.createCipher(r,e.key);var i=n.start;return n.start=function(s,o){var a=null;o instanceof Cn.util.ByteBuffer&&(a=o,o={}),o=o||{},o.output=a,o.iv=s,i.call(n,o)},n}});var _h=x((_Dt,$le)=>{"use strict";var Vb=Jt();Vb.pki=Vb.pki||{};var U3=$le.exports=Vb.pki.oids=Vb.oids=Vb.oids||{};function Ce(e,t){U3[e]=t,U3[t]=e}function tn(e,t){U3[e]=t}Ce("1.2.840.113549.1.1.1","rsaEncryption");Ce("1.2.840.113549.1.1.4","md5WithRSAEncryption");Ce("1.2.840.113549.1.1.5","sha1WithRSAEncryption");Ce("1.2.840.113549.1.1.7","RSAES-OAEP");Ce("1.2.840.113549.1.1.8","mgf1");Ce("1.2.840.113549.1.1.9","pSpecified");Ce("1.2.840.113549.1.1.10","RSASSA-PSS");Ce("1.2.840.113549.1.1.11","sha256WithRSAEncryption");Ce("1.2.840.113549.1.1.12","sha384WithRSAEncryption");Ce("1.2.840.113549.1.1.13","sha512WithRSAEncryption");Ce("1.3.101.112","EdDSA25519");Ce("1.2.840.10040.4.3","dsa-with-sha1");Ce("1.3.14.3.2.7","desCBC");Ce("1.3.14.3.2.26","sha1");Ce("1.3.14.3.2.29","sha1WithRSASignature");Ce("2.16.840.1.101.3.4.2.1","sha256");Ce("2.16.840.1.101.3.4.2.2","sha384");Ce("2.16.840.1.101.3.4.2.3","sha512");Ce("2.16.840.1.101.3.4.2.4","sha224");Ce("2.16.840.1.101.3.4.2.5","sha512-224");Ce("2.16.840.1.101.3.4.2.6","sha512-256");Ce("1.2.840.113549.2.2","md2");Ce("1.2.840.113549.2.5","md5");Ce("1.2.840.113549.1.7.1","data");Ce("1.2.840.113549.1.7.2","signedData");Ce("1.2.840.113549.1.7.3","envelopedData");Ce("1.2.840.113549.1.7.4","signedAndEnvelopedData");Ce("1.2.840.113549.1.7.5","digestedData");Ce("1.2.840.113549.1.7.6","encryptedData");Ce("1.2.840.113549.1.9.1","emailAddress");Ce("1.2.840.113549.1.9.2","unstructuredName");Ce("1.2.840.113549.1.9.3","contentType");Ce("1.2.840.113549.1.9.4","messageDigest");Ce("1.2.840.113549.1.9.5","signingTime");Ce("1.2.840.113549.1.9.6","counterSignature");Ce("1.2.840.113549.1.9.7","challengePassword");Ce("1.2.840.113549.1.9.8","unstructuredAddress");Ce("1.2.840.113549.1.9.14","extensionRequest");Ce("1.2.840.113549.1.9.20","friendlyName");Ce("1.2.840.113549.1.9.21","localKeyId");Ce("1.2.840.113549.1.9.22.1","x509Certificate");Ce("1.2.840.113549.1.12.10.1.1","keyBag");Ce("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");Ce("1.2.840.113549.1.12.10.1.3","certBag");Ce("1.2.840.113549.1.12.10.1.4","crlBag");Ce("1.2.840.113549.1.12.10.1.5","secretBag");Ce("1.2.840.113549.1.12.10.1.6","safeContentsBag");Ce("1.2.840.113549.1.5.13","pkcs5PBES2");Ce("1.2.840.113549.1.5.12","pkcs5PBKDF2");Ce("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");Ce("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");Ce("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");Ce("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");Ce("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");Ce("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");Ce("1.2.840.113549.2.7","hmacWithSHA1");Ce("1.2.840.113549.2.8","hmacWithSHA224");Ce("1.2.840.113549.2.9","hmacWithSHA256");Ce("1.2.840.113549.2.10","hmacWithSHA384");Ce("1.2.840.113549.2.11","hmacWithSHA512");Ce("1.2.840.113549.3.7","des-EDE3-CBC");Ce("2.16.840.1.101.3.4.1.2","aes128-CBC");Ce("2.16.840.1.101.3.4.1.22","aes192-CBC");Ce("2.16.840.1.101.3.4.1.42","aes256-CBC");Ce("2.5.4.3","commonName");Ce("2.5.4.4","surname");Ce("2.5.4.5","serialNumber");Ce("2.5.4.6","countryName");Ce("2.5.4.7","localityName");Ce("2.5.4.8","stateOrProvinceName");Ce("2.5.4.9","streetAddress");Ce("2.5.4.10","organizationName");Ce("2.5.4.11","organizationalUnitName");Ce("2.5.4.12","title");Ce("2.5.4.13","description");Ce("2.5.4.15","businessCategory");Ce("2.5.4.17","postalCode");Ce("2.5.4.42","givenName");Ce("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");Ce("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");Ce("2.16.840.1.113730.1.1","nsCertType");Ce("2.16.840.1.113730.1.13","nsComment");tn("2.5.29.1","authorityKeyIdentifier");tn("2.5.29.2","keyAttributes");tn("2.5.29.3","certificatePolicies");tn("2.5.29.4","keyUsageRestriction");tn("2.5.29.5","policyMapping");tn("2.5.29.6","subtreesConstraint");tn("2.5.29.7","subjectAltName");tn("2.5.29.8","issuerAltName");tn("2.5.29.9","subjectDirectoryAttributes");tn("2.5.29.10","basicConstraints");tn("2.5.29.11","nameConstraints");tn("2.5.29.12","policyConstraints");tn("2.5.29.13","basicConstraints");Ce("2.5.29.14","subjectKeyIdentifier");Ce("2.5.29.15","keyUsage");tn("2.5.29.16","privateKeyUsagePeriod");Ce("2.5.29.17","subjectAltName");Ce("2.5.29.18","issuerAltName");Ce("2.5.29.19","basicConstraints");tn("2.5.29.20","cRLNumber");tn("2.5.29.21","cRLReason");tn("2.5.29.22","expirationDate");tn("2.5.29.23","instructionCode");tn("2.5.29.24","invalidityDate");tn("2.5.29.25","cRLDistributionPoints");tn("2.5.29.26","issuingDistributionPoint");tn("2.5.29.27","deltaCRLIndicator");tn("2.5.29.28","issuingDistributionPoint");tn("2.5.29.29","certificateIssuer");tn("2.5.29.30","nameConstraints");Ce("2.5.29.31","cRLDistributionPoints");Ce("2.5.29.32","certificatePolicies");tn("2.5.29.33","policyMappings");tn("2.5.29.34","policyConstraints");Ce("2.5.29.35","authorityKeyIdentifier");tn("2.5.29.36","policyConstraints");Ce("2.5.29.37","extKeyUsage");tn("2.5.29.46","freshestCRL");tn("2.5.29.54","inhibitAnyPolicy");Ce("1.3.6.1.4.1.11129.2.4.2","timestampList");Ce("1.3.6.1.5.5.7.1.1","authorityInfoAccess");Ce("1.3.6.1.5.5.7.3.1","serverAuth");Ce("1.3.6.1.5.5.7.3.2","clientAuth");Ce("1.3.6.1.5.5.7.3.3","codeSigning");Ce("1.3.6.1.5.5.7.3.4","emailProtection");Ce("1.3.6.1.5.5.7.3.8","timeStamping")});var bc=x((wDt,Kle)=>{"use strict";var Tn=Jt();Dr();_h();var Fe=Kle.exports=Tn.asn1=Tn.asn1||{};Fe.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};Fe.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};Fe.create=function(e,t,r,n,i){if(Tn.util.isArray(n)){for(var s=[],o=0;o<n.length;++o)n[o]!==void 0&&s.push(n[o]);n=s}var a={tagClass:e,type:t,constructed:r,composed:r||Tn.util.isArray(n),value:n};return i&&"bitStringContents"in i&&(a.bitStringContents=i.bitStringContents,a.original=Fe.copy(a)),a};Fe.copy=function(e,t){var r;if(Tn.util.isArray(e)){r=[];for(var n=0;n<e.length;++n)r.push(Fe.copy(e[n],t));return r}return typeof e=="string"?e:(r={tagClass:e.tagClass,type:e.type,constructed:e.constructed,composed:e.composed,value:Fe.copy(e.value,t)},t&&!t.excludeBitStringContents&&(r.bitStringContents=e.bitStringContents),r)};Fe.equals=function(e,t,r){if(Tn.util.isArray(e)){if(!Tn.util.isArray(t)||e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(!Fe.equals(e[n],t[n]))return!1;return!0}if(typeof e!=typeof t)return!1;if(typeof e=="string")return e===t;var i=e.tagClass===t.tagClass&&e.type===t.type&&e.constructed===t.constructed&&e.composed===t.composed&&Fe.equals(e.value,t.value);return r&&r.includeBitStringContents&&(i=i&&e.bitStringContents===t.bitStringContents),i};Fe.getBerValueLength=function(e){var t=e.getByte();if(t!==128){var r,n=t&128;return n?r=e.getInt((t&127)<<3):r=t,r}};function Hb(e,t,r){if(r>t){var n=new Error("Too few bytes to parse DER.");throw n.available=e.length(),n.remaining=t,n.requested=r,n}}var S7e=function(e,t){var r=e.getByte();if(t--,r!==128){var n,i=r&128;if(!i)n=r;else{var s=r&127;Hb(e,t,s),n=e.getInt(s<<3)}if(n<0)throw new Error("Negative length: "+n);return n}};Fe.fromDer=function(e,t){t===void 0&&(t={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof t=="boolean"&&(t={strict:t,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in t||(t.strict=!0),"parseAllBytes"in t||(t.parseAllBytes=!0),"decodeBitStrings"in t||(t.decodeBitStrings=!0),typeof e=="string"&&(e=Tn.util.createBuffer(e));var r=e.length(),n=TT(e,e.length(),0,t);if(t.parseAllBytes&&e.length()!==0){var i=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw i.byteCount=r,i.remaining=e.length(),i}return n};function TT(e,t,r,n){var i;Hb(e,t,2);var s=e.getByte();t--;var o=s&192,a=s&31;i=e.length();var l=S7e(e,t);if(t-=i-e.length(),l!==void 0&&l>t){if(n.strict){var c=new Error("Too few bytes to read ASN.1 value.");throw c.available=e.length(),c.remaining=t,c.requested=l,c}l=t}var u,f,p=(s&32)===32;if(p)if(u=[],l===void 0)for(;;){if(Hb(e,t,2),e.bytes(2)==="\0\0"){e.getBytes(2),t-=2;break}i=e.length(),u.push(TT(e,t,r+1,n)),t-=i-e.length()}else for(;l>0;)i=e.length(),u.push(TT(e,l,r+1,n)),t-=i-e.length(),l-=i-e.length();if(u===void 0&&o===Fe.Class.UNIVERSAL&&a===Fe.Type.BITSTRING&&(f=e.bytes(l)),u===void 0&&n.decodeBitStrings&&o===Fe.Class.UNIVERSAL&&a===Fe.Type.BITSTRING&&l>1){var g=e.read,A=t,y=0;if(a===Fe.Type.BITSTRING&&(Hb(e,t,1),y=e.getByte(),t--),y===0)try{i=e.length();var C={strict:!0,decodeBitStrings:!0},v=TT(e,t,r+1,C),b=i-e.length();t-=b,a==Fe.Type.BITSTRING&&b++;var w=v.tagClass;b===l&&(w===Fe.Class.UNIVERSAL||w===Fe.Class.CONTEXT_SPECIFIC)&&(u=[v])}catch{}u===void 0&&(e.read=g,t=A)}if(u===void 0){if(l===void 0){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");l=t}if(a===Fe.Type.BMPSTRING)for(u="";l>0;l-=2)Hb(e,t,2),u+=String.fromCharCode(e.getInt16()),t-=2;else u=e.getBytes(l),t-=l}var B=f===void 0?null:{bitStringContents:f};return Fe.create(o,a,p,u,B)}Fe.toDer=function(e){var t=Tn.util.createBuffer(),r=e.tagClass|e.type,n=Tn.util.createBuffer(),i=!1;if("bitStringContents"in e&&(i=!0,e.original&&(i=Fe.equals(e,e.original))),i)n.putBytes(e.bitStringContents);else if(e.composed){e.constructed?r|=32:n.putByte(0);for(var s=0;s<e.value.length;++s)e.value[s]!==void 0&&n.putBuffer(Fe.toDer(e.value[s]))}else if(e.type===Fe.Type.BMPSTRING)for(var s=0;s<e.value.length;++s)n.putInt16(e.value.charCodeAt(s));else e.type===Fe.Type.INTEGER&&e.value.length>1&&(e.value.charCodeAt(0)===0&&!(e.value.charCodeAt(1)&128)||e.value.charCodeAt(0)===255&&(e.value.charCodeAt(1)&128)===128)?n.putBytes(e.value.substr(1)):n.putBytes(e.value);if(t.putByte(r),n.length()<=127)t.putByte(n.length()&127);else{var o=n.length(),a="";do a+=String.fromCharCode(o&255),o=o>>>8;while(o>0);t.putByte(a.length|128);for(var s=a.length-1;s>=0;--s)t.putByte(a.charCodeAt(s))}return t.putBuffer(n),t};Fe.oidToDer=function(e){var t=e.split("."),r=Tn.util.createBuffer();r.putByte(40*parseInt(t[0],10)+parseInt(t[1],10));for(var n,i,s,o,a=2;a<t.length;++a){n=!0,i=[],s=parseInt(t[a],10);do o=s&127,s=s>>>7,n||(o|=128),i.push(o),n=!1;while(s>0);for(var l=i.length-1;l>=0;--l)r.putByte(i[l])}return r};Fe.derToOid=function(e){var t;typeof e=="string"&&(e=Tn.util.createBuffer(e));var r=e.getByte();t=Math.floor(r/40)+"."+r%40;for(var n=0;e.length()>0;)r=e.getByte(),n=n<<7,r&128?n+=r&127:(t+="."+(n+r),n=0);return t};Fe.utcTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(e.substr(2,2),10)-1,i=parseInt(e.substr(4,2),10),s=parseInt(e.substr(6,2),10),o=parseInt(e.substr(8,2),10),a=0;if(e.length>11){var l=e.charAt(10),c=10;l!=="+"&&l!=="-"&&(a=parseInt(e.substr(10,2),10),c+=2)}if(t.setUTCFullYear(r,n,i),t.setUTCHours(s,o,a,0),c&&(l=e.charAt(c),l==="+"||l==="-")){var u=parseInt(e.substr(c+1,2),10),f=parseInt(e.substr(c+4,2),10),p=u*60+f;p*=6e4,l==="+"?t.setTime(+t-p):t.setTime(+t+p)}return t};Fe.generalizedTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,4),10),n=parseInt(e.substr(4,2),10)-1,i=parseInt(e.substr(6,2),10),s=parseInt(e.substr(8,2),10),o=parseInt(e.substr(10,2),10),a=parseInt(e.substr(12,2),10),l=0,c=0,u=!1;e.charAt(e.length-1)==="Z"&&(u=!0);var f=e.length-5,p=e.charAt(f);if(p==="+"||p==="-"){var g=parseInt(e.substr(f+1,2),10),A=parseInt(e.substr(f+4,2),10);c=g*60+A,c*=6e4,p==="+"&&(c*=-1),u=!0}return e.charAt(14)==="."&&(l=parseFloat(e.substr(14),10)*1e3),u?(t.setUTCFullYear(r,n,i),t.setUTCHours(s,o,a,l),t.setTime(+t+c)):(t.setFullYear(r,n,i),t.setHours(s,o,a,l)),t};Fe.dateToUtcTime=function(e){if(typeof e=="string")return e;var t="",r=[];r.push((""+e.getUTCFullYear()).substr(2)),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z",t};Fe.dateToGeneralizedTime=function(e){if(typeof e=="string")return e;var t="",r=[];r.push(""+e.getUTCFullYear()),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z",t};Fe.integerToDer=function(e){var t=Tn.util.createBuffer();if(e>=-128&&e<128)return t.putSignedInt(e,8);if(e>=-32768&&e<32768)return t.putSignedInt(e,16);if(e>=-8388608&&e<8388608)return t.putSignedInt(e,24);if(e>=-2147483648&&e<2147483648)return t.putSignedInt(e,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=e,r};Fe.derToInteger=function(e){typeof e=="string"&&(e=Tn.util.createBuffer(e));var t=e.length()*8;if(t>32)throw new Error("Integer too large; max is 32-bits.");return e.getSignedInt(t)};Fe.validate=function(e,t,r,n){var i=!1;if((e.tagClass===t.tagClass||typeof t.tagClass>"u")&&(e.type===t.type||typeof t.type>"u"))if(e.constructed===t.constructed||typeof t.constructed>"u"){if(i=!0,t.value&&Tn.util.isArray(t.value))for(var s=0,o=0;i&&o<t.value.length;++o)i=t.value[o].optional||!1,e.value[s]&&(i=Fe.validate(e.value[s],t.value[o],r,n),i?++s:t.value[o].optional&&(i=!0)),!i&&n&&n.push("["+t.name+'] Tag class "'+t.tagClass+'", type "'+t.type+'" expected value length "'+t.value.length+'", got "'+e.value.length+'"');if(i&&r&&(t.capture&&(r[t.capture]=e.value),t.captureAsn1&&(r[t.captureAsn1]=e),t.captureBitStringContents&&"bitStringContents"in e&&(r[t.captureBitStringContents]=e.bitStringContents),t.captureBitStringValue&&"bitStringContents"in e)){var a;if(e.bitStringContents.length<2)r[t.captureBitStringValue]="";else{var l=e.bitStringContents.charCodeAt(0);if(l!==0)throw new Error("captureBitStringValue only supported for zero unused bits");r[t.captureBitStringValue]=e.bitStringContents.slice(1)}}}else n&&n.push("["+t.name+'] Expected constructed "'+t.constructed+'", got "'+e.constructed+'"');else n&&(e.tagClass!==t.tagClass&&n.push("["+t.name+'] Expected tag class "'+t.tagClass+'", got "'+e.tagClass+'"'),e.type!==t.type&&n.push("["+t.name+'] Expected type "'+t.type+'", got "'+e.type+'"'));return i};var Yle=/[^\\u0000-\\u00ff]/;Fe.prettyPrint=function(e,t,r){var n="";t=t||0,r=r||2,t>0&&(n+=`
`);for(var i="",s=0;s<t*r;++s)i+=" ";switch(n+=i+"Tag: ",e.tagClass){case Fe.Class.UNIVERSAL:n+="Universal:";break;case Fe.Class.APPLICATION:n+="Application:";break;case Fe.Class.CONTEXT_SPECIFIC:n+="Context-Specific:";break;case Fe.Class.PRIVATE:n+="Private:";break}if(e.tagClass===Fe.Class.UNIVERSAL)switch(n+=e.type,e.type){case Fe.Type.NONE:n+=" (None)";break;case Fe.Type.BOOLEAN:n+=" (Boolean)";break;case Fe.Type.INTEGER:n+=" (Integer)";break;case Fe.Type.BITSTRING:n+=" (Bit string)";break;case Fe.Type.OCTETSTRING:n+=" (Octet string)";break;case Fe.Type.NULL:n+=" (Null)";break;case Fe.Type.OID:n+=" (Object Identifier)";break;case Fe.Type.ODESC:n+=" (Object Descriptor)";break;case Fe.Type.EXTERNAL:n+=" (External or Instance of)";break;case Fe.Type.REAL:n+=" (Real)";break;case Fe.Type.ENUMERATED:n+=" (Enumerated)";break;case Fe.Type.EMBEDDED:n+=" (Embedded PDV)";break;case Fe.Type.UTF8:n+=" (UTF8)";break;case Fe.Type.ROID:n+=" (Relative Object Identifier)";break;case Fe.Type.SEQUENCE:n+=" (Sequence)";break;case Fe.Type.SET:n+=" (Set)";break;case Fe.Type.PRINTABLESTRING:n+=" (Printable String)";break;case Fe.Type.IA5String:n+=" (IA5String (ASCII))";break;case Fe.Type.UTCTIME:n+=" (UTC time)";break;case Fe.Type.GENERALIZEDTIME:n+=" (Generalized time)";break;case Fe.Type.BMPSTRING:n+=" (BMP String)";break}else n+=e.type;if(n+=`
`,n+=i+"Constructed: "+e.constructed+`
`,e.composed){for(var o=0,a="",s=0;s<e.value.length;++s)e.value[s]!==void 0&&(o+=1,a+=Fe.prettyPrint(e.value[s],t+1,r),s+1<e.value.length&&(a+=","));n+=i+"Sub values: "+o+a}else{if(n+=i+"Value: ",e.type===Fe.Type.OID){var l=Fe.derToOid(e.value);n+=l,Tn.pki&&Tn.pki.oids&&l in Tn.pki.oids&&(n+=" ("+Tn.pki.oids[l]+") ")}if(e.type===Fe.Type.INTEGER)try{n+=Fe.derToInteger(e.value)}catch{n+="0x"+Tn.util.bytesToHex(e.value)}else if(e.type===Fe.Type.BITSTRING){if(e.value.length>1?n+="0x"+Tn.util.bytesToHex(e.value.slice(1)):n+="(none)",e.value.length>0){var c=e.value.charCodeAt(0);c==1?n+=" (1 unused bit shown)":c>1&&(n+=" ("+c+" unused bits shown)")}}else if(e.type===Fe.Type.OCTETSTRING)Yle.test(e.value)||(n+="("+e.value+") "),n+="0x"+Tn.util.bytesToHex(e.value);else if(e.type===Fe.Type.UTF8)try{n+=Tn.util.decodeUtf8(e.value)}catch(u){if(u.message==="URI malformed")n+="0x"+Tn.util.bytesToHex(e.value)+" (malformed UTF8)";else throw u}else e.type===Fe.Type.PRINTABLESTRING||e.type===Fe.Type.IA5String?n+=e.value:Yle.test(e.value)?n+="0x"+Tn.util.bytesToHex(e.value):e.value.length===0?n+="[null]":n+=e.value}return n}});var Au=x((IDt,zle)=>{"use strict";var RT=Jt();zle.exports=RT.md=RT.md||{};RT.md.algorithms=RT.md.algorithms||{}});var ty=x((SDt,Jle)=>{"use strict";var Gd=Jt();Au();Dr();var B7e=Jle.exports=Gd.hmac=Gd.hmac||{};B7e.create=function(){var e=null,t=null,r=null,n=null,i={};return i.start=function(s,o){if(s!==null)if(typeof s=="string")if(s=s.toLowerCase(),s in Gd.md.algorithms)t=Gd.md.algorithms[s].create();else throw new Error('Unknown hash algorithm "'+s+'"');else t=s;if(o===null)o=e;else{if(typeof o=="string")o=Gd.util.createBuffer(o);else if(Gd.util.isArray(o)){var a=o;o=Gd.util.createBuffer();for(var l=0;l<a.length;++l)o.putByte(a[l])}var c=o.length();c>t.blockLength&&(t.start(),t.update(o.bytes()),o=t.digest()),r=Gd.util.createBuffer(),n=Gd.util.createBuffer(),c=o.length();for(var l=0;l<c;++l){var a=o.at(l);r.putByte(54^a),n.putByte(92^a)}if(c<t.blockLength)for(var a=t.blockLength-c,l=0;l<a;++l)r.putByte(54),n.putByte(92);e=o,r=r.bytes(),n=n.bytes()}t.start(),t.update(r)},i.update=function(s){t.update(s)},i.getMac=function(){var s=t.digest().bytes();return t.start(),t.update(n),t.update(s),t.digest()},i.digest=i.getMac,i}});var FT=x((BDt,ece)=>{"use strict";var mu=Jt();Au();Dr();var Zle=ece.exports=mu.md5=mu.md5||{};mu.md.md5=mu.md.algorithms.md5=Zle;Zle.create=function(){Xle||D7e();var e=null,t=mu.util.createBuffer(),r=new Array(16),n={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,s=0;s<i;++s)n.fullMessageLength.push(0);return t=mu.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},n},n.start(),n.update=function(i,s){s==="utf8"&&(i=mu.util.encodeUtf8(i));var o=i.length;n.messageLength+=o,o=[o/4294967296>>>0,o>>>0];for(var a=n.fullMessageLength.length-1;a>=0;--a)n.fullMessageLength[a]+=o[1],o[1]=o[0]+(n.fullMessageLength[a]/4294967296>>>0),n.fullMessageLength[a]=n.fullMessageLength[a]>>>0,o[0]=o[1]/4294967296>>>0;return t.putBytes(i),jle(e,r,t),(t.read>2048||t.length()===0)&&t.compact(),n},n.digest=function(){var i=mu.util.createBuffer();i.putBytes(t.bytes());var s=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,o=s&n.blockLength-1;i.putBytes(O3.substr(0,n.blockLength-o));for(var a,l=0,c=n.fullMessageLength.length-1;c>=0;--c)a=n.fullMessageLength[c]*8+l,l=a/4294967296>>>0,i.putInt32Le(a>>>0);var u={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3};jle(u,r,i);var f=mu.util.createBuffer();return f.putInt32Le(u.h0),f.putInt32Le(u.h1),f.putInt32Le(u.h2),f.putInt32Le(u.h3),f},n};var O3=null,kT=null,Wb=null,ry=null,Xle=!1;function D7e(){O3="\x80",O3+=mu.util.fillString("\0",64),kT=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],Wb=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],ry=new Array(64);for(var e=0;e<64;++e)ry[e]=Math.floor(Math.abs(Math.sin(e+1))*4294967296);Xle=!0}function jle(e,t,r){for(var n,i,s,o,a,l,c,u,f=r.length();f>=64;){for(i=e.h0,s=e.h1,o=e.h2,a=e.h3,u=0;u<16;++u)t[u]=r.getInt32Le(),l=a^s&(o^a),n=i+l+ry[u]+t[u],c=Wb[u],i=a,a=o,o=s,s+=n<<c|n>>>32-c;for(;u<32;++u)l=o^a&(s^o),n=i+l+ry[u]+t[kT[u]],c=Wb[u],i=a,a=o,o=s,s+=n<<c|n>>>32-c;for(;u<48;++u)l=s^o^a,n=i+l+ry[u]+t[kT[u]],c=Wb[u],i=a,a=o,o=s,s+=n<<c|n>>>32-c;for(;u<64;++u)l=o^(s|~a),n=i+l+ry[u]+t[kT[u]],c=Wb[u],i=a,a=o,o=s,s+=n<<c|n>>>32-c;e.h0=e.h0+i|0,e.h1=e.h1+s|0,e.h2=e.h2+o|0,e.h3=e.h3+a|0,f-=64}}});var qp=x((DDt,rce)=>{"use strict";var QT=Jt();Dr();var tce=rce.exports=QT.pem=QT.pem||{};tce.encode=function(e,t){t=t||{};var r="-----BEGIN "+e.type+`-----\r
`,n;if(e.procType&&(n={name:"Proc-Type",values:[String(e.procType.version),e.procType.type]},r+=MT(n)),e.contentDomain&&(n={name:"Content-Domain",values:[e.contentDomain]},r+=MT(n)),e.dekInfo&&(n={name:"DEK-Info",values:[e.dekInfo.algorithm]},e.dekInfo.parameters&&n.values.push(e.dekInfo.parameters),r+=MT(n)),e.headers)for(var i=0;i<e.headers.length;++i)r+=MT(e.headers[i]);return e.procType&&(r+=`\r
`),r+=QT.util.encode64(e.body,t.maxline||64)+`\r
`,r+="-----END "+e.type+`-----\r
`,r};tce.decode=function(e){for(var t=[],r=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,n=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,i=/\r?\n/,s;s=r.exec(e),!!s;){var o=s[1];o==="NEW CERTIFICATE REQUEST"&&(o="CERTIFICATE REQUEST");var a={type:o,procType:null,contentDomain:null,dekInfo:null,headers:[],body:QT.util.decode64(s[3])};if(t.push(a),!!s[2]){for(var l=s[2].split(i),c=0;s&&c<l.length;){for(var u=l[c].replace(/\s+$/,""),f=c+1;f<l.length;++f){var p=l[f];if(!/\s/.test(p[0]))break;u+=p,c=f}if(s=u.match(n),s){for(var g={name:s[1],values:[]},A=s[2].split(","),y=0;y<A.length;++y)g.values.push(T7e(A[y]));if(a.procType)if(!a.contentDomain&&g.name==="Content-Domain")a.contentDomain=A[0]||"";else if(!a.dekInfo&&g.name==="DEK-Info"){if(g.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');a.dekInfo={algorithm:A[0],parameters:A[1]||null}}else a.headers.push(g);else{if(g.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(g.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');a.procType={version:A[0],type:A[1]}}}++c}if(a.procType==="ENCRYPTED"&&!a.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(t.length===0)throw new Error("Invalid PEM formatted message.");return t};function MT(e){for(var t=e.name+": ",r=[],n=function(l,c){return" "+c},i=0;i<e.values.length;++i)r.push(e.values[i].replace(/^(\S+\r\n)/,n));t+=r.join(",")+`\r
`;for(var s=0,o=-1,i=0;i<t.length;++i,++s)if(s>65&&o!==-1){var a=t[o];a===","?(++o,t=t.substr(0,o)+`\r
 `+t.substr(o)):t=t.substr(0,o)+`\r
`+a+t.substr(o+1),s=i-o-1,o=-1,++i}else(t[i]===" "||t[i]==="	"||t[i]===",")&&(o=i);return t}function T7e(e){return e.replace(/^\s+/,"")}});var Gb=x((TDt,ice)=>{"use strict";var On=Jt();IT();Q3();Dr();ice.exports=On.des=On.des||{};On.des.startEncrypting=function(e,t,r,n){var i=NT({key:e,output:r,decrypt:!1,mode:n||(t===null?"ECB":"CBC")});return i.start(t),i};On.des.createEncryptionCipher=function(e,t){return NT({key:e,output:null,decrypt:!1,mode:t})};On.des.startDecrypting=function(e,t,r,n){var i=NT({key:e,output:r,decrypt:!0,mode:n||(t===null?"ECB":"CBC")});return i.start(t),i};On.des.createDecryptionCipher=function(e,t){return NT({key:e,output:null,decrypt:!0,mode:t})};On.des.Algorithm=function(e,t){var r=this;r.name=e,r.mode=new t({blockSize:8,cipher:{encrypt:function(n,i){return nce(r._keys,n,i,!1)},decrypt:function(n,i){return nce(r._keys,n,i,!0)}}}),r._init=!1};On.des.Algorithm.prototype.initialize=function(e){if(!this._init){var t=On.util.createBuffer(e.key);if(this.name.indexOf("3DES")===0&&t.length()!==24)throw new Error("Invalid Triple-DES key size: "+t.length()*8);this._keys=U7e(t),this._init=!0}};yu("DES-ECB",On.cipher.modes.ecb);yu("DES-CBC",On.cipher.modes.cbc);yu("DES-CFB",On.cipher.modes.cfb);yu("DES-OFB",On.cipher.modes.ofb);yu("DES-CTR",On.cipher.modes.ctr);yu("3DES-ECB",On.cipher.modes.ecb);yu("3DES-CBC",On.cipher.modes.cbc);yu("3DES-CFB",On.cipher.modes.cfb);yu("3DES-OFB",On.cipher.modes.ofb);yu("3DES-CTR",On.cipher.modes.ctr);function yu(e,t){var r=function(){return new On.des.Algorithm(e,t)};On.cipher.registerAlgorithm(e,r)}var R7e=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],k7e=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],F7e=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],M7e=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],Q7e=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],N7e=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],P7e=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],L7e=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function U7e(e){for(var t=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],n=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],s=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],o=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],a=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],l=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],c=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],u=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],f=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],p=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],g=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],A=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],y=e.length()>8?3:1,C=[],v=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],b=0,w,B=0;B<y;B++){var F=e.getInt32(),Q=e.getInt32();w=(F>>>4^Q)&252645135,Q^=w,F^=w<<4,w=(Q>>>-16^F)&65535,F^=w,Q^=w<<-16,w=(F>>>2^Q)&858993459,Q^=w,F^=w<<2,w=(Q>>>-16^F)&65535,F^=w,Q^=w<<-16,w=(F>>>1^Q)&1431655765,Q^=w,F^=w<<1,w=(Q>>>8^F)&16711935,F^=w,Q^=w<<8,w=(F>>>1^Q)&1431655765,Q^=w,F^=w<<1,w=F<<8|Q>>>20&240,F=Q<<24|Q<<8&16711680|Q>>>8&65280|Q>>>24&240,Q=w;for(var W=0;W<v.length;++W){v[W]?(F=F<<2|F>>>26,Q=Q<<2|Q>>>26):(F=F<<1|F>>>27,Q=Q<<1|Q>>>27),F&=-15,Q&=-15;var Z=t[F>>>28]|r[F>>>24&15]|n[F>>>20&15]|i[F>>>16&15]|s[F>>>12&15]|o[F>>>8&15]|a[F>>>4&15],$=l[Q>>>28]|c[Q>>>24&15]|u[Q>>>20&15]|f[Q>>>16&15]|p[Q>>>12&15]|g[Q>>>8&15]|A[Q>>>4&15];w=($>>>16^Z)&65535,C[b++]=Z^w,C[b++]=$^w<<16}}return C}function nce(e,t,r,n){var i=e.length===32?3:9,s;i===3?s=n?[30,-2,-2]:[0,32,2]:s=n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var o,a=t[0],l=t[1];o=(a>>>4^l)&252645135,l^=o,a^=o<<4,o=(a>>>16^l)&65535,l^=o,a^=o<<16,o=(l>>>2^a)&858993459,a^=o,l^=o<<2,o=(l>>>8^a)&16711935,a^=o,l^=o<<8,o=(a>>>1^l)&1431655765,l^=o,a^=o<<1,a=a<<1|a>>>31,l=l<<1|l>>>31;for(var c=0;c<i;c+=3){for(var u=s[c+1],f=s[c+2],p=s[c];p!=u;p+=f){var g=l^e[p],A=(l>>>4|l<<28)^e[p+1];o=a,a=l,l=o^(k7e[g>>>24&63]|M7e[g>>>16&63]|N7e[g>>>8&63]|L7e[g&63]|R7e[A>>>24&63]|F7e[A>>>16&63]|Q7e[A>>>8&63]|P7e[A&63])}o=a,a=l,l=o}a=a>>>1|a<<31,l=l>>>1|l<<31,o=(a>>>1^l)&1431655765,l^=o,a^=o<<1,o=(l>>>8^a)&16711935,a^=o,l^=o<<8,o=(l>>>2^a)&858993459,a^=o,l^=o<<2,o=(a>>>16^l)&65535,l^=o,a^=o<<16,o=(a>>>4^l)&252645135,l^=o,a^=o<<4,r[0]=a,r[1]=l}function NT(e){e=e||{};var t=(e.mode||"CBC").toUpperCase(),r="DES-"+t,n;e.decrypt?n=On.cipher.createDecipher(r,e.key):n=On.cipher.createCipher(r,e.key);var i=n.start;return n.start=function(s,o){var a=null;o instanceof On.util.ByteBuffer&&(a=o,o={}),o=o||{},o.output=a,o.iv=s,i.call(n,o)},n}});var PT=x((RDt,sce)=>{"use strict";var ho=Jt();ty();Au();Dr();var O7e=ho.pkcs5=ho.pkcs5||{},$d;ho.util.isNodejs&&!ho.options.usePureJavaScript&&($d=require("crypto"));sce.exports=ho.pbkdf2=O7e.pbkdf2=function(e,t,r,n,i,s){if(typeof i=="function"&&(s=i,i=null),ho.util.isNodejs&&!ho.options.usePureJavaScript&&$d.pbkdf2&&(i===null||typeof i!="object")&&($d.pbkdf2Sync.length>4||!i||i==="sha1"))return typeof i!="string"&&(i="sha1"),e=Buffer.from(e,"binary"),t=Buffer.from(t,"binary"),s?$d.pbkdf2Sync.length===4?$d.pbkdf2(e,t,r,n,function(w,B){if(w)return s(w);s(null,B.toString("binary"))}):$d.pbkdf2(e,t,r,n,i,function(w,B){if(w)return s(w);s(null,B.toString("binary"))}):$d.pbkdf2Sync.length===4?$d.pbkdf2Sync(e,t,r,n).toString("binary"):$d.pbkdf2Sync(e,t,r,n,i).toString("binary");if((typeof i>"u"||i===null)&&(i="sha1"),typeof i=="string"){if(!(i in ho.md.algorithms))throw new Error("Unknown hash algorithm: "+i);i=ho.md[i].create()}var o=i.digestLength;if(n>4294967295*o){var a=new Error("Derived key is too long.");if(s)return s(a);throw a}var l=Math.ceil(n/o),c=n-(l-1)*o,u=ho.hmac.create();u.start(i,e);var f="",p,g,A;if(!s){for(var y=1;y<=l;++y){u.start(null,null),u.update(t),u.update(ho.util.int32ToBytes(y)),p=A=u.digest().getBytes();for(var C=2;C<=r;++C)u.start(null,null),u.update(A),g=u.digest().getBytes(),p=ho.util.xorBytes(p,g,o),A=g;f+=y<l?p:p.substr(0,c)}return f}var y=1,C;function v(){if(y>l)return s(null,f);u.start(null,null),u.update(t),u.update(ho.util.int32ToBytes(y)),p=A=u.digest().getBytes(),C=2,b()}function b(){if(C<=r)return u.start(null,null),u.update(A),g=u.digest().getBytes(),p=ho.util.xorBytes(p,g,o),A=g,++C,ho.util.setImmediate(b);f+=y<l?p:p.substr(0,c),++y,v()}v()}});var V3=x((kDt,uce)=>{"use strict";var Cu=Jt();Au();Dr();var ace=uce.exports=Cu.sha256=Cu.sha256||{};Cu.md.sha256=Cu.md.algorithms.sha256=ace;ace.create=function(){lce||q7e();var e=null,t=Cu.util.createBuffer(),r=new Array(64),n={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,s=0;s<i;++s)n.fullMessageLength.push(0);return t=Cu.util.createBuffer(),e={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},n},n.start(),n.update=function(i,s){s==="utf8"&&(i=Cu.util.encodeUtf8(i));var o=i.length;n.messageLength+=o,o=[o/4294967296>>>0,o>>>0];for(var a=n.fullMessageLength.length-1;a>=0;--a)n.fullMessageLength[a]+=o[1],o[1]=o[0]+(n.fullMessageLength[a]/4294967296>>>0),n.fullMessageLength[a]=n.fullMessageLength[a]>>>0,o[0]=o[1]/4294967296>>>0;return t.putBytes(i),oce(e,r,t),(t.read>2048||t.length()===0)&&t.compact(),n},n.digest=function(){var i=Cu.util.createBuffer();i.putBytes(t.bytes());var s=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,o=s&n.blockLength-1;i.putBytes(q3.substr(0,n.blockLength-o));for(var a,l,c=n.fullMessageLength[0]*8,u=0;u<n.fullMessageLength.length-1;++u)a=n.fullMessageLength[u+1]*8,l=a/4294967296>>>0,c+=l,i.putInt32(c>>>0),c=a>>>0;i.putInt32(c);var f={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4,h5:e.h5,h6:e.h6,h7:e.h7};oce(f,r,i);var p=Cu.util.createBuffer();return p.putInt32(f.h0),p.putInt32(f.h1),p.putInt32(f.h2),p.putInt32(f.h3),p.putInt32(f.h4),p.putInt32(f.h5),p.putInt32(f.h6),p.putInt32(f.h7),p},n};var q3=null,lce=!1,cce=null;function q7e(){q3="\x80",q3+=Cu.util.fillString("\0",64),cce=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],lce=!0}function oce(e,t,r){for(var n,i,s,o,a,l,c,u,f,p,g,A,y,C,v,b=r.length();b>=64;){for(c=0;c<16;++c)t[c]=r.getInt32();for(;c<64;++c)n=t[c-2],n=(n>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=t[c-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,t[c]=n+t[c-7]+i+t[c-16]|0;for(u=e.h0,f=e.h1,p=e.h2,g=e.h3,A=e.h4,y=e.h5,C=e.h6,v=e.h7,c=0;c<64;++c)o=(A>>>6|A<<26)^(A>>>11|A<<21)^(A>>>25|A<<7),a=C^A&(y^C),s=(u>>>2|u<<30)^(u>>>13|u<<19)^(u>>>22|u<<10),l=u&f|p&(u^f),n=v+o+a+cce[c]+t[c],i=s+l,v=C,C=y,y=A,A=g+n>>>0,g=p,p=f,f=u,u=n+i>>>0;e.h0=e.h0+u|0,e.h1=e.h1+f|0,e.h2=e.h2+p|0,e.h3=e.h3+g|0,e.h4=e.h4+A|0,e.h5=e.h5+y|0,e.h6=e.h6+C|0,e.h7=e.h7+v|0,b-=64}}});var H3=x((FDt,dce)=>{"use strict";var vu=Jt();Dr();var LT=null;vu.util.isNodejs&&!vu.options.usePureJavaScript&&!process.versions["node-webkit"]&&(LT=require("crypto"));var V7e=dce.exports=vu.prng=vu.prng||{};V7e.create=function(e){for(var t={plugin:e,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=e.md,n=new Array(32),i=0;i<32;++i)n[i]=r.create();t.pools=n,t.pool=0,t.generate=function(c,u){if(!u)return t.generateSync(c);var f=t.plugin.cipher,p=t.plugin.increment,g=t.plugin.formatKey,A=t.plugin.formatSeed,y=vu.util.createBuffer();t.key=null,C();function C(v){if(v)return u(v);if(y.length()>=c)return u(null,y.getBytes(c));if(t.generated>1048575&&(t.key=null),t.key===null)return vu.util.nextTick(function(){s(C)});var b=f(t.key,t.seed);t.generated+=b.length,y.putBytes(b),t.key=g(f(t.key,p(t.seed))),t.seed=A(f(t.key,t.seed)),vu.util.setImmediate(C)}},t.generateSync=function(c){var u=t.plugin.cipher,f=t.plugin.increment,p=t.plugin.formatKey,g=t.plugin.formatSeed;t.key=null;for(var A=vu.util.createBuffer();A.length()<c;){t.generated>1048575&&(t.key=null),t.key===null&&o();var y=u(t.key,t.seed);t.generated+=y.length,A.putBytes(y),t.key=p(u(t.key,f(t.seed))),t.seed=g(u(t.key,t.seed))}return A.getBytes(c)};function s(c){if(t.pools[0].messageLength>=32)return a(),c();var u=32-t.pools[0].messageLength<<5;t.seedFile(u,function(f,p){if(f)return c(f);t.collect(p),a(),c()})}function o(){if(t.pools[0].messageLength>=32)return a();var c=32-t.pools[0].messageLength<<5;t.collect(t.seedFileSync(c)),a()}function a(){t.reseeds=t.reseeds===4294967295?0:t.reseeds+1;var c=t.plugin.md.create();c.update(t.keyBytes);for(var u=1,f=0;f<32;++f)t.reseeds%u===0&&(c.update(t.pools[f].digest().getBytes()),t.pools[f].start()),u=u<<1;t.keyBytes=c.digest().getBytes(),c.start(),c.update(t.keyBytes);var p=c.digest().getBytes();t.key=t.plugin.formatKey(t.keyBytes),t.seed=t.plugin.formatSeed(p),t.generated=0}function l(c){var u=null,f=vu.util.globalScope,p=f.crypto||f.msCrypto;p&&p.getRandomValues&&(u=function(F){return p.getRandomValues(F)});var g=vu.util.createBuffer();if(u)for(;g.length()<c;){var A=Math.max(1,Math.min(c-g.length(),65536)/4),y=new Uint32Array(Math.floor(A));try{u(y);for(var C=0;C<y.length;++C)g.putInt32(y[C])}catch(F){if(!(typeof QuotaExceededError<"u"&&F instanceof QuotaExceededError))throw F}}if(g.length()<c)for(var v,b,w,B=Math.floor(Math.random()*65536);g.length()<c;){b=16807*(B&65535),v=16807*(B>>16),b+=(v&32767)<<16,b+=v>>15,b=(b&2147483647)+(b>>31),B=b&4294967295;for(var C=0;C<3;++C)w=B>>>(C<<3),w^=Math.floor(Math.random()*256),g.putByte(w&255)}return g.getBytes(c)}return LT?(t.seedFile=function(c,u){LT.randomBytes(c,function(f,p){if(f)return u(f);u(null,p.toString())})},t.seedFileSync=function(c){return LT.randomBytes(c).toString()}):(t.seedFile=function(c,u){try{u(null,l(c))}catch(f){u(f)}},t.seedFileSync=l),t.collect=function(c){for(var u=c.length,f=0;f<u;++f)t.pools[t.pool].update(c.substr(f,1)),t.pool=t.pool===31?0:t.pool+1},t.collectInt=function(c,u){for(var f="",p=0;p<u;p+=8)f+=String.fromCharCode(c>>p&255);t.collect(f)},t.registerWorker=function(c){if(c===self)t.seedFile=function(f,p){function g(A){var y=A.data;y.forge&&y.forge.prng&&(self.removeEventListener("message",g),p(y.forge.prng.err,y.forge.prng.bytes))}self.addEventListener("message",g),self.postMessage({forge:{prng:{needed:f}}})};else{var u=function(f){var p=f.data;p.forge&&p.forge.prng&&t.seedFile(p.forge.prng.needed,function(g,A){c.postMessage({forge:{prng:{err:g,bytes:A}}})})};c.addEventListener("message",u)}},t}});var vl=x((MDt,W3)=>{"use strict";var ns=Jt();xh();V3();H3();Dr();(function(){if(ns.random&&ns.random.getBytes){W3.exports=ns.random;return}(function(e){var t={},r=new Array(4),n=ns.util.createBuffer();t.formatKey=function(f){var p=ns.util.createBuffer(f);return f=new Array(4),f[0]=p.getInt32(),f[1]=p.getInt32(),f[2]=p.getInt32(),f[3]=p.getInt32(),ns.aes._expandKey(f,!1)},t.formatSeed=function(f){var p=ns.util.createBuffer(f);return f=new Array(4),f[0]=p.getInt32(),f[1]=p.getInt32(),f[2]=p.getInt32(),f[3]=p.getInt32(),f},t.cipher=function(f,p){return ns.aes._updateBlock(f,p,r,!1),n.putInt32(r[0]),n.putInt32(r[1]),n.putInt32(r[2]),n.putInt32(r[3]),n.getBytes()},t.increment=function(f){return++f[3],f},t.md=ns.md.sha256;function i(){var f=ns.prng.create(t);return f.getBytes=function(p,g){return f.generate(p,g)},f.getBytesSync=function(p){return f.generate(p)},f}var s=i(),o=null,a=ns.util.globalScope,l=a.crypto||a.msCrypto;if(l&&l.getRandomValues&&(o=function(f){return l.getRandomValues(f)}),ns.options.usePureJavaScript||!ns.util.isNodejs&&!o){if(typeof window>"u"||window.document,s.collectInt(+new Date,32),typeof navigator<"u"){var c="";for(var u in navigator)try{typeof navigator[u]=="string"&&(c+=navigator[u])}catch{}s.collect(c),c=null}e&&(e().mousemove(function(f){s.collectInt(f.clientX,16),s.collectInt(f.clientY,16)}),e().keypress(function(f){s.collectInt(f.charCode,8)}))}if(!ns.random)ns.random=s;else for(var u in s)ns.random[u]=s[u];ns.random.createInstance=i,W3.exports=ns.random})(typeof jQuery<"u"?jQuery:null)})()});var $3=x((QDt,gce)=>{"use strict";var Ko=Jt();Dr();var G3=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],fce=[1,2,3,5],H7e=function(e,t){return e<<t&65535|(e&65535)>>16-t},W7e=function(e,t){return(e&65535)>>t|e<<16-t&65535};gce.exports=Ko.rc2=Ko.rc2||{};Ko.rc2.expandKey=function(e,t){typeof e=="string"&&(e=Ko.util.createBuffer(e)),t=t||128;var r=e,n=e.length(),i=t,s=Math.ceil(i/8),o=255>>(i&7),a;for(a=n;a<128;a++)r.putByte(G3[r.at(a-1)+r.at(a-n)&255]);for(r.setAt(128-s,G3[r.at(128-s)&o]),a=127-s;a>=0;a--)r.setAt(a,G3[r.at(a+1)^r.at(a+s)]);return r};var hce=function(e,t,r){var n=!1,i=null,s=null,o=null,a,l,c,u,f=[];for(e=Ko.rc2.expandKey(e,t),c=0;c<64;c++)f.push(e.getInt16Le());r?(a=function(A){for(c=0;c<4;c++)A[c]+=f[u]+(A[(c+3)%4]&A[(c+2)%4])+(~A[(c+3)%4]&A[(c+1)%4]),A[c]=H7e(A[c],fce[c]),u++},l=function(A){for(c=0;c<4;c++)A[c]+=f[A[(c+3)%4]&63]}):(a=function(A){for(c=3;c>=0;c--)A[c]=W7e(A[c],fce[c]),A[c]-=f[u]+(A[(c+3)%4]&A[(c+2)%4])+(~A[(c+3)%4]&A[(c+1)%4]),u--},l=function(A){for(c=3;c>=0;c--)A[c]-=f[A[(c+3)%4]&63]});var p=function(A){var y=[];for(c=0;c<4;c++){var C=i.getInt16Le();o!==null&&(r?C^=o.getInt16Le():o.putInt16Le(C)),y.push(C&65535)}u=r?0:63;for(var v=0;v<A.length;v++)for(var b=0;b<A[v][0];b++)A[v][1](y);for(c=0;c<4;c++)o!==null&&(r?o.putInt16Le(y[c]):y[c]^=o.getInt16Le()),s.putInt16Le(y[c])},g=null;return g={start:function(A,y){A&&typeof A=="string"&&(A=Ko.util.createBuffer(A)),n=!1,i=Ko.util.createBuffer(),s=y||new Ko.util.createBuffer,o=A,g.output=s},update:function(A){for(n||i.putBuffer(A);i.length()>=8;)p([[5,a],[1,l],[6,a],[1,l],[5,a]])},finish:function(A){var y=!0;if(r)if(A)y=A(8,i,!r);else{var C=i.length()===8?8:8-i.length();i.fillWithByte(C,C)}if(y&&(n=!0,g.update()),!r&&(y=i.length()===0,y))if(A)y=A(8,s,!r);else{var v=s.length(),b=s.at(v-1);b>v?y=!1:s.truncate(b)}return y}},g};Ko.rc2.startEncrypting=function(e,t,r){var n=Ko.rc2.createEncryptionCipher(e,128);return n.start(t,r),n};Ko.rc2.createEncryptionCipher=function(e,t){return hce(e,t,!0)};Ko.rc2.startDecrypting=function(e,t,r){var n=Ko.rc2.createDecryptionCipher(e,128);return n.start(t,r),n};Ko.rc2.createDecryptionCipher=function(e,t){return hce(e,t,!1)}});var Yb=x((NDt,bce)=>{"use strict";var Y3=Jt();bce.exports=Y3.jsbn=Y3.jsbn||{};var Yd,G7e=0xdeadbeefcafe,pce=(G7e&16777215)==15715070;function pe(e,t,r){this.data=[],e!=null&&(typeof e=="number"?this.fromNumber(e,t,r):t==null&&typeof e!="string"?this.fromString(e,256):this.fromString(e,t))}Y3.jsbn.BigInteger=pe;function Tr(){return new pe(null)}function $7e(e,t,r,n,i,s){for(;--s>=0;){var o=t*this.data[e++]+r.data[n]+i;i=Math.floor(o/67108864),r.data[n++]=o&67108863}return i}function Y7e(e,t,r,n,i,s){for(var o=t&32767,a=t>>15;--s>=0;){var l=this.data[e]&32767,c=this.data[e++]>>15,u=a*l+c*o;l=o*l+((u&32767)<<15)+r.data[n]+(i&1073741823),i=(l>>>30)+(u>>>15)+a*c+(i>>>30),r.data[n++]=l&1073741823}return i}function Ace(e,t,r,n,i,s){for(var o=t&16383,a=t>>14;--s>=0;){var l=this.data[e]&16383,c=this.data[e++]>>14,u=a*l+c*o;l=o*l+((u&16383)<<14)+r.data[n]+i,i=(l>>28)+(u>>14)+a*c,r.data[n++]=l&268435455}return i}typeof navigator>"u"?(pe.prototype.am=Ace,Yd=28):pce&&navigator.appName=="Microsoft Internet Explorer"?(pe.prototype.am=Y7e,Yd=30):pce&&navigator.appName!="Netscape"?(pe.prototype.am=$7e,Yd=26):(pe.prototype.am=Ace,Yd=28);pe.prototype.DB=Yd;pe.prototype.DM=(1<<Yd)-1;pe.prototype.DV=1<<Yd;var K3=52;pe.prototype.FV=Math.pow(2,K3);pe.prototype.F1=K3-Yd;pe.prototype.F2=2*Yd-K3;var K7e="0123456789abcdefghijklmnopqrstuvwxyz",UT=new Array,ny,El;ny=48;for(El=0;El<=9;++El)UT[ny++]=El;ny=97;for(El=10;El<36;++El)UT[ny++]=El;ny=65;for(El=10;El<36;++El)UT[ny++]=El;function mce(e){return K7e.charAt(e)}function yce(e,t){var r=UT[e.charCodeAt(t)];return r??-1}function z7e(e){for(var t=this.t-1;t>=0;--t)e.data[t]=this.data[t];e.t=this.t,e.s=this.s}function J7e(e){this.t=1,this.s=e<0?-1:0,e>0?this.data[0]=e:e<-1?this.data[0]=e+this.DV:this.t=0}function wh(e){var t=Tr();return t.fromInt(e),t}function j7e(e,t){var r;if(t==16)r=4;else if(t==8)r=3;else if(t==256)r=8;else if(t==2)r=1;else if(t==32)r=5;else if(t==4)r=2;else{this.fromRadix(e,t);return}this.t=0,this.s=0;for(var n=e.length,i=!1,s=0;--n>=0;){var o=r==8?e[n]&255:yce(e,n);if(o<0){e.charAt(n)=="-"&&(i=!0);continue}i=!1,s==0?this.data[this.t++]=o:s+r>this.DB?(this.data[this.t-1]|=(o&(1<<this.DB-s)-1)<<s,this.data[this.t++]=o>>this.DB-s):this.data[this.t-1]|=o<<s,s+=r,s>=this.DB&&(s-=this.DB)}r==8&&e[0]&128&&(this.s=-1,s>0&&(this.data[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),i&&pe.ZERO.subTo(this,this)}function Z7e(){for(var e=this.s&this.DM;this.t>0&&this.data[this.t-1]==e;)--this.t}function X7e(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(e==16)t=4;else if(e==8)t=3;else if(e==2)t=1;else if(e==32)t=5;else if(e==4)t=2;else return this.toRadix(e);var r=(1<<t)-1,n,i=!1,s="",o=this.t,a=this.DB-o*this.DB%t;if(o-- >0)for(a<this.DB&&(n=this.data[o]>>a)>0&&(i=!0,s=mce(n));o>=0;)a<t?(n=(this.data[o]&(1<<a)-1)<<t-a,n|=this.data[--o]>>(a+=this.DB-t)):(n=this.data[o]>>(a-=t)&r,a<=0&&(a+=this.DB,--o)),n>0&&(i=!0),i&&(s+=mce(n));return i?s:"0"}function eZe(){var e=Tr();return pe.ZERO.subTo(this,e),e}function tZe(){return this.s<0?this.negate():this}function rZe(e){var t=this.s-e.s;if(t!=0)return t;var r=this.t;if(t=r-e.t,t!=0)return this.s<0?-t:t;for(;--r>=0;)if((t=this.data[r]-e.data[r])!=0)return t;return 0}function OT(e){var t=1,r;return(r=e>>>16)!=0&&(e=r,t+=16),(r=e>>8)!=0&&(e=r,t+=8),(r=e>>4)!=0&&(e=r,t+=4),(r=e>>2)!=0&&(e=r,t+=2),(r=e>>1)!=0&&(e=r,t+=1),t}function nZe(){return this.t<=0?0:this.DB*(this.t-1)+OT(this.data[this.t-1]^this.s&this.DM)}function iZe(e,t){var r;for(r=this.t-1;r>=0;--r)t.data[r+e]=this.data[r];for(r=e-1;r>=0;--r)t.data[r]=0;t.t=this.t+e,t.s=this.s}function sZe(e,t){for(var r=e;r<this.t;++r)t.data[r-e]=this.data[r];t.t=Math.max(this.t-e,0),t.s=this.s}function oZe(e,t){var r=e%this.DB,n=this.DB-r,i=(1<<n)-1,s=Math.floor(e/this.DB),o=this.s<<r&this.DM,a;for(a=this.t-1;a>=0;--a)t.data[a+s+1]=this.data[a]>>n|o,o=(this.data[a]&i)<<r;for(a=s-1;a>=0;--a)t.data[a]=0;t.data[s]=o,t.t=this.t+s+1,t.s=this.s,t.clamp()}function aZe(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t){t.t=0;return}var n=e%this.DB,i=this.DB-n,s=(1<<n)-1;t.data[0]=this.data[r]>>n;for(var o=r+1;o<this.t;++o)t.data[o-r-1]|=(this.data[o]&s)<<i,t.data[o-r]=this.data[o]>>n;n>0&&(t.data[this.t-r-1]|=(this.s&s)<<i),t.t=this.t-r,t.clamp()}function lZe(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this.data[r]-e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n-=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t.data[r++]=this.DV+n:n>0&&(t.data[r++]=n),t.t=r,t.clamp()}function cZe(e,t){var r=this.abs(),n=e.abs(),i=r.t;for(t.t=i+n.t;--i>=0;)t.data[i]=0;for(i=0;i<n.t;++i)t.data[i+r.t]=r.am(0,n.data[i],t,i,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&pe.ZERO.subTo(t,t)}function uZe(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e.data[r]=0;for(r=0;r<t.t-1;++r){var n=t.am(r,t.data[r],e,2*r,0,1);(e.data[r+t.t]+=t.am(r+1,2*t.data[r],e,2*r+1,n,t.t-r-1))>=t.DV&&(e.data[r+t.t]-=t.DV,e.data[r+t.t+1]=1)}e.t>0&&(e.data[e.t-1]+=t.am(r,t.data[r],e,2*r,0,1)),e.s=0,e.clamp()}function dZe(e,t,r){var n=e.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t){t?.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=Tr());var s=Tr(),o=this.s,a=e.s,l=this.DB-OT(n.data[n.t-1]);l>0?(n.lShiftTo(l,s),i.lShiftTo(l,r)):(n.copyTo(s),i.copyTo(r));var c=s.t,u=s.data[c-1];if(u!=0){var f=u*(1<<this.F1)+(c>1?s.data[c-2]>>this.F2:0),p=this.FV/f,g=(1<<this.F1)/f,A=1<<this.F2,y=r.t,C=y-c,v=t??Tr();for(s.dlShiftTo(C,v),r.compareTo(v)>=0&&(r.data[r.t++]=1,r.subTo(v,r)),pe.ONE.dlShiftTo(c,v),v.subTo(s,s);s.t<c;)s.data[s.t++]=0;for(;--C>=0;){var b=r.data[--y]==u?this.DM:Math.floor(r.data[y]*p+(r.data[y-1]+A)*g);if((r.data[y]+=s.am(0,b,r,C,0,c))<b)for(s.dlShiftTo(C,v),r.subTo(v,r);r.data[y]<--b;)r.subTo(v,r)}t!=null&&(r.drShiftTo(c,t),o!=a&&pe.ZERO.subTo(t,t)),r.t=c,r.clamp(),l>0&&r.rShiftTo(l,r),o<0&&pe.ZERO.subTo(r,r)}}}function fZe(e){var t=Tr();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(pe.ZERO)>0&&e.subTo(t,t),t}function Vp(e){this.m=e}function hZe(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function gZe(e){return e}function pZe(e){e.divRemTo(this.m,null,e)}function AZe(e,t,r){e.multiplyTo(t,r),this.reduce(r)}function mZe(e,t){e.squareTo(t),this.reduce(t)}Vp.prototype.convert=hZe;Vp.prototype.revert=gZe;Vp.prototype.reduce=pZe;Vp.prototype.mulTo=AZe;Vp.prototype.sqrTo=mZe;function yZe(){if(this.t<1)return 0;var e=this.data[0];if(!(e&1))return 0;var t=e&3;return t=t*(2-(e&15)*t)&15,t=t*(2-(e&255)*t)&255,t=t*(2-((e&65535)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function Hp(e){this.m=e,this.mp=e.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function CZe(e){var t=Tr();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(pe.ZERO)>0&&this.m.subTo(t,t),t}function vZe(e){var t=Tr();return e.copyTo(t),this.reduce(t),t}function EZe(e){for(;e.t<=this.mt2;)e.data[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=e.data[t]&32767,n=r*this.mpl+((r*this.mph+(e.data[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(r=t+this.m.t,e.data[r]+=this.m.am(0,n,e,t,0,this.m.t);e.data[r]>=e.DV;)e.data[r]-=e.DV,e.data[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function bZe(e,t){e.squareTo(t),this.reduce(t)}function xZe(e,t,r){e.multiplyTo(t,r),this.reduce(r)}Hp.prototype.convert=CZe;Hp.prototype.revert=vZe;Hp.prototype.reduce=EZe;Hp.prototype.mulTo=xZe;Hp.prototype.sqrTo=bZe;function _Ze(){return(this.t>0?this.data[0]&1:this.s)==0}function wZe(e,t){if(e>4294967295||e<1)return pe.ONE;var r=Tr(),n=Tr(),i=t.convert(this),s=OT(e)-1;for(i.copyTo(r);--s>=0;)if(t.sqrTo(r,n),(e&1<<s)>0)t.mulTo(n,i,r);else{var o=r;r=n,n=o}return t.revert(r)}function IZe(e,t){var r;return e<256||t.isEven()?r=new Vp(t):r=new Hp(t),this.exp(e,r)}pe.prototype.copyTo=z7e;pe.prototype.fromInt=J7e;pe.prototype.fromString=j7e;pe.prototype.clamp=Z7e;pe.prototype.dlShiftTo=iZe;pe.prototype.drShiftTo=sZe;pe.prototype.lShiftTo=oZe;pe.prototype.rShiftTo=aZe;pe.prototype.subTo=lZe;pe.prototype.multiplyTo=cZe;pe.prototype.squareTo=uZe;pe.prototype.divRemTo=dZe;pe.prototype.invDigit=yZe;pe.prototype.isEven=_Ze;pe.prototype.exp=wZe;pe.prototype.toString=X7e;pe.prototype.negate=eZe;pe.prototype.abs=tZe;pe.prototype.compareTo=rZe;pe.prototype.bitLength=nZe;pe.prototype.mod=fZe;pe.prototype.modPowInt=IZe;pe.ZERO=wh(0);pe.ONE=wh(1);function SZe(){var e=Tr();return this.copyTo(e),e}function BZe(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function DZe(){return this.t==0?this.s:this.data[0]<<24>>24}function TZe(){return this.t==0?this.s:this.data[0]<<16>>16}function RZe(e){return Math.floor(Math.LN2*this.DB/Math.log(e))}function kZe(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function FZe(e){if(e==null&&(e=10),this.signum()==0||e<2||e>36)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),n=wh(r),i=Tr(),s=Tr(),o="";for(this.divRemTo(n,i,s);i.signum()>0;)o=(r+s.intValue()).toString(e).substr(1)+o,i.divRemTo(n,i,s);return s.intValue().toString(e)+o}function MZe(e,t){this.fromInt(0),t==null&&(t=10);for(var r=this.chunkSize(t),n=Math.pow(t,r),i=!1,s=0,o=0,a=0;a<e.length;++a){var l=yce(e,a);if(l<0){e.charAt(a)=="-"&&this.signum()==0&&(i=!0);continue}o=t*o+l,++s>=r&&(this.dMultiply(n),this.dAddOffset(o,0),s=0,o=0)}s>0&&(this.dMultiply(Math.pow(t,s)),this.dAddOffset(o,0)),i&&pe.ZERO.subTo(this,this)}function QZe(e,t,r){if(typeof t=="number")if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(pe.ONE.shiftLeft(e-1),z3,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(pe.ONE.shiftLeft(e-1),this);else{var n=new Array,i=e&7;n.length=(e>>3)+1,t.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}}function NZe(){var e=this.t,t=new Array;t[0]=this.s;var r=this.DB-e*this.DB%8,n,i=0;if(e-- >0)for(r<this.DB&&(n=this.data[e]>>r)!=(this.s&this.DM)>>r&&(t[i++]=n|this.s<<this.DB-r);e>=0;)r<8?(n=(this.data[e]&(1<<r)-1)<<8-r,n|=this.data[--e]>>(r+=this.DB-8)):(n=this.data[e]>>(r-=8)&255,r<=0&&(r+=this.DB,--e)),n&128&&(n|=-256),i==0&&(this.s&128)!=(n&128)&&++i,(i>0||n!=this.s)&&(t[i++]=n);return t}function PZe(e){return this.compareTo(e)==0}function LZe(e){return this.compareTo(e)<0?this:e}function UZe(e){return this.compareTo(e)>0?this:e}function OZe(e,t,r){var n,i,s=Math.min(e.t,this.t);for(n=0;n<s;++n)r.data[n]=t(this.data[n],e.data[n]);if(e.t<this.t){for(i=e.s&this.DM,n=s;n<this.t;++n)r.data[n]=t(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=s;n<e.t;++n)r.data[n]=t(i,e.data[n]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()}function qZe(e,t){return e&t}function VZe(e){var t=Tr();return this.bitwiseTo(e,qZe,t),t}function z3(e,t){return e|t}function HZe(e){var t=Tr();return this.bitwiseTo(e,z3,t),t}function Cce(e,t){return e^t}function WZe(e){var t=Tr();return this.bitwiseTo(e,Cce,t),t}function vce(e,t){return e&~t}function GZe(e){var t=Tr();return this.bitwiseTo(e,vce,t),t}function $Ze(){for(var e=Tr(),t=0;t<this.t;++t)e.data[t]=this.DM&~this.data[t];return e.t=this.t,e.s=~this.s,e}function YZe(e){var t=Tr();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t}function KZe(e){var t=Tr();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t}function zZe(e){if(e==0)return-1;var t=0;return e&65535||(e>>=16,t+=16),e&255||(e>>=8,t+=8),e&15||(e>>=4,t+=4),e&3||(e>>=2,t+=2),e&1||++t,t}function JZe(){for(var e=0;e<this.t;++e)if(this.data[e]!=0)return e*this.DB+zZe(this.data[e]);return this.s<0?this.t*this.DB:-1}function jZe(e){for(var t=0;e!=0;)e&=e-1,++t;return t}function ZZe(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=jZe(this.data[r]^t);return e}function XZe(e){var t=Math.floor(e/this.DB);return t>=this.t?this.s!=0:(this.data[t]&1<<e%this.DB)!=0}function eXe(e,t){var r=pe.ONE.shiftLeft(e);return this.bitwiseTo(r,t,r),r}function tXe(e){return this.changeBit(e,z3)}function rXe(e){return this.changeBit(e,vce)}function nXe(e){return this.changeBit(e,Cce)}function iXe(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this.data[r]+e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n+=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,n>0?t.data[r++]=n:n<-1&&(t.data[r++]=this.DV+n),t.t=r,t.clamp()}function sXe(e){var t=Tr();return this.addTo(e,t),t}function oXe(e){var t=Tr();return this.subTo(e,t),t}function aXe(e){var t=Tr();return this.multiplyTo(e,t),t}function lXe(e){var t=Tr();return this.divRemTo(e,t,null),t}function cXe(e){var t=Tr();return this.divRemTo(e,null,t),t}function uXe(e){var t=Tr(),r=Tr();return this.divRemTo(e,t,r),new Array(t,r)}function dXe(e){this.data[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()}function fXe(e,t){if(e!=0){for(;this.t<=t;)this.data[this.t++]=0;for(this.data[t]+=e;this.data[t]>=this.DV;)this.data[t]-=this.DV,++t>=this.t&&(this.data[this.t++]=0),++this.data[t]}}function $b(){}function Ece(e){return e}function hXe(e,t,r){e.multiplyTo(t,r)}function gXe(e,t){e.squareTo(t)}$b.prototype.convert=Ece;$b.prototype.revert=Ece;$b.prototype.mulTo=hXe;$b.prototype.sqrTo=gXe;function pXe(e){return this.exp(e,new $b)}function AXe(e,t,r){var n=Math.min(this.t+e.t,t);for(r.s=0,r.t=n;n>0;)r.data[--n]=0;var i;for(i=r.t-this.t;n<i;++n)r.data[n+this.t]=this.am(0,e.data[n],r,n,0,this.t);for(i=Math.min(e.t,t);n<i;++n)this.am(0,e.data[n],r,n,0,t-n);r.clamp()}function mXe(e,t,r){--t;var n=r.t=this.t+e.t-t;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)r.data[this.t+n-t]=this.am(t-n,e.data[n],r,0,0,this.t+n-t);r.clamp(),r.drShiftTo(1,r)}function iy(e){this.r2=Tr(),this.q3=Tr(),pe.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}function yXe(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=Tr();return e.copyTo(t),this.reduce(t),t}function CXe(e){return e}function vXe(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)}function EXe(e,t){e.squareTo(t),this.reduce(t)}function bXe(e,t,r){e.multiplyTo(t,r),this.reduce(r)}iy.prototype.convert=yXe;iy.prototype.revert=CXe;iy.prototype.reduce=vXe;iy.prototype.mulTo=bXe;iy.prototype.sqrTo=EXe;function xXe(e,t){var r=e.bitLength(),n,i=wh(1),s;if(r<=0)return i;r<18?n=1:r<48?n=3:r<144?n=4:r<768?n=5:n=6,r<8?s=new Vp(t):t.isEven()?s=new iy(t):s=new Hp(t);var o=new Array,a=3,l=n-1,c=(1<<n)-1;if(o[1]=s.convert(this),n>1){var u=Tr();for(s.sqrTo(o[1],u);a<=c;)o[a]=Tr(),s.mulTo(u,o[a-2],o[a]),a+=2}var f=e.t-1,p,g=!0,A=Tr(),y;for(r=OT(e.data[f])-1;f>=0;){for(r>=l?p=e.data[f]>>r-l&c:(p=(e.data[f]&(1<<r+1)-1)<<l-r,f>0&&(p|=e.data[f-1]>>this.DB+r-l)),a=n;!(p&1);)p>>=1,--a;if((r-=a)<0&&(r+=this.DB,--f),g)o[p].copyTo(i),g=!1;else{for(;a>1;)s.sqrTo(i,A),s.sqrTo(A,i),a-=2;a>0?s.sqrTo(i,A):(y=i,i=A,A=y),s.mulTo(A,o[p],i)}for(;f>=0&&!(e.data[f]&1<<r);)s.sqrTo(i,A),y=i,i=A,A=y,--r<0&&(r=this.DB-1,--f)}return s.revert(i)}function _Xe(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(t.compareTo(r)<0){var n=t;t=r,r=n}var i=t.getLowestSetBit(),s=r.getLowestSetBit();if(s<0)return t;for(i<s&&(s=i),s>0&&(t.rShiftTo(s,t),r.rShiftTo(s,r));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return s>0&&r.lShiftTo(s,r),r}function wXe(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(t==0)r=this.data[0]%e;else for(var n=this.t-1;n>=0;--n)r=(t*r+this.data[n])%e;return r}function IXe(e){var t=e.isEven();if(this.isEven()&&t||e.signum()==0)return pe.ZERO;for(var r=e.clone(),n=this.clone(),i=wh(1),s=wh(0),o=wh(0),a=wh(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),t?((!i.isEven()||!s.isEven())&&(i.addTo(this,i),s.subTo(e,s)),i.rShiftTo(1,i)):s.isEven()||s.subTo(e,s),s.rShiftTo(1,s);for(;n.isEven();)n.rShiftTo(1,n),t?((!o.isEven()||!a.isEven())&&(o.addTo(this,o),a.subTo(e,a)),o.rShiftTo(1,o)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);r.compareTo(n)>=0?(r.subTo(n,r),t&&i.subTo(o,i),s.subTo(a,s)):(n.subTo(r,n),t&&o.subTo(i,o),a.subTo(s,a))}if(n.compareTo(pe.ONE)!=0)return pe.ZERO;if(a.compareTo(e)>=0)return a.subtract(e);if(a.signum()<0)a.addTo(e,a);else return a;return a.signum()<0?a.add(e):a}var xc=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],SXe=(1<<26)/xc[xc.length-1];function BXe(e){var t,r=this.abs();if(r.t==1&&r.data[0]<=xc[xc.length-1]){for(t=0;t<xc.length;++t)if(r.data[0]==xc[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<xc.length;){for(var n=xc[t],i=t+1;i<xc.length&&n<SXe;)n*=xc[i++];for(n=r.modInt(n);t<i;)if(n%xc[t++]==0)return!1}return r.millerRabin(e)}function DXe(e){var t=this.subtract(pe.ONE),r=t.getLowestSetBit();if(r<=0)return!1;for(var n=t.shiftRight(r),i=TXe(),s,o=0;o<e;++o){do s=new pe(this.bitLength(),i);while(s.compareTo(pe.ONE)<=0||s.compareTo(t)>=0);var a=s.modPow(n,this);if(a.compareTo(pe.ONE)!=0&&a.compareTo(t)!=0){for(var l=1;l++<r&&a.compareTo(t)!=0;)if(a=a.modPowInt(2,this),a.compareTo(pe.ONE)==0)return!1;if(a.compareTo(t)!=0)return!1}}return!0}function TXe(){return{nextBytes:function(e){for(var t=0;t<e.length;++t)e[t]=Math.floor(Math.random()*256)}}}pe.prototype.chunkSize=RZe;pe.prototype.toRadix=FZe;pe.prototype.fromRadix=MZe;pe.prototype.fromNumber=QZe;pe.prototype.bitwiseTo=OZe;pe.prototype.changeBit=eXe;pe.prototype.addTo=iXe;pe.prototype.dMultiply=dXe;pe.prototype.dAddOffset=fXe;pe.prototype.multiplyLowerTo=AXe;pe.prototype.multiplyUpperTo=mXe;pe.prototype.modInt=wXe;pe.prototype.millerRabin=DXe;pe.prototype.clone=SZe;pe.prototype.intValue=BZe;pe.prototype.byteValue=DZe;pe.prototype.shortValue=TZe;pe.prototype.signum=kZe;pe.prototype.toByteArray=NZe;pe.prototype.equals=PZe;pe.prototype.min=LZe;pe.prototype.max=UZe;pe.prototype.and=VZe;pe.prototype.or=HZe;pe.prototype.xor=WZe;pe.prototype.andNot=GZe;pe.prototype.not=$Ze;pe.prototype.shiftLeft=YZe;pe.prototype.shiftRight=KZe;pe.prototype.getLowestSetBit=JZe;pe.prototype.bitCount=ZZe;pe.prototype.testBit=XZe;pe.prototype.setBit=tXe;pe.prototype.clearBit=rXe;pe.prototype.flipBit=nXe;pe.prototype.add=sXe;pe.prototype.subtract=oXe;pe.prototype.multiply=aXe;pe.prototype.divide=lXe;pe.prototype.remainder=cXe;pe.prototype.divideAndRemainder=uXe;pe.prototype.modPow=xXe;pe.prototype.modInverse=IXe;pe.prototype.pow=pXe;pe.prototype.gcd=_Xe;pe.prototype.isProbablePrime=BXe});var sy=x((PDt,Ice)=>{"use strict";var Eu=Jt();Au();Dr();var _ce=Ice.exports=Eu.sha1=Eu.sha1||{};Eu.md.sha1=Eu.md.algorithms.sha1=_ce;_ce.create=function(){wce||RXe();var e=null,t=Eu.util.createBuffer(),r=new Array(80),n={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,s=0;s<i;++s)n.fullMessageLength.push(0);return t=Eu.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},n},n.start(),n.update=function(i,s){s==="utf8"&&(i=Eu.util.encodeUtf8(i));var o=i.length;n.messageLength+=o,o=[o/4294967296>>>0,o>>>0];for(var a=n.fullMessageLength.length-1;a>=0;--a)n.fullMessageLength[a]+=o[1],o[1]=o[0]+(n.fullMessageLength[a]/4294967296>>>0),n.fullMessageLength[a]=n.fullMessageLength[a]>>>0,o[0]=o[1]/4294967296>>>0;return t.putBytes(i),xce(e,r,t),(t.read>2048||t.length()===0)&&t.compact(),n},n.digest=function(){var i=Eu.util.createBuffer();i.putBytes(t.bytes());var s=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,o=s&n.blockLength-1;i.putBytes(J3.substr(0,n.blockLength-o));for(var a,l,c=n.fullMessageLength[0]*8,u=0;u<n.fullMessageLength.length-1;++u)a=n.fullMessageLength[u+1]*8,l=a/4294967296>>>0,c+=l,i.putInt32(c>>>0),c=a>>>0;i.putInt32(c);var f={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4};xce(f,r,i);var p=Eu.util.createBuffer();return p.putInt32(f.h0),p.putInt32(f.h1),p.putInt32(f.h2),p.putInt32(f.h3),p.putInt32(f.h4),p},n};var J3=null,wce=!1;function RXe(){J3="\x80",J3+=Eu.util.fillString("\0",64),wce=!0}function xce(e,t,r){for(var n,i,s,o,a,l,c,u,f=r.length();f>=64;){for(i=e.h0,s=e.h1,o=e.h2,a=e.h3,l=e.h4,u=0;u<16;++u)n=r.getInt32(),t[u]=n,c=a^s&(o^a),n=(i<<5|i>>>27)+c+l+1518500249+n,l=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;u<20;++u)n=t[u-3]^t[u-8]^t[u-14]^t[u-16],n=n<<1|n>>>31,t[u]=n,c=a^s&(o^a),n=(i<<5|i>>>27)+c+l+1518500249+n,l=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;u<32;++u)n=t[u-3]^t[u-8]^t[u-14]^t[u-16],n=n<<1|n>>>31,t[u]=n,c=s^o^a,n=(i<<5|i>>>27)+c+l+1859775393+n,l=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;u<40;++u)n=t[u-6]^t[u-16]^t[u-28]^t[u-32],n=n<<2|n>>>30,t[u]=n,c=s^o^a,n=(i<<5|i>>>27)+c+l+1859775393+n,l=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;u<60;++u)n=t[u-6]^t[u-16]^t[u-28]^t[u-32],n=n<<2|n>>>30,t[u]=n,c=s&o|a&(s^o),n=(i<<5|i>>>27)+c+l+2400959708+n,l=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;u<80;++u)n=t[u-6]^t[u-16]^t[u-28]^t[u-32],n=n<<2|n>>>30,t[u]=n,c=s^o^a,n=(i<<5|i>>>27)+c+l+3395469782+n,l=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;e.h0=e.h0+i|0,e.h1=e.h1+s|0,e.h2=e.h2+o|0,e.h3=e.h3+a|0,e.h4=e.h4+l|0,f-=64}}});var j3=x((LDt,Bce)=>{"use strict";var bu=Jt();Dr();vl();sy();var Sce=Bce.exports=bu.pkcs1=bu.pkcs1||{};Sce.encode_rsa_oaep=function(e,t,r){var n,i,s,o;typeof r=="string"?(n=r,i=arguments[3]||void 0,s=arguments[4]||void 0):r&&(n=r.label||void 0,i=r.seed||void 0,s=r.md||void 0,r.mgf1&&r.mgf1.md&&(o=r.mgf1.md)),s?s.start():s=bu.md.sha1.create(),o||(o=s);var a=Math.ceil(e.n.bitLength()/8),l=a-2*s.digestLength-2;if(t.length>l){var c=new Error("RSAES-OAEP input message length is too long.");throw c.length=t.length,c.maxLength=l,c}n||(n=""),s.update(n,"raw");for(var u=s.digest(),f="",p=l-t.length,g=0;g<p;g++)f+="\0";var A=u.getBytes()+f+""+t;if(!i)i=bu.random.getBytes(s.digestLength);else if(i.length!==s.digestLength){var c=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw c.seedLength=i.length,c.digestLength=s.digestLength,c}var y=qT(i,a-s.digestLength-1,o),C=bu.util.xorBytes(A,y,A.length),v=qT(C,s.digestLength,o),b=bu.util.xorBytes(i,v,i.length);return"\0"+b+C};Sce.decode_rsa_oaep=function(e,t,r){var n,i,s;typeof r=="string"?(n=r,i=arguments[3]||void 0):r&&(n=r.label||void 0,i=r.md||void 0,r.mgf1&&r.mgf1.md&&(s=r.mgf1.md));var o=Math.ceil(e.n.bitLength()/8);if(t.length!==o){var C=new Error("RSAES-OAEP encoded message length is invalid.");throw C.length=t.length,C.expectedLength=o,C}if(i===void 0?i=bu.md.sha1.create():i.start(),s||(s=i),o<2*i.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");n||(n=""),i.update(n,"raw");for(var a=i.digest().getBytes(),l=t.charAt(0),c=t.substring(1,i.digestLength+1),u=t.substring(1+i.digestLength),f=qT(u,i.digestLength,s),p=bu.util.xorBytes(c,f,c.length),g=qT(p,o-i.digestLength-1,s),A=bu.util.xorBytes(u,g,u.length),y=A.substring(0,i.digestLength),C=l!=="\0",v=0;v<i.digestLength;++v)C|=a.charAt(v)!==y.charAt(v);for(var b=1,w=i.digestLength,B=i.digestLength;B<A.length;B++){var F=A.charCodeAt(B),Q=F&1^1,W=b?65534:0;C|=F&W,b=b&Q,w+=b}if(C||A.charCodeAt(w)!==1)throw new Error("Invalid RSAES-OAEP padding.");return A.substring(w+1)};function qT(e,t,r){r||(r=bu.md.sha1.create());for(var n="",i=Math.ceil(t/r.digestLength),s=0;s<i;++s){var o=String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,s&255);r.start(),r.update(e+o),n+=r.digest().getBytes()}return n.substring(0,t)}});var X3=x((UDt,Z3)=>{"use strict";var Ih=Jt();Dr();Yb();vl();(function(){if(Ih.prime){Z3.exports=Ih.prime;return}var e=Z3.exports=Ih.prime=Ih.prime||{},t=Ih.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],n=new t(null);n.fromInt(30);var i=function(f,p){return f|p};e.generateProbablePrime=function(f,p,g){typeof p=="function"&&(g=p,p={}),p=p||{};var A=p.algorithm||"PRIMEINC";typeof A=="string"&&(A={name:A}),A.options=A.options||{};var y=p.prng||Ih.random,C={nextBytes:function(v){for(var b=y.getBytesSync(v.length),w=0;w<v.length;++w)v[w]=b.charCodeAt(w)}};if(A.name==="PRIMEINC")return s(f,C,A.options,g);throw new Error("Invalid prime generation algorithm: "+A.name)};function s(f,p,g,A){return"workers"in g?l(f,p,g,A):o(f,p,g,A)}function o(f,p,g,A){var y=c(f,p),C=0,v=u(y.bitLength());"millerRabinTests"in g&&(v=g.millerRabinTests);var b=10;"maxBlockTime"in g&&(b=g.maxBlockTime),a(y,f,p,C,v,b,A)}function a(f,p,g,A,y,C,v){var b=+new Date;do{if(f.bitLength()>p&&(f=c(p,g)),f.isProbablePrime(y))return v(null,f);f.dAddOffset(r[A++%8],0)}while(C<0||+new Date-b<C);Ih.util.setImmediate(function(){a(f,p,g,A,y,C,v)})}function l(f,p,g,A){if(typeof Worker>"u")return o(f,p,g,A);var y=c(f,p),C=g.workers,v=g.workLoad||100,b=v*30/8,w=g.workerScript||"forge/prime.worker.js";if(C===-1)return Ih.util.estimateCores(function(F,Q){F&&(Q=2),C=Q-1,B()});B();function B(){C=Math.max(1,C);for(var F=[],Q=0;Q<C;++Q)F[Q]=new Worker(w);for(var W=C,Q=0;Q<C;++Q)F[Q].addEventListener("message",$);var Z=!1;function $(ee){if(!Z){--W;var U=ee.data;if(U.found){for(var ge=0;ge<F.length;++ge)F[ge].terminate();return Z=!0,A(null,new t(U.prime,16))}y.bitLength()>f&&(y=c(f,p));var Se=y.toString(16);ee.target.postMessage({hex:Se,workLoad:v}),y.dAddOffset(b,0)}}}}function c(f,p){var g=new t(f,p),A=f-1;return g.testBit(A)||g.bitwiseTo(t.ONE.shiftLeft(A),i,g),g.dAddOffset(31-g.mod(n).byteValue(),0),g}function u(f){return f<=100?27:f<=150?18:f<=200?15:f<=250?12:f<=300?9:f<=350?8:f<=400?7:f<=500?6:f<=600?5:f<=800?4:f<=1250?3:2}})()});var Kb=x((ODt,Qce)=>{"use strict";var rt=Jt();bc();Yb();_h();j3();X3();vl();Dr();typeof xr>"u"&&(xr=rt.jsbn.BigInteger);var xr,e5=rt.util.isNodejs?require("crypto"):null,te=rt.asn1,bl=rt.util;rt.pki=rt.pki||{};Qce.exports=rt.pki.rsa=rt.rsa=rt.rsa||{};var Mt=rt.pki,kXe=[6,4,2,4,2,4,6,2],FXe={name:"PrivateKeyInfo",tagClass:te.Class.UNIVERSAL,type:te.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:te.Class.UNIVERSAL,type:te.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:te.Class.UNIVERSAL,type:te.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:te.Class.UNIVERSAL,type:te.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:te.Class.UNIVERSAL,type:te.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},MXe={name:"RSAPrivateKey",tagClass:te.Class.UNIVERSAL,type:te.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:te.Class.UNIVERSAL,type:te.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:te.Class.UNIVERSAL,type:te.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:te.Class.UNIVERSAL,type:te.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:te.Class.UNIVERSAL,type:te.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:te.Class.UNIVERSAL,type:te.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:te.Class.UNIVERSAL,type:te.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:te.Class.UNIVERSAL,type:te.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:te.Class.UNIVERSAL,type:te.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:te.Class.UNIVERSAL,type:te.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},QXe={name:"RSAPublicKey",tagClass:te.Class.UNIVERSAL,type:te.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:te.Class.UNIVERSAL,type:te.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:te.Class.UNIVERSAL,type:te.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},NXe=rt.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:te.Class.UNIVERSAL,type:te.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:te.Class.UNIVERSAL,type:te.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:te.Class.UNIVERSAL,type:te.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:te.Class.UNIVERSAL,type:te.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:te.Class.UNIVERSAL,type:te.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},PXe={name:"DigestInfo",tagClass:te.Class.UNIVERSAL,type:te.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:te.Class.UNIVERSAL,type:te.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:te.Class.UNIVERSAL,type:te.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:te.Class.UNIVERSAL,type:te.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:te.Class.UNIVERSAL,type:te.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},LXe=function(e){var t;if(e.algorithm in Mt.oids)t=Mt.oids[e.algorithm];else{var r=new Error("Unknown message digest algorithm.");throw r.algorithm=e.algorithm,r}var n=te.oidToDer(t).getBytes(),i=te.create(te.Class.UNIVERSAL,te.Type.SEQUENCE,!0,[]),s=te.create(te.Class.UNIVERSAL,te.Type.SEQUENCE,!0,[]);s.value.push(te.create(te.Class.UNIVERSAL,te.Type.OID,!1,n)),s.value.push(te.create(te.Class.UNIVERSAL,te.Type.NULL,!1,""));var o=te.create(te.Class.UNIVERSAL,te.Type.OCTETSTRING,!1,e.digest().getBytes());return i.value.push(s),i.value.push(o),te.toDer(i).getBytes()},Fce=function(e,t,r){if(r)return e.modPow(t.e,t.n);if(!t.p||!t.q)return e.modPow(t.d,t.n);t.dP||(t.dP=t.d.mod(t.p.subtract(xr.ONE))),t.dQ||(t.dQ=t.d.mod(t.q.subtract(xr.ONE))),t.qInv||(t.qInv=t.q.modInverse(t.p));var n;do n=new xr(rt.util.bytesToHex(rt.random.getBytes(t.n.bitLength()/8)),16);while(n.compareTo(t.n)>=0||!n.gcd(t.n).equals(xr.ONE));e=e.multiply(n.modPow(t.e,t.n)).mod(t.n);for(var i=e.mod(t.p).modPow(t.dP,t.p),s=e.mod(t.q).modPow(t.dQ,t.q);i.compareTo(s)<0;)i=i.add(t.p);var o=i.subtract(s).multiply(t.qInv).mod(t.p).multiply(t.q).add(s);return o=o.multiply(n.modInverse(t.n)).mod(t.n),o};Mt.rsa.encrypt=function(e,t,r){var n=r,i,s=Math.ceil(t.n.bitLength()/8);r!==!1&&r!==!0?(n=r===2,i=Mce(e,t,r)):(i=rt.util.createBuffer(),i.putBytes(e));for(var o=new xr(i.toHex(),16),a=Fce(o,t,n),l=a.toString(16),c=rt.util.createBuffer(),u=s-Math.ceil(l.length/2);u>0;)c.putByte(0),--u;return c.putBytes(rt.util.hexToBytes(l)),c.getBytes()};Mt.rsa.decrypt=function(e,t,r,n){var i=Math.ceil(t.n.bitLength()/8);if(e.length!==i){var s=new Error("Encrypted message length is invalid.");throw s.length=e.length,s.expected=i,s}var o=new xr(rt.util.createBuffer(e).toHex(),16);if(o.compareTo(t.n)>=0)throw new Error("Encrypted message is invalid.");for(var a=Fce(o,t,r),l=a.toString(16),c=rt.util.createBuffer(),u=i-Math.ceil(l.length/2);u>0;)c.putByte(0),--u;return c.putBytes(rt.util.hexToBytes(l)),n!==!1?VT(c.getBytes(),t,r):c.getBytes()};Mt.rsa.createKeyPairGenerationState=function(e,t,r){typeof e=="string"&&(e=parseInt(e,10)),e=e||2048,r=r||{};var n=r.prng||rt.random,i={nextBytes:function(a){for(var l=n.getBytesSync(a.length),c=0;c<a.length;++c)a[c]=l.charCodeAt(c)}},s=r.algorithm||"PRIMEINC",o;if(s==="PRIMEINC")o={algorithm:s,state:0,bits:e,rng:i,eInt:t||65537,e:new xr(null),p:null,q:null,qBits:e>>1,pBits:e-(e>>1),pqState:0,num:null,keys:null},o.e.fromInt(o.eInt);else throw new Error("Invalid key generation algorithm: "+s);return o};Mt.rsa.stepKeyPairGenerationState=function(e,t){"algorithm"in e||(e.algorithm="PRIMEINC");var r=new xr(null);r.fromInt(30);for(var n=0,i=function(f,p){return f|p},s=+new Date,o,a=0;e.keys===null&&(t<=0||a<t);){if(e.state===0){var l=e.p===null?e.pBits:e.qBits,c=l-1;e.pqState===0?(e.num=new xr(l,e.rng),e.num.testBit(c)||e.num.bitwiseTo(xr.ONE.shiftLeft(c),i,e.num),e.num.dAddOffset(31-e.num.mod(r).byteValue(),0),n=0,++e.pqState):e.pqState===1?e.num.bitLength()>l?e.pqState=0:e.num.isProbablePrime(OXe(e.num.bitLength()))?++e.pqState:e.num.dAddOffset(kXe[n++%8],0):e.pqState===2?e.pqState=e.num.subtract(xr.ONE).gcd(e.e).compareTo(xr.ONE)===0?3:0:e.pqState===3&&(e.pqState=0,e.p===null?e.p=e.num:e.q=e.num,e.p!==null&&e.q!==null&&++e.state,e.num=null)}else if(e.state===1)e.p.compareTo(e.q)<0&&(e.num=e.p,e.p=e.q,e.q=e.num),++e.state;else if(e.state===2)e.p1=e.p.subtract(xr.ONE),e.q1=e.q.subtract(xr.ONE),e.phi=e.p1.multiply(e.q1),++e.state;else if(e.state===3)e.phi.gcd(e.e).compareTo(xr.ONE)===0?++e.state:(e.p=null,e.q=null,e.state=0);else if(e.state===4)e.n=e.p.multiply(e.q),e.n.bitLength()===e.bits?++e.state:(e.q=null,e.state=0);else if(e.state===5){var u=e.e.modInverse(e.phi);e.keys={privateKey:Mt.rsa.setPrivateKey(e.n,e.e,u,e.p,e.q,u.mod(e.p1),u.mod(e.q1),e.q.modInverse(e.p)),publicKey:Mt.rsa.setPublicKey(e.n,e.e)}}o=+new Date,a+=o-s,s=o}return e.keys!==null};Mt.rsa.generateKeyPair=function(e,t,r,n){if(arguments.length===1?typeof e=="object"?(r=e,e=void 0):typeof e=="function"&&(n=e,e=void 0):arguments.length===2?typeof e=="number"?typeof t=="function"?(n=t,t=void 0):typeof t!="number"&&(r=t,t=void 0):(r=e,n=t,e=void 0,t=void 0):arguments.length===3&&(typeof t=="number"?typeof r=="function"&&(n=r,r=void 0):(n=r,r=t,t=void 0)),r=r||{},e===void 0&&(e=r.bits||2048),t===void 0&&(t=r.e||65537),!rt.options.usePureJavaScript&&!r.prng&&e>=256&&e<=16384&&(t===65537||t===3)){if(n){if(Dce("generateKeyPair"))return e5.generateKeyPair("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(a,l,c){if(a)return n(a);n(null,{privateKey:Mt.privateKeyFromPem(c),publicKey:Mt.publicKeyFromPem(l)})});if(Tce("generateKey")&&Tce("exportKey"))return bl.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:kce(t),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(a){return bl.globalScope.crypto.subtle.exportKey("pkcs8",a.privateKey)}).then(void 0,function(a){n(a)}).then(function(a){if(a){var l=Mt.privateKeyFromAsn1(te.fromDer(rt.util.createBuffer(a)));n(null,{privateKey:l,publicKey:Mt.setRsaPublicKey(l.n,l.e)})}});if(Rce("generateKey")&&Rce("exportKey")){var i=bl.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:kce(t),hash:{name:"SHA-256"}},!0,["sign","verify"]);i.oncomplete=function(a){var l=a.target.result,c=bl.globalScope.msCrypto.subtle.exportKey("pkcs8",l.privateKey);c.oncomplete=function(u){var f=u.target.result,p=Mt.privateKeyFromAsn1(te.fromDer(rt.util.createBuffer(f)));n(null,{privateKey:p,publicKey:Mt.setRsaPublicKey(p.n,p.e)})},c.onerror=function(u){n(u)}},i.onerror=function(a){n(a)};return}}else if(Dce("generateKeyPairSync")){var s=e5.generateKeyPairSync("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:Mt.privateKeyFromPem(s.privateKey),publicKey:Mt.publicKeyFromPem(s.publicKey)}}}var o=Mt.rsa.createKeyPairGenerationState(e,t,r);if(!n)return Mt.rsa.stepKeyPairGenerationState(o,0),o.keys;UXe(o,r,n)};Mt.setRsaPublicKey=Mt.rsa.setPublicKey=function(e,t){var r={n:e,e:t};return r.encrypt=function(n,i,s){if(typeof i=="string"?i=i.toUpperCase():i===void 0&&(i="RSAES-PKCS1-V1_5"),i==="RSAES-PKCS1-V1_5")i={encode:function(a,l,c){return Mce(a,l,2).getBytes()}};else if(i==="RSA-OAEP"||i==="RSAES-OAEP")i={encode:function(a,l){return rt.pkcs1.encode_rsa_oaep(l,a,s)}};else if(["RAW","NONE","NULL",null].indexOf(i)!==-1)i={encode:function(a){return a}};else if(typeof i=="string")throw new Error('Unsupported encryption scheme: "'+i+'".');var o=i.encode(n,r,!0);return Mt.rsa.encrypt(o,r,!0)},r.verify=function(n,i,s,o){typeof s=="string"?s=s.toUpperCase():s===void 0&&(s="RSASSA-PKCS1-V1_5"),o===void 0&&(o={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in o||(o._parseAllDigestBytes=!0),s==="RSASSA-PKCS1-V1_5"?s={verify:function(l,c){c=VT(c,r,!0);var u=te.fromDer(c,{parseAllBytes:o._parseAllDigestBytes}),f={},p=[];if(!te.validate(u,PXe,f,p)){var g=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw g.errors=p,g}var A=te.derToOid(f.algorithmIdentifier);if(!(A===rt.oids.md2||A===rt.oids.md5||A===rt.oids.sha1||A===rt.oids.sha224||A===rt.oids.sha256||A===rt.oids.sha384||A===rt.oids.sha512||A===rt.oids["sha512-224"]||A===rt.oids["sha512-256"])){var g=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw g.oid=A,g}if((A===rt.oids.md2||A===rt.oids.md5)&&!("parameters"in f))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return l===f.digest}}:(s==="NONE"||s==="NULL"||s===null)&&(s={verify:function(l,c){return c=VT(c,r,!0),l===c}});var a=Mt.rsa.decrypt(i,r,!0,!1);return s.verify(n,a,r.n.bitLength())},r};Mt.setRsaPrivateKey=Mt.rsa.setPrivateKey=function(e,t,r,n,i,s,o,a){var l={n:e,e:t,d:r,p:n,q:i,dP:s,dQ:o,qInv:a};return l.decrypt=function(c,u,f){typeof u=="string"?u=u.toUpperCase():u===void 0&&(u="RSAES-PKCS1-V1_5");var p=Mt.rsa.decrypt(c,l,!1,!1);if(u==="RSAES-PKCS1-V1_5")u={decode:VT};else if(u==="RSA-OAEP"||u==="RSAES-OAEP")u={decode:function(g,A){return rt.pkcs1.decode_rsa_oaep(A,g,f)}};else if(["RAW","NONE","NULL",null].indexOf(u)!==-1)u={decode:function(g){return g}};else throw new Error('Unsupported encryption scheme: "'+u+'".');return u.decode(p,l,!1)},l.sign=function(c,u){var f=!1;typeof u=="string"&&(u=u.toUpperCase()),u===void 0||u==="RSASSA-PKCS1-V1_5"?(u={encode:LXe},f=1):(u==="NONE"||u==="NULL"||u===null)&&(u={encode:function(){return c}},f=1);var p=u.encode(c,l.n.bitLength());return Mt.rsa.encrypt(p,l,f)},l};Mt.wrapRsaPrivateKey=function(e){return te.create(te.Class.UNIVERSAL,te.Type.SEQUENCE,!0,[te.create(te.Class.UNIVERSAL,te.Type.INTEGER,!1,te.integerToDer(0).getBytes()),te.create(te.Class.UNIVERSAL,te.Type.SEQUENCE,!0,[te.create(te.Class.UNIVERSAL,te.Type.OID,!1,te.oidToDer(Mt.oids.rsaEncryption).getBytes()),te.create(te.Class.UNIVERSAL,te.Type.NULL,!1,"")]),te.create(te.Class.UNIVERSAL,te.Type.OCTETSTRING,!1,te.toDer(e).getBytes())])};Mt.privateKeyFromAsn1=function(e){var t={},r=[];if(te.validate(e,FXe,t,r)&&(e=te.fromDer(rt.util.createBuffer(t.privateKey))),t={},r=[],!te.validate(e,MXe,t,r)){var n=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw n.errors=r,n}var i,s,o,a,l,c,u,f;return i=rt.util.createBuffer(t.privateKeyModulus).toHex(),s=rt.util.createBuffer(t.privateKeyPublicExponent).toHex(),o=rt.util.createBuffer(t.privateKeyPrivateExponent).toHex(),a=rt.util.createBuffer(t.privateKeyPrime1).toHex(),l=rt.util.createBuffer(t.privateKeyPrime2).toHex(),c=rt.util.createBuffer(t.privateKeyExponent1).toHex(),u=rt.util.createBuffer(t.privateKeyExponent2).toHex(),f=rt.util.createBuffer(t.privateKeyCoefficient).toHex(),Mt.setRsaPrivateKey(new xr(i,16),new xr(s,16),new xr(o,16),new xr(a,16),new xr(l,16),new xr(c,16),new xr(u,16),new xr(f,16))};Mt.privateKeyToAsn1=Mt.privateKeyToRSAPrivateKey=function(e){return te.create(te.Class.UNIVERSAL,te.Type.SEQUENCE,!0,[te.create(te.Class.UNIVERSAL,te.Type.INTEGER,!1,te.integerToDer(0).getBytes()),te.create(te.Class.UNIVERSAL,te.Type.INTEGER,!1,xu(e.n)),te.create(te.Class.UNIVERSAL,te.Type.INTEGER,!1,xu(e.e)),te.create(te.Class.UNIVERSAL,te.Type.INTEGER,!1,xu(e.d)),te.create(te.Class.UNIVERSAL,te.Type.INTEGER,!1,xu(e.p)),te.create(te.Class.UNIVERSAL,te.Type.INTEGER,!1,xu(e.q)),te.create(te.Class.UNIVERSAL,te.Type.INTEGER,!1,xu(e.dP)),te.create(te.Class.UNIVERSAL,te.Type.INTEGER,!1,xu(e.dQ)),te.create(te.Class.UNIVERSAL,te.Type.INTEGER,!1,xu(e.qInv))])};Mt.publicKeyFromAsn1=function(e){var t={},r=[];if(te.validate(e,NXe,t,r)){var n=te.derToOid(t.publicKeyOid);if(n!==Mt.oids.rsaEncryption){var i=new Error("Cannot read public key. Unknown OID.");throw i.oid=n,i}e=t.rsaPublicKey}if(r=[],!te.validate(e,QXe,t,r)){var i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw i.errors=r,i}var s=rt.util.createBuffer(t.publicKeyModulus).toHex(),o=rt.util.createBuffer(t.publicKeyExponent).toHex();return Mt.setRsaPublicKey(new xr(s,16),new xr(o,16))};Mt.publicKeyToAsn1=Mt.publicKeyToSubjectPublicKeyInfo=function(e){return te.create(te.Class.UNIVERSAL,te.Type.SEQUENCE,!0,[te.create(te.Class.UNIVERSAL,te.Type.SEQUENCE,!0,[te.create(te.Class.UNIVERSAL,te.Type.OID,!1,te.oidToDer(Mt.oids.rsaEncryption).getBytes()),te.create(te.Class.UNIVERSAL,te.Type.NULL,!1,"")]),te.create(te.Class.UNIVERSAL,te.Type.BITSTRING,!1,[Mt.publicKeyToRSAPublicKey(e)])])};Mt.publicKeyToRSAPublicKey=function(e){return te.create(te.Class.UNIVERSAL,te.Type.SEQUENCE,!0,[te.create(te.Class.UNIVERSAL,te.Type.INTEGER,!1,xu(e.n)),te.create(te.Class.UNIVERSAL,te.Type.INTEGER,!1,xu(e.e))])};function Mce(e,t,r){var n=rt.util.createBuffer(),i=Math.ceil(t.n.bitLength()/8);if(e.length>i-11){var s=new Error("Message is too long for PKCS#1 v1.5 padding.");throw s.length=e.length,s.max=i-11,s}n.putByte(0),n.putByte(r);var o=i-3-e.length,a;if(r===0||r===1){a=r===0?0:255;for(var l=0;l<o;++l)n.putByte(a)}else for(;o>0;){for(var c=0,u=rt.random.getBytes(o),l=0;l<o;++l)a=u.charCodeAt(l),a===0?++c:n.putByte(a);o=c}return n.putByte(0),n.putBytes(e),n}function VT(e,t,r,n){var i=Math.ceil(t.n.bitLength()/8),s=rt.util.createBuffer(e),o=s.getByte(),a=s.getByte();if(o!==0||r&&a!==0&&a!==1||!r&&a!=2||r&&a===0&&typeof n>"u")throw new Error("Encryption block is invalid.");var l=0;if(a===0){l=i-3-n;for(var c=0;c<l;++c)if(s.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(a===1)for(l=0;s.length()>1;){if(s.getByte()!==255){--s.read;break}++l}else if(a===2)for(l=0;s.length()>1;){if(s.getByte()===0){--s.read;break}++l}var u=s.getByte();if(u!==0||l!==i-3-s.length())throw new Error("Encryption block is invalid.");return s.getBytes()}function UXe(e,t,r){typeof t=="function"&&(r=t,t={}),t=t||{};var n={algorithm:{name:t.algorithm||"PRIMEINC",options:{workers:t.workers||2,workLoad:t.workLoad||100,workerScript:t.workerScript}}};"prng"in t&&(n.prng=t.prng),i();function i(){s(e.pBits,function(a,l){if(a)return r(a);if(e.p=l,e.q!==null)return o(a,e.q);s(e.qBits,o)})}function s(a,l){rt.prime.generateProbablePrime(a,n,l)}function o(a,l){if(a)return r(a);if(e.q=l,e.p.compareTo(e.q)<0){var c=e.p;e.p=e.q,e.q=c}if(e.p.subtract(xr.ONE).gcd(e.e).compareTo(xr.ONE)!==0){e.p=null,i();return}if(e.q.subtract(xr.ONE).gcd(e.e).compareTo(xr.ONE)!==0){e.q=null,s(e.qBits,o);return}if(e.p1=e.p.subtract(xr.ONE),e.q1=e.q.subtract(xr.ONE),e.phi=e.p1.multiply(e.q1),e.phi.gcd(e.e).compareTo(xr.ONE)!==0){e.p=e.q=null,i();return}if(e.n=e.p.multiply(e.q),e.n.bitLength()!==e.bits){e.q=null,s(e.qBits,o);return}var u=e.e.modInverse(e.phi);e.keys={privateKey:Mt.rsa.setPrivateKey(e.n,e.e,u,e.p,e.q,u.mod(e.p1),u.mod(e.q1),e.q.modInverse(e.p)),publicKey:Mt.rsa.setPublicKey(e.n,e.e)},r(null,e.keys)}}function xu(e){var t=e.toString(16);t[0]>="8"&&(t="00"+t);var r=rt.util.hexToBytes(t);return r.length>1&&(r.charCodeAt(0)===0&&!(r.charCodeAt(1)&128)||r.charCodeAt(0)===255&&(r.charCodeAt(1)&128)===128)?r.substr(1):r}function OXe(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}function Dce(e){return rt.util.isNodejs&&typeof e5[e]=="function"}function Tce(e){return typeof bl.globalScope<"u"&&typeof bl.globalScope.crypto=="object"&&typeof bl.globalScope.crypto.subtle=="object"&&typeof bl.globalScope.crypto.subtle[e]=="function"}function Rce(e){return typeof bl.globalScope<"u"&&typeof bl.globalScope.msCrypto=="object"&&typeof bl.globalScope.msCrypto.subtle=="object"&&typeof bl.globalScope.msCrypto.subtle[e]=="function"}function kce(e){for(var t=rt.util.hexToBytes(e.toString(16)),r=new Uint8Array(t.length),n=0;n<t.length;++n)r[n]=t.charCodeAt(n);return r}});var t5=x((qDt,Oce)=>{"use strict";var Ne=Jt();xh();bc();Gb();Au();_h();PT();qp();vl();$3();Kb();Dr();typeof Nce>"u"&&(Nce=Ne.jsbn.BigInteger);var Nce,ae=Ne.asn1,Yt=Ne.pki=Ne.pki||{};Oce.exports=Yt.pbe=Ne.pbe=Ne.pbe||{};var Wp=Yt.oids,qXe={name:"EncryptedPrivateKeyInfo",tagClass:ae.Class.UNIVERSAL,type:ae.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:ae.Class.UNIVERSAL,type:ae.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:ae.Class.UNIVERSAL,type:ae.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:ae.Class.UNIVERSAL,type:ae.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:ae.Class.UNIVERSAL,type:ae.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},VXe={name:"PBES2Algorithms",tagClass:ae.Class.UNIVERSAL,type:ae.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:ae.Class.UNIVERSAL,type:ae.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:ae.Class.UNIVERSAL,type:ae.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:ae.Class.UNIVERSAL,type:ae.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:ae.Class.UNIVERSAL,type:ae.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:ae.Class.UNIVERSAL,type:ae.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:ae.Class.UNIVERSAL,type:ae.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:ae.Class.UNIVERSAL,type:ae.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:ae.Class.UNIVERSAL,type:ae.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:ae.Class.UNIVERSAL,type:ae.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:ae.Class.UNIVERSAL,type:ae.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:ae.Class.UNIVERSAL,type:ae.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},HXe={name:"pkcs-12PbeParams",tagClass:ae.Class.UNIVERSAL,type:ae.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:ae.Class.UNIVERSAL,type:ae.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:ae.Class.UNIVERSAL,type:ae.Type.INTEGER,constructed:!1,capture:"iterations"}]};Yt.encryptPrivateKeyInfo=function(e,t,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var n=Ne.random.getBytesSync(r.saltSize),i=r.count,s=ae.integerToDer(i),o,a,l;if(r.algorithm.indexOf("aes")===0||r.algorithm==="des"){var c,u,f;switch(r.algorithm){case"aes128":o=16,c=16,u=Wp["aes128-CBC"],f=Ne.aes.createEncryptionCipher;break;case"aes192":o=24,c=16,u=Wp["aes192-CBC"],f=Ne.aes.createEncryptionCipher;break;case"aes256":o=32,c=16,u=Wp["aes256-CBC"],f=Ne.aes.createEncryptionCipher;break;case"des":o=8,c=8,u=Wp.desCBC,f=Ne.des.createEncryptionCipher;break;default:var p=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw p.algorithm=r.algorithm,p}var g="hmacWith"+r.prfAlgorithm.toUpperCase(),A=Uce(g),y=Ne.pkcs5.pbkdf2(t,n,i,o,A),C=Ne.random.getBytesSync(c),v=f(y);v.start(C),v.update(ae.toDer(e)),v.finish(),l=v.output.getBytes();var b=WXe(n,s,o,g);a=ae.create(ae.Class.UNIVERSAL,ae.Type.SEQUENCE,!0,[ae.create(ae.Class.UNIVERSAL,ae.Type.OID,!1,ae.oidToDer(Wp.pkcs5PBES2).getBytes()),ae.create(ae.Class.UNIVERSAL,ae.Type.SEQUENCE,!0,[ae.create(ae.Class.UNIVERSAL,ae.Type.SEQUENCE,!0,[ae.create(ae.Class.UNIVERSAL,ae.Type.OID,!1,ae.oidToDer(Wp.pkcs5PBKDF2).getBytes()),b]),ae.create(ae.Class.UNIVERSAL,ae.Type.SEQUENCE,!0,[ae.create(ae.Class.UNIVERSAL,ae.Type.OID,!1,ae.oidToDer(u).getBytes()),ae.create(ae.Class.UNIVERSAL,ae.Type.OCTETSTRING,!1,C)])])])}else if(r.algorithm==="3des"){o=24;var w=new Ne.util.ByteBuffer(n),y=Yt.pbe.generatePkcs12Key(t,w,1,i,o),C=Yt.pbe.generatePkcs12Key(t,w,2,i,o),v=Ne.des.createEncryptionCipher(y);v.start(C),v.update(ae.toDer(e)),v.finish(),l=v.output.getBytes(),a=ae.create(ae.Class.UNIVERSAL,ae.Type.SEQUENCE,!0,[ae.create(ae.Class.UNIVERSAL,ae.Type.OID,!1,ae.oidToDer(Wp["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),ae.create(ae.Class.UNIVERSAL,ae.Type.SEQUENCE,!0,[ae.create(ae.Class.UNIVERSAL,ae.Type.OCTETSTRING,!1,n),ae.create(ae.Class.UNIVERSAL,ae.Type.INTEGER,!1,s.getBytes())])])}else{var p=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw p.algorithm=r.algorithm,p}var B=ae.create(ae.Class.UNIVERSAL,ae.Type.SEQUENCE,!0,[a,ae.create(ae.Class.UNIVERSAL,ae.Type.OCTETSTRING,!1,l)]);return B};Yt.decryptPrivateKeyInfo=function(e,t){var r=null,n={},i=[];if(!ae.validate(e,qXe,n,i)){var s=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=i,s}var o=ae.derToOid(n.encryptionOid),a=Yt.pbe.getCipher(o,n.encryptionParams,t),l=Ne.util.createBuffer(n.encryptedData);return a.update(l),a.finish()&&(r=ae.fromDer(a.output)),r};Yt.encryptedPrivateKeyToPem=function(e,t){var r={type:"ENCRYPTED PRIVATE KEY",body:ae.toDer(e).getBytes()};return Ne.pem.encode(r,{maxline:t})};Yt.encryptedPrivateKeyFromPem=function(e){var t=Ne.pem.decode(e)[0];if(t.type!=="ENCRYPTED PRIVATE KEY"){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=t.type,r}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return ae.fromDer(t.body)};Yt.encryptRsaPrivateKey=function(e,t,r){if(r=r||{},!r.legacy){var n=Yt.wrapRsaPrivateKey(Yt.privateKeyToAsn1(e));return n=Yt.encryptPrivateKeyInfo(n,t,r),Yt.encryptedPrivateKeyToPem(n)}var i,s,o,a;switch(r.algorithm){case"aes128":i="AES-128-CBC",o=16,s=Ne.random.getBytesSync(16),a=Ne.aes.createEncryptionCipher;break;case"aes192":i="AES-192-CBC",o=24,s=Ne.random.getBytesSync(16),a=Ne.aes.createEncryptionCipher;break;case"aes256":i="AES-256-CBC",o=32,s=Ne.random.getBytesSync(16),a=Ne.aes.createEncryptionCipher;break;case"3des":i="DES-EDE3-CBC",o=24,s=Ne.random.getBytesSync(8),a=Ne.des.createEncryptionCipher;break;case"des":i="DES-CBC",o=8,s=Ne.random.getBytesSync(8),a=Ne.des.createEncryptionCipher;break;default:var l=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw l.algorithm=r.algorithm,l}var c=Ne.pbe.opensslDeriveBytes(t,s.substr(0,8),o),u=a(c);u.start(s),u.update(ae.toDer(Yt.privateKeyToAsn1(e))),u.finish();var f={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:i,parameters:Ne.util.bytesToHex(s).toUpperCase()},body:u.output.getBytes()};return Ne.pem.encode(f)};Yt.decryptRsaPrivateKey=function(e,t){var r=null,n=Ne.pem.decode(e)[0];if(n.type!=="ENCRYPTED PRIVATE KEY"&&n.type!=="PRIVATE KEY"&&n.type!=="RSA PRIVATE KEY"){var i=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw i.headerType=i,i}if(n.procType&&n.procType.type==="ENCRYPTED"){var s,o;switch(n.dekInfo.algorithm){case"DES-CBC":s=8,o=Ne.des.createDecryptionCipher;break;case"DES-EDE3-CBC":s=24,o=Ne.des.createDecryptionCipher;break;case"AES-128-CBC":s=16,o=Ne.aes.createDecryptionCipher;break;case"AES-192-CBC":s=24,o=Ne.aes.createDecryptionCipher;break;case"AES-256-CBC":s=32,o=Ne.aes.createDecryptionCipher;break;case"RC2-40-CBC":s=5,o=function(f){return Ne.rc2.createDecryptionCipher(f,40)};break;case"RC2-64-CBC":s=8,o=function(f){return Ne.rc2.createDecryptionCipher(f,64)};break;case"RC2-128-CBC":s=16,o=function(f){return Ne.rc2.createDecryptionCipher(f,128)};break;default:var i=new Error('Could not decrypt private key; unsupported encryption algorithm "'+n.dekInfo.algorithm+'".');throw i.algorithm=n.dekInfo.algorithm,i}var a=Ne.util.hexToBytes(n.dekInfo.parameters),l=Ne.pbe.opensslDeriveBytes(t,a.substr(0,8),s),c=o(l);if(c.start(a),c.update(Ne.util.createBuffer(n.body)),c.finish())r=c.output.getBytes();else return r}else r=n.body;return n.type==="ENCRYPTED PRIVATE KEY"?r=Yt.decryptPrivateKeyInfo(ae.fromDer(r),t):r=ae.fromDer(r),r!==null&&(r=Yt.privateKeyFromAsn1(r)),r};Yt.pbe.generatePkcs12Key=function(e,t,r,n,i,s){var o,a;if(typeof s>"u"||s===null){if(!("sha1"in Ne.md))throw new Error('"sha1" hash algorithm unavailable.');s=Ne.md.sha1.create()}var l=s.digestLength,c=s.blockLength,u=new Ne.util.ByteBuffer,f=new Ne.util.ByteBuffer;if(e!=null){for(a=0;a<e.length;a++)f.putInt16(e.charCodeAt(a));f.putInt16(0)}var p=f.length(),g=t.length(),A=new Ne.util.ByteBuffer;A.fillWithByte(r,c);var y=c*Math.ceil(g/c),C=new Ne.util.ByteBuffer;for(a=0;a<y;a++)C.putByte(t.at(a%g));var v=c*Math.ceil(p/c),b=new Ne.util.ByteBuffer;for(a=0;a<v;a++)b.putByte(f.at(a%p));var w=C;w.putBuffer(b);for(var B=Math.ceil(i/l),F=1;F<=B;F++){var Q=new Ne.util.ByteBuffer;Q.putBytes(A.bytes()),Q.putBytes(w.bytes());for(var W=0;W<n;W++)s.start(),s.update(Q.getBytes()),Q=s.digest();var Z=new Ne.util.ByteBuffer;for(a=0;a<c;a++)Z.putByte(Q.at(a%l));var $=Math.ceil(g/c)+Math.ceil(p/c),ee=new Ne.util.ByteBuffer;for(o=0;o<$;o++){var U=new Ne.util.ByteBuffer(w.getBytes(c)),ge=511;for(a=Z.length()-1;a>=0;a--)ge=ge>>8,ge+=Z.at(a)+U.at(a),U.setAt(a,ge&255);ee.putBuffer(U)}w=ee,u.putBuffer(Q)}return u.truncate(u.length()-i),u};Yt.pbe.getCipher=function(e,t,r){switch(e){case Yt.oids.pkcs5PBES2:return Yt.pbe.getCipherForPBES2(e,t,r);case Yt.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case Yt.oids["pbewithSHAAnd40BitRC2-CBC"]:return Yt.pbe.getCipherForPKCS12PBE(e,t,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=e,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}};Yt.pbe.getCipherForPBES2=function(e,t,r){var n={},i=[];if(!ae.validate(t,VXe,n,i)){var s=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=i,s}if(e=ae.derToOid(n.kdfOid),e!==Yt.oids.pkcs5PBKDF2){var s=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw s.oid=e,s.supportedOids=["pkcs5PBKDF2"],s}if(e=ae.derToOid(n.encOid),e!==Yt.oids["aes128-CBC"]&&e!==Yt.oids["aes192-CBC"]&&e!==Yt.oids["aes256-CBC"]&&e!==Yt.oids["des-EDE3-CBC"]&&e!==Yt.oids.desCBC){var s=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw s.oid=e,s.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],s}var o=n.kdfSalt,a=Ne.util.createBuffer(n.kdfIterationCount);a=a.getInt(a.length()<<3);var l,c;switch(Yt.oids[e]){case"aes128-CBC":l=16,c=Ne.aes.createDecryptionCipher;break;case"aes192-CBC":l=24,c=Ne.aes.createDecryptionCipher;break;case"aes256-CBC":l=32,c=Ne.aes.createDecryptionCipher;break;case"des-EDE3-CBC":l=24,c=Ne.des.createDecryptionCipher;break;case"desCBC":l=8,c=Ne.des.createDecryptionCipher;break}var u=Lce(n.prfOid),f=Ne.pkcs5.pbkdf2(r,o,a,l,u),p=n.encIv,g=c(f);return g.start(p),g};Yt.pbe.getCipherForPKCS12PBE=function(e,t,r){var n={},i=[];if(!ae.validate(t,HXe,n,i)){var s=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=i,s}var o=Ne.util.createBuffer(n.salt),a=Ne.util.createBuffer(n.iterations);a=a.getInt(a.length()<<3);var l,c,u;switch(e){case Yt.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:l=24,c=8,u=Ne.des.startDecrypting;break;case Yt.oids["pbewithSHAAnd40BitRC2-CBC"]:l=5,c=8,u=function(y,C){var v=Ne.rc2.createDecryptionCipher(y,40);return v.start(C,null),v};break;default:var s=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw s.oid=e,s}var f=Lce(n.prfOid),p=Yt.pbe.generatePkcs12Key(r,o,1,a,l,f);f.start();var g=Yt.pbe.generatePkcs12Key(r,o,2,a,c,f);return u(p,g)};Yt.pbe.opensslDeriveBytes=function(e,t,r,n){if(typeof n>"u"||n===null){if(!("md5"in Ne.md))throw new Error('"md5" hash algorithm unavailable.');n=Ne.md.md5.create()}t===null&&(t="");for(var i=[Pce(n,e+t)],s=16,o=1;s<r;++o,s+=16)i.push(Pce(n,i[o-1]+e+t));return i.join("").substr(0,r)};function Pce(e,t){return e.start().update(t).digest().getBytes()}function Lce(e){var t;if(!e)t="hmacWithSHA1";else if(t=Yt.oids[ae.derToOid(e)],!t){var r=new Error("Unsupported PRF OID.");throw r.oid=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}return Uce(t)}function Uce(e){var t=Ne.md;switch(e){case"hmacWithSHA224":t=Ne.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":e=e.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!t||!(e in t))throw new Error("Unknown hash algorithm: "+e);return t[e].create()}function WXe(e,t,r,n){var i=ae.create(ae.Class.UNIVERSAL,ae.Type.SEQUENCE,!0,[ae.create(ae.Class.UNIVERSAL,ae.Type.OCTETSTRING,!1,e),ae.create(ae.Class.UNIVERSAL,ae.Type.INTEGER,!1,t.getBytes())]);return n!=="hmacWithSHA1"&&i.value.push(ae.create(ae.Class.UNIVERSAL,ae.Type.INTEGER,!1,Ne.util.hexToBytes(r.toString(16))),ae.create(ae.Class.UNIVERSAL,ae.Type.SEQUENCE,!0,[ae.create(ae.Class.UNIVERSAL,ae.Type.OID,!1,ae.oidToDer(Yt.oids[n]).getBytes()),ae.create(ae.Class.UNIVERSAL,ae.Type.NULL,!1,"")])),i}});var r5=x((VDt,Hce)=>{"use strict";var oy=Jt();bc();Dr();var Qe=oy.asn1,ay=Hce.exports=oy.pkcs7asn1=oy.pkcs7asn1||{};oy.pkcs7=oy.pkcs7||{};oy.pkcs7.asn1=ay;var qce={name:"ContentInfo",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:Qe.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};ay.contentInfoValidator=qce;var Vce={name:"EncryptedContentInfo",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:Qe.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:Qe.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};ay.envelopedDataValidator={name:"EnvelopedData",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(Vce)};ay.encryptedDataValidator={name:"EncryptedData",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.INTEGER,constructed:!1,capture:"version"}].concat(Vce)};var GXe={name:"SignerInfo",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:Qe.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:Qe.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:Qe.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};ay.signedDataValidator={name:"SignedData",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},qce,{name:"SignedData.Certificates",tagClass:Qe.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:Qe.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.SET,capture:"signerInfos",optional:!0,value:[GXe]}]};ay.recipientInfoValidator={name:"RecipientInfo",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:Qe.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}});var n5=x((HDt,Wce)=>{"use strict";var Gp=Jt();Dr();Gp.mgf=Gp.mgf||{};var $Xe=Wce.exports=Gp.mgf.mgf1=Gp.mgf1=Gp.mgf1||{};$Xe.create=function(e){var t={generate:function(r,n){for(var i=new Gp.util.ByteBuffer,s=Math.ceil(n/e.digestLength),o=0;o<s;o++){var a=new Gp.util.ByteBuffer;a.putInt32(o),e.start(),e.update(r+a.getBytes()),i.putBuffer(e.digest())}return i.truncate(i.length()-n),i.getBytes()}};return t}});var $ce=x((WDt,Gce)=>{"use strict";var HT=Jt();n5();Gce.exports=HT.mgf=HT.mgf||{};HT.mgf.mgf1=HT.mgf1});var WT=x((GDt,Yce)=>{"use strict";var $p=Jt();vl();Dr();var YXe=Yce.exports=$p.pss=$p.pss||{};YXe.create=function(e){arguments.length===3&&(e={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var t=e.md,r=e.mgf,n=t.digestLength,i=e.salt||null;typeof i=="string"&&(i=$p.util.createBuffer(i));var s;if("saltLength"in e)s=e.saltLength;else if(i!==null)s=i.length();else throw new Error("Salt length not specified or specific salt not given.");if(i!==null&&i.length()!==s)throw new Error("Given salt length does not match length of given salt.");var o=e.prng||$p.random,a={};return a.encode=function(l,c){var u,f=c-1,p=Math.ceil(f/8),g=l.digest().getBytes();if(p<n+s+2)throw new Error("Message is too long to encrypt.");var A;i===null?A=o.getBytesSync(s):A=i.bytes();var y=new $p.util.ByteBuffer;y.fillWithByte(0,8),y.putBytes(g),y.putBytes(A),t.start(),t.update(y.getBytes());var C=t.digest().getBytes(),v=new $p.util.ByteBuffer;v.fillWithByte(0,p-s-n-2),v.putByte(1),v.putBytes(A);var b=v.getBytes(),w=p-n-1,B=r.generate(C,w),F="";for(u=0;u<w;u++)F+=String.fromCharCode(b.charCodeAt(u)^B.charCodeAt(u));var Q=65280>>8*p-f&255;return F=String.fromCharCode(F.charCodeAt(0)&~Q)+F.substr(1),F+C+"\xBC"},a.verify=function(l,c,u){var f,p=u-1,g=Math.ceil(p/8);if(c=c.substr(-g),g<n+s+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(c.charCodeAt(g-1)!==188)throw new Error("Encoded message does not end in 0xBC.");var A=g-n-1,y=c.substr(0,A),C=c.substr(A,n),v=65280>>8*g-p&255;if(y.charCodeAt(0)&v)throw new Error("Bits beyond keysize not zero as expected.");var b=r.generate(C,A),w="";for(f=0;f<A;f++)w+=String.fromCharCode(y.charCodeAt(f)^b.charCodeAt(f));w=String.fromCharCode(w.charCodeAt(0)&~v)+w.substr(1);var B=g-n-s-2;for(f=0;f<B;f++)if(w.charCodeAt(f)!==0)throw new Error("Leftmost octets not zero as expected");if(w.charCodeAt(B)!==1)throw new Error("Inconsistent PSS signature, 0x01 marker not found");var F=w.substr(-s),Q=new $p.util.ByteBuffer;Q.fillWithByte(0,8),Q.putBytes(l),Q.putBytes(F),t.start(),t.update(Q.getBytes());var W=t.digest().getBytes();return C===W},a}});var YT=x(($Dt,Zce)=>{"use strict";var nt=Jt();xh();bc();Gb();Au();$ce();_h();qp();WT();Kb();Dr();var D=nt.asn1,we=Zce.exports=nt.pki=nt.pki||{},_r=we.oids,ai={};ai.CN=_r.commonName;ai.commonName="CN";ai.C=_r.countryName;ai.countryName="C";ai.L=_r.localityName;ai.localityName="L";ai.ST=_r.stateOrProvinceName;ai.stateOrProvinceName="ST";ai.O=_r.organizationName;ai.organizationName="O";ai.OU=_r.organizationalUnitName;ai.organizationalUnitName="OU";ai.E=_r.emailAddress;ai.emailAddress="E";var zce=nt.pki.rsa.publicKeyValidator,KXe={name:"Certificate",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:D.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:D.Class.UNIVERSAL,type:D.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:D.Class.UNIVERSAL,type:D.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:D.Class.UNIVERSAL,type:D.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:D.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:D.Class.UNIVERSAL,type:D.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:D.Class.UNIVERSAL,type:D.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:D.Class.UNIVERSAL,type:D.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:D.Class.UNIVERSAL,type:D.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},zce,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:D.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:D.Class.UNIVERSAL,type:D.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:D.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:D.Class.UNIVERSAL,type:D.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:D.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:D.Class.UNIVERSAL,type:D.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:D.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:D.Class.UNIVERSAL,type:D.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},zXe={name:"rsapss",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:D.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:D.Class.UNIVERSAL,type:D.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:D.Class.UNIVERSAL,type:D.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:D.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:D.Class.UNIVERSAL,type:D.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:D.Class.UNIVERSAL,type:D.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:D.Class.UNIVERSAL,type:D.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:D.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:D.Class.UNIVERSAL,type:D.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:D.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:D.Class.UNIVERSAL,type:D.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},JXe={name:"CertificationRequestInfo",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:D.Class.UNIVERSAL,type:D.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},zce,{name:"CertificationRequestInfo.attributes",tagClass:D.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:D.Class.UNIVERSAL,type:D.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:D.Class.UNIVERSAL,type:D.Type.SET,constructed:!0}]}]}]},jXe={name:"CertificationRequest",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[JXe,{name:"CertificationRequest.signatureAlgorithm",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:D.Class.UNIVERSAL,type:D.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:D.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:D.Class.UNIVERSAL,type:D.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};we.RDNAttributesAsArray=function(e,t){for(var r=[],n,i,s,o=0;o<e.value.length;++o){n=e.value[o];for(var a=0;a<n.value.length;++a)s={},i=n.value[a],s.type=D.derToOid(i.value[0].value),s.value=i.value[1].value,s.valueTagClass=i.value[1].type,s.type in _r&&(s.name=_r[s.type],s.name in ai&&(s.shortName=ai[s.name])),t&&(t.update(s.type),t.update(s.value)),r.push(s)}return r};we.CRIAttributesAsArray=function(e){for(var t=[],r=0;r<e.length;++r)for(var n=e[r],i=D.derToOid(n.value[0].value),s=n.value[1].value,o=0;o<s.length;++o){var a={};if(a.type=i,a.value=s[o].value,a.valueTagClass=s[o].type,a.type in _r&&(a.name=_r[a.type],a.name in ai&&(a.shortName=ai[a.name])),a.type===_r.extensionRequest){a.extensions=[];for(var l=0;l<a.value.length;++l)a.extensions.push(we.certificateExtensionFromAsn1(a.value[l]))}t.push(a)}return t};function Sh(e,t){typeof t=="string"&&(t={shortName:t});for(var r=null,n,i=0;r===null&&i<e.attributes.length;++i)n=e.attributes[i],(t.type&&t.type===n.type||t.name&&t.name===n.name||t.shortName&&t.shortName===n.shortName)&&(r=n);return r}var GT=function(e,t,r){var n={};if(e!==_r["RSASSA-PSS"])return n;r&&(n={hash:{algorithmOid:_r.sha1},mgf:{algorithmOid:_r.mgf1,hash:{algorithmOid:_r.sha1}},saltLength:20});var i={},s=[];if(!D.validate(t,zXe,i,s)){var o=new Error("Cannot read RSASSA-PSS parameter block.");throw o.errors=s,o}return i.hashOid!==void 0&&(n.hash=n.hash||{},n.hash.algorithmOid=D.derToOid(i.hashOid)),i.maskGenOid!==void 0&&(n.mgf=n.mgf||{},n.mgf.algorithmOid=D.derToOid(i.maskGenOid),n.mgf.hash=n.mgf.hash||{},n.mgf.hash.algorithmOid=D.derToOid(i.maskGenHashOid)),i.saltLength!==void 0&&(n.saltLength=i.saltLength.charCodeAt(0)),n},$T=function(e){switch(_r[e.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return nt.md.sha1.create();case"md5WithRSAEncryption":return nt.md.md5.create();case"sha256WithRSAEncryption":return nt.md.sha256.create();case"sha384WithRSAEncryption":return nt.md.sha384.create();case"sha512WithRSAEncryption":return nt.md.sha512.create();case"RSASSA-PSS":return nt.md.sha256.create();default:var t=new Error("Could not compute "+e.type+" digest. Unknown signature OID.");throw t.signatureOid=e.signatureOid,t}},Jce=function(e){var t=e.certificate,r;switch(t.signatureOid){case _r.sha1WithRSAEncryption:case _r.sha1WithRSASignature:break;case _r["RSASSA-PSS"]:var n,i;if(n=_r[t.signatureParameters.mgf.hash.algorithmOid],n===void 0||nt.md[n]===void 0){var s=new Error("Unsupported MGF hash function.");throw s.oid=t.signatureParameters.mgf.hash.algorithmOid,s.name=n,s}if(i=_r[t.signatureParameters.mgf.algorithmOid],i===void 0||nt.mgf[i]===void 0){var s=new Error("Unsupported MGF function.");throw s.oid=t.signatureParameters.mgf.algorithmOid,s.name=i,s}if(i=nt.mgf[i].create(nt.md[n].create()),n=_r[t.signatureParameters.hash.algorithmOid],n===void 0||nt.md[n]===void 0){var s=new Error("Unsupported RSASSA-PSS hash function.");throw s.oid=t.signatureParameters.hash.algorithmOid,s.name=n,s}r=nt.pss.create(nt.md[n].create(),i,t.signatureParameters.saltLength);break}return t.publicKey.verify(e.md.digest().getBytes(),e.signature,r)};we.certificateFromPem=function(e,t,r){var n=nt.pem.decode(e)[0];if(n.type!=="CERTIFICATE"&&n.type!=="X509 CERTIFICATE"&&n.type!=="TRUSTED CERTIFICATE"){var i=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var s=D.fromDer(n.body,r);return we.certificateFromAsn1(s,t)};we.certificateToPem=function(e,t){var r={type:"CERTIFICATE",body:D.toDer(we.certificateToAsn1(e)).getBytes()};return nt.pem.encode(r,{maxline:t})};we.publicKeyFromPem=function(e){var t=nt.pem.decode(e)[0];if(t.type!=="PUBLIC KEY"&&t.type!=="RSA PUBLIC KEY"){var r=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw r.headerType=t.type,r}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert public key from PEM; PEM is encrypted.");var n=D.fromDer(t.body);return we.publicKeyFromAsn1(n)};we.publicKeyToPem=function(e,t){var r={type:"PUBLIC KEY",body:D.toDer(we.publicKeyToAsn1(e)).getBytes()};return nt.pem.encode(r,{maxline:t})};we.publicKeyToRSAPublicKeyPem=function(e,t){var r={type:"RSA PUBLIC KEY",body:D.toDer(we.publicKeyToRSAPublicKey(e)).getBytes()};return nt.pem.encode(r,{maxline:t})};we.getPublicKeyFingerprint=function(e,t){t=t||{};var r=t.md||nt.md.sha1.create(),n=t.type||"RSAPublicKey",i;switch(n){case"RSAPublicKey":i=D.toDer(we.publicKeyToRSAPublicKey(e)).getBytes();break;case"SubjectPublicKeyInfo":i=D.toDer(we.publicKeyToAsn1(e)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+t.type+'".')}r.start(),r.update(i);var s=r.digest();if(t.encoding==="hex"){var o=s.toHex();return t.delimiter?o.match(/.{2}/g).join(t.delimiter):o}else{if(t.encoding==="binary")return s.getBytes();if(t.encoding)throw new Error('Unknown encoding "'+t.encoding+'".')}return s};we.certificationRequestFromPem=function(e,t,r){var n=nt.pem.decode(e)[0];if(n.type!=="CERTIFICATE REQUEST"){var i=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var s=D.fromDer(n.body,r);return we.certificationRequestFromAsn1(s,t)};we.certificationRequestToPem=function(e,t){var r={type:"CERTIFICATE REQUEST",body:D.toDer(we.certificationRequestToAsn1(e)).getBytes()};return nt.pem.encode(r,{maxline:t})};we.createCertificate=function(){var e={};return e.version=2,e.serialNumber="00",e.signatureOid=null,e.signature=null,e.siginfo={},e.siginfo.algorithmOid=null,e.validity={},e.validity.notBefore=new Date,e.validity.notAfter=new Date,e.issuer={},e.issuer.getField=function(t){return Sh(e.issuer,t)},e.issuer.addField=function(t){xl([t]),e.issuer.attributes.push(t)},e.issuer.attributes=[],e.issuer.hash=null,e.subject={},e.subject.getField=function(t){return Sh(e.subject,t)},e.subject.addField=function(t){xl([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.extensions=[],e.publicKey=null,e.md=null,e.setSubject=function(t,r){xl(t),e.subject.attributes=t,delete e.subject.uniqueId,r&&(e.subject.uniqueId=r),e.subject.hash=null},e.setIssuer=function(t,r){xl(t),e.issuer.attributes=t,delete e.issuer.uniqueId,r&&(e.issuer.uniqueId=r),e.issuer.hash=null},e.setExtensions=function(t){for(var r=0;r<t.length;++r)jce(t[r],{cert:e});e.extensions=t},e.getExtension=function(t){typeof t=="string"&&(t={name:t});for(var r=null,n,i=0;r===null&&i<e.extensions.length;++i)n=e.extensions[i],(t.id&&n.id===t.id||t.name&&n.name===t.name)&&(r=n);return r},e.sign=function(t,r){e.md=r||nt.md.sha1.create();var n=_r[e.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw i.algorithm=e.md.algorithm,i}e.signatureOid=e.siginfo.algorithmOid=n,e.tbsCertificate=we.getTBSCertificate(e);var s=D.toDer(e.tbsCertificate);e.md.update(s.getBytes()),e.signature=t.sign(e.md)},e.verify=function(t){var r=!1;if(!e.issued(t)){var n=t.issuer,i=e.subject,s=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw s.expectedIssuer=i.attributes,s.actualIssuer=n.attributes,s}var o=t.md;if(o===null){o=$T({signatureOid:t.signatureOid,type:"certificate"});var a=t.tbsCertificate||we.getTBSCertificate(t),l=D.toDer(a);o.update(l.getBytes())}return o!==null&&(r=Jce({certificate:e,md:o,signature:t.signature})),r},e.isIssuer=function(t){var r=!1,n=e.issuer,i=t.subject;if(n.hash&&i.hash)r=n.hash===i.hash;else if(n.attributes.length===i.attributes.length){r=!0;for(var s,o,a=0;r&&a<n.attributes.length;++a)s=n.attributes[a],o=i.attributes[a],(s.type!==o.type||s.value!==o.value)&&(r=!1)}return r},e.issued=function(t){return t.isIssuer(e)},e.generateSubjectKeyIdentifier=function(){return we.getPublicKeyFingerprint(e.publicKey,{type:"RSAPublicKey"})},e.verifySubjectKeyIdentifier=function(){for(var t=_r.subjectKeyIdentifier,r=0;r<e.extensions.length;++r){var n=e.extensions[r];if(n.id===t){var i=e.generateSubjectKeyIdentifier().getBytes();return nt.util.hexToBytes(n.subjectKeyIdentifier)===i}}return!1},e};we.certificateFromAsn1=function(e,t){var r={},n=[];if(!D.validate(e,KXe,r,n)){var i=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw i.errors=n,i}var s=D.derToOid(r.publicKeyOid);if(s!==we.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var o=we.createCertificate();o.version=r.certVersion?r.certVersion.charCodeAt(0):0;var a=nt.util.createBuffer(r.certSerialNumber);o.serialNumber=a.toHex(),o.signatureOid=nt.asn1.derToOid(r.certSignatureOid),o.signatureParameters=GT(o.signatureOid,r.certSignatureParams,!0),o.siginfo.algorithmOid=nt.asn1.derToOid(r.certinfoSignatureOid),o.siginfo.parameters=GT(o.siginfo.algorithmOid,r.certinfoSignatureParams,!1),o.signature=r.certSignature;var l=[];if(r.certValidity1UTCTime!==void 0&&l.push(D.utcTimeToDate(r.certValidity1UTCTime)),r.certValidity2GeneralizedTime!==void 0&&l.push(D.generalizedTimeToDate(r.certValidity2GeneralizedTime)),r.certValidity3UTCTime!==void 0&&l.push(D.utcTimeToDate(r.certValidity3UTCTime)),r.certValidity4GeneralizedTime!==void 0&&l.push(D.generalizedTimeToDate(r.certValidity4GeneralizedTime)),l.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(l.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(o.validity.notBefore=l[0],o.validity.notAfter=l[1],o.tbsCertificate=r.tbsCertificate,t){o.md=$T({signatureOid:o.signatureOid,type:"certificate"});var c=D.toDer(o.tbsCertificate);o.md.update(c.getBytes())}var u=nt.md.sha1.create(),f=D.toDer(r.certIssuer);u.update(f.getBytes()),o.issuer.getField=function(A){return Sh(o.issuer,A)},o.issuer.addField=function(A){xl([A]),o.issuer.attributes.push(A)},o.issuer.attributes=we.RDNAttributesAsArray(r.certIssuer),r.certIssuerUniqueId&&(o.issuer.uniqueId=r.certIssuerUniqueId),o.issuer.hash=u.digest().toHex();var p=nt.md.sha1.create(),g=D.toDer(r.certSubject);return p.update(g.getBytes()),o.subject.getField=function(A){return Sh(o.subject,A)},o.subject.addField=function(A){xl([A]),o.subject.attributes.push(A)},o.subject.attributes=we.RDNAttributesAsArray(r.certSubject),r.certSubjectUniqueId&&(o.subject.uniqueId=r.certSubjectUniqueId),o.subject.hash=p.digest().toHex(),r.certExtensions?o.extensions=we.certificateExtensionsFromAsn1(r.certExtensions):o.extensions=[],o.publicKey=we.publicKeyFromAsn1(r.subjectPublicKeyInfo),o};we.certificateExtensionsFromAsn1=function(e){for(var t=[],r=0;r<e.value.length;++r)for(var n=e.value[r],i=0;i<n.value.length;++i)t.push(we.certificateExtensionFromAsn1(n.value[i]));return t};we.certificateExtensionFromAsn1=function(e){var t={};if(t.id=D.derToOid(e.value[0].value),t.critical=!1,e.value[1].type===D.Type.BOOLEAN?(t.critical=e.value[1].value.charCodeAt(0)!==0,t.value=e.value[2].value):t.value=e.value[1].value,t.id in _r){if(t.name=_r[t.id],t.name==="keyUsage"){var r=D.fromDer(t.value),n=0,i=0;r.value.length>1&&(n=r.value.charCodeAt(1),i=r.value.length>2?r.value.charCodeAt(2):0),t.digitalSignature=(n&128)===128,t.nonRepudiation=(n&64)===64,t.keyEncipherment=(n&32)===32,t.dataEncipherment=(n&16)===16,t.keyAgreement=(n&8)===8,t.keyCertSign=(n&4)===4,t.cRLSign=(n&2)===2,t.encipherOnly=(n&1)===1,t.decipherOnly=(i&128)===128}else if(t.name==="basicConstraints"){var r=D.fromDer(t.value);r.value.length>0&&r.value[0].type===D.Type.BOOLEAN?t.cA=r.value[0].value.charCodeAt(0)!==0:t.cA=!1;var s=null;r.value.length>0&&r.value[0].type===D.Type.INTEGER?s=r.value[0].value:r.value.length>1&&(s=r.value[1].value),s!==null&&(t.pathLenConstraint=D.derToInteger(s))}else if(t.name==="extKeyUsage")for(var r=D.fromDer(t.value),o=0;o<r.value.length;++o){var a=D.derToOid(r.value[o].value);a in _r?t[_r[a]]=!0:t[a]=!0}else if(t.name==="nsCertType"){var r=D.fromDer(t.value),n=0;r.value.length>1&&(n=r.value.charCodeAt(1)),t.client=(n&128)===128,t.server=(n&64)===64,t.email=(n&32)===32,t.objsign=(n&16)===16,t.reserved=(n&8)===8,t.sslCA=(n&4)===4,t.emailCA=(n&2)===2,t.objCA=(n&1)===1}else if(t.name==="subjectAltName"||t.name==="issuerAltName"){t.altNames=[];for(var l,r=D.fromDer(t.value),c=0;c<r.value.length;++c){l=r.value[c];var u={type:l.type,value:l.value};switch(t.altNames.push(u),l.type){case 1:case 2:case 6:break;case 7:u.ip=nt.util.bytesToIP(l.value);break;case 8:u.oid=D.derToOid(l.value);break;default:}}}else if(t.name==="subjectKeyIdentifier"){var r=D.fromDer(t.value);t.subjectKeyIdentifier=nt.util.bytesToHex(r.value)}}return t};we.certificationRequestFromAsn1=function(e,t){var r={},n=[];if(!D.validate(e,jXe,r,n)){var i=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw i.errors=n,i}var s=D.derToOid(r.publicKeyOid);if(s!==we.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var o=we.createCertificationRequest();if(o.version=r.csrVersion?r.csrVersion.charCodeAt(0):0,o.signatureOid=nt.asn1.derToOid(r.csrSignatureOid),o.signatureParameters=GT(o.signatureOid,r.csrSignatureParams,!0),o.siginfo.algorithmOid=nt.asn1.derToOid(r.csrSignatureOid),o.siginfo.parameters=GT(o.siginfo.algorithmOid,r.csrSignatureParams,!1),o.signature=r.csrSignature,o.certificationRequestInfo=r.certificationRequestInfo,t){o.md=$T({signatureOid:o.signatureOid,type:"certification request"});var a=D.toDer(o.certificationRequestInfo);o.md.update(a.getBytes())}var l=nt.md.sha1.create();return o.subject.getField=function(c){return Sh(o.subject,c)},o.subject.addField=function(c){xl([c]),o.subject.attributes.push(c)},o.subject.attributes=we.RDNAttributesAsArray(r.certificationRequestInfoSubject,l),o.subject.hash=l.digest().toHex(),o.publicKey=we.publicKeyFromAsn1(r.subjectPublicKeyInfo),o.getAttribute=function(c){return Sh(o,c)},o.addAttribute=function(c){xl([c]),o.attributes.push(c)},o.attributes=we.CRIAttributesAsArray(r.certificationRequestInfoAttributes||[]),o};we.createCertificationRequest=function(){var e={};return e.version=0,e.signatureOid=null,e.signature=null,e.siginfo={},e.siginfo.algorithmOid=null,e.subject={},e.subject.getField=function(t){return Sh(e.subject,t)},e.subject.addField=function(t){xl([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.publicKey=null,e.attributes=[],e.getAttribute=function(t){return Sh(e,t)},e.addAttribute=function(t){xl([t]),e.attributes.push(t)},e.md=null,e.setSubject=function(t){xl(t),e.subject.attributes=t,e.subject.hash=null},e.setAttributes=function(t){xl(t),e.attributes=t},e.sign=function(t,r){e.md=r||nt.md.sha1.create();var n=_r[e.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw i.algorithm=e.md.algorithm,i}e.signatureOid=e.siginfo.algorithmOid=n,e.certificationRequestInfo=we.getCertificationRequestInfo(e);var s=D.toDer(e.certificationRequestInfo);e.md.update(s.getBytes()),e.signature=t.sign(e.md)},e.verify=function(){var t=!1,r=e.md;if(r===null){r=$T({signatureOid:e.signatureOid,type:"certification request"});var n=e.certificationRequestInfo||we.getCertificationRequestInfo(e),i=D.toDer(n);r.update(i.getBytes())}return r!==null&&(t=Jce({certificate:e,md:r,signature:e.signature})),t},e};function ly(e){for(var t=D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[]),r,n,i=e.attributes,s=0;s<i.length;++s){r=i[s];var o=r.value,a=D.Type.PRINTABLESTRING;"valueTagClass"in r&&(a=r.valueTagClass,a===D.Type.UTF8&&(o=nt.util.encodeUtf8(o))),n=D.create(D.Class.UNIVERSAL,D.Type.SET,!0,[D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(r.type).getBytes()),D.create(D.Class.UNIVERSAL,a,!1,o)])]),t.value.push(n)}return t}function xl(e){for(var t,r=0;r<e.length;++r){if(t=e[r],typeof t.name>"u"&&(t.type&&t.type in we.oids?t.name=we.oids[t.type]:t.shortName&&t.shortName in ai&&(t.name=we.oids[ai[t.shortName]])),typeof t.type>"u")if(t.name&&t.name in we.oids)t.type=we.oids[t.name];else{var n=new Error("Attribute type not specified.");throw n.attribute=t,n}if(typeof t.shortName>"u"&&t.name&&t.name in ai&&(t.shortName=ai[t.name]),t.type===_r.extensionRequest&&(t.valueConstructed=!0,t.valueTagClass=D.Type.SEQUENCE,!t.value&&t.extensions)){t.value=[];for(var i=0;i<t.extensions.length;++i)t.value.push(we.certificateExtensionToAsn1(jce(t.extensions[i])))}if(typeof t.value>"u"){var n=new Error("Attribute value not specified.");throw n.attribute=t,n}}}function jce(e,t){if(t=t||{},typeof e.name>"u"&&e.id&&e.id in we.oids&&(e.name=we.oids[e.id]),typeof e.id>"u")if(e.name&&e.name in we.oids)e.id=we.oids[e.name];else{var r=new Error("Extension ID not specified.");throw r.extension=e,r}if(typeof e.value<"u")return e;if(e.name==="keyUsage"){var n=0,i=0,s=0;e.digitalSignature&&(i|=128,n=7),e.nonRepudiation&&(i|=64,n=6),e.keyEncipherment&&(i|=32,n=5),e.dataEncipherment&&(i|=16,n=4),e.keyAgreement&&(i|=8,n=3),e.keyCertSign&&(i|=4,n=2),e.cRLSign&&(i|=2,n=1),e.encipherOnly&&(i|=1,n=0),e.decipherOnly&&(s|=128,n=7);var o=String.fromCharCode(n);s!==0?o+=String.fromCharCode(i)+String.fromCharCode(s):i!==0&&(o+=String.fromCharCode(i)),e.value=D.create(D.Class.UNIVERSAL,D.Type.BITSTRING,!1,o)}else if(e.name==="basicConstraints")e.value=D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[]),e.cA&&e.value.value.push(D.create(D.Class.UNIVERSAL,D.Type.BOOLEAN,!1,"\xFF")),"pathLenConstraint"in e&&e.value.value.push(D.create(D.Class.UNIVERSAL,D.Type.INTEGER,!1,D.integerToDer(e.pathLenConstraint).getBytes()));else if(e.name==="extKeyUsage"){e.value=D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[]);var a=e.value.value;for(var l in e)e[l]===!0&&(l in _r?a.push(D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(_r[l]).getBytes())):l.indexOf(".")!==-1&&a.push(D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(l).getBytes())))}else if(e.name==="nsCertType"){var n=0,i=0;e.client&&(i|=128,n=7),e.server&&(i|=64,n=6),e.email&&(i|=32,n=5),e.objsign&&(i|=16,n=4),e.reserved&&(i|=8,n=3),e.sslCA&&(i|=4,n=2),e.emailCA&&(i|=2,n=1),e.objCA&&(i|=1,n=0);var o=String.fromCharCode(n);i!==0&&(o+=String.fromCharCode(i)),e.value=D.create(D.Class.UNIVERSAL,D.Type.BITSTRING,!1,o)}else if(e.name==="subjectAltName"||e.name==="issuerAltName"){e.value=D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[]);for(var c,u=0;u<e.altNames.length;++u){c=e.altNames[u];var o=c.value;if(c.type===7&&c.ip){if(o=nt.util.bytesFromIP(c.ip),o===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=e,r}}else c.type===8&&(c.oid?o=D.oidToDer(D.oidToDer(c.oid)):o=D.oidToDer(o));e.value.value.push(D.create(D.Class.CONTEXT_SPECIFIC,c.type,!1,o))}}else if(e.name==="nsComment"&&t.cert){if(!/^[\x00-\x7F]*$/.test(e.comment)||e.comment.length<1||e.comment.length>128)throw new Error('Invalid "nsComment" content.');e.value=D.create(D.Class.UNIVERSAL,D.Type.IA5STRING,!1,e.comment)}else if(e.name==="subjectKeyIdentifier"&&t.cert){var f=t.cert.generateSubjectKeyIdentifier();e.subjectKeyIdentifier=f.toHex(),e.value=D.create(D.Class.UNIVERSAL,D.Type.OCTETSTRING,!1,f.getBytes())}else if(e.name==="authorityKeyIdentifier"&&t.cert){e.value=D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[]);var a=e.value.value;if(e.keyIdentifier){var p=e.keyIdentifier===!0?t.cert.generateSubjectKeyIdentifier().getBytes():e.keyIdentifier;a.push(D.create(D.Class.CONTEXT_SPECIFIC,0,!1,p))}if(e.authorityCertIssuer){var g=[D.create(D.Class.CONTEXT_SPECIFIC,4,!0,[ly(e.authorityCertIssuer===!0?t.cert.issuer:e.authorityCertIssuer)])];a.push(D.create(D.Class.CONTEXT_SPECIFIC,1,!0,g))}if(e.serialNumber){var A=nt.util.hexToBytes(e.serialNumber===!0?t.cert.serialNumber:e.serialNumber);a.push(D.create(D.Class.CONTEXT_SPECIFIC,2,!1,A))}}else if(e.name==="cRLDistributionPoints"){e.value=D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[]);for(var a=e.value.value,y=D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[]),C=D.create(D.Class.CONTEXT_SPECIFIC,0,!0,[]),c,u=0;u<e.altNames.length;++u){c=e.altNames[u];var o=c.value;if(c.type===7&&c.ip){if(o=nt.util.bytesFromIP(c.ip),o===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=e,r}}else c.type===8&&(c.oid?o=D.oidToDer(D.oidToDer(c.oid)):o=D.oidToDer(o));C.value.push(D.create(D.Class.CONTEXT_SPECIFIC,c.type,!1,o))}y.value.push(D.create(D.Class.CONTEXT_SPECIFIC,0,!0,[C])),a.push(y)}if(typeof e.value>"u"){var r=new Error("Extension value not specified.");throw r.extension=e,r}return e}function i5(e,t){switch(e){case _r["RSASSA-PSS"]:var r=[];return t.hash.algorithmOid!==void 0&&r.push(D.create(D.Class.CONTEXT_SPECIFIC,0,!0,[D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(t.hash.algorithmOid).getBytes()),D.create(D.Class.UNIVERSAL,D.Type.NULL,!1,"")])])),t.mgf.algorithmOid!==void 0&&r.push(D.create(D.Class.CONTEXT_SPECIFIC,1,!0,[D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(t.mgf.algorithmOid).getBytes()),D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(t.mgf.hash.algorithmOid).getBytes()),D.create(D.Class.UNIVERSAL,D.Type.NULL,!1,"")])])])),t.saltLength!==void 0&&r.push(D.create(D.Class.CONTEXT_SPECIFIC,2,!0,[D.create(D.Class.UNIVERSAL,D.Type.INTEGER,!1,D.integerToDer(t.saltLength).getBytes())])),D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,r);default:return D.create(D.Class.UNIVERSAL,D.Type.NULL,!1,"")}}function ZXe(e){var t=D.create(D.Class.CONTEXT_SPECIFIC,0,!0,[]);if(e.attributes.length===0)return t;for(var r=e.attributes,n=0;n<r.length;++n){var i=r[n],s=i.value,o=D.Type.UTF8;"valueTagClass"in i&&(o=i.valueTagClass),o===D.Type.UTF8&&(s=nt.util.encodeUtf8(s));var a=!1;"valueConstructed"in i&&(a=i.valueConstructed);var l=D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(i.type).getBytes()),D.create(D.Class.UNIVERSAL,D.Type.SET,!0,[D.create(D.Class.UNIVERSAL,o,a,s)])]);t.value.push(l)}return t}var XXe=new Date("1950-01-01T00:00:00Z"),eet=new Date("2050-01-01T00:00:00Z");function Kce(e){return e>=XXe&&e<eet?D.create(D.Class.UNIVERSAL,D.Type.UTCTIME,!1,D.dateToUtcTime(e)):D.create(D.Class.UNIVERSAL,D.Type.GENERALIZEDTIME,!1,D.dateToGeneralizedTime(e))}we.getTBSCertificate=function(e){var t=Kce(e.validity.notBefore),r=Kce(e.validity.notAfter),n=D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.CONTEXT_SPECIFIC,0,!0,[D.create(D.Class.UNIVERSAL,D.Type.INTEGER,!1,D.integerToDer(e.version).getBytes())]),D.create(D.Class.UNIVERSAL,D.Type.INTEGER,!1,nt.util.hexToBytes(e.serialNumber)),D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(e.siginfo.algorithmOid).getBytes()),i5(e.siginfo.algorithmOid,e.siginfo.parameters)]),ly(e.issuer),D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[t,r]),ly(e.subject),we.publicKeyToAsn1(e.publicKey)]);return e.issuer.uniqueId&&n.value.push(D.create(D.Class.CONTEXT_SPECIFIC,1,!0,[D.create(D.Class.UNIVERSAL,D.Type.BITSTRING,!1,"\0"+e.issuer.uniqueId)])),e.subject.uniqueId&&n.value.push(D.create(D.Class.CONTEXT_SPECIFIC,2,!0,[D.create(D.Class.UNIVERSAL,D.Type.BITSTRING,!1,"\0"+e.subject.uniqueId)])),e.extensions.length>0&&n.value.push(we.certificateExtensionsToAsn1(e.extensions)),n};we.getCertificationRequestInfo=function(e){var t=D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.INTEGER,!1,D.integerToDer(e.version).getBytes()),ly(e.subject),we.publicKeyToAsn1(e.publicKey),ZXe(e)]);return t};we.distinguishedNameToAsn1=function(e){return ly(e)};we.certificateToAsn1=function(e){var t=e.tbsCertificate||we.getTBSCertificate(e);return D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[t,D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(e.signatureOid).getBytes()),i5(e.signatureOid,e.signatureParameters)]),D.create(D.Class.UNIVERSAL,D.Type.BITSTRING,!1,"\0"+e.signature)])};we.certificateExtensionsToAsn1=function(e){var t=D.create(D.Class.CONTEXT_SPECIFIC,3,!0,[]),r=D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[]);t.value.push(r);for(var n=0;n<e.length;++n)r.value.push(we.certificateExtensionToAsn1(e[n]));return t};we.certificateExtensionToAsn1=function(e){var t=D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[]);t.value.push(D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(e.id).getBytes())),e.critical&&t.value.push(D.create(D.Class.UNIVERSAL,D.Type.BOOLEAN,!1,"\xFF"));var r=e.value;return typeof e.value!="string"&&(r=D.toDer(r).getBytes()),t.value.push(D.create(D.Class.UNIVERSAL,D.Type.OCTETSTRING,!1,r)),t};we.certificationRequestToAsn1=function(e){var t=e.certificationRequestInfo||we.getCertificationRequestInfo(e);return D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[t,D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(e.signatureOid).getBytes()),i5(e.signatureOid,e.signatureParameters)]),D.create(D.Class.UNIVERSAL,D.Type.BITSTRING,!1,"\0"+e.signature)])};we.createCaStore=function(e){var t={certs:{}};t.getIssuer=function(o){var a=r(o.issuer);return a},t.addCertificate=function(o){if(typeof o=="string"&&(o=nt.pki.certificateFromPem(o)),n(o.subject),!t.hasCertificate(o))if(o.subject.hash in t.certs){var a=t.certs[o.subject.hash];nt.util.isArray(a)||(a=[a]),a.push(o),t.certs[o.subject.hash]=a}else t.certs[o.subject.hash]=o},t.hasCertificate=function(o){typeof o=="string"&&(o=nt.pki.certificateFromPem(o));var a=r(o.subject);if(!a)return!1;nt.util.isArray(a)||(a=[a]);for(var l=D.toDer(we.certificateToAsn1(o)).getBytes(),c=0;c<a.length;++c){var u=D.toDer(we.certificateToAsn1(a[c])).getBytes();if(l===u)return!0}return!1},t.listAllCertificates=function(){var o=[];for(var a in t.certs)if(t.certs.hasOwnProperty(a)){var l=t.certs[a];if(!nt.util.isArray(l))o.push(l);else for(var c=0;c<l.length;++c)o.push(l[c])}return o},t.removeCertificate=function(o){var a;if(typeof o=="string"&&(o=nt.pki.certificateFromPem(o)),n(o.subject),!t.hasCertificate(o))return null;var l=r(o.subject);if(!nt.util.isArray(l))return a=t.certs[o.subject.hash],delete t.certs[o.subject.hash],a;for(var c=D.toDer(we.certificateToAsn1(o)).getBytes(),u=0;u<l.length;++u){var f=D.toDer(we.certificateToAsn1(l[u])).getBytes();c===f&&(a=l[u],l.splice(u,1))}return l.length===0&&delete t.certs[o.subject.hash],a};function r(o){return n(o),t.certs[o.hash]||null}function n(o){if(!o.hash){var a=nt.md.sha1.create();o.attributes=we.RDNAttributesAsArray(ly(o),a),o.hash=a.digest().toHex()}}if(e)for(var i=0;i<e.length;++i){var s=e[i];t.addCertificate(s)}return t};we.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"};we.verifyCertificateChain=function(e,t,r){typeof r=="function"&&(r={verify:r}),r=r||{},t=t.slice(0);var n=t.slice(0),i=r.validityCheckDate;typeof i>"u"&&(i=new Date);var s=!0,o=null,a=0;do{var l=t.shift(),c=null,u=!1;if(i&&(i<l.validity.notBefore||i>l.validity.notAfter)&&(o={message:"Certificate is not valid yet or has expired.",error:we.certificateError.certificate_expired,notBefore:l.validity.notBefore,notAfter:l.validity.notAfter,now:i}),o===null){if(c=t[0]||e.getIssuer(l),c===null&&l.isIssuer(l)&&(u=!0,c=l),c){var f=c;nt.util.isArray(f)||(f=[f]);for(var p=!1;!p&&f.length>0;){c=f.shift();try{p=c.verify(l)}catch{}}p||(o={message:"Certificate signature is invalid.",error:we.certificateError.bad_certificate})}o===null&&(!c||u)&&!e.hasCertificate(l)&&(o={message:"Certificate is not trusted.",error:we.certificateError.unknown_ca})}if(o===null&&c&&!l.isIssuer(c)&&(o={message:"Certificate issuer is invalid.",error:we.certificateError.bad_certificate}),o===null)for(var g={keyUsage:!0,basicConstraints:!0},A=0;o===null&&A<l.extensions.length;++A){var y=l.extensions[A];y.critical&&!(y.name in g)&&(o={message:"Certificate has an unsupported critical extension.",error:we.certificateError.unsupported_certificate})}if(o===null&&(!s||t.length===0&&(!c||u))){var C=l.getExtension("basicConstraints"),v=l.getExtension("keyUsage");if(v!==null&&(!v.keyCertSign||C===null)&&(o={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:we.certificateError.bad_certificate}),o===null&&C!==null&&!C.cA&&(o={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:we.certificateError.bad_certificate}),o===null&&v!==null&&"pathLenConstraint"in C){var b=a-1;b>C.pathLenConstraint&&(o={message:"Certificate basicConstraints pathLenConstraint violated.",error:we.certificateError.bad_certificate})}}var w=o===null?!0:o.error,B=r.verify?r.verify(w,a,n):w;if(B===!0)o=null;else throw w===!0&&(o={message:"The application rejected the certificate.",error:we.certificateError.bad_certificate}),(B||B===0)&&(typeof B=="object"&&!nt.util.isArray(B)?(B.message&&(o.message=B.message),B.error&&(o.error=B.error)):typeof B=="string"&&(o.error=B)),o;s=!1,++a}while(t.length>0);return!0}});var o5=x((YDt,eue)=>{"use strict";var vn=Jt();bc();ty();_h();r5();t5();vl();Kb();sy();Dr();YT();var q=vn.asn1,cr=vn.pki,Jb=eue.exports=vn.pkcs12=vn.pkcs12||{},Xce={name:"ContentInfo",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:q.Class.UNIVERSAL,type:q.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:q.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},tet={name:"PFX",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:q.Class.UNIVERSAL,type:q.Type.INTEGER,constructed:!1,capture:"version"},Xce,{name:"PFX.macData",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:q.Class.UNIVERSAL,type:q.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:q.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:q.Class.UNIVERSAL,type:q.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:q.Class.UNIVERSAL,type:q.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:q.Class.UNIVERSAL,type:q.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},ret={name:"SafeBag",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:q.Class.UNIVERSAL,type:q.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:q.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:q.Class.UNIVERSAL,type:q.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},net={name:"Attribute",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:q.Class.UNIVERSAL,type:q.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:q.Class.UNIVERSAL,type:q.Type.SET,constructed:!0,capture:"values"}]},iet={name:"CertBag",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:q.Class.UNIVERSAL,type:q.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:q.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:q.Class.UNIVERSAL,type:q.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function zb(e,t,r,n){for(var i=[],s=0;s<e.length;s++)for(var o=0;o<e[s].safeBags.length;o++){var a=e[s].safeBags[o];if(!(n!==void 0&&a.type!==n)){if(t===null){i.push(a);continue}a.attributes[t]!==void 0&&a.attributes[t].indexOf(r)>=0&&i.push(a)}}return i}Jb.pkcs12FromAsn1=function(e,t,r){typeof t=="string"?(r=t,t=!0):t===void 0&&(t=!0);var n={},i=[];if(!q.validate(e,tet,n,i)){var s=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.");throw s.errors=s,s}var o={version:n.version.charCodeAt(0),safeContents:[],getBags:function(C){var v={},b;return"localKeyId"in C?b=C.localKeyId:"localKeyIdHex"in C&&(b=vn.util.hexToBytes(C.localKeyIdHex)),b===void 0&&!("friendlyName"in C)&&"bagType"in C&&(v[C.bagType]=zb(o.safeContents,null,null,C.bagType)),b!==void 0&&(v.localKeyId=zb(o.safeContents,"localKeyId",b,C.bagType)),"friendlyName"in C&&(v.friendlyName=zb(o.safeContents,"friendlyName",C.friendlyName,C.bagType)),v},getBagsByFriendlyName:function(C,v){return zb(o.safeContents,"friendlyName",C,v)},getBagsByLocalKeyId:function(C,v){return zb(o.safeContents,"localKeyId",C,v)}};if(n.version.charCodeAt(0)!==3){var s=new Error("PKCS#12 PFX of version other than 3 not supported.");throw s.version=n.version.charCodeAt(0),s}if(q.derToOid(n.contentType)!==cr.oids.data){var s=new Error("Only PKCS#12 PFX in password integrity mode supported.");throw s.oid=q.derToOid(n.contentType),s}var a=n.content.value[0];if(a.tagClass!==q.Class.UNIVERSAL||a.type!==q.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(a=s5(a),n.mac){var l=null,c=0,u=q.derToOid(n.macAlgorithm);switch(u){case cr.oids.sha1:l=vn.md.sha1.create(),c=20;break;case cr.oids.sha256:l=vn.md.sha256.create(),c=32;break;case cr.oids.sha384:l=vn.md.sha384.create(),c=48;break;case cr.oids.sha512:l=vn.md.sha512.create(),c=64;break;case cr.oids.md5:l=vn.md.md5.create(),c=16;break}if(l===null)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+u);var f=new vn.util.ByteBuffer(n.macSalt),p="macIterations"in n?parseInt(vn.util.bytesToHex(n.macIterations),16):1,g=Jb.generateKey(r,f,3,p,c,l),A=vn.hmac.create();A.start(l,g),A.update(a.value);var y=A.getMac();if(y.getBytes()!==n.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return set(o,a.value,t,r),o};function s5(e){if(e.composed||e.constructed){for(var t=vn.util.createBuffer(),r=0;r<e.value.length;++r)t.putBytes(e.value[r].value);e.composed=e.constructed=!1,e.value=t.getBytes()}return e}function set(e,t,r,n){if(t=q.fromDer(t,r),t.tagClass!==q.Class.UNIVERSAL||t.type!==q.Type.SEQUENCE||t.constructed!==!0)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var i=0;i<t.value.length;i++){var s=t.value[i],o={},a=[];if(!q.validate(s,Xce,o,a)){var l=new Error("Cannot read ContentInfo.");throw l.errors=a,l}var c={encrypted:!1},u=null,f=o.content.value[0];switch(q.derToOid(o.contentType)){case cr.oids.data:if(f.tagClass!==q.Class.UNIVERSAL||f.type!==q.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");u=s5(f).value;break;case cr.oids.encryptedData:u=oet(f,n),c.encrypted=!0;break;default:var l=new Error("Unsupported PKCS#12 contentType.");throw l.contentType=q.derToOid(o.contentType),l}c.safeBags=aet(u,r,n),e.safeContents.push(c)}}function oet(e,t){var r={},n=[];if(!q.validate(e,vn.pkcs7.asn1.encryptedDataValidator,r,n)){var i=new Error("Cannot read EncryptedContentInfo.");throw i.errors=n,i}var s=q.derToOid(r.contentType);if(s!==cr.oids.data){var i=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.");throw i.oid=s,i}s=q.derToOid(r.encAlgorithm);var o=cr.pbe.getCipher(s,r.encParameter,t),a=s5(r.encryptedContentAsn1),l=vn.util.createBuffer(a.value);if(o.update(l),!o.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return o.output.getBytes()}function aet(e,t,r){if(!t&&e.length===0)return[];if(e=q.fromDer(e,t),e.tagClass!==q.Class.UNIVERSAL||e.type!==q.Type.SEQUENCE||e.constructed!==!0)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var n=[],i=0;i<e.value.length;i++){var s=e.value[i],o={},a=[];if(!q.validate(s,ret,o,a)){var l=new Error("Cannot read SafeBag.");throw l.errors=a,l}var c={type:q.derToOid(o.bagId),attributes:cet(o.bagAttributes)};n.push(c);var u,f,p=o.bagValue.value[0];switch(c.type){case cr.oids.pkcs8ShroudedKeyBag:if(p=cr.decryptPrivateKeyInfo(p,r),p===null)throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case cr.oids.keyBag:try{c.key=cr.privateKeyFromAsn1(p)}catch{c.key=null,c.asn1=p}continue;case cr.oids.certBag:u=iet,f=function(){if(q.derToOid(o.certId)!==cr.oids.x509Certificate){var A=new Error("Unsupported certificate type, only X.509 supported.");throw A.oid=q.derToOid(o.certId),A}var y=q.fromDer(o.cert,t);try{c.cert=cr.certificateFromAsn1(y,!0)}catch{c.cert=null,c.asn1=y}};break;default:var l=new Error("Unsupported PKCS#12 SafeBag type.");throw l.oid=c.type,l}if(u!==void 0&&!q.validate(p,u,o,a)){var l=new Error("Cannot read PKCS#12 "+u.name);throw l.errors=a,l}f()}return n}function cet(e){var t={};if(e!==void 0)for(var r=0;r<e.length;++r){var n={},i=[];if(!q.validate(e[r],net,n,i)){var s=new Error("Cannot read PKCS#12 BagAttribute.");throw s.errors=i,s}var o=q.derToOid(n.oid);if(cr.oids[o]!==void 0){t[cr.oids[o]]=[];for(var a=0;a<n.values.length;++a)t[cr.oids[o]].push(n.values[a].value)}}return t}Jb.toPkcs12Asn1=function(e,t,r,n){n=n||{},n.saltSize=n.saltSize||8,n.count=n.count||2048,n.algorithm=n.algorithm||n.encAlgorithm||"aes128","useMac"in n||(n.useMac=!0),"localKeyId"in n||(n.localKeyId=null),"generateLocalKeyId"in n||(n.generateLocalKeyId=!0);var i=n.localKeyId,s;if(i!==null)i=vn.util.hexToBytes(i);else if(n.generateLocalKeyId)if(t){var o=vn.util.isArray(t)?t[0]:t;typeof o=="string"&&(o=cr.certificateFromPem(o));var a=vn.md.sha1.create();a.update(q.toDer(cr.certificateToAsn1(o)).getBytes()),i=a.digest().getBytes()}else i=vn.random.getBytes(20);var l=[];i!==null&&l.push(q.create(q.Class.UNIVERSAL,q.Type.SEQUENCE,!0,[q.create(q.Class.UNIVERSAL,q.Type.OID,!1,q.oidToDer(cr.oids.localKeyId).getBytes()),q.create(q.Class.UNIVERSAL,q.Type.SET,!0,[q.create(q.Class.UNIVERSAL,q.Type.OCTETSTRING,!1,i)])])),"friendlyName"in n&&l.push(q.create(q.Class.UNIVERSAL,q.Type.SEQUENCE,!0,[q.create(q.Class.UNIVERSAL,q.Type.OID,!1,q.oidToDer(cr.oids.friendlyName).getBytes()),q.create(q.Class.UNIVERSAL,q.Type.SET,!0,[q.create(q.Class.UNIVERSAL,q.Type.BMPSTRING,!1,n.friendlyName)])])),l.length>0&&(s=q.create(q.Class.UNIVERSAL,q.Type.SET,!0,l));var c=[],u=[];t!==null&&(vn.util.isArray(t)?u=t:u=[t]);for(var f=[],p=0;p<u.length;++p){t=u[p],typeof t=="string"&&(t=cr.certificateFromPem(t));var g=p===0?s:void 0,A=cr.certificateToAsn1(t),y=q.create(q.Class.UNIVERSAL,q.Type.SEQUENCE,!0,[q.create(q.Class.UNIVERSAL,q.Type.OID,!1,q.oidToDer(cr.oids.certBag).getBytes()),q.create(q.Class.CONTEXT_SPECIFIC,0,!0,[q.create(q.Class.UNIVERSAL,q.Type.SEQUENCE,!0,[q.create(q.Class.UNIVERSAL,q.Type.OID,!1,q.oidToDer(cr.oids.x509Certificate).getBytes()),q.create(q.Class.CONTEXT_SPECIFIC,0,!0,[q.create(q.Class.UNIVERSAL,q.Type.OCTETSTRING,!1,q.toDer(A).getBytes())])])]),g]);f.push(y)}if(f.length>0){var C=q.create(q.Class.UNIVERSAL,q.Type.SEQUENCE,!0,f),v=q.create(q.Class.UNIVERSAL,q.Type.SEQUENCE,!0,[q.create(q.Class.UNIVERSAL,q.Type.OID,!1,q.oidToDer(cr.oids.data).getBytes()),q.create(q.Class.CONTEXT_SPECIFIC,0,!0,[q.create(q.Class.UNIVERSAL,q.Type.OCTETSTRING,!1,q.toDer(C).getBytes())])]);c.push(v)}var b=null;if(e!==null){var w=cr.wrapRsaPrivateKey(cr.privateKeyToAsn1(e));r===null?b=q.create(q.Class.UNIVERSAL,q.Type.SEQUENCE,!0,[q.create(q.Class.UNIVERSAL,q.Type.OID,!1,q.oidToDer(cr.oids.keyBag).getBytes()),q.create(q.Class.CONTEXT_SPECIFIC,0,!0,[w]),s]):b=q.create(q.Class.UNIVERSAL,q.Type.SEQUENCE,!0,[q.create(q.Class.UNIVERSAL,q.Type.OID,!1,q.oidToDer(cr.oids.pkcs8ShroudedKeyBag).getBytes()),q.create(q.Class.CONTEXT_SPECIFIC,0,!0,[cr.encryptPrivateKeyInfo(w,r,n)]),s]);var B=q.create(q.Class.UNIVERSAL,q.Type.SEQUENCE,!0,[b]),F=q.create(q.Class.UNIVERSAL,q.Type.SEQUENCE,!0,[q.create(q.Class.UNIVERSAL,q.Type.OID,!1,q.oidToDer(cr.oids.data).getBytes()),q.create(q.Class.CONTEXT_SPECIFIC,0,!0,[q.create(q.Class.UNIVERSAL,q.Type.OCTETSTRING,!1,q.toDer(B).getBytes())])]);c.push(F)}var Q=q.create(q.Class.UNIVERSAL,q.Type.SEQUENCE,!0,c),W;if(n.useMac){var a=vn.md.sha1.create(),Z=new vn.util.ByteBuffer(vn.random.getBytes(n.saltSize)),$=n.count,e=Jb.generateKey(r,Z,3,$,20),ee=vn.hmac.create();ee.start(a,e),ee.update(q.toDer(Q).getBytes());var U=ee.getMac();W=q.create(q.Class.UNIVERSAL,q.Type.SEQUENCE,!0,[q.create(q.Class.UNIVERSAL,q.Type.SEQUENCE,!0,[q.create(q.Class.UNIVERSAL,q.Type.SEQUENCE,!0,[q.create(q.Class.UNIVERSAL,q.Type.OID,!1,q.oidToDer(cr.oids.sha1).getBytes()),q.create(q.Class.UNIVERSAL,q.Type.NULL,!1,"")]),q.create(q.Class.UNIVERSAL,q.Type.OCTETSTRING,!1,U.getBytes())]),q.create(q.Class.UNIVERSAL,q.Type.OCTETSTRING,!1,Z.getBytes()),q.create(q.Class.UNIVERSAL,q.Type.INTEGER,!1,q.integerToDer($).getBytes())])}return q.create(q.Class.UNIVERSAL,q.Type.SEQUENCE,!0,[q.create(q.Class.UNIVERSAL,q.Type.INTEGER,!1,q.integerToDer(3).getBytes()),q.create(q.Class.UNIVERSAL,q.Type.SEQUENCE,!0,[q.create(q.Class.UNIVERSAL,q.Type.OID,!1,q.oidToDer(cr.oids.data).getBytes()),q.create(q.Class.CONTEXT_SPECIFIC,0,!0,[q.create(q.Class.UNIVERSAL,q.Type.OCTETSTRING,!1,q.toDer(Q).getBytes())])]),W])};Jb.generateKey=vn.pbe.generatePkcs12Key});var l5=x((KDt,tue)=>{"use strict";var Bh=Jt();bc();_h();t5();qp();PT();o5();WT();Kb();Dr();YT();var a5=Bh.asn1,cy=tue.exports=Bh.pki=Bh.pki||{};cy.pemToDer=function(e){var t=Bh.pem.decode(e)[0];if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert PEM to DER; PEM is encrypted.");return Bh.util.createBuffer(t.body)};cy.privateKeyFromPem=function(e){var t=Bh.pem.decode(e)[0];if(t.type!=="PRIVATE KEY"&&t.type!=="RSA PRIVATE KEY"){var r=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw r.headerType=t.type,r}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert private key from PEM; PEM is encrypted.");var n=a5.fromDer(t.body);return cy.privateKeyFromAsn1(n)};cy.privateKeyToPem=function(e,t){var r={type:"RSA PRIVATE KEY",body:a5.toDer(cy.privateKeyToAsn1(e)).getBytes()};return Bh.pem.encode(r,{maxline:t})};cy.privateKeyInfoToPem=function(e,t){var r={type:"PRIVATE KEY",body:a5.toDer(e).getBytes()};return Bh.pem.encode(r,{maxline:t})}});var g5=x((zDt,cue)=>{"use strict";var Ae=Jt();bc();ty();FT();qp();l5();vl();sy();Dr();var jT=function(e,t,r,n){var i=Ae.util.createBuffer(),s=e.length>>1,o=s+(e.length&1),a=e.substr(0,o),l=e.substr(s,o),c=Ae.util.createBuffer(),u=Ae.hmac.create();r=t+r;var f=Math.ceil(n/16),p=Math.ceil(n/20);u.start("MD5",a);var g=Ae.util.createBuffer();c.putBytes(r);for(var A=0;A<f;++A)u.start(null,null),u.update(c.getBytes()),c.putBuffer(u.digest()),u.start(null,null),u.update(c.bytes()+r),g.putBuffer(u.digest());u.start("SHA1",l);var y=Ae.util.createBuffer();c.clear(),c.putBytes(r);for(var A=0;A<p;++A)u.start(null,null),u.update(c.getBytes()),c.putBuffer(u.digest()),u.start(null,null),u.update(c.bytes()+r),y.putBuffer(u.digest());return i.putBytes(Ae.util.xorBytes(g.getBytes(),y.getBytes(),n)),i},uet=function(e,t,r){var n=Ae.hmac.create();n.start("SHA1",e);var i=Ae.util.createBuffer();return i.putInt32(t[0]),i.putInt32(t[1]),i.putByte(r.type),i.putByte(r.version.major),i.putByte(r.version.minor),i.putInt16(r.length),i.putBytes(r.fragment.bytes()),n.update(i.getBytes()),n.digest().getBytes()},det=function(e,t,r){var n=!1;try{var i=e.deflate(t.fragment.getBytes());t.fragment=Ae.util.createBuffer(i),t.length=i.length,n=!0}catch{}return n},fet=function(e,t,r){var n=!1;try{var i=e.inflate(t.fragment.getBytes());t.fragment=Ae.util.createBuffer(i),t.length=i.length,n=!0}catch{}return n},Ta=function(e,t){var r=0;switch(t){case 1:r=e.getByte();break;case 2:r=e.getInt16();break;case 3:r=e.getInt24();break;case 4:r=e.getInt32();break}return Ae.util.createBuffer(e.getBytes(r))},_l=function(e,t,r){e.putInt(r.length(),t<<3),e.putBuffer(r)},k={};k.Versions={TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}};k.SupportedVersions=[k.Versions.TLS_1_1,k.Versions.TLS_1_0];k.Version=k.SupportedVersions[0];k.MaxFragment=15360;k.ConnectionEnd={server:0,client:1};k.PRFAlgorithm={tls_prf_sha256:0};k.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2};k.CipherType={stream:0,block:1,aead:2};k.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4};k.CompressionMethod={none:0,deflate:1};k.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24};k.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20};k.Alert={};k.Alert.Level={warning:1,fatal:2};k.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100};k.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2};k.CipherSuites={};k.getCipherSuite=function(e){var t=null;for(var r in k.CipherSuites){var n=k.CipherSuites[r];if(n.id[0]===e.charCodeAt(0)&&n.id[1]===e.charCodeAt(1)){t=n;break}}return t};k.handleUnexpected=function(e,t){var r=!e.open&&e.entity===k.ConnectionEnd.client;r||e.error(e,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:k.Alert.Level.fatal,description:k.Alert.Description.unexpected_message}})};k.handleHelloRequest=function(e,t,r){!e.handshaking&&e.handshakes>0&&(k.queue(e,k.createAlert(e,{level:k.Alert.Level.warning,description:k.Alert.Description.no_renegotiation})),k.flush(e)),e.process()};k.parseHelloMessage=function(e,t,r){var n=null,i=e.entity===k.ConnectionEnd.client;if(r<38)e.error(e,{message:i?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:k.Alert.Level.fatal,description:k.Alert.Description.illegal_parameter}});else{var s=t.fragment,o=s.length();if(n={version:{major:s.getByte(),minor:s.getByte()},random:Ae.util.createBuffer(s.getBytes(32)),session_id:Ta(s,1),extensions:[]},i?(n.cipher_suite=s.getBytes(2),n.compression_method=s.getByte()):(n.cipher_suites=Ta(s,2),n.compression_methods=Ta(s,1)),o=r-(o-s.length()),o>0){for(var a=Ta(s,2);a.length()>0;)n.extensions.push({type:[a.getByte(),a.getByte()],data:Ta(a,2)});if(!i)for(var l=0;l<n.extensions.length;++l){var c=n.extensions[l];if(c.type[0]===0&&c.type[1]===0)for(var u=Ta(c.data,2);u.length()>0;){var f=u.getByte();if(f!==0)break;e.session.extensions.server_name.serverNameList.push(Ta(u,2).getBytes())}}}if(e.session.version&&(n.version.major!==e.session.version.major||n.version.minor!==e.session.version.minor))return e.error(e,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:k.Alert.Level.fatal,description:k.Alert.Description.protocol_version}});if(i)e.session.cipherSuite=k.getCipherSuite(n.cipher_suite);else for(var p=Ae.util.createBuffer(n.cipher_suites.bytes());p.length()>0&&(e.session.cipherSuite=k.getCipherSuite(p.getBytes(2)),e.session.cipherSuite===null););if(e.session.cipherSuite===null)return e.error(e,{message:"No cipher suites in common.",send:!0,alert:{level:k.Alert.Level.fatal,description:k.Alert.Description.handshake_failure},cipherSuite:Ae.util.bytesToHex(n.cipher_suite)});i?e.session.compressionMethod=n.compression_method:e.session.compressionMethod=k.CompressionMethod.none}return n};k.createSecurityParameters=function(e,t){var r=e.entity===k.ConnectionEnd.client,n=t.random.bytes(),i=r?e.session.sp.client_random:n,s=r?n:k.createRandom().getBytes();e.session.sp={entity:e.entity,prf_algorithm:k.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:e.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:i,server_random:s}};k.handleServerHello=function(e,t,r){var n=k.parseHelloMessage(e,t,r);if(!e.fail){if(n.version.minor<=e.version.minor)e.version.minor=n.version.minor;else return e.error(e,{message:"Incompatible TLS version.",send:!0,alert:{level:k.Alert.Level.fatal,description:k.Alert.Description.protocol_version}});e.session.version=e.version;var i=n.session_id.bytes();i.length>0&&i===e.session.id?(e.expect=iue,e.session.resuming=!0,e.session.sp.server_random=n.random.bytes()):(e.expect=get,e.session.resuming=!1,k.createSecurityParameters(e,n)),e.session.id=i,e.process()}};k.handleClientHello=function(e,t,r){var n=k.parseHelloMessage(e,t,r);if(!e.fail){var i=n.session_id.bytes(),s=null;if(e.sessionCache&&(s=e.sessionCache.getSession(i),s===null?i="":(s.version.major!==n.version.major||s.version.minor>n.version.minor)&&(s=null,i="")),i.length===0&&(i=Ae.random.getBytes(32)),e.session.id=i,e.session.clientHelloVersion=n.version,e.session.sp={},s)e.version=e.session.version=s.version,e.session.sp=s.sp;else{for(var o,a=1;a<k.SupportedVersions.length&&(o=k.SupportedVersions[a],!(o.minor<=n.version.minor));++a);e.version={major:o.major,minor:o.minor},e.session.version=e.version}s!==null?(e.expect=f5,e.session.resuming=!0,e.session.sp.client_random=n.random.bytes()):(e.expect=e.verifyClient!==!1?Eet:d5,e.session.resuming=!1,k.createSecurityParameters(e,n)),e.open=!0,k.queue(e,k.createRecord(e,{type:k.ContentType.handshake,data:k.createServerHello(e)})),e.session.resuming?(k.queue(e,k.createRecord(e,{type:k.ContentType.change_cipher_spec,data:k.createChangeCipherSpec()})),e.state.pending=k.createConnectionState(e),e.state.current.write=e.state.pending.write,k.queue(e,k.createRecord(e,{type:k.ContentType.handshake,data:k.createFinished(e)}))):(k.queue(e,k.createRecord(e,{type:k.ContentType.handshake,data:k.createCertificate(e)})),e.fail||(k.queue(e,k.createRecord(e,{type:k.ContentType.handshake,data:k.createServerKeyExchange(e)})),e.verifyClient!==!1&&k.queue(e,k.createRecord(e,{type:k.ContentType.handshake,data:k.createCertificateRequest(e)})),k.queue(e,k.createRecord(e,{type:k.ContentType.handshake,data:k.createServerHelloDone(e)})))),k.flush(e),e.process()}};k.handleCertificate=function(e,t,r){if(r<3)return e.error(e,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:k.Alert.Level.fatal,description:k.Alert.Description.illegal_parameter}});var n=t.fragment,i={certificate_list:Ta(n,3)},s,o,a=[];try{for(;i.certificate_list.length()>0;)s=Ta(i.certificate_list,3),o=Ae.asn1.fromDer(s),s=Ae.pki.certificateFromAsn1(o,!0),a.push(s)}catch(c){return e.error(e,{message:"Could not parse certificate list.",cause:c,send:!0,alert:{level:k.Alert.Level.fatal,description:k.Alert.Description.bad_certificate}})}var l=e.entity===k.ConnectionEnd.client;(l||e.verifyClient===!0)&&a.length===0?e.error(e,{message:l?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:k.Alert.Level.fatal,description:k.Alert.Description.illegal_parameter}}):a.length===0?e.expect=l?rue:d5:(l?e.session.serverCertificate=a[0]:e.session.clientCertificate=a[0],k.verifyCertificateChain(e,a)&&(e.expect=l?rue:d5)),e.process()};k.handleServerKeyExchange=function(e,t,r){if(r>0)return e.error(e,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:k.Alert.Level.fatal,description:k.Alert.Description.unsupported_certificate}});e.expect=pet,e.process()};k.handleClientKeyExchange=function(e,t,r){if(r<48)return e.error(e,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:k.Alert.Level.fatal,description:k.Alert.Description.unsupported_certificate}});var n=t.fragment,i={enc_pre_master_secret:Ta(n,2).getBytes()},s=null;if(e.getPrivateKey)try{s=e.getPrivateKey(e,e.session.serverCertificate),s=Ae.pki.privateKeyFromPem(s)}catch(l){e.error(e,{message:"Could not get private key.",cause:l,send:!0,alert:{level:k.Alert.Level.fatal,description:k.Alert.Description.internal_error}})}if(s===null)return e.error(e,{message:"No private key set.",send:!0,alert:{level:k.Alert.Level.fatal,description:k.Alert.Description.internal_error}});try{var o=e.session.sp;o.pre_master_secret=s.decrypt(i.enc_pre_master_secret);var a=e.session.clientHelloVersion;if(a.major!==o.pre_master_secret.charCodeAt(0)||a.minor!==o.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch{o.pre_master_secret=Ae.random.getBytes(48)}e.expect=f5,e.session.clientCertificate!==null&&(e.expect=bet),e.process()};k.handleCertificateRequest=function(e,t,r){if(r<3)return e.error(e,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:k.Alert.Level.fatal,description:k.Alert.Description.illegal_parameter}});var n=t.fragment,i={certificate_types:Ta(n,1),certificate_authorities:Ta(n,2)};e.session.certificateRequest=i,e.expect=Aet,e.process()};k.handleCertificateVerify=function(e,t,r){if(r<2)return e.error(e,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:k.Alert.Level.fatal,description:k.Alert.Description.illegal_parameter}});var n=t.fragment;n.read-=4;var i=n.bytes();n.read+=4;var s={signature:Ta(n,2).getBytes()},o=Ae.util.createBuffer();o.putBuffer(e.session.md5.digest()),o.putBuffer(e.session.sha1.digest()),o=o.getBytes();try{var a=e.session.clientCertificate;if(!a.publicKey.verify(o,s.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");e.session.md5.update(i),e.session.sha1.update(i)}catch{return e.error(e,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:k.Alert.Level.fatal,description:k.Alert.Description.handshake_failure}})}e.expect=f5,e.process()};k.handleServerHelloDone=function(e,t,r){if(r>0)return e.error(e,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:k.Alert.Level.fatal,description:k.Alert.Description.record_overflow}});if(e.serverCertificate===null){var n={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:k.Alert.Level.fatal,description:k.Alert.Description.insufficient_security}},i=0,s=e.verify(e,n.alert.description,i,[]);if(s!==!0)return(s||s===0)&&(typeof s=="object"&&!Ae.util.isArray(s)?(s.message&&(n.message=s.message),s.alert&&(n.alert.description=s.alert)):typeof s=="number"&&(n.alert.description=s)),e.error(e,n)}e.session.certificateRequest!==null&&(t=k.createRecord(e,{type:k.ContentType.handshake,data:k.createCertificate(e)}),k.queue(e,t)),t=k.createRecord(e,{type:k.ContentType.handshake,data:k.createClientKeyExchange(e)}),k.queue(e,t),e.expect=Cet;var o=function(a,l){a.session.certificateRequest!==null&&a.session.clientCertificate!==null&&k.queue(a,k.createRecord(a,{type:k.ContentType.handshake,data:k.createCertificateVerify(a,l)})),k.queue(a,k.createRecord(a,{type:k.ContentType.change_cipher_spec,data:k.createChangeCipherSpec()})),a.state.pending=k.createConnectionState(a),a.state.current.write=a.state.pending.write,k.queue(a,k.createRecord(a,{type:k.ContentType.handshake,data:k.createFinished(a)})),a.expect=iue,k.flush(a),a.process()};if(e.session.certificateRequest===null||e.session.clientCertificate===null)return o(e,null);k.getClientSignature(e,o)};k.handleChangeCipherSpec=function(e,t){if(t.fragment.getByte()!==1)return e.error(e,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:k.Alert.Level.fatal,description:k.Alert.Description.illegal_parameter}});var r=e.entity===k.ConnectionEnd.client;(e.session.resuming&&r||!e.session.resuming&&!r)&&(e.state.pending=k.createConnectionState(e)),e.state.current.read=e.state.pending.read,(!e.session.resuming&&r||e.session.resuming&&!r)&&(e.state.pending=null),e.expect=r?met:xet,e.process()};k.handleFinished=function(e,t,r){var n=t.fragment;n.read-=4;var i=n.bytes();n.read+=4;var s=t.fragment.getBytes();n=Ae.util.createBuffer(),n.putBuffer(e.session.md5.digest()),n.putBuffer(e.session.sha1.digest());var o=e.entity===k.ConnectionEnd.client,a=o?"server finished":"client finished",l=e.session.sp,c=12,u=jT;if(n=u(l.master_secret,a,n.getBytes(),c),n.getBytes()!==s)return e.error(e,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:k.Alert.Level.fatal,description:k.Alert.Description.decrypt_error}});e.session.md5.update(i),e.session.sha1.update(i),(e.session.resuming&&o||!e.session.resuming&&!o)&&(k.queue(e,k.createRecord(e,{type:k.ContentType.change_cipher_spec,data:k.createChangeCipherSpec()})),e.state.current.write=e.state.pending.write,e.state.pending=null,k.queue(e,k.createRecord(e,{type:k.ContentType.handshake,data:k.createFinished(e)}))),e.expect=o?yet:_et,e.handshaking=!1,++e.handshakes,e.peerCertificate=o?e.session.serverCertificate:e.session.clientCertificate,k.flush(e),e.isConnected=!0,e.connected(e),e.process()};k.handleAlert=function(e,t){var r=t.fragment,n={level:r.getByte(),description:r.getByte()},i;switch(n.description){case k.Alert.Description.close_notify:i="Connection closed.";break;case k.Alert.Description.unexpected_message:i="Unexpected message.";break;case k.Alert.Description.bad_record_mac:i="Bad record MAC.";break;case k.Alert.Description.decryption_failed:i="Decryption failed.";break;case k.Alert.Description.record_overflow:i="Record overflow.";break;case k.Alert.Description.decompression_failure:i="Decompression failed.";break;case k.Alert.Description.handshake_failure:i="Handshake failure.";break;case k.Alert.Description.bad_certificate:i="Bad certificate.";break;case k.Alert.Description.unsupported_certificate:i="Unsupported certificate.";break;case k.Alert.Description.certificate_revoked:i="Certificate revoked.";break;case k.Alert.Description.certificate_expired:i="Certificate expired.";break;case k.Alert.Description.certificate_unknown:i="Certificate unknown.";break;case k.Alert.Description.illegal_parameter:i="Illegal parameter.";break;case k.Alert.Description.unknown_ca:i="Unknown certificate authority.";break;case k.Alert.Description.access_denied:i="Access denied.";break;case k.Alert.Description.decode_error:i="Decode error.";break;case k.Alert.Description.decrypt_error:i="Decrypt error.";break;case k.Alert.Description.export_restriction:i="Export restriction.";break;case k.Alert.Description.protocol_version:i="Unsupported protocol version.";break;case k.Alert.Description.insufficient_security:i="Insufficient security.";break;case k.Alert.Description.internal_error:i="Internal error.";break;case k.Alert.Description.user_canceled:i="User canceled.";break;case k.Alert.Description.no_renegotiation:i="Renegotiation not supported.";break;default:i="Unknown error.";break}if(n.description===k.Alert.Description.close_notify)return e.close();e.error(e,{message:i,send:!1,origin:e.entity===k.ConnectionEnd.client?"server":"client",alert:n}),e.process()};k.handleHandshake=function(e,t){var r=t.fragment,n=r.getByte(),i=r.getInt24();if(i>r.length())return e.fragmented=t,t.fragment=Ae.util.createBuffer(),r.read-=4,e.process();e.fragmented=null,r.read-=4;var s=r.bytes(i+4);r.read+=4,n in JT[e.entity][e.expect]?(e.entity===k.ConnectionEnd.server&&!e.open&&!e.fail&&(e.handshaking=!0,e.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:Ae.md.md5.create(),sha1:Ae.md.sha1.create()}),n!==k.HandshakeType.hello_request&&n!==k.HandshakeType.certificate_verify&&n!==k.HandshakeType.finished&&(e.session.md5.update(s),e.session.sha1.update(s)),JT[e.entity][e.expect][n](e,t,i)):k.handleUnexpected(e,t)};k.handleApplicationData=function(e,t){e.data.putBuffer(t.fragment),e.dataReady(e),e.process()};k.handleHeartbeat=function(e,t){var r=t.fragment,n=r.getByte(),i=r.getInt16(),s=r.getBytes(i);if(n===k.HeartbeatMessageType.heartbeat_request){if(e.handshaking||i>s.length)return e.process();k.queue(e,k.createRecord(e,{type:k.ContentType.heartbeat,data:k.createHeartbeat(k.HeartbeatMessageType.heartbeat_response,s)})),k.flush(e)}else if(n===k.HeartbeatMessageType.heartbeat_response){if(s!==e.expectedHeartbeatPayload)return e.process();e.heartbeatReceived&&e.heartbeatReceived(e,Ae.util.createBuffer(s))}e.process()};var het=0,get=1,rue=2,pet=3,Aet=4,iue=5,met=6,yet=7,Cet=8,vet=0,Eet=1,d5=2,bet=3,f5=4,xet=5,_et=6,T=k.handleUnexpected,sue=k.handleChangeCipherSpec,ws=k.handleAlert,go=k.handleHandshake,oue=k.handleApplicationData,Is=k.handleHeartbeat,h5=[];h5[k.ConnectionEnd.client]=[[T,ws,go,T,Is],[T,ws,go,T,Is],[T,ws,go,T,Is],[T,ws,go,T,Is],[T,ws,go,T,Is],[sue,ws,T,T,Is],[T,ws,go,T,Is],[T,ws,go,oue,Is],[T,ws,go,T,Is]];h5[k.ConnectionEnd.server]=[[T,ws,go,T,Is],[T,ws,go,T,Is],[T,ws,go,T,Is],[T,ws,go,T,Is],[sue,ws,T,T,Is],[T,ws,go,T,Is],[T,ws,go,oue,Is],[T,ws,go,T,Is]];var Dh=k.handleHelloRequest,wet=k.handleServerHello,aue=k.handleCertificate,nue=k.handleServerKeyExchange,c5=k.handleCertificateRequest,KT=k.handleServerHelloDone,lue=k.handleFinished,JT=[];JT[k.ConnectionEnd.client]=[[T,T,wet,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T],[Dh,T,T,T,T,T,T,T,T,T,T,aue,nue,c5,KT,T,T,T,T,T,T],[Dh,T,T,T,T,T,T,T,T,T,T,T,nue,c5,KT,T,T,T,T,T,T],[Dh,T,T,T,T,T,T,T,T,T,T,T,T,c5,KT,T,T,T,T,T,T],[Dh,T,T,T,T,T,T,T,T,T,T,T,T,T,KT,T,T,T,T,T,T],[Dh,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T],[Dh,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,lue],[Dh,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T],[Dh,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T]];var Iet=k.handleClientHello,Bet=k.handleClientKeyExchange,Det=k.handleCertificateVerify;JT[k.ConnectionEnd.server]=[[T,Iet,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T],[T,T,T,T,T,T,T,T,T,T,T,aue,T,T,T,T,T,T,T,T,T],[T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,Bet,T,T,T,T],[T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,Det,T,T,T,T,T],[T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T],[T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,lue],[T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T],[T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T]];k.generateKeys=function(e,t){var r=jT,n=t.client_random+t.server_random;e.session.resuming||(t.master_secret=r(t.pre_master_secret,"master secret",n,48).bytes(),t.pre_master_secret=null),n=t.server_random+t.client_random;var i=2*t.mac_key_length+2*t.enc_key_length,s=e.version.major===k.Versions.TLS_1_0.major&&e.version.minor===k.Versions.TLS_1_0.minor;s&&(i+=2*t.fixed_iv_length);var o=r(t.master_secret,"key expansion",n,i),a={client_write_MAC_key:o.getBytes(t.mac_key_length),server_write_MAC_key:o.getBytes(t.mac_key_length),client_write_key:o.getBytes(t.enc_key_length),server_write_key:o.getBytes(t.enc_key_length)};return s&&(a.client_write_IV=o.getBytes(t.fixed_iv_length),a.server_write_IV=o.getBytes(t.fixed_iv_length)),a};k.createConnectionState=function(e){var t=e.entity===k.ConnectionEnd.client,r=function(){var s={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:function(o){return!0},compressionState:null,compressFunction:function(o){return!0},updateSequenceNumber:function(){s.sequenceNumber[1]===4294967295?(s.sequenceNumber[1]=0,++s.sequenceNumber[0]):++s.sequenceNumber[1]}};return s},n={read:r(),write:r()};if(n.read.update=function(s,o){return n.read.cipherFunction(o,n.read)?n.read.compressFunction(s,o,n.read)||s.error(s,{message:"Could not decompress record.",send:!0,alert:{level:k.Alert.Level.fatal,description:k.Alert.Description.decompression_failure}}):s.error(s,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:k.Alert.Level.fatal,description:k.Alert.Description.bad_record_mac}}),!s.fail},n.write.update=function(s,o){return n.write.compressFunction(s,o,n.write)?n.write.cipherFunction(o,n.write)||s.error(s,{message:"Could not encrypt record.",send:!1,alert:{level:k.Alert.Level.fatal,description:k.Alert.Description.internal_error}}):s.error(s,{message:"Could not compress record.",send:!1,alert:{level:k.Alert.Level.fatal,description:k.Alert.Description.internal_error}}),!s.fail},e.session){var i=e.session.sp;switch(e.session.cipherSuite.initSecurityParameters(i),i.keys=k.generateKeys(e,i),n.read.macKey=t?i.keys.server_write_MAC_key:i.keys.client_write_MAC_key,n.write.macKey=t?i.keys.client_write_MAC_key:i.keys.server_write_MAC_key,e.session.cipherSuite.initConnectionState(n,e,i),i.compression_algorithm){case k.CompressionMethod.none:break;case k.CompressionMethod.deflate:n.read.compressFunction=fet,n.write.compressFunction=det;break;default:throw new Error("Unsupported compression algorithm.")}}return n};k.createRandom=function(){var e=new Date,t=+e+e.getTimezoneOffset()*6e4,r=Ae.util.createBuffer();return r.putInt32(t),r.putBytes(Ae.random.getBytes(28)),r};k.createRecord=function(e,t){if(!t.data)return null;var r={type:t.type,version:{major:e.version.major,minor:e.version.minor},length:t.data.length(),fragment:t.data};return r};k.createAlert=function(e,t){var r=Ae.util.createBuffer();return r.putByte(t.level),r.putByte(t.description),k.createRecord(e,{type:k.ContentType.alert,data:r})};k.createClientHello=function(e){e.session.clientHelloVersion={major:e.version.major,minor:e.version.minor};for(var t=Ae.util.createBuffer(),r=0;r<e.cipherSuites.length;++r){var n=e.cipherSuites[r];t.putByte(n.id[0]),t.putByte(n.id[1])}var i=t.length(),s=Ae.util.createBuffer();s.putByte(k.CompressionMethod.none);var o=s.length(),a=Ae.util.createBuffer();if(e.virtualHost){var l=Ae.util.createBuffer();l.putByte(0),l.putByte(0);var c=Ae.util.createBuffer();c.putByte(0),_l(c,2,Ae.util.createBuffer(e.virtualHost));var u=Ae.util.createBuffer();_l(u,2,c),_l(l,2,u),a.putBuffer(l)}var f=a.length();f>0&&(f+=2);var p=e.session.id,g=p.length+1+2+4+28+2+i+1+o+f,A=Ae.util.createBuffer();return A.putByte(k.HandshakeType.client_hello),A.putInt24(g),A.putByte(e.version.major),A.putByte(e.version.minor),A.putBytes(e.session.sp.client_random),_l(A,1,Ae.util.createBuffer(p)),_l(A,2,t),_l(A,1,s),f>0&&_l(A,2,a),A};k.createServerHello=function(e){var t=e.session.id,r=t.length+1+2+4+28+2+1,n=Ae.util.createBuffer();return n.putByte(k.HandshakeType.server_hello),n.putInt24(r),n.putByte(e.version.major),n.putByte(e.version.minor),n.putBytes(e.session.sp.server_random),_l(n,1,Ae.util.createBuffer(t)),n.putByte(e.session.cipherSuite.id[0]),n.putByte(e.session.cipherSuite.id[1]),n.putByte(e.session.compressionMethod),n};k.createCertificate=function(e){var t=e.entity===k.ConnectionEnd.client,r=null;if(e.getCertificate){var n;t?n=e.session.certificateRequest:n=e.session.extensions.server_name.serverNameList,r=e.getCertificate(e,n)}var i=Ae.util.createBuffer();if(r!==null)try{Ae.util.isArray(r)||(r=[r]);for(var s=null,o=0;o<r.length;++o){var a=Ae.pem.decode(r[o])[0];if(a.type!=="CERTIFICATE"&&a.type!=="X509 CERTIFICATE"&&a.type!=="TRUSTED CERTIFICATE"){var l=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw l.headerType=a.type,l}if(a.procType&&a.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var c=Ae.util.createBuffer(a.body);s===null&&(s=Ae.asn1.fromDer(c.bytes(),!1));var u=Ae.util.createBuffer();_l(u,3,c),i.putBuffer(u)}r=Ae.pki.certificateFromAsn1(s),t?e.session.clientCertificate=r:e.session.serverCertificate=r}catch(g){return e.error(e,{message:"Could not send certificate list.",cause:g,send:!0,alert:{level:k.Alert.Level.fatal,description:k.Alert.Description.bad_certificate}})}var f=3+i.length(),p=Ae.util.createBuffer();return p.putByte(k.HandshakeType.certificate),p.putInt24(f),_l(p,3,i),p};k.createClientKeyExchange=function(e){var t=Ae.util.createBuffer();t.putByte(e.session.clientHelloVersion.major),t.putByte(e.session.clientHelloVersion.minor),t.putBytes(Ae.random.getBytes(46));var r=e.session.sp;r.pre_master_secret=t.getBytes();var n=e.session.serverCertificate.publicKey;t=n.encrypt(r.pre_master_secret);var i=t.length+2,s=Ae.util.createBuffer();return s.putByte(k.HandshakeType.client_key_exchange),s.putInt24(i),s.putInt16(t.length),s.putBytes(t),s};k.createServerKeyExchange=function(e){var t=0,r=Ae.util.createBuffer();return t>0&&(r.putByte(k.HandshakeType.server_key_exchange),r.putInt24(t)),r};k.getClientSignature=function(e,t){var r=Ae.util.createBuffer();r.putBuffer(e.session.md5.digest()),r.putBuffer(e.session.sha1.digest()),r=r.getBytes(),e.getSignature=e.getSignature||function(n,i,s){var o=null;if(n.getPrivateKey)try{o=n.getPrivateKey(n,n.session.clientCertificate),o=Ae.pki.privateKeyFromPem(o)}catch(a){n.error(n,{message:"Could not get private key.",cause:a,send:!0,alert:{level:k.Alert.Level.fatal,description:k.Alert.Description.internal_error}})}o===null?n.error(n,{message:"No private key set.",send:!0,alert:{level:k.Alert.Level.fatal,description:k.Alert.Description.internal_error}}):i=o.sign(i,null),s(n,i)},e.getSignature(e,r,t)};k.createCertificateVerify=function(e,t){var r=t.length+2,n=Ae.util.createBuffer();return n.putByte(k.HandshakeType.certificate_verify),n.putInt24(r),n.putInt16(t.length),n.putBytes(t),n};k.createCertificateRequest=function(e){var t=Ae.util.createBuffer();t.putByte(1);var r=Ae.util.createBuffer();for(var n in e.caStore.certs){var i=e.caStore.certs[n],s=Ae.pki.distinguishedNameToAsn1(i.subject),o=Ae.asn1.toDer(s);r.putInt16(o.length()),r.putBuffer(o)}var a=1+t.length()+2+r.length(),l=Ae.util.createBuffer();return l.putByte(k.HandshakeType.certificate_request),l.putInt24(a),_l(l,1,t),_l(l,2,r),l};k.createServerHelloDone=function(e){var t=Ae.util.createBuffer();return t.putByte(k.HandshakeType.server_hello_done),t.putInt24(0),t};k.createChangeCipherSpec=function(){var e=Ae.util.createBuffer();return e.putByte(1),e};k.createFinished=function(e){var t=Ae.util.createBuffer();t.putBuffer(e.session.md5.digest()),t.putBuffer(e.session.sha1.digest());var r=e.entity===k.ConnectionEnd.client,n=e.session.sp,i=12,s=jT,o=r?"client finished":"server finished";t=s(n.master_secret,o,t.getBytes(),i);var a=Ae.util.createBuffer();return a.putByte(k.HandshakeType.finished),a.putInt24(t.length()),a.putBuffer(t),a};k.createHeartbeat=function(e,t,r){typeof r>"u"&&(r=t.length);var n=Ae.util.createBuffer();n.putByte(e),n.putInt16(r),n.putBytes(t);var i=n.length(),s=Math.max(16,i-r-3);return n.putBytes(Ae.random.getBytes(s)),n};k.queue=function(e,t){if(t&&!(t.fragment.length()===0&&(t.type===k.ContentType.handshake||t.type===k.ContentType.alert||t.type===k.ContentType.change_cipher_spec))){if(t.type===k.ContentType.handshake){var r=t.fragment.bytes();e.session.md5.update(r),e.session.sha1.update(r),r=null}var n;if(t.fragment.length()<=k.MaxFragment)n=[t];else{n=[];for(var i=t.fragment.bytes();i.length>k.MaxFragment;)n.push(k.createRecord(e,{type:t.type,data:Ae.util.createBuffer(i.slice(0,k.MaxFragment))})),i=i.slice(k.MaxFragment);i.length>0&&n.push(k.createRecord(e,{type:t.type,data:Ae.util.createBuffer(i)}))}for(var s=0;s<n.length&&!e.fail;++s){var o=n[s],a=e.state.current.write;a.update(e,o)&&e.records.push(o)}}};k.flush=function(e){for(var t=0;t<e.records.length;++t){var r=e.records[t];e.tlsData.putByte(r.type),e.tlsData.putByte(r.version.major),e.tlsData.putByte(r.version.minor),e.tlsData.putInt16(r.fragment.length()),e.tlsData.putBuffer(e.records[t].fragment)}return e.records=[],e.tlsDataReady(e)};var u5=function(e){switch(e){case!0:return!0;case Ae.pki.certificateError.bad_certificate:return k.Alert.Description.bad_certificate;case Ae.pki.certificateError.unsupported_certificate:return k.Alert.Description.unsupported_certificate;case Ae.pki.certificateError.certificate_revoked:return k.Alert.Description.certificate_revoked;case Ae.pki.certificateError.certificate_expired:return k.Alert.Description.certificate_expired;case Ae.pki.certificateError.certificate_unknown:return k.Alert.Description.certificate_unknown;case Ae.pki.certificateError.unknown_ca:return k.Alert.Description.unknown_ca;default:return k.Alert.Description.bad_certificate}},Tet=function(e){switch(e){case!0:return!0;case k.Alert.Description.bad_certificate:return Ae.pki.certificateError.bad_certificate;case k.Alert.Description.unsupported_certificate:return Ae.pki.certificateError.unsupported_certificate;case k.Alert.Description.certificate_revoked:return Ae.pki.certificateError.certificate_revoked;case k.Alert.Description.certificate_expired:return Ae.pki.certificateError.certificate_expired;case k.Alert.Description.certificate_unknown:return Ae.pki.certificateError.certificate_unknown;case k.Alert.Description.unknown_ca:return Ae.pki.certificateError.unknown_ca;default:return Ae.pki.certificateError.bad_certificate}};k.verifyCertificateChain=function(e,t){try{var r={};for(var n in e.verifyOptions)r[n]=e.verifyOptions[n];r.verify=function(s,o,a){var l=u5(s),c=e.verify(e,s,o,a);if(c!==!0){if(typeof c=="object"&&!Ae.util.isArray(c)){var u=new Error("The application rejected the certificate.");throw u.send=!0,u.alert={level:k.Alert.Level.fatal,description:k.Alert.Description.bad_certificate},c.message&&(u.message=c.message),c.alert&&(u.alert.description=c.alert),u}c!==s&&(c=Tet(c))}return c},Ae.pki.verifyCertificateChain(e.caStore,t,r)}catch(s){var i=s;(typeof i!="object"||Ae.util.isArray(i))&&(i={send:!0,alert:{level:k.Alert.Level.fatal,description:u5(s)}}),"send"in i||(i.send=!0),"alert"in i||(i.alert={level:k.Alert.Level.fatal,description:u5(i.error)}),e.error(e,i)}return!e.fail};k.createSessionCache=function(e,t){var r=null;if(e&&e.getSession&&e.setSession&&e.order)r=e;else{r={},r.cache=e||{},r.capacity=Math.max(t||100,1),r.order=[];for(var n in e)r.order.length<=t?r.order.push(n):delete e[n];r.getSession=function(i){var s=null,o=null;if(i?o=Ae.util.bytesToHex(i):r.order.length>0&&(o=r.order[0]),o!==null&&o in r.cache){s=r.cache[o],delete r.cache[o];for(var a in r.order)if(r.order[a]===o){r.order.splice(a,1);break}}return s},r.setSession=function(i,s){if(r.order.length===r.capacity){var o=r.order.shift();delete r.cache[o]}var o=Ae.util.bytesToHex(i);r.order.push(o),r.cache[o]=s}}return r};k.createConnection=function(e){var t=null;e.caStore?Ae.util.isArray(e.caStore)?t=Ae.pki.createCaStore(e.caStore):t=e.caStore:t=Ae.pki.createCaStore();var r=e.cipherSuites||null;if(r===null){r=[];for(var n in k.CipherSuites)r.push(k.CipherSuites[n])}var i=e.server?k.ConnectionEnd.server:k.ConnectionEnd.client,s=e.sessionCache?k.createSessionCache(e.sessionCache):null,o={version:{major:k.Version.major,minor:k.Version.minor},entity:i,sessionId:e.sessionId,caStore:t,sessionCache:s,cipherSuites:r,connected:e.connected,virtualHost:e.virtualHost||null,verifyClient:e.verifyClient||!1,verify:e.verify||function(u,f,p,g){return f},verifyOptions:e.verifyOptions||{},getCertificate:e.getCertificate||null,getPrivateKey:e.getPrivateKey||null,getSignature:e.getSignature||null,input:Ae.util.createBuffer(),tlsData:Ae.util.createBuffer(),data:Ae.util.createBuffer(),tlsDataReady:e.tlsDataReady,dataReady:e.dataReady,heartbeatReceived:e.heartbeatReceived,closed:e.closed,error:function(u,f){f.origin=f.origin||(u.entity===k.ConnectionEnd.client?"client":"server"),f.send&&(k.queue(u,k.createAlert(u,f.alert)),k.flush(u));var p=f.fatal!==!1;p&&(u.fail=!0),e.error(u,f),p&&u.close(!1)},deflate:e.deflate||null,inflate:e.inflate||null};o.reset=function(u){o.version={major:k.Version.major,minor:k.Version.minor},o.record=null,o.session=null,o.peerCertificate=null,o.state={pending:null,current:null},o.expect=o.entity===k.ConnectionEnd.client?het:vet,o.fragmented=null,o.records=[],o.open=!1,o.handshakes=0,o.handshaking=!1,o.isConnected=!1,o.fail=!(u||typeof u>"u"),o.input.clear(),o.tlsData.clear(),o.data.clear(),o.state.current=k.createConnectionState(o)},o.reset();var a=function(u,f){var p=f.type-k.ContentType.change_cipher_spec,g=h5[u.entity][u.expect];p in g?g[p](u,f):k.handleUnexpected(u,f)},l=function(u){var f=0,p=u.input,g=p.length();if(g<5)f=5-g;else{u.record={type:p.getByte(),version:{major:p.getByte(),minor:p.getByte()},length:p.getInt16(),fragment:Ae.util.createBuffer(),ready:!1};var A=u.record.version.major===u.version.major;A&&u.session&&u.session.version&&(A=u.record.version.minor===u.version.minor),A||u.error(u,{message:"Incompatible TLS version.",send:!0,alert:{level:k.Alert.Level.fatal,description:k.Alert.Description.protocol_version}})}return f},c=function(u){var f=0,p=u.input,g=p.length();if(g<u.record.length)f=u.record.length-g;else{u.record.fragment.putBytes(p.getBytes(u.record.length)),p.compact();var A=u.state.current.read;A.update(u,u.record)&&(u.fragmented!==null&&(u.fragmented.type===u.record.type?(u.fragmented.fragment.putBuffer(u.record.fragment),u.record=u.fragmented):u.error(u,{message:"Invalid fragmented record.",send:!0,alert:{level:k.Alert.Level.fatal,description:k.Alert.Description.unexpected_message}})),u.record.ready=!0)}return f};return o.handshake=function(u){if(o.entity!==k.ConnectionEnd.client)o.error(o,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(o.handshaking)o.error(o,{message:"Handshake already in progress.",fatal:!1});else{o.fail&&!o.open&&o.handshakes===0&&(o.fail=!1),o.handshaking=!0,u=u||"";var f=null;u.length>0&&(o.sessionCache&&(f=o.sessionCache.getSession(u)),f===null&&(u="")),u.length===0&&o.sessionCache&&(f=o.sessionCache.getSession(),f!==null&&(u=f.id)),o.session={id:u,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:Ae.md.md5.create(),sha1:Ae.md.sha1.create()},f&&(o.version=f.version,o.session.sp=f.sp),o.session.sp.client_random=k.createRandom().getBytes(),o.open=!0,k.queue(o,k.createRecord(o,{type:k.ContentType.handshake,data:k.createClientHello(o)})),k.flush(o)}},o.process=function(u){var f=0;return u&&o.input.putBytes(u),o.fail||(o.record!==null&&o.record.ready&&o.record.fragment.isEmpty()&&(o.record=null),o.record===null&&(f=l(o)),!o.fail&&o.record!==null&&!o.record.ready&&(f=c(o)),!o.fail&&o.record!==null&&o.record.ready&&a(o,o.record)),f},o.prepare=function(u){return k.queue(o,k.createRecord(o,{type:k.ContentType.application_data,data:Ae.util.createBuffer(u)})),k.flush(o)},o.prepareHeartbeatRequest=function(u,f){return u instanceof Ae.util.ByteBuffer&&(u=u.bytes()),typeof f>"u"&&(f=u.length),o.expectedHeartbeatPayload=u,k.queue(o,k.createRecord(o,{type:k.ContentType.heartbeat,data:k.createHeartbeat(k.HeartbeatMessageType.heartbeat_request,u,f)})),k.flush(o)},o.close=function(u){if(!o.fail&&o.sessionCache&&o.session){var f={id:o.session.id,version:o.session.version,sp:o.session.sp};f.sp.keys=null,o.sessionCache.setSession(f.id,f)}o.open&&(o.open=!1,o.input.clear(),(o.isConnected||o.handshaking)&&(o.isConnected=o.handshaking=!1,k.queue(o,k.createAlert(o,{level:k.Alert.Level.warning,description:k.Alert.Description.close_notify})),k.flush(o)),o.closed(o)),o.reset(u)},o};cue.exports=Ae.tls=Ae.tls||{};for(zT in k)typeof k[zT]!="function"&&(Ae.tls[zT]=k[zT]);var zT;Ae.tls.prf_tls1=jT;Ae.tls.hmac_sha1=uet;Ae.tls.createSessionCache=k.createSessionCache;Ae.tls.createConnection=k.createConnection});var fue=x((JDt,due)=>{"use strict";var Th=Jt();xh();g5();var wl=due.exports=Th.tls;wl.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:function(e){e.bulk_cipher_algorithm=wl.BulkCipherAlgorithm.aes,e.cipher_type=wl.CipherType.block,e.enc_key_length=16,e.block_length=16,e.fixed_iv_length=16,e.record_iv_length=16,e.mac_algorithm=wl.MACAlgorithm.hmac_sha1,e.mac_length=20,e.mac_key_length=20},initConnectionState:uue};wl.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:function(e){e.bulk_cipher_algorithm=wl.BulkCipherAlgorithm.aes,e.cipher_type=wl.CipherType.block,e.enc_key_length=32,e.block_length=16,e.fixed_iv_length=16,e.record_iv_length=16,e.mac_algorithm=wl.MACAlgorithm.hmac_sha1,e.mac_length=20,e.mac_key_length=20},initConnectionState:uue};function uue(e,t,r){var n=t.entity===Th.tls.ConnectionEnd.client;e.read.cipherState={init:!1,cipher:Th.cipher.createDecipher("AES-CBC",n?r.keys.server_write_key:r.keys.client_write_key),iv:n?r.keys.server_write_IV:r.keys.client_write_IV},e.write.cipherState={init:!1,cipher:Th.cipher.createCipher("AES-CBC",n?r.keys.client_write_key:r.keys.server_write_key),iv:n?r.keys.client_write_IV:r.keys.server_write_IV},e.read.cipherFunction=Met,e.write.cipherFunction=Ret,e.read.macLength=e.write.macLength=r.mac_length,e.read.macFunction=e.write.macFunction=wl.hmac_sha1}function Ret(e,t){var r=!1,n=t.macFunction(t.macKey,t.sequenceNumber,e);e.fragment.putBytes(n),t.updateSequenceNumber();var i;e.version.minor===wl.Versions.TLS_1_0.minor?i=t.cipherState.init?null:t.cipherState.iv:i=Th.random.getBytesSync(16),t.cipherState.init=!0;var s=t.cipherState.cipher;return s.start({iv:i}),e.version.minor>=wl.Versions.TLS_1_1.minor&&s.output.putBytes(i),s.update(e.fragment),s.finish(ket)&&(e.fragment=s.output,e.length=e.fragment.length(),r=!0),r}function ket(e,t,r){if(!r){var n=e-t.length()%e;t.fillWithByte(n-1,n)}return!0}function Fet(e,t,r){var n=!0;if(r){for(var i=t.length(),s=t.last(),o=i-1-s;o<i-1;++o)n=n&&t.at(o)==s;n&&t.truncate(s+1)}return n}function Met(e,t){var r=!1,n;e.version.minor===wl.Versions.TLS_1_0.minor?n=t.cipherState.init?null:t.cipherState.iv:n=e.fragment.getBytes(16),t.cipherState.init=!0;var i=t.cipherState.cipher;i.start({iv:n}),i.update(e.fragment),r=i.finish(Fet);var s=t.macLength,o=Th.random.getBytesSync(s),a=i.output.length();a>=s?(e.fragment=i.output.getBytes(a-s),o=i.output.getBytes(s)):e.fragment=i.output.getBytes(),e.fragment=Th.util.createBuffer(e.fragment),e.length=e.fragment.length();var l=t.macFunction(t.macKey,t.sequenceNumber,e);return t.updateSequenceNumber(),r=Qet(t.macKey,o,l)&&r,r}function Qet(e,t,r){var n=Th.hmac.create();return n.start("SHA1",e),n.update(t),t=n.digest().getBytes(),n.start(null,null),n.update(r),r=n.digest().getBytes(),t===r}});var m5=x((jDt,Aue)=>{"use strict";var Rn=Jt();Au();Dr();var jb=Aue.exports=Rn.sha512=Rn.sha512||{};Rn.md.sha512=Rn.md.algorithms.sha512=jb;var gue=Rn.sha384=Rn.sha512.sha384=Rn.sha512.sha384||{};gue.create=function(){return jb.create("SHA-384")};Rn.md.sha384=Rn.md.algorithms.sha384=gue;Rn.sha512.sha256=Rn.sha512.sha256||{create:function(){return jb.create("SHA-512/256")}};Rn.md["sha512/256"]=Rn.md.algorithms["sha512/256"]=Rn.sha512.sha256;Rn.sha512.sha224=Rn.sha512.sha224||{create:function(){return jb.create("SHA-512/224")}};Rn.md["sha512/224"]=Rn.md.algorithms["sha512/224"]=Rn.sha512.sha224;jb.create=function(e){if(pue||Net(),typeof e>"u"&&(e="SHA-512"),!(e in Yp))throw new Error("Invalid SHA-512 algorithm: "+e);for(var t=Yp[e],r=null,n=Rn.util.createBuffer(),i=new Array(80),s=0;s<80;++s)i[s]=new Array(2);var o=64;switch(e){case"SHA-384":o=48;break;case"SHA-512/256":o=32;break;case"SHA-512/224":o=28;break}var a={algorithm:e.replace("-","").toLowerCase(),blockLength:128,digestLength:o,messageLength:0,fullMessageLength:null,messageLengthSize:16};return a.start=function(){a.messageLength=0,a.fullMessageLength=a.messageLength128=[];for(var l=a.messageLengthSize/4,c=0;c<l;++c)a.fullMessageLength.push(0);n=Rn.util.createBuffer(),r=new Array(t.length);for(var c=0;c<t.length;++c)r[c]=t[c].slice(0);return a},a.start(),a.update=function(l,c){c==="utf8"&&(l=Rn.util.encodeUtf8(l));var u=l.length;a.messageLength+=u,u=[u/4294967296>>>0,u>>>0];for(var f=a.fullMessageLength.length-1;f>=0;--f)a.fullMessageLength[f]+=u[1],u[1]=u[0]+(a.fullMessageLength[f]/4294967296>>>0),a.fullMessageLength[f]=a.fullMessageLength[f]>>>0,u[0]=u[1]/4294967296>>>0;return n.putBytes(l),hue(r,i,n),(n.read>2048||n.length()===0)&&n.compact(),a},a.digest=function(){var l=Rn.util.createBuffer();l.putBytes(n.bytes());var c=a.fullMessageLength[a.fullMessageLength.length-1]+a.messageLengthSize,u=c&a.blockLength-1;l.putBytes(p5.substr(0,a.blockLength-u));for(var f,p,g=a.fullMessageLength[0]*8,A=0;A<a.fullMessageLength.length-1;++A)f=a.fullMessageLength[A+1]*8,p=f/4294967296>>>0,g+=p,l.putInt32(g>>>0),g=f>>>0;l.putInt32(g);for(var y=new Array(r.length),A=0;A<r.length;++A)y[A]=r[A].slice(0);hue(y,i,l);var C=Rn.util.createBuffer(),v;e==="SHA-512"?v=y.length:e==="SHA-384"?v=y.length-2:v=y.length-4;for(var A=0;A<v;++A)C.putInt32(y[A][0]),(A!==v-1||e!=="SHA-512/224")&&C.putInt32(y[A][1]);return C},a};var p5=null,pue=!1,A5=null,Yp=null;function Net(){p5="\x80",p5+=Rn.util.fillString("\0",128),A5=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],Yp={},Yp["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],Yp["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],Yp["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],Yp["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],pue=!0}function hue(e,t,r){for(var n,i,s,o,a,l,c,u,f,p,g,A,y,C,v,b,w,B,F,Q,W,Z,$,ee,U,ge,Se,N,se,z,ne,Ke,It,ye,Lt,Zt=r.length();Zt>=128;){for(se=0;se<16;++se)t[se][0]=r.getInt32()>>>0,t[se][1]=r.getInt32()>>>0;for(;se<80;++se)Ke=t[se-2],z=Ke[0],ne=Ke[1],n=((z>>>19|ne<<13)^(ne>>>29|z<<3)^z>>>6)>>>0,i=((z<<13|ne>>>19)^(ne<<3|z>>>29)^(z<<26|ne>>>6))>>>0,ye=t[se-15],z=ye[0],ne=ye[1],s=((z>>>1|ne<<31)^(z>>>8|ne<<24)^z>>>7)>>>0,o=((z<<31|ne>>>1)^(z<<24|ne>>>8)^(z<<25|ne>>>7))>>>0,It=t[se-7],Lt=t[se-16],ne=i+It[1]+o+Lt[1],t[se][0]=n+It[0]+s+Lt[0]+(ne/4294967296>>>0)>>>0,t[se][1]=ne>>>0;for(y=e[0][0],C=e[0][1],v=e[1][0],b=e[1][1],w=e[2][0],B=e[2][1],F=e[3][0],Q=e[3][1],W=e[4][0],Z=e[4][1],$=e[5][0],ee=e[5][1],U=e[6][0],ge=e[6][1],Se=e[7][0],N=e[7][1],se=0;se<80;++se)c=((W>>>14|Z<<18)^(W>>>18|Z<<14)^(Z>>>9|W<<23))>>>0,u=((W<<18|Z>>>14)^(W<<14|Z>>>18)^(Z<<23|W>>>9))>>>0,f=(U^W&($^U))>>>0,p=(ge^Z&(ee^ge))>>>0,a=((y>>>28|C<<4)^(C>>>2|y<<30)^(C>>>7|y<<25))>>>0,l=((y<<4|C>>>28)^(C<<30|y>>>2)^(C<<25|y>>>7))>>>0,g=(y&v|w&(y^v))>>>0,A=(C&b|B&(C^b))>>>0,ne=N+u+p+A5[se][1]+t[se][1],n=Se+c+f+A5[se][0]+t[se][0]+(ne/4294967296>>>0)>>>0,i=ne>>>0,ne=l+A,s=a+g+(ne/4294967296>>>0)>>>0,o=ne>>>0,Se=U,N=ge,U=$,ge=ee,$=W,ee=Z,ne=Q+i,W=F+n+(ne/4294967296>>>0)>>>0,Z=ne>>>0,F=w,Q=B,w=v,B=b,v=y,b=C,ne=i+o,y=n+s+(ne/4294967296>>>0)>>>0,C=ne>>>0;ne=e[0][1]+C,e[0][0]=e[0][0]+y+(ne/4294967296>>>0)>>>0,e[0][1]=ne>>>0,ne=e[1][1]+b,e[1][0]=e[1][0]+v+(ne/4294967296>>>0)>>>0,e[1][1]=ne>>>0,ne=e[2][1]+B,e[2][0]=e[2][0]+w+(ne/4294967296>>>0)>>>0,e[2][1]=ne>>>0,ne=e[3][1]+Q,e[3][0]=e[3][0]+F+(ne/4294967296>>>0)>>>0,e[3][1]=ne>>>0,ne=e[4][1]+Z,e[4][0]=e[4][0]+W+(ne/4294967296>>>0)>>>0,e[4][1]=ne>>>0,ne=e[5][1]+ee,e[5][0]=e[5][0]+$+(ne/4294967296>>>0)>>>0,e[5][1]=ne>>>0,ne=e[6][1]+ge,e[6][0]=e[6][0]+U+(ne/4294967296>>>0)>>>0,e[6][1]=ne>>>0,ne=e[7][1]+N,e[7][0]=e[7][0]+Se+(ne/4294967296>>>0)>>>0,e[7][1]=ne>>>0,Zt-=128}}});var mue=x(y5=>{"use strict";var Pet=Jt();bc();var is=Pet.asn1;y5.privateKeyValidator={name:"PrivateKeyInfo",tagClass:is.Class.UNIVERSAL,type:is.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:is.Class.UNIVERSAL,type:is.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:is.Class.UNIVERSAL,type:is.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:is.Class.UNIVERSAL,type:is.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:is.Class.UNIVERSAL,type:is.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]};y5.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:is.Class.UNIVERSAL,type:is.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:is.Class.UNIVERSAL,type:is.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:is.Class.UNIVERSAL,type:is.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:is.Class.UNIVERSAL,type:is.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]}});var Tue=x((XDt,Due)=>{"use strict";var Ss=Jt();Yb();vl();m5();Dr();var xue=mue(),Let=xue.publicKeyValidator,Uet=xue.privateKeyValidator;typeof yue>"u"&&(yue=Ss.jsbn.BigInteger);var yue,E5=Ss.util.ByteBuffer,zo=typeof Buffer>"u"?Uint8Array:Buffer;Ss.pki=Ss.pki||{};Due.exports=Ss.pki.ed25519=Ss.ed25519=Ss.ed25519||{};var ur=Ss.ed25519;ur.constants={};ur.constants.PUBLIC_KEY_BYTE_LENGTH=32;ur.constants.PRIVATE_KEY_BYTE_LENGTH=64;ur.constants.SEED_BYTE_LENGTH=32;ur.constants.SIGN_BYTE_LENGTH=64;ur.constants.HASH_BYTE_LENGTH=64;ur.generateKeyPair=function(e){e=e||{};var t=e.seed;if(t===void 0)t=Ss.random.getBytesSync(ur.constants.SEED_BYTE_LENGTH);else if(typeof t=="string"){if(t.length!==ur.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+ur.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(t instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');t=Kd({message:t,encoding:"binary"});for(var r=new zo(ur.constants.PUBLIC_KEY_BYTE_LENGTH),n=new zo(ur.constants.PRIVATE_KEY_BYTE_LENGTH),i=0;i<32;++i)n[i]=t[i];return Het(r,n),{publicKey:r,privateKey:n}};ur.privateKeyFromAsn1=function(e){var t={},r=[],n=Ss.asn1.validate(e,Uet,t,r);if(!n){var i=new Error("Invalid Key.");throw i.errors=r,i}var s=Ss.asn1.derToOid(t.privateKeyOid),o=Ss.oids.EdDSA25519;if(s!==o)throw new Error('Invalid OID "'+s+'"; OID must be "'+o+'".');var a=t.privateKey,l=Kd({message:Ss.asn1.fromDer(a).value,encoding:"binary"});return{privateKeyBytes:l}};ur.publicKeyFromAsn1=function(e){var t={},r=[],n=Ss.asn1.validate(e,Let,t,r);if(!n){var i=new Error("Invalid Key.");throw i.errors=r,i}var s=Ss.asn1.derToOid(t.publicKeyOid),o=Ss.oids.EdDSA25519;if(s!==o)throw new Error('Invalid OID "'+s+'"; OID must be "'+o+'".');var a=t.ed25519PublicKey;if(a.length!==ur.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return Kd({message:a,encoding:"binary"})};ur.publicKeyFromPrivateKey=function(e){e=e||{};var t=Kd({message:e.privateKey,encoding:"binary"});if(t.length!==ur.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+ur.constants.PRIVATE_KEY_BYTE_LENGTH);for(var r=new zo(ur.constants.PUBLIC_KEY_BYTE_LENGTH),n=0;n<r.length;++n)r[n]=t[32+n];return r};ur.sign=function(e){e=e||{};var t=Kd(e),r=Kd({message:e.privateKey,encoding:"binary"});if(r.length===ur.constants.SEED_BYTE_LENGTH){var n=ur.generateKeyPair({seed:r});r=n.privateKey}else if(r.length!==ur.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+ur.constants.SEED_BYTE_LENGTH+" or "+ur.constants.PRIVATE_KEY_BYTE_LENGTH);var i=new zo(ur.constants.SIGN_BYTE_LENGTH+t.length);Wet(i,t,t.length,r);for(var s=new zo(ur.constants.SIGN_BYTE_LENGTH),o=0;o<s.length;++o)s[o]=i[o];return s};ur.verify=function(e){e=e||{};var t=Kd(e);if(e.signature===void 0)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var r=Kd({message:e.signature,encoding:"binary"});if(r.length!==ur.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+ur.constants.SIGN_BYTE_LENGTH);var n=Kd({message:e.publicKey,encoding:"binary"});if(n.length!==ur.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+ur.constants.PUBLIC_KEY_BYTE_LENGTH);var i=new zo(ur.constants.SIGN_BYTE_LENGTH+t.length),s=new zo(ur.constants.SIGN_BYTE_LENGTH+t.length),o;for(o=0;o<ur.constants.SIGN_BYTE_LENGTH;++o)i[o]=r[o];for(o=0;o<t.length;++o)i[o+ur.constants.SIGN_BYTE_LENGTH]=t[o];return Get(s,i,i.length,n)>=0};function Kd(e){var t=e.message;if(t instanceof Uint8Array||t instanceof zo)return t;var r=e.encoding;if(t===void 0)if(e.md)t=e.md.digest().getBytes(),r="binary";else throw new TypeError('"options.message" or "options.md" not specified.');if(typeof t=="string"&&!r)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if(typeof t=="string"){if(typeof Buffer<"u")return Buffer.from(t,r);t=new E5(t,r)}else if(!(t instanceof E5))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var n=new zo(t.length()),i=0;i<n.length;++i)n[i]=t.at(i);return n}var b5=pt(),ZT=pt([1]),Oet=pt([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),qet=pt([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),Cue=pt([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),vue=pt([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),C5=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),Vet=pt([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function Zb(e,t){var r=Ss.md.sha512.create(),n=new E5(e);r.update(n.getBytes(t),"binary");var i=r.digest().getBytes();if(typeof Buffer<"u")return Buffer.from(i,"binary");for(var s=new zo(ur.constants.HASH_BYTE_LENGTH),o=0;o<64;++o)s[o]=i.charCodeAt(o);return s}function Het(e,t){var r=[pt(),pt(),pt(),pt()],n,i=Zb(t,32);for(i[0]&=248,i[31]&=127,i[31]|=64,I5(r,i),w5(e,r),n=0;n<32;++n)t[n+32]=e[n];return 0}function Wet(e,t,r,n){var i,s,o=new Float64Array(64),a=[pt(),pt(),pt(),pt()],l=Zb(n,32);l[0]&=248,l[31]&=127,l[31]|=64;var c=r+64;for(i=0;i<r;++i)e[64+i]=t[i];for(i=0;i<32;++i)e[32+i]=l[32+i];var u=Zb(e.subarray(32),r+32);for(x5(u),I5(a,u),w5(e,a),i=32;i<64;++i)e[i]=n[i];var f=Zb(e,r+64);for(x5(f),i=32;i<64;++i)o[i]=0;for(i=0;i<32;++i)o[i]=u[i];for(i=0;i<32;++i)for(s=0;s<32;s++)o[i+s]+=f[i]*l[s];return _ue(e.subarray(32),o),c}function Get(e,t,r,n){var i,s,o=new zo(32),a=[pt(),pt(),pt(),pt()],l=[pt(),pt(),pt(),pt()];if(s=-1,r<64||$et(l,n))return-1;for(i=0;i<r;++i)e[i]=t[i];for(i=0;i<32;++i)e[i+32]=n[i];var c=Zb(e,r);if(x5(c),Sue(a,l,c),I5(l,t.subarray(32)),_5(a,l),w5(o,a),r-=64,wue(t,0,o,0)){for(i=0;i<r;++i)e[i]=0;return-1}for(i=0;i<r;++i)e[i]=t[i+64];return s=r,s}function _ue(e,t){var r,n,i,s;for(n=63;n>=32;--n){for(r=0,i=n-32,s=n-12;i<s;++i)t[i]+=r-16*t[n]*C5[i-(n-32)],r=t[i]+128>>8,t[i]-=r*256;t[i]+=r,t[n]=0}for(r=0,i=0;i<32;++i)t[i]+=r-(t[31]>>4)*C5[i],r=t[i]>>8,t[i]&=255;for(i=0;i<32;++i)t[i]-=r*C5[i];for(n=0;n<32;++n)t[n+1]+=t[n]>>8,e[n]=t[n]&255}function x5(e){for(var t=new Float64Array(64),r=0;r<64;++r)t[r]=e[r],e[r]=0;_ue(e,t)}function _5(e,t){var r=pt(),n=pt(),i=pt(),s=pt(),o=pt(),a=pt(),l=pt(),c=pt(),u=pt();dy(r,e[1],e[0]),dy(u,t[1],t[0]),An(r,r,u),uy(n,e[0],e[1]),uy(u,t[0],t[1]),An(n,n,u),An(i,e[3],t[3]),An(i,i,qet),An(s,e[2],t[2]),uy(s,s,s),dy(o,n,r),dy(a,s,i),uy(l,s,i),uy(c,n,r),An(e[0],o,a),An(e[1],c,l),An(e[2],l,a),An(e[3],o,c)}function Eue(e,t,r){for(var n=0;n<4;++n)Bue(e[n],t[n],r)}function w5(e,t){var r=pt(),n=pt(),i=pt();Jet(i,t[2]),An(r,t[0],i),An(n,t[1],i),XT(e,n),e[31]^=Iue(r)<<7}function XT(e,t){var r,n,i,s=pt(),o=pt();for(r=0;r<16;++r)o[r]=t[r];for(v5(o),v5(o),v5(o),n=0;n<2;++n){for(s[0]=o[0]-65517,r=1;r<15;++r)s[r]=o[r]-65535-(s[r-1]>>16&1),s[r-1]&=65535;s[15]=o[15]-32767-(s[14]>>16&1),i=s[15]>>16&1,s[14]&=65535,Bue(o,s,1-i)}for(r=0;r<16;r++)e[2*r]=o[r]&255,e[2*r+1]=o[r]>>8}function $et(e,t){var r=pt(),n=pt(),i=pt(),s=pt(),o=pt(),a=pt(),l=pt();return Rh(e[2],ZT),Yet(e[1],t),Kp(i,e[1]),An(s,i,Oet),dy(i,i,e[2]),uy(s,e[2],s),Kp(o,s),Kp(a,o),An(l,a,o),An(r,l,i),An(r,r,s),Ket(r,r),An(r,r,i),An(r,r,s),An(r,r,s),An(e[0],r,s),Kp(n,e[0]),An(n,n,s),bue(n,i)&&An(e[0],e[0],Vet),Kp(n,e[0]),An(n,n,s),bue(n,i)?-1:(Iue(e[0])===t[31]>>7&&dy(e[0],b5,e[0]),An(e[3],e[0],e[1]),0)}function Yet(e,t){var r;for(r=0;r<16;++r)e[r]=t[2*r]+(t[2*r+1]<<8);e[15]&=32767}function Ket(e,t){var r=pt(),n;for(n=0;n<16;++n)r[n]=t[n];for(n=250;n>=0;--n)Kp(r,r),n!==1&&An(r,r,t);for(n=0;n<16;++n)e[n]=r[n]}function bue(e,t){var r=new zo(32),n=new zo(32);return XT(r,e),XT(n,t),wue(r,0,n,0)}function wue(e,t,r,n){return zet(e,t,r,n,32)}function zet(e,t,r,n,i){var s,o=0;for(s=0;s<i;++s)o|=e[t+s]^r[n+s];return(1&o-1>>>8)-1}function Iue(e){var t=new zo(32);return XT(t,e),t[0]&1}function Sue(e,t,r){var n,i;for(Rh(e[0],b5),Rh(e[1],ZT),Rh(e[2],ZT),Rh(e[3],b5),i=255;i>=0;--i)n=r[i/8|0]>>(i&7)&1,Eue(e,t,n),_5(t,e),_5(e,e),Eue(e,t,n)}function I5(e,t){var r=[pt(),pt(),pt(),pt()];Rh(r[0],Cue),Rh(r[1],vue),Rh(r[2],ZT),An(r[3],Cue,vue),Sue(e,r,t)}function Rh(e,t){var r;for(r=0;r<16;r++)e[r]=t[r]|0}function Jet(e,t){var r=pt(),n;for(n=0;n<16;++n)r[n]=t[n];for(n=253;n>=0;--n)Kp(r,r),n!==2&&n!==4&&An(r,r,t);for(n=0;n<16;++n)e[n]=r[n]}function v5(e){var t,r,n=1;for(t=0;t<16;++t)r=e[t]+n+65535,n=Math.floor(r/65536),e[t]=r-n*65536;e[0]+=n-1+37*(n-1)}function Bue(e,t,r){for(var n,i=~(r-1),s=0;s<16;++s)n=i&(e[s]^t[s]),e[s]^=n,t[s]^=n}function pt(e){var t,r=new Float64Array(16);if(e)for(t=0;t<e.length;++t)r[t]=e[t];return r}function uy(e,t,r){for(var n=0;n<16;++n)e[n]=t[n]+r[n]}function dy(e,t,r){for(var n=0;n<16;++n)e[n]=t[n]-r[n]}function Kp(e,t){An(e,t,t)}function An(e,t,r){var n,i,s=0,o=0,a=0,l=0,c=0,u=0,f=0,p=0,g=0,A=0,y=0,C=0,v=0,b=0,w=0,B=0,F=0,Q=0,W=0,Z=0,$=0,ee=0,U=0,ge=0,Se=0,N=0,se=0,z=0,ne=0,Ke=0,It=0,ye=r[0],Lt=r[1],Zt=r[2],Rt=r[3],de=r[4],kr=r[5],ir=r[6],Lr=r[7],He=r[8],sn=r[9],Ur=r[10],fr=r[11],be=r[12],Fr=r[13],fe=r[14],Ee=r[15];n=t[0],s+=n*ye,o+=n*Lt,a+=n*Zt,l+=n*Rt,c+=n*de,u+=n*kr,f+=n*ir,p+=n*Lr,g+=n*He,A+=n*sn,y+=n*Ur,C+=n*fr,v+=n*be,b+=n*Fr,w+=n*fe,B+=n*Ee,n=t[1],o+=n*ye,a+=n*Lt,l+=n*Zt,c+=n*Rt,u+=n*de,f+=n*kr,p+=n*ir,g+=n*Lr,A+=n*He,y+=n*sn,C+=n*Ur,v+=n*fr,b+=n*be,w+=n*Fr,B+=n*fe,F+=n*Ee,n=t[2],a+=n*ye,l+=n*Lt,c+=n*Zt,u+=n*Rt,f+=n*de,p+=n*kr,g+=n*ir,A+=n*Lr,y+=n*He,C+=n*sn,v+=n*Ur,b+=n*fr,w+=n*be,B+=n*Fr,F+=n*fe,Q+=n*Ee,n=t[3],l+=n*ye,c+=n*Lt,u+=n*Zt,f+=n*Rt,p+=n*de,g+=n*kr,A+=n*ir,y+=n*Lr,C+=n*He,v+=n*sn,b+=n*Ur,w+=n*fr,B+=n*be,F+=n*Fr,Q+=n*fe,W+=n*Ee,n=t[4],c+=n*ye,u+=n*Lt,f+=n*Zt,p+=n*Rt,g+=n*de,A+=n*kr,y+=n*ir,C+=n*Lr,v+=n*He,b+=n*sn,w+=n*Ur,B+=n*fr,F+=n*be,Q+=n*Fr,W+=n*fe,Z+=n*Ee,n=t[5],u+=n*ye,f+=n*Lt,p+=n*Zt,g+=n*Rt,A+=n*de,y+=n*kr,C+=n*ir,v+=n*Lr,b+=n*He,w+=n*sn,B+=n*Ur,F+=n*fr,Q+=n*be,W+=n*Fr,Z+=n*fe,$+=n*Ee,n=t[6],f+=n*ye,p+=n*Lt,g+=n*Zt,A+=n*Rt,y+=n*de,C+=n*kr,v+=n*ir,b+=n*Lr,w+=n*He,B+=n*sn,F+=n*Ur,Q+=n*fr,W+=n*be,Z+=n*Fr,$+=n*fe,ee+=n*Ee,n=t[7],p+=n*ye,g+=n*Lt,A+=n*Zt,y+=n*Rt,C+=n*de,v+=n*kr,b+=n*ir,w+=n*Lr,B+=n*He,F+=n*sn,Q+=n*Ur,W+=n*fr,Z+=n*be,$+=n*Fr,ee+=n*fe,U+=n*Ee,n=t[8],g+=n*ye,A+=n*Lt,y+=n*Zt,C+=n*Rt,v+=n*de,b+=n*kr,w+=n*ir,B+=n*Lr,F+=n*He,Q+=n*sn,W+=n*Ur,Z+=n*fr,$+=n*be,ee+=n*Fr,U+=n*fe,ge+=n*Ee,n=t[9],A+=n*ye,y+=n*Lt,C+=n*Zt,v+=n*Rt,b+=n*de,w+=n*kr,B+=n*ir,F+=n*Lr,Q+=n*He,W+=n*sn,Z+=n*Ur,$+=n*fr,ee+=n*be,U+=n*Fr,ge+=n*fe,Se+=n*Ee,n=t[10],y+=n*ye,C+=n*Lt,v+=n*Zt,b+=n*Rt,w+=n*de,B+=n*kr,F+=n*ir,Q+=n*Lr,W+=n*He,Z+=n*sn,$+=n*Ur,ee+=n*fr,U+=n*be,ge+=n*Fr,Se+=n*fe,N+=n*Ee,n=t[11],C+=n*ye,v+=n*Lt,b+=n*Zt,w+=n*Rt,B+=n*de,F+=n*kr,Q+=n*ir,W+=n*Lr,Z+=n*He,$+=n*sn,ee+=n*Ur,U+=n*fr,ge+=n*be,Se+=n*Fr,N+=n*fe,se+=n*Ee,n=t[12],v+=n*ye,b+=n*Lt,w+=n*Zt,B+=n*Rt,F+=n*de,Q+=n*kr,W+=n*ir,Z+=n*Lr,$+=n*He,ee+=n*sn,U+=n*Ur,ge+=n*fr,Se+=n*be,N+=n*Fr,se+=n*fe,z+=n*Ee,n=t[13],b+=n*ye,w+=n*Lt,B+=n*Zt,F+=n*Rt,Q+=n*de,W+=n*kr,Z+=n*ir,$+=n*Lr,ee+=n*He,U+=n*sn,ge+=n*Ur,Se+=n*fr,N+=n*be,se+=n*Fr,z+=n*fe,ne+=n*Ee,n=t[14],w+=n*ye,B+=n*Lt,F+=n*Zt,Q+=n*Rt,W+=n*de,Z+=n*kr,$+=n*ir,ee+=n*Lr,U+=n*He,ge+=n*sn,Se+=n*Ur,N+=n*fr,se+=n*be,z+=n*Fr,ne+=n*fe,Ke+=n*Ee,n=t[15],B+=n*ye,F+=n*Lt,Q+=n*Zt,W+=n*Rt,Z+=n*de,$+=n*kr,ee+=n*ir,U+=n*Lr,ge+=n*He,Se+=n*sn,N+=n*Ur,se+=n*fr,z+=n*be,ne+=n*Fr,Ke+=n*fe,It+=n*Ee,s+=38*F,o+=38*Q,a+=38*W,l+=38*Z,c+=38*$,u+=38*ee,f+=38*U,p+=38*ge,g+=38*Se,A+=38*N,y+=38*se,C+=38*z,v+=38*ne,b+=38*Ke,w+=38*It,i=1,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=p+i+65535,i=Math.floor(n/65536),p=n-i*65536,n=g+i+65535,i=Math.floor(n/65536),g=n-i*65536,n=A+i+65535,i=Math.floor(n/65536),A=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=C+i+65535,i=Math.floor(n/65536),C=n-i*65536,n=v+i+65535,i=Math.floor(n/65536),v=n-i*65536,n=b+i+65535,i=Math.floor(n/65536),b=n-i*65536,n=w+i+65535,i=Math.floor(n/65536),w=n-i*65536,n=B+i+65535,i=Math.floor(n/65536),B=n-i*65536,s+=i-1+37*(i-1),i=1,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=p+i+65535,i=Math.floor(n/65536),p=n-i*65536,n=g+i+65535,i=Math.floor(n/65536),g=n-i*65536,n=A+i+65535,i=Math.floor(n/65536),A=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=C+i+65535,i=Math.floor(n/65536),C=n-i*65536,n=v+i+65535,i=Math.floor(n/65536),v=n-i*65536,n=b+i+65535,i=Math.floor(n/65536),b=n-i*65536,n=w+i+65535,i=Math.floor(n/65536),w=n-i*65536,n=B+i+65535,i=Math.floor(n/65536),B=n-i*65536,s+=i-1+37*(i-1),e[0]=s,e[1]=o,e[2]=a,e[3]=l,e[4]=c,e[5]=u,e[6]=f,e[7]=p,e[8]=g,e[9]=A,e[10]=y,e[11]=C,e[12]=v,e[13]=b,e[14]=w,e[15]=B}});var Mue=x((eTt,Fue)=>{"use strict";var Ra=Jt();Dr();vl();Yb();Fue.exports=Ra.kem=Ra.kem||{};var Rue=Ra.jsbn.BigInteger;Ra.kem.rsa={};Ra.kem.rsa.create=function(e,t){t=t||{};var r=t.prng||Ra.random,n={};return n.encrypt=function(i,s){var o=Math.ceil(i.n.bitLength()/8),a;do a=new Rue(Ra.util.bytesToHex(r.getBytesSync(o)),16).mod(i.n);while(a.compareTo(Rue.ONE)<=0);a=Ra.util.hexToBytes(a.toString(16));var l=o-a.length;l>0&&(a=Ra.util.fillString("\0",l)+a);var c=i.encrypt(a,"NONE"),u=e.generate(a,s);return{encapsulation:c,key:u}},n.decrypt=function(i,s,o){var a=i.decrypt(s,"NONE");return e.generate(a,o)},n};Ra.kem.kdf1=function(e,t){kue(this,e,0,t||e.digestLength)};Ra.kem.kdf2=function(e,t){kue(this,e,1,t||e.digestLength)};function kue(e,t,r,n){e.generate=function(i,s){for(var o=new Ra.util.ByteBuffer,a=Math.ceil(s/n)+r,l=new Ra.util.ByteBuffer,c=r;c<a;++c){l.putInt32(c),t.start(),t.update(i+l.getBytes());var u=t.digest();o.putBytes(u.getBytes(n))}return o.truncate(o.length()-s),o.getBytes()}}});var Lue=x((tTt,Pue)=>{"use strict";var Ar=Jt();Dr();Pue.exports=Ar.log=Ar.log||{};Ar.log.levels=["none","error","warning","info","debug","verbose","max"];var eR={},D5=[],ex=null;Ar.log.LEVEL_LOCKED=2;Ar.log.NO_LEVEL_CHECK=4;Ar.log.INTERPOLATE=8;for(_u=0;_u<Ar.log.levels.length;++_u)S5=Ar.log.levels[_u],eR[S5]={index:_u,name:S5.toUpperCase()};var S5,_u;Ar.log.logMessage=function(e){for(var t=eR[e.level].index,r=0;r<D5.length;++r){var n=D5[r];if(n.flags&Ar.log.NO_LEVEL_CHECK)n.f(e);else{var i=eR[n.level].index;t<=i&&n.f(n,e)}}};Ar.log.prepareStandard=function(e){"standard"in e||(e.standard=eR[e.level].name+" ["+e.category+"] "+e.message)};Ar.log.prepareFull=function(e){if(!("full"in e)){var t=[e.message];t=t.concat([]),e.full=Ar.util.format.apply(this,t)}};Ar.log.prepareStandardFull=function(e){"standardFull"in e||(Ar.log.prepareStandard(e),e.standardFull=e.standard)};for(B5=["error","warning","info","debug","verbose"],_u=0;_u<B5.length;++_u)(function(t){Ar.log[t]=function(r,n){var i=Array.prototype.slice.call(arguments).slice(2),s={timestamp:new Date,level:t,category:r,message:n,arguments:i};Ar.log.logMessage(s)}})(B5[_u]);var B5,_u;Ar.log.makeLogger=function(e){var t={flags:0,f:e};return Ar.log.setLevel(t,"none"),t};Ar.log.setLevel=function(e,t){var r=!1;if(e&&!(e.flags&Ar.log.LEVEL_LOCKED))for(var n=0;n<Ar.log.levels.length;++n){var i=Ar.log.levels[n];if(t==i){e.level=t,r=!0;break}}return r};Ar.log.lock=function(e,t){typeof t>"u"||t?e.flags|=Ar.log.LEVEL_LOCKED:e.flags&=~Ar.log.LEVEL_LOCKED};Ar.log.addLogger=function(e){D5.push(e)};typeof console<"u"&&"log"in console?(console.error&&console.warn&&console.info&&console.debug?(Que={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},tx=function(e,t){Ar.log.prepareStandard(t);var r=Que[t.level],n=[t.standard];n=n.concat(t.arguments.slice()),r.apply(console,n)},fy=Ar.log.makeLogger(tx)):(tx=function(t,r){Ar.log.prepareStandardFull(r),console.log(r.standardFull)},fy=Ar.log.makeLogger(tx)),Ar.log.setLevel(fy,"debug"),Ar.log.addLogger(fy),ex=fy):console={log:function(){}};var fy,Que,tx;ex!==null&&typeof window<"u"&&window.location&&(Xb=new URL(window.location.href).searchParams,Xb.has("console.level")&&Ar.log.setLevel(ex,Xb.get("console.level").slice(-1)[0]),Xb.has("console.lock")&&(Nue=Xb.get("console.lock").slice(-1)[0],Nue=="true"&&Ar.log.lock(ex)));var Xb,Nue;Ar.log.consoleLogger=ex});var Oue=x((rTt,Uue)=>{"use strict";Uue.exports=Au();FT();sy();V3();m5()});var Hue=x((nTt,Vue)=>{"use strict";var Te=Jt();xh();bc();Gb();_h();qp();r5();vl();Dr();YT();var G=Te.asn1,po=Vue.exports=Te.pkcs7=Te.pkcs7||{};po.messageFromPem=function(e){var t=Te.pem.decode(e)[0];if(t.type!=="PKCS7"){var r=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw r.headerType=t.type,r}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var n=G.fromDer(t.body);return po.messageFromAsn1(n)};po.messageToPem=function(e,t){var r={type:"PKCS7",body:G.toDer(e.toAsn1()).getBytes()};return Te.pem.encode(r,{maxline:t})};po.messageFromAsn1=function(e){var t={},r=[];if(!G.validate(e,po.asn1.contentInfoValidator,t,r)){var n=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw n.errors=r,n}var i=G.derToOid(t.contentType),s;switch(i){case Te.pki.oids.envelopedData:s=po.createEnvelopedData();break;case Te.pki.oids.encryptedData:s=po.createEncryptedData();break;case Te.pki.oids.signedData:s=po.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+i+" is not (yet) supported.")}return s.fromAsn1(t.content.value[0]),s};po.createSignedData=function(){var e=null;return e={type:Te.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(n){if(R5(e,n,po.asn1.signedDataValidator),e.certificates=[],e.crls=[],e.digestAlgorithmIdentifiers=[],e.contentInfo=null,e.signerInfos=[],e.rawCapture.certificates)for(var i=e.rawCapture.certificates.value,s=0;s<i.length;++s)e.certificates.push(Te.pki.certificateFromAsn1(i[s]))},toAsn1:function(){e.contentInfo||e.sign();for(var n=[],i=0;i<e.certificates.length;++i)n.push(Te.pki.certificateToAsn1(e.certificates[i]));var s=[],o=G.create(G.Class.CONTEXT_SPECIFIC,0,!0,[G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,[G.create(G.Class.UNIVERSAL,G.Type.INTEGER,!1,G.integerToDer(e.version).getBytes()),G.create(G.Class.UNIVERSAL,G.Type.SET,!0,e.digestAlgorithmIdentifiers),e.contentInfo])]);return n.length>0&&o.value[0].value.push(G.create(G.Class.CONTEXT_SPECIFIC,0,!0,n)),s.length>0&&o.value[0].value.push(G.create(G.Class.CONTEXT_SPECIFIC,1,!0,s)),o.value[0].value.push(G.create(G.Class.UNIVERSAL,G.Type.SET,!0,e.signerInfos)),G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,[G.create(G.Class.UNIVERSAL,G.Type.OID,!1,G.oidToDer(e.type).getBytes()),o])},addSigner:function(n){var i=n.issuer,s=n.serialNumber;if(n.certificate){var o=n.certificate;typeof o=="string"&&(o=Te.pki.certificateFromPem(o)),i=o.issuer.attributes,s=o.serialNumber}var a=n.key;if(!a)throw new Error("Could not add PKCS#7 signer; no private key specified.");typeof a=="string"&&(a=Te.pki.privateKeyFromPem(a));var l=n.digestAlgorithm||Te.pki.oids.sha1;switch(l){case Te.pki.oids.sha1:case Te.pki.oids.sha256:case Te.pki.oids.sha384:case Te.pki.oids.sha512:case Te.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+l)}var c=n.authenticatedAttributes||[];if(c.length>0){for(var u=!1,f=!1,p=0;p<c.length;++p){var g=c[p];if(!u&&g.type===Te.pki.oids.contentType){if(u=!0,f)break;continue}if(!f&&g.type===Te.pki.oids.messageDigest){if(f=!0,u)break;continue}}if(!u||!f)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}e.signers.push({key:a,version:1,issuer:i,serialNumber:s,digestAlgorithm:l,signatureAlgorithm:Te.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:c,unauthenticatedAttributes:[]})},sign:function(n){if(n=n||{},(typeof e.content!="object"||e.contentInfo===null)&&(e.contentInfo=G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,[G.create(G.Class.UNIVERSAL,G.Type.OID,!1,G.oidToDer(Te.pki.oids.data).getBytes())]),"content"in e)){var i;e.content instanceof Te.util.ByteBuffer?i=e.content.bytes():typeof e.content=="string"&&(i=Te.util.encodeUtf8(e.content)),n.detached?e.detachedContent=G.create(G.Class.UNIVERSAL,G.Type.OCTETSTRING,!1,i):e.contentInfo.value.push(G.create(G.Class.CONTEXT_SPECIFIC,0,!0,[G.create(G.Class.UNIVERSAL,G.Type.OCTETSTRING,!1,i)]))}if(e.signers.length!==0){var s=t();r(s)}},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(n){typeof n=="string"&&(n=Te.pki.certificateFromPem(n)),e.certificates.push(n)},addCertificateRevokationList:function(n){throw new Error("PKCS#7 CRL support not yet implemented.")}},e;function t(){for(var n={},i=0;i<e.signers.length;++i){var s=e.signers[i],o=s.digestAlgorithm;o in n||(n[o]=Te.md[Te.pki.oids[o]].create()),s.authenticatedAttributes.length===0?s.md=n[o]:s.md=Te.md[Te.pki.oids[o]].create()}e.digestAlgorithmIdentifiers=[];for(var o in n)e.digestAlgorithmIdentifiers.push(G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,[G.create(G.Class.UNIVERSAL,G.Type.OID,!1,G.oidToDer(o).getBytes()),G.create(G.Class.UNIVERSAL,G.Type.NULL,!1,"")]));return n}function r(n){var i;if(e.detachedContent?i=e.detachedContent:(i=e.contentInfo.value[1],i=i.value[0]),!i)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var s=G.derToOid(e.contentInfo.value[0].value),o=G.toDer(i);o.getByte(),G.getBerValueLength(o),o=o.getBytes();for(var a in n)n[a].start().update(o);for(var l=new Date,c=0;c<e.signers.length;++c){var u=e.signers[c];if(u.authenticatedAttributes.length===0){if(s!==Te.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{u.authenticatedAttributesAsn1=G.create(G.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var f=G.create(G.Class.UNIVERSAL,G.Type.SET,!0,[]),p=0;p<u.authenticatedAttributes.length;++p){var g=u.authenticatedAttributes[p];g.type===Te.pki.oids.messageDigest?g.value=n[u.digestAlgorithm].digest():g.type===Te.pki.oids.signingTime&&(g.value||(g.value=l)),f.value.push(T5(g)),u.authenticatedAttributesAsn1.value.push(T5(g))}o=G.toDer(f).getBytes(),u.md.start().update(o)}u.signature=u.key.sign(u.md,"RSASSA-PKCS1-V1_5")}e.signerInfos=rtt(e.signers)}};po.createEncryptedData=function(){var e=null;return e={type:Te.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:Te.pki.oids["aes256-CBC"]},fromAsn1:function(t){R5(e,t,po.asn1.encryptedDataValidator)},decrypt:function(t){t!==void 0&&(e.encryptedContent.key=t),que(e)}},e};po.createEnvelopedData=function(){var e=null;return e={type:Te.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:Te.pki.oids["aes256-CBC"]},fromAsn1:function(t){var r=R5(e,t,po.asn1.envelopedDataValidator);e.recipients=Xet(r.recipientInfos.value)},toAsn1:function(){return G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,[G.create(G.Class.UNIVERSAL,G.Type.OID,!1,G.oidToDer(e.type).getBytes()),G.create(G.Class.CONTEXT_SPECIFIC,0,!0,[G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,[G.create(G.Class.UNIVERSAL,G.Type.INTEGER,!1,G.integerToDer(e.version).getBytes()),G.create(G.Class.UNIVERSAL,G.Type.SET,!0,ett(e.recipients)),G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,ntt(e.encryptedContent))])])])},findRecipient:function(t){for(var r=t.issuer.attributes,n=0;n<e.recipients.length;++n){var i=e.recipients[n],s=i.issuer;if(i.serialNumber===t.serialNumber&&s.length===r.length){for(var o=!0,a=0;a<r.length;++a)if(s[a].type!==r[a].type||s[a].value!==r[a].value){o=!1;break}if(o)return i}}return null},decrypt:function(t,r){if(e.encryptedContent.key===void 0&&t!==void 0&&r!==void 0)switch(t.encryptedContent.algorithm){case Te.pki.oids.rsaEncryption:case Te.pki.oids.desCBC:var n=r.decrypt(t.encryptedContent.content);e.encryptedContent.key=Te.util.createBuffer(n);break;default:throw new Error("Unsupported asymmetric cipher, OID "+t.encryptedContent.algorithm)}que(e)},addRecipient:function(t){e.recipients.push({version:0,issuer:t.issuer.attributes,serialNumber:t.serialNumber,encryptedContent:{algorithm:Te.pki.oids.rsaEncryption,key:t.publicKey}})},encrypt:function(t,r){if(e.encryptedContent.content===void 0){r=r||e.encryptedContent.algorithm,t=t||e.encryptedContent.key;var n,i,s;switch(r){case Te.pki.oids["aes128-CBC"]:n=16,i=16,s=Te.aes.createEncryptionCipher;break;case Te.pki.oids["aes192-CBC"]:n=24,i=16,s=Te.aes.createEncryptionCipher;break;case Te.pki.oids["aes256-CBC"]:n=32,i=16,s=Te.aes.createEncryptionCipher;break;case Te.pki.oids["des-EDE3-CBC"]:n=24,i=8,s=Te.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+r)}if(t===void 0)t=Te.util.createBuffer(Te.random.getBytes(n));else if(t.length()!=n)throw new Error("Symmetric key has wrong length; got "+t.length()+" bytes, expected "+n+".");e.encryptedContent.algorithm=r,e.encryptedContent.key=t,e.encryptedContent.parameter=Te.util.createBuffer(Te.random.getBytes(i));var o=s(t);if(o.start(e.encryptedContent.parameter.copy()),o.update(e.content),!o.finish())throw new Error("Symmetric encryption failed.");e.encryptedContent.content=o.output}for(var a=0;a<e.recipients.length;++a){var l=e.recipients[a];if(l.encryptedContent.content===void 0)switch(l.encryptedContent.algorithm){case Te.pki.oids.rsaEncryption:l.encryptedContent.content=l.encryptedContent.key.encrypt(e.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+l.encryptedContent.algorithm)}}}},e};function jet(e){var t={},r=[];if(!G.validate(e,po.asn1.recipientInfoValidator,t,r)){var n=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw n.errors=r,n}return{version:t.version.charCodeAt(0),issuer:Te.pki.RDNAttributesAsArray(t.issuer),serialNumber:Te.util.createBuffer(t.serial).toHex(),encryptedContent:{algorithm:G.derToOid(t.encAlgorithm),parameter:t.encParameter?t.encParameter.value:void 0,content:t.encKey}}}function Zet(e){return G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,[G.create(G.Class.UNIVERSAL,G.Type.INTEGER,!1,G.integerToDer(e.version).getBytes()),G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,[Te.pki.distinguishedNameToAsn1({attributes:e.issuer}),G.create(G.Class.UNIVERSAL,G.Type.INTEGER,!1,Te.util.hexToBytes(e.serialNumber))]),G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,[G.create(G.Class.UNIVERSAL,G.Type.OID,!1,G.oidToDer(e.encryptedContent.algorithm).getBytes()),G.create(G.Class.UNIVERSAL,G.Type.NULL,!1,"")]),G.create(G.Class.UNIVERSAL,G.Type.OCTETSTRING,!1,e.encryptedContent.content)])}function Xet(e){for(var t=[],r=0;r<e.length;++r)t.push(jet(e[r]));return t}function ett(e){for(var t=[],r=0;r<e.length;++r)t.push(Zet(e[r]));return t}function ttt(e){var t=G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,[G.create(G.Class.UNIVERSAL,G.Type.INTEGER,!1,G.integerToDer(e.version).getBytes()),G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,[Te.pki.distinguishedNameToAsn1({attributes:e.issuer}),G.create(G.Class.UNIVERSAL,G.Type.INTEGER,!1,Te.util.hexToBytes(e.serialNumber))]),G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,[G.create(G.Class.UNIVERSAL,G.Type.OID,!1,G.oidToDer(e.digestAlgorithm).getBytes()),G.create(G.Class.UNIVERSAL,G.Type.NULL,!1,"")])]);if(e.authenticatedAttributesAsn1&&t.value.push(e.authenticatedAttributesAsn1),t.value.push(G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,[G.create(G.Class.UNIVERSAL,G.Type.OID,!1,G.oidToDer(e.signatureAlgorithm).getBytes()),G.create(G.Class.UNIVERSAL,G.Type.NULL,!1,"")])),t.value.push(G.create(G.Class.UNIVERSAL,G.Type.OCTETSTRING,!1,e.signature)),e.unauthenticatedAttributes.length>0){for(var r=G.create(G.Class.CONTEXT_SPECIFIC,1,!0,[]),n=0;n<e.unauthenticatedAttributes.length;++n){var i=e.unauthenticatedAttributes[n];r.values.push(T5(i))}t.value.push(r)}return t}function rtt(e){for(var t=[],r=0;r<e.length;++r)t.push(ttt(e[r]));return t}function T5(e){var t;if(e.type===Te.pki.oids.contentType)t=G.create(G.Class.UNIVERSAL,G.Type.OID,!1,G.oidToDer(e.value).getBytes());else if(e.type===Te.pki.oids.messageDigest)t=G.create(G.Class.UNIVERSAL,G.Type.OCTETSTRING,!1,e.value.bytes());else if(e.type===Te.pki.oids.signingTime){var r=new Date("1950-01-01T00:00:00Z"),n=new Date("2050-01-01T00:00:00Z"),i=e.value;if(typeof i=="string"){var s=Date.parse(i);isNaN(s)?i.length===13?i=G.utcTimeToDate(i):i=G.generalizedTimeToDate(i):i=new Date(s)}i>=r&&i<n?t=G.create(G.Class.UNIVERSAL,G.Type.UTCTIME,!1,G.dateToUtcTime(i)):t=G.create(G.Class.UNIVERSAL,G.Type.GENERALIZEDTIME,!1,G.dateToGeneralizedTime(i))}return G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,[G.create(G.Class.UNIVERSAL,G.Type.OID,!1,G.oidToDer(e.type).getBytes()),G.create(G.Class.UNIVERSAL,G.Type.SET,!0,[t])])}function ntt(e){return[G.create(G.Class.UNIVERSAL,G.Type.OID,!1,G.oidToDer(Te.pki.oids.data).getBytes()),G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,[G.create(G.Class.UNIVERSAL,G.Type.OID,!1,G.oidToDer(e.algorithm).getBytes()),e.parameter?G.create(G.Class.UNIVERSAL,G.Type.OCTETSTRING,!1,e.parameter.getBytes()):void 0]),G.create(G.Class.CONTEXT_SPECIFIC,0,!0,[G.create(G.Class.UNIVERSAL,G.Type.OCTETSTRING,!1,e.content.getBytes())])]}function R5(e,t,r){var n={},i=[];if(!G.validate(t,r,n,i)){var s=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw s.errors=s,s}var o=G.derToOid(n.contentType);if(o!==Te.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(n.encryptedContent){var a="";if(Te.util.isArray(n.encryptedContent))for(var l=0;l<n.encryptedContent.length;++l){if(n.encryptedContent[l].type!==G.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");a+=n.encryptedContent[l].value}else a=n.encryptedContent;e.encryptedContent={algorithm:G.derToOid(n.encAlgorithm),parameter:Te.util.createBuffer(n.encParameter.value),content:Te.util.createBuffer(a)}}if(n.content){var a="";if(Te.util.isArray(n.content))for(var l=0;l<n.content.length;++l){if(n.content[l].type!==G.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");a+=n.content[l].value}else a=n.content;e.content=Te.util.createBuffer(a)}return e.version=n.version.charCodeAt(0),e.rawCapture=n,n}function que(e){if(e.encryptedContent.key===void 0)throw new Error("Symmetric key not available.");if(e.content===void 0){var t;switch(e.encryptedContent.algorithm){case Te.pki.oids["aes128-CBC"]:case Te.pki.oids["aes192-CBC"]:case Te.pki.oids["aes256-CBC"]:t=Te.aes.createDecryptionCipher(e.encryptedContent.key);break;case Te.pki.oids.desCBC:case Te.pki.oids["des-EDE3-CBC"]:t=Te.des.createDecryptionCipher(e.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+e.encryptedContent.algorithm)}if(t.start(e.encryptedContent.parameter),t.update(e.encryptedContent.content),!t.finish())throw new Error("Symmetric decryption failed.");e.content=t.output}}});var Gue=x((iTt,Wue)=>{"use strict";var Ti=Jt();xh();ty();FT();sy();Dr();var rR=Wue.exports=Ti.ssh=Ti.ssh||{};rR.privateKeyToPutty=function(e,t,r){r=r||"",t=t||"";var n="ssh-rsa",i=t===""?"none":"aes256-cbc",s="PuTTY-User-Key-File-2: "+n+`\r
`;s+="Encryption: "+i+`\r
`,s+="Comment: "+r+`\r
`;var o=Ti.util.createBuffer();hy(o,n),wu(o,e.e),wu(o,e.n);var a=Ti.util.encode64(o.bytes(),64),l=Math.floor(a.length/66)+1;s+="Public-Lines: "+l+`\r
`,s+=a;var c=Ti.util.createBuffer();wu(c,e.d),wu(c,e.p),wu(c,e.q),wu(c,e.qInv);var u;if(!t)u=Ti.util.encode64(c.bytes(),64);else{var f=c.length()+16-1;f-=f%16;var p=tR(c.bytes());p.truncate(p.length()-f+c.length()),c.putBuffer(p);var g=Ti.util.createBuffer();g.putBuffer(tR("\0\0\0\0",t)),g.putBuffer(tR("\0\0\0",t));var A=Ti.aes.createEncryptionCipher(g.truncate(8),"CBC");A.start(Ti.util.createBuffer().fillWithByte(0,16)),A.update(c.copy()),A.finish();var y=A.output;y.truncate(16),u=Ti.util.encode64(y.bytes(),64)}l=Math.floor(u.length/66)+1,s+=`\r
Private-Lines: `+l+`\r
`,s+=u;var C=tR("putty-private-key-file-mac-key",t),v=Ti.util.createBuffer();hy(v,n),hy(v,i),hy(v,r),v.putInt32(o.length()),v.putBuffer(o),v.putInt32(c.length()),v.putBuffer(c);var b=Ti.hmac.create();return b.start("sha1",C),b.update(v.bytes()),s+=`\r
Private-MAC: `+b.digest().toHex()+`\r
`,s};rR.publicKeyToOpenSSH=function(e,t){var r="ssh-rsa";t=t||"";var n=Ti.util.createBuffer();return hy(n,r),wu(n,e.e),wu(n,e.n),r+" "+Ti.util.encode64(n.bytes())+" "+t};rR.privateKeyToOpenSSH=function(e,t){return t?Ti.pki.encryptRsaPrivateKey(e,t,{legacy:!0,algorithm:"aes128"}):Ti.pki.privateKeyToPem(e)};rR.getPublicKeyFingerprint=function(e,t){t=t||{};var r=t.md||Ti.md.md5.create(),n="ssh-rsa",i=Ti.util.createBuffer();hy(i,n),wu(i,e.e),wu(i,e.n),r.start(),r.update(i.getBytes());var s=r.digest();if(t.encoding==="hex"){var o=s.toHex();return t.delimiter?o.match(/.{2}/g).join(t.delimiter):o}else{if(t.encoding==="binary")return s.getBytes();if(t.encoding)throw new Error('Unknown encoding "'+t.encoding+'".')}return s};function wu(e,t){var r=t.toString(16);r[0]>="8"&&(r="00"+r);var n=Ti.util.hexToBytes(r);e.putInt32(n.length),e.putBytes(n)}function hy(e,t){e.putInt32(t.length),e.putString(t)}function tR(){for(var e=Ti.md.sha1.create(),t=arguments.length,r=0;r<t;++r)e.update(arguments[r]);return e.digest()}});var Yue=x((sTt,$ue)=>{"use strict";$ue.exports=Jt();xh();fue();bc();IT();Gb();Tue();ty();Mue();Lue();Oue();n5();PT();qp();j3();o5();Hue();l5();X3();H3();WT();vl();$3();Gue();g5();Dr()});var Jue=x(zp=>{"use strict";Object.defineProperty(zp,"__esModule",{value:!0});zp.convert=zp.Format=void 0;var rx=Yue(),kh;(function(e){e.der="der",e.pem="pem",e.txt="txt",e.asn1="asn1",e.x509="x509",e.fingerprint="fingerprint"})(kh=zp.Format||(zp.Format={}));function Kue(e){var t=rx.pki.pemToDer(e),r=rx.asn1,n=r.fromDer(t.data.toString("binary")).value[0].value,i=n[0],s=i.tagClass===r.Class.CONTEXT_SPECIFIC&&i.type===0&&i.constructed,o=n.slice(s);return{serial:o[0],issuer:o[2],valid:o[3],subject:o[4]}}function itt(e){var t=Kue(e),r=t.subject.value.map(function(i){return i.value[0].value[1].value}).join("/"),n=t.valid.value.map(function(i){return i.value}).join(" - ");return["Subject	".concat(r),"Valid	".concat(n),String(e)].join(`
`)}function zue(e,t){switch(t){case kh.der:return rx.pki.pemToDer(e);case kh.pem:return e;case kh.txt:return itt(e);case kh.asn1:return Kue(e);case kh.fingerprint:var r=rx.md.sha1.create(),n=zue(e,kh.der);return r.update(n.getBytes()),r.digest().toHex();case kh.x509:return rx.pki.certificateFromPem(e);default:throw new Error("unknown format ".concat(t))}}zp.convert=zue});var rde=x(Jo=>{"use strict";var Fh=Jo&&Jo.__assign||function(){return Fh=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Fh.apply(this,arguments)},nR=Jo&&Jo.__spreadArray||function(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,s;n<i;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||Array.prototype.slice.call(t))};Object.defineProperty(Jo,"__esModule",{value:!0});Jo.convert=Jo.Format=Jo.addToGlobalAgent=Jo.get=void 0;var k5=require("https"),stt=require("tls"),jue=require("child_process"),Zue=Rle(),zd=Jue();Object.defineProperty(Jo,"Format",{enumerable:!0,get:function(){return zd.Format}});Object.defineProperty(Jo,"convert",{enumerable:!0,get:function(){return zd.convert}});var Xue=process.platform==="darwin",ede=k5.globalAgent,sR={keychain:"all",unique:!0,excludeBundled:!0,format:zd.Format.pem};function tde(e){if(e===void 0&&(e=sR),!Xue)return[];e=Fh(Fh({},sR),e);var t=/(?=-----BEGIN\sCERTIFICATE-----)/g,r=["find-certificate","-a","-p"],n=[];if(e.keychain==="all"||e.keychain==="SystemRootCertificates"){var i="/System/Library/Keychains/SystemRootCertificates.keychain",s=(0,jue.spawnSync)("/usr/bin/security",r.concat(i)).stdout.toString().split(t).map(function(c){return c.trim()});n=nR(nR([],n,!0),s,!0)}if(e.keychain==="all"||e.keychain==="current"){var o=(0,jue.spawnSync)("/usr/bin/security",r).stdout.toString().split(t).map(function(c){return c.trim()});n=nR(nR([],n,!0),o,!0)}if(e.unique||e.excludeBundled){var a=n.map(function(c){return(0,zd.convert)(c,zd.Format.fingerprint)}),l=e.excludeBundled?stt.rootCertificates.map(function(c){return(0,zd.convert)(c,zd.Format.fingerprint)}):[];n=n.filter(function(c,u){var f=a[u];return!(e.unique&&u!==a.indexOf(f)||e.excludeBundled&&l.includes(f))})}return n.map(function(c){return(0,zd.convert)(c,e.format)})}Jo.get=tde;var iR=ede.options.ca,ott=function(e){if(e===void 0&&(e=sR),!!Xue){var t;Array.isArray(iR)?t=Array.from(iR):t=typeof iR<"u"?[iR]:[],tde(Fh(Fh(Fh({},sR),e),{format:zd.Format.pem,excludeBundled:!1})).forEach(function(r){return t.push(r)}),ede.options.ca=t,k5.Agent=function(r){return function(n){var i=typeof n<"u"?Fh({},n):{};return typeof i.ca>"u"&&(i.ca=t),r.call(this,i)}}(k5.Agent),(0,Zue.setGlobalDispatcher)(new Zue.Agent({connect:{ca:t}}))}};Jo.addToGlobalAgent=ott});var cde=x((_Tt,lde)=>{"use strict";function ctt(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}lde.exports=ctt});var dde=x((wTt,ude)=>{"use strict";var utt=nh(),dtt=function(){try{var e=utt(Object,"defineProperty");return e({},"",{}),e}catch{}}();ude.exports=dtt});var N5=x((ITt,hde)=>{"use strict";var fde=dde();function ftt(e,t,r){t=="__proto__"&&fde?fde(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}hde.exports=ftt});var P5=x((STt,gde)=>{"use strict";var htt=N5(),gtt=vB(),ptt=Object.prototype,Att=ptt.hasOwnProperty;function mtt(e,t,r){var n=e[t];(!(Att.call(e,t)&&gtt(n,r))||r===void 0&&!(t in e))&&htt(e,t,r)}gde.exports=mtt});var nx=x((BTt,pde)=>{"use strict";var ytt=P5(),Ctt=N5();function vtt(e,t,r,n){var i=!r;r||(r={});for(var s=-1,o=t.length;++s<o;){var a=t[s],l=n?n(r[a],e[a],a,r,e):void 0;l===void 0&&(l=e[a]),i?Ctt(r,a,l):ytt(r,a,l)}return r}pde.exports=vtt});var mde=x((DTt,Ade)=>{"use strict";var Ett=nx(),btt=BB();function xtt(e,t){return e&&Ett(t,btt(t),e)}Ade.exports=xtt});var Cde=x((TTt,yde)=>{"use strict";function _tt(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}yde.exports=_tt});var Ede=x((RTt,vde)=>{"use strict";var wtt=xd(),Itt=SB(),Stt=Cde(),Btt=Object.prototype,Dtt=Btt.hasOwnProperty;function Ttt(e){if(!wtt(e))return Stt(e);var t=Itt(e),r=[];for(var n in e)n=="constructor"&&(t||!Dtt.call(e,n))||r.push(n);return r}vde.exports=Ttt});var lR=x((kTt,bde)=>{"use strict";var Rtt=tO(),ktt=Ede(),Ftt=nO();function Mtt(e){return Ftt(e)?Rtt(e,!0):ktt(e)}bde.exports=Mtt});var _de=x((FTt,xde)=>{"use strict";var Qtt=nx(),Ntt=lR();function Ptt(e,t){return e&&Qtt(t,Ntt(t),e)}xde.exports=Ptt});var Dde=x((ix,Ay)=>{"use strict";var Ltt=sl(),Bde=typeof ix=="object"&&ix&&!ix.nodeType&&ix,wde=Bde&&typeof Ay=="object"&&Ay&&!Ay.nodeType&&Ay,Utt=wde&&wde.exports===Bde,Ide=Utt?Ltt.Buffer:void 0,Sde=Ide?Ide.allocUnsafe:void 0;function Ott(e,t){if(t)return e.slice();var r=e.length,n=Sde?Sde(r):new e.constructor(r);return e.copy(n),n}Ay.exports=Ott});var Rde=x((MTt,Tde)=>{"use strict";function qtt(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}Tde.exports=qtt});var Fde=x((QTt,kde)=>{"use strict";var Vtt=nx(),Htt=xB();function Wtt(e,t){return Vtt(e,Htt(e),t)}kde.exports=Wtt});var L5=x((NTt,Mde)=>{"use strict";var Gtt=rO(),$tt=Gtt(Object.getPrototypeOf,Object);Mde.exports=$tt});var U5=x((PTt,Qde)=>{"use strict";var Ytt=zU(),Ktt=L5(),ztt=xB(),Jtt=jU(),jtt=Object.getOwnPropertySymbols,Ztt=jtt?function(e){for(var t=[];e;)Ytt(t,ztt(e)),e=Ktt(e);return t}:Jtt;Qde.exports=Ztt});var Pde=x((LTt,Nde)=>{"use strict";var Xtt=nx(),ert=U5();function trt(e,t){return Xtt(e,ert(e),t)}Nde.exports=trt});var Ude=x((UTt,Lde)=>{"use strict";var rrt=JU(),nrt=U5(),irt=lR();function srt(e){return rrt(e,irt,nrt)}Lde.exports=srt});var qde=x((OTt,Ode)=>{"use strict";var ort=Object.prototype,art=ort.hasOwnProperty;function lrt(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&art.call(e,"index")&&(r.index=e.index,r.input=e.input),r}Ode.exports=lrt});var cR=x((qTt,Hde)=>{"use strict";var Vde=YU();function crt(e){var t=new e.constructor(e.byteLength);return new Vde(t).set(new Vde(e)),t}Hde.exports=crt});var Gde=x((VTt,Wde)=>{"use strict";var urt=cR();function drt(e,t){var r=t?urt(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}Wde.exports=drt});var Yde=x((HTt,$de)=>{"use strict";var frt=/\w*$/;function hrt(e){var t=new e.constructor(e.source,frt.exec(e));return t.lastIndex=e.lastIndex,t}$de.exports=hrt});var Zde=x((WTt,jde)=>{"use strict";var Kde=Uv(),zde=Kde?Kde.prototype:void 0,Jde=zde?zde.valueOf:void 0;function grt(e){return Jde?Object(Jde.call(e)):{}}jde.exports=grt});var efe=x((GTt,Xde)=>{"use strict";var prt=cR();function Art(e,t){var r=t?prt(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}Xde.exports=Art});var rfe=x(($Tt,tfe)=>{"use strict";var mrt=cR(),yrt=Gde(),Crt=Yde(),vrt=Zde(),Ert=efe(),brt="[object Boolean]",xrt="[object Date]",_rt="[object Map]",wrt="[object Number]",Irt="[object RegExp]",Srt="[object Set]",Brt="[object String]",Drt="[object Symbol]",Trt="[object ArrayBuffer]",Rrt="[object DataView]",krt="[object Float32Array]",Frt="[object Float64Array]",Mrt="[object Int8Array]",Qrt="[object Int16Array]",Nrt="[object Int32Array]",Prt="[object Uint8Array]",Lrt="[object Uint8ClampedArray]",Urt="[object Uint16Array]",Ort="[object Uint32Array]";function qrt(e,t,r){var n=e.constructor;switch(t){case Trt:return mrt(e);case brt:case xrt:return new n(+e);case Rrt:return yrt(e,r);case krt:case Frt:case Mrt:case Qrt:case Nrt:case Prt:case Lrt:case Urt:case Ort:return Ert(e,r);case _rt:return new n;case wrt:case Brt:return new n(e);case Irt:return Crt(e);case Srt:return new n;case Drt:return vrt(e)}}tfe.exports=qrt});var sfe=x((YTt,ife)=>{"use strict";var Vrt=xd(),nfe=Object.create,Hrt=function(){function e(){}return function(t){if(!Vrt(t))return{};if(nfe)return nfe(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();ife.exports=Hrt});var afe=x((KTt,ofe)=>{"use strict";var Wrt=sfe(),Grt=L5(),$rt=SB();function Yrt(e){return typeof e.constructor=="function"&&!$rt(e)?Wrt(Grt(e)):{}}ofe.exports=Yrt});var cfe=x((zTt,lfe)=>{"use strict";var Krt=UE(),zrt=qf(),Jrt="[object Map]";function jrt(e){return zrt(e)&&Krt(e)==Jrt}lfe.exports=jrt});var hfe=x((JTt,ffe)=>{"use strict";var Zrt=cfe(),Xrt=wB(),ufe=IB(),dfe=ufe&&ufe.isMap,ent=dfe?Xrt(dfe):Zrt;ffe.exports=ent});var pfe=x((jTt,gfe)=>{"use strict";var tnt=UE(),rnt=qf(),nnt="[object Set]";function int(e){return rnt(e)&&tnt(e)==nnt}gfe.exports=int});var Cfe=x((ZTt,yfe)=>{"use strict";var snt=pfe(),ont=wB(),Afe=IB(),mfe=Afe&&Afe.isSet,ant=mfe?ont(mfe):snt;yfe.exports=ant});var _fe=x((XTt,xfe)=>{"use strict";var lnt=GU(),cnt=cde(),unt=P5(),dnt=mde(),fnt=_de(),hnt=Dde(),gnt=Rde(),pnt=Fde(),Ant=Pde(),mnt=iO(),ynt=Ude(),Cnt=UE(),vnt=qde(),Ent=rfe(),bnt=afe(),xnt=QE(),_nt=_B(),wnt=hfe(),Int=xd(),Snt=Cfe(),Bnt=BB(),Dnt=lR(),Tnt=1,Rnt=2,knt=4,vfe="[object Arguments]",Fnt="[object Array]",Mnt="[object Boolean]",Qnt="[object Date]",Nnt="[object Error]",Efe="[object Function]",Pnt="[object GeneratorFunction]",Lnt="[object Map]",Unt="[object Number]",bfe="[object Object]",Ont="[object RegExp]",qnt="[object Set]",Vnt="[object String]",Hnt="[object Symbol]",Wnt="[object WeakMap]",Gnt="[object ArrayBuffer]",$nt="[object DataView]",Ynt="[object Float32Array]",Knt="[object Float64Array]",znt="[object Int8Array]",Jnt="[object Int16Array]",jnt="[object Int32Array]",Znt="[object Uint8Array]",Xnt="[object Uint8ClampedArray]",eit="[object Uint16Array]",tit="[object Uint32Array]",En={};En[vfe]=En[Fnt]=En[Gnt]=En[$nt]=En[Mnt]=En[Qnt]=En[Ynt]=En[Knt]=En[znt]=En[Jnt]=En[jnt]=En[Lnt]=En[Unt]=En[bfe]=En[Ont]=En[qnt]=En[Vnt]=En[Hnt]=En[Znt]=En[Xnt]=En[eit]=En[tit]=!0;En[Nnt]=En[Efe]=En[Wnt]=!1;function uR(e,t,r,n,i,s){var o,a=t&Tnt,l=t&Rnt,c=t&knt;if(r&&(o=i?r(e,n,i,s):r(e)),o!==void 0)return o;if(!Int(e))return e;var u=xnt(e);if(u){if(o=vnt(e),!a)return gnt(e,o)}else{var f=Cnt(e),p=f==Efe||f==Pnt;if(_nt(e))return hnt(e,a);if(f==bfe||f==vfe||p&&!i){if(o=l||p?{}:bnt(e),!a)return l?Ant(e,fnt(o,e)):pnt(e,dnt(o,e))}else{if(!En[f])return i?e:{};o=Ent(e,f,a)}}s||(s=new lnt);var g=s.get(e);if(g)return g;s.set(e,o),Snt(e)?e.forEach(function(C){o.add(uR(C,t,r,C,e,s))}):wnt(e)&&e.forEach(function(C,v){o.set(v,uR(C,t,r,v,e,s))});var A=c?l?ynt:mnt:l?Dnt:Bnt,y=u?void 0:A(e);return cnt(y||e,function(C,v){y&&(v=C,C=e[v]),unt(o,v,uR(C,t,r,v,e,s))}),o}xfe.exports=uR});var Ife=x((eRt,wfe)=>{"use strict";var rit=_fe(),nit=1,iit=4;function sit(e){return rit(e,nit|iit)}wfe.exports=sit});var jo=x((tRt,Sfe)=>{"use strict";var O5=class e extends Error{constructor(t){super(`Format functions must be synchronous taking a two arguments: (info, opts)
Found: ${t.toString().split(`
`)[0]}
`),Error.captureStackTrace(this,e)}};Sfe.exports=e=>{if(e.length>2)throw new O5(e);function t(n={}){this.options=n}t.prototype.transform=e;function r(n){return new t(n)}return r.Format=t,r}});var Rfe=x((rRt,Tfe)=>{"use strict";var Dfe={};Tfe.exports=Dfe;var Bfe={reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29],black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],grey:[90,39],brightRed:[91,39],brightGreen:[92,39],brightYellow:[93,39],brightBlue:[94,39],brightMagenta:[95,39],brightCyan:[96,39],brightWhite:[97,39],bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgGray:[100,49],bgGrey:[100,49],bgBrightRed:[101,49],bgBrightGreen:[102,49],bgBrightYellow:[103,49],bgBrightBlue:[104,49],bgBrightMagenta:[105,49],bgBrightCyan:[106,49],bgBrightWhite:[107,49],blackBG:[40,49],redBG:[41,49],greenBG:[42,49],yellowBG:[43,49],blueBG:[44,49],magentaBG:[45,49],cyanBG:[46,49],whiteBG:[47,49]};Object.keys(Bfe).forEach(function(e){var t=Bfe[e],r=Dfe[e]=[];r.open="\x1B["+t[0]+"m",r.close="\x1B["+t[1]+"m"})});var Ffe=x((nRt,kfe)=>{"use strict";kfe.exports=function(e,t){t=t||process.argv||[];var r=t.indexOf("--"),n=/^-{1,2}/.test(e)?"":"--",i=t.indexOf(n+e);return i!==-1&&(r===-1?!0:i<r)}});var Qfe=x((iRt,Mfe)=>{"use strict";var oit=require("os"),_c=Ffe(),Ao=process.env,my=void 0;_c("no-color")||_c("no-colors")||_c("color=false")?my=!1:(_c("color")||_c("colors")||_c("color=true")||_c("color=always"))&&(my=!0);"FORCE_COLOR"in Ao&&(my=Ao.FORCE_COLOR.length===0||parseInt(Ao.FORCE_COLOR,10)!==0);function ait(e){return e===0?!1:{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function lit(e){if(my===!1)return 0;if(_c("color=16m")||_c("color=full")||_c("color=truecolor"))return 3;if(_c("color=256"))return 2;if(e&&!e.isTTY&&my!==!0)return 0;var t=my?1:0;if(process.platform==="win32"){var r=oit.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(r[0])>=10&&Number(r[2])>=10586?Number(r[2])>=14931?3:2:1}if("CI"in Ao)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(function(i){return i in Ao})||Ao.CI_NAME==="codeship"?1:t;if("TEAMCITY_VERSION"in Ao)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(Ao.TEAMCITY_VERSION)?1:0;if("TERM_PROGRAM"in Ao){var n=parseInt((Ao.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(Ao.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Hyper":return 3;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(Ao.TERM)?2:/^screen|^xterm|^vt100|^rxvt|color|ansi|cygwin|linux/i.test(Ao.TERM)||"COLORTERM"in Ao?1:(Ao.TERM==="dumb",t)}function q5(e){var t=lit(e);return ait(t)}Mfe.exports={supportsColor:q5,stdout:q5(process.stdout),stderr:q5(process.stderr)}});var Pfe=x((sRt,Nfe)=>{"use strict";Nfe.exports=function(t,r){var n="";t=t||"Run the trap, drop the bass",t=t.split("");var i={a:["@","\u0104","\u023A","\u0245","\u0394","\u039B","\u0414"],b:["\xDF","\u0181","\u0243","\u026E","\u03B2","\u0E3F"],c:["\xA9","\u023B","\u03FE"],d:["\xD0","\u018A","\u0500","\u0501","\u0502","\u0503"],e:["\xCB","\u0115","\u018E","\u0258","\u03A3","\u03BE","\u04BC","\u0A6C"],f:["\u04FA"],g:["\u0262"],h:["\u0126","\u0195","\u04A2","\u04BA","\u04C7","\u050A"],i:["\u0F0F"],j:["\u0134"],k:["\u0138","\u04A0","\u04C3","\u051E"],l:["\u0139"],m:["\u028D","\u04CD","\u04CE","\u0520","\u0521","\u0D69"],n:["\xD1","\u014B","\u019D","\u0376","\u03A0","\u048A"],o:["\xD8","\xF5","\xF8","\u01FE","\u0298","\u047A","\u05DD","\u06DD","\u0E4F"],p:["\u01F7","\u048E"],q:["\u09CD"],r:["\xAE","\u01A6","\u0210","\u024C","\u0280","\u042F"],s:["\xA7","\u03DE","\u03DF","\u03E8"],t:["\u0141","\u0166","\u0373"],u:["\u01B1","\u054D"],v:["\u05D8"],w:["\u0428","\u0460","\u047C","\u0D70"],x:["\u04B2","\u04FE","\u04FC","\u04FD"],y:["\xA5","\u04B0","\u04CB"],z:["\u01B5","\u0240"]};return t.forEach(function(s){s=s.toLowerCase();var o=i[s]||[" "],a=Math.floor(Math.random()*o.length);typeof i[s]<"u"?n+=i[s][a]:n+=s}),n}});var Ufe=x((oRt,Lfe)=>{"use strict";Lfe.exports=function(t,r){t=t||"   he is here   ";var n={up:["\u030D","\u030E","\u0304","\u0305","\u033F","\u0311","\u0306","\u0310","\u0352","\u0357","\u0351","\u0307","\u0308","\u030A","\u0342","\u0313","\u0308","\u034A","\u034B","\u034C","\u0303","\u0302","\u030C","\u0350","\u0300","\u0301","\u030B","\u030F","\u0312","\u0313","\u0314","\u033D","\u0309","\u0363","\u0364","\u0365","\u0366","\u0367","\u0368","\u0369","\u036A","\u036B","\u036C","\u036D","\u036E","\u036F","\u033E","\u035B","\u0346","\u031A"],down:["\u0316","\u0317","\u0318","\u0319","\u031C","\u031D","\u031E","\u031F","\u0320","\u0324","\u0325","\u0326","\u0329","\u032A","\u032B","\u032C","\u032D","\u032E","\u032F","\u0330","\u0331","\u0332","\u0333","\u0339","\u033A","\u033B","\u033C","\u0345","\u0347","\u0348","\u0349","\u034D","\u034E","\u0353","\u0354","\u0355","\u0356","\u0359","\u035A","\u0323"],mid:["\u0315","\u031B","\u0300","\u0301","\u0358","\u0321","\u0322","\u0327","\u0328","\u0334","\u0335","\u0336","\u035C","\u035D","\u035E","\u035F","\u0360","\u0362","\u0338","\u0337","\u0361"," \u0489"]},i=[].concat(n.up,n.down,n.mid);function s(l){var c=Math.floor(Math.random()*l);return c}function o(l){var c=!1;return i.filter(function(u){c=u===l}),c}function a(l,c){var u="",f,p;c=c||{},c.up=typeof c.up<"u"?c.up:!0,c.mid=typeof c.mid<"u"?c.mid:!0,c.down=typeof c.down<"u"?c.down:!0,c.size=typeof c.size<"u"?c.size:"maxi",l=l.split("");for(p in l)if(!o(p)){switch(u=u+l[p],f={up:0,down:0,mid:0},c.size){case"mini":f.up=s(8),f.mid=s(2),f.down=s(8);break;case"maxi":f.up=s(16)+3,f.mid=s(4)+1,f.down=s(64)+3;break;default:f.up=s(8)+1,f.mid=s(6)/2,f.down=s(8)+1;break}var g=["up","mid","down"];for(var A in g)for(var y=g[A],C=0;C<=f[y];C++)c[y]&&(u=u+n[y][s(n[y].length)])}return u}return a(t,r)}});var qfe=x((aRt,Ofe)=>{"use strict";Ofe.exports=function(e){return function(t,r,n){if(t===" ")return t;switch(r%3){case 0:return e.red(t);case 1:return e.white(t);case 2:return e.blue(t)}}}});var Hfe=x((lRt,Vfe)=>{"use strict";Vfe.exports=function(e){return function(t,r,n){return r%2===0?t:e.inverse(t)}}});var Gfe=x((cRt,Wfe)=>{"use strict";Wfe.exports=function(e){var t=["red","yellow","green","blue","magenta"];return function(r,n,i){return r===" "?r:e[t[n++%t.length]](r)}}});var Yfe=x((uRt,$fe)=>{"use strict";$fe.exports=function(e){var t=["underline","inverse","grey","yellow","red","green","blue","white","cyan","magenta","brightYellow","brightRed","brightGreen","brightBlue","brightWhite","brightCyan","brightMagenta"];return function(r,n,i){return r===" "?r:e[t[Math.round(Math.random()*(t.length-2))]](r)}}});var Xfe=x((fRt,Zfe)=>{"use strict";var dr={};Zfe.exports=dr;dr.themes={};var cit=require("util"),Jp=dr.styles=Rfe(),zfe=Object.defineProperties,uit=new RegExp(/[\r\n]+/g);dr.supportsColor=Qfe().supportsColor;typeof dr.enabled>"u"&&(dr.enabled=dr.supportsColor()!==!1);dr.enable=function(){dr.enabled=!0};dr.disable=function(){dr.enabled=!1};dr.stripColors=dr.strip=function(e){return(""+e).replace(/\x1B\[\d+m/g,"")};var dRt=dr.stylize=function(t,r){if(!dr.enabled)return t+"";var n=Jp[r];return!n&&r in dr?dr[r](t):n.open+t+n.close},dit=/[|\\{}()[\]^$+*?.]/g,fit=function(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(dit,"\\$&")};function Jfe(e){var t=function r(){return git.apply(r,arguments)};return t._styles=e,t.__proto__=hit,t}var jfe=function(){var e={};return Jp.grey=Jp.gray,Object.keys(Jp).forEach(function(t){Jp[t].closeRe=new RegExp(fit(Jp[t].close),"g"),e[t]={get:function(){return Jfe(this._styles.concat(t))}}}),e}(),hit=zfe(function(){},jfe);function git(){var e=Array.prototype.slice.call(arguments),t=e.map(function(o){return o!=null&&o.constructor===String?o:cit.inspect(o)}).join(" ");if(!dr.enabled||!t)return t;for(var r=t.indexOf(`
`)!=-1,n=this._styles,i=n.length;i--;){var s=Jp[n[i]];t=s.open+t.replace(s.closeRe,s.open)+s.close,r&&(t=t.replace(uit,function(o){return s.close+o+s.open}))}return t}dr.setTheme=function(e){if(typeof e=="string"){console.log("colors.setTheme now only accepts an object, not a string.  If you are trying to set a theme from a file, it is now your (the caller's) responsibility to require the file.  The old syntax looked like colors.setTheme(__dirname + '/../themes/generic-logging.js'); The new syntax looks like colors.setTheme(require(__dirname + '/../themes/generic-logging.js'));");return}for(var t in e)(function(r){dr[r]=function(n){if(typeof e[r]=="object"){var i=n;for(var s in e[r])i=dr[e[r][s]](i);return i}return dr[e[r]](n)}})(t)};function pit(){var e={};return Object.keys(jfe).forEach(function(t){e[t]={get:function(){return Jfe([t])}}}),e}var Ait=function(t,r){var n=r.split("");return n=n.map(t),n.join("")};dr.trap=Pfe();dr.zalgo=Ufe();dr.maps={};dr.maps.america=qfe()(dr);dr.maps.zebra=Hfe()(dr);dr.maps.rainbow=Gfe()(dr);dr.maps.random=Yfe()(dr);for(Kfe in dr.maps)(function(e){dr[e]=function(t){return Ait(dr.maps[e],t)}})(Kfe);var Kfe;zfe(dr,pit())});var V5=x((hRt,ehe)=>{"use strict";var mit=Xfe();ehe.exports=mit});var the=x(H5=>{"use strict";H5.levels={error:0,warn:1,help:2,data:3,info:4,debug:5,prompt:6,verbose:7,input:8,silly:9};H5.colors={error:"red",warn:"yellow",help:"cyan",data:"grey",info:"green",debug:"blue",prompt:"grey",verbose:"cyan",input:"grey",silly:"magenta"}});var rhe=x(W5=>{"use strict";W5.levels={error:0,warn:1,info:2,http:3,verbose:4,debug:5,silly:6};W5.colors={error:"red",warn:"yellow",info:"green",http:"green",verbose:"cyan",debug:"blue",silly:"magenta"}});var nhe=x(G5=>{"use strict";G5.levels={emerg:0,alert:1,crit:2,error:3,warning:4,notice:5,info:6,debug:7};G5.colors={emerg:"red",alert:"yellow",crit:"red",error:"red",warning:"red",notice:"yellow",info:"green",debug:"blue"}});var ihe=x(dR=>{"use strict";Object.defineProperty(dR,"cli",{value:the()});Object.defineProperty(dR,"npm",{value:rhe()});Object.defineProperty(dR,"syslog",{value:nhe()})});var Ri=x(sx=>{"use strict";Object.defineProperty(sx,"LEVEL",{value:Symbol.for("level")});Object.defineProperty(sx,"MESSAGE",{value:Symbol.for("message")});Object.defineProperty(sx,"SPLAT",{value:Symbol.for("splat")});Object.defineProperty(sx,"configs",{value:ihe()})});var gR=x((CRt,hR)=>{"use strict";var K5=V5(),{LEVEL:$5,MESSAGE:Y5}=Ri();K5.enabled=!0;var she=/\s+/,fR=class e{constructor(t={}){t.colors&&this.addColors(t.colors),this.options=t}static addColors(t){let r=Object.keys(t).reduce((n,i)=>(n[i]=she.test(t[i])?t[i].split(she):t[i],n),{});return e.allColors=Object.assign({},e.allColors||{},r),e.allColors}addColors(t){return e.addColors(t)}colorize(t,r,n){if(typeof n>"u"&&(n=r),!Array.isArray(e.allColors[t]))return K5[e.allColors[t]](n);for(let i=0,s=e.allColors[t].length;i<s;i++)n=K5[e.allColors[t][i]](n);return n}transform(t,r){return r.all&&typeof t[Y5]=="string"&&(t[Y5]=this.colorize(t[$5],t.level,t[Y5])),(r.level||r.all||!r.message)&&(t.level=this.colorize(t[$5],t.level)),(r.all||r.message)&&(t.message=this.colorize(t[$5],t.level,t.message)),t}};hR.exports=e=>new fR(e);hR.exports.Colorizer=hR.exports.Format=fR});var ahe=x((vRt,ohe)=>{"use strict";var{Colorizer:yit}=gR();ohe.exports=e=>(yit.addColors(e.colors||e),e)});var che=x((ERt,lhe)=>{"use strict";var Cit=jo();lhe.exports=Cit(e=>(e.message=`	${e.message}`,e))});var fhe=x((bRt,dhe)=>{"use strict";var vit=jo(),{LEVEL:uhe,MESSAGE:z5}=Ri();dhe.exports=vit((e,{stack:t,cause:r})=>{if(e instanceof Error){let i=Object.assign({},e,{level:e.level,[uhe]:e[uhe]||e.level,message:e.message,[z5]:e[z5]||e.message});return t&&(i.stack=e.stack),r&&(i.cause=e.cause),i}if(!(e.message instanceof Error))return e;let n=e.message;return Object.assign(e,n),e.message=n.message,e[z5]=n.message,t&&(e.stack=n.stack),r&&(e.cause=n.cause),e})});var j5=x((xRt,AR)=>{"use strict";var{configs:Eit,LEVEL:hhe,MESSAGE:J5}=Ri(),pR=class e{constructor(t={levels:Eit.npm.levels}){this.paddings=e.paddingForLevels(t.levels,t.filler),this.options=t}static getLongestLevel(t){let r=Object.keys(t).map(n=>n.length);return Math.max(...r)}static paddingForLevel(t,r,n){let i=n+1-t.length,s=Math.floor(i/r.length);return`${r}${r.repeat(s)}`.slice(0,i)}static paddingForLevels(t,r=" "){let n=e.getLongestLevel(t);return Object.keys(t).reduce((i,s)=>(i[s]=e.paddingForLevel(s,r,n),i),{})}transform(t,r){return t.message=`${this.paddings[t[hhe]]}${t.message}`,t[J5]&&(t[J5]=`${this.paddings[t[hhe]]}${t[J5]}`),t}};AR.exports=e=>new pR(e);AR.exports.Padder=AR.exports.Format=pR});var ghe=x((_Rt,Z5)=>{"use strict";var{Colorizer:bit}=gR(),{Padder:xit}=j5(),{configs:_it,MESSAGE:wit}=Ri(),mR=class{constructor(t={}){t.levels||(t.levels=_it.cli.levels),this.colorizer=new bit(t),this.padder=new xit(t),this.options=t}transform(t,r){return this.colorizer.transform(this.padder.transform(t,r),r),t[wit]=`${t.level}:${t.message}`,t}};Z5.exports=e=>new mR(e);Z5.exports.Format=mR});var Ahe=x((wRt,X5)=>{"use strict";var Iit=jo();function phe(e){if(e.every(Sit))return t=>{let r=t;for(let n=0;n<e.length;n++)if(r=e[n].transform(r,e[n].options),!r)return!1;return r}}function Sit(e){if(typeof e.transform!="function")throw new Error(["No transform function found on format. Did you create a format instance?","const myFormat = format(formatFn);","const instance = myFormat();"].join(`
`));return!0}X5.exports=(...e)=>{let t=Iit(phe(e)),r=t();return r.Format=t.Format,r};X5.exports.cascade=phe});var ox=x((nH,vhe)=>{"use strict";var{hasOwnProperty:yR}=Object.prototype,Zp=rH();Zp.configure=rH;Zp.stringify=Zp;Zp.default=Zp;nH.stringify=Zp;nH.configure=rH;vhe.exports=Zp;var Bit=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]|[\ud800-\udbff](?![\udc00-\udfff])|(?:[^\ud800-\udbff]|^)[\udc00-\udfff]/;function Qh(e){return e.length<5e3&&!Bit.test(e)?`"${e}"`:JSON.stringify(e)}function eH(e){if(e.length>200)return e.sort();for(let t=1;t<e.length;t++){let r=e[t],n=t;for(;n!==0&&e[n-1]>r;)e[n]=e[n-1],n--;e[n]=r}return e}var Dit=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Object.getPrototypeOf(new Int8Array)),Symbol.toStringTag).get;function tH(e){return Dit.call(e)!==void 0&&e.length!==0}function mhe(e,t,r){e.length<r&&(r=e.length);let n=t===","?"":" ",i=`"0":${n}${e[0]}`;for(let s=1;s<r;s++)i+=`${t}"${s}":${n}${e[s]}`;return i}function Tit(e){if(yR.call(e,"circularValue")){let t=e.circularValue;if(typeof t=="string")return`"${t}"`;if(t==null)return t;if(t===Error||t===TypeError)return{toString(){throw new TypeError("Converting circular structure to JSON")}};throw new TypeError('The "circularValue" argument must be of type string or the value null or undefined')}return'"[Circular]"'}function yhe(e,t){let r;if(yR.call(e,t)&&(r=e[t],typeof r!="boolean"))throw new TypeError(`The "${t}" argument must be of type boolean`);return r===void 0?!0:r}function Che(e,t){let r;if(yR.call(e,t)){if(r=e[t],typeof r!="number")throw new TypeError(`The "${t}" argument must be of type number`);if(!Number.isInteger(r))throw new TypeError(`The "${t}" argument must be an integer`);if(r<1)throw new RangeError(`The "${t}" argument must be >= 1`)}return r===void 0?1/0:r}function jp(e){return e===1?"1 item":`${e} items`}function Rit(e){let t=new Set;for(let r of e)(typeof r=="string"||typeof r=="number")&&t.add(String(r));return t}function kit(e){if(yR.call(e,"strict")){let t=e.strict;if(typeof t!="boolean")throw new TypeError('The "strict" argument must be of type boolean');if(t)return r=>{let n=`Object can not safely be stringified. Received type ${typeof r}`;throw typeof r!="function"&&(n+=` (${r.toString()})`),new Error(n)}}}function rH(e){e={...e};let t=kit(e);t&&(e.bigint===void 0&&(e.bigint=!1),"circularValue"in e||(e.circularValue=Error));let r=Tit(e),n=yhe(e,"bigint"),i=yhe(e,"deterministic"),s=Che(e,"maximumDepth"),o=Che(e,"maximumBreadth");function a(p,g,A,y,C,v){let b=g[p];switch(typeof b=="object"&&b!==null&&typeof b.toJSON=="function"&&(b=b.toJSON(p)),b=y.call(g,p,b),typeof b){case"string":return Qh(b);case"object":{if(b===null)return"null";if(A.indexOf(b)!==-1)return r;let w="",B=",",F=v;if(Array.isArray(b)){if(b.length===0)return"[]";if(s<A.length+1)return'"[Array]"';A.push(b),C!==""&&(v+=C,w+=`
${v}`,B=`,
${v}`);let U=Math.min(b.length,o),ge=0;for(;ge<U-1;ge++){let N=a(String(ge),b,A,y,C,v);w+=N!==void 0?N:"null",w+=B}let Se=a(String(ge),b,A,y,C,v);if(w+=Se!==void 0?Se:"null",b.length-1>o){let N=b.length-o-1;w+=`${B}"... ${jp(N)} not stringified"`}return C!==""&&(w+=`
${F}`),A.pop(),`[${w}]`}let Q=Object.keys(b),W=Q.length;if(W===0)return"{}";if(s<A.length+1)return'"[Object]"';let Z="",$="";C!==""&&(v+=C,B=`,
${v}`,Z=" ");let ee=Math.min(W,o);i&&!tH(b)&&(Q=eH(Q)),A.push(b);for(let U=0;U<ee;U++){let ge=Q[U],Se=a(ge,b,A,y,C,v);Se!==void 0&&(w+=`${$}${Qh(ge)}:${Z}${Se}`,$=B)}if(W>o){let U=W-o;w+=`${$}"...":${Z}"${jp(U)} not stringified"`,$=B}return C!==""&&$.length>1&&(w=`
${v}${w}
${F}`),A.pop(),`{${w}}`}case"number":return isFinite(b)?String(b):t?t(b):"null";case"boolean":return b===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(b);default:return t?t(b):void 0}}function l(p,g,A,y,C,v){switch(typeof g=="object"&&g!==null&&typeof g.toJSON=="function"&&(g=g.toJSON(p)),typeof g){case"string":return Qh(g);case"object":{if(g===null)return"null";if(A.indexOf(g)!==-1)return r;let b=v,w="",B=",";if(Array.isArray(g)){if(g.length===0)return"[]";if(s<A.length+1)return'"[Array]"';A.push(g),C!==""&&(v+=C,w+=`
${v}`,B=`,
${v}`);let W=Math.min(g.length,o),Z=0;for(;Z<W-1;Z++){let ee=l(String(Z),g[Z],A,y,C,v);w+=ee!==void 0?ee:"null",w+=B}let $=l(String(Z),g[Z],A,y,C,v);if(w+=$!==void 0?$:"null",g.length-1>o){let ee=g.length-o-1;w+=`${B}"... ${jp(ee)} not stringified"`}return C!==""&&(w+=`
${b}`),A.pop(),`[${w}]`}A.push(g);let F="";C!==""&&(v+=C,B=`,
${v}`,F=" ");let Q="";for(let W of y){let Z=l(W,g[W],A,y,C,v);Z!==void 0&&(w+=`${Q}${Qh(W)}:${F}${Z}`,Q=B)}return C!==""&&Q.length>1&&(w=`
${v}${w}
${b}`),A.pop(),`{${w}}`}case"number":return isFinite(g)?String(g):t?t(g):"null";case"boolean":return g===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(g);default:return t?t(g):void 0}}function c(p,g,A,y,C){switch(typeof g){case"string":return Qh(g);case"object":{if(g===null)return"null";if(typeof g.toJSON=="function"){if(g=g.toJSON(p),typeof g!="object")return c(p,g,A,y,C);if(g===null)return"null"}if(A.indexOf(g)!==-1)return r;let v=C;if(Array.isArray(g)){if(g.length===0)return"[]";if(s<A.length+1)return'"[Array]"';A.push(g),C+=y;let Z=`
${C}`,$=`,
${C}`,ee=Math.min(g.length,o),U=0;for(;U<ee-1;U++){let Se=c(String(U),g[U],A,y,C);Z+=Se!==void 0?Se:"null",Z+=$}let ge=c(String(U),g[U],A,y,C);if(Z+=ge!==void 0?ge:"null",g.length-1>o){let Se=g.length-o-1;Z+=`${$}"... ${jp(Se)} not stringified"`}return Z+=`
${v}`,A.pop(),`[${Z}]`}let b=Object.keys(g),w=b.length;if(w===0)return"{}";if(s<A.length+1)return'"[Object]"';C+=y;let B=`,
${C}`,F="",Q="",W=Math.min(w,o);tH(g)&&(F+=mhe(g,B,o),b=b.slice(g.length),W-=g.length,Q=B),i&&(b=eH(b)),A.push(g);for(let Z=0;Z<W;Z++){let $=b[Z],ee=c($,g[$],A,y,C);ee!==void 0&&(F+=`${Q}${Qh($)}: ${ee}`,Q=B)}if(w>o){let Z=w-o;F+=`${Q}"...": "${jp(Z)} not stringified"`,Q=B}return Q!==""&&(F=`
${C}${F}
${v}`),A.pop(),`{${F}}`}case"number":return isFinite(g)?String(g):t?t(g):"null";case"boolean":return g===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(g);default:return t?t(g):void 0}}function u(p,g,A){switch(typeof g){case"string":return Qh(g);case"object":{if(g===null)return"null";if(typeof g.toJSON=="function"){if(g=g.toJSON(p),typeof g!="object")return u(p,g,A);if(g===null)return"null"}if(A.indexOf(g)!==-1)return r;let y="";if(Array.isArray(g)){if(g.length===0)return"[]";if(s<A.length+1)return'"[Array]"';A.push(g);let B=Math.min(g.length,o),F=0;for(;F<B-1;F++){let W=u(String(F),g[F],A);y+=W!==void 0?W:"null",y+=","}let Q=u(String(F),g[F],A);if(y+=Q!==void 0?Q:"null",g.length-1>o){let W=g.length-o-1;y+=`,"... ${jp(W)} not stringified"`}return A.pop(),`[${y}]`}let C=Object.keys(g),v=C.length;if(v===0)return"{}";if(s<A.length+1)return'"[Object]"';let b="",w=Math.min(v,o);tH(g)&&(y+=mhe(g,",",o),C=C.slice(g.length),w-=g.length,b=","),i&&(C=eH(C)),A.push(g);for(let B=0;B<w;B++){let F=C[B],Q=u(F,g[F],A);Q!==void 0&&(y+=`${b}${Qh(F)}:${Q}`,b=",")}if(v>o){let B=v-o;y+=`${b}"...":"${jp(B)} not stringified"`}return A.pop(),`{${y}}`}case"number":return isFinite(g)?String(g):t?t(g):"null";case"boolean":return g===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(g);default:return t?t(g):void 0}}function f(p,g,A){if(arguments.length>1){let y="";if(typeof A=="number"?y=" ".repeat(Math.min(A,10)):typeof A=="string"&&(y=A.slice(0,10)),g!=null){if(typeof g=="function")return a("",{"":p},[],g,y,"");if(Array.isArray(g))return l("",p,[],Rit(g),y,"")}if(y.length!==0)return c("",p,[],y,"")}return u("",p,[])}return f}});var iH=x((IRt,Ehe)=>{"use strict";var Fit=jo(),{MESSAGE:Mit}=Ri(),Qit=ox();function Nit(e,t){return typeof t=="bigint"?t.toString():t}Ehe.exports=Fit((e,t)=>{let r=Qit.configure(t);return e[Mit]=r(e,t.replacer||Nit,t.space),e})});var xhe=x((SRt,bhe)=>{"use strict";var Pit=jo();bhe.exports=Pit((e,t)=>t.message?(e.message=`[${t.label}] ${e.message}`,e):(e.label=t.label,e))});var whe=x((BRt,_he)=>{"use strict";var Lit=jo(),{MESSAGE:Uit}=Ri(),Oit=ox();_he.exports=Lit(e=>{let t={};return e.message&&(t["@message"]=e.message,delete e.message),e.timestamp&&(t["@timestamp"]=e.timestamp,delete e.timestamp),t["@fields"]=e,e[Uit]=Oit(t),e})});var She=x((DRt,Ihe)=>{"use strict";var qit=jo();function Vit(e,t,r){let n=t.reduce((s,o)=>(s[o]=e[o],delete e[o],s),{}),i=Object.keys(e).reduce((s,o)=>(s[o]=e[o],delete e[o],s),{});return Object.assign(e,n,{[r]:i}),e}function Hit(e,t,r){return e[r]=t.reduce((n,i)=>(n[i]=e[i],delete e[i],n),{}),e}Ihe.exports=qit((e,t={})=>{let r="metadata";t.key&&(r=t.key);let n=[];return!t.fillExcept&&!t.fillWith&&(n.push("level"),n.push("message")),t.fillExcept&&(n=t.fillExcept),n.length>0?Vit(e,n,r):t.fillWith?Hit(e,t.fillWith,r):e})});var vR=x((TRt,Bhe)=>{"use strict";var yy=1e3,Cy=yy*60,vy=Cy*60,Xp=vy*24,Wit=Xp*7,Git=Xp*365.25;Bhe.exports=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return $it(e);if(r==="number"&&isFinite(e))return t.long?Kit(e):Yit(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function $it(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*Git;case"weeks":case"week":case"w":return r*Wit;case"days":case"day":case"d":return r*Xp;case"hours":case"hour":case"hrs":case"hr":case"h":return r*vy;case"minutes":case"minute":case"mins":case"min":case"m":return r*Cy;case"seconds":case"second":case"secs":case"sec":case"s":return r*yy;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function Yit(e){var t=Math.abs(e);return t>=Xp?Math.round(e/Xp)+"d":t>=vy?Math.round(e/vy)+"h":t>=Cy?Math.round(e/Cy)+"m":t>=yy?Math.round(e/yy)+"s":e+"ms"}function Kit(e){var t=Math.abs(e);return t>=Xp?CR(e,t,Xp,"day"):t>=vy?CR(e,t,vy,"hour"):t>=Cy?CR(e,t,Cy,"minute"):t>=yy?CR(e,t,yy,"second"):e+" ms"}function CR(e,t,r,n){var i=t>=r*1.5;return Math.round(e/r)+" "+n+(i?"s":"")}});var The=x((ax,Dhe)=>{"use strict";var zit=jo(),Jit=vR();Dhe.exports=zit(e=>{let t=+new Date;return ax.diff=t-(ax.prevTime||t),ax.prevTime=t,e.ms=`+${Jit(ax.diff)}`,e})});var Fhe=x((RRt,khe)=>{"use strict";var jit=require("util").inspect,Zit=jo(),{LEVEL:Xit,MESSAGE:Rhe,SPLAT:est}=Ri();khe.exports=Zit((e,t={})=>{let r=Object.assign({},e);return delete r[Xit],delete r[Rhe],delete r[est],e[Rhe]=jit(r,!1,t.depth||null,t.colorize),e})});var Mhe=x((kRt,bR)=>{"use strict";var{MESSAGE:tst}=Ri(),ER=class{constructor(t){this.template=t}transform(t){return t[tst]=this.template(t),t}};bR.exports=e=>new ER(e);bR.exports.Printf=bR.exports.Format=ER});var Phe=x((FRt,Nhe)=>{"use strict";var rst=jo(),{MESSAGE:Qhe}=Ri(),nst=ox();Nhe.exports=rst(e=>{let t=nst(Object.assign({},e,{level:void 0,message:void 0,splat:void 0})),r=e.padding&&e.padding[e.level]||"";return t!=="{}"?e[Qhe]=`${e.level}:${r} ${e.message} ${t}`:e[Qhe]=`${e.level}:${r} ${e.message}`,e})});var Ohe=x((MRt,Uhe)=>{"use strict";var ist=require("util"),{SPLAT:Lhe}=Ri(),sst=/%[scdjifoO%]/g,ost=/%%/g,sH=class{constructor(t){this.options=t}_splat(t,r){let n=t.message,i=t[Lhe]||t.splat||[],s=n.match(ost),o=s&&s.length||0,l=r.length-o-i.length,c=l<0?i.splice(l,-1*l):[],u=c.length;if(u)for(let f=0;f<u;f++)Object.assign(t,c[f]);return t.message=ist.format(n,...i),t}transform(t){let r=t.message,n=t[Lhe]||t.splat;if(!n||!n.length)return t;let i=r&&r.match&&r.match(sst);if(!i&&(n||n.length)){let s=n.length>1?n.splice(0):n,o=s.length;if(o)for(let a=0;a<o;a++)Object.assign(t,s[a]);return t}return i?this._splat(t,i):t}};Uhe.exports=e=>new sH(e)});var Vhe=x((xR,qhe)=>{"use strict";(function(e,t){typeof xR=="object"&&typeof qhe<"u"?t(xR):typeof define=="function"&&define.amd?define(["exports"],t):t(e.fecha={})})(xR,function(e){"use strict";var t=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,r="\\d\\d?",n="\\d\\d",i="\\d{3}",s="\\d{4}",o="[^\\s]+",a=/\[([^]*?)\]/gm;function l(z,ne){for(var Ke=[],It=0,ye=z.length;It<ye;It++)Ke.push(z[It].substr(0,ne));return Ke}var c=function(z){return function(ne,Ke){var It=Ke[z].map(function(Lt){return Lt.toLowerCase()}),ye=It.indexOf(ne.toLowerCase());return ye>-1?ye:null}};function u(z){for(var ne=[],Ke=1;Ke<arguments.length;Ke++)ne[Ke-1]=arguments[Ke];for(var It=0,ye=ne;It<ye.length;It++){var Lt=ye[It];for(var Zt in Lt)z[Zt]=Lt[Zt]}return z}var f=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],p=["January","February","March","April","May","June","July","August","September","October","November","December"],g=l(p,3),A=l(f,3),y={dayNamesShort:A,dayNames:f,monthNamesShort:g,monthNames:p,amPm:["am","pm"],DoFn:function(z){return z+["th","st","nd","rd"][z%10>3?0:(z-z%10!==10?1:0)*z%10]}},C=u({},y),v=function(z){return C=u(C,z)},b=function(z){return z.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},w=function(z,ne){for(ne===void 0&&(ne=2),z=String(z);z.length<ne;)z="0"+z;return z},B={D:function(z){return String(z.getDate())},DD:function(z){return w(z.getDate())},Do:function(z,ne){return ne.DoFn(z.getDate())},d:function(z){return String(z.getDay())},dd:function(z){return w(z.getDay())},ddd:function(z,ne){return ne.dayNamesShort[z.getDay()]},dddd:function(z,ne){return ne.dayNames[z.getDay()]},M:function(z){return String(z.getMonth()+1)},MM:function(z){return w(z.getMonth()+1)},MMM:function(z,ne){return ne.monthNamesShort[z.getMonth()]},MMMM:function(z,ne){return ne.monthNames[z.getMonth()]},YY:function(z){return w(String(z.getFullYear()),4).substr(2)},YYYY:function(z){return w(z.getFullYear(),4)},h:function(z){return String(z.getHours()%12||12)},hh:function(z){return w(z.getHours()%12||12)},H:function(z){return String(z.getHours())},HH:function(z){return w(z.getHours())},m:function(z){return String(z.getMinutes())},mm:function(z){return w(z.getMinutes())},s:function(z){return String(z.getSeconds())},ss:function(z){return w(z.getSeconds())},S:function(z){return String(Math.round(z.getMilliseconds()/100))},SS:function(z){return w(Math.round(z.getMilliseconds()/10),2)},SSS:function(z){return w(z.getMilliseconds(),3)},a:function(z,ne){return z.getHours()<12?ne.amPm[0]:ne.amPm[1]},A:function(z,ne){return z.getHours()<12?ne.amPm[0].toUpperCase():ne.amPm[1].toUpperCase()},ZZ:function(z){var ne=z.getTimezoneOffset();return(ne>0?"-":"+")+w(Math.floor(Math.abs(ne)/60)*100+Math.abs(ne)%60,4)},Z:function(z){var ne=z.getTimezoneOffset();return(ne>0?"-":"+")+w(Math.floor(Math.abs(ne)/60),2)+":"+w(Math.abs(ne)%60,2)}},F=function(z){return+z-1},Q=[null,r],W=[null,o],Z=["isPm",o,function(z,ne){var Ke=z.toLowerCase();return Ke===ne.amPm[0]?0:Ke===ne.amPm[1]?1:null}],$=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(z){var ne=(z+"").match(/([+-]|\d\d)/gi);if(ne){var Ke=+ne[1]*60+parseInt(ne[2],10);return ne[0]==="+"?Ke:-Ke}return 0}],ee={D:["day",r],DD:["day",n],Do:["day",r+o,function(z){return parseInt(z,10)}],M:["month",r,F],MM:["month",n,F],YY:["year",n,function(z){var ne=new Date,Ke=+(""+ne.getFullYear()).substr(0,2);return+(""+(+z>68?Ke-1:Ke)+z)}],h:["hour",r,void 0,"isPm"],hh:["hour",n,void 0,"isPm"],H:["hour",r],HH:["hour",n],m:["minute",r],mm:["minute",n],s:["second",r],ss:["second",n],YYYY:["year",s],S:["millisecond","\\d",function(z){return+z*100}],SS:["millisecond",n,function(z){return+z*10}],SSS:["millisecond",i],d:Q,dd:Q,ddd:W,dddd:W,MMM:["month",o,c("monthNamesShort")],MMMM:["month",o,c("monthNames")],a:Z,A:Z,ZZ:$,Z:$},U={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},ge=function(z){return u(U,z)},Se=function(z,ne,Ke){if(ne===void 0&&(ne=U.default),Ke===void 0&&(Ke={}),typeof z=="number"&&(z=new Date(z)),Object.prototype.toString.call(z)!=="[object Date]"||isNaN(z.getTime()))throw new Error("Invalid Date pass to format");ne=U[ne]||ne;var It=[];ne=ne.replace(a,function(Lt,Zt){return It.push(Zt),"@@@"});var ye=u(u({},C),Ke);return ne=ne.replace(t,function(Lt){return B[Lt](z,ye)}),ne.replace(/@@@/g,function(){return It.shift()})};function N(z,ne,Ke){if(Ke===void 0&&(Ke={}),typeof ne!="string")throw new Error("Invalid format in fecha parse");if(ne=U[ne]||ne,z.length>1e3)return null;var It=new Date,ye={year:It.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},Lt=[],Zt=[],Rt=ne.replace(a,function(bt,ln){return Zt.push(b(ln)),"@@@"}),de={},kr={};Rt=b(Rt).replace(t,function(bt){var ln=ee[bt],_n=ln[0],_i=ln[1],eo=ln[3];if(de[_n])throw new Error("Invalid format. "+_n+" specified twice in format");return de[_n]=!0,eo&&(kr[eo]=!0),Lt.push(ln),"("+_i+")"}),Object.keys(kr).forEach(function(bt){if(!de[bt])throw new Error("Invalid format. "+bt+" is required in specified format")}),Rt=Rt.replace(/@@@/g,function(){return Zt.shift()});var ir=z.match(new RegExp(Rt,"i"));if(!ir)return null;for(var Lr=u(u({},C),Ke),He=1;He<ir.length;He++){var sn=Lt[He-1],Ur=sn[0],fr=sn[2],be=fr?fr(ir[He],Lr):+ir[He];if(be==null)return null;ye[Ur]=be}ye.isPm===1&&ye.hour!=null&&+ye.hour!=12?ye.hour=+ye.hour+12:ye.isPm===0&&+ye.hour==12&&(ye.hour=0);var Fr;if(ye.timezoneOffset==null){Fr=new Date(ye.year,ye.month,ye.day,ye.hour,ye.minute,ye.second,ye.millisecond);for(var fe=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],He=0,Ee=fe.length;He<Ee;He++)if(de[fe[He][0]]&&ye[fe[He][0]]!==Fr[fe[He][1]]())return null}else if(Fr=new Date(Date.UTC(ye.year,ye.month,ye.day,ye.hour,ye.minute-ye.timezoneOffset,ye.second,ye.millisecond)),ye.month>11||ye.month<0||ye.day>31||ye.day<1||ye.hour>23||ye.hour<0||ye.minute>59||ye.minute<0||ye.second>59||ye.second<0)return null;return Fr}var se={format:Se,parse:N,defaultI18n:y,setGlobalDateI18n:v,setGlobalDateMasks:ge};e.assign=u,e.default=se,e.format=Se,e.parse=N,e.defaultI18n=y,e.setGlobalDateI18n=v,e.setGlobalDateMasks=ge,Object.defineProperty(e,"__esModule",{value:!0})})});var Whe=x((QRt,Hhe)=>{"use strict";var ast=Vhe(),lst=jo();Hhe.exports=lst((e,t={})=>(t.format&&(e.timestamp=typeof t.format=="function"?t.format():ast.format(new Date,t.format)),e.timestamp||(e.timestamp=new Date().toISOString()),t.alias&&(e[t.alias]=e.timestamp),e))});var $he=x((NRt,Ghe)=>{"use strict";var oH=V5(),cst=jo(),{MESSAGE:aH}=Ri();Ghe.exports=cst((e,t)=>(t.level!==!1&&(e.level=oH.strip(e.level)),t.message!==!1&&(e.message=oH.strip(String(e.message))),t.raw!==!1&&e[aH]&&(e[aH]=oH.strip(String(e[aH]))),e))});var cH=x(lH=>{"use strict";var ust=lH.format=jo();lH.levels=ahe();function Ds(e,t){Object.defineProperty(ust,e,{get(){return t()},configurable:!0})}Ds("align",function(){return che()});Ds("errors",function(){return fhe()});Ds("cli",function(){return ghe()});Ds("combine",function(){return Ahe()});Ds("colorize",function(){return gR()});Ds("json",function(){return iH()});Ds("label",function(){return xhe()});Ds("logstash",function(){return whe()});Ds("metadata",function(){return She()});Ds("ms",function(){return The()});Ds("padLevels",function(){return j5()});Ds("prettyPrint",function(){return Fhe()});Ds("printf",function(){return Mhe()});Ds("simple",function(){return Phe()});Ds("splat",function(){return Ohe()});Ds("timestamp",function(){return Whe()});Ds("uncolorize",function(){return $he()})});var uH=x(_R=>{"use strict";var{format:Yhe}=require("util");_R.warn={deprecated(e){return()=>{throw new Error(Yhe("{ %s } was removed in winston@3.0.0.",e))}},useFormat(e){return()=>{throw new Error([Yhe("{ %s } was removed in winston@3.0.0.",e),"Use a custom winston.format = winston.format(function) instead."].join(`
`))}},forFunctions(e,t,r){r.forEach(n=>{e[n]=_R.warn[t](n)})},forProperties(e,t,r){r.forEach(n=>{let i=_R.warn[t](n);Object.defineProperty(e,n,{get:i,set:i})})}}});var Khe=x((URt,dst)=>{dst.exports={name:"winston",description:"A logger for just about everything.",version:"3.11.0",author:"Charlie Robbins <charlie.robbins@gmail.com>",maintainers:["David Hyde <dabh@alumni.stanford.edu>"],repository:{type:"git",url:"https://github.com/winstonjs/winston.git"},keywords:["winston","logger","logging","logs","sysadmin","bunyan","pino","loglevel","tools","json","stream"],dependencies:{"@dabh/diagnostics":"^2.0.2","@colors/colors":"^1.6.0",async:"^3.2.3","is-stream":"^2.0.0",logform:"^2.4.0","one-time":"^1.0.0","readable-stream":"^3.4.0","safe-stable-stringify":"^2.3.1","stack-trace":"0.0.x","triple-beam":"^1.3.0","winston-transport":"^4.5.0"},devDependencies:{"@babel/cli":"^7.17.0","@babel/core":"^7.17.2","@babel/preset-env":"^7.16.7","@dabh/eslint-config-populist":"^5.0.0","@types/node":"^20.3.1","abstract-winston-transport":"^0.5.1",assume:"^2.2.0","cross-spawn-async":"^2.2.5",eslint:"^8.9.0",hock:"^1.4.1",mocha:"8.1.3",nyc:"^15.1.0",rimraf:"^5.0.5",split2:"^4.1.0","std-mocks":"^1.0.1",through2:"^4.0.2","winston-compat":"^0.1.5"},main:"./lib/winston.js",browser:"./dist/winston",types:"./index.d.ts",scripts:{lint:"eslint lib/*.js lib/winston/*.js lib/winston/**/*.js --resolve-plugins-relative-to ./node_modules/@dabh/eslint-config-populist",test:"mocha","test:coverage":"nyc npm run test:unit","test:unit":"mocha test/unit","test:integration":"mocha test/integration",build:"rimraf dist && babel lib -d dist",prepublishOnly:"npm run build"},engines:{node:">= 12.0.0"},license:"MIT"}});var Jhe=x((ORt,zhe)=>{"use strict";zhe.exports=require("util").deprecate});var dH=x((qRt,jhe)=>{"use strict";jhe.exports=require("stream")});var hH=x((VRt,Xhe)=>{"use strict";function fst(e,t){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(fH,this,e)):process.nextTick(fH,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(s){!t&&s?r._writableState?r._writableState.errorEmitted?process.nextTick(wR,r):(r._writableState.errorEmitted=!0,process.nextTick(Zhe,r,s)):process.nextTick(Zhe,r,s):t?(process.nextTick(wR,r),t(s)):process.nextTick(wR,r)}),this)}function Zhe(e,t){fH(e,t),wR(e)}function wR(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function hst(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function fH(e,t){e.emit("error",t)}function gst(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}Xhe.exports={destroy:fst,undestroy:hst,errorOrDestroy:gst}});var Nh=x((HRt,rge)=>{"use strict";var tge={};function Bl(e,t,r){r||(r=Error);function n(s,o,a){return typeof t=="string"?t:t(s,o,a)}class i extends r{constructor(o,a,l){super(n(o,a,l))}}i.prototype.name=r.name,i.prototype.code=e,tge[e]=i}function ege(e,t){if(Array.isArray(e)){let r=e.length;return e=e.map(n=>String(n)),r>2?`one of ${t} ${e.slice(0,r-1).join(", ")}, or `+e[r-1]:r===2?`one of ${t} ${e[0]} or ${e[1]}`:`of ${t} ${e[0]}`}else return`of ${t} ${String(e)}`}function pst(e,t,r){return e.substr(!r||r<0?0:+r,t.length)===t}function Ast(e,t,r){return(r===void 0||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}function mst(e,t,r){return typeof r!="number"&&(r=0),r+t.length>e.length?!1:e.indexOf(t,r)!==-1}Bl("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError);Bl("ERR_INVALID_ARG_TYPE",function(e,t,r){let n;typeof t=="string"&&pst(t,"not ")?(n="must not be",t=t.replace(/^not /,"")):n="must be";let i;if(Ast(e," argument"))i=`The ${e} ${n} ${ege(t,"type")}`;else{let s=mst(e,".")?"property":"argument";i=`The "${e}" ${s} ${n} ${ege(t,"type")}`}return i+=`. Received type ${typeof r}`,i},TypeError);Bl("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");Bl("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"});Bl("ERR_STREAM_PREMATURE_CLOSE","Premature close");Bl("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"});Bl("ERR_MULTIPLE_CALLBACK","Callback called multiple times");Bl("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");Bl("ERR_STREAM_WRITE_AFTER_END","write after end");Bl("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Bl("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError);Bl("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");rge.exports.codes=tge});var gH=x((WRt,nge)=>{"use strict";var yst=Nh().codes.ERR_INVALID_OPT_VALUE;function Cst(e,t,r){return e.highWaterMark!=null?e.highWaterMark:t?e[r]:null}function vst(e,t,r,n){var i=Cst(t,n,r);if(i!=null){if(!(isFinite(i)&&Math.floor(i)===i)||i<0){var s=n?r:"highWaterMark";throw new yst(s,i)}return Math.floor(i)}return e.objectMode?16:16*1024}nge.exports={getHighWaterMark:vst}});var ige=x((GRt,pH)=>{"use strict";typeof Object.create=="function"?pH.exports=function(t,r){r&&(t.super_=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:pH.exports=function(t,r){if(r){t.super_=r;var n=function(){};n.prototype=r.prototype,t.prototype=new n,t.prototype.constructor=t}}});var Ey=x(($Rt,mH)=>{"use strict";try{if(AH=require("util"),typeof AH.inherits!="function")throw"";mH.exports=AH.inherits}catch{mH.exports=ige()}var AH});var uge=x((YRt,cge)=>{"use strict";function sge(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function oge(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sge(Object(r),!0).forEach(function(n){Est(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sge(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Est(e,t,r){return t=lge(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bst(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function age(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,lge(n.key),n)}}function xst(e,t,r){return t&&age(e.prototype,t),r&&age(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function lge(e){var t=_st(e,"string");return typeof t=="symbol"?t:String(t)}function _st(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wst=require("buffer"),IR=wst.Buffer,Ist=require("util"),yH=Ist.inspect,Sst=yH&&yH.custom||"inspect";function Bst(e,t,r){IR.prototype.copy.call(e,t,r)}cge.exports=function(){function e(){bst(this,e),this.head=null,this.tail=null,this.length=0}return xst(e,[{key:"push",value:function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}},{key:"unshift",value:function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}},{key:"shift",value:function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(r){if(this.length===0)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=r+n.data;return i}},{key:"concat",value:function(r){if(this.length===0)return IR.alloc(0);for(var n=IR.allocUnsafe(r>>>0),i=this.head,s=0;i;)Bst(i.data,n,s),s+=i.data.length,i=i.next;return n}},{key:"consume",value:function(r,n){var i;return r<this.head.data.length?(i=this.head.data.slice(0,r),this.head.data=this.head.data.slice(r)):r===this.head.data.length?i=this.shift():i=n?this._getString(r):this._getBuffer(r),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(r){var n=this.head,i=1,s=n.data;for(r-=s.length;n=n.next;){var o=n.data,a=r>o.length?o.length:r;if(a===o.length?s+=o:s+=o.slice(0,r),r-=a,r===0){a===o.length?(++i,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=o.slice(a));break}++i}return this.length-=i,s}},{key:"_getBuffer",value:function(r){var n=IR.allocUnsafe(r),i=this.head,s=1;for(i.data.copy(n),r-=i.data.length;i=i.next;){var o=i.data,a=r>o.length?o.length:r;if(o.copy(n,n.length-r,0,a),r-=a,r===0){a===o.length?(++s,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=o.slice(a));break}++s}return this.length-=s,n}},{key:Sst,value:function(r,n){return yH(this,oge(oge({},n),{},{depth:0,customInspect:!1}))}}]),e}()});var hge=x((CH,fge)=>{"use strict";var SR=require("buffer"),Su=SR.Buffer;function dge(e,t){for(var r in e)t[r]=e[r]}Su.from&&Su.alloc&&Su.allocUnsafe&&Su.allocUnsafeSlow?fge.exports=SR:(dge(SR,CH),CH.Buffer=eA);function eA(e,t,r){return Su(e,t,r)}eA.prototype=Object.create(Su.prototype);dge(Su,eA);eA.from=function(e,t,r){if(typeof e=="number")throw new TypeError("Argument must not be a number");return Su(e,t,r)};eA.alloc=function(e,t,r){if(typeof e!="number")throw new TypeError("Argument must be a number");var n=Su(e);return t!==void 0?typeof r=="string"?n.fill(t,r):n.fill(t):n.fill(0),n};eA.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return Su(e)};eA.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return SR.SlowBuffer(e)}});var bH=x(pge=>{"use strict";var EH=hge().Buffer,gge=EH.isEncoding||function(e){switch(e=""+e,e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Dst(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function Tst(e){var t=Dst(e);if(typeof t!="string"&&(EH.isEncoding===gge||!gge(e)))throw new Error("Unknown encoding: "+e);return t||e}pge.StringDecoder=lx;function lx(e){this.encoding=Tst(e);var t;switch(this.encoding){case"utf16le":this.text=Nst,this.end=Pst,t=4;break;case"utf8":this.fillLast=Fst,t=4;break;case"base64":this.text=Lst,this.end=Ust,t=3;break;default:this.write=Ost,this.end=qst;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=EH.allocUnsafe(t)}lx.prototype.write=function(e){if(e.length===0)return"";var t,r;if(this.lastNeed){if(t=this.fillLast(e),t===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""};lx.prototype.end=Qst;lx.prototype.text=Mst;lx.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length};function vH(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}function Rst(e,t,r){var n=t.length-1;if(n<r)return 0;var i=vH(t[n]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--n<r||i===-2?0:(i=vH(t[n]),i>=0?(i>0&&(e.lastNeed=i-2),i):--n<r||i===-2?0:(i=vH(t[n]),i>=0?(i>0&&(i===2?i=0:e.lastNeed=i-3),i):0))}function kst(e,t,r){if((t[0]&192)!==128)return e.lastNeed=0,"\uFFFD";if(e.lastNeed>1&&t.length>1){if((t[1]&192)!==128)return e.lastNeed=1,"\uFFFD";if(e.lastNeed>2&&t.length>2&&(t[2]&192)!==128)return e.lastNeed=2,"\uFFFD"}}function Fst(e){var t=this.lastTotal-this.lastNeed,r=kst(this,e,t);if(r!==void 0)return r;if(this.lastNeed<=e.length)return e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length}function Mst(e,t){var r=Rst(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)}function Qst(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\uFFFD":t}function Nst(e,t){if((e.length-t)%2===0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function Pst(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function Lst(e,t){var r=(e.length-t)%3;return r===0?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function Ust(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function Ost(e){return e.toString(this.encoding)}function qst(e){return e&&e.length?this.write(e):""}});var BR=x((zRt,yge)=>{"use strict";var Age=Nh().codes.ERR_STREAM_PREMATURE_CLOSE;function Vst(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];e.apply(this,n)}}}function Hst(){}function Wst(e){return e.setHeader&&typeof e.abort=="function"}function mge(e,t,r){if(typeof t=="function")return mge(e,null,t);t||(t={}),r=Vst(r||Hst);var n=t.readable||t.readable!==!1&&e.readable,i=t.writable||t.writable!==!1&&e.writable,s=function(){e.writable||a()},o=e._writableState&&e._writableState.finished,a=function(){i=!1,o=!0,n||r.call(e)},l=e._readableState&&e._readableState.endEmitted,c=function(){n=!1,l=!0,i||r.call(e)},u=function(A){r.call(e,A)},f=function(){var A;if(n&&!l)return(!e._readableState||!e._readableState.ended)&&(A=new Age),r.call(e,A);if(i&&!o)return(!e._writableState||!e._writableState.ended)&&(A=new Age),r.call(e,A)},p=function(){e.req.on("finish",a)};return Wst(e)?(e.on("complete",a),e.on("abort",f),e.req?p():e.on("request",p)):i&&!e._writableState&&(e.on("end",s),e.on("close",s)),e.on("end",c),e.on("finish",a),t.error!==!1&&e.on("error",u),e.on("close",f),function(){e.removeListener("complete",a),e.removeListener("abort",f),e.removeListener("request",p),e.req&&e.req.removeListener("finish",a),e.removeListener("end",s),e.removeListener("close",s),e.removeListener("finish",a),e.removeListener("end",c),e.removeListener("error",u),e.removeListener("close",f)}}yge.exports=mge});var vge=x((JRt,Cge)=>{"use strict";var DR;function Ph(e,t,r){return t=Gst(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Gst(e){var t=$st(e,"string");return typeof t=="symbol"?t:String(t)}function $st(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Yst=BR(),Lh=Symbol("lastResolve"),tA=Symbol("lastReject"),cx=Symbol("error"),TR=Symbol("ended"),rA=Symbol("lastPromise"),xH=Symbol("handlePromise"),nA=Symbol("stream");function Uh(e,t){return{value:e,done:t}}function Kst(e){var t=e[Lh];if(t!==null){var r=e[nA].read();r!==null&&(e[rA]=null,e[Lh]=null,e[tA]=null,t(Uh(r,!1)))}}function zst(e){process.nextTick(Kst,e)}function Jst(e,t){return function(r,n){e.then(function(){if(t[TR]){r(Uh(void 0,!0));return}t[xH](r,n)},n)}}var jst=Object.getPrototypeOf(function(){}),Zst=Object.setPrototypeOf((DR={get stream(){return this[nA]},next:function(){var t=this,r=this[cx];if(r!==null)return Promise.reject(r);if(this[TR])return Promise.resolve(Uh(void 0,!0));if(this[nA].destroyed)return new Promise(function(o,a){process.nextTick(function(){t[cx]?a(t[cx]):o(Uh(void 0,!0))})});var n=this[rA],i;if(n)i=new Promise(Jst(n,this));else{var s=this[nA].read();if(s!==null)return Promise.resolve(Uh(s,!1));i=new Promise(this[xH])}return this[rA]=i,i}},Ph(DR,Symbol.asyncIterator,function(){return this}),Ph(DR,"return",function(){var t=this;return new Promise(function(r,n){t[nA].destroy(null,function(i){if(i){n(i);return}r(Uh(void 0,!0))})})}),DR),jst),Xst=function(t){var r,n=Object.create(Zst,(r={},Ph(r,nA,{value:t,writable:!0}),Ph(r,Lh,{value:null,writable:!0}),Ph(r,tA,{value:null,writable:!0}),Ph(r,cx,{value:null,writable:!0}),Ph(r,TR,{value:t._readableState.endEmitted,writable:!0}),Ph(r,xH,{value:function(s,o){var a=n[nA].read();a?(n[rA]=null,n[Lh]=null,n[tA]=null,s(Uh(a,!1))):(n[Lh]=s,n[tA]=o)},writable:!0}),r));return n[rA]=null,Yst(t,function(i){if(i&&i.code!=="ERR_STREAM_PREMATURE_CLOSE"){var s=n[tA];s!==null&&(n[rA]=null,n[Lh]=null,n[tA]=null,s(i)),n[cx]=i;return}var o=n[Lh];o!==null&&(n[rA]=null,n[Lh]=null,n[tA]=null,o(Uh(void 0,!0))),n[TR]=!0}),t.on("readable",zst.bind(null,n)),n};Cge.exports=Xst});var _ge=x((jRt,xge)=>{"use strict";function Ege(e,t,r,n,i,s,o){try{var a=e[s](o),l=a.value}catch(c){r(c);return}a.done?t(l):Promise.resolve(l).then(n,i)}function eot(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var s=e.apply(t,r);function o(l){Ege(s,n,i,o,a,"next",l)}function a(l){Ege(s,n,i,o,a,"throw",l)}o(void 0)})}}function bge(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function tot(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bge(Object(r),!0).forEach(function(n){rot(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bge(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rot(e,t,r){return t=not(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function not(e){var t=iot(e,"string");return typeof t=="symbol"?t:String(t)}function iot(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sot=Nh().codes.ERR_INVALID_ARG_TYPE;function oot(e,t,r){var n;if(t&&typeof t.next=="function")n=t;else if(t&&t[Symbol.asyncIterator])n=t[Symbol.asyncIterator]();else if(t&&t[Symbol.iterator])n=t[Symbol.iterator]();else throw new sot("iterable",["Iterable"],t);var i=new e(tot({objectMode:!0},r)),s=!1;i._read=function(){s||(s=!0,o())};function o(){return a.apply(this,arguments)}function a(){return a=eot(function*(){try{var l=yield n.next(),c=l.value,u=l.done;u?i.push(null):i.push(yield c)?o():s=!1}catch(f){i.destroy(f)}}),a.apply(this,arguments)}return i}xge.exports=oot});var FH=x((XRt,Mge)=>{"use strict";Mge.exports=Rr;var by;Rr.ReadableState=Bge;var ZRt=require("events").EventEmitter,Sge=function(t,r){return t.listeners(r).length},dx=dH(),RR=require("buffer").Buffer,aot=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function lot(e){return RR.from(e)}function cot(e){return RR.isBuffer(e)||e instanceof aot}var _H=require("util"),nr;_H&&_H.debuglog?nr=_H.debuglog("stream"):nr=function(){};var uot=uge(),RH=hH(),dot=gH(),fot=dot.getHighWaterMark,kR=Nh().codes,hot=kR.ERR_INVALID_ARG_TYPE,got=kR.ERR_STREAM_PUSH_AFTER_EOF,pot=kR.ERR_METHOD_NOT_IMPLEMENTED,Aot=kR.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,xy,wH,IH;Ey()(Rr,dx);var ux=RH.errorOrDestroy,SH=["error","close","destroy","pause","resume"];function mot(e,t,r){if(typeof e.prependListener=="function")return e.prependListener(t,r);!e._events||!e._events[t]?e.on(t,r):Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]}function Bge(e,t,r){by=by||iA(),e=e||{},typeof r!="boolean"&&(r=t instanceof by),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=fot(this,e,"readableHighWaterMark",r),this.buffer=new uot,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=e.emitClose!==!1,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(xy||(xy=bH().StringDecoder),this.decoder=new xy(e.encoding),this.encoding=e.encoding)}function Rr(e){if(by=by||iA(),!(this instanceof Rr))return new Rr(e);var t=this instanceof by;this._readableState=new Bge(e,this,t),this.readable=!0,e&&(typeof e.read=="function"&&(this._read=e.read),typeof e.destroy=="function"&&(this._destroy=e.destroy)),dx.call(this)}Object.defineProperty(Rr.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}});Rr.prototype.destroy=RH.destroy;Rr.prototype._undestroy=RH.undestroy;Rr.prototype._destroy=function(e,t){t(e)};Rr.prototype.push=function(e,t){var r=this._readableState,n;return r.objectMode?n=!0:typeof e=="string"&&(t=t||r.defaultEncoding,t!==r.encoding&&(e=RR.from(e,t),t=""),n=!0),Dge(this,e,t,!1,n)};Rr.prototype.unshift=function(e){return Dge(this,e,null,!0,!1)};function Dge(e,t,r,n,i){nr("readableAddChunk",t);var s=e._readableState;if(t===null)s.reading=!1,vot(e,s);else{var o;if(i||(o=yot(s,t)),o)ux(e,o);else if(s.objectMode||t&&t.length>0)if(typeof t!="string"&&!s.objectMode&&Object.getPrototypeOf(t)!==RR.prototype&&(t=lot(t)),n)s.endEmitted?ux(e,new Aot):BH(e,s,t,!0);else if(s.ended)ux(e,new got);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!r?(t=s.decoder.write(t),s.objectMode||t.length!==0?BH(e,s,t,!1):TH(e,s)):BH(e,s,t,!1)}else n||(s.reading=!1,TH(e,s))}return!s.ended&&(s.length<s.highWaterMark||s.length===0)}function BH(e,t,r,n){t.flowing&&t.length===0&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&FR(e)),TH(e,t)}function yot(e,t){var r;return!cot(t)&&typeof t!="string"&&t!==void 0&&!e.objectMode&&(r=new hot("chunk",["string","Buffer","Uint8Array"],t)),r}Rr.prototype.isPaused=function(){return this._readableState.flowing===!1};Rr.prototype.setEncoding=function(e){xy||(xy=bH().StringDecoder);var t=new xy(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,n="";r!==null;)n+=t.write(r.data),r=r.next;return this._readableState.buffer.clear(),n!==""&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var wge=1073741824;function Cot(e){return e>=wge?e=wge:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function Ige(e,t){return e<=0||t.length===0&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=Cot(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}Rr.prototype.read=function(e){nr("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(e!==0&&(t.emittedReadable=!1),e===0&&t.needReadable&&((t.highWaterMark!==0?t.length>=t.highWaterMark:t.length>0)||t.ended))return nr("read: emitReadable",t.length,t.ended),t.length===0&&t.ended?DH(this):FR(this),null;if(e=Ige(e,t),e===0&&t.ended)return t.length===0&&DH(this),null;var n=t.needReadable;nr("need readable",n),(t.length===0||t.length-e<t.highWaterMark)&&(n=!0,nr("length less than watermark",n)),t.ended||t.reading?(n=!1,nr("reading or ended",n)):n&&(nr("do read"),t.reading=!0,t.sync=!0,t.length===0&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=Ige(r,t)));var i;return e>0?i=kge(e,t):i=null,i===null?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),t.length===0&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&DH(this)),i!==null&&this.emit("data",i),i};function vot(e,t){if(nr("onEofChunk"),!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?FR(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,Tge(e)))}}function FR(e){var t=e._readableState;nr("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(nr("emitReadable",t.flowing),t.emittedReadable=!0,process.nextTick(Tge,e))}function Tge(e){var t=e._readableState;nr("emitReadable_",t.destroyed,t.length,t.ended),!t.destroyed&&(t.length||t.ended)&&(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,kH(e)}function TH(e,t){t.readingMore||(t.readingMore=!0,process.nextTick(Eot,e,t))}function Eot(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&t.length===0);){var r=t.length;if(nr("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}Rr.prototype._read=function(e){ux(this,new pot("_read()"))};Rr.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e);break}n.pipesCount+=1,nr("pipe count=%d opts=%j",n.pipesCount,t);var i=(!t||t.end!==!1)&&e!==process.stdout&&e!==process.stderr,s=i?a:y;n.endEmitted?process.nextTick(s):r.once("end",s),e.on("unpipe",o);function o(C,v){nr("onunpipe"),C===r&&v&&v.hasUnpiped===!1&&(v.hasUnpiped=!0,u())}function a(){nr("onend"),e.end()}var l=bot(r);e.on("drain",l);var c=!1;function u(){nr("cleanup"),e.removeListener("close",g),e.removeListener("finish",A),e.removeListener("drain",l),e.removeListener("error",p),e.removeListener("unpipe",o),r.removeListener("end",a),r.removeListener("end",y),r.removeListener("data",f),c=!0,n.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&l()}r.on("data",f);function f(C){nr("ondata");var v=e.write(C);nr("dest.write",v),v===!1&&((n.pipesCount===1&&n.pipes===e||n.pipesCount>1&&Fge(n.pipes,e)!==-1)&&!c&&(nr("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function p(C){nr("onerror",C),y(),e.removeListener("error",p),Sge(e,"error")===0&&ux(e,C)}mot(e,"error",p);function g(){e.removeListener("finish",A),y()}e.once("close",g);function A(){nr("onfinish"),e.removeListener("close",g),y()}e.once("finish",A);function y(){nr("unpipe"),r.unpipe(e)}return e.emit("pipe",r),n.flowing||(nr("pipe resume"),r.resume()),e};function bot(e){return function(){var r=e._readableState;nr("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,r.awaitDrain===0&&Sge(e,"data")&&(r.flowing=!0,kH(e))}}Rr.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(t.pipesCount===0)return this;if(t.pipesCount===1)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r),this);if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var s=0;s<i;s++)n[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=Fge(t.pipes,e);return o===-1?this:(t.pipes.splice(o,1),t.pipesCount-=1,t.pipesCount===1&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r),this)};Rr.prototype.on=function(e,t){var r=dx.prototype.on.call(this,e,t),n=this._readableState;return e==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):e==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,nr("on readable",n.length,n.reading),n.length?FR(this):n.reading||process.nextTick(xot,this)),r};Rr.prototype.addListener=Rr.prototype.on;Rr.prototype.removeListener=function(e,t){var r=dx.prototype.removeListener.call(this,e,t);return e==="readable"&&process.nextTick(Rge,this),r};Rr.prototype.removeAllListeners=function(e){var t=dx.prototype.removeAllListeners.apply(this,arguments);return(e==="readable"||e===void 0)&&process.nextTick(Rge,this),t};function Rge(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function xot(e){nr("readable nexttick read 0"),e.read(0)}Rr.prototype.resume=function(){var e=this._readableState;return e.flowing||(nr("resume"),e.flowing=!e.readableListening,_ot(this,e)),e.paused=!1,this};function _ot(e,t){t.resumeScheduled||(t.resumeScheduled=!0,process.nextTick(wot,e,t))}function wot(e,t){nr("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),kH(e),t.flowing&&!t.reading&&e.read(0)}Rr.prototype.pause=function(){return nr("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(nr("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function kH(e){var t=e._readableState;for(nr("flow",t.flowing);t.flowing&&e.read()!==null;);}Rr.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;e.on("end",function(){if(nr("wrapped end"),r.decoder&&!r.ended){var o=r.decoder.end();o&&o.length&&t.push(o)}t.push(null)}),e.on("data",function(o){if(nr("wrapped data"),r.decoder&&(o=r.decoder.write(o)),!(r.objectMode&&o==null)&&!(!r.objectMode&&(!o||!o.length))){var a=t.push(o);a||(n=!0,e.pause())}});for(var i in e)this[i]===void 0&&typeof e[i]=="function"&&(this[i]=function(a){return function(){return e[a].apply(e,arguments)}}(i));for(var s=0;s<SH.length;s++)e.on(SH[s],this.emit.bind(this,SH[s]));return this._read=function(o){nr("wrapped _read",o),n&&(n=!1,e.resume())},this};typeof Symbol=="function"&&(Rr.prototype[Symbol.asyncIterator]=function(){return wH===void 0&&(wH=vge()),wH(this)});Object.defineProperty(Rr.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(Rr.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(Rr.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}});Rr._fromList=kge;Object.defineProperty(Rr.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function kge(e,t){if(t.length===0)return null;var r;return t.objectMode?r=t.buffer.shift():!e||e>=t.length?(t.decoder?r=t.buffer.join(""):t.buffer.length===1?r=t.buffer.first():r=t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r}function DH(e){var t=e._readableState;nr("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,process.nextTick(Iot,t,e))}function Iot(e,t){if(nr("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&e.length===0&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}typeof Symbol=="function"&&(Rr.from=function(e,t){return IH===void 0&&(IH=_ge()),IH(Rr,e,t)});function Fge(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}});var iA=x((ekt,Nge)=>{"use strict";var Sot=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};Nge.exports=Bu;var Qge=FH(),QH=NR();Ey()(Bu,Qge);for(MH=Sot(QH.prototype),MR=0;MR<MH.length;MR++)QR=MH[MR],Bu.prototype[QR]||(Bu.prototype[QR]=QH.prototype[QR]);var MH,QR,MR;function Bu(e){if(!(this instanceof Bu))return new Bu(e);Qge.call(this,e),QH.call(this,e),this.allowHalfOpen=!0,e&&(e.readable===!1&&(this.readable=!1),e.writable===!1&&(this.writable=!1),e.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",Bot)))}Object.defineProperty(Bu.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(Bu.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(Bu.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function Bot(){this._writableState.ended||process.nextTick(Dot,this)}function Dot(e){e.end()}Object.defineProperty(Bu.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(t){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=t,this._writableState.destroyed=t)}})});var NR=x((tkt,Vge)=>{"use strict";Vge.exports=li;function Lge(e){var t=this;this.next=null,this.entry=null,this.finish=function(){rat(t,e)}}var _y;li.WritableState=hx;var Tot={deprecate:Jhe()},Uge=dH(),LR=require("buffer").Buffer,Rot=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function kot(e){return LR.from(e)}function Fot(e){return LR.isBuffer(e)||e instanceof Rot}var PH=hH(),Mot=gH(),Qot=Mot.getHighWaterMark,Oh=Nh().codes,Not=Oh.ERR_INVALID_ARG_TYPE,Pot=Oh.ERR_METHOD_NOT_IMPLEMENTED,Lot=Oh.ERR_MULTIPLE_CALLBACK,Uot=Oh.ERR_STREAM_CANNOT_PIPE,Oot=Oh.ERR_STREAM_DESTROYED,qot=Oh.ERR_STREAM_NULL_VALUES,Vot=Oh.ERR_STREAM_WRITE_AFTER_END,Hot=Oh.ERR_UNKNOWN_ENCODING,wy=PH.errorOrDestroy;Ey()(li,Uge);function Wot(){}function hx(e,t,r){_y=_y||iA(),e=e||{},typeof r!="boolean"&&(r=t instanceof _y),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=Qot(this,e,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=e.decodeStrings===!1;this.decodeStrings=!n,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(i){jot(t,i)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=e.emitClose!==!1,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new Lge(this)}hx.prototype.getBuffer=function(){for(var t=this.bufferedRequest,r=[];t;)r.push(t),t=t.next;return r};(function(){try{Object.defineProperty(hx.prototype,"buffer",{get:Tot.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var PR;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(PR=Function.prototype[Symbol.hasInstance],Object.defineProperty(li,Symbol.hasInstance,{value:function(t){return PR.call(this,t)?!0:this!==li?!1:t&&t._writableState instanceof hx}})):PR=function(t){return t instanceof this};function li(e){_y=_y||iA();var t=this instanceof _y;if(!t&&!PR.call(li,this))return new li(e);this._writableState=new hx(e,this,t),this.writable=!0,e&&(typeof e.write=="function"&&(this._write=e.write),typeof e.writev=="function"&&(this._writev=e.writev),typeof e.destroy=="function"&&(this._destroy=e.destroy),typeof e.final=="function"&&(this._final=e.final)),Uge.call(this)}li.prototype.pipe=function(){wy(this,new Uot)};function Got(e,t){var r=new Vot;wy(e,r),process.nextTick(t,r)}function $ot(e,t,r,n){var i;return r===null?i=new qot:typeof r!="string"&&!t.objectMode&&(i=new Not("chunk",["string","Buffer"],r)),i?(wy(e,i),process.nextTick(n,i),!1):!0}li.prototype.write=function(e,t,r){var n=this._writableState,i=!1,s=!n.objectMode&&Fot(e);return s&&!LR.isBuffer(e)&&(e=kot(e)),typeof t=="function"&&(r=t,t=null),s?t="buffer":t||(t=n.defaultEncoding),typeof r!="function"&&(r=Wot),n.ending?Got(this,r):(s||$ot(this,n,e,r))&&(n.pendingcb++,i=Kot(this,n,s,e,t,r)),i};li.prototype.cork=function(){this._writableState.corked++};li.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,!e.writing&&!e.corked&&!e.bufferProcessing&&e.bufferedRequest&&Oge(this,e))};li.prototype.setDefaultEncoding=function(t){if(typeof t=="string"&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new Hot(t);return this._writableState.defaultEncoding=t,this};Object.defineProperty(li.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function Yot(e,t,r){return!e.objectMode&&e.decodeStrings!==!1&&typeof t=="string"&&(t=LR.from(t,r)),t}Object.defineProperty(li.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function Kot(e,t,r,n,i,s){if(!r){var o=Yot(t,n,i);n!==o&&(r=!0,i="buffer",n=o)}var a=t.objectMode?1:n.length;t.length+=a;var l=t.length<t.highWaterMark;if(l||(t.needDrain=!0),t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:s,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else NH(e,t,!1,a,n,i,s);return l}function NH(e,t,r,n,i,s,o){t.writelen=n,t.writecb=o,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new Oot("write")):r?e._writev(i,t.onwrite):e._write(i,s,t.onwrite),t.sync=!1}function zot(e,t,r,n,i){--t.pendingcb,r?(process.nextTick(i,n),process.nextTick(fx,e,t),e._writableState.errorEmitted=!0,wy(e,n)):(i(n),e._writableState.errorEmitted=!0,wy(e,n),fx(e,t))}function Jot(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function jot(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if(typeof i!="function")throw new Lot;if(Jot(r),t)zot(e,r,n,t,i);else{var s=qge(r)||e.destroyed;!s&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&Oge(e,r),n?process.nextTick(Pge,e,r,s,i):Pge(e,r,s,i)}}function Pge(e,t,r,n){r||Zot(e,t),t.pendingcb--,n(),fx(e,t)}function Zot(e,t){t.length===0&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function Oge(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),s=t.corkedRequestsFree;s.entry=r;for(var o=0,a=!0;r;)i[o]=r,r.isBuf||(a=!1),r=r.next,o+=1;i.allBuffers=a,NH(e,t,!0,t.length,i,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new Lge(t),t.bufferedRequestCount=0}else{for(;r;){var l=r.chunk,c=r.encoding,u=r.callback,f=t.objectMode?1:l.length;if(NH(e,t,!1,f,l,c,u),r=r.next,t.bufferedRequestCount--,t.writing)break}r===null&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}li.prototype._write=function(e,t,r){r(new Pot("_write()"))};li.prototype._writev=null;li.prototype.end=function(e,t,r){var n=this._writableState;return typeof e=="function"?(r=e,e=null,t=null):typeof t=="function"&&(r=t,t=null),e!=null&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||tat(this,n,r),this};Object.defineProperty(li.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function qge(e){return e.ending&&e.length===0&&e.bufferedRequest===null&&!e.finished&&!e.writing}function Xot(e,t){e._final(function(r){t.pendingcb--,r&&wy(e,r),t.prefinished=!0,e.emit("prefinish"),fx(e,t)})}function eat(e,t){!t.prefinished&&!t.finalCalled&&(typeof e._final=="function"&&!t.destroyed?(t.pendingcb++,t.finalCalled=!0,process.nextTick(Xot,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function fx(e,t){var r=qge(t);if(r&&(eat(e,t),t.pendingcb===0&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var n=e._readableState;(!n||n.autoDestroy&&n.endEmitted)&&e.destroy()}return r}function tat(e,t,r){t.ending=!0,fx(e,t),r&&(t.finished?process.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function rat(e,t,r){var n=e.entry;for(e.entry=null;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree.next=e}Object.defineProperty(li.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}});li.prototype.destroy=PH.destroy;li.prototype._undestroy=PH.undestroy;li.prototype._destroy=function(e,t){t(e)}});var UH=x((rkt,Wge)=>{"use strict";var nat=require("util"),{LEVEL:LH}=Ri(),Hge=qh(),gx=Wge.exports=function(t={}){if(Hge.call(this,t),!t.transport||typeof t.transport.log!="function")throw new Error("Invalid transport, must be an object with a log method.");this.transport=t.transport,this.level=this.level||t.transport.level,this.handleExceptions=this.handleExceptions||t.transport.handleExceptions,this._deprecated();function r(n){this.emit("error",n,this.transport)}this.transport.__winstonError||(this.transport.__winstonError=r.bind(this),this.transport.on("error",this.transport.__winstonError))};nat.inherits(gx,Hge);gx.prototype._write=function(t,r,n){if(this.silent||t.exception===!0&&!this.handleExceptions)return n(null);(!this.level||this.levels[this.level]>=this.levels[t[LH]])&&this.transport.log(t[LH],t.message,t,this._nop),n(null)};gx.prototype._writev=function(t,r){for(let n=0;n<t.length;n++)this._accept(t[n])&&(this.transport.log(t[n].chunk[LH],t[n].chunk.message,t[n].chunk,this._nop),t[n].callback());return r(null)};gx.prototype._deprecated=function(){console.error([`${this.transport.name} is a legacy winston transport. Consider upgrading: `,"- Upgrade docs: https://github.com/winstonjs/winston/blob/master/UPGRADE-3.0.md"].join(`
`))};gx.prototype.close=function(){this.transport.close&&this.transport.close(),this.transport.__winstonError&&(this.transport.removeListener("error",this.transport.__winstonError),this.transport.__winstonError=null)}});var qh=x((nkt,OH)=>{"use strict";var iat=require("util"),Gge=NR(),{LEVEL:$ge}=Ri(),px=OH.exports=function(t={}){Gge.call(this,{objectMode:!0,highWaterMark:t.highWaterMark}),this.format=t.format,this.level=t.level,this.handleExceptions=t.handleExceptions,this.handleRejections=t.handleRejections,this.silent=t.silent,t.log&&(this.log=t.log),t.logv&&(this.logv=t.logv),t.close&&(this.close=t.close),this.once("pipe",r=>{this.levels=r.levels,this.parent=r}),this.once("unpipe",r=>{r===this.parent&&(this.parent=null,this.close&&this.close())})};iat.inherits(px,Gge);px.prototype._write=function(t,r,n){if(this.silent||t.exception===!0&&!this.handleExceptions)return n(null);let i=this.level||this.parent&&this.parent.level;if(!i||this.levels[i]>=this.levels[t[$ge]]){if(t&&!this.format)return this.log(t,n);let s,o;try{o=this.format.transform(Object.assign({},t),this.format.options)}catch(a){s=a}if(s||!o){if(n(),s)throw s;return}return this.log(o,n)}return this._writableState.sync=!1,n(null)};px.prototype._writev=function(t,r){if(this.logv){let n=t.filter(this._accept,this);return n.length?this.logv(n,r):r(null)}for(let n=0;n<t.length;n++){if(!this._accept(t[n]))continue;if(t[n].chunk&&!this.format){this.log(t[n].chunk,t[n].callback);continue}let i,s;try{s=this.format.transform(Object.assign({},t[n].chunk),this.format.options)}catch(o){i=o}if(i||!s){if(t[n].callback(),i)throw r(null),i}else this.log(s,t[n].callback)}return r(null)};px.prototype._accept=function(t){let r=t.chunk;if(this.silent)return!1;let n=this.level||this.parent&&this.parent.level;return!!((r.exception===!0||!n||this.levels[n]>=this.levels[r[$ge]])&&(this.handleExceptions||r.exception!==!0))};px.prototype._nop=function(){};OH.exports.LegacyTransportStream=UH()});var zge=x((skt,Kge)=>{"use strict";var sat=require("os"),{LEVEL:Yge,MESSAGE:Iy}=Ri(),oat=qh();Kge.exports=class extends oat{constructor(t={}){super(t),this.name=t.name||"console",this.stderrLevels=this._stringArrayToSet(t.stderrLevels),this.consoleWarnLevels=this._stringArrayToSet(t.consoleWarnLevels),this.eol=typeof t.eol=="string"?t.eol:sat.EOL,this.setMaxListeners(30)}log(t,r){if(setImmediate(()=>this.emit("logged",t)),this.stderrLevels[t[Yge]]){console._stderr?console._stderr.write(`${t[Iy]}${this.eol}`):console.error(t[Iy]),r&&r();return}else if(this.consoleWarnLevels[t[Yge]]){console._stderr?console._stderr.write(`${t[Iy]}${this.eol}`):console.warn(t[Iy]),r&&r();return}console._stdout?console._stdout.write(`${t[Iy]}${this.eol}`):console.log(t[Iy]),r&&r()}_stringArrayToSet(t,r){if(!t)return{};if(r=r||"Cannot make set from type other than Array of string elements",!Array.isArray(t))throw new Error(r);return t.reduce((n,i)=>{if(typeof i!="string")throw new Error(r);return n[i]=!0,n},{})}}});var OR=x((UR,Jge)=>{"use strict";Object.defineProperty(UR,"__esModule",{value:!0});UR.default=aat;function aat(e){return e&&typeof e.length=="number"&&e.length>=0&&e.length%1===0}Jge.exports=UR.default});var Zge=x((qR,jge)=>{"use strict";Object.defineProperty(qR,"__esModule",{value:!0});qR.default=function(e){return function(...t){var r=t.pop();return e.call(this,t,r)}};jge.exports=qR.default});var tpe=x(Vh=>{"use strict";Object.defineProperty(Vh,"__esModule",{value:!0});Vh.fallback=Xge;Vh.wrap=epe;var lat=Vh.hasQueueMicrotask=typeof queueMicrotask=="function"&&queueMicrotask,cat=Vh.hasSetImmediate=typeof setImmediate=="function"&&setImmediate,uat=Vh.hasNextTick=typeof process=="object"&&typeof process.nextTick=="function";function Xge(e){setTimeout(e,0)}function epe(e){return(t,...r)=>e(()=>t(...r))}var Ax;lat?Ax=queueMicrotask:cat?Ax=setImmediate:uat?Ax=process.nextTick:Ax=Xge;Vh.default=epe(Ax)});var ope=x((VR,spe)=>{"use strict";Object.defineProperty(VR,"__esModule",{value:!0});VR.default=Aat;var dat=Zge(),fat=ipe(dat),hat=tpe(),gat=ipe(hat),pat=sA();function ipe(e){return e&&e.__esModule?e:{default:e}}function Aat(e){return(0,pat.isAsync)(e)?function(...t){let r=t.pop(),n=e.apply(this,t);return rpe(n,r)}:(0,fat.default)(function(t,r){var n;try{n=e.apply(this,t)}catch(i){return r(i)}if(n&&typeof n.then=="function")return rpe(n,r);r(null,n)})}function rpe(e,t){return e.then(r=>{npe(t,null,r)},r=>{npe(t,r&&(r instanceof Error||r.message)?r:new Error(r))})}function npe(e,t,r){try{e(t,r)}catch(n){(0,gat.default)(i=>{throw i},n)}}spe.exports=VR.default});var sA=x(Jd=>{"use strict";Object.defineProperty(Jd,"__esModule",{value:!0});Jd.isAsyncIterable=Jd.isAsyncGenerator=Jd.isAsync=void 0;var mat=ope(),yat=Cat(mat);function Cat(e){return e&&e.__esModule?e:{default:e}}function ape(e){return e[Symbol.toStringTag]==="AsyncFunction"}function vat(e){return e[Symbol.toStringTag]==="AsyncGenerator"}function Eat(e){return typeof e[Symbol.asyncIterator]=="function"}function bat(e){if(typeof e!="function")throw new Error("expected a function");return ape(e)?(0,yat.default)(e):e}Jd.default=bat;Jd.isAsync=ape;Jd.isAsyncGenerator=vat;Jd.isAsyncIterable=Eat});var Sy=x((HR,lpe)=>{"use strict";Object.defineProperty(HR,"__esModule",{value:!0});HR.default=xat;function xat(e,t){if(t||(t=e.length),!t)throw new Error("arity is undefined");function r(...n){return typeof n[t-1]=="function"?e.apply(this,n):new Promise((i,s)=>{n[t-1]=(o,...a)=>{if(o)return s(o);i(a.length>1?a:a[0])},e.apply(this,n)})}return r}lpe.exports=HR.default});var upe=x((WR,cpe)=>{"use strict";Object.defineProperty(WR,"__esModule",{value:!0});var _at=OR(),wat=qH(_at),Iat=sA(),Sat=qH(Iat),Bat=Sy(),Dat=qH(Bat);function qH(e){return e&&e.__esModule?e:{default:e}}WR.default=(0,Dat.default)((e,t,r)=>{var n=(0,wat.default)(t)?[]:{};e(t,(i,s,o)=>{(0,Sat.default)(i)((a,...l)=>{l.length<2&&([l]=l),n[s]=l,o(a)})},i=>r(i,n))},3);cpe.exports=WR.default});var VH=x((GR,dpe)=>{"use strict";Object.defineProperty(GR,"__esModule",{value:!0});GR.default=Tat;function Tat(e){function t(...r){if(e!==null){var n=e;e=null,n.apply(this,r)}}return Object.assign(t,e),t}dpe.exports=GR.default});var hpe=x(($R,fpe)=>{"use strict";Object.defineProperty($R,"__esModule",{value:!0});$R.default=function(e){return e[Symbol.iterator]&&e[Symbol.iterator]()};fpe.exports=$R.default});var Ape=x((YR,ppe)=>{"use strict";Object.defineProperty(YR,"__esModule",{value:!0});YR.default=Lat;var Rat=OR(),kat=gpe(Rat),Fat=hpe(),Mat=gpe(Fat);function gpe(e){return e&&e.__esModule?e:{default:e}}function Qat(e){var t=-1,r=e.length;return function(){return++t<r?{value:e[t],key:t}:null}}function Nat(e){var t=-1;return function(){var n=e.next();return n.done?null:(t++,{value:n.value,key:t})}}function Pat(e){var t=e?Object.keys(e):[],r=-1,n=t.length;return function i(){var s=t[++r];return s==="__proto__"?i():r<n?{value:e[s],key:s}:null}}function Lat(e){if((0,kat.default)(e))return Qat(e);var t=(0,Mat.default)(e);return t?Nat(t):Pat(e)}ppe.exports=YR.default});var HH=x((KR,mpe)=>{"use strict";Object.defineProperty(KR,"__esModule",{value:!0});KR.default=Uat;function Uat(e){return function(...t){if(e===null)throw new Error("Callback was already called.");var r=e;e=null,r.apply(this,t)}}mpe.exports=KR.default});var JR=x((zR,ype)=>{"use strict";Object.defineProperty(zR,"__esModule",{value:!0});var Oat={};zR.default=Oat;ype.exports=zR.default});var vpe=x((jR,Cpe)=>{"use strict";Object.defineProperty(jR,"__esModule",{value:!0});jR.default=Wat;var qat=JR(),Vat=Hat(qat);function Hat(e){return e&&e.__esModule?e:{default:e}}function Wat(e,t,r,n){let i=!1,s=!1,o=!1,a=0,l=0;function c(){a>=t||o||i||(o=!0,e.next().then(({value:p,done:g})=>{if(!(s||i)){if(o=!1,g){i=!0,a<=0&&n(null);return}a++,r(p,l,u),l++,c()}}).catch(f))}function u(p,g){if(a-=1,!s){if(p)return f(p);if(p===!1){i=!0,s=!0;return}if(g===Vat.default||i&&a<=0)return i=!0,n(null);c()}}function f(p){s||(o=!1,i=!0,n(p))}c()}Cpe.exports=jR.default});var _pe=x((ZR,xpe)=>{"use strict";Object.defineProperty(ZR,"__esModule",{value:!0});var Gat=VH(),$at=mx(Gat),Yat=Ape(),Kat=mx(Yat),zat=HH(),Jat=mx(zat),Epe=sA(),jat=vpe(),bpe=mx(jat),Zat=JR(),Xat=mx(Zat);function mx(e){return e&&e.__esModule?e:{default:e}}ZR.default=e=>(t,r,n)=>{if(n=(0,$at.default)(n),e<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!t)return n(null);if((0,Epe.isAsyncGenerator)(t))return(0,bpe.default)(t,e,r,n);if((0,Epe.isAsyncIterable)(t))return(0,bpe.default)(t[Symbol.asyncIterator](),e,r,n);var i=(0,Kat.default)(t),s=!1,o=!1,a=0,l=!1;function c(f,p){if(!o)if(a-=1,f)s=!0,n(f);else if(f===!1)s=!0,o=!0;else{if(p===Xat.default||s&&a<=0)return s=!0,n(null);l||u()}}function u(){for(l=!0;a<e&&!s;){var f=i();if(f===null){s=!0,a<=0&&n(null);return}a+=1,r(f.value,f.key,(0,Jat.default)(c))}l=!1}u()};xpe.exports=ZR.default});var GH=x((XR,wpe)=>{"use strict";Object.defineProperty(XR,"__esModule",{value:!0});var elt=_pe(),tlt=WH(elt),rlt=sA(),nlt=WH(rlt),ilt=Sy(),slt=WH(ilt);function WH(e){return e&&e.__esModule?e:{default:e}}function olt(e,t,r,n){return(0,tlt.default)(t)(e,(0,nlt.default)(r),n)}XR.default=(0,slt.default)(olt,4);wpe.exports=XR.default});var Bpe=x((ek,Spe)=>{"use strict";Object.defineProperty(ek,"__esModule",{value:!0});var alt=GH(),llt=Ipe(alt),clt=Sy(),ult=Ipe(clt);function Ipe(e){return e&&e.__esModule?e:{default:e}}function dlt(e,t,r){return(0,llt.default)(e,1,t,r)}ek.default=(0,ult.default)(dlt,3);Spe.exports=ek.default});var Rpe=x((tk,Tpe)=>{"use strict";Object.defineProperty(tk,"__esModule",{value:!0});tk.default=Alt;var flt=upe(),hlt=Dpe(flt),glt=Bpe(),plt=Dpe(glt);function Dpe(e){return e&&e.__esModule?e:{default:e}}function Alt(e,t){return(0,hlt.default)(plt.default,e,t)}Tpe.exports=tk.default});var $H=x((lkt,Fpe)=>{"use strict";Fpe.exports=jd;var rk=Nh().codes,mlt=rk.ERR_METHOD_NOT_IMPLEMENTED,ylt=rk.ERR_MULTIPLE_CALLBACK,Clt=rk.ERR_TRANSFORM_ALREADY_TRANSFORMING,vlt=rk.ERR_TRANSFORM_WITH_LENGTH_0,nk=iA();Ey()(jd,nk);function Elt(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(n===null)return this.emit("error",new ylt);r.writechunk=null,r.writecb=null,t!=null&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function jd(e){if(!(this instanceof jd))return new jd(e);nk.call(this,e),this._transformState={afterTransform:Elt.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.on("prefinish",blt)}function blt(){var e=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(t,r){kpe(e,t,r)}):kpe(this,null,null)}jd.prototype.push=function(e,t){return this._transformState.needTransform=!1,nk.prototype.push.call(this,e,t)};jd.prototype._transform=function(e,t,r){r(new mlt("_transform()"))};jd.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};jd.prototype._read=function(e){var t=this._transformState;t.writechunk!==null&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0};jd.prototype._destroy=function(e,t){nk.prototype._destroy.call(this,e,function(r){t(r)})};function kpe(e,t,r){if(t)return e.emit("error",t);if(r!=null&&e.push(r),e._writableState.length)throw new vlt;if(e._transformState.transforming)throw new Clt;return e.push(null)}});var Npe=x((ckt,Qpe)=>{"use strict";Qpe.exports=yx;var Mpe=$H();Ey()(yx,Mpe);function yx(e){if(!(this instanceof yx))return new yx(e);Mpe.call(this,e)}yx.prototype._transform=function(e,t,r){r(null,e)}});var qpe=x((ukt,Ope)=>{"use strict";var YH;function xlt(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}var Upe=Nh().codes,_lt=Upe.ERR_MISSING_ARGS,wlt=Upe.ERR_STREAM_DESTROYED;function Ppe(e){if(e)throw e}function Ilt(e){return e.setHeader&&typeof e.abort=="function"}function Slt(e,t,r,n){n=xlt(n);var i=!1;e.on("close",function(){i=!0}),YH===void 0&&(YH=BR()),YH(e,{readable:t,writable:r},function(o){if(o)return n(o);i=!0,n()});var s=!1;return function(o){if(!i&&!s){if(s=!0,Ilt(e))return e.abort();if(typeof e.destroy=="function")return e.destroy();n(o||new wlt("pipe"))}}}function Lpe(e){e()}function Blt(e,t){return e.pipe(t)}function Dlt(e){return!e.length||typeof e[e.length-1]!="function"?Ppe:e.pop()}function Tlt(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=Dlt(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new _lt("streams");var i,s=t.map(function(o,a){var l=a<t.length-1,c=a>0;return Slt(o,l,c,function(u){i||(i=u),u&&s.forEach(Lpe),!l&&(s.forEach(Lpe),n(i))})});return t.reduce(Blt)}Ope.exports=Tlt});var By=x((Dl,vx)=>{"use strict";var Cx=require("stream");process.env.READABLE_STREAM==="disable"&&Cx?(vx.exports=Cx.Readable,Object.assign(vx.exports,Cx),vx.exports.Stream=Cx):(Dl=vx.exports=FH(),Dl.Stream=Cx||Dl,Dl.Readable=Dl,Dl.Writable=NR(),Dl.Duplex=iA(),Dl.Transform=$H(),Dl.PassThrough=Npe(),Dl.finished=BR(),Dl.pipeline=qpe())});var eW=x((dkt,Hpe)=>{"use strict";var Dy=[],Ex=[],KH=function(){};function JH(e){return~Dy.indexOf(e)?!1:(Dy.push(e),!0)}function jH(e){KH=e}function Rlt(e){for(var t=[],r=0;r<Dy.length;r++){if(Dy[r].async){t.push(Dy[r]);continue}if(Dy[r](e))return!0}return t.length?new Promise(function(i){Promise.all(t.map(function(o){return o(e)})).then(function(o){i(o.some(Boolean))})}):!1}function ZH(e){return~Ex.indexOf(e)?!1:(Ex.push(e),!0)}function zH(){KH.apply(KH,arguments)}function Vpe(e){for(var t=0;t<Ex.length;t++)e=Ex[t].apply(Ex[t],arguments);return e}function XH(e,t){var r=Object.prototype.hasOwnProperty;for(var n in t)r.call(t,n)&&(e[n]=t[n]);return e}function klt(e){return e.enabled=!1,e.modify=ZH,e.set=jH,e.use=JH,XH(function(){return!1},e)}function Flt(e){function t(){var r=Array.prototype.slice.call(arguments,0);return zH.call(zH,e,Vpe(r,e)),!0}return e.enabled=!0,e.modify=ZH,e.set=jH,e.use=JH,XH(t,e)}Hpe.exports=function(t){return t.introduce=XH,t.enabled=Rlt,t.process=Vpe,t.modify=ZH,t.write=zH,t.nope=klt,t.yep=Flt,t.set=jH,t.use=JH,t}});var Gpe=x((fkt,Wpe)=>{"use strict";var Mlt=eW(),Qlt=Mlt(function e(t,r){return r=r||{},r.namespace=t,r.prod=!0,r.dev=!1,r.force||e.force?e.yep(r):e.nope(r)});Wpe.exports=Qlt});var Ype=x((hkt,$pe)=>{"use strict";$pe.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}});var zpe=x((gkt,Kpe)=>{"use strict";Kpe.exports=function(t){return!t||typeof t=="string"?!1:t instanceof Array||Array.isArray(t)||t.length>=0&&(t.splice instanceof Function||Object.getOwnPropertyDescriptor(t,t.length-1)&&t.constructor.name!=="String")}});var Zpe=x((pkt,jpe)=>{"use strict";var Nlt=zpe(),Plt=Array.prototype.concat,Llt=Array.prototype.slice,Jpe=jpe.exports=function(t){for(var r=[],n=0,i=t.length;n<i;n++){var s=t[n];Nlt(s)?r=Plt.call(r,Llt.call(s)):r.push(s)}return r};Jpe.wrap=function(e){return function(){return e(Jpe(arguments))}}});var rAe=x((Akt,tAe)=>{"use strict";var bx=Ype(),xx=Zpe(),Xpe=Object.hasOwnProperty,eAe=Object.create(null);for(ik in bx)Xpe.call(bx,ik)&&(eAe[bx[ik]]=ik);var ik,ka=tAe.exports={to:{},get:{}};ka.get=function(e){var t=e.substring(0,3).toLowerCase(),r,n;switch(t){case"hsl":r=ka.get.hsl(e),n="hsl";break;case"hwb":r=ka.get.hwb(e),n="hwb";break;default:r=ka.get.rgb(e),n="rgb";break}return r?{model:n,value:r}:null};ka.get.rgb=function(e){if(!e)return null;var t=/^#([a-f0-9]{3,4})$/i,r=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,n=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,i=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,s=/^(\w+)$/,o=[0,0,0,1],a,l,c;if(a=e.match(r)){for(c=a[2],a=a[1],l=0;l<3;l++){var u=l*2;o[l]=parseInt(a.slice(u,u+2),16)}c&&(o[3]=parseInt(c,16)/255)}else if(a=e.match(t)){for(a=a[1],c=a[3],l=0;l<3;l++)o[l]=parseInt(a[l]+a[l],16);c&&(o[3]=parseInt(c+c,16)/255)}else if(a=e.match(n)){for(l=0;l<3;l++)o[l]=parseInt(a[l+1],0);a[4]&&(a[5]?o[3]=parseFloat(a[4])*.01:o[3]=parseFloat(a[4]))}else if(a=e.match(i)){for(l=0;l<3;l++)o[l]=Math.round(parseFloat(a[l+1])*2.55);a[4]&&(a[5]?o[3]=parseFloat(a[4])*.01:o[3]=parseFloat(a[4]))}else return(a=e.match(s))?a[1]==="transparent"?[0,0,0,0]:Xpe.call(bx,a[1])?(o=bx[a[1]],o[3]=1,o):null:null;for(l=0;l<3;l++)o[l]=Hh(o[l],0,255);return o[3]=Hh(o[3],0,1),o};ka.get.hsl=function(e){if(!e)return null;var t=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,r=e.match(t);if(r){var n=parseFloat(r[4]),i=(parseFloat(r[1])%360+360)%360,s=Hh(parseFloat(r[2]),0,100),o=Hh(parseFloat(r[3]),0,100),a=Hh(isNaN(n)?1:n,0,1);return[i,s,o,a]}return null};ka.get.hwb=function(e){if(!e)return null;var t=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,r=e.match(t);if(r){var n=parseFloat(r[4]),i=(parseFloat(r[1])%360+360)%360,s=Hh(parseFloat(r[2]),0,100),o=Hh(parseFloat(r[3]),0,100),a=Hh(isNaN(n)?1:n,0,1);return[i,s,o,a]}return null};ka.to.hex=function(){var e=xx(arguments);return"#"+sk(e[0])+sk(e[1])+sk(e[2])+(e[3]<1?sk(Math.round(e[3]*255)):"")};ka.to.rgb=function(){var e=xx(arguments);return e.length<4||e[3]===1?"rgb("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+")":"rgba("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+", "+e[3]+")"};ka.to.rgb.percent=function(){var e=xx(arguments),t=Math.round(e[0]/255*100),r=Math.round(e[1]/255*100),n=Math.round(e[2]/255*100);return e.length<4||e[3]===1?"rgb("+t+"%, "+r+"%, "+n+"%)":"rgba("+t+"%, "+r+"%, "+n+"%, "+e[3]+")"};ka.to.hsl=function(){var e=xx(arguments);return e.length<4||e[3]===1?"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)":"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+e[3]+")"};ka.to.hwb=function(){var e=xx(arguments),t="";return e.length>=4&&e[3]!==1&&(t=", "+e[3]),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+t+")"};ka.to.keyword=function(e){return eAe[e.slice(0,3)]};function Hh(e,t,r){return Math.min(Math.max(t,e),r)}function sk(e){var t=Math.round(e).toString(16).toUpperCase();return t.length<2?"0"+t:t}});var iAe=x((mkt,nAe)=>{"use strict";nAe.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}});var tW=x((ykt,lAe)=>{"use strict";var oA=iAe(),aAe={};for(ok in oA)oA.hasOwnProperty(ok)&&(aAe[oA[ok]]=ok);var ok,Ye=lAe.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(mo in Ye)if(Ye.hasOwnProperty(mo)){if(!("channels"in Ye[mo]))throw new Error("missing channels property: "+mo);if(!("labels"in Ye[mo]))throw new Error("missing channel labels property: "+mo);if(Ye[mo].labels.length!==Ye[mo].channels)throw new Error("channel and label counts mismatch: "+mo);sAe=Ye[mo].channels,oAe=Ye[mo].labels,delete Ye[mo].channels,delete Ye[mo].labels,Object.defineProperty(Ye[mo],"channels",{value:sAe}),Object.defineProperty(Ye[mo],"labels",{value:oAe})}var sAe,oAe,mo;Ye.rgb.hsl=function(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,i=Math.min(t,r,n),s=Math.max(t,r,n),o=s-i,a,l,c;return s===i?a=0:t===s?a=(r-n)/o:r===s?a=2+(n-t)/o:n===s&&(a=4+(t-r)/o),a=Math.min(a*60,360),a<0&&(a+=360),c=(i+s)/2,s===i?l=0:c<=.5?l=o/(s+i):l=o/(2-s-i),[a,l*100,c*100]};Ye.rgb.hsv=function(e){var t,r,n,i,s,o=e[0]/255,a=e[1]/255,l=e[2]/255,c=Math.max(o,a,l),u=c-Math.min(o,a,l),f=function(p){return(c-p)/6/u+1/2};return u===0?i=s=0:(s=u/c,t=f(o),r=f(a),n=f(l),o===c?i=n-r:a===c?i=1/3+t-n:l===c&&(i=2/3+r-t),i<0?i+=1:i>1&&(i-=1)),[i*360,s*100,c*100]};Ye.rgb.hwb=function(e){var t=e[0],r=e[1],n=e[2],i=Ye.rgb.hsl(e)[0],s=1/255*Math.min(t,Math.min(r,n));return n=1-1/255*Math.max(t,Math.max(r,n)),[i,s*100,n*100]};Ye.rgb.cmyk=function(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,i,s,o,a;return a=Math.min(1-t,1-r,1-n),i=(1-t-a)/(1-a)||0,s=(1-r-a)/(1-a)||0,o=(1-n-a)/(1-a)||0,[i*100,s*100,o*100,a*100]};function Ult(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)+Math.pow(e[2]-t[2],2)}Ye.rgb.keyword=function(e){var t=aAe[e];if(t)return t;var r=1/0,n;for(var i in oA)if(oA.hasOwnProperty(i)){var s=oA[i],o=Ult(e,s);o<r&&(r=o,n=i)}return n};Ye.keyword.rgb=function(e){return oA[e]};Ye.rgb.xyz=function(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255;t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92,n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92;var i=t*.4124+r*.3576+n*.1805,s=t*.2126+r*.7152+n*.0722,o=t*.0193+r*.1192+n*.9505;return[i*100,s*100,o*100]};Ye.rgb.lab=function(e){var t=Ye.rgb.xyz(e),r=t[0],n=t[1],i=t[2],s,o,a;return r/=95.047,n/=100,i/=108.883,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,i=i>.008856?Math.pow(i,1/3):7.787*i+16/116,s=116*n-16,o=500*(r-n),a=200*(n-i),[s,o,a]};Ye.hsl.rgb=function(e){var t=e[0]/360,r=e[1]/100,n=e[2]/100,i,s,o,a,l;if(r===0)return l=n*255,[l,l,l];n<.5?s=n*(1+r):s=n+r-n*r,i=2*n-s,a=[0,0,0];for(var c=0;c<3;c++)o=t+1/3*-(c-1),o<0&&o++,o>1&&o--,6*o<1?l=i+(s-i)*6*o:2*o<1?l=s:3*o<2?l=i+(s-i)*(2/3-o)*6:l=i,a[c]=l*255;return a};Ye.hsl.hsv=function(e){var t=e[0],r=e[1]/100,n=e[2]/100,i=r,s=Math.max(n,.01),o,a;return n*=2,r*=n<=1?n:2-n,i*=s<=1?s:2-s,a=(n+r)/2,o=n===0?2*i/(s+i):2*r/(n+r),[t,o*100,a*100]};Ye.hsv.rgb=function(e){var t=e[0]/60,r=e[1]/100,n=e[2]/100,i=Math.floor(t)%6,s=t-Math.floor(t),o=255*n*(1-r),a=255*n*(1-r*s),l=255*n*(1-r*(1-s));switch(n*=255,i){case 0:return[n,l,o];case 1:return[a,n,o];case 2:return[o,n,l];case 3:return[o,a,n];case 4:return[l,o,n];case 5:return[n,o,a]}};Ye.hsv.hsl=function(e){var t=e[0],r=e[1]/100,n=e[2]/100,i=Math.max(n,.01),s,o,a;return a=(2-r)*n,s=(2-r)*i,o=r*i,o/=s<=1?s:2-s,o=o||0,a/=2,[t,o*100,a*100]};Ye.hwb.rgb=function(e){var t=e[0]/360,r=e[1]/100,n=e[2]/100,i=r+n,s,o,a,l;i>1&&(r/=i,n/=i),s=Math.floor(6*t),o=1-n,a=6*t-s,s&1&&(a=1-a),l=r+a*(o-r);var c,u,f;switch(s){default:case 6:case 0:c=o,u=l,f=r;break;case 1:c=l,u=o,f=r;break;case 2:c=r,u=o,f=l;break;case 3:c=r,u=l,f=o;break;case 4:c=l,u=r,f=o;break;case 5:c=o,u=r,f=l;break}return[c*255,u*255,f*255]};Ye.cmyk.rgb=function(e){var t=e[0]/100,r=e[1]/100,n=e[2]/100,i=e[3]/100,s,o,a;return s=1-Math.min(1,t*(1-i)+i),o=1-Math.min(1,r*(1-i)+i),a=1-Math.min(1,n*(1-i)+i),[s*255,o*255,a*255]};Ye.xyz.rgb=function(e){var t=e[0]/100,r=e[1]/100,n=e[2]/100,i,s,o;return i=t*3.2406+r*-1.5372+n*-.4986,s=t*-.9689+r*1.8758+n*.0415,o=t*.0557+r*-.204+n*1.057,i=i>.0031308?1.055*Math.pow(i,1/2.4)-.055:i*12.92,s=s>.0031308?1.055*Math.pow(s,1/2.4)-.055:s*12.92,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o*12.92,i=Math.min(Math.max(0,i),1),s=Math.min(Math.max(0,s),1),o=Math.min(Math.max(0,o),1),[i*255,s*255,o*255]};Ye.xyz.lab=function(e){var t=e[0],r=e[1],n=e[2],i,s,o;return t/=95.047,r/=100,n/=108.883,t=t>.008856?Math.pow(t,1/3):7.787*t+16/116,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,i=116*r-16,s=500*(t-r),o=200*(r-n),[i,s,o]};Ye.lab.xyz=function(e){var t=e[0],r=e[1],n=e[2],i,s,o;s=(t+16)/116,i=r/500+s,o=s-n/200;var a=Math.pow(s,3),l=Math.pow(i,3),c=Math.pow(o,3);return s=a>.008856?a:(s-16/116)/7.787,i=l>.008856?l:(i-16/116)/7.787,o=c>.008856?c:(o-16/116)/7.787,i*=95.047,s*=100,o*=108.883,[i,s,o]};Ye.lab.lch=function(e){var t=e[0],r=e[1],n=e[2],i,s,o;return i=Math.atan2(n,r),s=i*360/2/Math.PI,s<0&&(s+=360),o=Math.sqrt(r*r+n*n),[t,o,s]};Ye.lch.lab=function(e){var t=e[0],r=e[1],n=e[2],i,s,o;return o=n/360*2*Math.PI,i=r*Math.cos(o),s=r*Math.sin(o),[t,i,s]};Ye.rgb.ansi16=function(e){var t=e[0],r=e[1],n=e[2],i=1 in arguments?arguments[1]:Ye.rgb.hsv(e)[2];if(i=Math.round(i/50),i===0)return 30;var s=30+(Math.round(n/255)<<2|Math.round(r/255)<<1|Math.round(t/255));return i===2&&(s+=60),s};Ye.hsv.ansi16=function(e){return Ye.rgb.ansi16(Ye.hsv.rgb(e),e[2])};Ye.rgb.ansi256=function(e){var t=e[0],r=e[1],n=e[2];if(t===r&&r===n)return t<8?16:t>248?231:Math.round((t-8)/247*24)+232;var i=16+36*Math.round(t/255*5)+6*Math.round(r/255*5)+Math.round(n/255*5);return i};Ye.ansi16.rgb=function(e){var t=e%10;if(t===0||t===7)return e>50&&(t+=3.5),t=t/10.5*255,[t,t,t];var r=(~~(e>50)+1)*.5,n=(t&1)*r*255,i=(t>>1&1)*r*255,s=(t>>2&1)*r*255;return[n,i,s]};Ye.ansi256.rgb=function(e){if(e>=232){var t=(e-232)*10+8;return[t,t,t]}e-=16;var r,n=Math.floor(e/36)/5*255,i=Math.floor((r=e%36)/6)/5*255,s=r%6/5*255;return[n,i,s]};Ye.rgb.hex=function(e){var t=((Math.round(e[0])&255)<<16)+((Math.round(e[1])&255)<<8)+(Math.round(e[2])&255),r=t.toString(16).toUpperCase();return"000000".substring(r.length)+r};Ye.hex.rgb=function(e){var t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];var r=t[0];t[0].length===3&&(r=r.split("").map(function(a){return a+a}).join(""));var n=parseInt(r,16),i=n>>16&255,s=n>>8&255,o=n&255;return[i,s,o]};Ye.rgb.hcg=function(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,i=Math.max(Math.max(t,r),n),s=Math.min(Math.min(t,r),n),o=i-s,a,l;return o<1?a=s/(1-o):a=0,o<=0?l=0:i===t?l=(r-n)/o%6:i===r?l=2+(n-t)/o:l=4+(t-r)/o+4,l/=6,l%=1,[l*360,o*100,a*100]};Ye.hsl.hcg=function(e){var t=e[1]/100,r=e[2]/100,n=1,i=0;return r<.5?n=2*t*r:n=2*t*(1-r),n<1&&(i=(r-.5*n)/(1-n)),[e[0],n*100,i*100]};Ye.hsv.hcg=function(e){var t=e[1]/100,r=e[2]/100,n=t*r,i=0;return n<1&&(i=(r-n)/(1-n)),[e[0],n*100,i*100]};Ye.hcg.rgb=function(e){var t=e[0]/360,r=e[1]/100,n=e[2]/100;if(r===0)return[n*255,n*255,n*255];var i=[0,0,0],s=t%1*6,o=s%1,a=1-o,l=0;switch(Math.floor(s)){case 0:i[0]=1,i[1]=o,i[2]=0;break;case 1:i[0]=a,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=o;break;case 3:i[0]=0,i[1]=a,i[2]=1;break;case 4:i[0]=o,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=a}return l=(1-r)*n,[(r*i[0]+l)*255,(r*i[1]+l)*255,(r*i[2]+l)*255]};Ye.hcg.hsv=function(e){var t=e[1]/100,r=e[2]/100,n=t+r*(1-t),i=0;return n>0&&(i=t/n),[e[0],i*100,n*100]};Ye.hcg.hsl=function(e){var t=e[1]/100,r=e[2]/100,n=r*(1-t)+.5*t,i=0;return n>0&&n<.5?i=t/(2*n):n>=.5&&n<1&&(i=t/(2*(1-n))),[e[0],i*100,n*100]};Ye.hcg.hwb=function(e){var t=e[1]/100,r=e[2]/100,n=t+r*(1-t);return[e[0],(n-t)*100,(1-n)*100]};Ye.hwb.hcg=function(e){var t=e[1]/100,r=e[2]/100,n=1-r,i=n-t,s=0;return i<1&&(s=(n-i)/(1-i)),[e[0],i*100,s*100]};Ye.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]};Ye.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]};Ye.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]};Ye.gray.hsl=Ye.gray.hsv=function(e){return[0,0,e[0]]};Ye.gray.hwb=function(e){return[0,100,e[0]]};Ye.gray.cmyk=function(e){return[0,0,0,e[0]]};Ye.gray.lab=function(e){return[e[0],0,0]};Ye.gray.hex=function(e){var t=Math.round(e[0]/100*255)&255,r=(t<<16)+(t<<8)+t,n=r.toString(16).toUpperCase();return"000000".substring(n.length)+n};Ye.rgb.gray=function(e){var t=(e[0]+e[1]+e[2])/3;return[t/255*100]}});var uAe=x((Ckt,cAe)=>{"use strict";var ak=tW();function Olt(){for(var e={},t=Object.keys(ak),r=t.length,n=0;n<r;n++)e[t[n]]={distance:-1,parent:null};return e}function qlt(e){var t=Olt(),r=[e];for(t[e].distance=0;r.length;)for(var n=r.pop(),i=Object.keys(ak[n]),s=i.length,o=0;o<s;o++){var a=i[o],l=t[a];l.distance===-1&&(l.distance=t[n].distance+1,l.parent=n,r.unshift(a))}return t}function Vlt(e,t){return function(r){return t(e(r))}}function Hlt(e,t){for(var r=[t[e].parent,e],n=ak[t[e].parent][e],i=t[e].parent;t[i].parent;)r.unshift(t[i].parent),n=Vlt(ak[t[i].parent][i],n),i=t[i].parent;return n.conversion=r,n}cAe.exports=function(e){for(var t=qlt(e),r={},n=Object.keys(t),i=n.length,s=0;s<i;s++){var o=n[s],a=t[o];a.parent!==null&&(r[o]=Hlt(o,t))}return r}});var fAe=x((vkt,dAe)=>{"use strict";var rW=tW(),Wlt=uAe(),Ty={},Glt=Object.keys(rW);function $lt(e){var t=function(r){return r==null?r:(arguments.length>1&&(r=Array.prototype.slice.call(arguments)),e(r))};return"conversion"in e&&(t.conversion=e.conversion),t}function Ylt(e){var t=function(r){if(r==null)return r;arguments.length>1&&(r=Array.prototype.slice.call(arguments));var n=e(r);if(typeof n=="object")for(var i=n.length,s=0;s<i;s++)n[s]=Math.round(n[s]);return n};return"conversion"in e&&(t.conversion=e.conversion),t}Glt.forEach(function(e){Ty[e]={},Object.defineProperty(Ty[e],"channels",{value:rW[e].channels}),Object.defineProperty(Ty[e],"labels",{value:rW[e].labels});var t=Wlt(e),r=Object.keys(t);r.forEach(function(n){var i=t[n];Ty[e][n]=Ylt(i),Ty[e][n].raw=$lt(i)})});dAe.exports=Ty});var pAe=x((Ekt,gAe)=>{"use strict";var _x=rAe(),Fa=fAe(),sW=[].slice,hAe=["keyword","gray","hex"],nW={};Object.keys(Fa).forEach(function(e){nW[sW.call(Fa[e].labels).sort().join("")]=e});var lk={};function Ts(e,t){if(!(this instanceof Ts))return new Ts(e,t);if(t&&t in hAe&&(t=null),t&&!(t in Fa))throw new Error("Unknown model: "+t);var r,n;if(e==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(e instanceof Ts)this.model=e.model,this.color=e.color.slice(),this.valpha=e.valpha;else if(typeof e=="string"){var i=_x.get(e);if(i===null)throw new Error("Unable to parse color from string: "+e);this.model=i.model,n=Fa[this.model].channels,this.color=i.value.slice(0,n),this.valpha=typeof i.value[n]=="number"?i.value[n]:1}else if(e.length){this.model=t||"rgb",n=Fa[this.model].channels;var s=sW.call(e,0,n);this.color=iW(s,n),this.valpha=typeof e[n]=="number"?e[n]:1}else if(typeof e=="number")e&=16777215,this.model="rgb",this.color=[e>>16&255,e>>8&255,e&255],this.valpha=1;else{this.valpha=1;var o=Object.keys(e);"alpha"in e&&(o.splice(o.indexOf("alpha"),1),this.valpha=typeof e.alpha=="number"?e.alpha:0);var a=o.sort().join("");if(!(a in nW))throw new Error("Unable to parse color from object: "+JSON.stringify(e));this.model=nW[a];var l=Fa[this.model].labels,c=[];for(r=0;r<l.length;r++)c.push(e[l[r]]);this.color=iW(c)}if(lk[this.model])for(n=Fa[this.model].channels,r=0;r<n;r++){var u=lk[this.model][r];u&&(this.color[r]=u(this.color[r]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}Ts.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(e){var t=this.model in _x.to?this:this.rgb();t=t.round(typeof e=="number"?e:1);var r=t.valpha===1?t.color:t.color.concat(this.valpha);return _x.to[t.model](r)},percentString:function(e){var t=this.rgb().round(typeof e=="number"?e:1),r=t.valpha===1?t.color:t.color.concat(this.valpha);return _x.to.rgb.percent(r)},array:function(){return this.valpha===1?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var e={},t=Fa[this.model].channels,r=Fa[this.model].labels,n=0;n<t;n++)e[r[n]]=this.color[n];return this.valpha!==1&&(e.alpha=this.valpha),e},unitArray:function(){var e=this.rgb().color;return e[0]/=255,e[1]/=255,e[2]/=255,this.valpha!==1&&e.push(this.valpha),e},unitObject:function(){var e=this.rgb().object();return e.r/=255,e.g/=255,e.b/=255,this.valpha!==1&&(e.alpha=this.valpha),e},round:function(e){return e=Math.max(e||0,0),new Ts(this.color.map(zlt(e)).concat(this.valpha),this.model)},alpha:function(e){return arguments.length?new Ts(this.color.concat(Math.max(0,Math.min(1,e))),this.model):this.valpha},red:ci("rgb",0,Gi(255)),green:ci("rgb",1,Gi(255)),blue:ci("rgb",2,Gi(255)),hue:ci(["hsl","hsv","hsl","hwb","hcg"],0,function(e){return(e%360+360)%360}),saturationl:ci("hsl",1,Gi(100)),lightness:ci("hsl",2,Gi(100)),saturationv:ci("hsv",1,Gi(100)),value:ci("hsv",2,Gi(100)),chroma:ci("hcg",1,Gi(100)),gray:ci("hcg",2,Gi(100)),white:ci("hwb",1,Gi(100)),wblack:ci("hwb",2,Gi(100)),cyan:ci("cmyk",0,Gi(100)),magenta:ci("cmyk",1,Gi(100)),yellow:ci("cmyk",2,Gi(100)),black:ci("cmyk",3,Gi(100)),x:ci("xyz",0,Gi(100)),y:ci("xyz",1,Gi(100)),z:ci("xyz",2,Gi(100)),l:ci("lab",0,Gi(100)),a:ci("lab",1),b:ci("lab",2),keyword:function(e){return arguments.length?new Ts(e):Fa[this.model].keyword(this.color)},hex:function(e){return arguments.length?new Ts(e):_x.to.hex(this.rgb().round().color)},rgbNumber:function(){var e=this.rgb().color;return(e[0]&255)<<16|(e[1]&255)<<8|e[2]&255},luminosity:function(){for(var e=this.rgb().color,t=[],r=0;r<e.length;r++){var n=e[r]/255;t[r]=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)}return .2126*t[0]+.7152*t[1]+.0722*t[2]},contrast:function(e){var t=this.luminosity(),r=e.luminosity();return t>r?(t+.05)/(r+.05):(r+.05)/(t+.05)},level:function(e){var t=this.contrast(e);return t>=7.1?"AAA":t>=4.5?"AA":""},isDark:function(){var e=this.rgb().color,t=(e[0]*299+e[1]*587+e[2]*114)/1e3;return t<128},isLight:function(){return!this.isDark()},negate:function(){for(var e=this.rgb(),t=0;t<3;t++)e.color[t]=255-e.color[t];return e},lighten:function(e){var t=this.hsl();return t.color[2]+=t.color[2]*e,t},darken:function(e){var t=this.hsl();return t.color[2]-=t.color[2]*e,t},saturate:function(e){var t=this.hsl();return t.color[1]+=t.color[1]*e,t},desaturate:function(e){var t=this.hsl();return t.color[1]-=t.color[1]*e,t},whiten:function(e){var t=this.hwb();return t.color[1]+=t.color[1]*e,t},blacken:function(e){var t=this.hwb();return t.color[2]+=t.color[2]*e,t},grayscale:function(){var e=this.rgb().color,t=e[0]*.3+e[1]*.59+e[2]*.11;return Ts.rgb(t,t,t)},fade:function(e){return this.alpha(this.valpha-this.valpha*e)},opaquer:function(e){return this.alpha(this.valpha+this.valpha*e)},rotate:function(e){var t=this.hsl(),r=t.color[0];return r=(r+e)%360,r=r<0?360+r:r,t.color[0]=r,t},mix:function(e,t){if(!e||!e.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof e);var r=e.rgb(),n=this.rgb(),i=t===void 0?.5:t,s=2*i-1,o=r.alpha()-n.alpha(),a=((s*o===-1?s:(s+o)/(1+s*o))+1)/2,l=1-a;return Ts.rgb(a*r.red()+l*n.red(),a*r.green()+l*n.green(),a*r.blue()+l*n.blue(),r.alpha()*i+n.alpha()*(1-i))}};Object.keys(Fa).forEach(function(e){if(hAe.indexOf(e)===-1){var t=Fa[e].channels;Ts.prototype[e]=function(){if(this.model===e)return new Ts(this);if(arguments.length)return new Ts(arguments,e);var r=typeof arguments[t]=="number"?t:this.valpha;return new Ts(Jlt(Fa[this.model][e].raw(this.color)).concat(r),e)},Ts[e]=function(r){return typeof r=="number"&&(r=iW(sW.call(arguments),t)),new Ts(r,e)}}});function Klt(e,t){return Number(e.toFixed(t))}function zlt(e){return function(t){return Klt(t,e)}}function ci(e,t,r){return e=Array.isArray(e)?e:[e],e.forEach(function(n){(lk[n]||(lk[n]=[]))[t]=r}),e=e[0],function(n){var i;return arguments.length?(r&&(n=r(n)),i=this[e](),i.color[t]=n,i):(i=this[e]().color[t],r&&(i=r(i)),i)}}function Gi(e){return function(t){return Math.max(0,Math.min(e,t))}}function Jlt(e){return Array.isArray(e)?e:[e]}function iW(e,t){for(var r=0;r<t;r++)typeof e[r]!="number"&&(e[r]=0);return e}gAe.exports=Ts});var mAe=x((bkt,AAe)=>{"use strict";AAe.exports=function(t){for(var r=0,n=0;r<t.length;n=t.charCodeAt(r++)+((n<<5)-n));var i=Math.floor(Math.abs(Math.sin(n)*1e4%1*16777216)).toString(16);return"#"+Array(6-i.length+1).join("0")+i}});var EAe=x((xkt,vAe)=>{"use strict";var yAe=pAe(),CAe=mAe();vAe.exports=function(t,r){var n=t.split(r||":"),i=CAe(n[0]);if(!n.length)return i;for(var s=0,o=n.length-1;s<o;s++)i=yAe(i).mix(yAe(CAe(n[s+1]))).saturate(1).hex();return i}});var xAe=x((_kt,bAe)=>{"use strict";function wc(e,t){if(t)return new wc(e).style(t);if(!(this instanceof wc))return new wc(e);this.text=e}wc.prototype.prefix="\x1B[";wc.prototype.suffix="m";wc.prototype.hex=function(t){t=t[0]==="#"?t.substring(1):t,t.length===3&&(t=t.split(""),t[5]=t[2],t[4]=t[2],t[3]=t[1],t[2]=t[1],t[1]=t[0],t=t.join(""));var r=t.substring(0,2),n=t.substring(2,4),i=t.substring(4,6);return[parseInt(r,16),parseInt(n,16),parseInt(i,16)]};wc.prototype.rgb=function(t,r,n){var i=t/255*5,s=r/255*5,o=n/255*5;return this.ansi(i,s,o)};wc.prototype.ansi=function(t,r,n){var i=Math.round(t),s=Math.round(r),o=Math.round(n);return 16+i*36+s*6+o};wc.prototype.reset=function(){return this.prefix+"39;49"+this.suffix};wc.prototype.style=function(t){return this.prefix+"38;5;"+this.rgb.apply(this,this.hex(t))+this.suffix+this.text+this.reset()};bAe.exports=wc});var wAe=x((wkt,_Ae)=>{"use strict";var jlt=EAe(),Zlt=xAe();_Ae.exports=function(t,r){var n=r.namespace,i=r.colors!==!1?Zlt(n+":",jlt(n)):n+":";return t[0]=i+" "+t[0],t}});var SAe=x((Ikt,IAe)=>{"use strict";IAe.exports=function(t,r){if(!r)return!1;for(var n=r.split(/[\s,]+/),i=0;i<n.length;i++){if(r=n[i].replace("*",".*?"),r.charAt(0)==="-"){if(new RegExp("^"+r.substr(1)+"$").test(t))return!1;continue}if(new RegExp("^"+r+"$").test(t))return!0}return!1}});var DAe=x((Skt,BAe)=>{"use strict";var Xlt=SAe();BAe.exports=function(t){return function(n){try{return Xlt(n,t())}catch{}return!1}}});var RAe=x((Bkt,TAe)=>{"use strict";var ect=DAe();TAe.exports=ect(function(){return process.env.DEBUG||process.env.DIAGNOSTICS})});var FAe=x((Dkt,kAe)=>{"use strict";kAe.exports=function(e,t){try{Function.prototype.apply.call(console.log,console,t)}catch{}}});var QAe=x((Tkt,MAe)=>{"use strict";var tct=eW(),rct=require("tty").isatty(1),ck=tct(function e(t,r){return r=r||{},r.colors="colors"in r?r.colors:rct,r.namespace=t,r.prod=!1,r.dev=!0,!e.enabled(t)&&!(r.force||e.force)?e.nope(r):e.yep(r)});ck.modify(wAe());ck.use(RAe());ck.set(FAe());MAe.exports=ck});var wx=x((Rkt,oW)=>{"use strict";process.env.NODE_ENV==="production"?oW.exports=Gpe():oW.exports=QAe()});var PAe=x((kkt,NAe)=>{"use strict";var aW=require("fs"),{StringDecoder:nct}=require("string_decoder"),{Stream:ict}=By();function sct(){}NAe.exports=(e,t)=>{let r=Buffer.alloc(65536),n=new nct("utf8"),i=new ict,s="",o=0,a=0;return e.start===-1&&delete e.start,i.readable=!0,i.destroy=()=>{i.destroyed=!0,i.emit("end"),i.emit("close")},aW.open(e.file,"a+","0644",(l,c)=>{if(l){t?t(l):i.emit("error",l),i.destroy();return}(function u(){if(i.destroyed){aW.close(c,sct);return}return aW.read(c,r,0,r.length,o,(f,p)=>{if(f){t?t(f):i.emit("error",f),i.destroy();return}if(!p)return s&&((e.start==null||a>e.start)&&(t?t(null,s):i.emit("line",s)),a++,s=""),setTimeout(u,1e3);let g=n.write(r.slice(0,p));t||i.emit("data",g),g=(s+g).split(/\n+/);let A=g.length-1,y=0;for(;y<A;y++)(e.start==null||a>e.start)&&(t?t(null,g[y]):i.emit("line",g[y])),a++;return s=g[A],o+=p,u()})})()}),t?i.destroy:i}});var OAe=x((Mkt,UAe)=>{"use strict";var Zd=require("fs"),Ks=require("path"),oct=Rpe(),act=require("zlib"),{MESSAGE:lct}=Ri(),{Stream:cct,PassThrough:LAe}=By(),uct=qh(),Ic=wx()("winston:file"),dct=require("os"),fct=PAe();UAe.exports=class extends uct{constructor(t={}){super(t),this.name=t.name||"file";function r(n,...i){i.slice(1).forEach(s=>{if(t[s])throw new Error(`Cannot set ${s} and ${n} together`)})}if(this._stream=new LAe,this._stream.setMaxListeners(30),this._onError=this._onError.bind(this),t.filename||t.dirname)r("filename or dirname","stream"),this._basename=this.filename=t.filename?Ks.basename(t.filename):"winston.log",this.dirname=t.dirname||Ks.dirname(t.filename),this.options=t.options||{flags:"a"};else if(t.stream)console.warn("options.stream will be removed in winston@4. Use winston.transports.Stream"),r("stream","filename","maxsize"),this._dest=this._stream.pipe(this._setupStream(t.stream)),this.dirname=Ks.dirname(this._dest.path);else throw new Error("Cannot log to file without filename or stream.");this.maxsize=t.maxsize||null,this.rotationFormat=t.rotationFormat||!1,this.zippedArchive=t.zippedArchive||!1,this.maxFiles=t.maxFiles||null,this.eol=typeof t.eol=="string"?t.eol:dct.EOL,this.tailable=t.tailable||!1,this.lazy=t.lazy||!1,this._size=0,this._pendingSize=0,this._created=0,this._drain=!1,this._opening=!1,this._ending=!1,this._fileExist=!1,this.dirname&&this._createLogDirIfNotExist(this.dirname),this.lazy||this.open()}finishIfEnding(){this._ending&&(this._opening?this.once("open",()=>{this._stream.once("finish",()=>this.emit("finish")),setImmediate(()=>this._stream.end())}):(this._stream.once("finish",()=>this.emit("finish")),setImmediate(()=>this._stream.end())))}log(t,r=()=>{}){if(this.silent)return r(),!0;if(this._drain){this._stream.once("drain",()=>{this._drain=!1,this.log(t,r)});return}if(this._rotate){this._stream.once("rotate",()=>{this._rotate=!1,this.log(t,r)});return}if(this.lazy){if(!this._fileExist){this._opening||this.open(),this.once("open",()=>{this._fileExist=!0,this.log(t,r)});return}if(this._needsNewFile(this._pendingSize)){this._dest.once("close",()=>{this._opening||this.open(),this.once("open",()=>{this.log(t,r)})});return}}let n=`${t[lct]}${this.eol}`,i=Buffer.byteLength(n);function s(){if(this._size+=i,this._pendingSize-=i,Ic("logged %s %s",this._size,n),this.emit("logged",t),!this._rotate&&!this._opening&&this._needsNewFile()){if(this.lazy){this._endStream(()=>{this.emit("fileclosed")});return}this._rotate=!0,this._endStream(()=>this._rotateFile())}}this._pendingSize+=i,this._opening&&!this.rotatedWhileOpening&&this._needsNewFile(this._size+this._pendingSize)&&(this.rotatedWhileOpening=!0);let o=this._stream.write(n,s.bind(this));return o?r():(this._drain=!0,this._stream.once("drain",()=>{this._drain=!1,r()})),Ic("written",o,this._drain),this.finishIfEnding(),o}query(t,r){typeof t=="function"&&(r=t,t={}),t=f(t);let n=Ks.join(this.dirname,this.filename),i="",s=[],o=0,a=Zd.createReadStream(n,{encoding:"utf8"});a.on("error",p=>{if(a.readable&&a.destroy(),!!r)return p.code!=="ENOENT"?r(p):r(null,s)}),a.on("data",p=>{p=(i+p).split(/\n+/);let g=p.length-1,A=0;for(;A<g;A++)(!t.start||o>=t.start)&&l(p[A]),o++;i=p[g]}),a.on("close",()=>{i&&l(i,!0),t.order==="desc"&&(s=s.reverse()),r&&r(null,s)});function l(p,g){try{let A=JSON.parse(p);u(A)&&c(A)}catch(A){g||a.emit("error",A)}}function c(p){if(t.rows&&s.length>=t.rows&&t.order!=="desc"){a.readable&&a.destroy();return}t.fields&&(p=t.fields.reduce((g,A)=>(g[A]=p[A],g),{})),t.order==="desc"&&s.length>=t.rows&&s.shift(),s.push(p)}function u(p){if(!p||typeof p!="object")return;let g=new Date(p.timestamp);if(!(t.from&&g<t.from||t.until&&g>t.until||t.level&&t.level!==p.level))return!0}function f(p){return p=p||{},p.rows=p.rows||p.limit||10,p.start=p.start||0,p.until=p.until||new Date,typeof p.until!="object"&&(p.until=new Date(p.until)),p.from=p.from||p.until-24*60*60*1e3,typeof p.from!="object"&&(p.from=new Date(p.from)),p.order=p.order||"desc",p}}stream(t={}){let r=Ks.join(this.dirname,this.filename),n=new cct,i={file:r,start:t.start};return n.destroy=fct(i,(s,o)=>{if(s)return n.emit("error",s);try{n.emit("data",o),o=JSON.parse(o),n.emit("log",o)}catch(a){n.emit("error",a)}}),n}open(){this.filename&&(this._opening||(this._opening=!0,this.stat((t,r)=>{if(t)return this.emit("error",t);Ic("stat done: %s { size: %s }",this.filename,r),this._size=r,this._dest=this._createStream(this._stream),this._opening=!1,this.once("open",()=>{this._stream.eventNames().includes("rotate")?this._stream.emit("rotate"):this._rotate=!1})})))}stat(t){let r=this._getFile(),n=Ks.join(this.dirname,r);Zd.stat(n,(i,s)=>{if(i&&i.code==="ENOENT")return Ic("ENOENT\xA0ok",n),this.filename=r,t(null,0);if(i)return Ic(`err ${i.code} ${n}`),t(i);if(!s||this._needsNewFile(s.size))return this._incFile(()=>this.stat(t));this.filename=r,t(null,s.size)})}close(t){this._stream&&this._stream.end(()=>{t&&t(),this.emit("flush"),this.emit("closed")})}_needsNewFile(t){return t=t||this._size,this.maxsize&&t>=this.maxsize}_onError(t){this.emit("error",t)}_setupStream(t){return t.on("error",this._onError),t}_cleanupStream(t){return t.removeListener("error",this._onError),t.destroy(),t}_rotateFile(){this._incFile(()=>this.open())}_endStream(t=()=>{}){this._dest?(this._stream.unpipe(this._dest),this._dest.end(()=>{this._cleanupStream(this._dest),t()})):t()}_createStream(t){let r=Ks.join(this.dirname,this.filename);Ic("create stream start",r,this.options);let n=Zd.createWriteStream(r,this.options).on("error",i=>Ic(i)).on("close",()=>Ic("close",n.path,n.bytesWritten)).on("open",()=>{Ic("file open ok",r),this.emit("open",r),t.pipe(n),this.rotatedWhileOpening&&(this._stream=new LAe,this._stream.setMaxListeners(30),this._rotateFile(),this.rotatedWhileOpening=!1,this._cleanupStream(n),t.end())});if(Ic("create stream ok",r),this.zippedArchive){let i=act.createGzip();return i.pipe(n),i}return n}_incFile(t){Ic("_incFile",this.filename);let r=Ks.extname(this._basename),n=Ks.basename(this._basename,r);this.tailable?this._checkMaxFilesTailable(r,n,t):(this._created+=1,this._checkMaxFilesIncrementing(r,n,t))}_getFile(){let t=Ks.extname(this._basename),r=Ks.basename(this._basename,t),n=this.rotationFormat?this.rotationFormat():this._created,i=!this.tailable&&this._created?`${r}${n}${t}`:`${r}${t}`;return this.zippedArchive&&!this.tailable?`${i}.gz`:i}_checkMaxFilesIncrementing(t,r,n){if(!this.maxFiles||this._created<this.maxFiles)return setImmediate(n);let i=this._created-this.maxFiles,s=i!==0?i:"",o=this.zippedArchive?".gz":"",a=`${r}${s}${t}${o}`,l=Ks.join(this.dirname,a);Zd.unlink(l,n)}_checkMaxFilesTailable(t,r,n){let i=[];if(!this.maxFiles)return;let s=this.zippedArchive?".gz":"";for(let o=this.maxFiles-1;o>1;o--)i.push(function(a,l){let c=`${r}${a-1}${t}${s}`,u=Ks.join(this.dirname,c);Zd.exists(u,f=>{if(!f)return l(null);c=`${r}${a}${t}${s}`,Zd.rename(u,Ks.join(this.dirname,c),l)})}.bind(this,o));oct(i,()=>{Zd.rename(Ks.join(this.dirname,`${r}${t}`),Ks.join(this.dirname,`${r}1${t}${s}`),n)})}_createLogDirIfNotExist(t){Zd.existsSync(t)||Zd.mkdirSync(t,{recursive:!0})}}});var VAe=x((Nkt,qAe)=>{"use strict";var hct=require("http"),gct=require("https"),{Stream:pct}=By(),Act=qh(),mct=ox();qAe.exports=class extends Act{constructor(t={}){super(t),this.options=t,this.name=t.name||"http",this.ssl=!!t.ssl,this.host=t.host||"localhost",this.port=t.port,this.auth=t.auth,this.path=t.path||"",this.agent=t.agent,this.headers=t.headers||{},this.headers["content-type"]="application/json",this.batch=t.batch||!1,this.batchInterval=t.batchInterval||5e3,this.batchCount=t.batchCount||10,this.batchOptions=[],this.batchTimeoutID=-1,this.batchCallback={},this.port||(this.port=this.ssl?443:80)}log(t,r){this._request(t,null,null,(n,i)=>{i&&i.statusCode!==200&&(n=new Error(`Invalid HTTP Status Code: ${i.statusCode}`)),n?this.emit("warn",n):this.emit("logged",t)}),r&&setImmediate(r)}query(t,r){typeof t=="function"&&(r=t,t={}),t={method:"query",params:this.normalizeQuery(t)};let n=t.params.auth||null;delete t.params.auth;let i=t.params.path||null;delete t.params.path,this._request(t,n,i,(s,o,a)=>{if(o&&o.statusCode!==200&&(s=new Error(`Invalid HTTP Status Code: ${o.statusCode}`)),s)return r(s);if(typeof a=="string")try{a=JSON.parse(a)}catch(l){return r(l)}r(null,a)})}stream(t={}){let r=new pct;t={method:"stream",params:t};let n=t.params.path||null;delete t.params.path;let i=t.params.auth||null;delete t.params.auth;let s="",o=this._request(t,i,n);return r.destroy=()=>o.destroy(),o.on("data",a=>{a=(s+a).split(/\n+/);let l=a.length-1,c=0;for(;c<l;c++)try{r.emit("log",JSON.parse(a[c]))}catch(u){r.emit("error",u)}s=a[l]}),o.on("error",a=>r.emit("error",a)),r}_request(t,r,n,i){t=t||{},r=r||this.auth,n=n||this.path||"",this.batch?this._doBatch(t,i,r,n):this._doRequest(t,i,r,n)}_doBatch(t,r,n,i){if(this.batchOptions.push(t),this.batchOptions.length===1){let s=this;this.batchCallback=r,this.batchTimeoutID=setTimeout(function(){s.batchTimeoutID=-1,s._doBatchRequest(s.batchCallback,n,i)},this.batchInterval)}this.batchOptions.length===this.batchCount&&this._doBatchRequest(this.batchCallback,n,i)}_doBatchRequest(t,r,n){this.batchTimeoutID>0&&(clearTimeout(this.batchTimeoutID),this.batchTimeoutID=-1);let i=this.batchOptions.slice();this.batchOptions=[],this._doRequest(i,t,r,n)}_doRequest(t,r,n,i){let s=Object.assign({},this.headers);n&&n.bearer&&(s.Authorization=`Bearer ${n.bearer}`);let o=(this.ssl?gct:hct).request({...this.options,method:"POST",host:this.host,port:this.port,path:`/${i.replace(/^\//,"")}`,headers:s,auth:n&&n.username&&n.password?`${n.username}:${n.password}`:"",agent:this.agent});o.on("error",r),o.on("response",a=>a.on("end",()=>r(null,a)).resume()),o.end(Buffer.from(mct(t,this.options.replacer),"utf8"))}}});var lW=x((Pkt,HAe)=>{"use strict";var Du=e=>e!==null&&typeof e=="object"&&typeof e.pipe=="function";Du.writable=e=>Du(e)&&e.writable!==!1&&typeof e._write=="function"&&typeof e._writableState=="object";Du.readable=e=>Du(e)&&e.readable!==!1&&typeof e._read=="function"&&typeof e._readableState=="object";Du.duplex=e=>Du.writable(e)&&Du.readable(e);Du.transform=e=>Du.duplex(e)&&typeof e._transform=="function";HAe.exports=Du});var GAe=x((Ukt,WAe)=>{"use strict";var yct=lW(),{MESSAGE:Cct}=Ri(),vct=require("os"),Ect=qh();WAe.exports=class extends Ect{constructor(t={}){if(super(t),!t.stream||!yct(t.stream))throw new Error("options.stream is required.");this._stream=t.stream,this._stream.setMaxListeners(1/0),this.isObjectMode=t.stream._writableState.objectMode,this.eol=typeof t.eol=="string"?t.eol:vct.EOL}log(t,r){if(setImmediate(()=>this.emit("logged",t)),this.isObjectMode){this._stream.write(t),r&&r();return}this._stream.write(`${t[Cct]}${this.eol}`),r&&r()}}});var $Ae=x(Ix=>{"use strict";Object.defineProperty(Ix,"Console",{configurable:!0,enumerable:!0,get(){return zge()}});Object.defineProperty(Ix,"File",{configurable:!0,enumerable:!0,get(){return OAe()}});Object.defineProperty(Ix,"Http",{configurable:!0,enumerable:!0,get(){return VAe()}});Object.defineProperty(Ix,"Stream",{configurable:!0,enumerable:!0,get(){return GAe()}})});var dk=x(Sx=>{"use strict";var uk=cH(),{configs:cW}=Ri();Sx.cli=uk.levels(cW.cli);Sx.npm=uk.levels(cW.npm);Sx.syslog=uk.levels(cW.syslog);Sx.addColors=uk.levels});var KAe=x((fk,YAe)=>{"use strict";Object.defineProperty(fk,"__esModule",{value:!0});var bct=OR(),xct=aA(bct),_ct=JR(),wct=aA(_ct),Ict=GH(),Sct=aA(Ict),Bct=VH(),Dct=aA(Bct),Tct=HH(),Rct=aA(Tct),kct=sA(),Fct=aA(kct),Mct=Sy(),Qct=aA(Mct);function aA(e){return e&&e.__esModule?e:{default:e}}function Nct(e,t,r){r=(0,Dct.default)(r);var n=0,i=0,{length:s}=e,o=!1;s===0&&r(null);function a(l,c){l===!1&&(o=!0),o!==!0&&(l?r(l):(++i===s||c===wct.default)&&r(null))}for(;n<s;n++)t(e[n],n,(0,Rct.default)(a))}function Pct(e,t,r){return(0,Sct.default)(e,1/0,t,r)}function Lct(e,t,r){var n=(0,xct.default)(e)?Nct:Pct;return n(e,(0,Fct.default)(t),r)}fk.default=(0,Qct.default)(Lct,3);YAe.exports=fk.default});var JAe=x((hk,zAe)=>{"use strict";Object.defineProperty(hk,"__esModule",{value:!0});hk.default=Uct;function Uct(e){return(t,r,n)=>e(t,n)}zAe.exports=hk.default});var Ak=x((pk,jAe)=>{"use strict";Object.defineProperty(pk,"__esModule",{value:!0});var Oct=KAe(),qct=gk(Oct),Vct=JAe(),Hct=gk(Vct),Wct=sA(),Gct=gk(Wct),$ct=Sy(),Yct=gk($ct);function gk(e){return e&&e.__esModule?e:{default:e}}function Kct(e,t,r){return(0,qct.default)(e,(0,Hct.default)((0,Gct.default)(t)),r)}pk.default=(0,Yct.default)(Kct,3);jAe.exports=pk.default});var XAe=x((Vkt,ZAe)=>{"use strict";var zct=Object.prototype.toString;ZAe.exports=function(t){if(typeof t.displayName=="string"&&t.constructor.name)return t.displayName;if(typeof t.name=="string"&&t.name)return t.name;if(typeof t=="object"&&t.constructor&&typeof t.constructor.name=="string")return t.constructor.name;var r=t.toString(),n=zct.call(t).slice(8,-1);return n==="Function"?r=r.substring(r.indexOf("(")+1,r.indexOf(")")):r=n,r||"anonymous"}});var uW=x((Hkt,eme)=>{"use strict";var Jct=XAe();eme.exports=function(t){var r=0,n;function i(){return r||(r=1,n=t.apply(this,arguments),t=null),n}return i.displayName=Jct(t),i}});var dW=x(Dx=>{"use strict";Dx.get=function(e){var t=Error.stackTraceLimit;Error.stackTraceLimit=1/0;var r={},n=Error.prepareStackTrace;Error.prepareStackTrace=function(s,o){return o},Error.captureStackTrace(r,e||Dx.get);var i=r.stack;return Error.prepareStackTrace=n,Error.stackTraceLimit=t,i};Dx.parse=function(e){if(!e.stack)return[];var t=this,r=e.stack.split(`
`).slice(1);return r.map(function(n){if(n.match(/^\s*[-]{4,}$/))return t._createParsedCallSite({fileName:n,lineNumber:null,functionName:null,typeName:null,methodName:null,columnNumber:null,native:null});var i=n.match(/at (?:(.+)\s+\()?(?:(.+?):(\d+)(?::(\d+))?|([^)]+))\)?/);if(i){var s=null,o=null,a=null,l=null,c=null,u=i[5]==="native";if(i[1]){a=i[1];var f=a.lastIndexOf(".");if(a[f-1]=="."&&f--,f>0){s=a.substr(0,f),o=a.substr(f+1);var p=s.indexOf(".Module");p>0&&(a=a.substr(p+1),s=s.substr(0,p))}l=null}o&&(l=s,c=o),o==="<anonymous>"&&(c=null,a=null);var g={fileName:i[2]||null,lineNumber:parseInt(i[3],10)||null,functionName:a,typeName:l,methodName:c,columnNumber:parseInt(i[4],10)||null,native:u};return t._createParsedCallSite(g)}}).filter(function(n){return!!n})};function Bx(e){for(var t in e)this[t]=e[t]}var jct=["this","typeName","functionName","methodName","fileName","lineNumber","columnNumber","function","evalOrigin"],Zct=["topLevel","eval","native","constructor"];jct.forEach(function(e){Bx.prototype[e]=null,Bx.prototype["get"+e[0].toUpperCase()+e.substr(1)]=function(){return this[e]}});Zct.forEach(function(e){Bx.prototype[e]=!1,Bx.prototype["is"+e[0].toUpperCase()+e.substr(1)]=function(){return this[e]}});Dx._createParsedCallSite=function(e){return new Bx(e)}});var fW=x(($kt,tme)=>{"use strict";var{Writable:Xct}=By();tme.exports=class extends Xct{constructor(t){if(super({objectMode:!0}),!t)throw new Error("ExceptionStream requires a TransportStream instance.");this.handleExceptions=!0,this.transport=t}_write(t,r,n){return t.exception?this.transport.log(t,n):(n(),!0)}}});var gW=x((Kkt,ime)=>{"use strict";var rme=require("os"),eut=Ak(),hW=wx()("winston:exception"),tut=uW(),nme=dW(),rut=fW();ime.exports=class{constructor(t){if(!t)throw new Error("Logger is required to handle exceptions");this.logger=t,this.handlers=new Map}handle(...t){t.forEach(r=>{if(Array.isArray(r))return r.forEach(n=>this._addHandler(n));this._addHandler(r)}),this.catcher||(this.catcher=this._uncaughtException.bind(this),process.on("uncaughtException",this.catcher))}unhandle(){this.catcher&&(process.removeListener("uncaughtException",this.catcher),this.catcher=!1,Array.from(this.handlers.values()).forEach(t=>this.logger.unpipe(t)))}getAllInfo(t){let r=null;return t&&(r=typeof t=="string"?t:t.message),{error:t,level:"error",message:[`uncaughtException: ${r||"(no error message)"}`,t&&t.stack||"  No stack trace"].join(`
`),stack:t&&t.stack,exception:!0,date:new Date().toString(),process:this.getProcessInfo(),os:this.getOsInfo(),trace:this.getTrace(t)}}getProcessInfo(){return{pid:process.pid,uid:process.getuid?process.getuid():null,gid:process.getgid?process.getgid():null,cwd:process.cwd(),execPath:process.execPath,version:process.version,argv:process.argv,memoryUsage:process.memoryUsage()}}getOsInfo(){return{loadavg:rme.loadavg(),uptime:rme.uptime()}}getTrace(t){return(t?nme.parse(t):nme.get()).map(n=>({column:n.getColumnNumber(),file:n.getFileName(),function:n.getFunctionName(),line:n.getLineNumber(),method:n.getMethodName(),native:n.isNative()}))}_addHandler(t){if(!this.handlers.has(t)){t.handleExceptions=!0;let r=new rut(t);this.handlers.set(t,r),this.logger.pipe(r)}}_uncaughtException(t){let r=this.getAllInfo(t),n=this._getExceptionHandlers(),i=typeof this.logger.exitOnError=="function"?this.logger.exitOnError(t):this.logger.exitOnError,s;!n.length&&i&&(console.warn("winston: exitOnError cannot be true with no exception handlers."),console.warn("winston: not exiting process."),i=!1);function o(){hW("doExit",i),hW("process._exiting",process._exiting),i&&!process._exiting&&(s&&clearTimeout(s),process.exit(1))}if(!n||n.length===0)return process.nextTick(o);eut(n,(a,l)=>{let c=tut(l),u=a.transport||a;function f(p){return()=>{hW(p),c()}}u._ending=!0,u.once("finish",f("finished")),u.once("error",f("error"))},()=>i&&o()),this.logger.log(r),i&&(s=setTimeout(o,3e3))}_getExceptionHandlers(){return this.logger.transports.filter(t=>(t.transport||t).handleExceptions)}}});var AW=x((Jkt,ame)=>{"use strict";var sme=require("os"),nut=Ak(),pW=wx()("winston:rejection"),iut=uW(),ome=dW(),sut=fW();ame.exports=class{constructor(t){if(!t)throw new Error("Logger is required to handle rejections");this.logger=t,this.handlers=new Map}handle(...t){t.forEach(r=>{if(Array.isArray(r))return r.forEach(n=>this._addHandler(n));this._addHandler(r)}),this.catcher||(this.catcher=this._unhandledRejection.bind(this),process.on("unhandledRejection",this.catcher))}unhandle(){this.catcher&&(process.removeListener("unhandledRejection",this.catcher),this.catcher=!1,Array.from(this.handlers.values()).forEach(t=>this.logger.unpipe(t)))}getAllInfo(t){let r=null;return t&&(r=typeof t=="string"?t:t.message),{error:t,level:"error",message:[`unhandledRejection: ${r||"(no error message)"}`,t&&t.stack||"  No stack trace"].join(`
`),stack:t&&t.stack,exception:!0,date:new Date().toString(),process:this.getProcessInfo(),os:this.getOsInfo(),trace:this.getTrace(t)}}getProcessInfo(){return{pid:process.pid,uid:process.getuid?process.getuid():null,gid:process.getgid?process.getgid():null,cwd:process.cwd(),execPath:process.execPath,version:process.version,argv:process.argv,memoryUsage:process.memoryUsage()}}getOsInfo(){return{loadavg:sme.loadavg(),uptime:sme.uptime()}}getTrace(t){return(t?ome.parse(t):ome.get()).map(n=>({column:n.getColumnNumber(),file:n.getFileName(),function:n.getFunctionName(),line:n.getLineNumber(),method:n.getMethodName(),native:n.isNative()}))}_addHandler(t){if(!this.handlers.has(t)){t.handleRejections=!0;let r=new sut(t);this.handlers.set(t,r),this.logger.pipe(r)}}_unhandledRejection(t){let r=this.getAllInfo(t),n=this._getRejectionHandlers(),i=typeof this.logger.exitOnError=="function"?this.logger.exitOnError(t):this.logger.exitOnError,s;!n.length&&i&&(console.warn("winston: exitOnError cannot be true with no rejection handlers."),console.warn("winston: not exiting process."),i=!1);function o(){pW("doExit",i),pW("process._exiting",process._exiting),i&&!process._exiting&&(s&&clearTimeout(s),process.exit(1))}if(!n||n.length===0)return process.nextTick(o);nut(n,(a,l)=>{let c=iut(l),u=a.transport||a;function f(p){return()=>{pW(p),c()}}u._ending=!0,u.once("finish",f("finished")),u.once("error",f("error"))},()=>i&&o()),this.logger.log(r),i&&(s=setTimeout(o,3e3))}_getRejectionHandlers(){return this.logger.transports.filter(t=>(t.transport||t).handleRejections)}}});var cme=x((jkt,lme)=>{"use strict";var mW=class{constructor(t){let r=mk();if(typeof t!="object"||Array.isArray(t)||!(t instanceof r))throw new Error("Logger is required for profiling");this.logger=t,this.start=Date.now()}done(...t){typeof t[t.length-1]=="function"&&(console.warn("Callback function no longer supported as of winston@3.0.0"),t.pop());let r=typeof t[t.length-1]=="object"?t.pop():{};return r.level=r.level||"info",r.durationMs=Date.now()-this.start,this.logger.write(r)}};lme.exports=mW});var mk=x((Zkt,hme)=>{"use strict";var{Stream:out,Transform:aut}=By(),ume=Ak(),{LEVEL:Tu,SPLAT:dme}=Ri(),fme=lW(),lut=gW(),cut=AW(),uut=UH(),dut=cme(),{warn:fut}=uH(),hut=dk(),gut=/%[scdjifoO%]/g,yk=class extends aut{constructor(t){super({objectMode:!0}),this.configure(t)}child(t){let r=this;return Object.create(r,{write:{value:function(n){let i=Object.assign({},t,n);n instanceof Error&&(i.stack=n.stack,i.message=n.message),r.write(i)}}})}configure({silent:t,format:r,defaultMeta:n,levels:i,level:s="info",exitOnError:o=!0,transports:a,colors:l,emitErrs:c,formatters:u,padLevels:f,rewriters:p,stripColors:g,exceptionHandlers:A,rejectionHandlers:y}={}){if(this.transports.length&&this.clear(),this.silent=t,this.format=r||this.format||iH()(),this.defaultMeta=n||null,this.levels=i||this.levels||hut.npm.levels,this.level=s,this.exceptions&&this.exceptions.unhandle(),this.rejections&&this.rejections.unhandle(),this.exceptions=new lut(this),this.rejections=new cut(this),this.profilers={},this.exitOnError=o,a&&(a=Array.isArray(a)?a:[a],a.forEach(C=>this.add(C))),l||c||u||f||p||g)throw new Error(["{ colors, emitErrs, formatters, padLevels, rewriters, stripColors } were removed in winston@3.0.0.","Use a custom winston.format(function) instead.","See: https://github.com/winstonjs/winston/tree/master/UPGRADE-3.0.md"].join(`
`));A&&this.exceptions.handle(A),y&&this.rejections.handle(y)}isLevelEnabled(t){let r=yW(this.levels,t);if(r===null)return!1;let n=yW(this.levels,this.level);return n===null?!1:!this.transports||this.transports.length===0?n>=r:this.transports.findIndex(s=>{let o=yW(this.levels,s.level);return o===null&&(o=n),o>=r})!==-1}log(t,r,...n){if(arguments.length===1)return t[Tu]=t.level,this._addDefaultMeta(t),this.write(t),this;if(arguments.length===2)return r&&typeof r=="object"?(r[Tu]=r.level=t,this._addDefaultMeta(r),this.write(r),this):(r={[Tu]:t,level:t,message:r},this._addDefaultMeta(r),this.write(r),this);let[i]=n;if(typeof i=="object"&&i!==null&&!(r&&r.match&&r.match(gut))){let o=Object.assign({},this.defaultMeta,i,{[Tu]:t,[dme]:n,level:t,message:r});return i.message&&(o.message=`${o.message} ${i.message}`),i.stack&&(o.stack=i.stack),this.write(o),this}return this.write(Object.assign({},this.defaultMeta,{[Tu]:t,[dme]:n,level:t,message:r})),this}_transform(t,r,n){if(this.silent)return n();t[Tu]||(t[Tu]=t.level),!this.levels[t[Tu]]&&this.levels[t[Tu]]!==0&&console.error("[winston] Unknown logger level: %s",t[Tu]),this._readableState.pipes||console.error("[winston] Attempt to write logs with no transports, which can increase memory usage: %j",t);try{this.push(this.format.transform(t,this.format.options))}finally{this._writableState.sync=!1,n()}}_final(t){let r=this.transports.slice();ume(r,(n,i)=>{if(!n||n.finished)return setImmediate(i);n.once("finish",i),n.end()},t)}add(t){let r=!fme(t)||t.log.length>2?new uut({transport:t}):t;if(!r._writableState||!r._writableState.objectMode)throw new Error("Transports must WritableStreams in objectMode. Set { objectMode: true }.");return this._onEvent("error",r),this._onEvent("warn",r),this.pipe(r),t.handleExceptions&&this.exceptions.handle(),t.handleRejections&&this.rejections.handle(),this}remove(t){if(!t)return this;let r=t;return(!fme(t)||t.log.length>2)&&(r=this.transports.filter(n=>n.transport===t)[0]),r&&this.unpipe(r),this}clear(){return this.unpipe(),this}close(){return this.exceptions.unhandle(),this.rejections.unhandle(),this.clear(),this.emit("close"),this}setLevels(){fut.deprecated("setLevels")}query(t,r){typeof t=="function"&&(r=t,t={}),t=t||{};let n={},i=Object.assign({},t.query||{});function s(a,l){t.query&&typeof a.formatQuery=="function"&&(t.query=a.formatQuery(i)),a.query(t,(c,u)=>{if(c)return l(c);typeof a.formatResults=="function"&&(u=a.formatResults(u,t.format)),l(null,u)})}function o(a,l){s(a,(c,u)=>{l&&(u=c||u,u&&(n[a.name]=u),l()),l=null})}ume(this.transports.filter(a=>!!a.query),o,()=>r(null,n))}stream(t={}){let r=new out,n=[];return r._streams=n,r.destroy=()=>{let i=n.length;for(;i--;)n[i].destroy()},this.transports.filter(i=>!!i.stream).forEach(i=>{let s=i.stream(t);s&&(n.push(s),s.on("log",o=>{o.transport=o.transport||[],o.transport.push(i.name),r.emit("log",o)}),s.on("error",o=>{o.transport=o.transport||[],o.transport.push(i.name),r.emit("error",o)}))}),r}startTimer(){return new dut(this)}profile(t,...r){let n=Date.now();if(this.profilers[t]){let i=this.profilers[t];delete this.profilers[t],typeof r[r.length-2]=="function"&&(console.warn("Callback function no longer supported as of winston@3.0.0"),r.pop());let s=typeof r[r.length-1]=="object"?r.pop():{};return s.level=s.level||"info",s.durationMs=n-i,s.message=s.message||t,this.write(s)}return this.profilers[t]=n,this}handleExceptions(...t){console.warn("Deprecated: .handleExceptions() will be removed in winston@4. Use .exceptions.handle()"),this.exceptions.handle(...t)}unhandleExceptions(...t){console.warn("Deprecated: .unhandleExceptions() will be removed in winston@4. Use .exceptions.unhandle()"),this.exceptions.unhandle(...t)}cli(){throw new Error(["Logger.cli() was removed in winston@3.0.0","Use a custom winston.formats.cli() instead.","See: https://github.com/winstonjs/winston/tree/master/UPGRADE-3.0.md"].join(`
`))}_onEvent(t,r){function n(i){t==="error"&&!this.transports.includes(r)&&this.add(r),this.emit(t,i,r)}r["__winston"+t]||(r["__winston"+t]=n.bind(this),r.on(t,r["__winston"+t]))}_addDefaultMeta(t){this.defaultMeta&&Object.assign(t,this.defaultMeta)}};function yW(e,t){let r=e[t];return!r&&r!==0?null:r}Object.defineProperty(yk.prototype,"transports",{configurable:!1,enumerable:!0,get(){let{pipes:e}=this._readableState;return Array.isArray(e)?e:[e].filter(Boolean)}});hme.exports=yk});var CW=x((Xkt,gme)=>{"use strict";var{LEVEL:put}=Ri(),Aut=dk(),mut=mk(),yut=wx()("winston:create-logger");function Cut(e){return"is"+e.charAt(0).toUpperCase()+e.slice(1)+"Enabled"}gme.exports=function(e={}){e.levels=e.levels||Aut.npm.levels;class t extends mut{constructor(i){super(i)}}let r=new t(e);return Object.keys(e.levels).forEach(function(n){if(yut('Define prototype method for "%s"',n),n==="log"){console.warn('Level "log" not defined: conflicts with the method "log". Use a different level name.');return}t.prototype[n]=function(...i){let s=this||r;if(i.length===1){let[o]=i,a=o&&o.message&&o||{message:o};return a.level=a[put]=n,s._addDefaultMeta(a),s.write(a),this||r}return i.length===0?(s.log(n,""),s):s.log(n,...i)},t.prototype[Cut(n)]=function(){return(this||r).isLevelEnabled(n)}}),r}});var Ame=x((tFt,pme)=>{"use strict";var vut=CW();pme.exports=class{constructor(t={}){this.loggers=new Map,this.options=t}add(t,r){if(!this.loggers.has(t)){r=Object.assign({},r||this.options);let n=r.transports||this.options.transports;n?r.transports=Array.isArray(n)?n.slice():[n]:r.transports=[];let i=vut(r);i.on("close",()=>this._delete(t)),this.loggers.set(t,i)}return this.loggers.get(t)}get(t,r){return this.add(t,r)}has(t){return!!this.loggers.has(t)}close(t){if(t)return this._removeLogger(t);this.loggers.forEach((r,n)=>this._removeLogger(n))}_removeLogger(t){if(!this.loggers.has(t))return;this.loggers.get(t).close(),this._delete(t)}_delete(t){this.loggers.delete(t)}}});var yme=x(bn=>{"use strict";var mme=cH(),{warn:Tx}=uH();bn.version=Khe().version;bn.transports=$Ae();bn.config=dk();bn.addColors=mme.levels;bn.format=mme.format;bn.createLogger=CW();bn.Logger=mk();bn.ExceptionHandler=gW();bn.RejectionHandler=AW();bn.Container=Ame();bn.Transport=qh();bn.loggers=new bn.Container;var Xd=bn.createLogger();Object.keys(bn.config.npm.levels).concat(["log","query","stream","add","remove","clear","profile","startTimer","handleExceptions","unhandleExceptions","handleRejections","unhandleRejections","configure","child"]).forEach(e=>bn[e]=(...t)=>Xd[e](...t));Object.defineProperty(bn,"level",{get(){return Xd.level},set(e){Xd.level=e}});Object.defineProperty(bn,"exceptions",{get(){return Xd.exceptions}});["exitOnError"].forEach(e=>{Object.defineProperty(bn,e,{get(){return Xd[e]},set(t){Xd[e]=t}})});Object.defineProperty(bn,"default",{get(){return{exceptionHandlers:Xd.exceptionHandlers,rejectionHandlers:Xd.rejectionHandlers,transports:Xd.transports}}});Tx.deprecated(bn,"setLevels");Tx.forFunctions(bn,"useFormat",["cli"]);Tx.forProperties(bn,"useFormat",["padLevels","stripColors"]);Tx.forFunctions(bn,"deprecated",["addRewriter","addFilter","clone","extend"]);Tx.forProperties(bn,"deprecated",["emitErrs","levelLength"])});var Eme=x((pFt,xut)=>{xut.exports=[{name:"C",vscode_name:"c",type:"programming",extensions:[".c",".cats",".h",".idc",".w"]},{name:"C++",vscode_name:"cpp",type:"programming",extensions:[".cpp",".c++",".cc",".cp",".cxx",".h",".h++",".hh",".hpp",".hxx",".inc",".inl",".ipp",".tcc",".tpp"]},{name:"Go",vscode_name:"go",type:"programming",extensions:[".go"]},{name:"Java",vscode_name:"java",type:"programming",extensions:[".java"]},{name:"JavaScript",vscode_name:"javascript",type:"programming",extensions:[".js","._js",".bones",".es",".es6",".frag",".gs",".jake",".jsb",".jscad",".jsfl",".jsm",".jss",".njs",".pac",".sjs",".ssjs",".sublime-build",".sublime-commands",".sublime-completions",".sublime-keymap",".sublime-macro",".sublime-menu",".sublime-mousemap",".sublime-project",".sublime-settings",".sublime-theme",".sublime-workspace",".sublime_metrics",".sublime_session",".xsjs",".xsjslib"]},{name:"Python",vscode_name:"python",type:"programming",extensions:[".py",".bzl",".cgi",".fcgi",".gyp",".lmi",".pyde",".pyp",".pyt",".pyw",".rpy",".tac",".wsgi",".xpy"]}]});var Fme=x((QMt,kme)=>{"use strict";var Rme="Expected a function",Dme=NaN,Tut="[object Symbol]",Rut=/^\s+|\s+$/g,kut=/^[-+]0x[0-9a-f]+$/i,Fut=/^0b[01]+$/i,Mut=/^0o[0-7]+$/i,Qut=parseInt,Nut=typeof global=="object"&&global&&global.Object===Object&&global,Put=typeof self=="object"&&self&&self.Object===Object&&self,Lut=Nut||Put||Function("return this")(),Uut=Object.prototype,Out=Uut.toString,qut=Math.max,Vut=Math.min,BW=function(){return Lut.Date.now()};function Hut(e,t,r){var n,i,s,o,a,l,c=0,u=!1,f=!1,p=!0;if(typeof e!="function")throw new TypeError(Rme);t=Tme(t)||0,Mk(r)&&(u=!!r.leading,f="maxWait"in r,s=f?qut(Tme(r.maxWait)||0,t):s,p="trailing"in r?!!r.trailing:p);function g(Q){var W=n,Z=i;return n=i=void 0,c=Q,o=e.apply(Z,W),o}function A(Q){return c=Q,a=setTimeout(v,t),u?g(Q):o}function y(Q){var W=Q-l,Z=Q-c,$=t-W;return f?Vut($,s-Z):$}function C(Q){var W=Q-l,Z=Q-c;return l===void 0||W>=t||W<0||f&&Z>=s}function v(){var Q=BW();if(C(Q))return b(Q);a=setTimeout(v,y(Q))}function b(Q){return a=void 0,p&&n?g(Q):(n=i=void 0,o)}function w(){a!==void 0&&clearTimeout(a),c=0,n=l=i=a=void 0}function B(){return a===void 0?o:b(BW())}function F(){var Q=BW(),W=C(Q);if(n=arguments,i=this,l=Q,W){if(a===void 0)return A(l);if(f)return a=setTimeout(v,t),g(l)}return a===void 0&&(a=setTimeout(v,t)),o}return F.cancel=w,F.flush=B,F}function Wut(e,t,r){var n=!0,i=!0;if(typeof e!="function")throw new TypeError(Rme);return Mk(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),Hut(e,t,{leading:n,maxWait:t,trailing:i})}function Mk(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function Gut(e){return!!e&&typeof e=="object"}function $ut(e){return typeof e=="symbol"||Gut(e)&&Out.call(e)==Tut}function Tme(e){if(typeof e=="number")return e;if($ut(e))return Dme;if(Mk(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Mk(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(Rut,"");var r=Fut.test(e);return r||Mut.test(e)?Qut(e.slice(2),r?2:8):kut.test(e)?Dme:+e}kme.exports=Wut});var Qme=x((NMt,Mme)=>{"use strict";var DW=class{constructor(t){this.value=t,this.next=void 0}},TW=class{constructor(){this.clear()}enqueue(t){let r=new DW(t);this._head?(this._tail.next=r,this._tail=r):(this._head=r,this._tail=r),this._size++}dequeue(){let t=this._head;if(t)return this._head=this._head.next,this._size--,t.value}clear(){this._head=void 0,this._tail=void 0,this._size=0}get size(){return this._size}*[Symbol.iterator](){let t=this._head;for(;t;)yield t.value,t=t.next}};Mme.exports=TW});var Pme=x((PMt,Nme)=>{"use strict";var Yut=Qme(),Kut=e=>{if(!((Number.isInteger(e)||e===1/0)&&e>0))throw new TypeError("Expected `concurrency` to be a number from 1 and up");let t=new Yut,r=0,n=()=>{r--,t.size>0&&t.dequeue()()},i=async(a,l,...c)=>{r++;let u=(async()=>a(...c))();l(u);try{await u}catch{}n()},s=(a,l,...c)=>{t.enqueue(i.bind(null,a,l,...c)),(async()=>(await Promise.resolve(),r<e&&t.size>0&&t.dequeue()()))()},o=(a,...l)=>new Promise(c=>{s(a,c,...l)});return Object.defineProperties(o,{activeCount:{get:()=>r},pendingCount:{get:()=>t.size},clearQueue:{value:()=>{t.clear()}}}),o};Nme.exports=Kut});var Wx=x((I1t,g0e)=>{"use strict";var odt="2.0.0",adt=Number.MAX_SAFE_INTEGER||9007199254740991,ldt=16,cdt=250,udt=["major","premajor","minor","preminor","patch","prepatch","prerelease"];g0e.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:ldt,MAX_SAFE_BUILD_LENGTH:cdt,MAX_SAFE_INTEGER:adt,RELEASE_TYPES:udt,SEMVER_SPEC_VERSION:odt,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var Gx=x((S1t,p0e)=>{"use strict";var ddt=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};p0e.exports=ddt});var Vy=x((sf,A0e)=>{"use strict";var{MAX_SAFE_COMPONENT_LENGTH:HW,MAX_SAFE_BUILD_LENGTH:fdt,MAX_LENGTH:hdt}=Wx(),gdt=Gx();sf=A0e.exports={};var pdt=sf.re=[],Adt=sf.safeRe=[],Le=sf.src=[],Ue=sf.t={},mdt=0,WW="[a-zA-Z0-9-]",ydt=[["\\s",1],["\\d",hdt],[WW,fdt]],Cdt=e=>{for(let[t,r]of ydt)e=e.split(`${t}*`).join(`${t}{0,${r}}`).split(`${t}+`).join(`${t}{1,${r}}`);return e},Qt=(e,t,r)=>{let n=Cdt(t),i=mdt++;gdt(e,i,t),Ue[e]=i,Le[i]=t,pdt[i]=new RegExp(t,r?"g":void 0),Adt[i]=new RegExp(n,r?"g":void 0)};Qt("NUMERICIDENTIFIER","0|[1-9]\\d*");Qt("NUMERICIDENTIFIERLOOSE","\\d+");Qt("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${WW}*`);Qt("MAINVERSION",`(${Le[Ue.NUMERICIDENTIFIER]})\\.(${Le[Ue.NUMERICIDENTIFIER]})\\.(${Le[Ue.NUMERICIDENTIFIER]})`);Qt("MAINVERSIONLOOSE",`(${Le[Ue.NUMERICIDENTIFIERLOOSE]})\\.(${Le[Ue.NUMERICIDENTIFIERLOOSE]})\\.(${Le[Ue.NUMERICIDENTIFIERLOOSE]})`);Qt("PRERELEASEIDENTIFIER",`(?:${Le[Ue.NUMERICIDENTIFIER]}|${Le[Ue.NONNUMERICIDENTIFIER]})`);Qt("PRERELEASEIDENTIFIERLOOSE",`(?:${Le[Ue.NUMERICIDENTIFIERLOOSE]}|${Le[Ue.NONNUMERICIDENTIFIER]})`);Qt("PRERELEASE",`(?:-(${Le[Ue.PRERELEASEIDENTIFIER]}(?:\\.${Le[Ue.PRERELEASEIDENTIFIER]})*))`);Qt("PRERELEASELOOSE",`(?:-?(${Le[Ue.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${Le[Ue.PRERELEASEIDENTIFIERLOOSE]})*))`);Qt("BUILDIDENTIFIER",`${WW}+`);Qt("BUILD",`(?:\\+(${Le[Ue.BUILDIDENTIFIER]}(?:\\.${Le[Ue.BUILDIDENTIFIER]})*))`);Qt("FULLPLAIN",`v?${Le[Ue.MAINVERSION]}${Le[Ue.PRERELEASE]}?${Le[Ue.BUILD]}?`);Qt("FULL",`^${Le[Ue.FULLPLAIN]}$`);Qt("LOOSEPLAIN",`[v=\\s]*${Le[Ue.MAINVERSIONLOOSE]}${Le[Ue.PRERELEASELOOSE]}?${Le[Ue.BUILD]}?`);Qt("LOOSE",`^${Le[Ue.LOOSEPLAIN]}$`);Qt("GTLT","((?:<|>)?=?)");Qt("XRANGEIDENTIFIERLOOSE",`${Le[Ue.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);Qt("XRANGEIDENTIFIER",`${Le[Ue.NUMERICIDENTIFIER]}|x|X|\\*`);Qt("XRANGEPLAIN",`[v=\\s]*(${Le[Ue.XRANGEIDENTIFIER]})(?:\\.(${Le[Ue.XRANGEIDENTIFIER]})(?:\\.(${Le[Ue.XRANGEIDENTIFIER]})(?:${Le[Ue.PRERELEASE]})?${Le[Ue.BUILD]}?)?)?`);Qt("XRANGEPLAINLOOSE",`[v=\\s]*(${Le[Ue.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Le[Ue.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Le[Ue.XRANGEIDENTIFIERLOOSE]})(?:${Le[Ue.PRERELEASELOOSE]})?${Le[Ue.BUILD]}?)?)?`);Qt("XRANGE",`^${Le[Ue.GTLT]}\\s*${Le[Ue.XRANGEPLAIN]}$`);Qt("XRANGELOOSE",`^${Le[Ue.GTLT]}\\s*${Le[Ue.XRANGEPLAINLOOSE]}$`);Qt("COERCEPLAIN",`(^|[^\\d])(\\d{1,${HW}})(?:\\.(\\d{1,${HW}}))?(?:\\.(\\d{1,${HW}}))?`);Qt("COERCE",`${Le[Ue.COERCEPLAIN]}(?:$|[^\\d])`);Qt("COERCEFULL",Le[Ue.COERCEPLAIN]+`(?:${Le[Ue.PRERELEASE]})?(?:${Le[Ue.BUILD]})?(?:$|[^\\d])`);Qt("COERCERTL",Le[Ue.COERCE],!0);Qt("COERCERTLFULL",Le[Ue.COERCEFULL],!0);Qt("LONETILDE","(?:~>?)");Qt("TILDETRIM",`(\\s*)${Le[Ue.LONETILDE]}\\s+`,!0);sf.tildeTrimReplace="$1~";Qt("TILDE",`^${Le[Ue.LONETILDE]}${Le[Ue.XRANGEPLAIN]}$`);Qt("TILDELOOSE",`^${Le[Ue.LONETILDE]}${Le[Ue.XRANGEPLAINLOOSE]}$`);Qt("LONECARET","(?:\\^)");Qt("CARETTRIM",`(\\s*)${Le[Ue.LONECARET]}\\s+`,!0);sf.caretTrimReplace="$1^";Qt("CARET",`^${Le[Ue.LONECARET]}${Le[Ue.XRANGEPLAIN]}$`);Qt("CARETLOOSE",`^${Le[Ue.LONECARET]}${Le[Ue.XRANGEPLAINLOOSE]}$`);Qt("COMPARATORLOOSE",`^${Le[Ue.GTLT]}\\s*(${Le[Ue.LOOSEPLAIN]})$|^$`);Qt("COMPARATOR",`^${Le[Ue.GTLT]}\\s*(${Le[Ue.FULLPLAIN]})$|^$`);Qt("COMPARATORTRIM",`(\\s*)${Le[Ue.GTLT]}\\s*(${Le[Ue.LOOSEPLAIN]}|${Le[Ue.XRANGEPLAIN]})`,!0);sf.comparatorTrimReplace="$1$2$3";Qt("HYPHENRANGE",`^\\s*(${Le[Ue.XRANGEPLAIN]})\\s+-\\s+(${Le[Ue.XRANGEPLAIN]})\\s*$`);Qt("HYPHENRANGELOOSE",`^\\s*(${Le[Ue.XRANGEPLAINLOOSE]})\\s+-\\s+(${Le[Ue.XRANGEPLAINLOOSE]})\\s*$`);Qt("STAR","(<|>)?=?\\s*\\*");Qt("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");Qt("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var qk=x((B1t,m0e)=>{"use strict";var vdt=Object.freeze({loose:!0}),Edt=Object.freeze({}),bdt=e=>e?typeof e!="object"?vdt:e:Edt;m0e.exports=bdt});var GW=x((D1t,v0e)=>{"use strict";var y0e=/^[0-9]+$/,C0e=(e,t)=>{let r=y0e.test(e),n=y0e.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1},xdt=(e,t)=>C0e(t,e);v0e.exports={compareIdentifiers:C0e,rcompareIdentifiers:xdt}});var zs=x((T1t,_0e)=>{"use strict";var Vk=Gx(),{MAX_LENGTH:E0e,MAX_SAFE_INTEGER:Hk}=Wx(),{safeRe:b0e,t:x0e}=Vy(),_dt=qk(),{compareIdentifiers:Hy}=GW(),$W=class e{constructor(t,r){if(r=_dt(r),t instanceof e){if(t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>E0e)throw new TypeError(`version is longer than ${E0e} characters`);Vk("SemVer",t,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=t.trim().match(r.loose?b0e[x0e.LOOSE]:b0e[x0e.FULL]);if(!n)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>Hk||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Hk||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Hk||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let s=+i;if(s>=0&&s<Hk)return s}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(Vk("SemVer.compare",this.version,this.options,t),!(t instanceof e)){if(typeof t=="string"&&t===this.version)return 0;t=new e(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof e||(t=new e(t,this.options)),Hy(this.major,t.major)||Hy(this.minor,t.minor)||Hy(this.patch,t.patch)}comparePre(t){if(t instanceof e||(t=new e(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],i=t.prerelease[r];if(Vk("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return Hy(n,i)}while(++r)}compareBuild(t){t instanceof e||(t=new e(t,this.options));let r=0;do{let n=this.build[r],i=t.build[r];if(Vk("build compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return Hy(n,i)}while(++r)}inc(t,r,n){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(n)?1:0;if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(r){let s=[r,i];n===!1&&(s=[r]),Hy(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};_0e.exports=$W});var uA=x((R1t,I0e)=>{"use strict";var w0e=zs(),wdt=(e,t,r=!1)=>{if(e instanceof w0e)return e;try{return new w0e(e,t)}catch(n){if(!r)return null;throw n}};I0e.exports=wdt});var B0e=x((k1t,S0e)=>{"use strict";var Idt=uA(),Sdt=(e,t)=>{let r=Idt(e,t);return r?r.version:null};S0e.exports=Sdt});var T0e=x((F1t,D0e)=>{"use strict";var Bdt=uA(),Ddt=(e,t)=>{let r=Bdt(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null};D0e.exports=Ddt});var F0e=x((M1t,k0e)=>{"use strict";var R0e=zs(),Tdt=(e,t,r,n,i)=>{typeof r=="string"&&(i=n,n=r,r=void 0);try{return new R0e(e instanceof R0e?e.version:e,r).inc(t,n,i).version}catch{return null}};k0e.exports=Tdt});var N0e=x((Q1t,Q0e)=>{"use strict";var M0e=uA(),Rdt=(e,t)=>{let r=M0e(e,null,!0),n=M0e(t,null,!0),i=r.compare(n);if(i===0)return null;let s=i>0,o=s?r:n,a=s?n:r,l=!!o.prerelease.length;if(!!a.prerelease.length&&!l)return!a.patch&&!a.minor?"major":o.patch?"patch":o.minor?"minor":"major";let u=l?"pre":"";return r.major!==n.major?u+"major":r.minor!==n.minor?u+"minor":r.patch!==n.patch?u+"patch":"prerelease"};Q0e.exports=Rdt});var L0e=x((N1t,P0e)=>{"use strict";var kdt=zs(),Fdt=(e,t)=>new kdt(e,t).major;P0e.exports=Fdt});var O0e=x((P1t,U0e)=>{"use strict";var Mdt=zs(),Qdt=(e,t)=>new Mdt(e,t).minor;U0e.exports=Qdt});var V0e=x((L1t,q0e)=>{"use strict";var Ndt=zs(),Pdt=(e,t)=>new Ndt(e,t).patch;q0e.exports=Pdt});var W0e=x((U1t,H0e)=>{"use strict";var Ldt=uA(),Udt=(e,t)=>{let r=Ldt(e,t);return r&&r.prerelease.length?r.prerelease:null};H0e.exports=Udt});var Ml=x((O1t,$0e)=>{"use strict";var G0e=zs(),Odt=(e,t,r)=>new G0e(e,r).compare(new G0e(t,r));$0e.exports=Odt});var K0e=x((q1t,Y0e)=>{"use strict";var qdt=Ml(),Vdt=(e,t,r)=>qdt(t,e,r);Y0e.exports=Vdt});var J0e=x((V1t,z0e)=>{"use strict";var Hdt=Ml(),Wdt=(e,t)=>Hdt(e,t,!0);z0e.exports=Wdt});var Wk=x((H1t,Z0e)=>{"use strict";var j0e=zs(),Gdt=(e,t,r)=>{let n=new j0e(e,r),i=new j0e(t,r);return n.compare(i)||n.compareBuild(i)};Z0e.exports=Gdt});var eye=x((W1t,X0e)=>{"use strict";var $dt=Wk(),Ydt=(e,t)=>e.sort((r,n)=>$dt(r,n,t));X0e.exports=Ydt});var rye=x((G1t,tye)=>{"use strict";var Kdt=Wk(),zdt=(e,t)=>e.sort((r,n)=>Kdt(n,r,t));tye.exports=zdt});var $x=x(($1t,nye)=>{"use strict";var Jdt=Ml(),jdt=(e,t,r)=>Jdt(e,t,r)>0;nye.exports=jdt});var Gk=x((Y1t,iye)=>{"use strict";var Zdt=Ml(),Xdt=(e,t,r)=>Zdt(e,t,r)<0;iye.exports=Xdt});var YW=x((K1t,sye)=>{"use strict";var eft=Ml(),tft=(e,t,r)=>eft(e,t,r)===0;sye.exports=tft});var KW=x((z1t,oye)=>{"use strict";var rft=Ml(),nft=(e,t,r)=>rft(e,t,r)!==0;oye.exports=nft});var $k=x((J1t,aye)=>{"use strict";var ift=Ml(),sft=(e,t,r)=>ift(e,t,r)>=0;aye.exports=sft});var Yk=x((j1t,lye)=>{"use strict";var oft=Ml(),aft=(e,t,r)=>oft(e,t,r)<=0;lye.exports=aft});var zW=x((Z1t,cye)=>{"use strict";var lft=YW(),cft=KW(),uft=$x(),dft=$k(),fft=Gk(),hft=Yk(),gft=(e,t,r,n)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e===r;case"!==":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return lft(e,r,n);case"!=":return cft(e,r,n);case">":return uft(e,r,n);case">=":return dft(e,r,n);case"<":return fft(e,r,n);case"<=":return hft(e,r,n);default:throw new TypeError(`Invalid operator: ${t}`)}};cye.exports=gft});var dye=x((X1t,uye)=>{"use strict";var pft=zs(),Aft=uA(),{safeRe:Kk,t:zk}=Vy(),mft=(e,t)=>{if(e instanceof pft)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;t=t||{};let r=null;if(!t.rtl)r=e.match(t.includePrerelease?Kk[zk.COERCEFULL]:Kk[zk.COERCE]);else{let l=t.includePrerelease?Kk[zk.COERCERTLFULL]:Kk[zk.COERCERTL],c;for(;(c=l.exec(e))&&(!r||r.index+r[0].length!==e.length);)(!r||c.index+c[0].length!==r.index+r[0].length)&&(r=c),l.lastIndex=c.index+c[1].length+c[2].length;l.lastIndex=-1}if(r===null)return null;let n=r[2],i=r[3]||"0",s=r[4]||"0",o=t.includePrerelease&&r[5]?`-${r[5]}`:"",a=t.includePrerelease&&r[6]?`+${r[6]}`:"";return Aft(`${n}.${i}.${s}${o}${a}`,t)};uye.exports=mft});var hye=x((eQt,fye)=>{"use strict";var JW=class{constructor(){this.max=1e3,this.map=new Map}get(t){let r=this.map.get(t);if(r!==void 0)return this.map.delete(t),this.map.set(t,r),r}delete(t){return this.map.delete(t)}set(t,r){if(!this.delete(t)&&r!==void 0){if(this.map.size>=this.max){let i=this.map.keys().next().value;this.delete(i)}this.map.set(t,r)}return this}};fye.exports=JW});var Ql=x((tQt,mye)=>{"use strict";var yft=/\s+/g,jW=class e{constructor(t,r){if(r=vft(r),t instanceof e)return t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease?t:new e(t.raw,r);if(t instanceof ZW)return this.raw=t.value,this.set=[[t]],this.formatted=void 0,this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=t.trim().replace(yft," "),this.set=this.raw.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(i=>!pye(i[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&Sft(i[0])){this.set=[i];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let t=0;t<this.set.length;t++){t>0&&(this.formatted+="||");let r=this.set[t];for(let n=0;n<r.length;n++)n>0&&(this.formatted+=" "),this.formatted+=r[n].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(t){let n=((this.options.includePrerelease&&wft)|(this.options.loose&&Ift))+":"+t,i=gye.get(n);if(i)return i;let s=this.options.loose,o=s?Xo[vo.HYPHENRANGELOOSE]:Xo[vo.HYPHENRANGE];t=t.replace(o,Pft(this.options.includePrerelease)),Fn("hyphen replace",t),t=t.replace(Xo[vo.COMPARATORTRIM],bft),Fn("comparator trim",t),t=t.replace(Xo[vo.TILDETRIM],xft),Fn("tilde trim",t),t=t.replace(Xo[vo.CARETTRIM],_ft),Fn("caret trim",t);let a=t.split(" ").map(f=>Bft(f,this.options)).join(" ").split(/\s+/).map(f=>Nft(f,this.options));s&&(a=a.filter(f=>(Fn("loose invalid filter",f,this.options),!!f.match(Xo[vo.COMPARATORLOOSE])))),Fn("range list",a);let l=new Map,c=a.map(f=>new ZW(f,this.options));for(let f of c){if(pye(f))return[f];l.set(f.value,f)}l.size>1&&l.has("")&&l.delete("");let u=[...l.values()];return gye.set(n,u),u}intersects(t,r){if(!(t instanceof e))throw new TypeError("a Range is required");return this.set.some(n=>Aye(n,r)&&t.set.some(i=>Aye(i,r)&&n.every(s=>i.every(o=>s.intersects(o,r)))))}test(t){if(!t)return!1;if(typeof t=="string")try{t=new Eft(t,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(Lft(this.set[r],t,this.options))return!0;return!1}};mye.exports=jW;var Cft=hye(),gye=new Cft,vft=qk(),ZW=Yx(),Fn=Gx(),Eft=zs(),{safeRe:Xo,t:vo,comparatorTrimReplace:bft,tildeTrimReplace:xft,caretTrimReplace:_ft}=Vy(),{FLAG_INCLUDE_PRERELEASE:wft,FLAG_LOOSE:Ift}=Wx(),pye=e=>e.value==="<0.0.0-0",Sft=e=>e.value==="",Aye=(e,t)=>{let r=!0,n=e.slice(),i=n.pop();for(;r&&n.length;)r=n.every(s=>i.intersects(s,t)),i=n.pop();return r},Bft=(e,t)=>(Fn("comp",e,t),e=Rft(e,t),Fn("caret",e),e=Dft(e,t),Fn("tildes",e),e=Fft(e,t),Fn("xrange",e),e=Qft(e,t),Fn("stars",e),e),Eo=e=>!e||e.toLowerCase()==="x"||e==="*",Dft=(e,t)=>e.trim().split(/\s+/).map(r=>Tft(r,t)).join(" "),Tft=(e,t)=>{let r=t.loose?Xo[vo.TILDELOOSE]:Xo[vo.TILDE];return e.replace(r,(n,i,s,o,a)=>{Fn("tilde",e,n,i,s,o,a);let l;return Eo(i)?l="":Eo(s)?l=`>=${i}.0.0 <${+i+1}.0.0-0`:Eo(o)?l=`>=${i}.${s}.0 <${i}.${+s+1}.0-0`:a?(Fn("replaceTilde pr",a),l=`>=${i}.${s}.${o}-${a} <${i}.${+s+1}.0-0`):l=`>=${i}.${s}.${o} <${i}.${+s+1}.0-0`,Fn("tilde return",l),l})},Rft=(e,t)=>e.trim().split(/\s+/).map(r=>kft(r,t)).join(" "),kft=(e,t)=>{Fn("caret",e,t);let r=t.loose?Xo[vo.CARETLOOSE]:Xo[vo.CARET],n=t.includePrerelease?"-0":"";return e.replace(r,(i,s,o,a,l)=>{Fn("caret",e,i,s,o,a,l);let c;return Eo(s)?c="":Eo(o)?c=`>=${s}.0.0${n} <${+s+1}.0.0-0`:Eo(a)?s==="0"?c=`>=${s}.${o}.0${n} <${s}.${+o+1}.0-0`:c=`>=${s}.${o}.0${n} <${+s+1}.0.0-0`:l?(Fn("replaceCaret pr",l),s==="0"?o==="0"?c=`>=${s}.${o}.${a}-${l} <${s}.${o}.${+a+1}-0`:c=`>=${s}.${o}.${a}-${l} <${s}.${+o+1}.0-0`:c=`>=${s}.${o}.${a}-${l} <${+s+1}.0.0-0`):(Fn("no pr"),s==="0"?o==="0"?c=`>=${s}.${o}.${a}${n} <${s}.${o}.${+a+1}-0`:c=`>=${s}.${o}.${a}${n} <${s}.${+o+1}.0-0`:c=`>=${s}.${o}.${a} <${+s+1}.0.0-0`),Fn("caret return",c),c})},Fft=(e,t)=>(Fn("replaceXRanges",e,t),e.split(/\s+/).map(r=>Mft(r,t)).join(" ")),Mft=(e,t)=>{e=e.trim();let r=t.loose?Xo[vo.XRANGELOOSE]:Xo[vo.XRANGE];return e.replace(r,(n,i,s,o,a,l)=>{Fn("xRange",e,n,i,s,o,a,l);let c=Eo(s),u=c||Eo(o),f=u||Eo(a),p=f;return i==="="&&p&&(i=""),l=t.includePrerelease?"-0":"",c?i===">"||i==="<"?n="<0.0.0-0":n="*":i&&p?(u&&(o=0),a=0,i===">"?(i=">=",u?(s=+s+1,o=0,a=0):(o=+o+1,a=0)):i==="<="&&(i="<",u?s=+s+1:o=+o+1),i==="<"&&(l="-0"),n=`${i+s}.${o}.${a}${l}`):u?n=`>=${s}.0.0${l} <${+s+1}.0.0-0`:f&&(n=`>=${s}.${o}.0${l} <${s}.${+o+1}.0-0`),Fn("xRange return",n),n})},Qft=(e,t)=>(Fn("replaceStars",e,t),e.trim().replace(Xo[vo.STAR],"")),Nft=(e,t)=>(Fn("replaceGTE0",e,t),e.trim().replace(Xo[t.includePrerelease?vo.GTE0PRE:vo.GTE0],"")),Pft=e=>(t,r,n,i,s,o,a,l,c,u,f,p)=>(Eo(n)?r="":Eo(i)?r=`>=${n}.0.0${e?"-0":""}`:Eo(s)?r=`>=${n}.${i}.0${e?"-0":""}`:o?r=`>=${r}`:r=`>=${r}${e?"-0":""}`,Eo(c)?l="":Eo(u)?l=`<${+c+1}.0.0-0`:Eo(f)?l=`<${c}.${+u+1}.0-0`:p?l=`<=${c}.${u}.${f}-${p}`:e?l=`<${c}.${u}.${+f+1}-0`:l=`<=${l}`,`${r} ${l}`.trim()),Lft=(e,t,r)=>{for(let n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let n=0;n<e.length;n++)if(Fn(e[n].semver),e[n].semver!==ZW.ANY&&e[n].semver.prerelease.length>0){let i=e[n].semver;if(i.major===t.major&&i.minor===t.minor&&i.patch===t.patch)return!0}return!1}return!0}});var Yx=x((rQt,xye)=>{"use strict";var Kx=Symbol("SemVer ANY"),tG=class e{static get ANY(){return Kx}constructor(t,r){if(r=yye(r),t instanceof e){if(t.loose===!!r.loose)return t;t=t.value}t=t.trim().split(/\s+/).join(" "),eG("comparator",t,r),this.options=r,this.loose=!!r.loose,this.parse(t),this.semver===Kx?this.value="":this.value=this.operator+this.semver.version,eG("comp",this)}parse(t){let r=this.options.loose?Cye[vye.COMPARATORLOOSE]:Cye[vye.COMPARATOR],n=t.match(r);if(!n)throw new TypeError(`Invalid comparator: ${t}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new Eye(n[2],this.options.loose):this.semver=Kx}toString(){return this.value}test(t){if(eG("Comparator.test",t,this.options.loose),this.semver===Kx||t===Kx)return!0;if(typeof t=="string")try{t=new Eye(t,this.options)}catch{return!1}return XW(t,this.operator,this.semver,this.options)}intersects(t,r){if(!(t instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new bye(t.value,r).test(this.value):t.operator===""?t.value===""?!0:new bye(this.value,r).test(t.semver):(r=yye(r),r.includePrerelease&&(this.value==="<0.0.0-0"||t.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||t.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&t.operator.startsWith(">")||this.operator.startsWith("<")&&t.operator.startsWith("<")||this.semver.version===t.semver.version&&this.operator.includes("=")&&t.operator.includes("=")||XW(this.semver,"<",t.semver,r)&&this.operator.startsWith(">")&&t.operator.startsWith("<")||XW(this.semver,">",t.semver,r)&&this.operator.startsWith("<")&&t.operator.startsWith(">")))}};xye.exports=tG;var yye=qk(),{safeRe:Cye,t:vye}=Vy(),XW=zW(),eG=Gx(),Eye=zs(),bye=Ql()});var zx=x((nQt,_ye)=>{"use strict";var Uft=Ql(),Oft=(e,t,r)=>{try{t=new Uft(t,r)}catch{return!1}return t.test(e)};_ye.exports=Oft});var Iye=x((iQt,wye)=>{"use strict";var qft=Ql(),Vft=(e,t)=>new qft(e,t).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));wye.exports=Vft});var Bye=x((sQt,Sye)=>{"use strict";var Hft=zs(),Wft=Ql(),Gft=(e,t,r)=>{let n=null,i=null,s=null;try{s=new Wft(t,r)}catch{return null}return e.forEach(o=>{s.test(o)&&(!n||i.compare(o)===-1)&&(n=o,i=new Hft(n,r))}),n};Sye.exports=Gft});var Tye=x((oQt,Dye)=>{"use strict";var $ft=zs(),Yft=Ql(),Kft=(e,t,r)=>{let n=null,i=null,s=null;try{s=new Yft(t,r)}catch{return null}return e.forEach(o=>{s.test(o)&&(!n||i.compare(o)===1)&&(n=o,i=new $ft(n,r))}),n};Dye.exports=Kft});var Fye=x((aQt,kye)=>{"use strict";var rG=zs(),zft=Ql(),Rye=$x(),Jft=(e,t)=>{e=new zft(e,t);let r=new rG("0.0.0");if(e.test(r)||(r=new rG("0.0.0-0"),e.test(r)))return r;r=null;for(let n=0;n<e.set.length;++n){let i=e.set[n],s=null;i.forEach(o=>{let a=new rG(o.semver.version);switch(o.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!s||Rye(a,s))&&(s=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),s&&(!r||Rye(r,s))&&(r=s)}return r&&e.test(r)?r:null};kye.exports=Jft});var Qye=x((lQt,Mye)=>{"use strict";var jft=Ql(),Zft=(e,t)=>{try{return new jft(e,t).range||"*"}catch{return null}};Mye.exports=Zft});var Jk=x((cQt,Uye)=>{"use strict";var Xft=zs(),Lye=Yx(),{ANY:eht}=Lye,tht=Ql(),rht=zx(),Nye=$x(),Pye=Gk(),nht=Yk(),iht=$k(),sht=(e,t,r,n)=>{e=new Xft(e,n),t=new tht(t,n);let i,s,o,a,l;switch(r){case">":i=Nye,s=nht,o=Pye,a=">",l=">=";break;case"<":i=Pye,s=iht,o=Nye,a="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(rht(e,t,n))return!1;for(let c=0;c<t.set.length;++c){let u=t.set[c],f=null,p=null;if(u.forEach(g=>{g.semver===eht&&(g=new Lye(">=0.0.0")),f=f||g,p=p||g,i(g.semver,f.semver,n)?f=g:o(g.semver,p.semver,n)&&(p=g)}),f.operator===a||f.operator===l||(!p.operator||p.operator===a)&&s(e,p.semver))return!1;if(p.operator===l&&o(e,p.semver))return!1}return!0};Uye.exports=sht});var qye=x((uQt,Oye)=>{"use strict";var oht=Jk(),aht=(e,t,r)=>oht(e,t,">",r);Oye.exports=aht});var Hye=x((dQt,Vye)=>{"use strict";var lht=Jk(),cht=(e,t,r)=>lht(e,t,"<",r);Vye.exports=cht});var $ye=x((fQt,Gye)=>{"use strict";var Wye=Ql(),uht=(e,t,r)=>(e=new Wye(e,r),t=new Wye(t,r),e.intersects(t,r));Gye.exports=uht});var Kye=x((hQt,Yye)=>{"use strict";var dht=zx(),fht=Ml();Yye.exports=(e,t,r)=>{let n=[],i=null,s=null,o=e.sort((u,f)=>fht(u,f,r));for(let u of o)dht(u,t,r)?(s=u,i||(i=u)):(s&&n.push([i,s]),s=null,i=null);i&&n.push([i,null]);let a=[];for(let[u,f]of n)u===f?a.push(u):!f&&u===o[0]?a.push("*"):f?u===o[0]?a.push(`<=${f}`):a.push(`${u} - ${f}`):a.push(`>=${u}`);let l=a.join(" || "),c=typeof t.raw=="string"?t.raw:String(t);return l.length<c.length?l:t}});var eCe=x((gQt,Xye)=>{"use strict";var zye=Ql(),iG=Yx(),{ANY:nG}=iG,Jx=zx(),sG=Ml(),hht=(e,t,r={})=>{if(e===t)return!0;e=new zye(e,r),t=new zye(t,r);let n=!1;e:for(let i of e.set){for(let s of t.set){let o=pht(i,s,r);if(n=n||o!==null,o)continue e}if(n)return!1}return!0},ght=[new iG(">=0.0.0-0")],Jye=[new iG(">=0.0.0")],pht=(e,t,r)=>{if(e===t)return!0;if(e.length===1&&e[0].semver===nG){if(t.length===1&&t[0].semver===nG)return!0;r.includePrerelease?e=ght:e=Jye}if(t.length===1&&t[0].semver===nG){if(r.includePrerelease)return!0;t=Jye}let n=new Set,i,s;for(let g of e)g.operator===">"||g.operator===">="?i=jye(i,g,r):g.operator==="<"||g.operator==="<="?s=Zye(s,g,r):n.add(g.semver);if(n.size>1)return null;let o;if(i&&s){if(o=sG(i.semver,s.semver,r),o>0)return null;if(o===0&&(i.operator!==">="||s.operator!=="<="))return null}for(let g of n){if(i&&!Jx(g,String(i),r)||s&&!Jx(g,String(s),r))return null;for(let A of t)if(!Jx(g,String(A),r))return!1;return!0}let a,l,c,u,f=s&&!r.includePrerelease&&s.semver.prerelease.length?s.semver:!1,p=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1;f&&f.prerelease.length===1&&s.operator==="<"&&f.prerelease[0]===0&&(f=!1);for(let g of t){if(u=u||g.operator===">"||g.operator===">=",c=c||g.operator==="<"||g.operator==="<=",i){if(p&&g.semver.prerelease&&g.semver.prerelease.length&&g.semver.major===p.major&&g.semver.minor===p.minor&&g.semver.patch===p.patch&&(p=!1),g.operator===">"||g.operator===">="){if(a=jye(i,g,r),a===g&&a!==i)return!1}else if(i.operator===">="&&!Jx(i.semver,String(g),r))return!1}if(s){if(f&&g.semver.prerelease&&g.semver.prerelease.length&&g.semver.major===f.major&&g.semver.minor===f.minor&&g.semver.patch===f.patch&&(f=!1),g.operator==="<"||g.operator==="<="){if(l=Zye(s,g,r),l===g&&l!==s)return!1}else if(s.operator==="<="&&!Jx(s.semver,String(g),r))return!1}if(!g.operator&&(s||i)&&o!==0)return!1}return!(i&&c&&!s&&o!==0||s&&u&&!i&&o!==0||p||f)},jye=(e,t,r)=>{if(!e)return t;let n=sG(e.semver,t.semver,r);return n>0?e:n<0||t.operator===">"&&e.operator===">="?t:e},Zye=(e,t,r)=>{if(!e)return t;let n=sG(e.semver,t.semver,r);return n<0?e:n>0||t.operator==="<"&&e.operator==="<="?t:e};Xye.exports=hht});var iCe=x((pQt,nCe)=>{"use strict";var oG=Vy(),tCe=Wx(),Aht=zs(),rCe=GW(),mht=uA(),yht=B0e(),Cht=T0e(),vht=F0e(),Eht=N0e(),bht=L0e(),xht=O0e(),_ht=V0e(),wht=W0e(),Iht=Ml(),Sht=K0e(),Bht=J0e(),Dht=Wk(),Tht=eye(),Rht=rye(),kht=$x(),Fht=Gk(),Mht=YW(),Qht=KW(),Nht=$k(),Pht=Yk(),Lht=zW(),Uht=dye(),Oht=Yx(),qht=Ql(),Vht=zx(),Hht=Iye(),Wht=Bye(),Ght=Tye(),$ht=Fye(),Yht=Qye(),Kht=Jk(),zht=qye(),Jht=Hye(),jht=$ye(),Zht=Kye(),Xht=eCe();nCe.exports={parse:mht,valid:yht,clean:Cht,inc:vht,diff:Eht,major:bht,minor:xht,patch:_ht,prerelease:wht,compare:Iht,rcompare:Sht,compareLoose:Bht,compareBuild:Dht,sort:Tht,rsort:Rht,gt:kht,lt:Fht,eq:Mht,neq:Qht,gte:Nht,lte:Pht,cmp:Lht,coerce:Uht,Comparator:Oht,Range:qht,satisfies:Vht,toComparators:Hht,maxSatisfying:Wht,minSatisfying:Ght,minVersion:$ht,validRange:Yht,outside:Kht,gtr:zht,ltr:Jht,intersects:jht,simplifyRange:Zht,subset:Xht,SemVer:Aht,re:oG.re,src:oG.src,tokens:oG.t,SEMVER_SPEC_VERSION:tCe.SEMVER_SPEC_VERSION,RELEASE_TYPES:tCe.RELEASE_TYPES,compareIdentifiers:rCe.compareIdentifiers,rcompareIdentifiers:rCe.rcompareIdentifiers}});var zG=x((TOt,Rve)=>{"use strict";function Cpt(e){r.debug=r,r.default=r,r.coerce=l,r.disable=o,r.enable=i,r.enabled=a,r.humanize=vR(),r.destroy=c,Object.keys(e).forEach(u=>{r[u]=e[u]}),r.names=[],r.skips=[],r.formatters={};function t(u){let f=0;for(let p=0;p<u.length;p++)f=(f<<5)-f+u.charCodeAt(p),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=t;function r(u){let f,p=null,g,A;function y(...C){if(!y.enabled)return;let v=y,b=Number(new Date),w=b-(f||b);v.diff=w,v.prev=f,v.curr=b,f=b,C[0]=r.coerce(C[0]),typeof C[0]!="string"&&C.unshift("%O");let B=0;C[0]=C[0].replace(/%([a-zA-Z%])/g,(Q,W)=>{if(Q==="%%")return"%";B++;let Z=r.formatters[W];if(typeof Z=="function"){let $=C[B];Q=Z.call(v,$),C.splice(B,1),B--}return Q}),r.formatArgs.call(v,C),(v.log||r.log).apply(v,C)}return y.namespace=u,y.useColors=r.useColors(),y.color=r.selectColor(u),y.extend=n,y.destroy=r.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(g!==r.namespaces&&(g=r.namespaces,A=r.enabled(u)),A),set:C=>{p=C}}),typeof r.init=="function"&&r.init(y),y}function n(u,f){let p=r(this.namespace+(typeof f>"u"?":":f)+u);return p.log=this.log,p}function i(u){r.save(u),r.namespaces=u,r.names=[],r.skips=[];let f=(typeof u=="string"?u:"").trim().replace(" ",",").split(",").filter(Boolean);for(let p of f)p[0]==="-"?r.skips.push(p.slice(1)):r.names.push(p)}function s(u,f){let p=0,g=0,A=-1,y=0;for(;p<u.length;)if(g<f.length&&(f[g]===u[p]||f[g]==="*"))f[g]==="*"?(A=g,y=p,g++):(p++,g++);else if(A!==-1)g=A+1,y++,p=y;else return!1;for(;g<f.length&&f[g]==="*";)g++;return g===f.length}function o(){let u=[...r.names,...r.skips.map(f=>"-"+f)].join(",");return r.enable(""),u}function a(u){for(let f of r.skips)if(s(u,f))return!1;for(let f of r.names)if(s(u,f))return!0;return!1}function l(u){return u instanceof Error?u.stack||u.message:u}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}Rve.exports=Cpt});var kve=x((qa,sM)=>{"use strict";qa.formatArgs=Ept;qa.save=bpt;qa.load=xpt;qa.useColors=vpt;qa.storage=_pt();qa.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();qa.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function vpt(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let e;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function Ept(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+sM.exports.humanize(this.diff),!this.useColors)return;let t="color: "+this.color;e.splice(1,0,t,"color: inherit");let r=0,n=0;e[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),e.splice(n,0,t)}qa.log=console.debug||console.log||(()=>{});function bpt(e){try{e?qa.storage.setItem("debug",e):qa.storage.removeItem("debug")}catch{}}function xpt(){let e;try{e=qa.storage.getItem("debug")}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=process.env.DEBUG),e}function _pt(){try{return localStorage}catch{}}sM.exports=zG()(qa);var{formatters:wpt}=sM.exports;wpt.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var ZG={};mP(ZG,{createSupportsColor:()=>jG,default:()=>Tpt});function Pl(e,t=globalThis.Deno?globalThis.Deno.args:aM.default.argv){let r=e.startsWith("-")?"":e.length===1?"-":"--",n=t.indexOf(r+e),i=t.indexOf("--");return n!==-1&&(i===-1||n<i)}function Ipt(){if("FORCE_COLOR"in Jn)return Jn.FORCE_COLOR==="true"?1:Jn.FORCE_COLOR==="false"?0:Jn.FORCE_COLOR.length===0?1:Math.min(Number.parseInt(Jn.FORCE_COLOR,10),3)}function Spt(e){return e===0?!1:{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function Bpt(e,{streamIsTTY:t,sniffFlags:r=!0}={}){let n=Ipt();n!==void 0&&(oM=n);let i=r?oM:n;if(i===0)return 0;if(r){if(Pl("color=16m")||Pl("color=full")||Pl("color=truecolor"))return 3;if(Pl("color=256"))return 2}if("TF_BUILD"in Jn&&"AGENT_NAME"in Jn)return 1;if(e&&!t&&i===void 0)return 0;let s=i||0;if(Jn.TERM==="dumb")return s;if(aM.default.platform==="win32"){let o=Fve.default.release().split(".");return Number(o[0])>=10&&Number(o[2])>=10586?Number(o[2])>=14931?3:2:1}if("CI"in Jn)return"GITHUB_ACTIONS"in Jn||"GITEA_ACTIONS"in Jn?3:["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","BUILDKITE","DRONE"].some(o=>o in Jn)||Jn.CI_NAME==="codeship"?1:s;if("TEAMCITY_VERSION"in Jn)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(Jn.TEAMCITY_VERSION)?1:0;if(Jn.COLORTERM==="truecolor"||Jn.TERM==="xterm-kitty")return 3;if("TERM_PROGRAM"in Jn){let o=Number.parseInt((Jn.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(Jn.TERM_PROGRAM){case"iTerm.app":return o>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(Jn.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(Jn.TERM)||"COLORTERM"in Jn?1:s}function jG(e,t={}){let r=Bpt(e,{streamIsTTY:e&&e.isTTY,...t});return Spt(r)}var aM,Fve,JG,Jn,oM,Dpt,Tpt,XG=Kke(()=>{"use strict";aM=V(require("process")),Fve=V(require("os")),JG=V(require("tty"));({env:Jn}=aM.default);Pl("no-color")||Pl("no-colors")||Pl("color=false")||Pl("color=never")?oM=0:(Pl("color")||Pl("colors")||Pl("color=true")||Pl("color=always"))&&(oM=1);Dpt={stdout:jG({isTTY:JG.default.isatty(1)}),stderr:jG({isTTY:JG.default.isatty(2)})},Tpt=Dpt});var Qve=x((os,cM)=>{"use strict";var Rpt=require("tty"),lM=require("util");os.init=Lpt;os.log=Qpt;os.formatArgs=Fpt;os.save=Npt;os.load=Ppt;os.useColors=kpt;os.destroy=lM.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");os.colors=[6,2,3,4,5,1];try{let e=(XG(),yP(ZG));e&&(e.stderr||e).level>=2&&(os.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}os.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{let r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(i,s)=>s.toUpperCase()),n=process.env[t];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),e[r]=n,e},{});function kpt(){return"colors"in os.inspectOpts?!!os.inspectOpts.colors:Rpt.isatty(process.stderr.fd)}function Fpt(e){let{namespace:t,useColors:r}=this;if(r){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),s=`  ${i};1m${t} \x1B[0m`;e[0]=s+e[0].split(`
`).join(`
`+s),e.push(i+"m+"+cM.exports.humanize(this.diff)+"\x1B[0m")}else e[0]=Mpt()+t+" "+e[0]}function Mpt(){return os.inspectOpts.hideDate?"":new Date().toISOString()+" "}function Qpt(...e){return process.stderr.write(lM.formatWithOptions(os.inspectOpts,...e)+`
`)}function Npt(e){e?process.env.DEBUG=e:delete process.env.DEBUG}function Ppt(){return process.env.DEBUG}function Lpt(e){e.inspectOpts={};let t=Object.keys(os.inspectOpts);for(let r=0;r<t.length;r++)e.inspectOpts[t[r]]=os.inspectOpts[t[r]]}cM.exports=zG()(os);var{formatters:Mve}=cM.exports;Mve.o=function(e){return this.inspectOpts.colors=this.useColors,lM.inspect(e,this.inspectOpts).split(`
`).map(t=>t.trim()).join(" ")};Mve.O=function(e){return this.inspectOpts.colors=this.useColors,lM.inspect(e,this.inspectOpts)}});var Nve=x((ROt,e4)=>{"use strict";typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?e4.exports=kve():e4.exports=Qve()});var Pve=x(Va=>{"use strict";var Upt=Va&&Va.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Va,"__esModule",{value:!0});var Opt=require("fs"),qpt=Upt(Nve()),lC=qpt.default("@kwsites/file-exists");function Vpt(e,t,r){lC("checking %s",e);try{let n=Opt.statSync(e);return n.isFile()&&t?(lC("[OK] path represents a file"),!0):n.isDirectory()&&r?(lC("[OK] path represents a directory"),!0):(lC("[FAIL] path represents something other than a file or directory"),!1)}catch(n){if(n.code==="ENOENT")return lC("[FAIL] path is not accessible: %o",n),!1;throw lC("[FATAL] %o",n),n}}function Hpt(e,t=Va.READABLE){return Vpt(e,(t&Va.FILE)>0,(t&Va.FOLDER)>0)}Va.exists=Hpt;Va.FILE=1;Va.FOLDER=2;Va.READABLE=Va.FILE+Va.FOLDER});var Lve=x(uM=>{"use strict";function Wpt(e){for(var t in e)uM.hasOwnProperty(t)||(uM[t]=e[t])}Object.defineProperty(uM,"__esModule",{value:!0});Wpt(Pve())});var t4=x((MOt,Uve)=>{"use strict";function Gpt(e){r.debug=r,r.default=r,r.coerce=l,r.disable=s,r.enable=i,r.enabled=o,r.humanize=vR(),r.destroy=c,Object.keys(e).forEach(u=>{r[u]=e[u]}),r.names=[],r.skips=[],r.formatters={};function t(u){let f=0;for(let p=0;p<u.length;p++)f=(f<<5)-f+u.charCodeAt(p),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=t;function r(u){let f,p=null,g,A;function y(...C){if(!y.enabled)return;let v=y,b=Number(new Date),w=b-(f||b);v.diff=w,v.prev=f,v.curr=b,f=b,C[0]=r.coerce(C[0]),typeof C[0]!="string"&&C.unshift("%O");let B=0;C[0]=C[0].replace(/%([a-zA-Z%])/g,(Q,W)=>{if(Q==="%%")return"%";B++;let Z=r.formatters[W];if(typeof Z=="function"){let $=C[B];Q=Z.call(v,$),C.splice(B,1),B--}return Q}),r.formatArgs.call(v,C),(v.log||r.log).apply(v,C)}return y.namespace=u,y.useColors=r.useColors(),y.color=r.selectColor(u),y.extend=n,y.destroy=r.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(g!==r.namespaces&&(g=r.namespaces,A=r.enabled(u)),A),set:C=>{p=C}}),typeof r.init=="function"&&r.init(y),y}function n(u,f){let p=r(this.namespace+(typeof f>"u"?":":f)+u);return p.log=this.log,p}function i(u){r.save(u),r.namespaces=u,r.names=[],r.skips=[];let f,p=(typeof u=="string"?u:"").split(/[\s,]+/),g=p.length;for(f=0;f<g;f++)p[f]&&(u=p[f].replace(/\*/g,".*?"),u[0]==="-"?r.skips.push(new RegExp("^"+u.slice(1)+"$")):r.names.push(new RegExp("^"+u+"$")))}function s(){let u=[...r.names.map(a),...r.skips.map(a).map(f=>"-"+f)].join(",");return r.enable(""),u}function o(u){if(u[u.length-1]==="*")return!0;let f,p;for(f=0,p=r.skips.length;f<p;f++)if(r.skips[f].test(u))return!1;for(f=0,p=r.names.length;f<p;f++)if(r.names[f].test(u))return!0;return!1}function a(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}function l(u){return u instanceof Error?u.stack||u.message:u}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}Uve.exports=Gpt});var Ove=x((Ha,dM)=>{"use strict";Ha.formatArgs=Ypt;Ha.save=Kpt;Ha.load=zpt;Ha.useColors=$pt;Ha.storage=Jpt();Ha.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Ha.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function $pt(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let e;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function Ypt(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+dM.exports.humanize(this.diff),!this.useColors)return;let t="color: "+this.color;e.splice(1,0,t,"color: inherit");let r=0,n=0;e[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),e.splice(n,0,t)}Ha.log=console.debug||console.log||(()=>{});function Kpt(e){try{e?Ha.storage.setItem("debug",e):Ha.storage.removeItem("debug")}catch{}}function zpt(){let e;try{e=Ha.storage.getItem("debug")}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=process.env.DEBUG),e}function Jpt(){try{return localStorage}catch{}}dM.exports=t4()(Ha);var{formatters:jpt}=dM.exports;jpt.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var Vve=x((as,hM)=>{"use strict";var Zpt=require("tty"),fM=require("util");as.init=sAt;as.log=rAt;as.formatArgs=eAt;as.save=nAt;as.load=iAt;as.useColors=Xpt;as.destroy=fM.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");as.colors=[6,2,3,4,5,1];try{let e=(XG(),yP(ZG));e&&(e.stderr||e).level>=2&&(as.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}as.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{let r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(i,s)=>s.toUpperCase()),n=process.env[t];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),e[r]=n,e},{});function Xpt(){return"colors"in as.inspectOpts?!!as.inspectOpts.colors:Zpt.isatty(process.stderr.fd)}function eAt(e){let{namespace:t,useColors:r}=this;if(r){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),s=`  ${i};1m${t} \x1B[0m`;e[0]=s+e[0].split(`
`).join(`
`+s),e.push(i+"m+"+hM.exports.humanize(this.diff)+"\x1B[0m")}else e[0]=tAt()+t+" "+e[0]}function tAt(){return as.inspectOpts.hideDate?"":new Date().toISOString()+" "}function rAt(...e){return process.stderr.write(fM.formatWithOptions(as.inspectOpts,...e)+`
`)}function nAt(e){e?process.env.DEBUG=e:delete process.env.DEBUG}function iAt(){return process.env.DEBUG}function sAt(e){e.inspectOpts={};let t=Object.keys(as.inspectOpts);for(let r=0;r<t.length;r++)e.inspectOpts[t[r]]=as.inspectOpts[t[r]]}hM.exports=t4()(as);var{formatters:qve}=hM.exports;qve.o=function(e){return this.inspectOpts.colors=this.useColors,fM.inspect(e,this.inspectOpts).split(`
`).map(t=>t.trim()).join(" ")};qve.O=function(e){return this.inspectOpts.colors=this.useColors,fM.inspect(e,this.inspectOpts)}});var Hve=x((QOt,r4)=>{"use strict";typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?r4.exports=Ove():r4.exports=Vve()});var i4=x(pA=>{"use strict";Object.defineProperty(pA,"__esModule",{value:!0});pA.createDeferred=pA.deferred=void 0;function n4(){let e,t,r="pending";return{promise:new Promise((i,s)=>{e=i,t=s}),done(i){r==="pending"&&(r="resolved",e(i))},fail(i){r==="pending"&&(r="rejected",t(i))},get fulfilled(){return r!=="pending"},get status(){return r}}}pA.deferred=n4;pA.createDeferred=n4;pA.default=n4});var Uxe=x((R5t,t1)=>{"use strict";t1.exports.Space_Separator=/[\u1680\u2000-\u200A\u202F\u205F\u3000]/;t1.exports.ID_Start=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/;t1.exports.ID_Continue=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/});var e8=x((k5t,Oxe)=>{"use strict";var X4=Uxe();Oxe.exports={isSpaceSeparator(e){return typeof e=="string"&&X4.Space_Separator.test(e)},isIdStartChar(e){return typeof e=="string"&&(e>="a"&&e<="z"||e>="A"&&e<="Z"||e==="$"||e==="_"||X4.ID_Start.test(e))},isIdContinueChar(e){return typeof e=="string"&&(e>="a"&&e<="z"||e>="A"&&e<="Z"||e>="0"&&e<="9"||e==="$"||e==="_"||e==="\u200C"||e==="\u200D"||X4.ID_Continue.test(e))},isDigit(e){return typeof e=="string"&&/[0-9]/.test(e)},isHexDigit(e){return typeof e=="string"&&/[0-9A-Fa-f]/.test(e)}}});var Gxe=x((F5t,Wxe)=>{"use strict";var ls=e8(),r8,So,Af,n1,ug,Pc,cs,s8,R_;Wxe.exports=function(t,r){r8=String(t),So="start",Af=[],n1=0,ug=1,Pc=0,cs=void 0,s8=void 0,R_=void 0;do cs=vyt(),xyt[So]();while(cs.type!=="eof");return typeof r=="function"?n8({"":R_},"",r):R_};function n8(e,t,r){let n=e[t];if(n!=null&&typeof n=="object")if(Array.isArray(n))for(let i=0;i<n.length;i++){let s=String(i),o=n8(n,s,r);o===void 0?delete n[s]:Object.defineProperty(n,s,{value:o,writable:!0,enumerable:!0,configurable:!0})}else for(let i in n){let s=n8(n,i,r);s===void 0?delete n[i]:Object.defineProperty(n,i,{value:s,writable:!0,enumerable:!0,configurable:!0})}return r.call(e,t,n)}var jt,Pt,T_,pf,yr;function vyt(){for(jt="default",Pt="",T_=!1,pf=1;;){yr=mf();let e=Vxe[jt]();if(e)return e}}function mf(){if(r8[n1])return String.fromCodePoint(r8.codePointAt(n1))}function he(){let e=mf();return e===`
`?(ug++,Pc=0):e?Pc+=e.length:Pc++,e&&(n1+=e.length),e}var Vxe={default(){switch(yr){case"	":case"\v":case"\f":case" ":case"\xA0":case"\uFEFF":case`
`:case"\r":case"\u2028":case"\u2029":he();return;case"/":he(),jt="comment";return;case void 0:return he(),Mn("eof")}if(ls.isSpaceSeparator(yr)){he();return}return Vxe[So]()},comment(){switch(yr){case"*":he(),jt="multiLineComment";return;case"/":he(),jt="singleLineComment";return}throw Qn(he())},multiLineComment(){switch(yr){case"*":he(),jt="multiLineCommentAsterisk";return;case void 0:throw Qn(he())}he()},multiLineCommentAsterisk(){switch(yr){case"*":he();return;case"/":he(),jt="default";return;case void 0:throw Qn(he())}he(),jt="multiLineComment"},singleLineComment(){switch(yr){case`
`:case"\r":case"\u2028":case"\u2029":he(),jt="default";return;case void 0:return he(),Mn("eof")}he()},value(){switch(yr){case"{":case"[":return Mn("punctuator",he());case"n":return he(),wA("ull"),Mn("null",null);case"t":return he(),wA("rue"),Mn("boolean",!0);case"f":return he(),wA("alse"),Mn("boolean",!1);case"-":case"+":he()==="-"&&(pf=-1),jt="sign";return;case".":Pt=he(),jt="decimalPointLeading";return;case"0":Pt=he(),jt="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":Pt=he(),jt="decimalInteger";return;case"I":return he(),wA("nfinity"),Mn("numeric",1/0);case"N":return he(),wA("aN"),Mn("numeric",NaN);case'"':case"'":T_=he()==='"',Pt="",jt="string";return}throw Qn(he())},identifierNameStartEscape(){if(yr!=="u")throw Qn(he());he();let e=i8();switch(e){case"$":case"_":break;default:if(!ls.isIdStartChar(e))throw qxe();break}Pt+=e,jt="identifierName"},identifierName(){switch(yr){case"$":case"_":case"\u200C":case"\u200D":Pt+=he();return;case"\\":he(),jt="identifierNameEscape";return}if(ls.isIdContinueChar(yr)){Pt+=he();return}return Mn("identifier",Pt)},identifierNameEscape(){if(yr!=="u")throw Qn(he());he();let e=i8();switch(e){case"$":case"_":case"\u200C":case"\u200D":break;default:if(!ls.isIdContinueChar(e))throw qxe();break}Pt+=e,jt="identifierName"},sign(){switch(yr){case".":Pt=he(),jt="decimalPointLeading";return;case"0":Pt=he(),jt="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":Pt=he(),jt="decimalInteger";return;case"I":return he(),wA("nfinity"),Mn("numeric",pf*(1/0));case"N":return he(),wA("aN"),Mn("numeric",NaN)}throw Qn(he())},zero(){switch(yr){case".":Pt+=he(),jt="decimalPoint";return;case"e":case"E":Pt+=he(),jt="decimalExponent";return;case"x":case"X":Pt+=he(),jt="hexadecimal";return}return Mn("numeric",pf*0)},decimalInteger(){switch(yr){case".":Pt+=he(),jt="decimalPoint";return;case"e":case"E":Pt+=he(),jt="decimalExponent";return}if(ls.isDigit(yr)){Pt+=he();return}return Mn("numeric",pf*Number(Pt))},decimalPointLeading(){if(ls.isDigit(yr)){Pt+=he(),jt="decimalFraction";return}throw Qn(he())},decimalPoint(){switch(yr){case"e":case"E":Pt+=he(),jt="decimalExponent";return}if(ls.isDigit(yr)){Pt+=he(),jt="decimalFraction";return}return Mn("numeric",pf*Number(Pt))},decimalFraction(){switch(yr){case"e":case"E":Pt+=he(),jt="decimalExponent";return}if(ls.isDigit(yr)){Pt+=he();return}return Mn("numeric",pf*Number(Pt))},decimalExponent(){switch(yr){case"+":case"-":Pt+=he(),jt="decimalExponentSign";return}if(ls.isDigit(yr)){Pt+=he(),jt="decimalExponentInteger";return}throw Qn(he())},decimalExponentSign(){if(ls.isDigit(yr)){Pt+=he(),jt="decimalExponentInteger";return}throw Qn(he())},decimalExponentInteger(){if(ls.isDigit(yr)){Pt+=he();return}return Mn("numeric",pf*Number(Pt))},hexadecimal(){if(ls.isHexDigit(yr)){Pt+=he(),jt="hexadecimalInteger";return}throw Qn(he())},hexadecimalInteger(){if(ls.isHexDigit(yr)){Pt+=he();return}return Mn("numeric",pf*Number(Pt))},string(){switch(yr){case"\\":he(),Pt+=Eyt();return;case'"':if(T_)return he(),Mn("string",Pt);Pt+=he();return;case"'":if(!T_)return he(),Mn("string",Pt);Pt+=he();return;case`
`:case"\r":throw Qn(he());case"\u2028":case"\u2029":_yt(yr);break;case void 0:throw Qn(he())}Pt+=he()},start(){switch(yr){case"{":case"[":return Mn("punctuator",he())}jt="value"},beforePropertyName(){switch(yr){case"$":case"_":Pt=he(),jt="identifierName";return;case"\\":he(),jt="identifierNameStartEscape";return;case"}":return Mn("punctuator",he());case'"':case"'":T_=he()==='"',jt="string";return}if(ls.isIdStartChar(yr)){Pt+=he(),jt="identifierName";return}throw Qn(he())},afterPropertyName(){if(yr===":")return Mn("punctuator",he());throw Qn(he())},beforePropertyValue(){jt="value"},afterPropertyValue(){switch(yr){case",":case"}":return Mn("punctuator",he())}throw Qn(he())},beforeArrayValue(){if(yr==="]")return Mn("punctuator",he());jt="value"},afterArrayValue(){switch(yr){case",":case"]":return Mn("punctuator",he())}throw Qn(he())},end(){throw Qn(he())}};function Mn(e,t){return{type:e,value:t,line:ug,column:Pc}}function wA(e){for(let t of e){if(mf()!==t)throw Qn(he());he()}}function Eyt(){switch(mf()){case"b":return he(),"\b";case"f":return he(),"\f";case"n":return he(),`
`;case"r":return he(),"\r";case"t":return he(),"	";case"v":return he(),"\v";case"0":if(he(),ls.isDigit(mf()))throw Qn(he());return"\0";case"x":return he(),byt();case"u":return he(),i8();case`
`:case"\u2028":case"\u2029":return he(),"";case"\r":return he(),mf()===`
`&&he(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":throw Qn(he());case void 0:throw Qn(he())}return he()}function byt(){let e="",t=mf();if(!ls.isHexDigit(t)||(e+=he(),t=mf(),!ls.isHexDigit(t)))throw Qn(he());return e+=he(),String.fromCodePoint(parseInt(e,16))}function i8(){let e="",t=4;for(;t-- >0;){let r=mf();if(!ls.isHexDigit(r))throw Qn(he());e+=he()}return String.fromCodePoint(parseInt(e,16))}var xyt={start(){if(cs.type==="eof")throw IA();t8()},beforePropertyName(){switch(cs.type){case"identifier":case"string":s8=cs.value,So="afterPropertyName";return;case"punctuator":r1();return;case"eof":throw IA()}},afterPropertyName(){if(cs.type==="eof")throw IA();So="beforePropertyValue"},beforePropertyValue(){if(cs.type==="eof")throw IA();t8()},beforeArrayValue(){if(cs.type==="eof")throw IA();if(cs.type==="punctuator"&&cs.value==="]"){r1();return}t8()},afterPropertyValue(){if(cs.type==="eof")throw IA();switch(cs.value){case",":So="beforePropertyName";return;case"}":r1()}},afterArrayValue(){if(cs.type==="eof")throw IA();switch(cs.value){case",":So="beforeArrayValue";return;case"]":r1()}},end(){}};function t8(){let e;switch(cs.type){case"punctuator":switch(cs.value){case"{":e={};break;case"[":e=[];break}break;case"null":case"boolean":case"numeric":case"string":e=cs.value;break}if(R_===void 0)R_=e;else{let t=Af[Af.length-1];Array.isArray(t)?t.push(e):Object.defineProperty(t,s8,{value:e,writable:!0,enumerable:!0,configurable:!0})}if(e!==null&&typeof e=="object")Af.push(e),Array.isArray(e)?So="beforeArrayValue":So="beforePropertyName";else{let t=Af[Af.length-1];t==null?So="end":Array.isArray(t)?So="afterArrayValue":So="afterPropertyValue"}}function r1(){Af.pop();let e=Af[Af.length-1];e==null?So="end":Array.isArray(e)?So="afterArrayValue":So="afterPropertyValue"}function Qn(e){return i1(e===void 0?`JSON5: invalid end of input at ${ug}:${Pc}`:`JSON5: invalid character '${Hxe(e)}' at ${ug}:${Pc}`)}function IA(){return i1(`JSON5: invalid end of input at ${ug}:${Pc}`)}function qxe(){return Pc-=5,i1(`JSON5: invalid identifier character at ${ug}:${Pc}`)}function _yt(e){console.warn(`JSON5: '${Hxe(e)}' in strings is not valid ECMAScript; consider escaping`)}function Hxe(e){let t={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(t[e])return t[e];if(e<" "){let r=e.charCodeAt(0).toString(16);return"\\x"+("00"+r).substring(r.length)}return e}function i1(e){let t=new SyntaxError(e);return t.lineNumber=ug,t.columnNumber=Pc,t}});var Yxe=x((M5t,$xe)=>{"use strict";var o8=e8();$xe.exports=function(t,r,n){let i=[],s="",o,a,l="",c;if(r!=null&&typeof r=="object"&&!Array.isArray(r)&&(n=r.space,c=r.quote,r=r.replacer),typeof r=="function")a=r;else if(Array.isArray(r)){o=[];for(let y of r){let C;typeof y=="string"?C=y:(typeof y=="number"||y instanceof String||y instanceof Number)&&(C=String(y)),C!==void 0&&o.indexOf(C)<0&&o.push(C)}}return n instanceof Number?n=Number(n):n instanceof String&&(n=String(n)),typeof n=="number"?n>0&&(n=Math.min(10,Math.floor(n)),l="          ".substr(0,n)):typeof n=="string"&&(l=n.substr(0,10)),u("",{"":t});function u(y,C){let v=C[y];switch(v!=null&&(typeof v.toJSON5=="function"?v=v.toJSON5(y):typeof v.toJSON=="function"&&(v=v.toJSON(y))),a&&(v=a.call(C,y,v)),v instanceof Number?v=Number(v):v instanceof String?v=String(v):v instanceof Boolean&&(v=v.valueOf()),v){case null:return"null";case!0:return"true";case!1:return"false"}if(typeof v=="string")return f(v,!1);if(typeof v=="number")return String(v);if(typeof v=="object")return Array.isArray(v)?A(v):p(v)}function f(y){let C={"'":.1,'"':.2},v={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"},b="";for(let B=0;B<y.length;B++){let F=y[B];switch(F){case"'":case'"':C[F]++,b+=F;continue;case"\0":if(o8.isDigit(y[B+1])){b+="\\x00";continue}}if(v[F]){b+=v[F];continue}if(F<" "){let Q=F.charCodeAt(0).toString(16);b+="\\x"+("00"+Q).substring(Q.length);continue}b+=F}let w=c||Object.keys(C).reduce((B,F)=>C[B]<C[F]?B:F);return b=b.replace(new RegExp(w,"g"),v[w]),w+b+w}function p(y){if(i.indexOf(y)>=0)throw TypeError("Converting circular structure to JSON5");i.push(y);let C=s;s=s+l;let v=o||Object.keys(y),b=[];for(let B of v){let F=u(B,y);if(F!==void 0){let Q=g(B)+":";l!==""&&(Q+=" "),Q+=F,b.push(Q)}}let w;if(b.length===0)w="{}";else{let B;if(l==="")B=b.join(","),w="{"+B+"}";else{let F=`,
`+s;B=b.join(F),w=`{
`+s+B+`,
`+C+"}"}}return i.pop(),s=C,w}function g(y){if(y.length===0)return f(y,!0);let C=String.fromCodePoint(y.codePointAt(0));if(!o8.isIdStartChar(C))return f(y,!0);for(let v=C.length;v<y.length;v++)if(!o8.isIdContinueChar(String.fromCodePoint(y.codePointAt(v))))return f(y,!0);return y}function A(y){if(i.indexOf(y)>=0)throw TypeError("Converting circular structure to JSON5");i.push(y);let C=s;s=s+l;let v=[];for(let w=0;w<y.length;w++){let B=u(String(w),y);v.push(B!==void 0?B:"null")}let b;if(v.length===0)b="[]";else if(l==="")b="["+v.join(",")+"]";else{let w=`,
`+s,B=v.join(w);b=`[
`+s+B+`,
`+C+"]"}return i.pop(),s=C,b}}});var a8=x((Q5t,Kxe)=>{"use strict";var wyt=Gxe(),Iyt=Yxe(),Syt={parse:wyt,stringify:Iyt};Kxe.exports=Syt});var V8=x((yJt,Mwe)=>{"use strict";function Xn(e,r){var r=r||{};this._capacity=r.capacity,this._head=0,this._tail=0,Array.isArray(e)?this._fromArray(e):(this._capacityMask=3,this._list=new Array(4))}Xn.prototype.peekAt=function(t){var r=t;if(r===(r|0)){var n=this.size();if(!(r>=n||r<-n))return r<0&&(r+=n),r=this._head+r&this._capacityMask,this._list[r]}};Xn.prototype.get=function(t){return this.peekAt(t)};Xn.prototype.peek=function(){if(this._head!==this._tail)return this._list[this._head]};Xn.prototype.peekFront=function(){return this.peek()};Xn.prototype.peekBack=function(){return this.peekAt(-1)};Object.defineProperty(Xn.prototype,"length",{get:function(){return this.size()}});Xn.prototype.size=function(){return this._head===this._tail?0:this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};Xn.prototype.unshift=function(t){if(arguments.length===0)return this.size();var r=this._list.length;return this._head=this._head-1+r&this._capacityMask,this._list[this._head]=t,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.pop(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};Xn.prototype.shift=function(){var t=this._head;if(t!==this._tail){var r=this._list[t];return this._list[t]=void 0,this._head=t+1&this._capacityMask,t<2&&this._tail>1e4&&this._tail<=this._list.length>>>2&&this._shrinkArray(),r}};Xn.prototype.push=function(t){if(arguments.length===0)return this.size();var r=this._tail;return this._list[r]=t,this._tail=r+1&this._capacityMask,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.shift(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};Xn.prototype.pop=function(){var t=this._tail;if(t!==this._head){var r=this._list.length;this._tail=t-1+r&this._capacityMask;var n=this._list[this._tail];return this._list[this._tail]=void 0,this._head<2&&t>1e4&&t<=r>>>2&&this._shrinkArray(),n}};Xn.prototype.removeOne=function(t){var r=t;if(r===(r|0)&&this._head!==this._tail){var n=this.size(),i=this._list.length;if(!(r>=n||r<-n)){r<0&&(r+=n),r=this._head+r&this._capacityMask;var s=this._list[r],o;if(t<n/2){for(o=t;o>0;o--)this._list[r]=this._list[r=r-1+i&this._capacityMask];this._list[r]=void 0,this._head=this._head+1+i&this._capacityMask}else{for(o=n-1-t;o>0;o--)this._list[r]=this._list[r=r+1+i&this._capacityMask];this._list[r]=void 0,this._tail=this._tail-1+i&this._capacityMask}return s}}};Xn.prototype.remove=function(t,r){var n=t,i,s=r;if(n===(n|0)&&this._head!==this._tail){var o=this.size(),a=this._list.length;if(!(n>=o||n<-o||r<1)){if(n<0&&(n+=o),r===1||!r)return i=new Array(1),i[0]=this.removeOne(n),i;if(n===0&&n+r>=o)return i=this.toArray(),this.clear(),i;n+r>o&&(r=o-n);var l;for(i=new Array(r),l=0;l<r;l++)i[l]=this._list[this._head+n+l&this._capacityMask];if(n=this._head+n&this._capacityMask,t+r===o){for(this._tail=this._tail-r+a&this._capacityMask,l=r;l>0;l--)this._list[n=n+1+a&this._capacityMask]=void 0;return i}if(t===0){for(this._head=this._head+r+a&this._capacityMask,l=r-1;l>0;l--)this._list[n=n+1+a&this._capacityMask]=void 0;return i}if(n<o/2){for(this._head=this._head+t+r+a&this._capacityMask,l=t;l>0;l--)this.unshift(this._list[n=n-1+a&this._capacityMask]);for(n=this._head-1+a&this._capacityMask;s>0;)this._list[n=n-1+a&this._capacityMask]=void 0,s--;t<0&&(this._tail=n)}else{for(this._tail=n,n=n+r+a&this._capacityMask,l=o-(r+t);l>0;l--)this.push(this._list[n++]);for(n=this._tail;s>0;)this._list[n=n+1+a&this._capacityMask]=void 0,s--}return this._head<2&&this._tail>1e4&&this._tail<=a>>>2&&this._shrinkArray(),i}}};Xn.prototype.splice=function(t,r){var n=t;if(n===(n|0)){var i=this.size();if(n<0&&(n+=i),!(n>i))if(arguments.length>2){var s,o,a,l=arguments.length,c=this._list.length,u=2;if(!i||n<i/2){for(o=new Array(n),s=0;s<n;s++)o[s]=this._list[this._head+s&this._capacityMask];for(r===0?(a=[],n>0&&(this._head=this._head+n+c&this._capacityMask)):(a=this.remove(n,r),this._head=this._head+n+c&this._capacityMask);l>u;)this.unshift(arguments[--l]);for(s=n;s>0;s--)this.unshift(o[s-1])}else{o=new Array(i-(n+r));var f=o.length;for(s=0;s<f;s++)o[s]=this._list[this._head+n+r+s&this._capacityMask];for(r===0?(a=[],n!=i&&(this._tail=this._head+n+c&this._capacityMask)):(a=this.remove(n,r),this._tail=this._tail-f+c&this._capacityMask);u<l;)this.push(arguments[u++]);for(s=0;s<f;s++)this.push(o[s])}return a}else return this.remove(n,r)}};Xn.prototype.clear=function(){this._list=new Array(this._list.length),this._head=0,this._tail=0};Xn.prototype.isEmpty=function(){return this._head===this._tail};Xn.prototype.toArray=function(){return this._copyArray(!1)};Xn.prototype._fromArray=function(t){var r=t.length,n=this._nextPowerOf2(r);this._list=new Array(n),this._capacityMask=n-1,this._tail=r;for(var i=0;i<r;i++)this._list[i]=t[i]};Xn.prototype._copyArray=function(t,r){var n=this._list,i=n.length,s=this.length;if(r=r|s,r==s&&this._head<this._tail)return this._list.slice(this._head,this._tail);var o=new Array(r),a=0,l;if(t||this._head>this._tail){for(l=this._head;l<i;l++)o[a++]=n[l];for(l=0;l<this._tail;l++)o[a++]=n[l]}else for(l=this._head;l<this._tail;l++)o[a++]=n[l];return o};Xn.prototype._growArray=function(){if(this._head!=0){var t=this._copyArray(!0,this._list.length<<1);this._tail=this._list.length,this._head=0,this._list=t}else this._tail=this._list.length,this._list.length<<=1;this._capacityMask=this._capacityMask<<1|1};Xn.prototype._shrinkArray=function(){this._list.length>>>=1,this._capacityMask>>>=1};Xn.prototype._nextPowerOf2=function(t){var r=Math.log(t)/Math.log(2),n=1<<r+1;return Math.max(n,4)};Mwe.exports=Xn});var Gwe=x((LJt,Wwe)=>{"use strict";function Nwe(e){return Array.isArray(e)?e:[e]}var Owe="",Pwe=" ",W8="\\",ACt=/^\s+$/,mCt=/(?:[^\\]|^)\\$/,yCt=/^\\!/,CCt=/^\\#/,vCt=/\r?\n/g,ECt=/^\.*\/|^\.+$/,G8="/",qwe="node-ignore";typeof Symbol<"u"&&(qwe=Symbol.for("node-ignore"));var Lwe=qwe,bCt=(e,t,r)=>Object.defineProperty(e,t,{value:r}),xCt=/([0-z])-([0-z])/g,Vwe=()=>!1,_Ct=e=>e.replace(xCt,(t,r,n)=>r.charCodeAt(0)<=n.charCodeAt(0)?t:Owe),wCt=e=>{let{length:t}=e;return e.slice(0,t-t%2)},ICt=[[/\\?\s+$/,e=>e.indexOf("\\")===0?Pwe:Owe],[/\\\s/g,()=>Pwe],[/[\\$.|*+(){^]/g,e=>`\\${e}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(e,t,r)=>t+6<r.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)(\\\*)+(?=.+)/g,(e,t,r)=>{let n=r.replace(/\\\*/g,"[^\\/]*");return t+n}],[/\\\\\\(?=[$.|*+(){^])/g,()=>W8],[/\\\\/g,()=>W8],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(e,t,r,n,i)=>t===W8?`\\[${r}${wCt(n)}${i}`:i==="]"&&n.length%2===0?`[${_Ct(r)}${n}]`:"[]"],[/(?:[^*])$/,e=>/\/$/.test(e)?`${e}$`:`${e}(?=$|\\/$)`],[/(\^|\\\/)?\\\*$/,(e,t)=>`${t?`${t}[^/]+`:"[^/]*"}(?=$|\\/$)`]],Uwe=Object.create(null),SCt=(e,t)=>{let r=Uwe[e];return r||(r=ICt.reduce((n,i)=>n.replace(i[0],i[1].bind(e)),e),Uwe[e]=r),t?new RegExp(r,"i"):new RegExp(r)},K8=e=>typeof e=="string",BCt=e=>e&&K8(e)&&!ACt.test(e)&&!mCt.test(e)&&e.indexOf("#")!==0,DCt=e=>e.split(vCt),$8=class{constructor(t,r,n,i){this.origin=t,this.pattern=r,this.negative=n,this.regex=i}},TCt=(e,t)=>{let r=e,n=!1;e.indexOf("!")===0&&(n=!0,e=e.substr(1)),e=e.replace(yCt,"!").replace(CCt,"#");let i=SCt(e,t);return new $8(r,e,n,i)},RCt=(e,t)=>{throw new t(e)},_f=(e,t,r)=>K8(e)?e?_f.isNotRelative(e)?r(`path should be a \`path.relative()\`d string, but got "${t}"`,RangeError):!0:r("path must not be empty",TypeError):r(`path must be a string, but got \`${t}\``,TypeError),Hwe=e=>ECt.test(e);_f.isNotRelative=Hwe;_f.convert=e=>e;var Y8=class{constructor({ignorecase:t=!0,ignoreCase:r=t,allowRelativePaths:n=!1}={}){bCt(this,Lwe,!0),this._rules=[],this._ignoreCase=r,this._allowRelativePaths=n,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern(t){if(t&&t[Lwe]){this._rules=this._rules.concat(t._rules),this._added=!0;return}if(BCt(t)){let r=TCt(t,this._ignoreCase);this._added=!0,this._rules.push(r)}}add(t){return this._added=!1,Nwe(K8(t)?DCt(t):t).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern(t){return this.add(t)}_testOne(t,r){let n=!1,i=!1;return this._rules.forEach(s=>{let{negative:o}=s;if(i===o&&n!==i||o&&!n&&!i&&!r)return;s.regex.test(t)&&(n=!o,i=o)}),{ignored:n,unignored:i}}_test(t,r,n,i){let s=t&&_f.convert(t);return _f(s,t,this._allowRelativePaths?Vwe:RCt),this._t(s,r,n,i)}_t(t,r,n,i){if(t in r)return r[t];if(i||(i=t.split(G8)),i.pop(),!i.length)return r[t]=this._testOne(t,n);let s=this._t(i.join(G8)+G8,r,n,i);if(s.ignored)return r[t]=s;let o=this._testOne(t,n);return r[t]={ignored:o.ignored,unignored:s.unignored||o.unignored}}ignores(t){return this._test(t,this._ignoreCache,!1).ignored}createFilter(){return t=>!this.ignores(t)}filter(t){return Nwe(t).filter(this.createFilter())}test(t){return this._test(t,this._testCache,!0)}},hN=e=>new Y8(e),kCt=e=>_f(e&&_f.convert(e),e,Vwe);hN.isPathValid=kCt;hN.default=hN;Wwe.exports=hN;if(typeof process<"u"&&(process.env&&process.env.IGNORE_TEST_WIN32||process.platform==="win32")){let e=r=>/^\\\\\?\\/.test(r)||/["<>|\u0000-\u001F]+/u.test(r)?r:r.replace(/\\/g,"/");_f.convert=e;let t=/^[a-z]:\//i;_f.isNotRelative=r=>t.test(r)||Hwe(r)}});var fvt={};mP(fvt,{AugmentExtension:()=>DA,_exportedForTesting:()=>dvt,activate:()=>uvt,getSessionId:()=>CIe});module.exports=yP(fvt);var Qv;function Q$(e){if(Qv){Qv.warn("Attempting to initialize logger when one is already configured. Keeping existing logger.");return}Qv=e}function Mr(e){if(!Qv)throw new Error("Logger not initialized. Call setLogger() before using getLogger().");return Qv.child({prefix:e})}var Nv=class{static _instance=void 0;static setPluginFileStore(t){if(this._instance!==void 0){Mr("PluginFileStore").warn("Attempting to initialize client workspaces when one is already configured. Keeping existing client workspaces.");return}this._instance=t}static getPluginFileStore(){if(this._instance===void 0)throw new Error("PluginFileStore not set");return this._instance}static reset(){this._instance=void 0}},N$=e=>Nv.setPluginFileStore(e),wI=()=>Nv.getPluginFileStore(),P$=()=>Nv.reset();var II=class e{_logger=Mr("AgentShardStorage");static storagePathKeyPrefix="agent-edit-shard-storage";static manifestKey="manifest";static serializedStoreKey="serialized-store";async save(t){await this._saveJson(this._getStoragePath(bd.serializedStore,e.serializedStoreKey),t)}async load(){return this._loadJson(this._getStoragePath(bd.serializedStore,e.serializedStoreKey))}async _saveJson(t,r){let n=Buffer.from(JSON.stringify(r),"utf8");await wI().saveAsset(t,new Uint8Array(n))}async _loadJson(t){let r=await wI().loadAsset(t);if(!(!r||r.length===0))return JSON.parse(Buffer.from(r).toString("utf8"))}_getStoragePath(t,r){return`agent-edits/${t}/${e.storagePathKeyPrefix}-${r}.json`}async saveShard(t,r){await this._saveJson(this._getStoragePath(bd.shards,t),r)}async loadShard(t){return this._loadJson(this._getStoragePath(bd.shards,t))}async deleteShard(t){await wI().deleteAsset(this._getStoragePath(bd.shards,t))}async saveManifest(t){await this._saveJson(this._getStoragePath(bd.manifest,e.manifestKey),t)}async loadManifest(){return this._loadJson(this._getStoragePath(bd.manifest,e.manifestKey))}},bd;(function(e){e.shards="shards",e.manifest="manifest",e.serializedStore="serialized-store"})(bd||(bd={}));var Pv=require("path");function zt(e,t,r=!1){let n=(0,Pv.join)(e,t);return r&&!n.endsWith(Pv.sep)&&(n+=Pv.sep),n}var qe=class e{rootPath;relPath;constructor(t,r){this.rootPath=t,this.relPath=r}static from(t){return new e(t.rootPath,t.relPath)}get absPath(){return zt(this.rootPath,this.relPath)}equals(t){return e.equals(this,t)}static equals(t,r){if(t===r)return!0;if(t==null||r==null)return!1;let n=L$(t)?zt(t.rootPath,t.relPath):t.fsPath,i=L$(r)?zt(r.rootPath,r.relPath):r.fsPath;return n===i}};function L$(e){return e!=null&&typeof e=="object"&&("rootPath"in e||"relPath"in e)}var Lg=class{_disposables=[];add(t){if(t===void 0)throw new Error("Attempt to add undefined disposable to DisposableCollection");return this._disposables.push(t),t}addAll(...t){t.forEach(r=>this.add(r))}adopt(t){this._disposables.push(...t._disposables),t._disposables.length=0}dispose(){for(let t of this._disposables)t.dispose();this._disposables.length=0}};var Uf=class{_disposables=new Lg;_priorityDisposables=new Lg;constructor(t=new Lg,r=new Lg){this._disposables.adopt(t),this._priorityDisposables.adopt(r)}addDisposable(t,r=!1){return r?this._priorityDisposables.add(t):this._disposables.add(t)}addDisposables(...t){this._disposables.addAll(...t)}dispose(){this._priorityDisposables.dispose(),this._disposables.dispose()}};var pn=class e extends Uf{filePath;_originalCode;_modifiedCode;_opts;static EMPTY_PATH_NAME={rootPath:"",relPath:""};_originalListeners;_modifiedListeners;_isUntitled;constructor(t,r,n,i){super(),this.filePath=t,this._originalCode=r,this._modifiedCode=n,this._opts=i,this._isUntitled=this._opts.isUntitled??(()=>!1),this._originalListeners=new Set,this._modifiedListeners=new Set,this.addDisposable({dispose:()=>this._originalListeners.clear()}),this.addDisposable({dispose:()=>this._modifiedListeners.clear()}),this._opts?.logger?.debug(this.toString("constructor",!0))}toString(t,r=!1){let n=this.isUntitled?" (untitled)":"",i=this._originalCode!==this._modifiedCode,s=this._originalCode?this._originalCode.split(`
`).length:0,o=this._modifiedCode?this._modifiedCode.split(`
`).length:0,a=this._originalCode!==void 0,l=this._modifiedCode!==void 0;return r?[`[${t}] DiffViewDocument`,"----------------------------------------",`Path      : ${this.filePath.absPath}${n}`,`Original  : ${a?`${s} lines`:"(file deleted)"}`,`Modified  : ${l?`${o} lines`:"(file deleted)"}`,"----------------------------------------"].join(`
`):[`[${t}] DiffViewDocument`,"----------------------------------------",`Path      : ${this.filePath.absPath}${n}`,`Status    : ${i?"Modified":"Unchanged"}`,`Orig Size : ${a?`${this._originalCode?.length} chars`:"(file deleted)"}`,`Mod Size  : ${l?`${this._modifiedCode?.length} chars`:"(file deleted)"}`,"","Original Code:",a?this._originalCode||"(empty)":"(file deleted)","","Modified Code:",l?this._modifiedCode||"(empty)":"(file deleted)","----------------------------------------"].join(`
`)}static empty(){return new e(qe.from(e.EMPTY_PATH_NAME),"","",{})}static deleted(t){return new e(t,void 0,void 0,{})}get isEmptyDocument(){return this.filePath.equals(e.EMPTY_PATH_NAME)}get absPath(){return this.filePath.absPath}get originalCode(){return this.isEmptyDocument?"":this._originalCode}get modifiedCode(){return this.isEmptyDocument?"":this._modifiedCode}get isUntitled(){return this._isUntitled(this.filePath)}onOriginalUpdated=t=>(this._originalListeners.add(t),{dispose:()=>this._originalListeners.delete(t)});onModifiedUpdated=t=>(this._modifiedListeners.add(t),{dispose:()=>this._modifiedListeners.delete(t)});updateOriginal=t=>this.originalCode===t?!1:(this._originalCode=t,this._originalListeners.forEach(r=>r(this)),!0);updateBuffer=t=>this.modifiedCode===t?!1:(this._modifiedCode=t,this._modifiedListeners.forEach(r=>r(this)),!0);updateCodeVersions=(t,r)=>{let n=!1;return t===void 0&&r===void 0?(n=this.updateOriginal(void 0)||n,n=this.updateBuffer(void 0)||n,n):(t!==void 0&&(n=this.updateOriginal(t)||n),r!==void 0&&(n=this.updateBuffer(r)||n),n)}};function U$(e){return typeof e!="string"?{isValid:!1,reason:"Shard ID must be a string"}:e.length===0?{isValid:!1,reason:"Shard ID cannot be empty"}:{isValid:!0}}function SI(e){if(typeof e.version!="number"||typeof e.lastUpdated!="number")return{isValid:!1,reason:"Invalid manifest version or lastUpdated timestamp"};if(!e.shards||typeof e.shards!="object")return{isValid:!1,reason:"Missing or invalid shards object"};for(let[t,r]of Object.entries(e.shards)){let n=U$(t);if(!n.isValid)return n;if(!r||typeof r!="object")return{isValid:!1,reason:`Invalid metadata object for shard ${t}`};if(typeof r.size!="number")return{isValid:!1,reason:`Invalid size field for shard ${t}`};if(typeof r.checkpointCount!="number")return{isValid:!1,reason:`Invalid checkpointCount field for shard ${t}`};if(typeof r.lastModified!="number")return{isValid:!1,reason:`Invalid lastModified field for shard ${t}`};if(!Array.isArray(r.checkpointDocumentIds))return{isValid:!1,reason:`Invalid checkpointDocumentIds array for shard ${t}`};for(let i of r.checkpointDocumentIds)if(typeof i!="string"||i.length===0)return{isValid:!1,reason:`Invalid checkpoint document ID in shard ${t}: ${i}`}}return{isValid:!0}}function O$(e){let t={};for(let[n,i]of Object.entries(e.shards))CP({id:n,checkpoints:{},metadata:i}).isValid&&(t[n]=i);let r=1;return typeof e.version=="number"&&e.version>=1?r=e.version+1:r=1,{...e,version:r,lastUpdated:Date.now(),shards:t}}function CP(e){let t=U$(e.id);if(!t.isValid)return t;let r=SI({version:1,lastUpdated:Date.now(),shards:{[e.id]:e.metadata}});if(!r.isValid)return r;if(typeof e.checkpoints!="object"||!e.checkpoints)return{isValid:!1,reason:"Missing or invalid checkpoints object"};for(let[s,o]of Object.entries(e.checkpoints)){if(typeof s!="string"||s.length===0)return{isValid:!1,reason:`Invalid checkpoint ID: ${s}`};if(!Array.isArray(o))return{isValid:!1,reason:`Checkpoints for ID ${s} must be an array`};for(let a of o)if(typeof a!="object"||!a||typeof a.sourceToolCallRequestId!="string"||typeof a.timestamp!="number"||typeof a.document!="object"||!a.document||a.document.originalCode!==void 0&&typeof a.document.originalCode!="string"||a.document.modifiedCode!==void 0&&typeof a.document.modifiedCode!="string"||typeof a.document.path!="object"||!a.document.path||typeof a.document.path.rootPath!="string"||typeof a.document.path.relPath!="string")return{isValid:!1,reason:`Invalid checkpoint structure in ID ${s}`}}let n=new Set(Object.keys(e.checkpoints)),i=new Set(e.metadata.checkpointDocumentIds);if(n.size!==i.size)return{isValid:!1,reason:"Mismatch between checkpoint IDs in metadata and actual checkpoints"};for(let s of n)if(!i.has(s))return{isValid:!1,reason:"Mismatch between checkpoint IDs in metadata and actual checkpoints"};return{isValid:!0}}function vP(e,t,r=!0){let{minTimestamp:n,maxTimestamp:i,minIdx:s,maxIdx:o}=t;return e.filter((a,l)=>{let c=(n===void 0||a.timestamp>=n)&&(i===void 0||a.timestamp<i),u=(s===void 0||l>=s)&&(o===void 0||l<o),f=n!==void 0||i!==void 0,p=s!==void 0||o!==void 0;if(!(f||p))return r;let A=(!f||c)&&(!p||u);return r?A:!A})}var Of=class extends Error{constructor(t){super(t),this.name="SerializationError"}};function zke(e){return{path:{rootPath:e.filePath.rootPath,relPath:e.filePath.relPath},originalCode:e.originalCode,modifiedCode:e.modifiedCode}}function Jke(e){return new pn(qe.from(e.path),e.originalCode,e.modifiedCode,{})}function jke(e){return{sourceToolCallRequestId:e.sourceToolCallRequestId,timestamp:e.timestamp,document:zke(e.document),conversationId:e.conversationId}}function Zke(e){return{sourceToolCallRequestId:e.sourceToolCallRequestId,timestamp:e.timestamp,document:Jke(e.document),conversationId:e.conversationId}}function q$(e){try{let t={id:e.id,checkpoints:{},metadata:e.getMetadata()};for(let r of e.checkpointDocumentIds){let n=e.getCheckpointsById(r);n&&(t.checkpoints[r]=n.map(jke))}return t}catch(t){throw new Of(`Failed to serialize shard: ${t instanceof Error?t.message:String(t)}`)}}function V$(e,t,r){try{if(!eFe(t))throw new Of("Invalid shard data structure");if(t.id!==e)throw new Of(`Shard ID mismatch: expected ${e}, got ${t.id}`);if(!CP(t).isValid)throw new Of("Shard validation failed");let n=new Ug(e,r);for(let i of Object.entries(t.checkpoints))for(let s of i[1]){let o=qe.from(s.document.path),a={conversationId:s.conversationId,path:o};n.addCheckpoint(a,Zke(s))}return n}catch(n){throw n instanceof Of?n:new Of(`Failed to deserialize shard: ${n instanceof Error?n.message:String(n)}`)}}function Xke(e){if(typeof e!="object"||!e)return!1;let t=e;return typeof t.path=="object"&&!!t.path&&typeof t.path.rootPath=="string"&&typeof t.path.relPath=="string"&&(t.originalCode===void 0||typeof t.originalCode=="string")&&(t.modifiedCode===void 0||typeof t.modifiedCode=="string")}function eFe(e){if(typeof e!="object"||!e)return!1;let t=e;if(typeof t.id!="string"||typeof t.checkpoints!="object"||!t.checkpoints||typeof t.metadata!="object"||!t.metadata)return!1;let r=t.metadata;if(!Array.isArray(r.checkpointDocumentIds)||typeof r.size!="number"||typeof r.checkpointCount!="number"||typeof r.lastModified!="number")return!1;let n=t.checkpoints,i=r.checkpointDocumentIds;return Object.entries(n).every(([s,o])=>!Array.isArray(o)||!i.includes(s)?!1:o.every(a=>{if(typeof a!="object"||!a)return!1;let l=a;return typeof l.sourceToolCallRequestId=="string"&&typeof l.timestamp=="number"&&typeof l.conversationId=="string"&&Xke(l.document)}))}var Ug=class{_id;_checkpointDocumentIdFn;_checkpoints=new Map;_lastModified=Date.now();_isDirty=!1;constructor(t,r){this._id=t,this._checkpointDocumentIdFn=r}static fromSerialized(t,r,n){if(r.id!==t)throw new Error(`Shard ID mismatch: expected ${t}, got ${r.id}`);return V$(t,r,n)}get id(){return this._id}get size(){return Array.from(this._checkpoints.values()).reduce((t,r)=>t+r.reduce((n,i)=>n+(i.document.originalCode?i.document.originalCode.length:0)+(i.document.modifiedCode?i.document.modifiedCode.length:0),0),0)}get checkpointCount(){return Array.from(this._checkpoints.values()).reduce((t,r)=>t+r.length,0)}get lastModified(){return this._lastModified}get checkpointDocumentIds(){return Array.from(this._checkpoints.keys())}getCheckpointsById(t){return this._checkpoints.get(t)}serialize(){return q$(this)}getMetadata(){return{checkpointDocumentIds:this.checkpointDocumentIds,size:this.size,checkpointCount:this.checkpointCount,lastModified:this._lastModified}}get isDirty(){return this._isDirty}clearDirty(){this._isDirty=!1}hasKey(t){return this._checkpoints.has(this._checkpointDocumentIdFn(t))}getAllCheckpoints(){return Array.from(this._checkpoints.values()).flat()}getAllCheckpointsSorted(){return this.getAllCheckpoints().sort((t,r)=>t.timestamp-r.timestamp)}get orderedCheckpointsByTime(){return this.getAllCheckpointsSorted()}get totalCheckpointCount(){return this.checkpointCount}getCheckpointNumberForToolCall(t){let r=this.orderedCheckpointsByTime.findIndex(n=>n.sourceToolCallRequestId===t);return r===-1?void 0:r}getCheckpointBySourceId(t){return this.getAllCheckpoints().find(r=>r.sourceToolCallRequestId===t)}getCheckpoints(t,r){let n=this._checkpoints.get(this._checkpointDocumentIdFn(t));if(!n?.length)return;if(!r)return n;let i=vP(n,r);return i.length>0?i:[]}getLatestCheckpoint(t){let r=this._checkpoints.get(this._checkpointDocumentIdFn(t));return r?.[r.length-1]}addCheckpoint(t,r){let n=this._checkpointDocumentIdFn(t),s=[...this._checkpoints.get(n)||[],r].sort((o,a)=>o.timestamp-a.timestamp);this._checkpoints.set(n,s),this._lastModified=Date.now(),this._isDirty=!0}updateCheckpoint(t,r){let n=this._checkpointDocumentIdFn(t),i=this._checkpoints.get(n)||[],s=i.findIndex(o=>o.sourceToolCallRequestId===r.sourceToolCallRequestId);s!==-1&&(i[s]=r,this._checkpoints.set(n,i),this._lastModified=Date.now(),this._isDirty=!0)}getAllTrackedConversationIds(){let t=new Set;for(let r of this.getAllCheckpoints())t.add(r.conversationId);return Array.from(t)}getAllTrackedFilePaths(t){let r=new Map;for(let n of this.getAllCheckpoints())n.conversationId===t&&r.set(n.document.filePath.absPath,n.document.filePath);return Array.from(r.values())}removeCheckpoint(t,r){let n=this._checkpointDocumentIdFn(t),i=this._checkpoints.get(n);if(!i?.length)return!1;if(!r)return this._checkpoints.delete(n),this._lastModified=Date.now(),this._isDirty=!0,!0;let s=vP(i,r,!1);return s.length===i.length?!1:(s.length===0?this._checkpoints.delete(n):this._checkpoints.set(n,s),this._lastModified=Date.now(),this._isDirty=!0,!0)}clear(){this._checkpoints.clear(),this._lastModified=Date.now(),this._isDirty=!0}};var Lv=class{static _instance=void 0;static setClientWorkspaces(t){if(this._instance!==void 0){Mr("ClientWorkspaces").warn("Attempting to initialize client workspaces when one is already configured. Keeping existing client workspaces.");return}this._instance=t}static getClientWorkspaces(){if(this._instance===void 0)throw new Error("ClientWorkspaces not set");return this._instance}static reset(){this._instance=void 0}},H$=e=>Lv.setClientWorkspaces(e),Li=()=>Lv.getClientWorkspaces(),W$=()=>Lv.reset();var vY=V(dm()),BI=class e extends Uf{_storage;_shardFunction;_options;static DEFAULT_FLUSH_INTERVAL_MS=5e3;_shardCache=new Map;_manifest={version:1,lastUpdated:Date.now(),shards:{}};_accessOrder=[];_flushThrottled;_isDisposing=!1;_initializePromise;_checkpointDocumentIdFn;constructor(t,r,n={}){super(),this._storage=t,this._shardFunction=r,this._options=n,this._checkpointDocumentIdFn=i=>`${i.conversationId}:${i.path.absPath}`,this._flushThrottled=(0,vY.default)(()=>this._flush(),this._options.flushIntervalMs??e.DEFAULT_FLUSH_INTERVAL_MS,{leading:!1,trailing:!0})}get manifest(){return this._manifest}initialize=async()=>this._initializePromise?this._initializePromise:(this._initializePromise=(async()=>{try{let t=await this._storage.loadManifest();t?SI(t).isValid?this._manifest=t:(this._manifest=O$(t),await this._storage.saveManifest(this._manifest)):(this._manifest={version:1,lastUpdated:Date.now(),shards:{}},await this._storage.saveManifest(this._manifest))}catch(t){throw this._initializePromise=void 0,t}})(),this._initializePromise);_getShardId(t){let r=this._checkpointDocumentIdFn(t);for(let[n,i]of Object.entries(this._manifest.shards))if(i.checkpointDocumentIds.includes(r))return n;return this._shardFunction(t,{manifestSnapshot:this._manifest,pathStats:{checkpointCount:0,estimatedSize:0}})}_updateAccessTime(t){let r=this._accessOrder.indexOf(t);r>-1&&this._accessOrder.splice(r,1),this._accessOrder.push(t)}async _updateCheckpointsFromDisk(t){let r=[];for(let s of t.getAllTrackedConversationIds())for(let o of t.getAllTrackedFilePaths(s)){let a=t.getLatestCheckpoint({conversationId:s,path:o});a&&r.push({conversationId:s,path:o,latestCheckpoint:a})}if(r.length===0)return t;let n=await Promise.all(r.map(async s=>{try{let o=(await Li().readFile(s.path.absPath)).contents;return{...s,onDiskContents:o,error:null}}catch(o){return console.error(`Failed to read file ${s.path.absPath}:`,o),{...s,onDiskContents:null,error:o}}})),i=[];for(let s of n){if(s.error||!s.onDiskContents||s.onDiskContents===s.latestCheckpoint.document.modifiedCode)continue;let o=new pn(s.path,s.latestCheckpoint.document.modifiedCode,s.onDiskContents,{});i.push({keyData:{conversationId:s.conversationId,path:s.path},checkpoint:{sourceToolCallRequestId:crypto.randomUUID(),timestamp:Date.now(),document:o,conversationId:s.conversationId}})}for(let{keyData:s,checkpoint:o}of i)t.addCheckpoint(s,o);return t}async _loadShard(t){let r=this._shardCache.get(t);if(r)return this._updateAccessTime(t),r;let n=await this._storage.loadShard(t);return r=n?Ug.fromSerialized(t,n,this._checkpointDocumentIdFn):new Ug(t,this._checkpointDocumentIdFn),r=await this._updateCheckpointsFromDisk(r),this._shardCache.set(t,r),this._updateAccessTime(t),r}_updateManifest(t,r){this._manifest.shards[t]=r.getMetadata(),this._manifest.lastUpdated=Date.now()}_triggerFlush(){if(this._isDisposing)return this._flush();this._flushThrottled()}async _flush(){let t=[],r=[],n=!1;for(let[i,s]of this._shardCache.entries())s.checkpointCount===0?(r.push(i),n=!0):s.isDirty&&(t.push(i),this._manifest.shards[i]=s.getMetadata(),n=!0);if(n){this._manifest.lastUpdated=Date.now();try{let i=new Map;for(let l of t){let c=this._shardCache.get(l);c&&i.set(l,c.serialize())}await Promise.all(Array.from(i.entries()).map(([l,c])=>this._storage.saveShard(l,c))),await Promise.all(r.map(l=>this._storage.deleteShard(l)));let s=this._options.maxCachedShards??10,o=[],a=[];for(;this._shardCache.size>s&&this._accessOrder.length>0;){let l=this._accessOrder.shift();if(l){let c=this._shardCache.get(l);c&&c.isDirty&&a.push(this._storage.saveShard(l,c.serialize())),o.push(l)}}await Promise.all(a),await this._storage.saveManifest(this._manifest);for(let l of t){let c=this._shardCache.get(l);c&&c.clearDirty()}for(let l of r)this._shardCache.delete(l),delete this._manifest.shards[l];for(let l of o)this._shardCache.delete(l)}catch(i){console.error("Failed to flush shards:",i)}}}async flush(){await this._flush()}getCacheSize(){return this._shardCache.size}getShard=async t=>{let r=this._getShardId(t);return await this.getShardById(r)};getShardById=async t=>await this._loadShard(t);hasKey=async t=>{let r=this._getShardId(t);return(await this._loadShard(r)).hasKey(t)};getCheckpoints=async(t,r)=>{let n=this._getShardId(t);return(await this._loadShard(n)).getCheckpoints(t,r)||[]};getLatestCheckpoint=async t=>{let r=this._getShardId(t);return(await this._loadShard(r)).getLatestCheckpoint(t)};addCheckpoint=async(t,r)=>{await this._performShardOperation(t,n=>{n.addCheckpoint(t,r)})};updateCheckpoint=async(t,r)=>{await this._performShardOperation(t,n=>{n.updateCheckpoint(t,r)})};removeCheckpoint=async(t,r)=>{let n=!1;return await this._performShardOperation(t,i=>{n=i.removeCheckpoint(t,r)}),n};async _performShardOperation(t,r){let n=this._getShardId(t);await this._performShardOperationById(n,r)}async _performShardOperationById(t,r){let n=await this._loadShard(t);r(n),this._updateManifest(t,n),await this._triggerFlush()}clearShard=async t=>{await this._performShardOperationById(t,r=>{r.clear()})};clear=async()=>{for(let[,t]of this._shardCache)t.clear();this._manifest={version:1,lastUpdated:Date.now(),shards:{}},await this._flush(),this._shardCache.clear(),this._accessOrder=[]};dispose=async()=>{this._isDisposing=!0,this._flushThrottled.cancel&&this._flushThrottled.cancel(),await this._flush(),super.dispose()}};var Cs=[];for(let e=0;e<256;++e)Cs.push((e+256).toString(16).slice(1));function EY(e,t=0){return(Cs[e[t+0]]+Cs[e[t+1]]+Cs[e[t+2]]+Cs[e[t+3]]+"-"+Cs[e[t+4]]+Cs[e[t+5]]+"-"+Cs[e[t+6]]+Cs[e[t+7]]+"-"+Cs[e[t+8]]+Cs[e[t+9]]+"-"+Cs[e[t+10]]+Cs[e[t+11]]+Cs[e[t+12]]+Cs[e[t+13]]+Cs[e[t+14]]+Cs[e[t+15]]).toLowerCase()}var bY=require("crypto"),TI=new Uint8Array(256),DI=TI.length;function xP(){return DI>TI.length-16&&((0,bY.randomFillSync)(TI),DI=0),TI.slice(DI,DI+=16)}var xY=require("crypto"),_P={randomUUID:xY.randomUUID};function YFe(e,t,r){if(_P.randomUUID&&!t&&!e)return _P.randomUUID();e=e||{};let n=e.random??e.rng?.()??xP();if(n.length<16)throw new Error("Random bytes length must be >= 16");if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){if(r=r||0,r<0||r+16>t.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let i=0;i<16;++i)t[r+i]=n[i];return t}return EY(n)}var wP=YFe;function ao(){return wP()}function tc(){}tc.prototype={diff:function(t,r){var n,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=i.callback;typeof i=="function"&&(s=i,i={});var o=this;function a(B){return B=o.postProcess(B,i),s?(setTimeout(function(){s(B)},0),!0):B}t=this.castInput(t,i),r=this.castInput(r,i),t=this.removeEmpty(this.tokenize(t,i)),r=this.removeEmpty(this.tokenize(r,i));var l=r.length,c=t.length,u=1,f=l+c;i.maxEditLength!=null&&(f=Math.min(f,i.maxEditLength));var p=(n=i.timeout)!==null&&n!==void 0?n:1/0,g=Date.now()+p,A=[{oldPos:-1,lastComponent:void 0}],y=this.extractCommon(A[0],r,t,0,i);if(A[0].oldPos+1>=c&&y+1>=l)return a(_Y(o,A[0].lastComponent,r,t,o.useLongestToken));var C=-1/0,v=1/0;function b(){for(var B=Math.max(C,-u);B<=Math.min(v,u);B+=2){var F=void 0,Q=A[B-1],W=A[B+1];Q&&(A[B-1]=void 0);var Z=!1;if(W){var $=W.oldPos-B;Z=W&&0<=$&&$<l}var ee=Q&&Q.oldPos+1<c;if(!Z&&!ee){A[B]=void 0;continue}if(!ee||Z&&Q.oldPos<W.oldPos?F=o.addToPath(W,!0,!1,0,i):F=o.addToPath(Q,!1,!0,1,i),y=o.extractCommon(F,r,t,B,i),F.oldPos+1>=c&&y+1>=l)return a(_Y(o,F.lastComponent,r,t,o.useLongestToken));A[B]=F,F.oldPos+1>=c&&(v=Math.min(v,B-1)),y+1>=l&&(C=Math.max(C,B+1))}u++}if(s)(function B(){setTimeout(function(){if(u>f||Date.now()>g)return s();b()||B()},0)})();else for(;u<=f&&Date.now()<=g;){var w=b();if(w)return w}},addToPath:function(t,r,n,i,s){var o=t.lastComponent;return o&&!s.oneChangePerToken&&o.added===r&&o.removed===n?{oldPos:t.oldPos+i,lastComponent:{count:o.count+1,added:r,removed:n,previousComponent:o.previousComponent}}:{oldPos:t.oldPos+i,lastComponent:{count:1,added:r,removed:n,previousComponent:o}}},extractCommon:function(t,r,n,i,s){for(var o=r.length,a=n.length,l=t.oldPos,c=l-i,u=0;c+1<o&&l+1<a&&this.equals(n[l+1],r[c+1],s);)c++,l++,u++,s.oneChangePerToken&&(t.lastComponent={count:1,previousComponent:t.lastComponent,added:!1,removed:!1});return u&&!s.oneChangePerToken&&(t.lastComponent={count:u,previousComponent:t.lastComponent,added:!1,removed:!1}),t.oldPos=l,c},equals:function(t,r,n){return n.comparator?n.comparator(t,r):t===r||n.ignoreCase&&t.toLowerCase()===r.toLowerCase()},removeEmpty:function(t){for(var r=[],n=0;n<t.length;n++)t[n]&&r.push(t[n]);return r},castInput:function(t){return t},tokenize:function(t){return Array.from(t)},join:function(t){return t.join("")},postProcess:function(t){return t}};function _Y(e,t,r,n,i){for(var s=[],o;t;)s.push(t),o=t.previousComponent,delete t.previousComponent,t=o;s.reverse();for(var a=0,l=s.length,c=0,u=0;a<l;a++){var f=s[a];if(f.removed)f.value=e.join(n.slice(u,u+f.count)),u+=f.count;else{if(!f.added&&i){var p=r.slice(c,c+f.count);p=p.map(function(g,A){var y=n[u+A];return y.length>g.length?y:g}),f.value=e.join(p)}else f.value=e.join(r.slice(c,c+f.count));c+=f.count,f.added||(u+=f.count)}}return s}var yEt=new tc;function wY(e,t){var r;for(r=0;r<e.length&&r<t.length;r++)if(e[r]!=t[r])return e.slice(0,r);return e.slice(0,r)}function IY(e,t){var r;if(!e||!t||e[e.length-1]!=t[t.length-1])return"";for(r=0;r<e.length&&r<t.length;r++)if(e[e.length-(r+1)]!=t[t.length-(r+1)])return e.slice(-r);return e.slice(-r)}function SP(e,t,r){if(e.slice(0,t.length)!=t)throw Error("string ".concat(JSON.stringify(e)," doesn't start with prefix ").concat(JSON.stringify(t),"; this is a bug"));return r+e.slice(t.length)}function BP(e,t,r){if(!t)return e+r;if(e.slice(-t.length)!=t)throw Error("string ".concat(JSON.stringify(e)," doesn't end with suffix ").concat(JSON.stringify(t),"; this is a bug"));return e.slice(0,-t.length)+r}function qv(e,t){return SP(e,t,"")}function RI(e,t){return BP(e,t,"")}function SY(e,t){return t.slice(0,KFe(e,t))}function KFe(e,t){var r=0;e.length>t.length&&(r=e.length-t.length);var n=t.length;e.length<t.length&&(n=e.length);var i=Array(n),s=0;i[0]=0;for(var o=1;o<n;o++){for(t[o]==t[s]?i[o]=i[s]:i[o]=s;s>0&&t[o]!=t[s];)s=i[s];t[o]==t[s]&&s++}s=0;for(var a=r;a<e.length;a++){for(;s>0&&e[a]!=t[s];)s=i[s];e[a]==t[s]&&s++}return s}var kI="a-zA-Z0-9_\\u{C0}-\\u{FF}\\u{D8}-\\u{F6}\\u{F8}-\\u{2C6}\\u{2C8}-\\u{2D7}\\u{2DE}-\\u{2FF}\\u{1E00}-\\u{1EFF}",zFe=new RegExp("[".concat(kI,"]+|\\s+|[^").concat(kI,"]"),"ug"),QI=new tc;QI.equals=function(e,t,r){return r.ignoreCase&&(e=e.toLowerCase(),t=t.toLowerCase()),e.trim()===t.trim()};QI.tokenize=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r;if(t.intlSegmenter){if(t.intlSegmenter.resolvedOptions().granularity!="word")throw new Error('The segmenter passed must have a granularity of "word"');r=Array.from(t.intlSegmenter.segment(e),function(s){return s.segment})}else r=e.match(zFe)||[];var n=[],i=null;return r.forEach(function(s){/\s/.test(s)?i==null?n.push(s):n.push(n.pop()+s):/\s/.test(i)?n[n.length-1]==i?n.push(n.pop()+s):n.push(i+s):n.push(s),i=s}),n};QI.join=function(e){return e.map(function(t,r){return r==0?t:t.replace(/^\s+/,"")}).join("")};QI.postProcess=function(e,t){if(!e||t.oneChangePerToken)return e;var r=null,n=null,i=null;return e.forEach(function(s){s.added?n=s:s.removed?i=s:((n||i)&&BY(r,i,n,s),r=s,n=null,i=null)}),(n||i)&&BY(r,i,n,null),e};function BY(e,t,r,n){if(t&&r){var i=t.value.match(/^\s*/)[0],s=t.value.match(/\s*$/)[0],o=r.value.match(/^\s*/)[0],a=r.value.match(/\s*$/)[0];if(e){var l=wY(i,o);e.value=BP(e.value,o,l),t.value=qv(t.value,l),r.value=qv(r.value,l)}if(n){var c=IY(s,a);n.value=SP(n.value,a,c),t.value=RI(t.value,c),r.value=RI(r.value,c)}}else if(r)e&&(r.value=r.value.replace(/^\s*/,"")),n&&(n.value=n.value.replace(/^\s*/,""));else if(e&&n){var u=n.value.match(/^\s*/)[0],f=t.value.match(/^\s*/)[0],p=t.value.match(/\s*$/)[0],g=wY(u,f);t.value=qv(t.value,g);var A=IY(qv(u,g),p);t.value=RI(t.value,A),n.value=SP(n.value,u,A),e.value=BP(e.value,u,u.slice(0,u.length-A.length))}else if(n){var y=n.value.match(/^\s*/)[0],C=t.value.match(/\s*$/)[0],v=SY(C,y);t.value=RI(t.value,v)}else if(e){var b=e.value.match(/\s*$/)[0],w=t.value.match(/^\s*/)[0],B=SY(b,w);t.value=qv(t.value,B)}}var JFe=new tc;JFe.tokenize=function(e){var t=new RegExp("(\\r?\\n)|[".concat(kI,"]+|[^\\S\\n\\r]+|[^").concat(kI,"]"),"ug");return e.match(t)||[]};var NI=new tc;NI.tokenize=function(e,t){t.stripTrailingCr&&(e=e.replace(/\r\n/g,`
`));var r=[],n=e.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var i=0;i<n.length;i++){var s=n[i];i%2&&!t.newlineIsToken?r[r.length-1]+=s:r.push(s)}return r};NI.equals=function(e,t,r){return r.ignoreWhitespace?((!r.newlineIsToken||!e.includes(`
`))&&(e=e.trim()),(!r.newlineIsToken||!t.includes(`
`))&&(t=t.trim())):r.ignoreNewlineAtEof&&!r.newlineIsToken&&(e.endsWith(`
`)&&(e=e.slice(0,-1)),t.endsWith(`
`)&&(t=t.slice(0,-1))),tc.prototype.equals.call(this,e,t,r)};function fm(e,t,r){return NI.diff(e,t,r)}var jFe=new tc;jFe.tokenize=function(e){return e.split(/(\S.+?[.!?])(?=\s+|$)/)};var ZFe=new tc;ZFe.tokenize=function(e){return e.split(/([{}:;,]|\s+)/)};function DY(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function FI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DY(Object(r),!0).forEach(function(n){tMe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DY(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function XFe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function eMe(e){var t=XFe(e,"string");return typeof t=="symbol"?t:t+""}function DP(e){"@babel/helpers - typeof";return DP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},DP(e)}function tMe(e,t,r){return t=eMe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IP(e){return rMe(e)||nMe(e)||iMe(e)||sMe()}function rMe(e){if(Array.isArray(e))return TP(e)}function nMe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function iMe(e,t){if(e){if(typeof e=="string")return TP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return TP(e,t)}}function TP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function sMe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Vv=new tc;Vv.useLongestToken=!0;Vv.tokenize=NI.tokenize;Vv.castInput=function(e,t){var r=t.undefinedReplacement,n=t.stringifyReplacer,i=n===void 0?function(s,o){return typeof o>"u"?r:o}:n;return typeof e=="string"?e:JSON.stringify(RP(e,null,null,i),i,"  ")};Vv.equals=function(e,t,r){return tc.prototype.equals.call(Vv,e.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"),r)};function RP(e,t,r,n,i){t=t||[],r=r||[],n&&(e=n(i,e));var s;for(s=0;s<t.length;s+=1)if(t[s]===e)return r[s];var o;if(Object.prototype.toString.call(e)==="[object Array]"){for(t.push(e),o=new Array(e.length),r.push(o),s=0;s<e.length;s+=1)o[s]=RP(e[s],t,r,n,i);return t.pop(),r.pop(),o}if(e&&e.toJSON&&(e=e.toJSON()),DP(e)==="object"&&e!==null){t.push(e),o={},r.push(o);var a=[],l;for(l in e)Object.prototype.hasOwnProperty.call(e,l)&&a.push(l);for(a.sort(),s=0;s<a.length;s+=1)l=a[s],o[l]=RP(e[l],t,r,n,l);t.pop(),r.pop()}else o=e;return o}var kP=new tc;kP.tokenize=function(e){return e.slice()};kP.join=kP.removeEmpty=function(e){return e};function MI(e,t,r,n,i,s,o){if(o||(o={}),typeof o=="function"&&(o={callback:o}),typeof o.context>"u"&&(o.context=4),o.newlineIsToken)throw new Error("newlineIsToken may not be used with patch-generation functions, only with diffing functions");if(o.callback){var a=o,l=a.callback;fm(r,n,FI(FI({},o),{},{callback:function(f){var p=c(f);l(p)}}))}else return c(fm(r,n,o));function c(u){if(!u)return;u.push({value:"",lines:[]});function f(Z){return Z.map(function($){return" "+$})}for(var p=[],g=0,A=0,y=[],C=1,v=1,b=function(){var $=u[w],ee=$.lines||oMe($.value);if($.lines=ee,$.added||$.removed){var U;if(!g){var ge=u[w-1];g=C,A=v,ge&&(y=o.context>0?f(ge.lines.slice(-o.context)):[],g-=y.length,A-=y.length)}(U=y).push.apply(U,IP(ee.map(function(ne){return($.added?"+":"-")+ne}))),$.added?v+=ee.length:C+=ee.length}else{if(g)if(ee.length<=o.context*2&&w<u.length-2){var Se;(Se=y).push.apply(Se,IP(f(ee)))}else{var N,se=Math.min(ee.length,o.context);(N=y).push.apply(N,IP(f(ee.slice(0,se))));var z={oldStart:g,oldLines:C-g+se,newStart:A,newLines:v-A+se,lines:y};p.push(z),g=0,A=0,y=[]}C+=ee.length,v+=ee.length}},w=0;w<u.length;w++)b();for(var B=0,F=p;B<F.length;B++)for(var Q=F[B],W=0;W<Q.lines.length;W++)Q.lines[W].endsWith(`
`)?Q.lines[W]=Q.lines[W].slice(0,-1):(Q.lines.splice(W+1,0,"\\ No newline at end of file"),W++);return{oldFileName:e,newFileName:t,oldHeader:i,newHeader:s,hunks:p}}}function FP(e){if(Array.isArray(e))return e.map(FP).join(`
`);var t=[];e.oldFileName==e.newFileName&&t.push("Index: "+e.oldFileName),t.push("==================================================================="),t.push("--- "+e.oldFileName+(typeof e.oldHeader>"u"?"":"	"+e.oldHeader)),t.push("+++ "+e.newFileName+(typeof e.newHeader>"u"?"":"	"+e.newHeader));for(var r=0;r<e.hunks.length;r++){var n=e.hunks[r];n.oldLines===0&&(n.oldStart-=1),n.newLines===0&&(n.newStart-=1),t.push("@@ -"+n.oldStart+","+n.oldLines+" +"+n.newStart+","+n.newLines+" @@"),t.push.apply(t,n.lines)}return t.join(`
`)+`
`}function PI(e,t,r,n,i,s,o){var a;if(typeof o=="function"&&(o={callback:o}),(a=o)!==null&&a!==void 0&&a.callback){var c=o,u=c.callback;MI(e,t,r,n,i,s,FI(FI({},o),{},{callback:function(p){p?u(FP(p)):u()}}))}else{var l=MI(e,t,r,n,i,s,o);return l?FP(l):void 0}}function oMe(e){var t=e.endsWith(`
`),r=e.split(`
`).map(function(n){return n+`
`});return t?r.pop():r.push(r.pop().slice(0,-1)),r}var LI=class extends Uf{_storage;_getMemoriesAbsPath;_onDocumentChange;_onFileDeleted;_onFileDidMove;shardManager;_shardFunction=t=>`shard-${t.conversationId}`;_currentConversationId;_logger=Mr("AggregateCheckpointManager");_agentEditListHasUpdatesCallbacks=new Set;constructor(t,r,n,i,s){super(),this._storage=t,this._getMemoriesAbsPath=r,this._onDocumentChange=n,this._onFileDeleted=i,this._onFileDidMove=s,this.shardManager=new BI(this._storage,this._shardFunction),this.addDisposable(this._onDocumentChange(o=>{this._handleDocumentChange(o)})),this.addDisposable(this._onFileDeleted(o=>{this._handleFileDeleted(o)})),this.addDisposable(this._onFileDidMove(o=>{this._handleFileMoved(o)})),this.addDisposable({dispose:()=>{this._agentEditListHasUpdatesCallbacks.clear()}})}get currentConversationId(){return this._currentConversationId}setCurrentConversation(t){this._currentConversationId=t}getAgentMemoriesAbsPath=()=>this._getMemoriesAbsPath();onAgentEditListHasUpdates=t=>(this._agentEditListHasUpdatesCallbacks.add(t),{dispose:()=>{this._agentEditListHasUpdatesCallbacks.delete(t)}});_notifyAgentEditListHasUpdates=()=>{this._agentEditListHasUpdatesCallbacks.forEach(t=>t())};_getAllTrackedFiles=async t=>{await this.shardManager.initialize();let r=this._shardFunction({conversationId:t});return(await this.shardManager.getShardById(r)).getAllTrackedFilePaths(t)};_checkpointFileState=async(t,r)=>{let n=(await Li().readFile(r.absPath)).contents;if(n===void 0)return;let i={sourceToolCallRequestId:ao(),timestamp:Date.now(),document:new pn(r,n,n,{logger:this._logger}),conversationId:t},s={conversationId:t,path:r};return await this.shardManager.addCheckpoint(s,i),this._notifyAgentEditListHasUpdates(),i.sourceToolCallRequestId};_trackFile=async(t,r)=>{await this.shardManager.initialize();let n={conversationId:t,path:r};if((await this.shardManager.getCheckpoints(n)).length>0){this._logger.debug(`File already tracked: ${r.absPath}`);return}this._logger.debug(`Tracking file: ${r.absPath}`),await this._checkpointFileState(t,r)};storeCurrentFileStateAsCheckpoint=async(t,r)=>(await this.shardManager.initialize(),await this._checkpointFileState(t,r));addCheckpoint=async(t,r)=>{await this.shardManager.initialize(),await this._trackFile(t.conversationId,r.document.filePath),await this.shardManager.addCheckpoint(t,r),r.document.modifiedCode===void 0?(this._logger.debug(`Deleting file: ${r.document.filePath.absPath}`),await Li().deleteFile(r.document.filePath)):(this._logger.debug(`Writing file: ${r.document.filePath.absPath}`),await Li().writeFile(r.document.filePath,r.document.modifiedCode)),this._notifyAgentEditListHasUpdates()};_getFileStateAtTimestamp=async(t,r,n)=>{if(!await this.shardManager.hasKey({conversationId:t,path:r}))return null;let s={conversationId:t,path:r},a=(await this.shardManager.getCheckpoints(s,{maxTimestamp:n})).at(-1);if(a)return a.document.modifiedCode;let c=(await this.shardManager.getCheckpoints(s,{minTimestamp:n})).at(0);return c?c.document.originalCode:null};_handleDocumentChange=async t=>{let r=qe.from(t.document.qualifiedPathName);if(r===void 0||this._currentConversationId===void 0)return;let n=t.document.getText?.();await this.updateLatestCheckpoint(r,n)};_handleFileDeleted=async t=>{let r=qe.from(t.qualifiedPathName);if(r===void 0||this._currentConversationId===void 0)return;this._logger.debug(`Handling file deleted notification: ${r.absPath}`);let n={conversationId:this._currentConversationId,path:r},i=await this._getFileStateAtTimestamp(this._currentConversationId,r,Number.MAX_SAFE_INTEGER);i!==null&&(await this.addCheckpoint(n,{sourceToolCallRequestId:ao(),timestamp:Date.now(),document:new pn(r,i,void 0,{}),conversationId:this._currentConversationId}),this._logger.debug(`Marked file deleted: ${r.absPath}`))};_handleFileMoved=async t=>{let r=qe.from(t.oldQualifiedPathName),n=qe.from(t.newQualifiedPathName);if(r===void 0||n===void 0||this._currentConversationId===void 0)return;this._logger.debug(`File moved: ${r.absPath} -> ${n.absPath}`);let i={conversationId:this._currentConversationId,path:r},s=await this.shardManager.getCheckpoints(i);if(s.length===0)return;let o={conversationId:this._currentConversationId,path:n};for(let a of s){let l={...a,document:new pn(n,a.document.originalCode,a.document.modifiedCode,{})};await this.shardManager.addCheckpoint(o,l)}await this.shardManager.removeCheckpoint(i),this._notifyAgentEditListHasUpdates()};updateLatestCheckpoint=async(t,r,n)=>{if(this._currentConversationId===void 0){this._logger.warn("Cannot update latest checkpoint. No current conversation ID.");return}let i={conversationId:this._currentConversationId,path:t},o=(await this.shardManager.getCheckpoints(i)).at(-1);if(o===void 0)return;let a={...o,document:new pn(t,o.document.originalCode,r,{})};await this.shardManager.updateCheckpoint(i,a),this._logger.debug(`Updated latest checkpoint for ${t.absPath} with ${r}`),this._notifyAgentEditListHasUpdates(),(n?.saveToWorkspace??!1)&&(r===void 0?(await Li().deleteFile(t),this._logger.debug(`Deleted file: ${t.absPath}`)):(await Li().writeFile(t,r),this._logger.debug(`Wrote file: ${t.absPath}`)))};getAggregateCheckpointForFile=async(t,r)=>{await this.shardManager.initialize();let n=this._currentConversationId;if(n===void 0)return{fromTimestamp:0,toTimestamp:1/0,conversationId:"",files:[]};let i=r.minTimestamp??0,s=r.maxTimestamp??1/0,o=await this._getFileStateAtTimestamp(n,t,i),a=await this._getFileStateAtTimestamp(n,t,s);if(o===null||a===null)return this._logger.warn(`Cannot get aggregate checkpoint for ${t.absPath}. No checkpoints found.`),{fromTimestamp:i,toTimestamp:s,conversationId:n,files:[]};let l=new pn(t,o,a,{});return{fromTimestamp:i,toTimestamp:s,conversationId:n,files:[{changesSummary:MP(l),changeDocument:l}]}};getCheckpointByRequestId=async t=>{await this.shardManager.initialize();let r=this._currentConversationId;if(r===void 0)return;let n=this._shardFunction({conversationId:r}),s=(await this.shardManager.getShardById(n)).getCheckpointBySourceId(t);if(s!==void 0)return{fromTimestamp:s.timestamp,toTimestamp:s.timestamp,conversationId:r,files:[{changesSummary:MP(s.document),changeDocument:s.document}]}};getAggregateCheckpoint=async t=>{await this.shardManager.initialize();let r=t.minTimestamp??0,n=t.maxTimestamp??1/0,i=this._currentConversationId;if(i===void 0)return{fromTimestamp:0,toTimestamp:1/0,conversationId:"",files:[]};let s=await this._getAllTrackedFiles(i),o=await Promise.all(s.map(async a=>{let l=await this._getFileStateAtTimestamp(i,a,r),c=await this._getFileStateAtTimestamp(i,a,n);if(l===null||c===null){this._logger.warn(`Cannot get aggregate checkpoint for ${a.absPath}. No checkpoints found.`);return}return new pn(a,l,c,{})}));return{fromTimestamp:r,toTimestamp:n,conversationId:i,files:o.filter(a=>a!==void 0).map(a=>({changesSummary:MP(a),changeDocument:a}))}};clearConversationCheckpoints=async t=>{await this.shardManager.initialize(),await this.shardManager.clearShard(this._shardFunction({conversationId:t}))};revertDocumentToTimestamp=async(t,r)=>{await this.shardManager.initialize();let n=this._currentConversationId;if(n===void 0)return;let i=await this._getFileStateAtTimestamp(n,t,r),s=await this._getFileStateAtTimestamp(n,t,Number.MAX_SAFE_INTEGER);i===null||s===null||await this.addCheckpoint({conversationId:n,path:t},{sourceToolCallRequestId:ao(),timestamp:Date.now(),document:new pn(t,s??"",i,{}),conversationId:n})};revertToTimestamp=async t=>{if(await this.shardManager.initialize(),this._currentConversationId===void 0)return;let n=await this.getAggregateCheckpoint({minTimestamp:t,maxTimestamp:void 0});this._logger.debug(`Reverting to timestamp: ${t}. Includes files ${n.files.map(i=>i.changeDocument.filePath.absPath).join(", ")}`),await Promise.all(n.files.map(async i=>{await this.revertDocumentToTimestamp(i.changeDocument.filePath,t)}))}};function MP(e){let t=fm(e.originalCode??"",e.modifiedCode??""),r=t.filter(i=>i.added).reduce((i,s)=>i+(s.count??0),0),n=t.filter(i=>i.removed).reduce((i,s)=>i+(s.count??0),0);return{totalAddedLines:r,totalRemovedLines:n,changes:t}}var Vf=class extends Error{constructor(){super("The completion URL setting is invalid")}};var Hv=class{static _instance=void 0;static setAPIClient(t){if(this._instance!==void 0){Mr("APICLient").warn("Attempting to initialize API clientwhen one is already configured. Keeping existing client workspaces.");return}this._instance=t}static getAPIClient(){if(this._instance===void 0)throw new Error("API Client not set");return this._instance}static reset(){this._instance=void 0}},TY=e=>Hv.setAPIClient(e),ol=()=>Hv.getAPIClient(),RY=()=>Hv.reset();var Wv=class{static _instance=void 0;static setClientActions(t){if(this._instance!==void 0){Mr("ClientActions").warn("Attempting to initialize client actions when one is already configured. Keeping existing client actions.");return}this._instance=t}static getClientActions(){if(this._instance===void 0)throw new Error("ClientActions not set");return this._instance}static reset(){this._instance=void 0}},kY=e=>Wv.setClientActions(e),FY=()=>Wv.getClientActions(),MY=()=>Wv.reset();var Gv=class{static _instance=void 0;static setClientFeatureFlags(t){if(this._instance!==void 0){Mr("ClientFeatureFlags").warn("Attempting to initialize client feature flags when one is already configured. Keeping existing client feature flags.");return}this._instance=t}static getClientFeatureFlags(){if(this._instance===void 0)throw new Error("ClientFeatureFlags not set");return this._instance}static reset(){this._instance=void 0}},QY=e=>Gv.setClientFeatureFlags(e),rc=()=>Gv.getClientFeatureFlags(),NY=()=>Gv.reset();var Og;(function(e){e.agent="agent"})(Og||(Og={}));var Hf;(function(e){e.global="global"})(Hf||(Hf={}));var $v=class{static _instance=void 0;static setStateForSidecar(t){if(this._instance!==void 0){Mr("PluginStateForSidecarSingleton").warn("Attempting to initialize plugin state when one is already configured. Keeping existing plugin state.");return}this._instance=t}static getStateForSidecar(){if(this._instance===void 0)throw new Error("PluginStateForSidecar not set");return this._instance}static reset(){this._instance=void 0}},PY=e=>$v.setStateForSidecar(e),QP=()=>$v.getStateForSidecar(),LY=()=>$v.reset();var Yv=class{static _instance=void 0;static setWebviewMessagingClient(t){if(this._instance!==void 0){Mr("WebviewMessages").warn("Attempting to initialize webview messages when one is already configured. Keeping existing webview message client.");return}this._instance=t}static getWebviewMessagingClient(){if(this._instance===void 0)throw new Error("Webview messaging client not set");return this._instance}static reset(){this._instance=void 0}},UY=e=>Yv.setWebviewMessagingClient(e),aMe=()=>Yv.getWebviewMessagingClient(),OY=()=>Yv.reset();function qY(e,t){aMe().onMessage(e,t)}var We;(function(e){e[e.ok=0]="ok",e[e.cancelled=1]="cancelled",e[e.unknown=2]="unknown",e[e.unavailable=3]="unavailable",e[e.unimplemented=4]="unimplemented",e[e.invalidArgument=5]="invalidArgument",e[e.resourceExhausted=6]="resourceExhausted",e[e.unauthenticated=7]="unauthenticated",e[e.permissionDenied=8]="permissionDenied",e[e.deadlineExceeded=9]="deadlineExceeded",e[e.augmentTooLarge=10]="augmentTooLarge"})(We||(We={}));var Qr=class e extends Error{status;constructor(t,r){super(r),this.status=t}static transientIssue(t){return new e(We.unavailable,t)}static fromResponse(t){return new e(lMe(t.status),`HTTP error: ${t.status} ${t.statusText}`)}static isAPIErrorWithStatus(t,r){return t instanceof e?t.status===r:!1}static isRetriableAPIError(t){return t instanceof e?cMe.has(t.status):!1}};function lMe(e){switch(e){case 200:return We.ok;case 400:return We.invalidArgument;case 401:return We.unauthenticated;case 403:return We.permissionDenied;case 404:return We.unimplemented;case 413:return We.augmentTooLarge;case 429:return We.resourceExhausted;case 499:return We.cancelled;case 504:return We.deadlineExceeded}return e>=500&&e<600?We.unavailable:We.unknown}var cMe=new Set([We.unavailable,We.cancelled]);function uMe(e){return e.cause instanceof String?String(e.cause):e.cause instanceof Object?JSON.stringify(e.cause):""}function $e(e,t=!1){if(e instanceof Error){if(t){let r=uMe(e);if(r!=="")return`${e.message} (due to ${r})`}return e.message}return String(e)}var jc=class{_maxItems;_insertCount=0;_emptySlots;_items;constructor(t){this._maxItems=t,this._items=new Array(t),this._emptySlots=t}get empty(){return this.length===0}get length(){return this._maxItems-this._emptySlots}addItem(t){this._items[this._insertCount%this._maxItems]=t,this._emptySlots=Math.max(this._emptySlots-1,0),this._insertCount++}shiftLeft(t){this._emptySlots=Math.min(this._emptySlots+t,this._maxItems)}shiftRight(t){this._insertCount-=Math.min(t,this.length),this._emptySlots=Math.min(this._emptySlots+t,this._maxItems)}at(t){if(t<0)return t<-this.length?void 0:this._items[(this._insertCount+t)%this._maxItems];if(!(t>=this.length))return this._items[(this._insertCount+this._emptySlots+t)%this._maxItems]}_normalizeSliceIdx(t){return t>=0?Math.min(t,this.length):Math.max(this.length+t,0)}_translateIdx(t){return(this._insertCount+this._emptySlots+t)%this._maxItems}slice(t,r){let n=this._normalizeSliceIdx(t??0),i=this._normalizeSliceIdx(r??this.length);if(n>i)return[];let s=i-n,o=this._translateIdx(n);return o+s<=this._maxItems?this._items.slice(o,o+s):this._items.slice(o).concat(this._items.slice(0,(o+s)%this._maxItems))}*[Symbol.iterator](){for(let t=0;t<this.length;t++)yield this.at(t)}clear(){this._emptySlots=this._maxItems}};var dMe={initialMS:100,mult:2,maxMS:3e4};function ma(e){return e===0?Promise.resolve():new Promise(t=>{setTimeout(t,e)})}async function Ii(e,t,r=dMe){let n=0,i=r.maxTotalMs!==void 0?Date.now():void 0,s=r.canRetry?r.canRetry:o=>Qr.isRetriableAPIError(o);for(let o=0;;o++)try{let a=await e();return o>0&&t.info(`Operation succeeded after ${o} transient failures`),a}catch(a){if(!s(a))throw a;let l=o+1;if(r.maxTries!==void 0&&l>=r.maxTries||(n===0?n=r.initialMS:n=Math.min(n*r.mult,r.maxMS),t.info(`Operation failed with error ${a}, retrying in ${n} ms; retries = ${o}`),r.maxTotalMs!==void 0&&i!==void 0&&Date.now()-i+n>r.maxTotalMs))throw a;await ma(n)}}async function Kv(e,t){let r=new Promise((n,i)=>{setTimeout(()=>{i(new Error("Execution aborted due to timeout."))},t)});return await Promise.race([e,r])}var ti=class{_uploadMsec;_uploadBatchSize;_logger;_store;_uploadIntervalId=void 0;_currentUploadPromise;constructor(t,r,n,i){this._uploadMsec=n,this._uploadBatchSize=i,this._store=new jc(r),this._logger=Mr(t)}report(t){this._store.addItem(t)}get uploadEnabled(){return this._uploadIntervalId!==void 0}enableUpload(){this.uploadEnabled||(this._uploadIntervalId=setInterval(()=>{this._currentUploadPromise===void 0&&(async()=>{try{this._currentUploadPromise=this._doUpload(),await this._currentUploadPromise}finally{this._currentUploadPromise=void 0}})()},this._uploadMsec))}async uploadNow(){return this._doUpload()}async _doUpload(){if(this._store.length===0)return;let t=this._store.slice();this._store.clear();for(let r=0;r<t.length;r+=this._uploadBatchSize){let n=t.slice(r,r+this._uploadBatchSize);await Ii(async()=>{if(this.uploadEnabled)try{return this._logger.debug(`Uploading ${n.length} metric(s)`),await this.performUpload(n)}catch(i){throw this._logger.error(`Error uploading metrics: ${i} ${i instanceof Error?i.stack:""}`),i}},this._logger)}}disableUpload(){clearInterval(this._uploadIntervalId),this._uploadIntervalId=void 0}dispose(){this.disableUpload()}};function Pn(e){let t=Math.floor(e/1e3),r=e%1e3*1e6;return[t,r]}var UI=class e extends ti{static maxRecords=1e4;static batchSize=1e3;static uploadMsec=1e4;static instance=null;static getInstance(){return e.instance||(e.instance=new e,e.instance.enableUpload()),e.instance}static reset(){e.instance&&(e.instance.dispose(),e.instance=null)}constructor(){super("AgentRequestEventReporter",e.maxRecords,e.uploadMsec,e.batchSize)}reportEvent(t){let[r,n]=Pn(Date.now());this.report({event_time_sec:r,event_time_nsec:n,event_name:t.eventName,conversation_id:t.conversationId,request_id:t.requestId,chat_history_length:t.chatHistoryLength})}performUpload(t){return ol().logAgentRequestEvent(t)}};function VY(){return UI.getInstance()}function HY(){UI.reset()}var OI=class e extends ti{static maxRecords=1e4;static batchSize=1e3;static uploadMsec=1e4;static instance=null;static getInstance(){return e.instance||(e.instance=new e,e.instance.enableUpload()),e.instance}static reset(){e.instance&&(e.instance.dispose(),e.instance=null)}constructor(){super("AgentSessionEventReporter",e.maxRecords,e.uploadMsec,e.batchSize)}formatTracingData(t){return{flags:t.flags,nums:t.nums,string_stats:t.string_stats,request_ids:t.request_ids}}reportEvent(t){let[r,n]=Pn(Date.now()),i,s=rc().flags.memoriesParams.enable_memories_tracing;if(t.eventData?.agentReversionData&&(i={agent_reversion_data:{}}),t.eventData?.agentInterruptionData&&(i={agent_interruption_data:{request_id:t.eventData.agentInterruptionData.requestId,curr_conversation_length:t.eventData.agentInterruptionData.currConversationLength}}),t.eventData?.rememberToolCallData){if(!s)return;i={remember_tool_call_data:{caller:t.eventData.rememberToolCallData.caller,is_complex_new_memory:t.eventData.rememberToolCallData.is_complex_new_memory,tracing_data:this.formatTracingData(t.eventData.rememberToolCallData.tracingData)}}}if(t.eventData?.initialOrientationData){if(!s)return;i={initial_orientation_data:{caller:t.eventData.initialOrientationData.caller,tracing_data:this.formatTracingData(t.eventData.initialOrientationData.tracingData)}}}if(t.eventData?.classifyAndDistillData){if(!s)return;i={classify_and_distill_data:{tracing_data:this.formatTracingData(t.eventData.classifyAndDistillData.tracingData)}}}if(t.eventData?.flushMemoriesData){if(!s)return;i={flush_memories_data:{tracing_data:this.formatTracingData(t.eventData.flushMemoriesData.tracingData)}}}t.eventData?.memoriesFileOpenData&&(i={memories_file_open_data:{memories_path_undefined:t.eventData.memoriesFileOpenData.memoriesPathUndefined}}),this.report({event_time_sec:r,event_time_nsec:n,event_name:t.eventName,conversation_id:t.conversationId,event_data:i})}performUpload(t){return ol().logAgentSessionEvent(t)}};function Ui(){return OI.getInstance()}function WY(){OI.reset()}var qI=class e extends ti{static defaultMaxRecords=1e4;static defaultBatchSize=1e3;static defaultUploadMsec=1e4;constructor(t,r,n){super("ToolUseRequestEventReporter",t??e.defaultMaxRecords,r??e.defaultUploadMsec,n??e.defaultBatchSize)}reportEvent(t,r,n,i,s,o,a,l,c,u){let[f,p]=Pn(Date.now());this.report({requestId:t,toolName:r,toolUseId:n,toolInput:i,toolOutputIsError:s,toolRunDurationMs:o,isMcpTool:a,conversationId:l,chatHistoryLength:c,eventTimeSec:f,eventTimeNsec:p,toolRequestId:u})}performUpload(t){return ol().logToolUseRequestEvent(t)}};var zi;(function(e){e.shell="shell",e.webFetch="web-fetch",e.strReplaceEditor="str-replace-editor",e.codebaseRetrieval="codebase-retrieval",e.removeFiles="remove-files",e.remember="remember"})(zi||(zi={}));var VI={strReplaceEditor:"str_replace_editor_tool",backendEditTool:"backend_edit_tool"};var al;(function(e){e[e.TEXT=0]="TEXT",e[e.TOOL_RESULT=1]="TOOL_RESULT",e[e.IMAGE=2]="IMAGE",e[e.IMAGE_ID=3]="IMAGE_ID",e[e.IDE_STATE=4]="IDE_STATE"})(al||(al={}));var HI;(function(e){e[e.IMAGE_FORMAT_UNSPECIFIED=0]="IMAGE_FORMAT_UNSPECIFIED",e[e.PNG=1]="PNG",e[e.JPEG=2]="JPEG"})(HI||(HI={}));var nc;(function(e){e[e.RAW_RESPONSE=0]="RAW_RESPONSE",e[e.SUGGESTED_QUESTIONS=1]="SUGGESTED_QUESTIONS",e[e.MAIN_TEXT_FINISHED=2]="MAIN_TEXT_FINISHED",e[e.TOOL_USE=5]="TOOL_USE",e[e.AGENT_MEMORY=6]="AGENT_MEMORY"})(nc||(nc={}));var cn;(function(e){e.chat="CHAT",e.agent="AGENT"})(cn||(cn={}));var GY;(function(e){e[e.DEFAULT=0]="DEFAULT",e[e.PROTOTYPER=1]="PROTOTYPER"})(GY||(GY={}));var tr;(function(e){e.modified="MODIFIED",e.added="ADDED",e.deleted="DELETED",e.renamed="RENAMED"})(tr||(tr={}));var Er;(function(e){e.assertEqual=i=>i;function t(i){}e.assertIs=t;function r(i){throw new Error}e.assertNever=r,e.arrayToEnum=i=>{let s={};for(let o of i)s[o]=o;return s},e.getValidEnumValues=i=>{let s=e.objectKeys(i).filter(a=>typeof i[i[a]]!="number"),o={};for(let a of s)o[a]=i[a];return e.objectValues(o)},e.objectValues=i=>e.objectKeys(i).map(function(s){return i[s]}),e.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{let s=[];for(let o in i)Object.prototype.hasOwnProperty.call(i,o)&&s.push(o);return s},e.find=(i,s)=>{for(let o of i)if(s(o))return o},e.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function n(i,s=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}e.joinValues=n,e.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(Er||(Er={}));var PP;(function(e){e.mergeShapes=(t,r)=>({...t,...r})})(PP||(PP={}));var Pe=Er.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),wd=e=>{switch(typeof e){case"undefined":return Pe.undefined;case"string":return Pe.string;case"number":return isNaN(e)?Pe.nan:Pe.number;case"boolean":return Pe.boolean;case"function":return Pe.function;case"bigint":return Pe.bigint;case"symbol":return Pe.symbol;case"object":return Array.isArray(e)?Pe.array:e===null?Pe.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?Pe.promise:typeof Map<"u"&&e instanceof Map?Pe.map:typeof Set<"u"&&e instanceof Set?Pe.set:typeof Date<"u"&&e instanceof Date?Pe.date:Pe.object;default:return Pe.unknown}},ve=Er.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),fMe=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),ya=class e extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=t}format(t){let r=t||function(s){return s.message},n={_errors:[]},i=s=>{for(let o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)n._errors.push(r(o));else{let a=n,l=0;for(;l<o.path.length;){let c=o.path[l];l===o.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(r(o))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return i(this),n}static assert(t){if(!(t instanceof e))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Er.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=r=>r.message){let r={},n=[];for(let i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(t(i))):n.push(t(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};ya.create=e=>new ya(e);var pm=(e,t)=>{let r;switch(e.code){case ve.invalid_type:e.received===Pe.undefined?r="Required":r=`Expected ${e.expected}, received ${e.received}`;break;case ve.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,Er.jsonStringifyReplacer)}`;break;case ve.unrecognized_keys:r=`Unrecognized key(s) in object: ${Er.joinValues(e.keys,", ")}`;break;case ve.invalid_union:r="Invalid input";break;case ve.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Er.joinValues(e.options)}`;break;case ve.invalid_enum_value:r=`Invalid enum value. Expected ${Er.joinValues(e.options)}, received '${e.received}'`;break;case ve.invalid_arguments:r="Invalid function arguments";break;case ve.invalid_return_type:r="Invalid function return type";break;case ve.invalid_date:r="Invalid date";break;case ve.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:Er.assertNever(e.validation):e.validation!=="regex"?r=`Invalid ${e.validation}`:r="Invalid";break;case ve.too_small:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:r="Invalid input";break;case ve.too_big:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?r=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:r="Invalid input";break;case ve.custom:r="Invalid input";break;case ve.invalid_intersection_types:r="Intersection results could not be merged";break;case ve.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case ve.not_finite:r="Number must be finite";break;default:r=t.defaultError,Er.assertNever(e)}return{message:r}},KY=pm;function hMe(e){KY=e}function WI(){return KY}var GI=e=>{let{data:t,path:r,errorMaps:n,issueData:i}=e,s=[...r,...i.path||[]],o={...i,path:s};if(i.message!==void 0)return{...i,path:s,message:i.message};let a="",l=n.filter(c=>!!c).slice().reverse();for(let c of l)a=c(o,{data:t,defaultError:a}).message;return{...i,path:s,message:a}},gMe=[];function ke(e,t){let r=WI(),n=GI({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===pm?void 0:pm].filter(i=>!!i)});e.common.issues.push(n)}var Ls=class e{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,r){let n=[];for(let i of r){if(i.status==="aborted")return Et;i.status==="dirty"&&t.dirty(),n.push(i.value)}return{status:t.value,value:n}}static async mergeObjectAsync(t,r){let n=[];for(let i of r){let s=await i.key,o=await i.value;n.push({key:s,value:o})}return e.mergeObjectSync(t,n)}static mergeObjectSync(t,r){let n={};for(let i of r){let{key:s,value:o}=i;if(s.status==="aborted"||o.status==="aborted")return Et;s.status==="dirty"&&t.dirty(),o.status==="dirty"&&t.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(n[s.value]=o.value)}return{status:t.value,value:n}}},Et=Object.freeze({status:"aborted"}),gm=e=>({status:"dirty",value:e}),lo=e=>({status:"valid",value:e}),LP=e=>e.status==="aborted",UP=e=>e.status==="dirty",qg=e=>e.status==="valid",jv=e=>typeof Promise<"u"&&e instanceof Promise;function $I(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function zY(e,t,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,r):i?i.value=r:t.set(e,r),r}var Je;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t?.message})(Je||(Je={}));var zv,Jv,cl=class{constructor(t,r,n,i){this._cachedPath=[],this.parent=t,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},$Y=(e,t)=>{if(qg(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new ya(e.common.issues);return this._error=r,this._error}}};function Ut(e){if(!e)return{};let{errorMap:t,invalid_type_error:r,required_error:n,description:i}=e;if(t&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:i}:{errorMap:(o,a)=>{var l,c;let{message:u}=e;return o.code==="invalid_enum_value"?{message:u??a.defaultError}:typeof a.data>"u"?{message:(l=u??n)!==null&&l!==void 0?l:a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:(c=u??r)!==null&&c!==void 0?c:a.defaultError}},description:i}}var Ot=class{get description(){return this._def.description}_getType(t){return wd(t.data)}_getOrReturnCtx(t,r){return r||{common:t.parent.common,data:t.data,parsedType:wd(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new Ls,ctx:{common:t.parent.common,data:t.data,parsedType:wd(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){let r=this._parse(t);if(jv(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(t){let r=this._parse(t);return Promise.resolve(r)}parse(t,r){let n=this.safeParse(t,r);if(n.success)return n.data;throw n.error}safeParse(t,r){var n;let i={common:{issues:[],async:(n=r?.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:wd(t)},s=this._parseSync({data:t,path:i.path,parent:i});return $Y(i,s)}"~validate"(t){var r,n;let i={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:wd(t)};if(!this["~standard"].async)try{let s=this._parseSync({data:t,path:[],parent:i});return qg(s)?{value:s.value}:{issues:i.common.issues}}catch(s){!((n=(r=s?.message)===null||r===void 0?void 0:r.toLowerCase())===null||n===void 0)&&n.includes("encountered")&&(this["~standard"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:i}).then(s=>qg(s)?{value:s.value}:{issues:i.common.issues})}async parseAsync(t,r){let n=await this.safeParseAsync(t,r);if(n.success)return n.data;throw n.error}async safeParseAsync(t,r){let n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:wd(t)},i=this._parse({data:t,path:n.path,parent:n}),s=await(jv(i)?i:Promise.resolve(i));return $Y(n,s)}refine(t,r){let n=i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,s)=>{let o=t(i),a=()=>s.addIssue({code:ve.custom,...n(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(t,r){return this._refinement((n,i)=>t(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(t){return new Ca({schema:this,typeName:At.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return ll.create(this,this._def)}nullable(){return Xc.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Sd.create(this)}promise(){return $f.create(this,this._def)}or(t){return Kg.create([this,t],this._def)}and(t){return zg.create(this,t,this._def)}transform(t){return new Ca({...Ut(this._def),schema:this,typeName:At.ZodEffects,effect:{type:"transform",transform:t}})}default(t){let r=typeof t=="function"?t:()=>t;return new ep({...Ut(this._def),innerType:this,defaultValue:r,typeName:At.ZodDefault})}brand(){return new Zv({typeName:At.ZodBranded,type:this,...Ut(this._def)})}catch(t){let r=typeof t=="function"?t:()=>t;return new tp({...Ut(this._def),innerType:this,catchValue:r,typeName:At.ZodCatch})}describe(t){let r=this.constructor;return new r({...this._def,description:t})}pipe(t){return Xv.create(this,t)}readonly(){return rp.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},pMe=/^c[^\s-]{8,}$/i,AMe=/^[0-9a-z]+$/,mMe=/^[0-9A-HJKMNP-TV-Z]{26}$/i,yMe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,CMe=/^[a-z0-9_-]{21}$/i,vMe=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,EMe=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,bMe=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,xMe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",NP,_Me=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,wMe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,IMe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,SMe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,BMe=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,DMe=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,JY="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",TMe=new RegExp(`^${JY}$`);function jY(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`),t}function RMe(e){return new RegExp(`^${jY(e)}$`)}function ZY(e){let t=`${JY}T${jY(e)}`,r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function kMe(e,t){return!!((t==="v4"||!t)&&_Me.test(e)||(t==="v6"||!t)&&IMe.test(e))}function FMe(e,t){if(!vMe.test(e))return!1;try{let[r]=e.split("."),n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),i=JSON.parse(atob(n));return!(typeof i!="object"||i===null||!i.typ||!i.alg||t&&i.alg!==t)}catch{return!1}}function MMe(e,t){return!!((t==="v4"||!t)&&wMe.test(e)||(t==="v6"||!t)&&SMe.test(e))}var Wf=class e extends Ot{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==Pe.string){let s=this._getOrReturnCtx(t);return ke(s,{code:ve.invalid_type,expected:Pe.string,received:s.parsedType}),Et}let n=new Ls,i;for(let s of this._def.checks)if(s.kind==="min")t.data.length<s.value&&(i=this._getOrReturnCtx(t,i),ke(i,{code:ve.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="max")t.data.length>s.value&&(i=this._getOrReturnCtx(t,i),ke(i,{code:ve.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="length"){let o=t.data.length>s.value,a=t.data.length<s.value;(o||a)&&(i=this._getOrReturnCtx(t,i),o?ke(i,{code:ve.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&ke(i,{code:ve.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),n.dirty())}else if(s.kind==="email")bMe.test(t.data)||(i=this._getOrReturnCtx(t,i),ke(i,{validation:"email",code:ve.invalid_string,message:s.message}),n.dirty());else if(s.kind==="emoji")NP||(NP=new RegExp(xMe,"u")),NP.test(t.data)||(i=this._getOrReturnCtx(t,i),ke(i,{validation:"emoji",code:ve.invalid_string,message:s.message}),n.dirty());else if(s.kind==="uuid")yMe.test(t.data)||(i=this._getOrReturnCtx(t,i),ke(i,{validation:"uuid",code:ve.invalid_string,message:s.message}),n.dirty());else if(s.kind==="nanoid")CMe.test(t.data)||(i=this._getOrReturnCtx(t,i),ke(i,{validation:"nanoid",code:ve.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid")pMe.test(t.data)||(i=this._getOrReturnCtx(t,i),ke(i,{validation:"cuid",code:ve.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid2")AMe.test(t.data)||(i=this._getOrReturnCtx(t,i),ke(i,{validation:"cuid2",code:ve.invalid_string,message:s.message}),n.dirty());else if(s.kind==="ulid")mMe.test(t.data)||(i=this._getOrReturnCtx(t,i),ke(i,{validation:"ulid",code:ve.invalid_string,message:s.message}),n.dirty());else if(s.kind==="url")try{new URL(t.data)}catch{i=this._getOrReturnCtx(t,i),ke(i,{validation:"url",code:ve.invalid_string,message:s.message}),n.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(t.data)||(i=this._getOrReturnCtx(t,i),ke(i,{validation:"regex",code:ve.invalid_string,message:s.message}),n.dirty())):s.kind==="trim"?t.data=t.data.trim():s.kind==="includes"?t.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(t,i),ke(i,{code:ve.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),n.dirty()):s.kind==="toLowerCase"?t.data=t.data.toLowerCase():s.kind==="toUpperCase"?t.data=t.data.toUpperCase():s.kind==="startsWith"?t.data.startsWith(s.value)||(i=this._getOrReturnCtx(t,i),ke(i,{code:ve.invalid_string,validation:{startsWith:s.value},message:s.message}),n.dirty()):s.kind==="endsWith"?t.data.endsWith(s.value)||(i=this._getOrReturnCtx(t,i),ke(i,{code:ve.invalid_string,validation:{endsWith:s.value},message:s.message}),n.dirty()):s.kind==="datetime"?ZY(s).test(t.data)||(i=this._getOrReturnCtx(t,i),ke(i,{code:ve.invalid_string,validation:"datetime",message:s.message}),n.dirty()):s.kind==="date"?TMe.test(t.data)||(i=this._getOrReturnCtx(t,i),ke(i,{code:ve.invalid_string,validation:"date",message:s.message}),n.dirty()):s.kind==="time"?RMe(s).test(t.data)||(i=this._getOrReturnCtx(t,i),ke(i,{code:ve.invalid_string,validation:"time",message:s.message}),n.dirty()):s.kind==="duration"?EMe.test(t.data)||(i=this._getOrReturnCtx(t,i),ke(i,{validation:"duration",code:ve.invalid_string,message:s.message}),n.dirty()):s.kind==="ip"?kMe(t.data,s.version)||(i=this._getOrReturnCtx(t,i),ke(i,{validation:"ip",code:ve.invalid_string,message:s.message}),n.dirty()):s.kind==="jwt"?FMe(t.data,s.alg)||(i=this._getOrReturnCtx(t,i),ke(i,{validation:"jwt",code:ve.invalid_string,message:s.message}),n.dirty()):s.kind==="cidr"?MMe(t.data,s.version)||(i=this._getOrReturnCtx(t,i),ke(i,{validation:"cidr",code:ve.invalid_string,message:s.message}),n.dirty()):s.kind==="base64"?BMe.test(t.data)||(i=this._getOrReturnCtx(t,i),ke(i,{validation:"base64",code:ve.invalid_string,message:s.message}),n.dirty()):s.kind==="base64url"?DMe.test(t.data)||(i=this._getOrReturnCtx(t,i),ke(i,{validation:"base64url",code:ve.invalid_string,message:s.message}),n.dirty()):Er.assertNever(s);return{status:n.value,value:t.data}}_regex(t,r,n){return this.refinement(i=>t.test(i),{validation:r,code:ve.invalid_string,...Je.errToObj(n)})}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...Je.errToObj(t)})}url(t){return this._addCheck({kind:"url",...Je.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...Je.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...Je.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...Je.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...Je.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...Je.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...Je.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...Je.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...Je.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...Je.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...Je.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...Je.errToObj(t)})}datetime(t){var r,n;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof t?.precision>"u"?null:t?.precision,offset:(r=t?.offset)!==null&&r!==void 0?r:!1,local:(n=t?.local)!==null&&n!==void 0?n:!1,...Je.errToObj(t?.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof t?.precision>"u"?null:t?.precision,...Je.errToObj(t?.message)})}duration(t){return this._addCheck({kind:"duration",...Je.errToObj(t)})}regex(t,r){return this._addCheck({kind:"regex",regex:t,...Je.errToObj(r)})}includes(t,r){return this._addCheck({kind:"includes",value:t,position:r?.position,...Je.errToObj(r?.message)})}startsWith(t,r){return this._addCheck({kind:"startsWith",value:t,...Je.errToObj(r)})}endsWith(t,r){return this._addCheck({kind:"endsWith",value:t,...Je.errToObj(r)})}min(t,r){return this._addCheck({kind:"min",value:t,...Je.errToObj(r)})}max(t,r){return this._addCheck({kind:"max",value:t,...Je.errToObj(r)})}length(t,r){return this._addCheck({kind:"length",value:t,...Je.errToObj(r)})}nonempty(t){return this.min(1,Je.errToObj(t))}trim(){return new e({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new e({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new e({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(let r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxLength(){let t=null;for(let r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}};Wf.create=e=>{var t;return new Wf({checks:[],typeName:At.ZodString,coerce:(t=e?.coerce)!==null&&t!==void 0?t:!1,...Ut(e)})};function QMe(e,t){let r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,i=r>n?r:n,s=parseInt(e.toFixed(i).replace(".","")),o=parseInt(t.toFixed(i).replace(".",""));return s%o/Math.pow(10,i)}var Vg=class e extends Ot{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==Pe.number){let s=this._getOrReturnCtx(t);return ke(s,{code:ve.invalid_type,expected:Pe.number,received:s.parsedType}),Et}let n,i=new Ls;for(let s of this._def.checks)s.kind==="int"?Er.isInteger(t.data)||(n=this._getOrReturnCtx(t,n),ke(n,{code:ve.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?t.data<s.value:t.data<=s.value)&&(n=this._getOrReturnCtx(t,n),ke(n,{code:ve.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?t.data>s.value:t.data>=s.value)&&(n=this._getOrReturnCtx(t,n),ke(n,{code:ve.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?QMe(t.data,s.value)!==0&&(n=this._getOrReturnCtx(t,n),ke(n,{code:ve.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(t.data)||(n=this._getOrReturnCtx(t,n),ke(n,{code:ve.not_finite,message:s.message}),i.dirty()):Er.assertNever(s);return{status:i.value,value:t.data}}gte(t,r){return this.setLimit("min",t,!0,Je.toString(r))}gt(t,r){return this.setLimit("min",t,!1,Je.toString(r))}lte(t,r){return this.setLimit("max",t,!0,Je.toString(r))}lt(t,r){return this.setLimit("max",t,!1,Je.toString(r))}setLimit(t,r,n,i){return new e({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:Je.toString(i)}]})}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:Je.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Je.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Je.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Je.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Je.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:Je.toString(r)})}finite(t){return this._addCheck({kind:"finite",message:Je.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Je.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Je.toString(t)})}get minValue(){let t=null;for(let r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(let r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&Er.isInteger(t.value))}get isFinite(){let t=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(t===null||n.value<t)&&(t=n.value)}return Number.isFinite(r)&&Number.isFinite(t)}};Vg.create=e=>new Vg({checks:[],typeName:At.ZodNumber,coerce:e?.coerce||!1,...Ut(e)});var Hg=class e extends Ot{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==Pe.bigint)return this._getInvalidInput(t);let n,i=new Ls;for(let s of this._def.checks)s.kind==="min"?(s.inclusive?t.data<s.value:t.data<=s.value)&&(n=this._getOrReturnCtx(t,n),ke(n,{code:ve.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?t.data>s.value:t.data>=s.value)&&(n=this._getOrReturnCtx(t,n),ke(n,{code:ve.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?t.data%s.value!==BigInt(0)&&(n=this._getOrReturnCtx(t,n),ke(n,{code:ve.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):Er.assertNever(s);return{status:i.value,value:t.data}}_getInvalidInput(t){let r=this._getOrReturnCtx(t);return ke(r,{code:ve.invalid_type,expected:Pe.bigint,received:r.parsedType}),Et}gte(t,r){return this.setLimit("min",t,!0,Je.toString(r))}gt(t,r){return this.setLimit("min",t,!1,Je.toString(r))}lte(t,r){return this.setLimit("max",t,!0,Je.toString(r))}lt(t,r){return this.setLimit("max",t,!1,Je.toString(r))}setLimit(t,r,n,i){return new e({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:Je.toString(i)}]})}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Je.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Je.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Je.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Je.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:Je.toString(r)})}get minValue(){let t=null;for(let r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(let r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}};Hg.create=e=>{var t;return new Hg({checks:[],typeName:At.ZodBigInt,coerce:(t=e?.coerce)!==null&&t!==void 0?t:!1,...Ut(e)})};var Wg=class extends Ot{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==Pe.boolean){let n=this._getOrReturnCtx(t);return ke(n,{code:ve.invalid_type,expected:Pe.boolean,received:n.parsedType}),Et}return lo(t.data)}};Wg.create=e=>new Wg({typeName:At.ZodBoolean,coerce:e?.coerce||!1,...Ut(e)});var Gg=class e extends Ot{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==Pe.date){let s=this._getOrReturnCtx(t);return ke(s,{code:ve.invalid_type,expected:Pe.date,received:s.parsedType}),Et}if(isNaN(t.data.getTime())){let s=this._getOrReturnCtx(t);return ke(s,{code:ve.invalid_date}),Et}let n=new Ls,i;for(let s of this._def.checks)s.kind==="min"?t.data.getTime()<s.value&&(i=this._getOrReturnCtx(t,i),ke(i,{code:ve.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),n.dirty()):s.kind==="max"?t.data.getTime()>s.value&&(i=this._getOrReturnCtx(t,i),ke(i,{code:ve.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),n.dirty()):Er.assertNever(s);return{status:n.value,value:new Date(t.data.getTime())}}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}min(t,r){return this._addCheck({kind:"min",value:t.getTime(),message:Je.toString(r)})}max(t,r){return this._addCheck({kind:"max",value:t.getTime(),message:Je.toString(r)})}get minDate(){let t=null;for(let r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(let r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t!=null?new Date(t):null}};Gg.create=e=>new Gg({checks:[],coerce:e?.coerce||!1,typeName:At.ZodDate,...Ut(e)});var Am=class extends Ot{_parse(t){if(this._getType(t)!==Pe.symbol){let n=this._getOrReturnCtx(t);return ke(n,{code:ve.invalid_type,expected:Pe.symbol,received:n.parsedType}),Et}return lo(t.data)}};Am.create=e=>new Am({typeName:At.ZodSymbol,...Ut(e)});var $g=class extends Ot{_parse(t){if(this._getType(t)!==Pe.undefined){let n=this._getOrReturnCtx(t);return ke(n,{code:ve.invalid_type,expected:Pe.undefined,received:n.parsedType}),Et}return lo(t.data)}};$g.create=e=>new $g({typeName:At.ZodUndefined,...Ut(e)});var Yg=class extends Ot{_parse(t){if(this._getType(t)!==Pe.null){let n=this._getOrReturnCtx(t);return ke(n,{code:ve.invalid_type,expected:Pe.null,received:n.parsedType}),Et}return lo(t.data)}};Yg.create=e=>new Yg({typeName:At.ZodNull,...Ut(e)});var Gf=class extends Ot{constructor(){super(...arguments),this._any=!0}_parse(t){return lo(t.data)}};Gf.create=e=>new Gf({typeName:At.ZodAny,...Ut(e)});var Id=class extends Ot{constructor(){super(...arguments),this._unknown=!0}_parse(t){return lo(t.data)}};Id.create=e=>new Id({typeName:At.ZodUnknown,...Ut(e)});var ic=class extends Ot{_parse(t){let r=this._getOrReturnCtx(t);return ke(r,{code:ve.invalid_type,expected:Pe.never,received:r.parsedType}),Et}};ic.create=e=>new ic({typeName:At.ZodNever,...Ut(e)});var mm=class extends Ot{_parse(t){if(this._getType(t)!==Pe.undefined){let n=this._getOrReturnCtx(t);return ke(n,{code:ve.invalid_type,expected:Pe.void,received:n.parsedType}),Et}return lo(t.data)}};mm.create=e=>new mm({typeName:At.ZodVoid,...Ut(e)});var Sd=class e extends Ot{_parse(t){let{ctx:r,status:n}=this._processInputParams(t),i=this._def;if(r.parsedType!==Pe.array)return ke(r,{code:ve.invalid_type,expected:Pe.array,received:r.parsedType}),Et;if(i.exactLength!==null){let o=r.data.length>i.exactLength.value,a=r.data.length<i.exactLength.value;(o||a)&&(ke(r,{code:o?ve.too_big:ve.too_small,minimum:a?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(ke(r,{code:ve.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(ke(r,{code:ve.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((o,a)=>i.type._parseAsync(new cl(r,o,r.path,a)))).then(o=>Ls.mergeArray(n,o));let s=[...r.data].map((o,a)=>i.type._parseSync(new cl(r,o,r.path,a)));return Ls.mergeArray(n,s)}get element(){return this._def.type}min(t,r){return new e({...this._def,minLength:{value:t,message:Je.toString(r)}})}max(t,r){return new e({...this._def,maxLength:{value:t,message:Je.toString(r)}})}length(t,r){return new e({...this._def,exactLength:{value:t,message:Je.toString(r)}})}nonempty(t){return this.min(1,t)}};Sd.create=(e,t)=>new Sd({type:e,minLength:null,maxLength:null,exactLength:null,typeName:At.ZodArray,...Ut(t)});function hm(e){if(e instanceof Qo){let t={};for(let r in e.shape){let n=e.shape[r];t[r]=ll.create(hm(n))}return new Qo({...e._def,shape:()=>t})}else return e instanceof Sd?new Sd({...e._def,type:hm(e.element)}):e instanceof ll?ll.create(hm(e.unwrap())):e instanceof Xc?Xc.create(hm(e.unwrap())):e instanceof Zc?Zc.create(e.items.map(t=>hm(t))):e}var Qo=class e extends Ot{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let t=this._def.shape(),r=Er.objectKeys(t);return this._cached={shape:t,keys:r}}_parse(t){if(this._getType(t)!==Pe.object){let c=this._getOrReturnCtx(t);return ke(c,{code:ve.invalid_type,expected:Pe.object,received:c.parsedType}),Et}let{status:n,ctx:i}=this._processInputParams(t),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof ic&&this._def.unknownKeys==="strip"))for(let c in i.data)o.includes(c)||a.push(c);let l=[];for(let c of o){let u=s[c],f=i.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new cl(i,f,i.path,c)),alwaysSet:c in i.data})}if(this._def.catchall instanceof ic){let c=this._def.unknownKeys;if(c==="passthrough")for(let u of a)l.push({key:{status:"valid",value:u},value:{status:"valid",value:i.data[u]}});else if(c==="strict")a.length>0&&(ke(i,{code:ve.unrecognized_keys,keys:a}),n.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let c=this._def.catchall;for(let u of a){let f=i.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new cl(i,f,i.path,u)),alwaysSet:u in i.data})}}return i.common.async?Promise.resolve().then(async()=>{let c=[];for(let u of l){let f=await u.key,p=await u.value;c.push({key:f,value:p,alwaysSet:u.alwaysSet})}return c}).then(c=>Ls.mergeObjectSync(n,c)):Ls.mergeObjectSync(n,l)}get shape(){return this._def.shape()}strict(t){return Je.errToObj,new e({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(r,n)=>{var i,s,o,a;let l=(o=(s=(i=this._def).errorMap)===null||s===void 0?void 0:s.call(i,r,n).message)!==null&&o!==void 0?o:n.defaultError;return r.code==="unrecognized_keys"?{message:(a=Je.errToObj(t).message)!==null&&a!==void 0?a:l}:{message:l}}}:{}})}strip(){return new e({...this._def,unknownKeys:"strip"})}passthrough(){return new e({...this._def,unknownKeys:"passthrough"})}extend(t){return new e({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new e({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:At.ZodObject})}setKey(t,r){return this.augment({[t]:r})}catchall(t){return new e({...this._def,catchall:t})}pick(t){let r={};return Er.objectKeys(t).forEach(n=>{t[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new e({...this._def,shape:()=>r})}omit(t){let r={};return Er.objectKeys(this.shape).forEach(n=>{t[n]||(r[n]=this.shape[n])}),new e({...this._def,shape:()=>r})}deepPartial(){return hm(this)}partial(t){let r={};return Er.objectKeys(this.shape).forEach(n=>{let i=this.shape[n];t&&!t[n]?r[n]=i:r[n]=i.optional()}),new e({...this._def,shape:()=>r})}required(t){let r={};return Er.objectKeys(this.shape).forEach(n=>{if(t&&!t[n])r[n]=this.shape[n];else{let s=this.shape[n];for(;s instanceof ll;)s=s._def.innerType;r[n]=s}}),new e({...this._def,shape:()=>r})}keyof(){return XY(Er.objectKeys(this.shape))}};Qo.create=(e,t)=>new Qo({shape:()=>e,unknownKeys:"strip",catchall:ic.create(),typeName:At.ZodObject,...Ut(t)});Qo.strictCreate=(e,t)=>new Qo({shape:()=>e,unknownKeys:"strict",catchall:ic.create(),typeName:At.ZodObject,...Ut(t)});Qo.lazycreate=(e,t)=>new Qo({shape:e,unknownKeys:"strip",catchall:ic.create(),typeName:At.ZodObject,...Ut(t)});var Kg=class extends Ot{_parse(t){let{ctx:r}=this._processInputParams(t),n=this._def.options;function i(s){for(let a of s)if(a.result.status==="valid")return a.result;for(let a of s)if(a.result.status==="dirty")return r.common.issues.push(...a.ctx.common.issues),a.result;let o=s.map(a=>new ya(a.ctx.common.issues));return ke(r,{code:ve.invalid_union,unionErrors:o}),Et}if(r.common.async)return Promise.all(n.map(async s=>{let o={...r,common:{...r.common,issues:[]},parent:null};return{result:await s._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}})).then(i);{let s,o=[];for(let l of n){let c={...r,common:{...r.common,issues:[]},parent:null},u=l._parseSync({data:r.data,path:r.path,parent:c});if(u.status==="valid")return u;u.status==="dirty"&&!s&&(s={result:u,ctx:c}),c.common.issues.length&&o.push(c.common.issues)}if(s)return r.common.issues.push(...s.ctx.common.issues),s.result;let a=o.map(l=>new ya(l));return ke(r,{code:ve.invalid_union,unionErrors:a}),Et}}get options(){return this._def.options}};Kg.create=(e,t)=>new Kg({options:e,typeName:At.ZodUnion,...Ut(t)});var _d=e=>e instanceof Jg?_d(e.schema):e instanceof Ca?_d(e.innerType()):e instanceof jg?[e.value]:e instanceof Zg?e.options:e instanceof Xg?Er.objectValues(e.enum):e instanceof ep?_d(e._def.innerType):e instanceof $g?[void 0]:e instanceof Yg?[null]:e instanceof ll?[void 0,..._d(e.unwrap())]:e instanceof Xc?[null,..._d(e.unwrap())]:e instanceof Zv||e instanceof rp?_d(e.unwrap()):e instanceof tp?_d(e._def.innerType):[],YI=class e extends Ot{_parse(t){let{ctx:r}=this._processInputParams(t);if(r.parsedType!==Pe.object)return ke(r,{code:ve.invalid_type,expected:Pe.object,received:r.parsedType}),Et;let n=this.discriminator,i=r.data[n],s=this.optionsMap.get(i);return s?r.common.async?s._parseAsync({data:r.data,path:r.path,parent:r}):s._parseSync({data:r.data,path:r.path,parent:r}):(ke(r,{code:ve.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),Et)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,r,n){let i=new Map;for(let s of r){let o=_d(s.shape[t]);if(!o.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(let a of o){if(i.has(a))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(a)}`);i.set(a,s)}}return new e({typeName:At.ZodDiscriminatedUnion,discriminator:t,options:r,optionsMap:i,...Ut(n)})}};function OP(e,t){let r=wd(e),n=wd(t);if(e===t)return{valid:!0,data:e};if(r===Pe.object&&n===Pe.object){let i=Er.objectKeys(t),s=Er.objectKeys(e).filter(a=>i.indexOf(a)!==-1),o={...e,...t};for(let a of s){let l=OP(e[a],t[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(r===Pe.array&&n===Pe.array){if(e.length!==t.length)return{valid:!1};let i=[];for(let s=0;s<e.length;s++){let o=e[s],a=t[s],l=OP(o,a);if(!l.valid)return{valid:!1};i.push(l.data)}return{valid:!0,data:i}}else return r===Pe.date&&n===Pe.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}var zg=class extends Ot{_parse(t){let{status:r,ctx:n}=this._processInputParams(t),i=(s,o)=>{if(LP(s)||LP(o))return Et;let a=OP(s.value,o.value);return a.valid?((UP(s)||UP(o))&&r.dirty(),{status:r.value,value:a.data}):(ke(n,{code:ve.invalid_intersection_types}),Et)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([s,o])=>i(s,o)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};zg.create=(e,t,r)=>new zg({left:e,right:t,typeName:At.ZodIntersection,...Ut(r)});var Zc=class e extends Ot{_parse(t){let{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==Pe.array)return ke(n,{code:ve.invalid_type,expected:Pe.array,received:n.parsedType}),Et;if(n.data.length<this._def.items.length)return ke(n,{code:ve.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Et;!this._def.rest&&n.data.length>this._def.items.length&&(ke(n,{code:ve.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let s=[...n.data].map((o,a)=>{let l=this._def.items[a]||this._def.rest;return l?l._parse(new cl(n,o,n.path,a)):null}).filter(o=>!!o);return n.common.async?Promise.all(s).then(o=>Ls.mergeArray(r,o)):Ls.mergeArray(r,s)}get items(){return this._def.items}rest(t){return new e({...this._def,rest:t})}};Zc.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Zc({items:e,typeName:At.ZodTuple,rest:null,...Ut(t)})};var KI=class e extends Ot{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){let{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==Pe.object)return ke(n,{code:ve.invalid_type,expected:Pe.object,received:n.parsedType}),Et;let i=[],s=this._def.keyType,o=this._def.valueType;for(let a in n.data)i.push({key:s._parse(new cl(n,a,n.path,a)),value:o._parse(new cl(n,n.data[a],n.path,a)),alwaysSet:a in n.data});return n.common.async?Ls.mergeObjectAsync(r,i):Ls.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(t,r,n){return r instanceof Ot?new e({keyType:t,valueType:r,typeName:At.ZodRecord,...Ut(n)}):new e({keyType:Wf.create(),valueType:t,typeName:At.ZodRecord,...Ut(r)})}},ym=class extends Ot{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){let{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==Pe.map)return ke(n,{code:ve.invalid_type,expected:Pe.map,received:n.parsedType}),Et;let i=this._def.keyType,s=this._def.valueType,o=[...n.data.entries()].map(([a,l],c)=>({key:i._parse(new cl(n,a,n.path,[c,"key"])),value:s._parse(new cl(n,l,n.path,[c,"value"]))}));if(n.common.async){let a=new Map;return Promise.resolve().then(async()=>{for(let l of o){let c=await l.key,u=await l.value;if(c.status==="aborted"||u.status==="aborted")return Et;(c.status==="dirty"||u.status==="dirty")&&r.dirty(),a.set(c.value,u.value)}return{status:r.value,value:a}})}else{let a=new Map;for(let l of o){let c=l.key,u=l.value;if(c.status==="aborted"||u.status==="aborted")return Et;(c.status==="dirty"||u.status==="dirty")&&r.dirty(),a.set(c.value,u.value)}return{status:r.value,value:a}}}};ym.create=(e,t,r)=>new ym({valueType:t,keyType:e,typeName:At.ZodMap,...Ut(r)});var Cm=class e extends Ot{_parse(t){let{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==Pe.set)return ke(n,{code:ve.invalid_type,expected:Pe.set,received:n.parsedType}),Et;let i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(ke(n,{code:ve.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(ke(n,{code:ve.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());let s=this._def.valueType;function o(l){let c=new Set;for(let u of l){if(u.status==="aborted")return Et;u.status==="dirty"&&r.dirty(),c.add(u.value)}return{status:r.value,value:c}}let a=[...n.data.values()].map((l,c)=>s._parse(new cl(n,l,n.path,c)));return n.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(t,r){return new e({...this._def,minSize:{value:t,message:Je.toString(r)}})}max(t,r){return new e({...this._def,maxSize:{value:t,message:Je.toString(r)}})}size(t,r){return this.min(t,r).max(t,r)}nonempty(t){return this.min(1,t)}};Cm.create=(e,t)=>new Cm({valueType:e,minSize:null,maxSize:null,typeName:At.ZodSet,...Ut(t)});var zI=class e extends Ot{constructor(){super(...arguments),this.validate=this.implement}_parse(t){let{ctx:r}=this._processInputParams(t);if(r.parsedType!==Pe.function)return ke(r,{code:ve.invalid_type,expected:Pe.function,received:r.parsedType}),Et;function n(a,l){return GI({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,WI(),pm].filter(c=>!!c),issueData:{code:ve.invalid_arguments,argumentsError:l}})}function i(a,l){return GI({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,WI(),pm].filter(c=>!!c),issueData:{code:ve.invalid_return_type,returnTypeError:l}})}let s={errorMap:r.common.contextualErrorMap},o=r.data;if(this._def.returns instanceof $f){let a=this;return lo(async function(...l){let c=new ya([]),u=await a._def.args.parseAsync(l,s).catch(g=>{throw c.addIssue(n(l,g)),c}),f=await Reflect.apply(o,this,u);return await a._def.returns._def.type.parseAsync(f,s).catch(g=>{throw c.addIssue(i(f,g)),c})})}else{let a=this;return lo(function(...l){let c=a._def.args.safeParse(l,s);if(!c.success)throw new ya([n(l,c.error)]);let u=Reflect.apply(o,this,c.data),f=a._def.returns.safeParse(u,s);if(!f.success)throw new ya([i(u,f.error)]);return f.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new e({...this._def,args:Zc.create(t).rest(Id.create())})}returns(t){return new e({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,r,n){return new e({args:t||Zc.create([]).rest(Id.create()),returns:r||Id.create(),typeName:At.ZodFunction,...Ut(n)})}},Jg=class extends Ot{get schema(){return this._def.getter()}_parse(t){let{ctx:r}=this._processInputParams(t);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};Jg.create=(e,t)=>new Jg({getter:e,typeName:At.ZodLazy,...Ut(t)});var jg=class extends Ot{_parse(t){if(t.data!==this._def.value){let r=this._getOrReturnCtx(t);return ke(r,{received:r.data,code:ve.invalid_literal,expected:this._def.value}),Et}return{status:"valid",value:t.data}}get value(){return this._def.value}};jg.create=(e,t)=>new jg({value:e,typeName:At.ZodLiteral,...Ut(t)});function XY(e,t){return new Zg({values:e,typeName:At.ZodEnum,...Ut(t)})}var Zg=class e extends Ot{constructor(){super(...arguments),zv.set(this,void 0)}_parse(t){if(typeof t.data!="string"){let r=this._getOrReturnCtx(t),n=this._def.values;return ke(r,{expected:Er.joinValues(n),received:r.parsedType,code:ve.invalid_type}),Et}if($I(this,zv,"f")||zY(this,zv,new Set(this._def.values),"f"),!$I(this,zv,"f").has(t.data)){let r=this._getOrReturnCtx(t),n=this._def.values;return ke(r,{received:r.data,code:ve.invalid_enum_value,options:n}),Et}return lo(t.data)}get options(){return this._def.values}get enum(){let t={};for(let r of this._def.values)t[r]=r;return t}get Values(){let t={};for(let r of this._def.values)t[r]=r;return t}get Enum(){let t={};for(let r of this._def.values)t[r]=r;return t}extract(t,r=this._def){return e.create(t,{...this._def,...r})}exclude(t,r=this._def){return e.create(this.options.filter(n=>!t.includes(n)),{...this._def,...r})}};zv=new WeakMap;Zg.create=XY;var Xg=class extends Ot{constructor(){super(...arguments),Jv.set(this,void 0)}_parse(t){let r=Er.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(t);if(n.parsedType!==Pe.string&&n.parsedType!==Pe.number){let i=Er.objectValues(r);return ke(n,{expected:Er.joinValues(i),received:n.parsedType,code:ve.invalid_type}),Et}if($I(this,Jv,"f")||zY(this,Jv,new Set(Er.getValidEnumValues(this._def.values)),"f"),!$I(this,Jv,"f").has(t.data)){let i=Er.objectValues(r);return ke(n,{received:n.data,code:ve.invalid_enum_value,options:i}),Et}return lo(t.data)}get enum(){return this._def.values}};Jv=new WeakMap;Xg.create=(e,t)=>new Xg({values:e,typeName:At.ZodNativeEnum,...Ut(t)});var $f=class extends Ot{unwrap(){return this._def.type}_parse(t){let{ctx:r}=this._processInputParams(t);if(r.parsedType!==Pe.promise&&r.common.async===!1)return ke(r,{code:ve.invalid_type,expected:Pe.promise,received:r.parsedType}),Et;let n=r.parsedType===Pe.promise?r.data:Promise.resolve(r.data);return lo(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}};$f.create=(e,t)=>new $f({type:e,typeName:At.ZodPromise,...Ut(t)});var Ca=class extends Ot{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===At.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){let{status:r,ctx:n}=this._processInputParams(t),i=this._def.effect||null,s={addIssue:o=>{ke(n,o),o.fatal?r.abort():r.dirty()},get path(){return n.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){let o=i.transform(n.data,s);if(n.common.async)return Promise.resolve(o).then(async a=>{if(r.value==="aborted")return Et;let l=await this._def.schema._parseAsync({data:a,path:n.path,parent:n});return l.status==="aborted"?Et:l.status==="dirty"||r.value==="dirty"?gm(l.value):l});{if(r.value==="aborted")return Et;let a=this._def.schema._parseSync({data:o,path:n.path,parent:n});return a.status==="aborted"?Et:a.status==="dirty"||r.value==="dirty"?gm(a.value):a}}if(i.type==="refinement"){let o=a=>{let l=i.refinement(a,s);if(n.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(n.common.async===!1){let a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?Et:(a.status==="dirty"&&r.dirty(),o(a.value),{status:r.value,value:a.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>a.status==="aborted"?Et:(a.status==="dirty"&&r.dirty(),o(a.value).then(()=>({status:r.value,value:a.value}))))}if(i.type==="transform")if(n.common.async===!1){let o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!qg(o))return o;let a=i.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:a}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>qg(o)?Promise.resolve(i.transform(o.value,s)).then(a=>({status:r.value,value:a})):o);Er.assertNever(i)}};Ca.create=(e,t,r)=>new Ca({schema:e,typeName:At.ZodEffects,effect:t,...Ut(r)});Ca.createWithPreprocess=(e,t,r)=>new Ca({schema:t,effect:{type:"preprocess",transform:e},typeName:At.ZodEffects,...Ut(r)});var ll=class extends Ot{_parse(t){return this._getType(t)===Pe.undefined?lo(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}};ll.create=(e,t)=>new ll({innerType:e,typeName:At.ZodOptional,...Ut(t)});var Xc=class extends Ot{_parse(t){return this._getType(t)===Pe.null?lo(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}};Xc.create=(e,t)=>new Xc({innerType:e,typeName:At.ZodNullable,...Ut(t)});var ep=class extends Ot{_parse(t){let{ctx:r}=this._processInputParams(t),n=r.data;return r.parsedType===Pe.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};ep.create=(e,t)=>new ep({innerType:e,typeName:At.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...Ut(t)});var tp=class extends Ot{_parse(t){let{ctx:r}=this._processInputParams(t),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return jv(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new ya(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new ya(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};tp.create=(e,t)=>new tp({innerType:e,typeName:At.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...Ut(t)});var vm=class extends Ot{_parse(t){if(this._getType(t)!==Pe.nan){let n=this._getOrReturnCtx(t);return ke(n,{code:ve.invalid_type,expected:Pe.nan,received:n.parsedType}),Et}return{status:"valid",value:t.data}}};vm.create=e=>new vm({typeName:At.ZodNaN,...Ut(e)});var NMe=Symbol("zod_brand"),Zv=class extends Ot{_parse(t){let{ctx:r}=this._processInputParams(t),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},Xv=class e extends Ot{_parse(t){let{status:r,ctx:n}=this._processInputParams(t);if(n.common.async)return(async()=>{let s=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?Et:s.status==="dirty"?(r.dirty(),gm(s.value)):this._def.out._parseAsync({data:s.value,path:n.path,parent:n})})();{let i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?Et:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(t,r){return new e({in:t,out:r,typeName:At.ZodPipeline})}},rp=class extends Ot{_parse(t){let r=this._def.innerType._parse(t),n=i=>(qg(i)&&(i.value=Object.freeze(i.value)),i);return jv(r)?r.then(i=>n(i)):n(r)}unwrap(){return this._def.innerType}};rp.create=(e,t)=>new rp({innerType:e,typeName:At.ZodReadonly,...Ut(t)});function eK(e,t={},r){return e?Gf.create().superRefine((n,i)=>{var s,o;if(!e(n)){let a=typeof t=="function"?t(n):typeof t=="string"?{message:t}:t,l=(o=(s=a.fatal)!==null&&s!==void 0?s:r)!==null&&o!==void 0?o:!0,c=typeof a=="string"?{message:a}:a;i.addIssue({code:"custom",...c,fatal:l})}}):Gf.create()}var PMe={object:Qo.lazycreate},At;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(At||(At={}));var LMe=(e,t={message:`Input not instance of ${e.name}`})=>eK(r=>r instanceof e,t),tK=Wf.create,rK=Vg.create,UMe=vm.create,OMe=Hg.create,nK=Wg.create,qMe=Gg.create,VMe=Am.create,HMe=$g.create,WMe=Yg.create,GMe=Gf.create,$Me=Id.create,YMe=ic.create,KMe=mm.create,zMe=Sd.create,JMe=Qo.create,jMe=Qo.strictCreate,ZMe=Kg.create,XMe=YI.create,e1e=zg.create,t1e=Zc.create,r1e=KI.create,n1e=ym.create,i1e=Cm.create,s1e=zI.create,o1e=Jg.create,a1e=jg.create,l1e=Zg.create,c1e=Xg.create,u1e=$f.create,YY=Ca.create,d1e=ll.create,f1e=Xc.create,h1e=Ca.createWithPreprocess,g1e=Xv.create,p1e=()=>tK().optional(),A1e=()=>rK().optional(),m1e=()=>nK().optional(),y1e={string:e=>Wf.create({...e,coerce:!0}),number:e=>Vg.create({...e,coerce:!0}),boolean:e=>Wg.create({...e,coerce:!0}),bigint:e=>Hg.create({...e,coerce:!0}),date:e=>Gg.create({...e,coerce:!0})},C1e=Et,R=Object.freeze({__proto__:null,defaultErrorMap:pm,setErrorMap:hMe,getErrorMap:WI,makeIssue:GI,EMPTY_PATH:gMe,addIssueToContext:ke,ParseStatus:Ls,INVALID:Et,DIRTY:gm,OK:lo,isAborted:LP,isDirty:UP,isValid:qg,isAsync:jv,get util(){return Er},get objectUtil(){return PP},ZodParsedType:Pe,getParsedType:wd,ZodType:Ot,datetimeRegex:ZY,ZodString:Wf,ZodNumber:Vg,ZodBigInt:Hg,ZodBoolean:Wg,ZodDate:Gg,ZodSymbol:Am,ZodUndefined:$g,ZodNull:Yg,ZodAny:Gf,ZodUnknown:Id,ZodNever:ic,ZodVoid:mm,ZodArray:Sd,ZodObject:Qo,ZodUnion:Kg,ZodDiscriminatedUnion:YI,ZodIntersection:zg,ZodTuple:Zc,ZodRecord:KI,ZodMap:ym,ZodSet:Cm,ZodFunction:zI,ZodLazy:Jg,ZodLiteral:jg,ZodEnum:Zg,ZodNativeEnum:Xg,ZodPromise:$f,ZodEffects:Ca,ZodTransformer:Ca,ZodOptional:ll,ZodNullable:Xc,ZodDefault:ep,ZodCatch:tp,ZodNaN:vm,BRAND:NMe,ZodBranded:Zv,ZodPipeline:Xv,ZodReadonly:rp,custom:eK,Schema:Ot,ZodSchema:Ot,late:PMe,get ZodFirstPartyTypeKind(){return At},coerce:y1e,any:GMe,array:zMe,bigint:OMe,boolean:nK,date:qMe,discriminatedUnion:XMe,effect:YY,enum:l1e,function:s1e,instanceof:LMe,intersection:e1e,lazy:o1e,literal:a1e,map:n1e,nan:UMe,nativeEnum:c1e,never:YMe,null:WMe,nullable:f1e,number:rK,object:JMe,oboolean:m1e,onumber:A1e,optional:d1e,ostring:p1e,pipeline:g1e,preprocess:h1e,promise:u1e,record:r1e,set:i1e,strictObject:jMe,string:tK,symbol:VMe,transformer:YY,tuple:t1e,undefined:HMe,union:ZMe,unknown:$Me,void:KMe,NEVER:C1e,ZodIssueCode:ve,quotelessJson:fMe,ZodError:ya});var qP="2024-11-05",iK=[qP,"2024-10-07"],JI="2.0",sK=R.union([R.string(),R.number().int()]),oK=R.string(),sc=R.object({_meta:R.optional(R.object({progressToken:R.optional(sK)}).passthrough())}).passthrough(),va=R.object({method:R.string(),params:R.optional(sc)}),eE=R.object({_meta:R.optional(R.object({}).passthrough())}).passthrough(),eu=R.object({method:R.string(),params:R.optional(eE)}),oc=R.object({_meta:R.optional(R.object({}).passthrough())}).passthrough(),jI=R.union([R.string(),R.number().int()]),v1e=R.object({jsonrpc:R.literal(JI),id:jI}).merge(va).strict(),E1e=R.object({jsonrpc:R.literal(JI)}).merge(eu).strict(),b1e=R.object({jsonrpc:R.literal(JI),id:jI,result:oc}).strict(),np;(function(e){e[e.ConnectionClosed=-1]="ConnectionClosed",e[e.RequestTimeout=-2]="RequestTimeout",e[e.ParseError=-32700]="ParseError",e[e.InvalidRequest=-32600]="InvalidRequest",e[e.MethodNotFound=-32601]="MethodNotFound",e[e.InvalidParams=-32602]="InvalidParams",e[e.InternalError=-32603]="InternalError"})(np||(np={}));var x1e=R.object({jsonrpc:R.literal(JI),id:jI,error:R.object({code:R.number().int(),message:R.string(),data:R.optional(R.unknown())})}).strict(),aK=R.union([v1e,E1e,b1e,x1e]),ip=oc.strict(),ZI=eu.extend({method:R.literal("notifications/cancelled"),params:eE.extend({requestId:jI,reason:R.string().optional()})}),lK=R.object({name:R.string(),version:R.string()}).passthrough(),_1e=R.object({experimental:R.optional(R.object({}).passthrough()),sampling:R.optional(R.object({}).passthrough()),roots:R.optional(R.object({listChanged:R.optional(R.boolean())}).passthrough())}).passthrough(),w1e=va.extend({method:R.literal("initialize"),params:sc.extend({protocolVersion:R.string(),capabilities:_1e,clientInfo:lK})}),I1e=R.object({experimental:R.optional(R.object({}).passthrough()),logging:R.optional(R.object({}).passthrough()),prompts:R.optional(R.object({listChanged:R.optional(R.boolean())}).passthrough()),resources:R.optional(R.object({subscribe:R.optional(R.boolean()),listChanged:R.optional(R.boolean())}).passthrough()),tools:R.optional(R.object({listChanged:R.optional(R.boolean())}).passthrough())}).passthrough(),VP=oc.extend({protocolVersion:R.string(),capabilities:I1e,serverInfo:lK}),S1e=eu.extend({method:R.literal("notifications/initialized")}),XI=va.extend({method:R.literal("ping")}),B1e=R.object({progress:R.number(),total:R.optional(R.number())}).passthrough(),eS=eu.extend({method:R.literal("notifications/progress"),params:eE.merge(B1e).extend({progressToken:sK})}),tS=va.extend({params:sc.extend({cursor:R.optional(oK)}).optional()}),rS=oc.extend({nextCursor:R.optional(oK)}),cK=R.object({uri:R.string(),mimeType:R.optional(R.string())}).passthrough(),uK=cK.extend({text:R.string()}),dK=cK.extend({blob:R.string().base64()}),D1e=R.object({uri:R.string(),name:R.string(),description:R.optional(R.string()),mimeType:R.optional(R.string())}).passthrough(),T1e=R.object({uriTemplate:R.string(),name:R.string(),description:R.optional(R.string()),mimeType:R.optional(R.string())}).passthrough(),R1e=tS.extend({method:R.literal("resources/list")}),HP=rS.extend({resources:R.array(D1e)}),k1e=tS.extend({method:R.literal("resources/templates/list")}),WP=rS.extend({resourceTemplates:R.array(T1e)}),F1e=va.extend({method:R.literal("resources/read"),params:sc.extend({uri:R.string()})}),GP=oc.extend({contents:R.array(R.union([uK,dK]))}),M1e=eu.extend({method:R.literal("notifications/resources/list_changed")}),Q1e=va.extend({method:R.literal("resources/subscribe"),params:sc.extend({uri:R.string()})}),N1e=va.extend({method:R.literal("resources/unsubscribe"),params:sc.extend({uri:R.string()})}),P1e=eu.extend({method:R.literal("notifications/resources/updated"),params:eE.extend({uri:R.string()})}),L1e=R.object({name:R.string(),description:R.optional(R.string()),required:R.optional(R.boolean())}).passthrough(),U1e=R.object({name:R.string(),description:R.optional(R.string()),arguments:R.optional(R.array(L1e))}).passthrough(),O1e=tS.extend({method:R.literal("prompts/list")}),$P=rS.extend({prompts:R.array(U1e)}),q1e=va.extend({method:R.literal("prompts/get"),params:sc.extend({name:R.string(),arguments:R.optional(R.record(R.string()))})}),nS=R.object({type:R.literal("text"),text:R.string()}).passthrough(),iS=R.object({type:R.literal("image"),data:R.string().base64(),mimeType:R.string()}).passthrough(),fK=R.object({type:R.literal("resource"),resource:R.union([uK,dK])}).passthrough(),V1e=R.object({role:R.enum(["user","assistant"]),content:R.union([nS,iS,fK])}).passthrough(),YP=oc.extend({description:R.optional(R.string()),messages:R.array(V1e)}),H1e=eu.extend({method:R.literal("notifications/prompts/list_changed")}),W1e=R.object({name:R.string(),description:R.optional(R.string()),inputSchema:R.object({type:R.literal("object"),properties:R.optional(R.object({}).passthrough())}).passthrough()}).passthrough(),G1e=tS.extend({method:R.literal("tools/list")}),KP=rS.extend({tools:R.array(W1e)}),bm=oc.extend({content:R.array(R.union([nS,iS,fK])),isError:R.boolean().default(!1).optional()}),gbt=bm.or(oc.extend({toolResult:R.unknown()})),$1e=va.extend({method:R.literal("tools/call"),params:sc.extend({name:R.string(),arguments:R.optional(R.record(R.unknown()))})}),Y1e=eu.extend({method:R.literal("notifications/tools/list_changed")}),hK=R.enum(["debug","info","notice","warning","error","critical","alert","emergency"]),K1e=va.extend({method:R.literal("logging/setLevel"),params:sc.extend({level:hK})}),z1e=eu.extend({method:R.literal("notifications/message"),params:eE.extend({level:hK,logger:R.optional(R.string()),data:R.unknown()})}),J1e=R.object({name:R.string().optional()}).passthrough(),j1e=R.object({hints:R.optional(R.array(J1e)),costPriority:R.optional(R.number().min(0).max(1)),speedPriority:R.optional(R.number().min(0).max(1)),intelligencePriority:R.optional(R.number().min(0).max(1))}).passthrough(),Z1e=R.object({role:R.enum(["user","assistant"]),content:R.union([nS,iS])}).passthrough(),X1e=va.extend({method:R.literal("sampling/createMessage"),params:sc.extend({messages:R.array(Z1e),systemPrompt:R.optional(R.string()),includeContext:R.optional(R.enum(["none","thisServer","allServers"])),temperature:R.optional(R.number()),maxTokens:R.number().int(),stopSequences:R.optional(R.array(R.string())),metadata:R.optional(R.object({}).passthrough()),modelPreferences:R.optional(j1e)})}),eQe=oc.extend({model:R.string(),stopReason:R.optional(R.enum(["endTurn","stopSequence","maxTokens"]).or(R.string())),role:R.enum(["user","assistant"]),content:R.discriminatedUnion("type",[nS,iS])}),tQe=R.object({type:R.literal("ref/resource"),uri:R.string()}).passthrough(),rQe=R.object({type:R.literal("ref/prompt"),name:R.string()}).passthrough(),nQe=va.extend({method:R.literal("completion/complete"),params:sc.extend({ref:R.union([rQe,tQe]),argument:R.object({name:R.string(),value:R.string()}).passthrough()})}),zP=oc.extend({completion:R.object({values:R.array(R.string()).max(100),total:R.optional(R.number().int()),hasMore:R.optional(R.boolean())}).passthrough()}),iQe=R.object({uri:R.string().startsWith("file://"),name:R.optional(R.string())}).passthrough(),sQe=va.extend({method:R.literal("roots/list")}),oQe=oc.extend({roots:R.array(iQe)}),aQe=eu.extend({method:R.literal("notifications/roots/list_changed")}),pbt=R.union([XI,w1e,nQe,K1e,q1e,O1e,R1e,k1e,F1e,Q1e,N1e,$1e,G1e]),Abt=R.union([ZI,eS,S1e,aQe]),mbt=R.union([ip,eQe,oQe]),ybt=R.union([XI,X1e,sQe]),Cbt=R.union([ZI,eS,z1e,P1e,M1e,Y1e,H1e]),vbt=R.union([ip,VP,zP,YP,$P,HP,WP,GP,bm,KP]),Em=class extends Error{code;data;constructor(t,r,n){super(`MCP error ${t}: ${r}`),this.code=t,this.data=n}};var lQe=6e4,sS=class{_options;_transport;_requestMessageId=0;_requestHandlers=new Map;_requestHandlerAbortControllers=new Map;_notificationHandlers=new Map;_responseHandlers=new Map;_progressHandlers=new Map;onclose;onerror;fallbackRequestHandler;fallbackNotificationHandler;constructor(t){this._options=t,this.setNotificationHandler(ZI,r=>{this._requestHandlerAbortControllers.get(r.params.requestId)?.abort(r.params.reason)}),this.setNotificationHandler(eS,r=>{this._onprogress(r)}),this.setRequestHandler(XI,r=>({}))}async connect(t){this._transport=t,this._transport.onclose=()=>{this._onclose()},this._transport.onerror=r=>{this._onerror(r)},this._transport.onmessage=r=>{"method"in r?"id"in r?this._onrequest(r):this._onnotification(r):this._onresponse(r)},await this._transport.start()}_onclose(){let t=this._responseHandlers;this._responseHandlers=new Map,this._progressHandlers.clear(),this._transport=void 0,this.onclose?.();let r=new Em(np.ConnectionClosed,"Connection closed");for(let n of t.values())n(r)}_onerror(t){this.onerror?.(t)}_onnotification(t){let r=this._notificationHandlers.get(t.method)??this.fallbackNotificationHandler;r!==void 0&&Promise.resolve().then(()=>r(t)).catch(n=>this._onerror(new Error(`Uncaught error in notification handler: ${n}`)))}_onrequest(t){let r=this._requestHandlers.get(t.method)??this.fallbackRequestHandler;if(r===void 0){this._transport?.send({jsonrpc:"2.0",id:t.id,error:{code:np.MethodNotFound,message:"Method not found"}}).catch(i=>this._onerror(new Error(`Failed to send an error response: ${i}`)));return}let n=new AbortController;this._requestHandlerAbortControllers.set(t.id,n),Promise.resolve().then(()=>r(t,{signal:n.signal})).then(i=>{if(!n.signal.aborted)return this._transport?.send({result:i,jsonrpc:"2.0",id:t.id})},i=>{if(!n.signal.aborted)return this._transport?.send({jsonrpc:"2.0",id:t.id,error:{code:Number.isSafeInteger(i.code)?i.code:np.InternalError,message:i.message??"Internal error"}})}).catch(i=>this._onerror(new Error(`Failed to send response: ${i}`))).finally(()=>{this._requestHandlerAbortControllers.delete(t.id)})}_onprogress(t){let{progressToken:r,...n}=t.params,i=this._progressHandlers.get(Number(r));if(i===void 0){this._onerror(new Error(`Received a progress notification for an unknown token: ${JSON.stringify(t)}`));return}i(n)}_onresponse(t){let r=t.id,n=this._responseHandlers.get(Number(r));if(n===void 0){this._onerror(new Error(`Received a response for an unknown message ID: ${JSON.stringify(t)}`));return}if(this._responseHandlers.delete(Number(r)),this._progressHandlers.delete(Number(r)),"result"in t)n(t);else{let i=new Em(t.error.code,t.error.message,t.error.data);n(i)}}get transport(){return this._transport}async close(){await this._transport?.close()}request(t,r,n){return new Promise((i,s)=>{if(!this._transport){s(new Error("Not connected"));return}this._options?.enforceStrictCapabilities===!0&&this.assertCapabilityForMethod(t.method),n?.signal?.throwIfAborted();let o=this._requestMessageId++,a={...t,jsonrpc:"2.0",id:o};n?.onprogress&&(this._progressHandlers.set(o,n.onprogress),a.params={...t.params,_meta:{progressToken:o}});let l;this._responseHandlers.set(o,f=>{if(l!==void 0&&clearTimeout(l),!n?.signal?.aborted){if(f instanceof Error)return s(f);try{let p=r.parse(f.result);i(p)}catch(p){s(p)}}});let c=f=>{this._responseHandlers.delete(o),this._progressHandlers.delete(o),this._transport?.send({jsonrpc:"2.0",method:"notifications/cancelled",params:{requestId:o,reason:String(f)}}).catch(p=>this._onerror(new Error(`Failed to send cancellation: ${p}`))),s(f)};n?.signal?.addEventListener("abort",()=>{l!==void 0&&clearTimeout(l),c(n?.signal?.reason)});let u=n?.timeout??lQe;l=setTimeout(()=>c(new Em(np.RequestTimeout,"Request timed out",{timeout:u})),u),this._transport.send(a).catch(f=>{l!==void 0&&clearTimeout(l),s(f)})})}async notification(t){if(!this._transport)throw new Error("Not connected");this.assertNotificationCapability(t.method);let r={...t,jsonrpc:"2.0"};await this._transport.send(r)}setRequestHandler(t,r){let n=t.shape.method.value;this.assertRequestHandlerCapability(n),this._requestHandlers.set(n,(i,s)=>Promise.resolve(r(t.parse(i),s)))}removeRequestHandler(t){this._requestHandlers.delete(t)}setNotificationHandler(t,r){this._notificationHandlers.set(t.shape.method.value,n=>Promise.resolve(r(t.parse(n))))}removeNotificationHandler(t){this._notificationHandlers.delete(t)}};var oS=class extends sS{_clientInfo;_serverCapabilities;_serverVersion;_capabilities;constructor(t,r){super(r),this._clientInfo=t,this._capabilities=r.capabilities}assertCapability(t,r){if(!this._serverCapabilities?.[t])throw new Error(`Server does not support ${t} (required for ${r})`)}async connect(t){await super.connect(t);try{let r=await this.request({method:"initialize",params:{protocolVersion:qP,capabilities:this._capabilities,clientInfo:this._clientInfo}},VP);if(r===void 0)throw new Error(`Server sent invalid initialize result: ${r}`);if(!iK.includes(r.protocolVersion))throw new Error(`Server's protocol version is not supported: ${r.protocolVersion}`);this._serverCapabilities=r.capabilities,this._serverVersion=r.serverInfo,await this.notification({method:"notifications/initialized"})}catch(r){throw this.close(),r}}getServerCapabilities(){return this._serverCapabilities}getServerVersion(){return this._serverVersion}assertCapabilityForMethod(t){switch(t){case"logging/setLevel":if(!this._serverCapabilities?.logging)throw new Error(`Server does not support logging (required for ${t})`);break;case"prompts/get":case"prompts/list":if(!this._serverCapabilities?.prompts)throw new Error(`Server does not support prompts (required for ${t})`);break;case"resources/list":case"resources/templates/list":case"resources/read":case"resources/subscribe":case"resources/unsubscribe":if(!this._serverCapabilities?.resources)throw new Error(`Server does not support resources (required for ${t})`);if(t==="resources/subscribe"&&!this._serverCapabilities.resources.subscribe)throw new Error(`Server does not support resource subscriptions (required for ${t})`);break;case"tools/call":case"tools/list":if(!this._serverCapabilities?.tools)throw new Error(`Server does not support tools (required for ${t})`);break;case"completion/complete":if(!this._serverCapabilities?.prompts)throw new Error(`Server does not support prompts (required for ${t})`);break;case"initialize":break;case"ping":break}}assertNotificationCapability(t){switch(t){case"notifications/roots/list_changed":if(!this._capabilities.roots?.listChanged)throw new Error(`Client does not support roots list changed notifications (required for ${t})`);break;case"notifications/initialized":break;case"notifications/cancelled":break;case"notifications/progress":break}}assertRequestHandlerCapability(t){switch(t){case"sampling/createMessage":if(!this._capabilities.sampling)throw new Error(`Client does not support sampling capability (required for ${t})`);break;case"roots/list":if(!this._capabilities.roots)throw new Error(`Client does not support roots capability (required for ${t})`);break;case"ping":break}}async ping(t){return this.request({method:"ping"},ip,t)}async complete(t,r){return this.request({method:"completion/complete",params:t},zP,r)}async setLoggingLevel(t,r){return this.request({method:"logging/setLevel",params:{level:t}},ip,r)}async getPrompt(t,r){return this.request({method:"prompts/get",params:t},YP,r)}async listPrompts(t,r){return this.request({method:"prompts/list",params:t},$P,r)}async listResources(t,r){return this.request({method:"resources/list",params:t},HP,r)}async listResourceTemplates(t,r){return this.request({method:"resources/templates/list",params:t},WP,r)}async readResource(t,r){return this.request({method:"resources/read",params:t},GP,r)}async subscribeResource(t,r){return this.request({method:"resources/subscribe",params:t},ip,r)}async unsubscribeResource(t,r){return this.request({method:"resources/unsubscribe",params:t},ip,r)}async callTool(t,r=bm,n){return this.request({method:"tools/call",params:t},r,n)}async listTools(t,r){return this.request({method:"tools/list",params:t},KP,r)}async sendRootsListChanged(){return this.notification({method:"notifications/roots/list_changed"})}};var pK=require("child_process"),tE=V(require("process"));var aS=class{_buffer;append(t){this._buffer=this._buffer?Buffer.concat([this._buffer,t]):t}readMessage(){if(!this._buffer)return null;let t=this._buffer.indexOf(`
`);if(t===-1)return null;let r=this._buffer.toString("utf8",0,t);return this._buffer=this._buffer.subarray(t+1),cQe(r)}clear(){this._buffer=void 0}};function cQe(e){return aK.parse(JSON.parse(e))}function gK(e){return JSON.stringify(e)+`
`}var uQe=tE.default.platform==="win32"?["APPDATA","HOMEDRIVE","HOMEPATH","LOCALAPPDATA","PATH","PROCESSOR_ARCHITECTURE","SYSTEMDRIVE","SYSTEMROOT","TEMP","USERNAME","USERPROFILE"]:["HOME","LOGNAME","PATH","SHELL","TERM","USER"];function JP(){let e={};for(let t of uQe){let r=tE.default.env[t];r!==void 0&&(r.startsWith("()")||(e[t]=r))}return e}var lS=class{_process;_abortController=new AbortController;_readBuffer=new aS;_serverParams;onclose;onerror;onmessage;constructor(t){this._serverParams=t}async start(){if(this._process)throw new Error("StdioClientTransport already started! If using Client class, note that connect() calls start() automatically.");return new Promise((t,r)=>{this._process=(0,pK.spawn)(this._serverParams.command,this._serverParams.args??[],{env:this._serverParams.env??JP(),stdio:["pipe","pipe",this._serverParams.stderr??"inherit"],shell:!1,signal:this._abortController.signal,windowsHide:tE.default.platform==="win32"&&dQe()}),this._process.on("error",n=>{if(n.name==="AbortError"){this.onclose?.();return}r(n),this.onerror?.(n)}),this._process.on("spawn",()=>{t()}),this._process.on("close",n=>{this._process=void 0,this.onclose?.()}),this._process.stdin?.on("error",n=>{this.onerror?.(n)}),this._process.stdout?.on("data",n=>{this._readBuffer.append(n),this.processReadBuffer()}),this._process.stdout?.on("error",n=>{this.onerror?.(n)})})}get stderr(){return this._process?.stderr??null}processReadBuffer(){for(;;)try{let t=this._readBuffer.readMessage();if(t===null)break;this.onmessage?.(t)}catch(t){this.onerror?.(t)}}async close(){this._abortController.abort(),this._process=void 0,this._readBuffer.clear()}send(t){return new Promise(r=>{if(!this._process?.stdin)throw new Error("Not connected");let n=gK(t);this._process.stdin.write(n)?r():this._process.stdin.once("drain",r)})}};function dQe(){return"type"in tE.default}var AK=V(vs());var Hn;(function(e){e.readFile="read-file",e.saveFile="save-file",e.editFile="edit-file",e.clarify="clarify",e.onboardingSubAgent="onboarding-sub-agent",e.launchProcess="launch-process",e.killProcess="kill-process",e.readProcess="read-process",e.writeProcess="write-process",e.listProcesses="list-processes",e.waitProcess="wait-process",e.openBrowser="open-browser",e.strReplaceEditor="str-replace-editor"})(Hn||(Hn={}));var No;(function(e){e.remoteToolHost="remoteToolHost",e.localToolHost="localToolHost",e.sidecarToolHost="sidecarToolHost",e.mcpHost="mcpHost"})(No||(No={}));var mt;(function(e){e[e.Unsafe=0]="Unsafe",e[e.Safe=1]="Safe",e[e.Check=2]="Check"})(mt||(mt={}));var Vr=class{name;toolSafety;constructor(t,r){this.name=t,this.toolSafety=r}version=1},Oi;(function(e){e[e.Unknown=0]="Unknown",e[e.WebSearch=1]="WebSearch",e[e.GitHubApi=8]="GitHubApi",e[e.Linear=12]="Linear",e[e.Jira=13]="Jira",e[e.Confluence=14]="Confluence",e[e.Notion=15]="Notion",e[e.Supabase=16]="Supabase"})(Oi||(Oi={}));var _m;(function(e){e[e.UnknownStatus=0]="UnknownStatus",e[e.Available=1]="Available",e[e.UserConfigRequired=2]="UserConfigRequired"})(_m||(_m={}));var mK=require("child_process"),nE=class e{_config;_onStartupError;_client=void 0;_initializingPromise;_closingPromise=void 0;_cancelledByUser=!1;_toolDefinitions=void 0;_runningTool=void 0;_serverName;_stdErrGenerator=void 0;static maxTimeoutMs=2147483647;constructor(t,r=void 0,n){this._config=t,this._onStartupError=n,this._client=new oS({name:"augment-mcp-client",version:"1.0.0"},{capabilities:{}}),this.validateConfig(t),this._serverName=t.name&&t.name.length>0?this.sanitizeServerName(t.name):this.extractServerName(t.command),this._initializingPromise=(async()=>{if(await r,this._closingPromise!==void 0)throw new Error("Client is closing");if(this._client===void 0)throw new Error("Client is undefined");let i=this._config.command,s=this._config.args||[];this._config.useShellInterpolation&&(process.platform==="win32"?(s=["/c",i],i="cmd.exe"):(s=["-c",i],i="/bin/sh"));let o=new jP({command:i,args:s,env:{...JP(),...this._config.env},stderr:"pipe"});this._stdErrGenerator=o,await this._client.connect(o);let a=await this._client.listTools();this._toolDefinitions=a?.tools.map(l=>{let c=this.createNamespacedToolName(l.name);return{definition:{name:c,description:l.description??"",input_schema_json:JSON.stringify(l.inputSchema),tool_safety:mt.Unsafe},identifier:{hostName:No.mcpHost,toolId:c},isConfigured:!0,enabled:!0,toolSafety:mt.Unsafe}})??[]})().catch(i=>{let s;this._client!==void 0&&this._stdErrGenerator!==void 0&&(s=this._stdErrGenerator.capturedStderr),this._onStartupError({command:this._config.command,args:this._config.args,error:i instanceof Error?i.message:String(i),...s!==void 0&&{stderr:s}})}).finally(()=>{this._stdErrGenerator?.stopCapturing()})}isRequestActive(t,r){return this._runningTool?.requestId===t&&this._runningTool?.toolUseId===r}close(t=!1){return this._closingPromise===void 0&&(this._cancelledByUser=t,this._closingPromise=(async()=>{let r=this._stdErrGenerator?._process?.pid;if(this._config.useShellInterpolation&&(process.platform==="linux"||process.platform==="darwin")&&r)try{(0,mK.execSync)(`pkill -P ${r}`)}catch{}await(await this.getClient()).close()})()),this._closingPromise}closeAllToolProcesses(){return Promise.resolve()}async getToolDefinitions(){return await this.getClient(),this._toolDefinitions===void 0?[]:this._toolDefinitions}getAllToolDefinitions(t=!0){return this.getToolDefinitions()}getTool(t){}getName(){return No.mcpHost}async callTool(t,r,n,i,s){let o=await this.getClient();if(this._closingPromise!==void 0)return{isError:!0,text:"MCP client is closing"};this._runningTool={requestId:t,toolUseId:r};let a=this.extractOriginalToolName(n),l;try{let f;this._config.timeoutMs&&(f={timeout:this._config.timeoutMs}),l=await o.callTool({name:a,arguments:i},bm,f)}catch(f){if(this._cancelledByUser)return{isError:!0,text:"Cancelled by user."};throw f}finally{this._runningTool=void 0}let c=typeof l.isError=="boolean"?l.isError:!1;if(!Array.isArray(l.content))throw new Error("Unexpected result format: content is not an array");let u=l.content.map(f=>!("text"in f)||typeof f.text!="string"?"":f.text).join("");return{isError:c,text:c&&u.length===0?"No result":u}}async checkToolCallSafe(t,r){return Promise.resolve(!1)}async getClient(){if(await this._initializingPromise,this._client===void 0)throw new Error("Client is undefined");return this._client}validateConfig(t){if(t?.timeoutMs!==void 0&&t?.timeoutMs>e.maxTimeoutMs)throw new Error(`Timeout is too large: ${t.timeoutMs}, max is ${e.maxTimeoutMs}.`)}sanitizeServerName(t){return t.replace(/[^a-zA-Z0-9_-]/g,"_")}extractServerName(t){let n=t.split(/\s+/)[0].split(/[/\\]/).pop()||"mcp";return this.sanitizeServerName(n)}_toolNameMap=new Map;createNamespacedToolName(t){let r=(0,AK.truncate)(`${t}_${this._serverName}`,{length:64,omission:""});return this._toolNameMap.set(r,t),r}extractOriginalToolName(t){let r=this._toolNameMap.get(t);if(r)return r;let n=`_${this._serverName}`;return t.endsWith(n)?t.substring(0,t.length-n.length):t}factory(t){return new e(this._config,t,this._onStartupError)}};var jP=class extends lS{_capturedStdErr=[];_capturing=!0;async start(){await super.start();let t=this.stderr;t&&t.on("data",r=>{this._capturing&&this._capturedStdErr.push(r.toString())})}get capturedStderr(){return this._capturedStdErr.join("")}stopCapturing(){this._capturing=!1}};function yK(e){return Object.keys(e).map(t=>Number.parseInt(t,10)).filter(t=>!Number.isNaN(t))}var CK=require("child_process"),vK=require("util");async function wm(e,t){let r=(0,vK.promisify)(CK.exec);try{let{stdout:n}=await r(e,t);return n.trim()}catch{return}}var cS=class{toolId=Oi.GitHubApi;constructor(){}async transform(t){let r=await this.getGitInfo();return r?{...t,description:t.description+`

`+r}:t}async getGitInfo(){let t=await Li().getCwd();if(!t)return;let r={timeout:1e3,cwd:t};try{let n=await wm("git rev-parse --show-toplevel",r);if(!n)return;let i={timeout:1e3,cwd:n},[s,o,a,l]=await Promise.all([wm("git config --get remote.origin.url",i),wm("git rev-parse --abbrev-ref HEAD",i),wm("git rev-parse --abbrev-ref origin/HEAD",i),wm("git config --get user.email",i)]),c=a?.split("/").pop(),u=["Local Git Repository Information:"];return n&&u.push(`- Repository Root: ${n}`),s&&u.push(`- Remote URL: ${s}`),o&&u.push(`- Current Branch: ${o}`),c&&u.push(`- Default Branch: ${c}`),l&&u.push(`- Git User Email: ${l}`),u.push("REPOSITORY SCOPE:"),u.push("All queries MUST be limited to this repository only, unless explicitly requested otherwise. Always indicate in text outside of the tool use that you are limiting to this repo if you are doing so."),u.join(`
`)+`
`}catch{return}}};var uS=class e{_remoteInfoSource;_abortController=void 0;_toolMap=new Map;_logger=Mr("RemoteToolHost");_transformationMap;_cachedToolDefinitions=null;_lastCacheUpdateTime=0;_cacheExpirationMs=60*60*1e3;constructor(t){this._remoteInfoSource=t;let r=new cS;this._transformationMap=new Map([[r.toolId,r]])}async getToolDefinitions(t=!0){let r=(await this._getToolDefinitions(t)).filter(n=>n.isConfigured);return this._toolMap.clear(),r.forEach(n=>{this._toolMap.set(n.identifier.toolId,n)}),r}async getAllToolDefinitions(t=!0){return await this._getToolDefinitions(t)}getTool(t){}getName(){return No.remoteToolHost}async _getToolDefinitions(t=!0){if(t&&this._cachedToolDefinitions!==null&&Date.now()-this._lastCacheUpdateTime<this._cacheExpirationMs)return this._cachedToolDefinitions;this._logger.debug("Fetching remote tool definitions from backend");try{let r=yK(Oi),n=await this._remoteInfoSource.retrieveRemoteTools(r),i=n.filter(c=>c.availabilityStatus===_m.UserConfigRequired).map(c=>c.remoteToolId),s=await this._remoteInfoSource.filterToolsWithExtraInput(i),o=c=>c.availabilityStatus===_m.Available?!0:c.availabilityStatus===_m.UserConfigRequired?s.has(c.remoteToolId):!1,l=(await Promise.all(n.map(async c=>{let u=this._transformationMap.get(c.remoteToolId);if(u){this._logger.debug(`Applying transformation for ${c.remoteToolId}`);let f=await u.transform(c.toolDefinition);return{...c,toolDefinition:f}}return c}))).map(c=>({definition:c.toolDefinition,identifier:{hostName:No.remoteToolHost,toolId:c.remoteToolId},isConfigured:o(c),enabled:!0,toolSafety:c.toolSafety,oauthUrl:c.oauthUrl}));return this._cachedToolDefinitions=l,this._lastCacheUpdateTime=Date.now(),l}catch(r){return this._logger.error("Failed to list remote tools",r),this._cachedToolDefinitions!==null?(this._logger.info("Using expired cache due to error fetching remote tools"),this._cachedToolDefinitions):[]}}findToolIdByName(t){for(let[r,n]of this._toolMap.entries())if(n.definition.name.toString()===t)return r;return Oi.Unknown}async callTool(t,r,n,i,s){try{let o=this._abortController=new AbortController,a=this.findToolIdByName(n);if(!this._toolMap.get(a))return this._logger.error(`Tool not found: ${n}`),{text:`Tool ${n} not found.`,isError:!0};let c=ao(),u=await this._remoteInfoSource.runRemoteTool(c,n,JSON.stringify(i),a,o.signal);return u.status!==iE.ExecutionSuccess&&this._logger.error(`Failed to run remote tool ${n}: ${iE[u.status]}`),{text:u.toolOutput,isError:u.status!==iE.ExecutionSuccess,requestId:c}}catch(o){return{text:`Failed to run remote tool ${n} - ${o instanceof Error?o.message:o}`,isError:!0}}finally{this._abortController=void 0}}checkToolCallSafe(t,r){let n=this.findToolIdByName(t),i=this._toolMap.get(n);return i?.toolSafety===mt.Check?ol().checkToolSafety(n,JSON.stringify(r)):Promise.resolve(i?.toolSafety===mt.Safe)}isRequestActive(t,r){return this._abortController!==void 0}close(t=!1){return this._abortController?.abort(),Promise.resolve()}closeAllToolProcesses(){return Promise.resolve()}factory(t){return new e(this._remoteInfoSource)}},iE;(function(e){e[e.ExecutionUnknownStatus=0]="ExecutionUnknownStatus",e[e.ExecutionSuccess=1]="ExecutionSuccess",e[e.NotFound=2]="NotFound",e[e.InvalidInput=3]="InvalidInput",e[e.ExecutionError=4]="ExecutionError",e[e.NotAvailable=5]="NotAvailable",e[e.AuthenticationError=6]="AuthenticationError"})(iE||(iE={}));var Im=class{_tools;hostName;_unsupportedTools;_runningTool=void 0;_abortController=void 0;constructor(t,r,n){this._tools=t,this.hostName=r,this._unsupportedTools=n}getToolDefinitions(){return Promise.resolve(this._tools.filter(t=>!this._unsupportedTools?.has(t.name)).map(t=>({definition:{name:t.name,description:t.description,input_schema_json:t.inputSchemaJson,tool_safety:t.toolSafety},identifier:{hostName:this.hostName,toolId:t.name},isConfigured:!0,enabled:!0,toolSafety:t.toolSafety})))}getAllToolDefinitions(t=!0){return this.getToolDefinitions()}getTool(t){return this._tools.find(r=>r.name===t)}getName(){return this.hostName}async callTool(t,r,n,i,s){let o=this._tools.find(a=>a.name.toString()===n);if(o===void 0)return{isError:!0,text:`Tool ${n} not found.`};this._runningTool={requestId:t,toolUseId:r,tool:o};try{let a=this._abortController=new AbortController;return await o.call(i,s,a.signal)}finally{this._runningTool=void 0,this._abortController=void 0}}async checkToolCallSafe(t,r){let n=this._tools.find(i=>i.name===t);return n===void 0?Promise.resolve(!1):n.checkToolCallSafe(r)}isRequestActive(t,r){return this._runningTool?.requestId===t&&this._runningTool?.toolUseId===r}close(t=!1){return this._abortController?.abort(),Promise.resolve()}closeAllToolProcesses(){return Promise.resolve()}};function ac(e,t,r=!1){let n=[...e];return n.length<=t?e:r?t<=3?"...":"..."+n.slice(3-t).join(""):n.slice(0,Math.max(t-3,0)).join("")+"..."}function dS(e,t){if(e.length<=t||e.length===0)return e;let r=e.split(`
`),i="... additional lines truncated ..."+(r[0].endsWith("\r")?"\r":""),s="";if(r.length<2||r[0].length+r[r.length-1].length+i.length>t){let o=Math.floor(t/2);s=[e.slice(0,o),"<...>",e.slice(-o)].join("")}else{let o=[],a=[],l=i.length+1;for(let c=0;c<Math.floor(r.length/2);c++){let u=r[c],f=r[r.length-1-c],p=u.length+f.length+2;if(l+p>t)break;l+=p,o.push(u),a.push(f)}o.push(i),o.push(...a.reverse()),s=o.join(`
`)}return s}function Gt(e,t){return{text:e,isError:!1,requestId:t}}function ot(e,t){return{text:e,isError:!0,requestId:t}}var fS=class extends Vr{_maxRetrievalSize=2e4;constructor(){super(zi.codebaseRetrieval,mt.Safe)}description=`This tool is Augment's context engine, the world's best codebase context engine. It:
1. Takes in a natural language description of the code you are looking for;
2. Uses a proprietary retrieval/embedding model suite that produces the highest-quality recall of relevant code snippets from across the codebase;
3. Maintains a real-time index of the codebase, so the results are always up-to-date and reflects the current state of the codebase;
4. Can retrieve across different programming languages;
5. Only reflects the current state of the codebase on the disk, and has no information on version control or code history.`;inputSchemaJson=JSON.stringify({type:"object",properties:{information_request:{type:"string",description:"A description of the information you need."}},required:["information_request"]});version=2;checkToolCallSafe(t){return!0}async call(t,r,n){let i=ao();try{let s=t.information_request,o=await ol().agentCodebaseRetrieval(i,s,r,this._maxRetrievalSize,n),a=ac(o.formattedRetrieval,this._maxRetrievalSize);return Gt(a,i)}catch(s){return ot(`Failed to retrieve codebase information: ${s instanceof Error?s.message:String(s)}`,i)}}};var hS=class extends Vr{_checkpointManager;constructor(t){super(zi.removeFiles,mt.Safe),this._checkpointManager=t}description="Remove files. ONLY use this tool to delete files in the user's workspace. This is the only safe tool to delete files in a way that the user can undo the change. Do NOT use the shell or launch-process tools to remove files.";inputSchemaJson=JSON.stringify({type:"object",properties:{file_paths:{type:"array",description:"The paths of the files to remove.",items:{type:"string"}}},required:["file_paths"]});checkToolCallSafe(t){return!0}async call(t,r,n){let i=t.file_paths,s=0,o;try{for(let a of i){let l=await Li().readFile(a);if(l===void 0||l.contents===void 0||l.filepath===void 0){o=`Cannot read file: ${a}`;break}let c=l.filepath,u=l.contents,f=new pn(c,u,void 0,{}),p=r.at(-1)?.request_id??ao(),g=this._checkpointManager.currentConversationId??"";try{await this._checkpointManager.addCheckpoint({conversationId:g,path:c},{sourceToolCallRequestId:p,timestamp:Date.now(),document:f,conversationId:g}),s++}catch(A){o=`Failed to delete file ${a}: ${A instanceof Error?A.message:String(A)}`;break}}}catch(a){o=`Failed to remove file(s): ${a instanceof Error?a.message:String(a)}`}return s===i.length&&o===void 0?Gt(`File(s) removed: ${i.slice(0,s).join(", ")}`):ot(`Removed file(s) ${i.slice(0,s).join(", ")} but failed to remove file(s): ${i.slice(s).join(", ")}: ${o??""}`)}};var uz=require("util"),dz=require("child_process");function NK(e){return typeof e>"u"||e===null}function fQe(e){return typeof e=="object"&&e!==null}function hQe(e){return Array.isArray(e)?e:NK(e)?[]:[e]}function gQe(e,t){var r,n,i,s;if(t)for(s=Object.keys(t),r=0,n=s.length;r<n;r+=1)i=s[r],e[i]=t[i];return e}function pQe(e,t){var r="",n;for(n=0;n<t;n+=1)r+=e;return r}function AQe(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}var mQe=NK,yQe=fQe,CQe=hQe,vQe=pQe,EQe=AQe,bQe=gQe,qi={isNothing:mQe,isObject:yQe,toArray:CQe,repeat:vQe,isNegativeZero:EQe,extend:bQe};function PK(e,t){var r="",n=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(r+='in "'+e.mark.name+'" '),r+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(r+=`

`+e.mark.snippet),n+" "+r):n}function oE(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=PK(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}oE.prototype=Object.create(Error.prototype);oE.prototype.constructor=oE;oE.prototype.toString=function(t){return this.name+": "+PK(this,t)};var Po=oE;function ZP(e,t,r,n,i){var s="",o="",a=Math.floor(i/2)-1;return n-t>a&&(s=" ... ",t=n-a+s.length),r-n>a&&(o=" ...",r=n+a-o.length),{str:s+e.slice(t,r).replace(/\t/g,"\u2192")+o,pos:n-t+s.length}}function XP(e,t){return qi.repeat(" ",t-e.length)+e}function xQe(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],s,o=-1;s=r.exec(e.buffer);)i.push(s.index),n.push(s.index+s[0].length),e.position<=s.index&&o<0&&(o=n.length-2);o<0&&(o=n.length-1);var a="",l,c,u=Math.min(e.line+t.linesAfter,i.length).toString().length,f=t.maxLength-(t.indent+u+3);for(l=1;l<=t.linesBefore&&!(o-l<0);l++)c=ZP(e.buffer,n[o-l],i[o-l],e.position-(n[o]-n[o-l]),f),a=qi.repeat(" ",t.indent)+XP((e.line-l+1).toString(),u)+" | "+c.str+`
`+a;for(c=ZP(e.buffer,n[o],i[o],e.position,f),a+=qi.repeat(" ",t.indent)+XP((e.line+1).toString(),u)+" | "+c.str+`
`,a+=qi.repeat("-",t.indent+u+3+c.pos)+`^
`,l=1;l<=t.linesAfter&&!(o+l>=i.length);l++)c=ZP(e.buffer,n[o+l],i[o+l],e.position-(n[o]-n[o+l]),f),a+=qi.repeat(" ",t.indent)+XP((e.line+l+1).toString(),u)+" | "+c.str+`
`;return a.replace(/\n$/,"")}var _Qe=xQe,wQe=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],IQe=["scalar","sequence","mapping"];function SQe(e){var t={};return e!==null&&Object.keys(e).forEach(function(r){e[r].forEach(function(n){t[String(n)]=r})}),t}function BQe(e,t){if(t=t||{},Object.keys(t).forEach(function(r){if(wQe.indexOf(r)===-1)throw new Po('Unknown option "'+r+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(r){return r},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=SQe(t.styleAliases||null),IQe.indexOf(this.kind)===-1)throw new Po('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var Us=BQe;function EK(e,t){var r=[];return e[t].forEach(function(n){var i=r.length;r.forEach(function(s,o){s.tag===n.tag&&s.kind===n.kind&&s.multi===n.multi&&(i=o)}),r[i]=n}),r}function DQe(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,r;function n(i){i.multi?(e.multi[i.kind].push(i),e.multi.fallback.push(i)):e[i.kind][i.tag]=e.fallback[i.tag]=i}for(t=0,r=arguments.length;t<r;t+=1)arguments[t].forEach(n);return e}function tL(e){return this.extend(e)}tL.prototype.extend=function(t){var r=[],n=[];if(t instanceof Us)n.push(t);else if(Array.isArray(t))n=n.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(r=r.concat(t.implicit)),t.explicit&&(n=n.concat(t.explicit));else throw new Po("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(s){if(!(s instanceof Us))throw new Po("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new Po("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new Po("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(s){if(!(s instanceof Us))throw new Po("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(tL.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=EK(i,"implicit"),i.compiledExplicit=EK(i,"explicit"),i.compiledTypeMap=DQe(i.compiledImplicit,i.compiledExplicit),i};var TQe=tL,RQe=new Us("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),kQe=new Us("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),FQe=new Us("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),MQe=new TQe({explicit:[RQe,kQe,FQe]});function QQe(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}function NQe(){return null}function PQe(e){return e===null}var LQe=new Us("tag:yaml.org,2002:null",{kind:"scalar",resolve:QQe,construct:NQe,predicate:PQe,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function UQe(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}function OQe(e){return e==="true"||e==="True"||e==="TRUE"}function qQe(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var VQe=new Us("tag:yaml.org,2002:bool",{kind:"scalar",resolve:UQe,construct:OQe,predicate:qQe,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function HQe(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function WQe(e){return 48<=e&&e<=55}function GQe(e){return 48<=e&&e<=57}function $Qe(e){if(e===null)return!1;var t=e.length,r=0,n=!1,i;if(!t)return!1;if(i=e[r],(i==="-"||i==="+")&&(i=e[++r]),i==="0"){if(r+1===t)return!0;if(i=e[++r],i==="b"){for(r++;r<t;r++)if(i=e[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<t;r++)if(i=e[r],i!=="_"){if(!HQe(e.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<t;r++)if(i=e[r],i!=="_"){if(!WQe(e.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<t;r++)if(i=e[r],i!=="_"){if(!GQe(e.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}function YQe(e){var t=e,r=1,n;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),n=t[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),t=t.slice(1),n=t[0]),t==="0")return 0;if(n==="0"){if(t[1]==="b")return r*parseInt(t.slice(2),2);if(t[1]==="x")return r*parseInt(t.slice(2),16);if(t[1]==="o")return r*parseInt(t.slice(2),8)}return r*parseInt(t,10)}function KQe(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!qi.isNegativeZero(e)}var zQe=new Us("tag:yaml.org,2002:int",{kind:"scalar",resolve:$Qe,construct:YQe,predicate:KQe,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),JQe=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function jQe(e){return!(e===null||!JQe.test(e)||e[e.length-1]==="_")}function ZQe(e){var t,r;return t=e.replace(/_/g,"").toLowerCase(),r=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:r*parseFloat(t,10)}var XQe=/^[-+]?[0-9]+e/;function eNe(e,t){var r;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(qi.isNegativeZero(e))return"-0.0";return r=e.toString(10),XQe.test(r)?r.replace("e",".e"):r}function tNe(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||qi.isNegativeZero(e))}var rNe=new Us("tag:yaml.org,2002:float",{kind:"scalar",resolve:jQe,construct:ZQe,predicate:tNe,represent:eNe,defaultStyle:"lowercase"}),nNe=MQe.extend({implicit:[LQe,VQe,zQe,rNe]}),iNe=nNe,LK=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),UK=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function sNe(e){return e===null?!1:LK.exec(e)!==null||UK.exec(e)!==null}function oNe(e){var t,r,n,i,s,o,a,l=0,c=null,u,f,p;if(t=LK.exec(e),t===null&&(t=UK.exec(e)),t===null)throw new Error("Date resolve error");if(r=+t[1],n=+t[2]-1,i=+t[3],!t[4])return new Date(Date.UTC(r,n,i));if(s=+t[4],o=+t[5],a=+t[6],t[7]){for(l=t[7].slice(0,3);l.length<3;)l+="0";l=+l}return t[9]&&(u=+t[10],f=+(t[11]||0),c=(u*60+f)*6e4,t[9]==="-"&&(c=-c)),p=new Date(Date.UTC(r,n,i,s,o,a,l)),c&&p.setTime(p.getTime()-c),p}function aNe(e){return e.toISOString()}var lNe=new Us("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:sNe,construct:oNe,instanceOf:Date,represent:aNe});function cNe(e){return e==="<<"||e===null}var uNe=new Us("tag:yaml.org,2002:merge",{kind:"scalar",resolve:cNe}),oL=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function dNe(e){if(e===null)return!1;var t,r,n=0,i=e.length,s=oL;for(r=0;r<i;r++)if(t=s.indexOf(e.charAt(r)),!(t>64)){if(t<0)return!1;n+=6}return n%8===0}function fNe(e){var t,r,n=e.replace(/[\r\n=]/g,""),i=n.length,s=oL,o=0,a=[];for(t=0;t<i;t++)t%4===0&&t&&(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)),o=o<<6|s.indexOf(n.charAt(t));return r=i%4*6,r===0?(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)):r===18?(a.push(o>>10&255),a.push(o>>2&255)):r===12&&a.push(o>>4&255),new Uint8Array(a)}function hNe(e){var t="",r=0,n,i,s=e.length,o=oL;for(n=0;n<s;n++)n%3===0&&n&&(t+=o[r>>18&63],t+=o[r>>12&63],t+=o[r>>6&63],t+=o[r&63]),r=(r<<8)+e[n];return i=s%3,i===0?(t+=o[r>>18&63],t+=o[r>>12&63],t+=o[r>>6&63],t+=o[r&63]):i===2?(t+=o[r>>10&63],t+=o[r>>4&63],t+=o[r<<2&63],t+=o[64]):i===1&&(t+=o[r>>2&63],t+=o[r<<4&63],t+=o[64],t+=o[64]),t}function gNe(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}var pNe=new Us("tag:yaml.org,2002:binary",{kind:"scalar",resolve:dNe,construct:fNe,predicate:gNe,represent:hNe}),ANe=Object.prototype.hasOwnProperty,mNe=Object.prototype.toString;function yNe(e){if(e===null)return!0;var t=[],r,n,i,s,o,a=e;for(r=0,n=a.length;r<n;r+=1){if(i=a[r],o=!1,mNe.call(i)!=="[object Object]")return!1;for(s in i)if(ANe.call(i,s))if(!o)o=!0;else return!1;if(!o)return!1;if(t.indexOf(s)===-1)t.push(s);else return!1}return!0}function CNe(e){return e!==null?e:[]}var vNe=new Us("tag:yaml.org,2002:omap",{kind:"sequence",resolve:yNe,construct:CNe}),ENe=Object.prototype.toString;function bNe(e){if(e===null)return!0;var t,r,n,i,s,o=e;for(s=new Array(o.length),t=0,r=o.length;t<r;t+=1){if(n=o[t],ENe.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;s[t]=[i[0],n[i[0]]]}return!0}function xNe(e){if(e===null)return[];var t,r,n,i,s,o=e;for(s=new Array(o.length),t=0,r=o.length;t<r;t+=1)n=o[t],i=Object.keys(n),s[t]=[i[0],n[i[0]]];return s}var _Ne=new Us("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:bNe,construct:xNe}),wNe=Object.prototype.hasOwnProperty;function INe(e){if(e===null)return!0;var t,r=e;for(t in r)if(wNe.call(r,t)&&r[t]!==null)return!1;return!0}function SNe(e){return e!==null?e:{}}var BNe=new Us("tag:yaml.org,2002:set",{kind:"mapping",resolve:INe,construct:SNe}),OK=iNe.extend({implicit:[lNe,uNe],explicit:[pNe,vNe,_Ne,BNe]}),Kf=Object.prototype.hasOwnProperty,gS=1,qK=2,VK=3,pS=4,eL=1,DNe=2,bK=3,TNe=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,RNe=/[\x85\u2028\u2029]/,kNe=/[,\[\]\{\}]/,HK=/^(?:!|!!|![a-z\-]+!)$/i,WK=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function xK(e){return Object.prototype.toString.call(e)}function tu(e){return e===10||e===13}function op(e){return e===9||e===32}function Lo(e){return e===9||e===32||e===10||e===13}function Bm(e){return e===44||e===91||e===93||e===123||e===125}function FNe(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}function MNe(e){return e===120?2:e===117?4:e===85?8:0}function QNe(e){return 48<=e&&e<=57?e-48:-1}function _K(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"\x85":e===95?"\xA0":e===76?"\u2028":e===80?"\u2029":""}function NNe(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}var GK=new Array(256),$K=new Array(256);for(sp=0;sp<256;sp++)GK[sp]=_K(sp)?1:0,$K[sp]=_K(sp);var sp;function PNe(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||OK,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function YK(e,t){var r={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return r.snippet=_Qe(r),new Po(t,r)}function Xe(e,t){throw YK(e,t)}function AS(e,t){e.onWarning&&e.onWarning.call(null,YK(e,t))}var wK={YAML:function(t,r,n){var i,s,o;t.version!==null&&Xe(t,"duplication of %YAML directive"),n.length!==1&&Xe(t,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&Xe(t,"ill-formed argument of the YAML directive"),s=parseInt(i[1],10),o=parseInt(i[2],10),s!==1&&Xe(t,"unacceptable YAML version of the document"),t.version=n[0],t.checkLineBreaks=o<2,o!==1&&o!==2&&AS(t,"unsupported YAML version of the document")},TAG:function(t,r,n){var i,s;n.length!==2&&Xe(t,"TAG directive accepts exactly two arguments"),i=n[0],s=n[1],HK.test(i)||Xe(t,"ill-formed tag handle (first argument) of the TAG directive"),Kf.call(t.tagMap,i)&&Xe(t,'there is a previously declared suffix for "'+i+'" tag handle'),WK.test(s)||Xe(t,"ill-formed tag prefix (second argument) of the TAG directive");try{s=decodeURIComponent(s)}catch{Xe(t,"tag prefix is malformed: "+s)}t.tagMap[i]=s}};function Yf(e,t,r,n){var i,s,o,a;if(t<r){if(a=e.input.slice(t,r),n)for(i=0,s=a.length;i<s;i+=1)o=a.charCodeAt(i),o===9||32<=o&&o<=1114111||Xe(e,"expected valid JSON character");else TNe.test(a)&&Xe(e,"the stream contains non-printable characters");e.result+=a}}function IK(e,t,r,n){var i,s,o,a;for(qi.isObject(r)||Xe(e,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),o=0,a=i.length;o<a;o+=1)s=i[o],Kf.call(t,s)||(t[s]=r[s],n[s]=!0)}function Dm(e,t,r,n,i,s,o,a,l){var c,u;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),c=0,u=i.length;c<u;c+=1)Array.isArray(i[c])&&Xe(e,"nested arrays are not supported inside keys"),typeof i=="object"&&xK(i[c])==="[object Object]"&&(i[c]="[object Object]");if(typeof i=="object"&&xK(i)==="[object Object]"&&(i="[object Object]"),i=String(i),t===null&&(t={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(s))for(c=0,u=s.length;c<u;c+=1)IK(e,t,s[c],r);else IK(e,t,s,r);else!e.json&&!Kf.call(r,i)&&Kf.call(t,i)&&(e.line=o||e.line,e.lineStart=a||e.lineStart,e.position=l||e.position,Xe(e,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(t,i,{configurable:!0,enumerable:!0,writable:!0,value:s}):t[i]=s,delete r[i];return t}function aL(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):Xe(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function Si(e,t,r){for(var n=0,i=e.input.charCodeAt(e.position);i!==0;){for(;op(i);)i===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),i=e.input.charCodeAt(++e.position);if(t&&i===35)do i=e.input.charCodeAt(++e.position);while(i!==10&&i!==13&&i!==0);if(tu(i))for(aL(e),i=e.input.charCodeAt(e.position),n++,e.lineIndent=0;i===32;)e.lineIndent++,i=e.input.charCodeAt(++e.position);else break}return r!==-1&&n!==0&&e.lineIndent<r&&AS(e,"deficient indentation"),n}function CS(e){var t=e.position,r;return r=e.input.charCodeAt(t),!!((r===45||r===46)&&r===e.input.charCodeAt(t+1)&&r===e.input.charCodeAt(t+2)&&(t+=3,r=e.input.charCodeAt(t),r===0||Lo(r)))}function lL(e,t){t===1?e.result+=" ":t>1&&(e.result+=qi.repeat(`
`,t-1))}function LNe(e,t,r){var n,i,s,o,a,l,c,u,f=e.kind,p=e.result,g;if(g=e.input.charCodeAt(e.position),Lo(g)||Bm(g)||g===35||g===38||g===42||g===33||g===124||g===62||g===39||g===34||g===37||g===64||g===96||(g===63||g===45)&&(i=e.input.charCodeAt(e.position+1),Lo(i)||r&&Bm(i)))return!1;for(e.kind="scalar",e.result="",s=o=e.position,a=!1;g!==0;){if(g===58){if(i=e.input.charCodeAt(e.position+1),Lo(i)||r&&Bm(i))break}else if(g===35){if(n=e.input.charCodeAt(e.position-1),Lo(n))break}else{if(e.position===e.lineStart&&CS(e)||r&&Bm(g))break;if(tu(g))if(l=e.line,c=e.lineStart,u=e.lineIndent,Si(e,!1,-1),e.lineIndent>=t){a=!0,g=e.input.charCodeAt(e.position);continue}else{e.position=o,e.line=l,e.lineStart=c,e.lineIndent=u;break}}a&&(Yf(e,s,o,!1),lL(e,e.line-l),s=o=e.position,a=!1),op(g)||(o=e.position+1),g=e.input.charCodeAt(++e.position)}return Yf(e,s,o,!1),e.result?!0:(e.kind=f,e.result=p,!1)}function UNe(e,t){var r,n,i;if(r=e.input.charCodeAt(e.position),r!==39)return!1;for(e.kind="scalar",e.result="",e.position++,n=i=e.position;(r=e.input.charCodeAt(e.position))!==0;)if(r===39)if(Yf(e,n,e.position,!0),r=e.input.charCodeAt(++e.position),r===39)n=e.position,e.position++,i=e.position;else return!0;else tu(r)?(Yf(e,n,i,!0),lL(e,Si(e,!1,t)),n=i=e.position):e.position===e.lineStart&&CS(e)?Xe(e,"unexpected end of the document within a single quoted scalar"):(e.position++,i=e.position);Xe(e,"unexpected end of the stream within a single quoted scalar")}function ONe(e,t){var r,n,i,s,o,a;if(a=e.input.charCodeAt(e.position),a!==34)return!1;for(e.kind="scalar",e.result="",e.position++,r=n=e.position;(a=e.input.charCodeAt(e.position))!==0;){if(a===34)return Yf(e,r,e.position,!0),e.position++,!0;if(a===92){if(Yf(e,r,e.position,!0),a=e.input.charCodeAt(++e.position),tu(a))Si(e,!1,t);else if(a<256&&GK[a])e.result+=$K[a],e.position++;else if((o=MNe(a))>0){for(i=o,s=0;i>0;i--)a=e.input.charCodeAt(++e.position),(o=FNe(a))>=0?s=(s<<4)+o:Xe(e,"expected hexadecimal character");e.result+=NNe(s),e.position++}else Xe(e,"unknown escape sequence");r=n=e.position}else tu(a)?(Yf(e,r,n,!0),lL(e,Si(e,!1,t)),r=n=e.position):e.position===e.lineStart&&CS(e)?Xe(e,"unexpected end of the document within a double quoted scalar"):(e.position++,n=e.position)}Xe(e,"unexpected end of the stream within a double quoted scalar")}function qNe(e,t){var r=!0,n,i,s,o=e.tag,a,l=e.anchor,c,u,f,p,g,A=Object.create(null),y,C,v,b;if(b=e.input.charCodeAt(e.position),b===91)u=93,g=!1,a=[];else if(b===123)u=125,g=!0,a={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=a),b=e.input.charCodeAt(++e.position);b!==0;){if(Si(e,!0,t),b=e.input.charCodeAt(e.position),b===u)return e.position++,e.tag=o,e.anchor=l,e.kind=g?"mapping":"sequence",e.result=a,!0;r?b===44&&Xe(e,"expected the node content, but found ','"):Xe(e,"missed comma between flow collection entries"),C=y=v=null,f=p=!1,b===63&&(c=e.input.charCodeAt(e.position+1),Lo(c)&&(f=p=!0,e.position++,Si(e,!0,t))),n=e.line,i=e.lineStart,s=e.position,Tm(e,t,gS,!1,!0),C=e.tag,y=e.result,Si(e,!0,t),b=e.input.charCodeAt(e.position),(p||e.line===n)&&b===58&&(f=!0,b=e.input.charCodeAt(++e.position),Si(e,!0,t),Tm(e,t,gS,!1,!0),v=e.result),g?Dm(e,a,A,C,y,v,n,i,s):f?a.push(Dm(e,null,A,C,y,v,n,i,s)):a.push(y),Si(e,!0,t),b=e.input.charCodeAt(e.position),b===44?(r=!0,b=e.input.charCodeAt(++e.position)):r=!1}Xe(e,"unexpected end of the stream within a flow collection")}function VNe(e,t){var r,n,i=eL,s=!1,o=!1,a=t,l=0,c=!1,u,f;if(f=e.input.charCodeAt(e.position),f===124)n=!1;else if(f===62)n=!0;else return!1;for(e.kind="scalar",e.result="";f!==0;)if(f=e.input.charCodeAt(++e.position),f===43||f===45)eL===i?i=f===43?bK:DNe:Xe(e,"repeat of a chomping mode identifier");else if((u=QNe(f))>=0)u===0?Xe(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):o?Xe(e,"repeat of an indentation width identifier"):(a=t+u-1,o=!0);else break;if(op(f)){do f=e.input.charCodeAt(++e.position);while(op(f));if(f===35)do f=e.input.charCodeAt(++e.position);while(!tu(f)&&f!==0)}for(;f!==0;){for(aL(e),e.lineIndent=0,f=e.input.charCodeAt(e.position);(!o||e.lineIndent<a)&&f===32;)e.lineIndent++,f=e.input.charCodeAt(++e.position);if(!o&&e.lineIndent>a&&(a=e.lineIndent),tu(f)){l++;continue}if(e.lineIndent<a){i===bK?e.result+=qi.repeat(`
`,s?1+l:l):i===eL&&s&&(e.result+=`
`);break}for(n?op(f)?(c=!0,e.result+=qi.repeat(`
`,s?1+l:l)):c?(c=!1,e.result+=qi.repeat(`
`,l+1)):l===0?s&&(e.result+=" "):e.result+=qi.repeat(`
`,l):e.result+=qi.repeat(`
`,s?1+l:l),s=!0,o=!0,l=0,r=e.position;!tu(f)&&f!==0;)f=e.input.charCodeAt(++e.position);Yf(e,r,e.position,!1)}return!0}function SK(e,t){var r,n=e.tag,i=e.anchor,s=[],o,a=!1,l;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=s),l=e.input.charCodeAt(e.position);l!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,Xe(e,"tab characters must not be used in indentation")),!(l!==45||(o=e.input.charCodeAt(e.position+1),!Lo(o))));){if(a=!0,e.position++,Si(e,!0,-1)&&e.lineIndent<=t){s.push(null),l=e.input.charCodeAt(e.position);continue}if(r=e.line,Tm(e,t,VK,!1,!0),s.push(e.result),Si(e,!0,-1),l=e.input.charCodeAt(e.position),(e.line===r||e.lineIndent>t)&&l!==0)Xe(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return a?(e.tag=n,e.anchor=i,e.kind="sequence",e.result=s,!0):!1}function HNe(e,t,r){var n,i,s,o,a,l,c=e.tag,u=e.anchor,f={},p=Object.create(null),g=null,A=null,y=null,C=!1,v=!1,b;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=f),b=e.input.charCodeAt(e.position);b!==0;){if(!C&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,Xe(e,"tab characters must not be used in indentation")),n=e.input.charCodeAt(e.position+1),s=e.line,(b===63||b===58)&&Lo(n))b===63?(C&&(Dm(e,f,p,g,A,null,o,a,l),g=A=y=null),v=!0,C=!0,i=!0):C?(C=!1,i=!0):Xe(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,b=n;else{if(o=e.line,a=e.lineStart,l=e.position,!Tm(e,r,qK,!1,!0))break;if(e.line===s){for(b=e.input.charCodeAt(e.position);op(b);)b=e.input.charCodeAt(++e.position);if(b===58)b=e.input.charCodeAt(++e.position),Lo(b)||Xe(e,"a whitespace character is expected after the key-value separator within a block mapping"),C&&(Dm(e,f,p,g,A,null,o,a,l),g=A=y=null),v=!0,C=!1,i=!1,g=e.tag,A=e.result;else if(v)Xe(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=c,e.anchor=u,!0}else if(v)Xe(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=c,e.anchor=u,!0}if((e.line===s||e.lineIndent>t)&&(C&&(o=e.line,a=e.lineStart,l=e.position),Tm(e,t,pS,!0,i)&&(C?A=e.result:y=e.result),C||(Dm(e,f,p,g,A,y,o,a,l),g=A=y=null),Si(e,!0,-1),b=e.input.charCodeAt(e.position)),(e.line===s||e.lineIndent>t)&&b!==0)Xe(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return C&&Dm(e,f,p,g,A,null,o,a,l),v&&(e.tag=c,e.anchor=u,e.kind="mapping",e.result=f),v}function WNe(e){var t,r=!1,n=!1,i,s,o;if(o=e.input.charCodeAt(e.position),o!==33)return!1;if(e.tag!==null&&Xe(e,"duplication of a tag property"),o=e.input.charCodeAt(++e.position),o===60?(r=!0,o=e.input.charCodeAt(++e.position)):o===33?(n=!0,i="!!",o=e.input.charCodeAt(++e.position)):i="!",t=e.position,r){do o=e.input.charCodeAt(++e.position);while(o!==0&&o!==62);e.position<e.length?(s=e.input.slice(t,e.position),o=e.input.charCodeAt(++e.position)):Xe(e,"unexpected end of the stream within a verbatim tag")}else{for(;o!==0&&!Lo(o);)o===33&&(n?Xe(e,"tag suffix cannot contain exclamation marks"):(i=e.input.slice(t-1,e.position+1),HK.test(i)||Xe(e,"named tag handle cannot contain such characters"),n=!0,t=e.position+1)),o=e.input.charCodeAt(++e.position);s=e.input.slice(t,e.position),kNe.test(s)&&Xe(e,"tag suffix cannot contain flow indicator characters")}s&&!WK.test(s)&&Xe(e,"tag name cannot contain such characters: "+s);try{s=decodeURIComponent(s)}catch{Xe(e,"tag name is malformed: "+s)}return r?e.tag=s:Kf.call(e.tagMap,i)?e.tag=e.tagMap[i]+s:i==="!"?e.tag="!"+s:i==="!!"?e.tag="tag:yaml.org,2002:"+s:Xe(e,'undeclared tag handle "'+i+'"'),!0}function GNe(e){var t,r;if(r=e.input.charCodeAt(e.position),r!==38)return!1;for(e.anchor!==null&&Xe(e,"duplication of an anchor property"),r=e.input.charCodeAt(++e.position),t=e.position;r!==0&&!Lo(r)&&!Bm(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&Xe(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function $Ne(e){var t,r,n;if(n=e.input.charCodeAt(e.position),n!==42)return!1;for(n=e.input.charCodeAt(++e.position),t=e.position;n!==0&&!Lo(n)&&!Bm(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&Xe(e,"name of an alias node must contain at least one character"),r=e.input.slice(t,e.position),Kf.call(e.anchorMap,r)||Xe(e,'unidentified alias "'+r+'"'),e.result=e.anchorMap[r],Si(e,!0,-1),!0}function Tm(e,t,r,n,i){var s,o,a,l=1,c=!1,u=!1,f,p,g,A,y,C;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,s=o=a=pS===r||VK===r,n&&Si(e,!0,-1)&&(c=!0,e.lineIndent>t?l=1:e.lineIndent===t?l=0:e.lineIndent<t&&(l=-1)),l===1)for(;WNe(e)||GNe(e);)Si(e,!0,-1)?(c=!0,a=s,e.lineIndent>t?l=1:e.lineIndent===t?l=0:e.lineIndent<t&&(l=-1)):a=!1;if(a&&(a=c||i),(l===1||pS===r)&&(gS===r||qK===r?y=t:y=t+1,C=e.position-e.lineStart,l===1?a&&(SK(e,C)||HNe(e,C,y))||qNe(e,y)?u=!0:(o&&VNe(e,y)||UNe(e,y)||ONe(e,y)?u=!0:$Ne(e)?(u=!0,(e.tag!==null||e.anchor!==null)&&Xe(e,"alias node should not have any properties")):LNe(e,y,gS===r)&&(u=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):l===0&&(u=a&&SK(e,C))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&Xe(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),f=0,p=e.implicitTypes.length;f<p;f+=1)if(A=e.implicitTypes[f],A.resolve(e.result)){e.result=A.construct(e.result),e.tag=A.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(Kf.call(e.typeMap[e.kind||"fallback"],e.tag))A=e.typeMap[e.kind||"fallback"][e.tag];else for(A=null,g=e.typeMap.multi[e.kind||"fallback"],f=0,p=g.length;f<p;f+=1)if(e.tag.slice(0,g[f].tag.length)===g[f].tag){A=g[f];break}A||Xe(e,"unknown tag !<"+e.tag+">"),e.result!==null&&A.kind!==e.kind&&Xe(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+A.kind+'", not "'+e.kind+'"'),A.resolve(e.result,e.tag)?(e.result=A.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):Xe(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||u}function YNe(e){var t=e.position,r,n,i,s=!1,o;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(o=e.input.charCodeAt(e.position))!==0&&(Si(e,!0,-1),o=e.input.charCodeAt(e.position),!(e.lineIndent>0||o!==37));){for(s=!0,o=e.input.charCodeAt(++e.position),r=e.position;o!==0&&!Lo(o);)o=e.input.charCodeAt(++e.position);for(n=e.input.slice(r,e.position),i=[],n.length<1&&Xe(e,"directive name must not be less than one character in length");o!==0;){for(;op(o);)o=e.input.charCodeAt(++e.position);if(o===35){do o=e.input.charCodeAt(++e.position);while(o!==0&&!tu(o));break}if(tu(o))break;for(r=e.position;o!==0&&!Lo(o);)o=e.input.charCodeAt(++e.position);i.push(e.input.slice(r,e.position))}o!==0&&aL(e),Kf.call(wK,n)?wK[n](e,n,i):AS(e,'unknown document directive "'+n+'"')}if(Si(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,Si(e,!0,-1)):s&&Xe(e,"directives end mark is expected"),Tm(e,e.lineIndent-1,pS,!1,!0),Si(e,!0,-1),e.checkLineBreaks&&RNe.test(e.input.slice(t,e.position))&&AS(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&CS(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,Si(e,!0,-1));return}if(e.position<e.length-1)Xe(e,"end of the stream or a document separator is expected");else return}function KK(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var r=new PNe(e,t),n=e.indexOf("\0");for(n!==-1&&(r.position=n,Xe(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)YNe(r);return r.documents}function KNe(e,t,r){t!==null&&typeof t=="object"&&typeof r>"u"&&(r=t,t=null);var n=KK(e,r);if(typeof t!="function")return n;for(var i=0,s=n.length;i<s;i+=1)t(n[i])}function zNe(e,t){var r=KK(e,t);if(r.length!==0){if(r.length===1)return r[0];throw new Po("expected a single document in the stream, but found more")}}var JNe=KNe,jNe=zNe,zK={loadAll:JNe,load:jNe},JK=Object.prototype.toString,jK=Object.prototype.hasOwnProperty,cL=65279,ZNe=9,aE=10,XNe=13,e2e=32,t2e=33,r2e=34,rL=35,n2e=37,i2e=38,s2e=39,o2e=42,ZK=44,a2e=45,mS=58,l2e=61,c2e=62,u2e=63,d2e=64,XK=91,ez=93,f2e=96,tz=123,h2e=124,rz=125,Os={};Os[0]="\\0";Os[7]="\\a";Os[8]="\\b";Os[9]="\\t";Os[10]="\\n";Os[11]="\\v";Os[12]="\\f";Os[13]="\\r";Os[27]="\\e";Os[34]='\\"';Os[92]="\\\\";Os[133]="\\N";Os[160]="\\_";Os[8232]="\\L";Os[8233]="\\P";var g2e=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],p2e=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function A2e(e,t){var r,n,i,s,o,a,l;if(t===null)return{};for(r={},n=Object.keys(t),i=0,s=n.length;i<s;i+=1)o=n[i],a=String(t[o]),o.slice(0,2)==="!!"&&(o="tag:yaml.org,2002:"+o.slice(2)),l=e.compiledTypeMap.fallback[o],l&&jK.call(l.styleAliases,a)&&(a=l.styleAliases[a]),r[o]=a;return r}function m2e(e){var t,r,n;if(t=e.toString(16).toUpperCase(),e<=255)r="x",n=2;else if(e<=65535)r="u",n=4;else if(e<=4294967295)r="U",n=8;else throw new Po("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+qi.repeat("0",n-t.length)+t}var y2e=1,lE=2;function C2e(e){this.schema=e.schema||OK,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=qi.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=A2e(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?lE:y2e,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function BK(e,t){for(var r=qi.repeat(" ",t),n=0,i=-1,s="",o,a=e.length;n<a;)i=e.indexOf(`
`,n),i===-1?(o=e.slice(n),n=a):(o=e.slice(n,i+1),n=i+1),o.length&&o!==`
`&&(s+=r),s+=o;return s}function nL(e,t){return`
`+qi.repeat(" ",e.indent*t)}function v2e(e,t){var r,n,i;for(r=0,n=e.implicitTypes.length;r<n;r+=1)if(i=e.implicitTypes[r],i.resolve(t))return!0;return!1}function yS(e){return e===e2e||e===ZNe}function cE(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==cL||65536<=e&&e<=1114111}function DK(e){return cE(e)&&e!==cL&&e!==XNe&&e!==aE}function TK(e,t,r){var n=DK(e),i=n&&!yS(e);return(r?n:n&&e!==ZK&&e!==XK&&e!==ez&&e!==tz&&e!==rz)&&e!==rL&&!(t===mS&&!i)||DK(t)&&!yS(t)&&e===rL||t===mS&&i}function E2e(e){return cE(e)&&e!==cL&&!yS(e)&&e!==a2e&&e!==u2e&&e!==mS&&e!==ZK&&e!==XK&&e!==ez&&e!==tz&&e!==rz&&e!==rL&&e!==i2e&&e!==o2e&&e!==t2e&&e!==h2e&&e!==l2e&&e!==c2e&&e!==s2e&&e!==r2e&&e!==n2e&&e!==d2e&&e!==f2e}function b2e(e){return!yS(e)&&e!==mS}function sE(e,t){var r=e.charCodeAt(t),n;return r>=55296&&r<=56319&&t+1<e.length&&(n=e.charCodeAt(t+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}function nz(e){var t=/^\n* /;return t.test(e)}var iz=1,iL=2,sz=3,oz=4,Sm=5;function x2e(e,t,r,n,i,s,o,a){var l,c=0,u=null,f=!1,p=!1,g=n!==-1,A=-1,y=E2e(sE(e,0))&&b2e(sE(e,e.length-1));if(t||o)for(l=0;l<e.length;c>=65536?l+=2:l++){if(c=sE(e,l),!cE(c))return Sm;y=y&&TK(c,u,a),u=c}else{for(l=0;l<e.length;c>=65536?l+=2:l++){if(c=sE(e,l),c===aE)f=!0,g&&(p=p||l-A-1>n&&e[A+1]!==" ",A=l);else if(!cE(c))return Sm;y=y&&TK(c,u,a),u=c}p=p||g&&l-A-1>n&&e[A+1]!==" "}return!f&&!p?y&&!o&&!i(e)?iz:s===lE?Sm:iL:r>9&&nz(e)?Sm:o?s===lE?Sm:iL:p?oz:sz}function _2e(e,t,r,n,i){e.dump=function(){if(t.length===0)return e.quotingType===lE?'""':"''";if(!e.noCompatMode&&(g2e.indexOf(t)!==-1||p2e.test(t)))return e.quotingType===lE?'"'+t+'"':"'"+t+"'";var s=e.indent*Math.max(1,r),o=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-s),a=n||e.flowLevel>-1&&r>=e.flowLevel;function l(c){return v2e(e,c)}switch(x2e(t,a,e.indent,o,l,e.quotingType,e.forceQuotes&&!n,i)){case iz:return t;case iL:return"'"+t.replace(/'/g,"''")+"'";case sz:return"|"+RK(t,e.indent)+kK(BK(t,s));case oz:return">"+RK(t,e.indent)+kK(BK(w2e(t,o),s));case Sm:return'"'+I2e(t)+'"';default:throw new Po("impossible error: invalid scalar style")}}()}function RK(e,t){var r=nz(e)?String(t):"",n=e[e.length-1]===`
`,i=n&&(e[e.length-2]===`
`||e===`
`),s=i?"+":n?"":"-";return r+s+`
`}function kK(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function w2e(e,t){for(var r=/(\n+)([^\n]*)/g,n=function(){var c=e.indexOf(`
`);return c=c!==-1?c:e.length,r.lastIndex=c,FK(e.slice(0,c),t)}(),i=e[0]===`
`||e[0]===" ",s,o;o=r.exec(e);){var a=o[1],l=o[2];s=l[0]===" ",n+=a+(!i&&!s&&l!==""?`
`:"")+FK(l,t),i=s}return n}function FK(e,t){if(e===""||e[0]===" ")return e;for(var r=/ [^ ]/g,n,i=0,s,o=0,a=0,l="";n=r.exec(e);)a=n.index,a-i>t&&(s=o>i?o:a,l+=`
`+e.slice(i,s),i=s+1),o=a;return l+=`
`,e.length-i>t&&o>i?l+=e.slice(i,o)+`
`+e.slice(o+1):l+=e.slice(i),l.slice(1)}function I2e(e){for(var t="",r=0,n,i=0;i<e.length;r>=65536?i+=2:i++)r=sE(e,i),n=Os[r],!n&&cE(r)?(t+=e[i],r>=65536&&(t+=e[i+1])):t+=n||m2e(r);return t}function S2e(e,t,r){var n="",i=e.tag,s,o,a;for(s=0,o=r.length;s<o;s+=1)a=r[s],e.replacer&&(a=e.replacer.call(r,String(s),a)),(Bd(e,t,a,!1,!1)||typeof a>"u"&&Bd(e,t,null,!1,!1))&&(n!==""&&(n+=","+(e.condenseFlow?"":" ")),n+=e.dump);e.tag=i,e.dump="["+n+"]"}function MK(e,t,r,n){var i="",s=e.tag,o,a,l;for(o=0,a=r.length;o<a;o+=1)l=r[o],e.replacer&&(l=e.replacer.call(r,String(o),l)),(Bd(e,t+1,l,!0,!0,!1,!0)||typeof l>"u"&&Bd(e,t+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=nL(e,t)),e.dump&&aE===e.dump.charCodeAt(0)?i+="-":i+="- ",i+=e.dump);e.tag=s,e.dump=i||"[]"}function B2e(e,t,r){var n="",i=e.tag,s=Object.keys(r),o,a,l,c,u;for(o=0,a=s.length;o<a;o+=1)u="",n!==""&&(u+=", "),e.condenseFlow&&(u+='"'),l=s[o],c=r[l],e.replacer&&(c=e.replacer.call(r,l,c)),Bd(e,t,l,!1,!1)&&(e.dump.length>1024&&(u+="? "),u+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),Bd(e,t,c,!1,!1)&&(u+=e.dump,n+=u));e.tag=i,e.dump="{"+n+"}"}function D2e(e,t,r,n){var i="",s=e.tag,o=Object.keys(r),a,l,c,u,f,p;if(e.sortKeys===!0)o.sort();else if(typeof e.sortKeys=="function")o.sort(e.sortKeys);else if(e.sortKeys)throw new Po("sortKeys must be a boolean or a function");for(a=0,l=o.length;a<l;a+=1)p="",(!n||i!=="")&&(p+=nL(e,t)),c=o[a],u=r[c],e.replacer&&(u=e.replacer.call(r,c,u)),Bd(e,t+1,c,!0,!0,!0)&&(f=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,f&&(e.dump&&aE===e.dump.charCodeAt(0)?p+="?":p+="? "),p+=e.dump,f&&(p+=nL(e,t)),Bd(e,t+1,u,!0,f)&&(e.dump&&aE===e.dump.charCodeAt(0)?p+=":":p+=": ",p+=e.dump,i+=p));e.tag=s,e.dump=i||"{}"}function QK(e,t,r){var n,i,s,o,a,l;for(i=r?e.explicitTypes:e.implicitTypes,s=0,o=i.length;s<o;s+=1)if(a=i[s],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof t=="object"&&t instanceof a.instanceOf)&&(!a.predicate||a.predicate(t))){if(r?a.multi&&a.representName?e.tag=a.representName(t):e.tag=a.tag:e.tag="?",a.represent){if(l=e.styleMap[a.tag]||a.defaultStyle,JK.call(a.represent)==="[object Function]")n=a.represent(t,l);else if(jK.call(a.represent,l))n=a.represent[l](t,l);else throw new Po("!<"+a.tag+'> tag resolver accepts not "'+l+'" style');e.dump=n}return!0}return!1}function Bd(e,t,r,n,i,s,o){e.tag=null,e.dump=r,QK(e,r,!1)||QK(e,r,!0);var a=JK.call(e.dump),l=n,c;n&&(n=e.flowLevel<0||e.flowLevel>t);var u=a==="[object Object]"||a==="[object Array]",f,p;if(u&&(f=e.duplicates.indexOf(r),p=f!==-1),(e.tag!==null&&e.tag!=="?"||p||e.indent!==2&&t>0)&&(i=!1),p&&e.usedDuplicates[f])e.dump="*ref_"+f;else{if(u&&p&&!e.usedDuplicates[f]&&(e.usedDuplicates[f]=!0),a==="[object Object]")n&&Object.keys(e.dump).length!==0?(D2e(e,t,e.dump,i),p&&(e.dump="&ref_"+f+e.dump)):(B2e(e,t,e.dump),p&&(e.dump="&ref_"+f+" "+e.dump));else if(a==="[object Array]")n&&e.dump.length!==0?(e.noArrayIndent&&!o&&t>0?MK(e,t-1,e.dump,i):MK(e,t,e.dump,i),p&&(e.dump="&ref_"+f+e.dump)):(S2e(e,t,e.dump),p&&(e.dump="&ref_"+f+" "+e.dump));else if(a==="[object String]")e.tag!=="?"&&_2e(e,e.dump,t,s,l);else{if(a==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new Po("unacceptable kind of an object to dump "+a)}e.tag!==null&&e.tag!=="?"&&(c=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?c="!"+c:c.slice(0,18)==="tag:yaml.org,2002:"?c="!!"+c.slice(18):c="!<"+c+">",e.dump=c+" "+e.dump)}return!0}function T2e(e,t){var r=[],n=[],i,s;for(sL(e,r,n),i=0,s=n.length;i<s;i+=1)t.duplicates.push(r[n[i]]);t.usedDuplicates=new Array(s)}function sL(e,t,r){var n,i,s;if(e!==null&&typeof e=="object")if(i=t.indexOf(e),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(t.push(e),Array.isArray(e))for(i=0,s=e.length;i<s;i+=1)sL(e[i],t,r);else for(n=Object.keys(e),i=0,s=n.length;i<s;i+=1)sL(e[n[i]],t,r)}function R2e(e,t){t=t||{};var r=new C2e(t);r.noRefs||T2e(e,r);var n=e;return r.replacer&&(n=r.replacer.call({"":n},"",n)),Bd(r,0,n,!0,!0)?r.dump+`
`:""}var k2e=R2e,F2e={dump:k2e};function uL(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}var vS=zK.load,hxt=zK.loadAll,gxt=F2e.dump;var pxt=uL("safeLoad","load"),Axt=uL("safeLoadAll","loadAll"),mxt=uL("safeDump","dump");var az=[">","<","|","&","$","`",";"],Q2e=[...az,"="],N2e=["|","&",";","$","`","(",")","{","}","<",">","[","]",'"',"'","."];function zf(e){return e==="win32"?"powershell":e==="darwin"?"zsh":"bash"}function lz(e){return e==="bash"||e==="powershell"||e==="zsh"}function cz(e,t){if(t==="bash"){for(let r of az)if(e.includes(r))return;return e.split(" ")}else if(t==="powershell"){for(let r of N2e)if(e.includes(r))return;return e.split(" ")}else if(t==="zsh"){for(let r of Q2e)if(e.includes(r))return;return e.split(" ")}}var P2e=`
auto_approval:
  git:
    - type: prefix
      args: ["status"]
    - type: prefix
      args: ["log"]
    - type: prefix
      args: ["diff"]
    - type: prefix
      args: ["show"]
    - type: exact
      args: ["branch"]
    - type: prefix
      args: ["ls-files"]
    - type: prefix
      args: ["blame"]
    - type: prefix
      args: ["rev-parse"]
    - type: prefix
      args: ["remote", "-v"]
    - type: prefix
      args: ["config", "--list"]
    - type: exact
      args: ["config", "user.name"]
    - type: exact
      args: ["config", "user.email"]
    - type: exact
      args: ["branch", "--show-current"]

  kubectl:
    - type: prefix
      args: ["get"]
    - type: prefix
      args: ["describe"]
    - type: prefix
      args: ["explain"]
    - type: prefix
      args: ["logs"]
    - type: prefix
      args: ["top"]
    - type: prefix
      args: ["api-resources"]
    - type: prefix
      args: ["api-versions"]
    - type: prefix
      args: ["version"]
    - type: prefix
      args: ["wait"]
    - type: prefix
      args: ["auth", "can-i"]
    - type: prefix
      args: ["config", "get-contexts"]
    - type: prefix
      args: ["config", "view"]

  bazel:
    - type: prefix
      args: ["query"]
    - type: prefix
      args: ["cquery"]
    - type: prefix
      args: ["config"]
    - type: prefix
      args: ["info"]
    - type: prefix
      args: ["version"]
    - type: prefix
      args: ["help"]
    - type: prefix
      args: ["analyze-profile"]
    - type: prefix
      args: ["aquery"]
    - type: prefix
      args: ["dump"]
    - type: prefix
      args: ["license"]
    - type: prefix
      args: ["print"]
    - type: prefix
      args: ["build", "--nobuild"]
    - type: prefix
      args: ["coverage", "--nobuild"]
    - type: prefix
      args: ["mobile-install", "--nobuild"]
    - type: prefix
      args: ["run", "--nobuild"]
    - type: prefix
      args: ["text", "--nobuild"]
    - type: prefix
      args: ["clean", "--expunge", "--dry-run"]

  docker:
    - type: prefix
      args: ["ps"]
    - type: prefix
      args: ["images"]
    - type: prefix
      args: ["network", "ls"]
    - type: prefix
      args: ["volume", "ls"]
    - type: prefix
      args: ["port"]
    - type: prefix
      args: ["stats"]
    - type: prefix
      args: ["events"]
    - type: prefix
      args: ["diff"]
    - type: prefix
      args: ["history"]
    - type: prefix
      args: ["system", "df"]
    - type: prefix
      args: ["top"]
    - type: prefix
      args: ["version"]
    - type: prefix
      args: ["inspect"]

  npm:
    - type: prefix
      args: ["list"]
    - type: prefix
      args: ["outdated"]
    - type: prefix
      args: ["doctor"]
    - type: prefix
      args: ["audit"]
    - type: prefix
      args: ["token", "list"]
    - type: prefix
      args: ["ping"]
    - type: prefix
      args: ["view"]
    - type: prefix
      args: ["owner", "ls"]
    - type: prefix
      args: ["fund"]
    - type: prefix
      args: ["explain"]
    - type: prefix
      args: ["ls"]
    - type: prefix
      args: ["why"]
    - type: prefix
      args: ["prefix"]

  terraform:
    - type: prefix
      args: ["show"]
    - type: prefix
      args: ["providers"]
    - type: prefix
      args: ["state", "list"]
    - type: prefix
      args: ["state", "show"]
    - type: prefix
      args: ["version"]
    - type: prefix
      args: ["fmt", "--check"]
    - type: prefix
      args: ["validate"]
    - type: prefix
      args: ["graph"]
    - type: prefix
      args: ["console"]
    - type: prefix
      args: ["output"]
    - type: prefix
      args: ["refresh", "--dry-run"]
    - type: prefix
      args: ["plan"]

  gradle:
    - type: prefix
      args: ["dependencies"]
    - type: prefix
      args: ["projects"]
    - type: prefix
      args: ["properties"]
    - type: prefix
      args: ["tasks"]
    - type: prefix
      args: ["components"]
    - type: prefix
      args: ["model"]
    - type: prefix
      args: ["buildEnvironment"]
    - type: prefix
      args: ["projectsEvaluated"]
    - type: prefix
      args: ["projects", "--dry-run"]
    - type: prefix
      args: ["dependencies", "--dry-run"]
    - type: prefix
      args: ["help"]
    - type: prefix
      args: ["version"]

  helm:
    - type: prefix
      args: ["list"]
    - type: prefix
      args: ["get", "values"]
    - type: prefix
      args: ["get", "manifest"]
    - type: prefix
      args: ["get", "hooks"]
    - type: prefix
      args: ["get", "notes"]
    - type: prefix
      args: ["status"]
    - type: prefix
      args: ["dependency", "list"]
    - type: prefix
      args: ["show", "chart"]
    - type: prefix
      args: ["show", "values"]
    - type: prefix
      args: ["verify"]
    - type: prefix
      args: ["version"]
    - type: prefix
      args: ["env"]

  aws:
    - type: prefix
      args: ["s3", "ls"]
    - type: prefix
      args: ["ec2", "describe-instances"]
    - type: prefix
      args: ["rds", "describe-db-instances"]
    - type: prefix
      args: ["iam", "list-users"]
    - type: prefix
      args: ["iam", "list-roles"]
    - type: prefix
      args: ["lambda", "list-functions"]
    - type: prefix
      args: ["eks", "list-clusters"]
    - type: prefix
      args: ["ecr", "describe-repositories"]
    - type: prefix
      args: ["cloudformation", "list-stacks"]
    - type: prefix
      args: ["configure", "list"]

  gcloud:
    - type: prefix
      args: ["projects", "list"]
    - type: prefix
      args: ["compute", "instances", "list"]
    - type: prefix
      args: ["compute", "zones", "list"]
    - type: prefix
      args: ["compute", "regions", "list"]
    - type: prefix
      args: ["container", "clusters", "list"]
    - type: prefix
      args: ["services", "list"]
    - type: prefix
      args: ["iam", "roles", "list"]
    - type: prefix
      args: ["config", "list"]
    - type: prefix
      args: ["components", "list"]
    - type: prefix
      args: ["version"]

  postgres:
    - type: prefix
      args: ["psql", "-l"]
    - type: prefix
      args: ["pg_dump", "--schema-only"]
    - type: prefix
      args: ["pg_dump", "--schema", "public", "--dry-run"]
    - type: prefix
      args: ["pg_dump", "-s", "-t"]
    - type: prefix
      args: ["pg_controldata"]
    - type: prefix
      args: ["pg_isready"]
    - type: prefix
      args: ["pg_lsclusters"]
    - type: prefix
      args: ["pg_activity"]
    - type: prefix
      args: ["pgbench", "-i", "--dry-run"]

  maven:
    - type: prefix
      args: ["dependency:tree"]
    - type: prefix
      args: ["dependency:analyze"]
    - type: prefix
      args: ["help:effective-pom"]
    - type: prefix
      args: ["help:describe"]
    - type: prefix
      args: ["help:evaluate"]
    - type: prefix
      args: ["dependency:list"]
    - type: prefix
      args: ["dependency:build-classpath"]
    - type: prefix
      args: ["help:active-profiles"]
    - type: prefix
      args: ["help:effective-settings"]
    - type: prefix
      args: ["version"]

  redis-cli:
    - type: prefix
      args: ["info"]
    - type: prefix
      args: ["monitor"]
    - type: prefix
      args: ["memory", "stats"]
    - type: prefix
      args: ["memory", "doctor"]
    - type: prefix
      args: ["latency", "doctor"]
    - type: prefix
      args: ["cluster", "info"]
    - type: prefix
      args: ["client", "list"]
    - type: prefix
      args: ["slowlog", "get"]
    - type: prefix
      args: ["config", "get"]
    - type: prefix
      args: ["info", "keyspace"]

  yarn:
    - type: prefix
      args: ["list"]
    - type: prefix
      args: ["info"]
    - type: prefix
      args: ["why"]
    - type: prefix
      args: ["licenses", "list"]
    - type: prefix
      args: ["outdated"]
    - type: prefix
      args: ["check"]
    - type: prefix
      args: ["audit"]
    - type: prefix
      args: ["workspaces", "info"]
    - type: prefix
      args: ["version"]
    - type: prefix
      args: ["config", "list"]

  az:
    - type: prefix
      args: ["account", "list"]
    - type: prefix
      args: ["group", "list"]
    - type: prefix
      args: ["vm", "list"]
    - type: prefix
      args: ["aks", "list"]
    - type: prefix
      args: ["acr", "list"]
    - type: prefix
      args: ["storage", "account", "list"]
    - type: prefix
      args: ["network", "vnet", "list"]
    - type: prefix
      args: ["webapp", "list"]
    - type: prefix
      args: ["functionapp", "list"]
    - type: prefix
      args: ["version"]

  vault:
    - type: prefix
      args: ["list"]
    - type: prefix
      args: ["policy", "list"]
    - type: prefix
      args: ["auth", "list"]
    - type: prefix
      args: ["secrets", "list"]
    - type: prefix
      args: ["audit", "list"]
    - type: prefix
      args: ["status"]
    - type: prefix
      args: ["token", "lookup"]
    - type: prefix
      args: ["read"]
    - type: prefix
      args: ["version"]

  podman:
    - type: prefix
      args: ["ps"]
    - type: prefix
      args: ["images"]
    - type: prefix
      args: ["pod", "ps"]
    - type: prefix
      args: ["volume", "ls"]
    - type: prefix
      args: ["network", "ls"]
    - type: prefix
      args: ["stats"]
    - type: prefix
      args: ["top"]
    - type: prefix
      args: ["logs"]
    - type: prefix
      args: ["inspect"]
    - type: prefix
      args: ["port"]

  deno:
    - type: prefix
      args: ["info"]
    - type: prefix
      args: ["list"]
    - type: prefix
      args: ["doc"]
    - type: prefix
      args: ["lint"]
    - type: prefix
      args: ["types"]
    - type: prefix
      args: ["check"]
    - type: prefix
      args: ["compile", "--dry-run"]
    - type: prefix
      args: ["task", "--list"]
    - type: prefix
      args: ["test", "--dry-run"]
    - type: prefix
      args: ["version"]

  rustup:
    - type: prefix
      args: ["show"]
    - type: prefix
      args: ["toolchain", "list"]
    - type: prefix
      args: ["target", "list"]
    - type: prefix
      args: ["component", "list"]
    - type: prefix
      args: ["override", "list"]
    - type: prefix
      args: ["which"]
    - type: prefix
      args: ["doc"]
    - type: prefix
      args: ["man"]
    - type: prefix
      args: ["version"]

  cargo:
    - type: prefix
      args: ["tree"]
    - type: prefix
      args: ["metadata"]
    - type: prefix
      args: ["list"]
    - type: prefix
      args: ["verify"]
    - type: prefix
      args: ["search"]
    - type: prefix
      args: ["vendor", "--dry-run"]
    - type: prefix
      args: ["outdated"]
    - type: prefix
      args: ["doc"]
    - type: prefix
      args: ["config", "get"]
    - type: prefix
      args: ["version"]

  pip:
    - type: prefix
      args: ["list"]
    - type: prefix
      args: ["show"]
    - type: prefix
      args: ["check"]
    - type: prefix
      args: ["debug"]
    - type: prefix
      args: ["config", "list"]
    - type: prefix
      args: ["index"]
    - type: prefix
      args: ["hash"]
    - type: prefix
      args: ["cache", "list"]
    - type: prefix
      args: ["freeze"]
    - type: prefix
      args: ["version"]
`,L2e=`
auto_approval:
  cd:
    type: any
  date:
    type: any
  cal:
    type: any
  uname:
    type: prefix
    args: ["-a"]
  hostname:
    type: any
  whoami:
    type: any
  id:
    type: any
  ps:
    type: any
  free:
    type: any
  w:
    type: any
  who:
    type: any
  ping:
    type: not_contains
    args: ["-f"]
  netstat:
    type: any
  ss:
    type: any
  ip:
    type: prefix
    args: ["addr"]
  dig:
    type: any
  nslookup:
    type: any
  pwd:
    type: any
  ls:
    type: any
  file:
    type: any
  stat:
    type: any
  du:
    type: any
  df:
    type: any
  cat:
    type: any
  less:
    type: any
  more:
    type: any
  head:
    type: any
  tail:
    type: not_contains
    args: ["-f"]
  wc:
    type: any
`,U2e=`
auto_approval:
  cd:
    type: any
  Get-Date:
    type: any
  date:
    type: any
  Get-ComputerInfo:
    type: any
  Get-Host:
    type: any
  $env:USERNAME:
    type: any
  whoami:
    type: any
  Get-Process:
    type: any
  ps:
    type: any
  gps:
    type: any
  Get-Service:
    type: any
  gsv:
    type: any
  Get-NetIPAddress:
    type: any
  ipconfig:
    type: any
  Get-NetTCPConnection:
    type: any
  netstat:
    type: any
  Resolve-DnsName:
    type: any
  nslookup:
    type: any
  Get-DnsClientServerAddress:
    type: any
  Get-Location:
    type: any
  pwd:
    type: any
  gl:
    type: any
  Get-ChildItem:
    type: any
  dir:
    type: any
  ls:
    type: any
  gci:
    type: any
  Get-Item:
    type: any
  gi:
    type: any
  Get-ItemProperty:
    type: any
  gp:
    type: any
  Get-Content:
    type: not_contains
    args: ["-Wait"]
  cat:
    type: any
  gc:
    type: any
  type:
    type: any
  Select-String:
    type: any
  sls:
    type: any
  findstr:
    type: any
  Get-PSDrive:
    type: any
  gdr:
    type: any
  Get-Volume:
    type: any
  Measure-Object:
    type: any
  measure:
    type: any
  Select-Object:
    type: any
  select:
    type: any
`;function Rm(e,t){let r;if(t==="bash"||t==="zsh")r=vS(L2e);else if(t==="powershell")r=vS(U2e);else throw new Error(`Unsupported shell: ${t}`);let n=vS(P2e);return{auto_approval:{...r.auto_approval,...n.auto_approval}}}function km(e,t,r){let n=r;if(n!=="bash"&&n!=="powershell"&&n!=="zsh")return!1;let i=cz(t,n);if(!i||i.length===0)return!1;let s=i[0],o=i.slice(1),a=e.auto_approval[s];if(!a)return!1;for(let l of Array.isArray(a)?a:[a]){let c=l.args??[];if(l.type==="prefix"){if(c.length<=o.length&&c.every((u,f)=>o[f]===u))return!0}else if(l.type==="exact"){if(c.length===o.length&&c.every((u,f)=>o[f]===u))return!0}else{if(l.type==="any")return!0;if(l.type==="not_contains"&&!c.some(u=>o.includes(u)))return!0}}return!1}var Fm=class extends Vr{_getAgentConfig;_chatMode;_platform;_shellName;execPromise=(0,uz.promisify)(dz.exec);_allowlist;constructor(t,r,n,i){super(zi.shell,mt.Check),this._getAgentConfig=t,this._chatMode=r,this._platform=n,this._shellName=i,this._allowlist=Rm(process.platform,this._shellName)}get description(){return`Execute a shell command.

- You can use this tool to interact with the user's local version control system. Do not use the
retrieval tool for that purpose.
- If there is a more specific tool available that can perform the function, use that tool instead of
this one.

The OS is ${process.platform}. The shell is '${this._shellName}'.`}inputSchemaJson=JSON.stringify({type:"object",properties:{command:{type:"string",description:"The shell command to execute."}},required:["command"]});checkToolCallSafe(t){if(this._getAgentConfig().shellCommandsAlwaysSafe)return!0;if(this._chatMode===cn.agent){let r=t.command;return km(this._allowlist,r,this._shellName)}return!1}async call(t,r,n){let i=t.command;try{let s=await this.execPromise(i,{signal:n,cwd:await Li().getCwd(),shell:this._shellName});return{text:s.stdout+s.stderr,isError:!1}}catch(s){return O2e(s)&&s.stdout!==void 0&&s.stderr!==void 0?{text:s.stdout+s.stderr,isError:!1}:{text:`Failed to execute shell command: ${s instanceof Error?s.message:String(s)}`,isError:!0}}}};function O2e(e){return e!==null&&typeof e=="object"&&"code"in e&&"stderr"in e&&"stdout"in e&&"message"in e&&"name"in e}function fz(e){let t=[],r="";for(let n=0;n<e.length;n++){let i=e[n];/[a-zA-Z0-9_]/.test(i)?r+=i:/\s/.test(i)?r&&(t.push(r),r=""):(r&&(t.push(r),r=""),t.push(i))}return r&&t.push(r),t}function q2e(e,t,r=100){let n=e.length,i=t.length,s=Array.from({length:n}).fill(-1);if(n===0||i===0)return s;let o=Array.from({length:n+1}).fill([]).map(()=>Array.from({length:2*r+1}).fill(0)),a=Array.from({length:n+1}).fill([]).map(()=>Array.from({length:2*r+1}).fill([0,0]));for(let A=1;A<=n;A++){let y=Math.max(1,A-r),C=Math.min(i,A+r);for(let v=y;v<=C;v++){let b=v-(A-r);if(e[A-1]===t[v-1]){let w=A-1,B=v-1;if(B>=Math.max(1,w-r)&&B<=Math.min(i,w+r)){let F=B-(w-r);o[A][b]=o[w][F]+1,a[A][b]=[-1,-1]}else o[A][b]=1,a[A][b]=[-1,-1]}else{let w=0,B=0;v-1>=y&&(w=o[A][b-1]);let F=A-1;if(v>=Math.max(1,F-r)&&v<=Math.min(i,F+r)){let Q=v-(F-r);B=o[F][Q]}w>=B?(o[A][b]=w,a[A][b]=[0,-1]):(o[A][b]=B,a[A][b]=[-1,0])}}}let l=n,c=i,u=0,f=i,p=Math.max(1,n-r),g=Math.min(i,n+r);for(let A=p;A<=g;A++){let y=A-(n-r);o[n][y]>u&&(u=o[n][y],f=A)}for(l=n,c=f;l>0&&c>0;){let A=c-(l-r);if(A<0||A>=2*r+1)break;let[y,C]=a[l][A];if(y===-1&&C===-1&&(s[l-1]=c-1),l+=y,c+=C,y===0&&C===0)break}return s}function hz(e,t){let r=e.map(f=>fz(f)),n=t.map(f=>fz(f));function i(f){let p=[],g=[];for(let A=0;A<f.length;A++)for(let y=0;y<f[A].length;y++)p.push(f[A][y]),g.push(A);return[p,g]}let[s,o]=i(r),[a,l]=i(n),c=q2e(s,a),u=Array.from({length:e.length}).fill([]).map(()=>[]);for(let f=0;f<c.length;f++){let p=c[f];if(p!==-1){let g=o[f],A=l[p];u[g].includes(A)||u[g].push(A)}}return u}var V2e=5e4,H2e="<response clipped><NOTE>To save on context only part of this file has been shown to you.</NOTE>";function W2e(e){let t=e.includes(`\r
`)?`\r
`:`
`;return e.split(t).map(i=>i.replace(/\s+$/,"")).join(t)}function gz(e,t,r=1,n){e=G2e(e),e=e.split(`
`).map((s,o)=>`${String(o+r).padStart(6)}	${s}`).join(`
`);let i=`Here's the result of running \`cat -n\` on ${t}:
${e}
`;return n!==void 0&&(i+=`Total lines in file: ${n}
`),i}function G2e(e,t=V2e){return e.length<=t?e:e.slice(0,t)+H2e}function dL(e){return e.replaceAll(`\r
`,`
`)}function $2e(e){return e.includes(`\r
`)?`\r
`:`
`}function Mm(e){let t=$2e(e);return{content:dL(W2e(e)),originalLineEnding:t}}function fL(e,t){return t===`
`?e:e.replaceAll(`
`,t)}function pz(e,t){let r="";if(!Array.isArray(e)||e.length!==2||!e.every(s=>typeof s=="number"))return r=`Invalid view range provided. Showing entire file (lines 1-${t}).`,{initLine:1,finalLine:t,message:r};let n=e[0],i=e[1];return n<1?(r+=`Start line ${n} is less than 1. Adjusted to 1.
`,n=1):n>t&&(r+=`Start line ${n} exceeds file length (${t}). Adjusted to 1.
`,n=1),i===-1?i=t:i>t?(r+=`End line ${i} exceeds file length (${t}). Adjusted to ${t}. `,i=t):i<n&&(r+=`End line ${i} is less than start line ${n}. Adjusted to ${t}. `,i=t),r=r.trim(),{initLine:n,finalLine:i,message:r}}function Y2e(e,t,r,n){let i=Math.max(0,t-n),s=t+r-1+n;return e=e.replaceAll(`\r
`,`
`),{snippet:e.split(`
`).slice(i,s+1).join(`
`),startLine:i}}function ES(e,t,r,n){let{snippet:i,startLine:s}=Y2e(e,t,r,n);return i.split(`
`).map((a,l)=>`${String(l+s+1).padStart(6)}	${a}`).join(`
`)}function Az(e,t,r,n){if(t===-1)return{initLine:e,finalLine:t};let i=t-e+1;if(i>=r)return{initLine:e,finalLine:t};let s=r-i,o=Math.floor(s/2);o=Math.min(o,e-1);let a=s-o;a=Math.min(a,n-t),o=Math.min(e-1,s-a);let l=Math.max(1,e-o),c=Math.min(n,t+a);return{initLine:l,finalLine:c}}function bS(e){let t=e.split(`
`),r=0,n=0,i=0;for(let s of t){if(s.trim()==="")continue;let o=s.match(/^( +)/),a=s.match(/^(\t+)/);o?(r++,i===0&&(i=o[1].length)):a&&n++}return n>r?{type:"tab",size:1}:{type:"space",size:i||2}}function hL(e,t){let r=e.split(`
`),n=t.type==="tab"?/^\t/:new RegExp(`^ {1,${t.size}}`);return r.map(i=>i.replace(n,"")).join(`
`)}function gL(e,t){return e.split(`
`).every(n=>{if(n.trim()==="")return!0;let i=t.type==="tab"?/^\t/:new RegExp(`^ {1,${t.size}}`);return n.match(i)})}function pL(e,t){let r=e.split(`
`),n=t.split(`
`),i=[];if(t.trim()===""||n.length>r.length)return i;if(n.length===1)return r.forEach((c,u)=>{c.includes(t)&&i.push({startLine:u,endLine:u})}),i;let s=e,o=t,a=0,l;for(;(l=s.indexOf(o,a))!==-1;){let c=s.substring(0,l),u=s.substring(0,l+o.length),f=(c.match(/\n/g)||[]).length,p=(u.match(/\n/g)||[]).length;i.push({startLine:f,endLine:p}),a=l+1}return i}function mz(e,t,r,n){if(e.length===0)return-1;if(e.length===1)return 0;for(let u=0;u<e.length;u++){let f=e[u];if(f.startLine===t&&f.endLine===r)return u}if(n===0)return-1;let i=-1,s=Number.MAX_SAFE_INTEGER;for(let u=0;u<e.length;u++){let f=e[u],p=Math.abs(f.startLine-t);p<s&&(s=p,i=u)}if(n===1)return i;if(i===-1)return-1;let o=Number.MAX_SAFE_INTEGER,a=-1;for(let u=0;u<e.length;u++){if(u===i)continue;let f=e[u],p=Math.abs(f.startLine-t);p<o&&(o=p,a=u)}let l=Math.abs(e[a].startLine-e[i].startLine),c=Math.floor(l/2*n);return s<=c?i:-1}function yz(e){if(e===void 0)throw new Error("Missing required parameter `str_replace_entries` for `str_replace` command.");if(!Array.isArray(e))throw new Error("Invalid parameter `str_replace_entries` for `str_replace` command. It must be an array of objects.");if(e.length===0)throw new Error("Empty required parameter `str_replace_entries` for `str_replace` command.");let t=[];for(let r of e){if(typeof r!="object"||!r)throw new Error("Invalid parameter `str_replace_entries` for `str_replace` command. It must be an array of objects.");let n=r;if(n.old_str===void 0)throw new Error("Missing required parameter `old_str` for `str_replace` command.");if(n.new_str===void 0)throw new Error("Missing required parameter `new_str` for `str_replace` command.");if(n.old_str_start_line_number===0&&(n.old_str_start_line_number=void 0),n.old_str_end_line_number===0&&(n.old_str_end_line_number=void 0),n.old_str_start_line_number!==void 0&&(!Number.isInteger(n.old_str_start_line_number)||n.old_str_start_line_number<1))throw new Error("Invalid parameter `old_str_start_line_number` for `str_replace` command. It must be a positive integer.");if(n.old_str_end_line_number!==void 0&&(!Number.isInteger(n.old_str_end_line_number)||n.old_str_end_line_number<1))throw new Error("Invalid parameter `old_str_end_line_number` for `str_replace` command. It must be a positive integer.");t.push({old_str:n.old_str,new_str:n.new_str,old_str_start_line_number:n.old_str_start_line_number,old_str_end_line_number:n.old_str_end_line_number})}return t}function Cz(e){let t=e;return t.forEach((r,n)=>{r.index=n}),t=K2e(t),t.sort((r,n)=>{let i=r.old_str_start_line_number??-1;return(n.old_str_start_line_number??-1)-i}),t}function vz(e,t){let r=e.old_str_start_line_number,n=e.old_str_end_line_number;if(!(r===void 0||n===void 0))for(let i of t){if(e.index==i.index||i.old_str_start_line_number===void 0||i.old_str_end_line_number===void 0)continue;let s={startLine:i.old_str_start_line_number,endLine:i.old_str_end_line_number};if(r<=s.startLine&&s.startLine<=n||r<=s.endLine&&s.endLine<=n||s.startLine<=r&&r<=s.endLine)return i}}function Ez(e,t){let r=e.old_str_start_line_number+1,n=e.old_str_end_line_number+1,i=t.old_str_start_line_number+1,s=t.old_str_end_line_number+1;return`old_str line numbers range overlaps with another entry.
This entry range: [${r}-${n}]
Overlapping entry index: ${t.index}
Overlapping entry range: [${i}-${s}]`}function bz(e){if(e===void 0)throw new Error("Missing required parameter `insert_line_entries` for `insert` command.");if(!Array.isArray(e))throw new Error("Invalid parameter `insert_line_entries` for `insert` command. It must be an array of objects.");if(e.length===0)throw new Error("Empty required parameter `insert_line_entries` for `insert` command.");let t=[];for(let r of e){if(typeof r!="object"||!r)throw new Error("Invalid parameter `insert_line_entries` for `insert` command. It must be an array of objects.");let n=r;if(n.insert_line===void 0)throw new Error("Missing required parameter `insert_line` for `insert` command.");if(n.new_str===void 0)throw new Error("Missing required parameter `new_str` for `insert` command.");if(!Number.isInteger(n.insert_line)||n.insert_line<0)throw new Error("Invalid parameter `insert_line` for `insert` command. It must be a non-negative integer.");t.push({insert_line:n.insert_line,new_str:n.new_str})}return t}function K2e(e){return e.map(t=>({...t,old_str_start_line_number:t.old_str_start_line_number!==void 0?t.old_str_start_line_number-1:void 0,old_str_end_line_number:t.old_str_end_line_number!==void 0?t.old_str_end_line_number-1:void 0}))}function xz(e,t){t=t.replaceAll(`\r
`,`
`);let r=e.newContent.split(`
`),n=t.split(`
`),i=hz(r,n);e.newStrStartLineNumber=i[e.newStrStartLineNumber][0]??e.newStrStartLineNumber,e.newStrEndLineNumber=i[e.newStrEndLineNumber][i[e.newStrEndLineNumber].length-1]??e.newStrEndLineNumber}var AL=4,Qm=class extends Vr{_checkpointManager;_minViewSize;_lineNumberErrorTolerance;_waitForAutoFormatMs;_logger;constructor(t,r=0,n=.2,i=1e3){super(zi.strReplaceEditor,mt.Safe),this._checkpointManager=t,this._minViewSize=r,this._lineNumberErrorTolerance=n,this._waitForAutoFormatMs=i,this._logger=Mr("StrReplaceEditorTool"),this._logger.debug(`Initialized with params: minViewSize=${r}, lineNumberErrorTolerance=${n}, waitForAutoFormatSec=${i}`)}description="Custom editing tool for viewing, creating and editing files\n* `path` is a file path relative to the workspace root\n* command `view` displays the result of applying `cat -n`.\n* If a `command` generates a long output, it will be truncated and marked with `<response clipped>`\n* `insert` and `str_replace` commands output a snippet of the edited section for each entry. This snippet reflects the final state of the file after all edits and IDE auto-formatting have been applied.\n\n\nNotes for using the `str_replace` command:\n* Use the `str_replace_entries` parameter with an array of objects\n* Each object should have `old_str`, `new_str`, `old_str_start_line_number` and `old_str_end_line_number` properties\n* The `old_str_start_line_number` and `old_str_end_line_number` parameters are 1-based line numbers\n* Both `old_str_start_line_number` and `old_str_end_line_number` are INCLUSIVE\n* The `old_str` parameter should match EXACTLY one or more consecutive lines from the original file. Be mindful of whitespace!\n* Empty `old_str` is allowed only when the file is empty or contains only whitespaces\n* It is important to specify `old_str_start_line_number` and `old_str_end_line_number` to disambiguate between multiple occurrences of `old_str` in the file\n* Make sure that `old_str_start_line_number` and `old_str_end_line_number` do not overlap with other entries in `str_replace_entries`\n* The `new_str` parameter should contain the edited lines that should replace the `old_str`. Can be an empty string to delete content\n\nNotes for using the `insert` command:\n* Use the `insert_line_entries` parameter with an array of objects\n* Each object should have `insert_line` and `new_str` properties\n* The `insert_line` parameter specifies the line number after which to insert the new string\n* The `insert_line` parameter is 1-based line number\n* To insert at the very beginning of the file, use `insert_line: 0`\n\nNotes for using the `view` command:\n* Strongly prefer to use larger ranges of at least 1000 lines when scanning through files. One call with large range is much more efficient than many calls with small ranges\n\nIMPORTANT:\n* This is the only tool you should use for editing files.\n* If it fails try your best to fix inputs and retry.\n* DO NOT fall back to removing the whole file and recreating it from scratch.\n* DO NOT use sed or any other command line tools for editing files.\n* Try to fit as many edits in one tool call as possible\n* Use view command to read the file before editing it.\n";inputSchemaJson=JSON.stringify({type:"object",properties:{command:{type:"string",enum:["view","str_replace","insert"],description:"The commands to run. Allowed options are: 'view', 'str_replace', 'insert'."},path:{description:"Full path to file relative to the workspace root, e.g. 'services/api_proxy/file.py' or 'services/api_proxy'.",type:"string"},view_range:{description:"Optional parameter of `view` command when `path` points to a file. If none is given, the full file is shown. If provided, the file will be shown in the indicated line number range, e.g. [11, 12] will show lines 11 and 12. Indexing at 1 to start. Setting `[start_line, -1]` shows all lines from `start_line` to the end of the file.",type:"array",items:{type:"integer"}},insert_line_entries:{description:"Required parameter of `insert` command. A list of entries to insert. Each entry is a dictionary with keys `insert_line` and `new_str`.",type:"array",items:{type:"object",properties:{insert_line:{description:"The line number after which to insert the new string. This line number is relative to the state of the file before any insertions in the current tool call have been applied.",type:"integer"},new_str:{description:"The string to insert. Can be an empty string.",type:"string"}},required:["insert_line","new_str"]}},str_replace_entries:{description:"Required parameter of `str_replace` command. A list of entries to replace. Each entry is a dictionary with keys `old_str`, `old_str_start_line_number`, `old_str_end_line_number` and `new_str`. `old_str` from different entries should not overlap.",type:"array",items:{type:"object",properties:{old_str:{description:"The string in `path` to replace.",type:"string"},old_str_start_line_number:{description:"The line number of the first line of `old_str` in the file. This is used to disambiguate between multiple occurrences of `old_str` in the file.",type:"integer"},old_str_end_line_number:{description:"The line number of the last line of `old_str` in the file. This is used to disambiguate between multiple occurrences of `old_str` in the file.",type:"integer"},new_str:{description:"The string to replace `old_str` with. Can be an empty string to delete content.",type:"string"}},required:["old_str","new_str","old_str_start_line_number","old_str_end_line_number"]}}},required:["command","path"]});checkToolCallSafe(t){return!0}async readFile(t){this._logger.debug(`Reading file: ${t}`);try{let r=await Li().readFile(t);if(r===void 0||r.contents===void 0||r.filepath===void 0)throw this._logger.error(`Failed to read file: ${t} - file details undefined`),new Error(`Cannot read file: ${t}`);return this._logger.debug(`Successfully read file: ${t} (${r.contents.length} bytes)`),{contents:r.contents,filepath:r.filepath}}catch(r){throw this._logger.error(`Error reading file ${t}: ${r instanceof Error?r.message:String(r)}`),new Error(`Ran into ${r instanceof Error?r.message:String(r)} while trying to read ${t}`)}}async createCheckpoint(t,r,n,i){this._logger.debug(`Creating checkpoint for file: ${t.absPath}`);let s=new pn(t,r,n,{}),o=i.at(-1)?.request_id??ao(),a=this._checkpointManager.currentConversationId??"";this._logger.debug(`Adding checkpoint with conversationId: ${a}, requestId: ${o}`),await this._checkpointManager.addCheckpoint({conversationId:a,path:t},{sourceToolCallRequestId:o,timestamp:Date.now(),document:s,conversationId:a})}async call(t,r,n){try{this._logger.debug(`Tool called with command: ${String(t.command)}, path: ${String(t.path)}`);let i=t.command;if(t.path===void 0)return this._logger.error("Missing required parameter 'path'"),ot("Missing required parameter `path`");if(typeof t.path!="string")return this._logger.error("Invalid parameter 'path'. It must be a string."),ot("Invalid parameter `path`. It must be a string.");if(t.path.trim()==="")return this._logger.error("Invalid parameter 'path'. It must not be empty."),ot("Invalid parameter `path`. It must not be empty.");let s=t.path,o=await this.readFile(s);switch(i){case"view":return this._logger.debug(`Handling 'view' command for ${s} with range: ${JSON.stringify(t.view_range)}`),this.handleView(s,o,t.view_range);case"str_replace":return this._logger.debug(`Handling 'str_replace' command for ${s} with ${Array.isArray(t.str_replace_entries)?t.str_replace_entries.length:0} entries`),await this.handleStrReplace(s,o,t.str_replace_entries,r);case"insert":return this._logger.debug(`Handling 'insert' command for ${s} with ${Array.isArray(t.insert_line_entries)?t.insert_line_entries.length:0} entries`),await this.handleInsert(s,o,t.insert_line_entries,r);default:return this._logger.error(`Unknown command: ${String(i)}`),ot(`Unknown command: ${String(i)}`)}}catch(i){return this._logger.error(`Error in tool call: ${i instanceof Error?i.message:String(i)}`),i instanceof Error?ot(i.message):ot(`Unknown error: ${String(i)}`)}}async prepareToolResponse(t,r,n,i,s,o,a,l){this._logger.debug(`Preparing tool response for ${a} command on ${t}`);let c=fL(n,i),u=fL(s,i);if(c!==u){this._logger.debug("Content changed, creating checkpoint and waiting for auto-formatting"),await this.createCheckpoint(r.filepath,c,u,o),await ma(this._waitForAutoFormatMs);let C=(await this.readFile(t)).contents,v=C!==u;v&&this._logger.debug("File was auto-formatted after edit"),l.sort((w,B)=>(w.newStrStartLineNumber??-1)-(B.newStrStartLineNumber??-1));let b=0;for(let w of l)w.newStrStartLineNumber!==void 0&&w.newStrEndLineNumber!==void 0&&(this._logger.debug(`Adjusting line numbers for result: start=${w.newStrStartLineNumber}, end=${w.newStrEndLineNumber}, shift=${b}`),w.newStrStartLineNumber+=b,w.newStrEndLineNumber+=b,w.newContent=s,v&&(xz(w,C),this._logger.debug(`Updated line numbers after reformatting: start=${w.newStrStartLineNumber}, end=${w.newStrEndLineNumber}`)),b+=w.numLinesDiff),w.newContent=C}else this._logger.debug("No content changes detected");let f=l.every(C=>C.isError),p=l.every(C=>!C.isError);this._logger.debug(`Results summary: all errors=${f}, all success=${p}, total results=${l.length}`);let A=l.map((C,v)=>{let b=C.genMessageFunc?C.genMessageFunc(C):"No message available";return`Result for ${a}_entries[${v}]:
${b}
`}).join(`
`),y;return f?y=`Failed to edit the file ${t}. See below for details.
${A}
Fix failed ${a}_entries accordingly and try again.
`:p?y=`Successfully edited the file ${t}.
${A}
Review the changes and make sure they are as expected (correct indentation, no duplicate lines, etc).
Edit the file again if necessary.
`:y=`Partially edited the file ${t}. See below for details.
${A}
Fix failed ${a}_entries accordingly and try again.
`,f?(this._logger.debug(`Returning error response for ${t}`),ot(y)):(this._logger.debug(`Returning success response for ${t}`),Gt(y))}handleView(t,r,n){this._logger.debug(`Handling view command for ${t} with range: ${JSON.stringify(n)}`);let s=dL(r.contents).split(`
`),o=s.length;this._logger.debug(`File ${t} has ${o} lines`);let a=1,l=o,c="";if(n)try{let p=pz(n,o);a=p.initLine,l=p.finalLine,p.message&&(c=`Note:
${p.message}

`);let g=Math.min(this._minViewSize,o),A=Az(a,l,g,o);a=A.initLine,l=A.finalLine}catch(p){throw p instanceof Error?p:new Error(`Invalid view_range: ${String(p)}`)}let u=l===-1?s.slice(a-1).join(`
`):s.slice(a-1,l).join(`
`),f=gz(u,t.toString(),a,o);return Gt(c+f)}singleStrReplace(t,r,n,i,s,o){n=Mm(n).content,i=Mm(i).content;let a=(y,C,v,b,w,B)=>({isError:!1,oldStr:n,oldStrStartLineNumber:s,oldStrEndLineNumber:o,newContent:y,newStr:C,newStrStartLineNumber:v,newStrEndLineNumber:b,numLinesDiff:w,genMessageFunc:B}),l=y=>({isError:!0,oldStr:n,oldStrStartLineNumber:s,oldStrEndLineNumber:o,numLinesDiff:0,genMessageFunc:y}),c,u=0,f=0;if(n.trim()==="")if(r.trim()==="")c=i,u=0,f=i.split(`
`).length-1;else return l(()=>`No replacement was performed, old_str is empty which is only allowed when the file is empty or contains only whitespace. The file ${t} is not empty.`);else{let y=pL(r,n);if(y.length===0){let C=bS(r),v=bS(n),b=bS(i);if(C.type==="tab"&&v.type==="tab"&&b.type==="tab"&&gL(n,C)&&gL(i,C)){let w=hL(n,C),B=hL(i,C);y=pL(r,w),y.length>0&&(n=w,i=B)}if(y.length===0)return l(B=>{let F=`No replacement was performed, oldStr did not appear verbatim in ${t}.`;if(B.oldStrStartLineNumber!==void 0&&B.oldStrEndLineNumber!==void 0){let Q=ES(r,B.oldStrStartLineNumber,B.oldStrEndLineNumber-B.oldStrStartLineNumber+1,AL),W=r.split(`
`).slice(B.oldStrStartLineNumber,B.oldStrEndLineNumber+1).join(`
`),Z=PI("oldStr","regionContent",B.oldStr+`
`,W+`
`,void 0,void 0,{context:3});F+=`
The content in the specified region is:
${Q}

Diff between oldStr and the specified region is:
${Z}`}return F})}if(y.length===1){let C=y[0];c=r.replace(n,v=>i),u=C.startLine,f=C.startLine+i.split(`
`).length-1}else{if(s===void 0||o===void 0)return l(()=>`Multiple occurrences of oldStr \`${n}\` found. Please provide line numbers to disambiguate.`);let C=mz(y,s,o,this._lineNumberErrorTolerance);if(C===-1){let $=s+1,ee=o+1;return l(()=>`No match found close to the provided line numbers (${$}, ${ee}).`)}let v=y[C],b=r.split(`
`),w=b.slice(0,v.startLine).join(`
`),B=b.slice(v.endLine+1).join(`
`),F=b.slice(v.startLine,v.endLine+1).join(`
`),Q=F.indexOf(n);if(Q===-1)return l(()=>"Internal error: Could not find the exact position of the match.");let W=F.substring(0,Q),Z=F.substring(Q+n.length);c=w+(w?`
`:"")+W+i+Z+(B?`
`:"")+B,u=v.startLine,f=v.startLine+i.split(`
`).length-1}}let p=n.split(`
`).length,A=i.split(`
`).length-p;return a(c,i,u,f,A,y=>`Replacement successful.
Edited section after IDE auto-formatting was applied:
${ES(y.newContent,y.newStrStartLineNumber,y.newStrEndLineNumber-y.newStrStartLineNumber+1,AL)}`)}async handleStrReplace(t,r,n,i){this._logger.debug(`Handling str_replace command for ${t}`);let s=yz(n);this._logger.debug(`Validated ${s.length} str_replace entries`);let o=Cz(s),{content:a,originalLineEnding:l}=Mm(r.contents),c=a,u=new Array(o.length);for(let f of o){let p=vz(f,o),g;p!==void 0?g={isError:!0,oldStr:f.old_str,oldStrStartLineNumber:f.old_str_start_line_number,oldStrEndLineNumber:f.old_str_end_line_number,numLinesDiff:0,genMessageFunc:()=>Ez(f,p)}:g=this.singleStrReplace(t,c,f.old_str,f.new_str,f.old_str_start_line_number,f.old_str_end_line_number),u[f.index]=g,!g.isError&&g.newContent!==void 0&&(c=g.newContent)}return this.prepareToolResponse(t,r,a,l,c,i,"str_replace",u)}async handleInsert(t,r,n,i){this._logger.debug(`Handling insert command for ${t}`);let s=bz(n);this._logger.debug(`Validated ${s.length} insert entries`);let{content:o,originalLineEnding:a}=Mm(r.contents),l=o,c=l.split(`
`),u=s;u.forEach((p,g)=>{p.index=g}),u.sort((p,g)=>g.insert_line-p.insert_line);let f=new Array(u.length);for(let p of u){let g=p.insert_line,A=Mm(p.new_str).content;if(c=l.split(`
`),g<0||g>c.length){f[p.index]={isError:!0,oldStr:"",oldStrStartLineNumber:g,oldStrEndLineNumber:g,numLinesDiff:0,genMessageFunc:()=>`Invalid \`insert_line\` parameter: ${g}. It should be within the range of lines of the file: [0, ${c.length}]`};continue}let y=A.split(`
`);l=[...c.slice(0,g),...y,...c.slice(g)].join(`
`),f[p.index]={isError:!1,oldStr:"",oldStrStartLineNumber:g,oldStrEndLineNumber:g,newContent:l,newStr:A,newStrStartLineNumber:g,newStrEndLineNumber:g+y.length-1,numLinesDiff:y.length,genMessageFunc:v=>`Successfully inserted new_str.
Edited section after IDE auto-formatting was applied:
${ES(v.newContent,v.newStrStartLineNumber,v.newStrEndLineNumber-v.newStrStartLineNumber+1,AL)}`}}return this.prepareToolResponse(t,r,o,a,l,i,"insert",f)}};var q7=V(O7()),rOe="Augment-WebFetch/1.0",aB=class extends Vr{_turndownService;_userAgent;constructor(t){super(zi.webFetch,mt.Unsafe);let r=new q7.default;r.addRule("removeStyleAndScriptTags",{filter:["style","script"],replacement:function(){return""}}),this._turndownService=r,this._userAgent=t||rOe}description=`Fetches data from a webpage and converts it into Markdown.

1. The tool takes in a URL and returns the content of the page in Markdown format;
2. If the return is not valid Markdown, it means the tool cannot successfully parse this page.`;inputSchemaJson=JSON.stringify({type:"object",properties:{url:{type:"string",description:"The URL to fetch."}},required:["url"]});checkToolCallSafe(t){return!1}async call(t,r,n){let i=t.url;try{let o=await(await fetch(i,{signal:n,headers:{"User-Agent":this._userAgent}})).text();return{text:this._turndownService.turndown(o),isError:!1}}catch(s){return{text:`Failed to fetch URL: ${i}: ${s instanceof Error?s.message:String(s)}`,isError:!0}}}};function nOe(e){return e===void 0?{num_lines:-1,num_chars:-1}:{num_lines:e.split(`
`).length,num_chars:e.length}}var lB=class{tracingData={flags:{},nums:{},string_stats:{},request_ids:{}};setFlag(t,r=!0){this.tracingData.flags[t]={value:r,timestamp:new Date().toISOString()}}getFlag(t){return this.tracingData.flags[t]?.value}setNum(t,r){this.tracingData.nums[t]={value:r,timestamp:new Date().toISOString()}}setStringStats(t,r){this.tracingData.string_stats[t]={value:nOe(r),timestamp:new Date().toISOString()}}setRequestId(t,r){this.tracingData.request_ids[t]={value:r,timestamp:new Date().toISOString()}}},cB;(function(e){e[e.unspecified=0]="unspecified",e[e.classify_and_distill=1]="classify_and_distill",e[e.orientation=2]="orientation"})(cB||(cB={}));var Gr;(function(e){e.memoriesRequestId="memoriesRequestId",e.exceptionThrown="exceptionThrown",e.toolOutputIsError="toolOutputIsError",e.injectionNoCodeWrapper="injectionNoCodeWrapper",e.rememberToolModelNameMissing="rememberToolModelNameMissing",e.compressionStarted="compressionStarted",e.compressionTargetMissing="compressionTargetMissing",e.compressionPromptMissing="compressionPromptMissing",e.compressionNumRecentMemoriesToKeepMissing="compressionNumRecentMemoriesToKeepMissing",e.compressionRecentMemoriesSubpromptMissing="compressionRecentMemoriesSubpromptMissing",e.compressionMemoriesQueueSize="compressionMemoriesQueueSize",e.compressionPromptStats="compressionPromptStats",e.compressionRequestId="compressionRequestId",e.compressionMemoriesStats="compressedMemoriesStats",e.compressionFailed="compressionFailed",e.setMemoriesStart="setMemoriesStart",e.setMemoriesUpperBoundSizeMissing="setMemoriesUpperBoundSizeMissing",e.setMemoriesNonEmptyLines="nonEmptyLines",e.setMemoriesNoMemoriesFile="noMemoriesFile",e.setMemoriesUpdateBufferFailed="updateBufferFailed",e.setMemoriesNoChangesMade="noChangesMade",e.injectionStarted="injectionStarted",e.injectionCurrentMemoriesStats="injectionCurrentMemoriesStats",e.injectionPromptMissing="injectionPromptMissing",e.injectionPromptStats="injectionPromptStats",e.injectionRequestId="injectionRequestId",e.injectionUpdatedMemoriesStats="injectionUpdatedMemoriesStats",e.injectionFailed="injectionFailed"})(Gr||(Gr={}));var uB=class e extends lB{caller;is_complex_new_memory;constructor(t,r){super(),this.caller=t,this.is_complex_new_memory=r}static create(t,r){return new e(t,r)}},V7;(function(e){e.start="start",e.end="end",e.memoriesRequestId="memoriesRequestId",e.exceptionThrown="exceptionThrown",e.lastUserExchangeRequestId="lastUserExchangeRequestId",e.noMemoryData="noMemoryData",e.agenticTurnHasRememberToolCall="agenticTurnHasRememberToolCall",e.emptyMemory="emptyMemory",e.removeUserExchangeMemoryFailed="removeUserExchangeMemoryFailed"})(V7||(V7={}));var Vi;(function(e){e.openedAgentConversation="opened-agent-conversation",e.revertCheckpoint="revert-checkpoint",e.agentInterruption="agent-interruption",e.sentUserMessage="sent-user-message",e.rememberToolCall="remember-tool-call",e.openedMemoriesFile="opened-memories-file",e.initialOrientation="initial-orientation",e.classifyAndDistill="classify-and-distill",e.flushMemories="flush-memories",e.vsCodeTerminalShellIntegrationNotAvailable="vs-code-terminal-shell-integration-not-available",e.vsCodeTerminalReadingApproximateOutput="vs-code-terminal-reading-approximate-output",e.vsCodeTerminalTimedOutWaitingForNoopCommand="vs-code-terminal-timed-out-waiting-for-noop-command",e.vsCodeTerminalFailedToUseShellIntegration="vs-code-terminal-failed-to-use-shell-integration",e.vsCodeTerminalLastCommandIsSameAsCurrent="vs-code-terminal-last-command-is-same-as-current",e.vsCodeTerminalPollingDeterminedProcessIsDone="vs-code-terminal-polling-determined-process-is-done",e.vsCodeTerminalFailedToReadOutput="vs-code-terminal-failed-to-read-output",e.vsCodeTerminalBuggyOutput="vs-code-terminal-buggy-output",e.vsCodeTerminalUnsupportedVSCodeShell="vs-code-terminal-unsupported-vscode-shell",e.vsCodeTerminalFailedToFindGitBash="vs-code-terminal-failed-to-find-git-bash",e.chatHistoryTruncated="chat-history-truncated"})(Vi||(Vi={}));var H7;(function(e){e.sentUserMessage="sent-user-message"})(H7||(H7={}));var Zm;(function(e){e[e.unspecified=0]="unspecified",e[e.onboarding=1]="onboarding",e[e.command=2]="command"})(Zm||(Zm={}));var Ft;(function(e){e.exceptionThrown="exceptionThrown",e.start="start",e.end="end",e.concurrencyLevelMissing="concurrencyLevelMissing",e.initialOrientationDisabled="initialOrientationDisabled",e.noRootFolderFound="noRootFolderFound",e.retryWithLowerConcurrencyLevel="retryWithLowerConcurrencyLevel",e.localizationPromptMissing="localizationPromptMissing",e.detectLanguagesPromptMissing="detectLanguagesPromptMissing",e.orientationCompressionPromptMissing="orientationCompressionPromptMissing",e.orientationMaxLanguagesMissing="orientationMaxLanguagesMissing",e.orientationBuildTestQueryMissing="orientationBuildTestQueryMissing",e.orientationModelNameMissing="orientationModelNameMissing",e.topLanguagesNumFiles="topLanguagesNumFiles",e.topLanguagesRequestId="topLanguagesRequestId",e.topLanguagesModelResponseStats="topLanguagesModelResponseStats",e.topLanguagesNumDetectedLanguages="topLanguagesNumDetectedLanguages",e.topLanguagesNumFinalLanguages="topLanguagesNumFinalLanguages",e.localizationStarted="localizationStarted",e.localizationEnded="localizationEnded",e.localizationPromptStats_0="localizationPromptStats_0",e.localizationPromptStats_1="localizationPromptStats_1",e.localizationPromptStats_2="localizationPromptStats_2",e.localizationPromptStats_3="localizationPromptStats_3",e.localizationPromptStats_4="localizationPromptStats_4",e.localizationPromptStats_5="localizationPromptStats_5",e.localizationRequestId_0="localizationRequestId_0",e.localizationRequestId_1="localizationRequestId_1",e.localizationRequestId_2="localizationRequestId_2",e.localizationRequestId_3="localizationRequestId_3",e.localizationRequestId_4="localizationRequestId_4",e.localizationRequestId_5="localizationRequestId_5",e.localizationResponseStats_0="localizationResponseStats_0",e.localizationResponseStats_1="localizationResponseStats_1",e.localizationResponseStats_2="localizationResponseStats_2",e.localizationResponseStats_3="localizationResponseStats_3",e.localizationResponseStats_4="localizationResponseStats_4",e.localizationResponseStats_5="localizationResponseStats_5",e.localizationParsingFailed_0="localizationParsingFailed_0",e.localizationParsingFailed_1="localizationParsingFailed_1",e.localizationParsingFailed_2="localizationParsingFailed_2",e.localizationParsingFailed_3="localizationParsingFailed_3",e.localizationParsingFailed_4="localizationParsingFailed_4",e.localizationParsingFailed_5="localizationParsingFailed_5",e.localizationNumLocations_0="localizationNumLocations_0",e.localizationNumLocations_1="localizationNumLocations_1",e.localizationNumLocations_2="localizationNumLocations_2",e.localizationNumLocations_3="localizationNumLocations_3",e.localizationNumLocations_4="localizationNumLocations_4",e.localizationNumLocations_5="localizationNumLocations_5",e.failedToListRootFolder="failedToListRootFolder",e.agenticStarted="agenticStarted",e.agenticEnded="agenticEnded",e.agenticNumTurns_0="agenticNumTurns_0",e.agenticNumTurns_1="agenticNumTurns_1",e.agenticNumTurns_2="agenticNumTurns_2",e.agenticNumTurns_3="agenticNumTurns_3",e.agenticNumTurns_4="agenticNumTurns_4",e.agenticNumTurns_5="agenticNumTurns_5",e.agenticModelResponseStats_0="agenticModelResponseStats_0",e.agenticModelResponseStats_1="agenticModelResponseStats_1",e.agenticModelResponseStats_2="agenticModelResponseStats_2",e.agenticModelResponseStats_3="agenticModelResponseStats_3",e.agenticModelResponseStats_4="agenticModelResponseStats_4",e.agenticModelResponseStats_5="agenticModelResponseStats_5",e.agenticFailedToComplete_0="agenticFailedToComplete_0",e.agenticFailedToComplete_1="agenticFailedToComplete_1",e.agenticFailedToComplete_2="agenticFailedToComplete_2",e.agenticFailedToComplete_3="agenticFailedToComplete_3",e.agenticFailedToComplete_4="agenticFailedToComplete_4",e.agenticFailedToComplete_5="agenticFailedToComplete_5",e.agenticModelResponseStats="agenticModelResponseStats",e.compressionRequestId="compressionRequestId",e.compressionModelResponseStats="compressionModelResponseStats",e.compressionParsingFailed="compressionParsingFailed",e.rememberStarted="rememberStarted",e.rememberEnded="rememberEnded",e.failedToReadGuidelines="failedToReadGuidelines",e.failedToWriteGuidelines="failedToWriteGuidelines"})(Ft||(Ft={}));var dB=class e extends lB{caller;constructor(t){super(),this.caller=t}static create(t){return new e(t)}},W7;(function(e){e.memoriesRequestId="memoriesRequestId",e.exceptionThrown="exceptionThrown",e.start="start",e.end="end",e.noPendingUserMessage="noPendingUserMessage",e.startSendSilentExchange="startSendSilentExchange",e.sendSilentExchangeRequestId="sendSilentExchangeRequestId",e.sendSilentExchangeResponseStats="sendSilentExchangeResponseStats",e.noRequestId="noRequestId",e.conversationChanged="conversationChanged",e.explanationStats="explanationStats",e.contentStats="contentStats",e.invalidResponse="invalidResponse",e.worthRemembering="worthRemembering",e.lastUserExchangeRequestId="lastUserExchangeRequestId",e.noLastUserExchangeRequestId="noLastUserExchangeRequestId"})(W7||(W7={}));async function Ap(e,t,r,n,i,s,o){return await ol().chatStream(e,t,r,n,i,s,o)}var fB=class extends pn{constructor(t,r,n,i){super(t,r,n,{...i}),this.addDisposable(this.onModifiedUpdated(()=>void this.writeDocumentToFile()))}async writeDocumentToFile(){this.modifiedCode===void 0?await Li().deleteFile(this.filePath):await Li().writeFile(this.filePath,this.modifiedCode)}};var hB=class extends Vr{_getAgentMemories;_getAgentMemoriesAbsPath;modelName=void 0;memoryRingBuffer;maxMemoryBufferSize=1e3;constructor(t,r){super(zi.remember,mt.Safe),this._getAgentMemories=t,this._getAgentMemoriesAbsPath=r,this.memoryRingBuffer=new jc(this.maxMemoryBufferSize)}description=`Call this tool when user asks you:
- to remember something
- to create memory/memories

Use this tool only with information that can be useful in the long-term.
Do not use this tool for temporary information.
`;inputSchemaJson=JSON.stringify({type:"object",properties:{memory:{type:"string",description:"The concise (1 sentence) memory to remember."}},required:["memory"]});checkToolCallSafe(t){return!0}async call(t,r,n){let i=t.memory;this.memoryRingBuffer.addItem(i);let s=t.isComplexNewMemory??!1,o=t.caller??cB.unspecified,a=t.memoriesRequestId,l=uB.create(o,s);if(this.modelName=rc().flags.memoriesParams?.remember_tool_model_name,!this.modelName)return l.setFlag(Gr.rememberToolModelNameMissing),ot("Failed to save memory.");this.modelName==="default"&&(this.modelName=void 0),a&&l.setRequestId(Gr.memoriesRequestId,a);let c;try{c=await this.injectMemories(i,s,l)}catch{l.setFlag(Gr.exceptionThrown)}finally{c===void 0&&(c=ot("Failed to save memory.")),l.setFlag(Gr.toolOutputIsError,c.isError),Ui().reportEvent({eventName:Vi.rememberToolCall,conversationId:"",eventData:{rememberToolCallData:l}})}return c}async injectMemories(t,r,n){n.setFlag(Gr.injectionStarted);let i=await this._getAgentMemories();if(n.setStringStats(Gr.injectionCurrentMemoriesStats,i),!i)return t.trim().split(`
`).length===1&&(t=`- ${t}`),this._setMemories(t,"",n);let s;if(r?s=rc().flags.memoriesParams.complex_injection_prompt:s=rc().flags.memoriesParams.injection_prompt,!s)return n.setFlag(Gr.injectionPromptMissing),ot("Failed to save memory.");s=s.replace("{currentMemories}",i).replace("{newMemory}",t),n.setStringStats(Gr.injectionPromptStats,s);try{let o=ao();n.setRequestId(Gr.injectionRequestId,o);let a=await this._callModel(s,o,n);return n.setStringStats(Gr.injectionUpdatedMemoriesStats,a),this._setMemories(a,i,n)}catch{return n.setFlag(Gr.injectionFailed),ot("Failed to save memory.")}}async _callModel(t,r,n){let i=await Ap(t,r,[],[],[],cn.chat,this.modelName);for await(let{nodes:s=[]}of i){let o=s.find(a=>a.type===nc.RAW_RESPONSE)?.content;if(o){let a=o.indexOf("```"),l=o.lastIndexOf("```");return a!==-1&&l!==-1&&l>a+3?o.substring(a+3,l).trim():(n.setFlag(Gr.injectionNoCodeWrapper),o.trim().replace(/^`+|`+$/g,"").trim())}}throw new Error("Model call failed")}async _setMemories(t,r,n){n.setFlag(Gr.setMemoriesStart);let i=rc().flags.memoriesParams.upper_bound_size;if(!i)return n.setFlag(Gr.setMemoriesUpperBoundSizeMissing),Promise.resolve(ot("Failed to save memories: upper bound size missing"));let s=t.split(`
`).filter(c=>c.trim()).length;n.setNum(Gr.setMemoriesNonEmptyLines,s),s>=i&&(t=await this._compressMemories(t,n));let o=this._getAgentMemoriesAbsPath();if(!o)return n.setFlag(Gr.setMemoriesNoMemoriesFile),Promise.resolve(ot("Failed to save memories: no memories file available"));let a=new fB(new qe("",o),r,r,{}),l=a.updateBuffer(t);return n.setFlag(Gr.setMemoriesUpdateBufferFailed,!l),t===r?(n.setFlag(Gr.setMemoriesNoChangesMade),a.dispose(),Promise.resolve(Gt("No changes made to memories"))):(a.dispose(),Promise.resolve(l?Gt("Memories saved successfully."):ot("Failed to update buffer")))}async _compressMemories(t,r){r.setFlag(Gr.compressionStarted);let n=rc().flags.memoriesParams.compression_target;if(!n)return r.setFlag(Gr.compressionTargetMissing),t;let i=rc().flags.memoriesParams.compression_prompt;if(!i)return r.setFlag(Gr.compressionPromptMissing),t;let s=rc().flags.memoriesParams.num_recent_memories_to_keep;if(s===void 0)return r.setFlag(Gr.compressionNumRecentMemoriesToKeepMissing),t;if(r.setNum(Gr.compressionMemoriesQueueSize,this.memoryRingBuffer.length),s>0&&i.includes("{recentMemoriesSubprompt}")&&this.memoryRingBuffer.length>0){let o=rc().flags.memoriesParams.recent_memories_subprompt;if(o===void 0)return r.setFlag(Gr.compressionRecentMemoriesSubpromptMissing),t;let a=this.memoryRingBuffer.slice(-s).map(l=>`- ${l}`).join(`
`);o=o.replace("{recentMemories}",a),i=i.replace("{recentMemoriesSubprompt}",o)}else i.includes("{recentMemoriesSubprompt}")&&(i=i.replace("{recentMemoriesSubprompt}",""));i=i.replace("{memories}",t).replace("{compressionTarget}",n.toString()),r.setStringStats(Gr.compressionPromptStats,i);try{let o=ao();r.setRequestId(Gr.compressionRequestId,o);let a=await this._callModel(i,o,r);return r.setStringStats(Gr.compressionMemoriesStats,a),a}catch{return r.setFlag(Gr.compressionFailed),t}}};var gB=class e extends Im{_chatMode;_clientFeatureFlags;_checkpointManager;_getAgentConfig;_getAgentMemories;_getAgentMemoriesAbsPath;_unsupportedSidecarTools;_userAgent;constructor(t,r,n,i,s,o,a,l){let c=zf(process.platform),u=[new aB(l)];i().disableRetrievalTool||u.push(new fS),t===cn.agent&&u.push(new hS(n)),t===cn.agent&&!i().useIDETerminalForShellCommands&&u.push(new Fm(i,t,process.platform,c)),t===cn.agent&&u.push(new hB(s,o)),t===cn.agent&&r.flags.agentEditTool===VI.strReplaceEditor&&u.push(new Qm(n)),super(u,No.sidecarToolHost,a),this._chatMode=t,this._clientFeatureFlags=r,this._checkpointManager=n,this._getAgentConfig=i,this._getAgentMemories=s,this._getAgentMemoriesAbsPath=o,this._unsupportedSidecarTools=a,this._userAgent=l}factory(){return new e(this._chatMode,this._clientFeatureFlags,this._checkpointManager,this._getAgentConfig,this._getAgentMemories,this._getAgentMemoriesAbsPath,this._unsupportedSidecarTools,this._userAgent)}};var pB=class{_mcpServers;_clientToolHostFactory;_remoteInfoSource;_mcpToolsStartupErrorFn;_clientFeatureFlags;_checkpointManager;_getAgentMemories;_getMemoriesAbsPath;_getAgentConfig;_getToolUseRequestEventReporter;_options;_hosts=[];_allToolHosts=[];_chatMode=cn.chat;_logger=Mr("ToolsModel");constructor(t,r,n,i,s,o,a,l,c,u,f={}){this._mcpServers=t,this._clientToolHostFactory=r,this._remoteInfoSource=n,this._mcpToolsStartupErrorFn=i,this._clientFeatureFlags=s,this._checkpointManager=o,this._getAgentMemories=a,this._getMemoriesAbsPath=l,this._getAgentConfig=c,this._getToolUseRequestEventReporter=u,this._options=f,this.restartHosts()}get memoriesAbsPath(){return this._getMemoriesAbsPath()}async getToolMap(){let t=new Map;for(let r of this.hosts){let n=await r.getToolDefinitions();for(let i of n)this.isEnabled(i.definition.name)&&t.set(i.definition.name.toString(),r)}return t}get hosts(){return this._hosts}get chatMode(){return this._chatMode}setMode(t){t!==this._chatMode&&(this._chatMode=t,this.restartHosts())}getMode(){return this._chatMode}onFlagsChanged(){this.restartHosts()}setMcpServers(t){this._mcpServers=t,this.restartHosts()}async getToolDefinitions(){let t=[];for(let r of this.hosts){let n=await r.getToolDefinitions();for(let i of n)this.isEnabled(i.definition.name)&&t.push(i)}return t}async getToolStatusForSettingsPanel(t=!0){let r=[];for(let n of this._allToolHosts){let i=await n.getAllToolDefinitions(t);r.push(...i)}return r}async callTool(t,r,n,i,s,o){let l=(await this.getToolMap()).get(n);if(l===void 0)return{isError:!0,text:`Tool ${n} not found.`};if(!this.isEnabled(n))return{isError:!0,text:`Tool ${n} is disabled.`};let c=Date.now(),u=await l.callTool(t,r,n,i,s),f=this._getToolUseRequestEventReporter();return f!==void 0&&f.reportEvent(t,n,r,i,u.isError,Date.now()-c,l instanceof nE,o,s.length,u.requestId),u}async checkToolCallSafe(t,r){let i=(await this.getToolMap()).get(t);if(i===void 0)throw new Error(`Cannot find the host for tool '${t}'.`);return await i.checkToolCallSafe(t,r)}async checkToolExists(t){return(await this.getToolMap()).has(t)}async cancelToolRun(t,r){for(let n=0;n<this.hosts.length;n++){let i=this.hosts[n];if(i.isRequestActive(t,r)){let s=i.close(!0);return this._hosts[n]=i.factory(s),s}}return Promise.resolve()}restartHosts(){let t=this._allToolHosts.map(l=>l.close()),r=Promise.all(t).then(()=>{}),n=this._mcpServers.map(l=>new nE(l,r,this._mcpToolsStartupErrorFn)),i=new uS(this._remoteInfoSource),s=this._clientToolHostFactory(this._chatMode,this._getAgentConfig),o=new gB(this._chatMode,this._clientFeatureFlags,this._checkpointManager,this._getAgentConfig,this._getAgentMemories,this._getMemoriesAbsPath,this._options.unsupportedSidecarTools??new Set,this._options.userAgent);this._allToolHosts=[...n,s,i,o];let a=this._chatMode===cn.chat&&this._clientFeatureFlags.flags.enableChatWithTools||this._chatMode===cn.agent&&this._clientFeatureFlags.flags.enableAgentMode;this._hosts=[...n],a&&(this._hosts=this.hosts.concat([s,i,o])),this.logTools()}closeAllToolProcesses(){for(let t of this.hosts)t.closeAllToolProcesses()}getTool(t){for(let r of this.hosts){let n=r.getTool(t);if(n)return n}}async logTools(){this._logger.info(`Tools Mode: ${this._chatMode}`);for(let t of this.hosts){let r=await t.getToolDefinitions(),n=[],i=[];for(let a of r)(this.isEnabled(a.definition.name)?n:i).push(a.definition.name);let s=n.map(a=>` + ${a}`).join(`
`),o=i.map(a=>` - ${a}`).join(`
`);this._logger.info(`Host: ${t.getName()}
${s}
${o}`)}}isEnabled(t){return!(t==="codebase-retrieval"&&this._getAgentConfig().disableRetrievalTool)}};var qo;(function(e){e.empty="empty"})(qo||(qo={}));var Zi;(function(e){e.getEditListRequest="agent-get-edit-list-request",e.getEditListResponse="agent-get-edit-list-response",e.getEditChangesByRequestIdRequest="agent-get-edit-changes-by-request-id-request",e.getEditChangesByRequestIdResponse="agent-get-edit-changes-by-request-id-response",e.setCurrentConversation="agent-set-current-conversation",e.revertToTimestamp="revert-to-timestamp",e.chatAgentEditAcceptAll="chat-agent-edit-accept-all",e.reportAgentSessionEvent="report-agent-session-event",e.reportAgentRequestEvent="report-agent-request-event",e.chatReviewAgentFile="chat-review-agent-file",e.checkHasEverUsedAgent="check-has-ever-used-agent",e.checkHasEverUsedAgentResponse="check-has-ever-used-agent-response",e.setHasEverUsedAgent="set-has-ever-used-agent"})(Zi||(Zi={}));var eh;(function(e){e.hasEverUsedAgent="hasEverUsedAgent"})(eh||(eh={}));var AB=class{_checkpointManager;_logger=Mr("AgentWebviewMessageHandler");supportedTypes=Zi;constructor(t){this._checkpointManager=t}async handle(t,r){switch(t.type){case Zi.getEditListRequest:{let n=t,i=await this._getAgentEditList(n);r(i);break}case Zi.setCurrentConversation:{let n=t;this._checkpointManager.setCurrentConversation(n.data.conversationId),r({type:qo.empty});break}case Zi.getEditChangesByRequestIdRequest:{let n=t,i=await this._getAgentEditChangesByRequestId(n);r(i);break}case Zi.revertToTimestamp:{let n=t;n.data.qualifiedPathNames?.length?await Promise.all(n.data.qualifiedPathNames.map(async i=>{await this._checkpointManager.revertDocumentToTimestamp(qe.from(i),n.data.timestamp)})):await this._checkpointManager.revertToTimestamp(n.data.timestamp),r({type:qo.empty});break}case Zi.chatAgentEditAcceptAll:{r({type:qo.empty});break}case Zi.reportAgentSessionEvent:{Ui().reportEvent(t.data),r({type:qo.empty});break}case Zi.reportAgentRequestEvent:{VY().reportEvent(t.data),r({type:qo.empty});break}case Zi.chatReviewAgentFile:{let n=t;await this._showAgentReview(n),r({type:qo.empty});break}case Zi.checkHasEverUsedAgent:{let n=await QP().getValue(Og.agent,eh.hasEverUsedAgent,Hf.global);r({type:Zi.checkHasEverUsedAgentResponse,data:n??!1});break}case Zi.setHasEverUsedAgent:{let n=t;await QP().setValue(Og.agent,eh.hasEverUsedAgent,n.data,Hf.global),r({type:qo.empty});break}}}_getAgentEditList=async t=>{let{fromTimestamp:r=0,toTimestamp:n}=t.data,i=await this._checkpointManager.getAggregateCheckpoint({minTimestamp:r,maxTimestamp:n});return{type:Zi.getEditListResponse,data:{edits:i.files.map(s=>({qualifiedPathName:s.changeDocument.filePath,changesSummary:s.changesSummary}))}}};_getAgentEditChangesByRequestId=async t=>{let r=await this._checkpointManager.getCheckpointByRequestId(t.data.requestId);return r!==void 0?{type:Zi.getEditChangesByRequestIdResponse,data:r.files.at(0)?.changesSummary}:{type:Zi.getEditChangesByRequestIdResponse,data:void 0}};_showAgentReview=async t=>{let r=qe.from(t.data.qualifiedPathName),i=(await this._checkpointManager.getAggregateCheckpointForFile(r,{minTimestamp:t.data.fromTimestamp,maxTimestamp:t.data.toTimestamp})).files.at(0)?.changeDocument;return i?(await FY().showDiffView(i.filePath,i.originalCode,i.modifiedCode,{retainFocus:t.data.retainFocus}),Promise.resolve({type:qo.empty})):Promise.resolve({type:qo.empty})}};var th;(function(e){e.closeAllToolProcesses="close-all-tool-processes",e.getToolIdentifierRequest="get-tool-identifier-request",e.getToolIdentifierResponse="get-tool-identifier-response"})(th||(th={}));var mB=class{_toolsModel;_logger=Mr("ToolsWebviewMessageHandler");supportedTypes=th;constructor(t){this._toolsModel=t}async handle(t,r){switch(t.type){case th.closeAllToolProcesses:{this._logger.info("Received closeAllToolProcesses message"),this._toolsModel.closeAllToolProcesses(),r({type:qo.empty});break}case th.getToolIdentifierRequest:{let n=await this.getToolIdentifier(t);r(n);break}}return Promise.resolve()}getToolIdentifier=async t=>{let r=await this._toolsModel.getToolDefinitions();for(let n of r)if(n.definition.name===t.data.toolName)return{type:th.getToolIdentifierResponse,data:{found:!0,toolIdentifier:n.identifier}};return{type:th.getToolIdentifierResponse,data:{found:!1}}}};var yB=class{_handlers=new Map;_logger=Mr("WebviewMessageBroker");registerHandler(t){let r=Object.values(t.supportedTypes);for(let n of r)this._handlers.set(n,(i,s)=>t.handle(i,s))}handle(t,r){let n=this._handlers.get(t.type);return n?(n(t,r),!0):(this._logger.debug(`No webview message handler found for '${t.type}' in the sidecar broker.`),!1)}};var CB=class{_broker;constructor(t,r){this._broker=new yB;let n=[new AB(t),new mB(r)];for(let i of n)this._broker.registerHandler(i)}onMessage(t,r){return this._broker.handle(t,r)}};var G7=V(require("crypto")),TE=2023102300,DE=class extends Error{constructor(t){super(`content exceeds maximum size of ${t}`)}},rh=class{maxBlobSize;_textEncoder=new TextEncoder;constructor(t){this.maxBlobSize=t}_hash(t,r){let n=G7.createHash("sha256");return n.update(t),n.update(r),n.digest("hex")}calculateOrThrow(t,r,n=!0){if(typeof r=="string"&&(r=this._textEncoder.encode(r)),n&&r.length>this.maxBlobSize)throw new DE(this.maxBlobSize);return this._hash(t,r)}calculate(t,r){try{return this.calculateOrThrow(t,r,!0)}catch{return}}calculateNoThrow(t,r){return this.calculateOrThrow(t,r,!1)}};var pIe=require("console"),AIe=require("crypto"),mIe=V(vs()),V6=V(Hee()),yIe=V(rde()),XN=V(require("os"));var nde=V(require("crypto")),aR=new Uint8Array(256),oR=aR.length;function F5(){return oR>aR.length-16&&(nde.default.randomFillSync(aR),oR=0),aR.slice(oR,oR+=16)}var ide=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function att(e){return typeof e=="string"&&ide.test(e)}var M5=att;var Bs=[];for(let e=0;e<256;++e)Bs.push((e+256).toString(16).slice(1));function sde(e,t=0){return Bs[e[t+0]]+Bs[e[t+1]]+Bs[e[t+2]]+Bs[e[t+3]]+"-"+Bs[e[t+4]]+Bs[e[t+5]]+"-"+Bs[e[t+6]]+Bs[e[t+7]]+"-"+Bs[e[t+8]]+Bs[e[t+9]]+"-"+Bs[e[t+10]]+Bs[e[t+11]]+Bs[e[t+12]]+Bs[e[t+13]]+Bs[e[t+14]]+Bs[e[t+15]]}var ode=V(require("crypto")),Q5={randomUUID:ode.default.randomUUID};function ltt(e,t,r){if(Q5.randomUUID&&!t&&!e)return Q5.randomUUID();e=e||{};let n=e.random||(e.rng||F5)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let i=0;i<16;++i)t[r+i]=n[i];return t}return sde(n)}var Mh=ltt;var Ge=V(require("vscode"));function Il(e){return{checkpoint_id:e.checkpointId,added_blobs:e.addedBlobs.sort(),deleted_blobs:e.deletedBlobs.sort()}}function gy(e,t,r){if(!Array.isArray(r))throw new Error(`Value of ${e}.${t} is not Array`)}function Wi(e,t,r){let n=typeof r;if(n!=="number")throw new Error(`Value of ${e}.${t} has unexpected type. Expected number, received ${n}`);return r}function vi(e,t,r){let n=typeof r;if(n!=="string")throw new Error(`Value of ${e}.${t} has unexpected type. Expected string, received ${n}`);return r}function Sl(e,t,r){gy(e,t,r);let n=[];for(let i of r)n.push(vi(e,t,i));return n}function Iu(e,t,r,n=!1){if(r===null)return n;let i=typeof r;if(i!=="boolean")throw new Error(`Value of ${e}.${t} has unexpected type. Expected boolean, received ${i}`);return r}function py(e,t=""){let r=[];if(typeof e!="object"||e===null)return ade(e);for(let[n,i]of Object.entries(e))if(Array.isArray(i)){r.push(`${t}${n}: (array) ${i.length} (array length) ${JSON.stringify(i).length} (char length)`);let s=20;i.slice(0,s).forEach((o,a)=>{r.push(`${t}  [${a}]: ${py(o,t+"  ")}`)}),i.length>s&&r.push(`${t}  ${i.length-s} more items...`)}else typeof i=="object"&&i!==null?(r.push(`${t}${n}: (object) ${Object.keys(i).length} (object size) ${JSON.stringify(i).length} (char length)`),r.push(py(i,t+"  "))):r.push(`${t}${n}: ${ade(i)}`);return r.join(`
`)}function ade(e){return typeof e=="string"?`${e.length} (string length)`:typeof e=="boolean"||e===null||typeof e=="number"?"1":"N/A"}var Ck=V(Ife()),Fx=V(require("vscode"));var Cme=V(require("vscode")),Wh=V(yme()),vme=V(qh()),vW=class extends vme.default{constructor(r){super();this.outputChannel=r;this._logFns.set("info",r.info),this._logFns.set("debug",r.debug),this._logFns.set("warn",r.warn),this._logFns.set("error",r.error),this._logFns.set("verbose",r.trace)}_logFns=new Map;log(r,n){setImmediate(()=>{this.emit("logged",r)});let i=[r.prefix?`'${r.prefix}'`:"",r.message].join(" "),s=this._logFns.get(r.level);s?s(i):this.outputChannel.appendLine(i),n()}},Rx;function Eut(){if(Rx)return Rx;let e=Cme.window.createOutputChannel("Augment",{log:!0}),t=[new vW(e)];return process.env.CONSOLE_LOG_LEVEL&&t.push(new Wh.transports.Console({level:process.env.CONSOLE_LOG_LEVEL})),Rx=(0,Wh.createLogger)({level:"debug",exitOnError:!1,format:Wh.format.combine(Wh.format.timestamp({format:"YYYY-MM-DD HH:mm:ss.SSS"}),Wh.format.printf(r=>`${r.timestamp} [${r.level}] '${r.prefix}': ${r.message}`)),transports:t}),Q$(Rx),Rx}function j(e){return Eut().child({prefix:e})}var kx=V(vs()),Ry=class{constructor(t,r,n){this.name=t;this._logger=r;this._configListener=n}_isSet=!1;_value;get value(){return this._value}update(t){return this._isSet&&(0,kx.isEqual)(t,this._value)?!1:(this._isSet?this._logger.info(`${this.name} changed:
${this.diff(this.value,t).map(r=>`  - ${r}`).join(`
`)}`):this._logger.info(`${this.name} changed from <unset> to ${this._formatValue(t)}`),this._value=(0,kx.cloneDeep)(t),this._isSet=!0,!0)}diff(t,r,n=[]){if((0,kx.isEqual)(r,t))return[];if(!this.isObject(r)||!this.isObject(t))return[`${this._formatValue(t)} to ${this._formatValue(r)}`];let i=new Set([...Object.keys(t||{}),...Object.keys(r||{})]),s=[];for(let o of i){if(this._configListener&&!this._configListener.config.enableDebugFeatures&&o==="memoriesParams")continue;let a=r?r[o]:void 0,l=t?t[o]:void 0;!this.isObject(a)||!this.isObject(l)?a!==l&&s.push(`${n.concat(o).join(" > ")}: ${this._formatValue(l)} to ${this._formatValue(a)}`):s.push(...this.diff(l,a,n.concat(o)))}return s}isObject(t){return typeof t=="object"&&t!==null}toString(){return this._isSet?this._formatValue(this.value):"<unset>"}_formatValue(t){return t===void 0?"undefined":JSON.stringify(t)}};var Sc=class{_disposables=[];add(t){if(t===void 0)throw new Error("Attempt to add undefined disposable to DisposableCollection");return this._disposables.push(t),t}addAll(...t){t.forEach(r=>this.add(r))}adopt(t){this._disposables.push(...t._disposables),t._disposables.length=0}dispose(){for(let t of this._disposables)t.dispose();this._disposables.length=0}},X=class{_disposables=new Sc;_priorityDisposables=new Sc;constructor(t=new Sc,r=new Sc){this._disposables.adopt(t),this._priorityDisposables.adopt(r)}addDisposable(t,r=!1){return r?this._priorityDisposables.add(t):this._disposables.add(t)}addDisposables(...t){this._disposables.addAll(...t)}dispose(){this._priorityDisposables.dispose(),this._disposables.dispose()}};var but=128*1024,lA={gitDiff:!1,gitDiffPollingFrequencyMSec:0,additionalChatModels:"",smallSyncThreshold:15,bigSyncThreshold:1e3,enableWorkspaceManagerUi:!0,enableInstructions:!1,enableSmartPaste:!1,enableSmartPasteMinVersion:"",enableViewTextDocument:!1,bypassLanguageFilter:!1,enableHindsight:!1,maxUploadSizeBytes:but,vscodeNextEditBottomPanelMinVersion:"",vscodeNextEditMinVersion:"",vscodeNextEditUx1MaxVersion:"",vscodeNextEditUx2MaxVersion:"",vscodeFlywheelMinVersion:"",vscodeExternalSourcesInChatMinVersion:"",vscodeShareMinVersion:"",maxTrackableFileCount:25e4,maxTrackableFileCountWithoutPermission:15e4,minUploadedPercentageWithoutPermission:90,vscodeSourcesMinVersion:"",vscodeChatHintDecorationMinVersion:"",nextEditDebounceMs:400,enableCompletionFileEditEvents:!1,vscodeEnableCpuProfile:!1,verifyFolderIsSourceRepo:!1,refuseToSyncHomeDirectories:!1,enableFileLimitsForSyncingPermission:!1,enableChatMermaidDiagrams:!1,enableSummaryTitles:!1,smartPastePrecomputeMode:"visible-hover",vscodeNewThreadsMenuMinVersion:"",vscodeEditableHistoryMinVersion:"",vscodeEnableChatMermaidDiagramsMinVersion:"",userGuidelinesLengthLimit:2e3,workspaceGuidelinesLengthLimit:2e3,enableGuidelines:!1,useCheckpointManagerContextMinVersion:"",validateCheckpointManagerContext:!1,vscodeDesignSystemRichTextEditorMinVersion:"",allowClientFeatureFlagOverrides:!1,vscodeChatWithToolsMinVersion:"",vscodeChatMultimodalMinVersion:"",vscodeAgentModeMinVersion:"",vscodeAgentModeMinStableVersion:"",vscodeBackgroundAgentsMinVersion:"",vscodeAgentEditTool:"backend_edit_tool",vscodeRichCheckpointInfoMinVersion:"",memoriesParams:{},eloModelConfiguration:{highPriorityModels:[],regularBattleModels:[],highPriorityThreshold:.5},vscodeVirtualizedMessageListMinVersion:"",vscodeChatStablePrefixTruncationMinVersion:""},EW=class{constructor(t,r,n){this._watchedFlags=r;this._callback=n;this._currentFlags=(0,Ck.default)(t)}_disposed=!1;_currentFlags;get disposed(){return this._disposed}trigger(t){if(this._disposed)return;let r=[];for(let n of this._watchedFlags)t[n]!==this._currentFlags[n]&&r.push(n);r.length>0&&this._callback({previousFlags:this._currentFlags,newFlags:t,changedFlags:r})}dispose(){this._disposed=!0}},vk=class extends X{_subscriptions=[];_refreshTimer;_disposed=!1;_logger=j("FeatureFlagManager");_flags;constructor(t,r){super(),this._flags=new Ry("feature flags",this._logger,r),this._flags.update(t?.initialFlags??lA),this._setupRefreshTimer(t),this.addDisposable(Fx.workspace.onDidChangeConfiguration(()=>{this._subscriptions=this._subscriptions.filter(n=>!n.disposed);for(let n of this._subscriptions)n.trigger(this.currentFlags)}))}get currentFlags(){if(this._disposed)throw Error("FeatureFlagManager has been disposed");return this._flags.value?.allowClientFeatureFlagOverrides?{...(0,Ck.default)(this._flags.value),...this.readOverridesFromConfig()}:(0,Ck.default)(this._flags.value)}readOverridesFromConfig(){let t=Fx.workspace.getConfiguration("augment");if(t.advanced==null||typeof t.advanced!="object")return{};let r=t.advanced.featureFlagOverrides,n={};if(typeof r=="object")for(let i of Object.keys(r))lA[i]===void 0?j("AugmentConfigListener").warn(`Feature flag override for ${i} is not a valid feature flag.`):typeof r[i]!=typeof lA[i]?j("AugmentConfigListener").warn(`Feature flag override for ${i} is does not match default type ${typeof lA[i]}.`):r[i]!==void 0&&lA[i]!==void 0&&Object.assign(n,{[i]:r[i]});return n}update(t){if(this._disposed)throw Error("FeatureFlagManager has been disposed");this._flags.update(t),this._subscriptions=this._subscriptions.filter(r=>!r.disposed);for(let r of this._subscriptions)r.trigger(t)}subscribe(t,r){if(this._disposed)throw Error("FeatureFlagManager has been disposed");let n=new EW(this._flags.value,t,r);return this._subscriptions.push(n),n}_setupRefreshTimer(t){if(!t?.fetcher||!t?.refreshIntervalMSec)return;this._cleanupRefreshTimer();let r=new Fx.CancellationTokenSource().token,n=t.fetcher,i=t.refreshIntervalMSec,s=async()=>{let o=await n(r);o?this.update(o):r.isCancellationRequested&&this._cleanupRefreshTimer()};this._refreshTimer=setInterval(()=>void s(),i)}_cleanupRefreshTimer(){clearInterval(this._refreshTimer),this._refreshTimer=void 0}dispose(){this._disposed||(super.dispose(),this._subscriptions.forEach(t=>t.dispose()),this._subscriptions=[],this._cleanupRefreshTimer(),this._disposed=!0)}};var _ut=Eme(),bW=[],wut=new Set;for(let e of _ut){bW.push({name:e.name,vscodeName:e.vscodeName,extensions:e.extensions});for(let t of e.extensions)wut.add(t)}var Rs=(se=>(se.Unknown="unknown",se.Command="command",se.Background="background",se.Global="global",se.Click="click",se.RightClick="right-click",se.HoverClick="hover-click",se.EditorActionClick="editor-action-click",se.Keybinding="keybinding",se.Keyboard="keyboard",se.ActiveEditorChanged="active-editor-changed",se.EditorSelectionChanged="editor-selection-changed",se.EditorVisibleRangesChanged="editor-visible-ranges-changed",se.HoveredOutsideSuggestion="hovered-outside-suggestion",se.DocumentChanged="document-changed",se.NextEditPanelItemFocusClick="next-edit-panel-item-focus-click",se.NextEditPanelItemClick="next-edit-panel-item-click",se.CodeAction="code-action",se.GutterClick="gutter-click",se.CodeLens="code-lens",se.Tutorial="tutorial",se.Error="error",se.ValidationExpected="validation-expected",se.ValidationUnexpected="validation-unexpected",se.DebugSession="debug-session",se.NotebookDocument="notebook-document",se.UnsupportedUri="unsupported-uri",se.MissingPathName="missing-path-name",se.NotActiveEditor="not-active-editor",se.NoContentChanges="no-content-changes",se.FreshSuggestions="fresh-suggestions",se))(Rs||{}),xW=class{constructor(t,r,n,i,s){this.path=t;this.range=r;this.charStart=n;this.charStop=i;this.header=s}},Ek=class extends xW{constructor(t,r,n,i,s){super(t,r,n,i,s)}};var bk=class{constructor(t,r,n,i,s,o,a){this.requestId=t;this.mode=r;this.scope=n;this.qualifiedPathName=i;this.apiResult=s;this.suggestions=o;this.requestTime=a}occurredAt=new Date};function xk(e,t){return e!=null&&typeof e=="object"&&t in e}function Yn(e){return e==null}function bme(e){if(xk(AbortSignal,"any")&&typeof AbortSignal.any=="function")return AbortSignal.any(e);let t=new AbortController;if(e.some(i=>i.aborted))return t.abort(),t.signal;let r=[],n=()=>{t.abort(),r.forEach(i=>i())};for(let i of e)i.addEventListener("abort",n),r.push(()=>i.removeEventListener("abort",n));return t.signal}function Tl(e){return[...e].length}function _W(e,t){return[...e].slice(0,t).join("").length}var wW=class{_items=new Map;_inProgress=!1;_stopping=!1;dispose(){this._stopping=!0}get size(){return this._items.size}cancel(t){this._items.delete(t)}_insert(t,r,n=!1){let i=this._items.has(t);return!n&&i?!1:(this._items.set(t,r),!i)}async kick(){if(!(this._inProgress||this._stopping||this._items.size===0)){for(this._inProgress=!0;this._items.size>0&&!this._stopping;){let t=this._items;this._items=new Map;for(let r of t){try{await this._processEntry(r)}catch{}if(this._stopping)break}}this._inProgress=!1,await this._processEntry(void 0)}}};var Zo=class extends wW{constructor(r){super();this._processItem=r}insert(r,n,i=!1){return this._insert(r,n,i)}get(r){return this._items.get(r)}async _processEntry(r){return this._processItem(r)}},Ma=class{constructor(t){this._processItem=t}_keys=new Set;_items=new Array;_inProgress=!1;_stopping=!1;get size(){return this._items.length}dispose(){this._stopping=!0}insert(t){return this._keys.has(t)?!1:(this._keys.add(t),this._items.push(t),!0)}async kick(){if(!(this._inProgress||this._stopping)){for(this._inProgress=!0;this._items.length>0&&!this._stopping;){let t=this._items;this._keys.clear(),this._items=new Array;for(let r of t){try{await this._processItem(r)}catch{}if(this._stopping)break}}this._inProgress=!1,await this._processItem(void 0)}}},Bc=class{constructor(t,r){this._toKick=t;this._intervalId=setInterval(this._kick.bind(this),r)}_intervalId;_kick(){this._toKick.kick()}dispose(){this._intervalId!==void 0&&clearInterval(this._intervalId)}},_k=class{constructor(t){this._processItem=t}_items=[];_inProgress=!1;_stopping=!1;get size(){return this._items.length}dispose(){this._stopping=!0}insert(t){return new Promise((r,n)=>{this._items.push({itemArg:t,resolve:r,reject:n})})}insertAndKick(t){let r=this.insert(t);return this.kick(),r}async kick(){if(!(this._inProgress||this._stopping)){for(this._inProgress=!0;this._items.length>0&&!this._stopping;){let t=this._items.pop();try{let r=await this._processItem(t.itemArg);t.resolve(r)}catch(r){t.reject(r)}}this._inProgress=!1,await this._processItem(void 0)}}};var wk=class extends Error{constructor(t,r){super(`Conversion failure: ${t}. Response = ${r}`)}},IW=class e{constructor(t,r,n,i,s){this._configListener=t;this._auth=r;this.sessionId=n;this._userAgent=i;this._fetchFunction=s}static defaultRequestTimeoutMs=3e4;_sequenceId=new SW;_logger=j("AugmentExtension");getSessionId(){return this.sessionId}createRequestId(){return Mh()}async callApi(t,r,n,i,s,o,a,l,c,u){let f=u??r.apiToken,p=!1;if(this._auth.useOAuth&&!u){let Q=await this._auth.getSession();Q&&(f=Q.accessToken,p=!0,o||(o=Q.tenantURL))}else o||(o=r.completionURL);if(!o)throw new Error("Please configure Augment API URL");let g;try{g=new URL(n,o)}catch(Q){throw this._logger.error("Augment API URL is invalid:",Q),new Vf}if(!g.protocol.startsWith("http"))throw new Error("Augment API URL must start with 'http://' or 'https://'");let A=JSON.stringify(i,(Q,W)=>W===void 0?null:W),y=a??e.defaultRequestTimeoutMs,C=AbortSignal.timeout(y),v="POST",b,w,B;try{let Q={"Content-Type":"application/json","User-Agent":this._userAgent,"x-request-id":`${t}`,"x-request-session-id":`${this.sessionId}`,"x-api-version":"2"};f&&(Q.Authorization=`Bearer ${f}`),w=Date.now(),b=await Kv(this._fetchFunction(g.toString(),{method:v,headers:Q,body:A,signal:bme([C].concat(c?[c]:[]))}),y),B=Date.now()}catch(Q){throw Q instanceof Error?(this._logger.error(`API request ${t} to ${g.toString()} failed: ${$e(Q,!0)}`),Qr.transientIssue(Q.message)):(this._logger.debug(`API request ${t} to ${g.toString()} failed`),Q)}if(l&&(l.rpcStart=w,l.rpcEnd=B),!b.ok)throw b.status===499?Qr.fromResponse(b):(b.status===401&&p&&this._auth.removeSession(),b.status===400&&r.enableDebugFeatures&&this._logger.error(`API request ${t} to ${g.toString()} failed: ${await b.text()}`),this._logger.error(`API request ${t} to ${g.toString()} response ${b.status}: ${b.statusText}`),Qr.fromResponse(b).status===We.augmentTooLarge&&this._logger.debug(`object size is ${py(i)} `),Qr.fromResponse(b));let F;try{if(b.headers.get("content-length")==="0")return;F=await b.json()}catch(Q){throw this._logger.error(`API request ${t} to ${g.toString()} failed to convert response to json: ${Q.message}`),Q}try{return s?s(F):F}catch(Q){throw new wk($e(Q),JSON.stringify(F))}}async callApiStream(t,r,n,i,s=c=>c,o,a,l){let c=r.apiToken;if(this._auth.useOAuth){let w=await this._auth.getSession();w&&(c=w.accessToken,o||(o=w.tenantURL))}else o||(o=r.completionURL);if(!o)throw new Error("Please configure Augment API URL");let u;try{u=new URL(n,o)}catch(w){throw this._logger.error("Augment API URL is invalid:",w),new Vf}if(!u.protocol.startsWith("http"))throw new Error("Augment API URL must start with 'http://' or 'https://'");let f=JSON.stringify(i,(w,B)=>B===void 0?null:B),p=a??e.defaultRequestTimeoutMs,g=AbortSignal.timeout(p),A="POST",y;try{let w={"Content-Type":"application/json","User-Agent":this._userAgent,"x-request-id":`${t}`,"x-request-session-id":`${l??this.sessionId}`};c&&(w.Authorization=`Bearer ${c}`),y=await Kv(this._fetchFunction(u.toString(),{method:A,headers:w,body:f,signal:g}),p)}catch(w){throw w instanceof Error?(this._logger.error(`API request ${t} to ${u.toString()} failed: ${$e(w,!0)}`),w.stack&&this._logger.error(w.stack),Qr.transientIssue(w.message)):w}if(!y.ok)throw y.status===499?Qr.fromResponse(y):(y.status===401&&this._auth.removeSession(),y.status===400&&r.enableDebugFeatures&&this._logger.error(`API request ${t} to ${u.toString()} failed: ${await y.text()}`),this._logger.error(`API request ${t} to ${u.toString()} response ${y.status}: ${y.statusText}`),Qr.fromResponse(y).status===We.augmentTooLarge&&this._logger.debug(`object size is ${i?py(i):0} `),Qr.fromResponse(y));let C=y.body.getReader(),v=this._logger;async function*b(w){let B=new TextDecoder,F="";for(;;){let{value:Q,done:W}=await w.read(new Uint8Array);if(W)return;for(F+=B.decode(Q,{stream:!0});F.includes(`
`);){let Z=F.indexOf(`
`),$=F.substring(0,Z);F=F.substring(Z+1);try{let ee=JSON.parse($);yield s(ee)}catch(ee){v.error(`JSON parse failed for ${$}: ${$e(ee)}`)}}}}return b(C)}_toCompletionItem(t){if(typeof t.text!="string")throw new Error(`Completion item text is not a string: ${JSON.stringify(t)}`);if(t.skipped_suffix!==void 0&&typeof t.skipped_suffix!="string")throw new Error(`Completion item skipped suffix is not a string: ${JSON.stringify(t)}`);if(t.suffix_replacement_text!==void 0&&typeof t.suffix_replacement_text!="string")throw new Error(`Completion item suffix replacement text is not a string: ${JSON.stringify(t)}`);return{text:t.text,suffixReplacementText:t.suffix_replacement_text??"",skippedSuffix:t.skipped_suffix??"",filterScore:t.filter_score??void 0}}_extractCompletions(t){return Array.isArray(t.completion_items)?t.completion_items.map(r=>this._toCompletionItem(r)):Array.isArray(t.completions)?Sl("BackCompletionResult","completions",t.completions).map(n=>({text:n,suffixReplacementText:"",skippedSuffix:""})):[{text:vi("BackCompletionResult","text",t.text),suffixReplacementText:"",skippedSuffix:""}]}toCompleteResult(t){let r=this._extractCompletions(t),n=Sl("BackCompletionResult","unknown_blob_names/unknown_memory_names",t.unknown_blob_names??t.unknown_memory_names),i=t.checkpoint_not_found===void 0?!1:Iu("BackCompletionResult","checkpoint_not_found",t.checkpoint_not_found,!1);return{completionItems:r,unknownBlobNames:n,checkpointNotFound:i,suggestedPrefixCharCount:t.suggested_prefix_char_count,suggestedSuffixCharCount:t.suggested_suffix_char_count,completionTimeoutMs:t.completion_timeout_ms}}toCheckpointBlobsResult(t){return{newCheckpointId:vi("BackCheckpointBlobsResult","new_checkpoint_id",t.new_checkpoint_id)}}async complete(t,r,n,i,s,o,a,l,c,u,f,p,g){let A=this._configListener.config,y={recent_changes:c},C={model:A.modelName,prompt:r,suffix:n,path:i,blob_name:s,prefix_begin:o?.prefixBegin,cursor_position:o?.cursorPosition,suffix_end:o?.suffixEnd,lang:a,blobs:Il(l),recency_info:y,probe_only:p,sequence_id:this._sequenceId.next(),filter_threshold:A.completions.filterThreshold,edit_events:this.toFileDiffsPayload(u??[])};return await this.callApi(t,A,"completion",C,v=>this.toCompleteResult(v),void 0,f,g)}async checkpointBlobs(t){let r=this.createRequestId(),n=this._configListener.config,i={blobs:Il(t)},s=await this.callApi(r,n,"checkpoint-blobs",i,o=>this.toCheckpointBlobsResult(o));for(let o of this.getUniqueExtraURLs())(await this.callApi(r,n,"checkpoint-blobs",i,l=>this.toCheckpointBlobsResult(l),o)).newCheckpointId!==s.newCheckpointId&&this._logger.error(`Checkpoint blobs API returned different checkpoint IDs for ${o}`);return s}convertToCodeEditResult(t){let r=t.unknown_blob_names===void 0?[]:Sl("BackCodeEditResult","unknown_blob_names",t.unknown_blob_names),n=t.checkpoint_not_found===void 0?!1:Iu("BackCodeEditResult","checkpoint_not_found",t.checkpoint_not_found,!1);return{unknownBlobNames:r,checkpointNotFound:n,modifiedCode:t.text}}async editCode(t,r,n,i,s,o,a,l,c,u,f){let p=this._configListener.config,A={model:p.codeInstruction.model,instruction:r,prefix:i,selected_text:n,suffix:s,blob_name:a,prefix_begin:l,suffix_end:c,lang:u,path:o,blobs:Il(f),sequence_id:this._sequenceId.next()};return await this.callApi(t,p,"edit",A,y=>this.convertToCodeEditResult(y),void 0,12e4)}toChatResult(t){let r=vi("BackChatResult","text",t.text),n=t.unknown_blob_names===void 0?[]:Sl("BackChatResult","unknown_blob_names",t.unknown_blob_names),i=t.checkpoint_not_found===void 0?!1:Iu("BackChatResult","checkpoint_not_found",t.checkpoint_not_found,!1),s=t.workspace_file_chunks===void 0?[]:t.workspace_file_chunks.map(a=>({charStart:Wi("BackWorkspaceFileChunk","char_start",a.char_start),charEnd:Wi("BackWorkspaceFileChunk","char_end",a.char_end),blobName:vi("BackWorkspaceFileChunk","blob_name",a.blob_name)})),o=t.nodes;return{text:r,unknownBlobNames:n,checkpointNotFound:i,workspaceFileChunks:s,nodes:o}}async chat(t,r,n,i,s,o,a,l,c,u,f,p,g,A,y,C,v,b,w,B,F,Q,W,Z){let $=this._configListener.config,ee={model:a??$.chat.model,path:A,prefix:p,selected_code:f,suffix:g,message:r,chat_history:n,lang:y,blobs:Il(i),user_guided_blobs:s,external_source_ids:o,enable_preference_collection:$.preferenceCollection.enable,context_code_exchange_request_id:u,vcs_change:this.toVCSChangePayload(l),recency_info_recent_changes:c,feature_detection_flags:{support_raw_output:!0},disable_auto_external_sources:v,user_guidelines:b,workspace_guidelines:w,tool_definitions:B??[],nodes:F??[],mode:Q??cn.chat,agent_memories:W,persona_type:Z};return await this.callApi(t,$,"chat",ee,U=>this.toChatResult(U),$.chat.url,3e5)}async chatStream(t,r,n,i,s,o,a,l,c,u,f,p,g,A,y,C,v,b,w,B,F,Q,W,Z){let $=this._configListener.config,ee={model:a??$.chat.model,path:A,prefix:p,selected_code:f,suffix:g,message:r,chat_history:n,lang:y,blobs:Il(i),user_guided_blobs:s,context_code_exchange_request_id:u,vcs_change:this.toVCSChangePayload(l),recency_info_recent_changes:c,external_source_ids:o,disable_auto_external_sources:v,user_guidelines:b,workspace_guidelines:w,feature_detection_flags:{support_raw_output:!0},tool_definitions:B??[],nodes:F??[],mode:Q??cn.chat,agent_memories:W,persona_type:Z};return await Ii(()=>this.callApiStream(t,$,"chat-stream",ee,this.toChatResult.bind(this),$.chat.url,3e5,C),this._logger,{initialMS:250,mult:2,maxMS:5e3,maxTries:5,maxTotalMs:5e3})}toChatInstructionStreamResult(t){let r=t.unknown_blob_names===void 0?[]:Sl("BackChatInstructionStreamResult","unknown_blob_names",t.unknown_blob_names),n=t.checkpoint_not_found===void 0?!1:Iu("BackChatInstructionStreamResult","checkpoint_not_found",t.checkpoint_not_found,!1);return{text:t.text,unknownBlobNames:r,checkpointNotFound:n,replacementText:t.replacement_text,replacementOldText:t.replacement_old_text,replacementStartLine:t.replacement_start_line,replacementEndLine:t.replacement_end_line}}async chatInstructionStream(t,r,n,i,s="",o="",a="",l="",c="",u=void 0,f=void 0,p="",g,A,y){let C=this._configListener.config,v=r.length===0,b,w;v?(b=C.smartPaste.url??C.chat.url,w=C.smartPaste.model):(b=C.chat.url,w=C.instructions.model);let B={model:w,prefix:o,selected_text:s,suffix:a,path:l,instruction:r,lang:p,blob_name:c,prefix_begin:u,suffix_end:f,blobs:Il(n),chat_history:i,context_code_exchange_request_id:y,user_guidelines:g,workspace_guidelines:A};return await this.callApiStream(t,C,"instruction-stream",B,this.toChatInstructionStreamResult.bind(this),b,12e4)}_smartPasteQueue=new _k(this._processSingleSmartPasteRequest.bind(this));async smartPasteStream(t,r,n,i,s="",o="",a="",l="",c="",u=void 0,f=void 0,p="",g="",A="",y="",C){let v={requestId:t,instruction:r,blobs:n,chatHistory:i,selectedText:s,prefix:o,suffix:a,pathName:l,blobName:c,prefixBegin:u,suffixEnd:f,language:p,codeBlock:g,targetFilePath:A,targetFileContent:y,contextCodeExchangeRequestId:C};return this._smartPasteQueue.insertAndKick(v)}async _processSingleSmartPasteRequest(t){if(t===void 0)return;if(t.requestServicedSignal!==void 0)return await t.requestServicedSignal;let r=this._configListener.config,n=t.instruction.length===0,i,s;n?(i=r.smartPaste.url??r.chat.url,s=r.smartPaste.model):i=r.chat.url;let o={model:s,prefix:t.prefix,selected_text:t.selectedText,suffix:t.suffix,path:t.pathName,instruction:t.instruction,lang:t.language,blob_name:t.blobName,prefix_begin:t.prefixBegin,suffix_end:t.suffixEnd,blobs:Il(t.blobs),chat_history:t.chatHistory,code_block:t.codeBlock,target_file_path:t.targetFilePath,target_file_content:t.targetFileContent,context_code_exchange_request_id:t.contextCodeExchangeRequestId},a;return t.requestServicedSignal=new Promise(c=>{a=c}),this._smartPasteQueue.insertAndKick(t),async function*(){try{yield*await this.callApiStream(t.requestId,r,"smart-paste-stream",o,this.toChatInstructionStreamResult.bind(this),i,12e4)}finally{a()}}.bind(this)()}toGenerateCommitMessageResult(t){return{text:t.text}}async generateCommitMessageStream(t,r){let n=this._configListener.config,i={changed_file_stats:r.changedFileStats,diff:r.diff,relevant_commit_messages:r.generatedCommitMessageSubrequest.relevant_commit_messages,example_commit_messages:r.generatedCommitMessageSubrequest.example_commit_messages};return await this.callApiStream(t,n,"generate-commit-message-stream",i,this.toGenerateCommitMessageResult.bind(this),void 0,12e4)}async createRemoteAgent(t,r,n,i){let s=this.createRequestId(),o=this._configListener.config,a={workspace_setup:t,initial_request_details:{request_nodes:r.request_nodes,user_guidelines:r.user_guidelines??o.chat.userGuidelines,workspace_guidelines:r.workspace_guidelines??"",agent_memories:r.agent_memories??""},model:n??o.modelName,setup_script:i};if(this._auth.useOAuth){let l=await this._auth.getSession();l&&(a.token=l.accessToken)}return a.token||(a.token=o.remoteAgent.apiToken),console.log("Calling /remote-agents/create with payload: ",a),await this.callApi(s,o,"remote-agents/create",a,void 0,o.remoteAgent.url,void 0,void 0,void 0,o.remoteAgent.apiToken)}async remoteAgentChat(t,r){let n=this.createRequestId(),i=this._configListener.config,s={remote_agent_id:t,request_details:{request_nodes:r.request_nodes,user_guidelines:r.user_guidelines??i.chat.userGuidelines,workspace_guidelines:r.workspace_guidelines??"",agent_memories:r.agent_memories??""}},o=await this.callApi(n,i,"remote-agents/chat",s,void 0,i.remoteAgent.url,void 0,void 0,void 0,i.remoteAgent.apiToken);return{remoteAgentId:o.remote_agent_id,nodes:o.nodes}}async deleteRemoteAgent(t){let r=this.createRequestId(),n=this._configListener.config,i={remote_agent_id:t};return await this.callApi(r,n,"remote-agents/delete",i,void 0,n.remoteAgent.url,void 0,void 0,void 0,n.remoteAgent.apiToken)}async interruptRemoteAgent(t){let r=this.createRequestId(),n=this._configListener.config,i={remote_agent_id:t};return await this.callApi(r,n,"remote-agents/interrupt",i,void 0,n.remoteAgent.url,void 0,void 0,void 0,n.remoteAgent.apiToken)}async listRemoteAgents(){let t=this.createRequestId(),r=this._configListener.config;return await this.callApi(t,r,"remote-agents/list",{},void 0,r.remoteAgent.url,void 0,void 0,void 0,r.remoteAgent.apiToken)}async getRemoteAgentChatHistory(t){let r=this.createRequestId(),n=this._configListener.config,i={remote_agent_id:t};return await this.callApi(r,n,"remote-agents/get-chat-history",i,void 0,n.remoteAgent.url,void 0,void 0,void 0,n.remoteAgent.apiToken)}toAutofixCommandPayload(t){return{input:t.input,output:t.output,exit_code:t.exitCode}}toVCSChangePayload(t){return{working_directory_changes:t.workingDirectory.map(r=>({before_path:r.beforePath,after_path:r.afterPath,change_type:r.changeType,head_blob_name:r.headBlobName,indexed_blob_name:r.indexedBlobName,current_blob_name:r.currentBlobName}))}}toBackTextReplacement(t){return{description:t.description,path:t.path,text:t.text,old_text:t.oldText,start_line:t.startLine,end_line:t.endLine,sequence_id:t.sequenceId,old_blob_name:t.oldBlobName}}toFileDiffsPayload(t){return t.map(r=>({path:r.path,before_blob_name:r.beforeBlobName,after_blob_name:r.afterBlobName,edits:r.edits.map(n=>({before_start:n.beforeStart,after_start:n.afterStart,before_text:n.beforeText,after_text:n.afterText}))}))}toFileCharRangePayload(t){return t.filter(r=>r.charStart!==void 0&&r.charStop!==void 0).map(r=>({path:r.path,char_start:r.charStart,char_end:r.charStop}))}toNextEditLocationResult(t){gy("BackNextEditLocationResult","candidate_locations",t.candidate_locations);let r=t.unknown_blob_names===void 0?[]:Sl("BackNextEditLocationResult","unknown_blob_names",t.unknown_blob_names),n=t.checkpoint_not_found===void 0?!1:Iu("BackNextEditResult","checkpoint_not_found",t.checkpoint_not_found,!1),i=t.critical_errors===void 0||t.critical_errors===null?[]:Sl("BackNextEditResult","critical_errors",t.critical_errors),s=[];for(let o of t.candidate_locations){let a={start:Wi("BackLineRange","start",o.item.range.start),stop:Wi("BackLineRange","stop",o.item.range.stop)},c={item:{path:vi("BackLocation","path",o.item.path),range:a},score:Wi("BackScored","score",o.score),debugInfo:o.debug_info};s.push(c)}return{candidateLocations:s,unknownBlobNames:r,checkpointNotFound:n,criticalErrors:i}}async nextEditLocation(t,r,n,i,s,o,a,l,c,u){let f=this._configListener.config,p={instruction:r,path:n,vcs_change:this.toVCSChangePayload(i),edit_events:this.toFileDiffsPayload(s),blobs:Il(o),recent_changes:a,diagnostics:l,num_results:c,is_single_file:u};return await this.callApi(t,f,"next_edit_loc",p,g=>this.toNextEditLocationResult(g),f.nextEdit.locationUrl,12e4)}convertToAutofixCheckResponse(t){return{containsFailure:Iu("BackAutofixCheckResponse","contains_failure",t.contains_failure,!1),isCodeRelated:Iu("BackAutofixCheckResponse","is_code_related",t.is_code_related,!1)}}convertToAutofixPlanResponse(t){return{unknownBlobNames:Sl("BackAutofixPlanResponse","unknown_blob_names",t.unknown_blob_names),checkpointNotFound:Iu("BackAutofixPlanResponse","checkpoint_not_found",t.checkpoint_not_found,!1),summary:t.summary,replacements:t.replacements.map(r=>({description:r.description,path:r.path,text:r.text,oldText:r.old_text,startLine:r.start_line,endLine:r.end_line,sequenceId:r.sequence_id,oldBlobName:r.old_blob_name}))}}convertToNextEditGenerationResult(t){let r=t.unknown_blob_names===void 0?[]:Sl("BackNextEditGenerationResult","unknown_blob_names",t.unknown_blob_names),n=t.checkpoint_not_found===void 0?!1:Iu("BackNextEditResult","checkpoint_not_found",t.checkpoint_not_found,!1);return{result:this.convertToNextEditResult(t.next_edit),unknownBlobNames:r,checkpointNotFound:n}}convertToNextEditResult(t){let r=vi("BackNextEditResult","suggestion_id",t.suggestion_id),n=vi("BackNextEditResult","path",t.path),i=vi("BackNextEditResult","blob_name",t.blob_name),s=Wi("BackNextEditResult","char_start",t.char_start),o=Wi("BackNextEditResult","char_end",t.char_end),a=vi("BackNextEditResult","existing_code",t.existing_code),l=vi("BackNextEditResult","suggested_code",t.suggested_code),c=t.truncation_char===void 0||t.truncation_char===null?void 0:Wi("BackNextEditResult","truncation_char",t.truncation_char),u=t.change_description===void 0?"":vi("BackNextEditResult","change_description",t.change_description),f=t.diff_spans?.map(y=>({original:{start:Wi("BackCharRange","start",y.original.start),stop:Wi("BackCharRange","stop",y.original.stop)},updated:{start:Wi("BackCharRange","start",y.updated.start),stop:Wi("BackCharRange","stop",y.updated.stop)}})),p=Wi("BackNextEditResult","editing_score",t.editing_score),g=Wi("BackNextEditResult","localization_score",t.localization_score),A=t.editing_score_threshold===void 0?1:Wi("BackNextEditResult","editing_score_threshold",t.editing_score_threshold);return{suggestionId:r,path:n,blobName:i,charStart:s,charEnd:o,existingCode:a,suggestedCode:l,truncationChar:c,changeDescription:u,diffSpans:f,editingScore:p,localizationScore:g,editingScoreThreshold:A}}async nextEditStream(t){let r=this._configListener.config,n=r.nextEdit.model,i=t.prefix?Tl(t.prefix):void 0,s={model:n,instruction:t.instruction??"",prefix:t.prefix,selected_text:t.selectedCode,suffix:t.suffix,selection_begin_char:i,selection_end_char:t.prefix!==void 0&&t.selectedCode!==void 0?i+Tl(t.selectedCode):void 0,blob_name:t.blobName,lang:t.language,path:t.pathName?.relPath,blobs:(t.blobs&&Il(t.blobs))??{checkpoint_id:void 0,added_blobs:[],deleted_blobs:[]},recent_changes:t.recentChanges,diagnostics:t.diagnostics,vcs_change:this.toVCSChangePayload({workingDirectory:[],commits:[]}),edit_events:this.toFileDiffsPayload(t.fileEditEvents??[]),blocked_locations:this.toFileCharRangePayload(t.blockedLocations??[]),mode:t.mode,scope:t.scope,api_version:2,sequence_id:this._sequenceId.next(),client_created_at:t.clientCreatedAt,unindexed_edit_events:this.toFileDiffsPayload(t.unindexedEditEvents),unindexed_edit_events_base_blob_names:t.unindexedEditEventsBaseBlobNames};return await this.callApiStream(t.requestId,r,"next-edit-stream",s,this.convertToNextEditGenerationResult.bind(this),r.nextEdit.generationUrl,12e4)}getUniqueExtraURLs(){let t=this._configListener.config,r=new Set;return t.nextEdit.url&&r.add(t.nextEdit.url),t.nextEdit.locationUrl&&r.add(t.nextEdit.locationUrl),t.nextEdit.generationUrl&&r.add(t.nextEdit.generationUrl),t.chat.url&&r.add(t.chat.url),r}toMemorizeResult(t){return{blobName:t.blob_name!==void 0?vi("BackMemorizeResult","blob_name",t.blob_name):vi("BackMemorizeResult","mem_object_name",t.mem_object_name)}}async memorize(t,r,n,i,s){let o=this.createRequestId(),a=this._configListener.config,l=await this.callApi(o,a,"memorize",{model:a.modelName,path:t,t:r,blob_name:n,metadata:i,timeout_ms:s},c=>this.toMemorizeResult(c));for(let c of this.getUniqueExtraURLs())await this.callApi(o,a,"memorize",{model:a.modelName,path:t,t:r,blob_name:n,metadata:i},u=>this.toMemorizeResult(u),c);return l}toBatchUploadResult(t){return{blobNames:t.blob_names}}async batchUpload(t){let r=this.createRequestId(),n=this._configListener.config;try{let i=await this.callApi(r,n,"batch-upload",{blobs:t.map(s=>({blob_name:s.blobName,path:s.pathName,content:s.text}))},this.toBatchUploadResult.bind(this));for(let s of this.getUniqueExtraURLs())await this.callApi(r,n,"batch-upload",{blobs:t.map(o=>({blob_name:o.blobName,path:o.pathName,content:o.text}))},this.toBatchUploadResult.bind(this),s);return i}catch(i){if(!Qr.isAPIErrorWithStatus(i,We.unimplemented))throw i;let s=[];for(let o of t){let a=await this.memorize(o.pathName,o.text,o.blobName,o.metadata);s.push(a.blobName)}return{blobNames:s}}}toFindMissingResult(t){return{unknownBlobNames:Sl("BackFindMissingResult","unknown_memory_names",t.unknown_memory_names),nonindexedBlobNames:Sl("BackFindMissingResult","nonindexed_blob_names",t.nonindexed_blob_names)}}async findMissing(t){let r=this._configListener.config,n=this.createRequestId(),i=r.modelName,s=[...t].sort(),o=await this.callApi(n,r,"find-missing",{model:i,mem_object_names:s},a=>this.toFindMissingResult(a));for(let a of this.getUniqueExtraURLs()){let l=await this.callApi(n,r,"find-missing",{model:i,mem_object_names:s},c=>this.toFindMissingResult(c),a);o.unknownBlobNames=o.unknownBlobNames.concat(l.unknownBlobNames),o.nonindexedBlobNames=o.nonindexedBlobNames.concat(l.nonindexedBlobNames)}return o}async resolveCompletions(t){let r=this.createRequestId(),n=this._configListener.config;return await this.callApi(r,n,"resolve-completions",{client_name:"vscode-extension",resolutions:t})}async logCodeEditResolution(t){let r=this.createRequestId(),n=this._configListener.config;return await this.callApi(r,n,"resolve-edit",{client_name:"vscode-extension",...t})}async logSmartPasteResolution(t){let r=this.createRequestId(),n=this._configListener.config;return await this.callApi(r,n,"resolve-smart-paste",{client_name:"vscode-extension",...t})}async logInstructionResolution(t){let r=this.createRequestId(),n=this._configListener.config;return await this.callApi(r,n,"resolve-instruction",{client_name:"vscode-extension",...t})}async resolveNextEdits(t){let r=this.createRequestId(),n=this._configListener.config;return await this.callApi(r,n,"resolve-next-edit",{client_name:"vscode-extension",resolutions:t},void 0,n.nextEdit.url)}async logNextEditSessionEvent(t){let r=this.createRequestId(),n=this._configListener.config;return await this.callApi(r,n,"record-session-events",{client_name:"vscode-extension",events:t.map(i=>({time:new Date(i.event_time_sec*1e3+i.event_time_nsec/1e6).toISOString(),event:{next_edit_session_event:{...i,user_agent:this._userAgent}}}))},void 0,n.nextEdit.url)}async logOnboardingSessionEvent(t){let r=this.createRequestId(),n=this._configListener.config;return await this.callApi(r,n,"record-session-events",{client_name:"vscode-extension",events:t.map(i=>({time:new Date(i.event_time_sec*1e3+i.event_time_nsec/1e6).toISOString(),event:{onboarding_session_event:{...i,user_agent:this._userAgent}}}))},void 0)}async logAgentSessionEvent(t){let r=this.createRequestId(),n=this._configListener.config;return await this.callApi(r,n,"record-session-events",{client_name:"vscode-extension",events:t.map(i=>({time:new Date(i.event_time_sec*1e3+i.event_time_nsec/1e6).toISOString(),event:{agent_session_event:{...i,user_agent:this._userAgent}}}))},void 0)}async logAgentRequestEvent(t){let r=new Map;for(let n of t){let i=r.get(n.request_id)||[];r.has(n.request_id)||r.set(n.request_id,i);let{request_id:s,...o}=n;i.push(o)}for(let[n,i]of r){let s=this._configListener.config;await this.callApi(n,s,"record-request-events",{events:i.map(o=>({time:new Date(o.event_time_sec*1e3+o.event_time_nsec/1e6).toISOString(),event:{agent_request_event:{...o,user_agent:this._userAgent}}}))},void 0)}}async logExtensionSessionEvent(t){let r=this.createRequestId(),n=this._configListener.config;return await this.callApi(r,n,"record-session-events",{client_name:"vscode-extension",events:t.map(i=>({time:i.time_iso,event:{extension_session_event:{...i,user_agent:this._userAgent}}}))},void 0)}async logToolUseRequestEvent(t){let r=new Map;for(let n of t){let i=r.get(n.requestId);i===void 0?r.set(n.requestId,[n]):i.push(n)}for(let[n,i]of r){let s=this._configListener.config;await this.callApi(n,s,"record-request-events",{events:i.map(o=>{let a={tool_name:o.toolName,tool_use_id:o.toolUseId,tool_output_is_error:o.toolOutputIsError,tool_run_duration_ms:o.toolRunDurationMs,tool_input:JSON.stringify(o.toolInput),is_mcp_tool:o.isMcpTool,conversation_id:o.conversationId,chat_history_length:o.chatHistoryLength,tool_request_id:o.toolRequestId};return{time:new Date(o.eventTimeSec*1e3+o.eventTimeNsec/1e6).toISOString(),event:{tool_use_data:a}}})},void 0)}}async recordPreferenceSample(t){let r=this.createRequestId(),n=this._configListener.config;return await this.callApi(r,n,"record-preference-sample",{client_name:"vscode-extension",...t})}toModel(t){let r=t.completion_timeout_ms!==void 0?Wi("BackModelInfo","completion_timeout_ms",t.completion_timeout_ms):void 0;return{name:vi("BackModelInfo","name",t.name),suggestedPrefixCharCount:Wi("BackModelInfo","suggested_prefix_char_count",t.suggested_prefix_char_count),suggestedSuffixCharCount:Wi("BackModelInfo","suggested_suffix_char_count",t.suggested_suffix_char_count),completionTimeoutMs:r,internalName:t.internal_name&&vi("BackModelInfo","internal_name",t.internal_name)}}toLanguage(t){let r=vi("BackLanguageInfo","name",t.name),n=vi("BackLanguageInfo","vscodeName",t.vscode_name);gy("BackLanguageInfo","extensions",t.extensions);let i=[];for(let s of t.extensions)i.push(vi("BackLanguageInfo","extensions",s));return{name:r,vscodeName:n,extensions:i}}toGetModelsResult(t){let r=vi("BackGetModelsResult","default_model",t.default_model);gy("BackGetModelsResult","models",t.models);let n=[];for(let a of t.models)n.push(this.toModel(a));let i=lA;if(t.feature_flags!==void 0){let a=t.feature_flags.git_diff_polling_freq_msec;if(a!==void 0&&a>0&&(i.gitDiff=!0,i.gitDiffPollingFrequencyMSec=a),t.feature_flags.small_sync_threshold!==void 0&&(i.smallSyncThreshold=t.feature_flags.small_sync_threshold),t.feature_flags.big_sync_threshold!==void 0&&(i.bigSyncThreshold=t.feature_flags.big_sync_threshold),t.feature_flags.enable_workspace_manager_ui_launch!==void 0&&(i.enableWorkspaceManagerUi=t.feature_flags.enable_workspace_manager_ui_launch),t.feature_flags.enable_instructions!==void 0&&(i.enableInstructions=t.feature_flags.enable_instructions),t.feature_flags.enable_smart_paste!==void 0&&(i.enableSmartPaste=t.feature_flags.enable_smart_paste),t.feature_flags.enable_smart_paste_min_version!==void 0&&(i.enableSmartPasteMinVersion=t.feature_flags.enable_smart_paste_min_version),t.feature_flags.enable_view_text_document!==void 0&&(i.enableViewTextDocument=t.feature_flags.enable_view_text_document),t.feature_flags.bypass_language_filter!==void 0&&(i.bypassLanguageFilter=t.feature_flags.bypass_language_filter),t.feature_flags.additional_chat_models!==void 0&&(i.additionalChatModels=t.feature_flags.additional_chat_models),t.feature_flags.enable_hindsight!==void 0&&(i.enableHindsight=t.feature_flags.enable_hindsight),t.feature_flags.max_upload_size_bytes!==void 0&&(i.maxUploadSizeBytes=t.feature_flags.max_upload_size_bytes),t.feature_flags.vscode_next_edit_min_version!==void 0&&(i.vscodeNextEditMinVersion=t.feature_flags.vscode_next_edit_min_version),t.feature_flags.vscode_next_edit_ux1_max_version!==void 0&&(i.vscodeNextEditUx1MaxVersion=t.feature_flags.vscode_next_edit_ux1_max_version),t.feature_flags.vscode_next_edit_ux2_max_version!==void 0&&(i.vscodeNextEditUx2MaxVersion=t.feature_flags.vscode_next_edit_ux2_max_version),t.feature_flags.vscode_flywheel_min_version!==void 0&&(i.vscodeFlywheelMinVersion=t.feature_flags.vscode_flywheel_min_version),t.feature_flags.vscode_external_sources_in_chat_min_version!==void 0&&(i.vscodeExternalSourcesInChatMinVersion=t.feature_flags.vscode_external_sources_in_chat_min_version),t.feature_flags.vscode_share_min_version!==void 0&&(i.vscodeShareMinVersion=t.feature_flags.vscode_share_min_version),t.feature_flags.max_trackable_file_count!==void 0&&(i.maxTrackableFileCount=t.feature_flags.max_trackable_file_count),t.feature_flags.max_trackable_file_count_without_permission!==void 0&&(i.maxTrackableFileCountWithoutPermission=t.feature_flags.max_trackable_file_count_without_permission),t.feature_flags.min_uploaded_percentage_without_permission!==void 0&&(i.minUploadedPercentageWithoutPermission=t.feature_flags.min_uploaded_percentage_without_permission),t.feature_flags.vscode_sources_min_version!==void 0&&(i.vscodeSourcesMinVersion=t.feature_flags.vscode_sources_min_version),t.feature_flags.vscode_chat_hint_decoration_min_version!==void 0&&(i.vscodeChatHintDecorationMinVersion=t.feature_flags.vscode_chat_hint_decoration_min_version),t.feature_flags.next_edit_debounce_ms!==void 0&&(i.nextEditDebounceMs=t.feature_flags.next_edit_debounce_ms),t.feature_flags.enable_completion_file_edit_events!==void 0&&(i.enableCompletionFileEditEvents=t.feature_flags.enable_completion_file_edit_events),t.feature_flags.vscode_enable_cpu_profile!==void 0&&(i.vscodeEnableCpuProfile=t.feature_flags.vscode_enable_cpu_profile),t.feature_flags.verify_folder_is_source_repo!==void 0&&(i.verifyFolderIsSourceRepo=t.feature_flags.verify_folder_is_source_repo),t.feature_flags.refuse_to_sync_home_directories!==void 0&&(i.refuseToSyncHomeDirectories=t.feature_flags.refuse_to_sync_home_directories),t.feature_flags.enable_file_limits_for_syncing_permission!==void 0&&(i.enableFileLimitsForSyncingPermission=t.feature_flags.enable_file_limits_for_syncing_permission),t.feature_flags.enable_chat_mermaid_diagrams!==void 0&&(i.enableChatMermaidDiagrams=t.feature_flags.enable_chat_mermaid_diagrams),t.feature_flags.enable_summary_titles!==void 0&&(i.enableSummaryTitles=t.feature_flags.enable_summary_titles),t.feature_flags.smart_paste_precompute_mode!==void 0&&(i.smartPastePrecomputeMode=t.feature_flags.smart_paste_precompute_mode),t.feature_flags.vscode_new_threads_menu_min_version!==void 0&&(i.vscodeNewThreadsMenuMinVersion=t.feature_flags.vscode_new_threads_menu_min_version),t.feature_flags.vscode_editable_history_min_version!==void 0&&(i.vscodeEditableHistoryMinVersion=t.feature_flags.vscode_editable_history_min_version),t.feature_flags.vscode_enable_chat_mermaid_diagrams_min_version!==void 0&&(i.vscodeEnableChatMermaidDiagramsMinVersion=t.feature_flags.vscode_enable_chat_mermaid_diagrams_min_version),t.feature_flags.enable_guidelines!==void 0&&(i.enableGuidelines=t.feature_flags.enable_guidelines),t.feature_flags.vscode_use_checkpoint_manager_context_min_version!==void 0&&(i.useCheckpointManagerContextMinVersion=t.feature_flags.vscode_use_checkpoint_manager_context_min_version),t.feature_flags.vscode_validate_checkpoint_manager_context!==void 0&&(i.validateCheckpointManagerContext=t.feature_flags.vscode_validate_checkpoint_manager_context),t.feature_flags.vscode_design_system_rich_text_editor_min_version!==void 0&&(i.vscodeDesignSystemRichTextEditorMinVersion=t.feature_flags.vscode_design_system_rich_text_editor_min_version),t.feature_flags.allow_client_feature_flag_overrides!==void 0&&(i.allowClientFeatureFlagOverrides=t.feature_flags.allow_client_feature_flag_overrides),t.feature_flags.vscode_chat_with_tools_min_version!==void 0&&(i.vscodeChatWithToolsMinVersion=t.feature_flags.vscode_chat_with_tools_min_version),t.feature_flags.vscode_agent_mode_min_version!==void 0&&(i.vscodeAgentModeMinVersion=t.feature_flags.vscode_agent_mode_min_version),t.feature_flags.vscode_agent_mode_min_stable_version!==void 0&&(i.vscodeAgentModeMinStableVersion=t.feature_flags.vscode_agent_mode_min_stable_version),t.feature_flags.vscode_background_agents_min_version!==void 0&&(i.vscodeBackgroundAgentsMinVersion=t.feature_flags.vscode_background_agents_min_version),t.feature_flags.vscode_agent_edit_tool!==void 0&&(i.vscodeAgentEditTool=t.feature_flags.vscode_agent_edit_tool),t.feature_flags.memories_params!==void 0)try{i.memoriesParams=JSON.parse(t.feature_flags.memories_params)}catch{this._logger.error('Parsing of "memories_params" failed.')}if(t.feature_flags.elo_model_configuration!==void 0)try{i.eloModelConfiguration=JSON.parse(t.feature_flags.elo_model_configuration)}catch{this._logger.error('Parsing of "elo_model_configuration" failed.')}t.feature_flags.vscode_chat_stable_prefix_truncation_min_version!==void 0&&(i.vscodeChatStablePrefixTruncationMinVersion=t.feature_flags.vscode_chat_stable_prefix_truncation_min_version),t.feature_flags.vscode_next_edit_bottom_panel_min_version!==void 0&&(i.vscodeNextEditBottomPanelMinVersion=t.feature_flags.vscode_next_edit_bottom_panel_min_version),t.feature_flags.vscode_chat_multimodal_min_version!==void 0&&(i.vscodeChatMultimodalMinVersion=t.feature_flags.vscode_chat_multimodal_min_version),t.feature_flags.workspace_guidelines_length_limit!==void 0&&(i.workspaceGuidelinesLengthLimit=t.feature_flags.workspace_guidelines_length_limit),t.feature_flags.user_guidelines_length_limit!==void 0&&(i.userGuidelinesLengthLimit=t.feature_flags.user_guidelines_length_limit),t.feature_flags.vscode_rich_checkpoint_info_min_version!==void 0&&(i.vscodeRichCheckpointInfoMinVersion=t.feature_flags.vscode_rich_checkpoint_info_min_version),t.feature_flags.vscode_virtualized_message_list_min_version!==void 0&&(i.vscodeVirtualizedMessageListMinVersion=t.feature_flags.vscode_virtualized_message_list_min_version)}let s=[];if(t.languages===void 0)s=bW;else{gy("BackGetModelsResult","languages",t.languages),s=[];for(let a of t.languages)s.push(this.toLanguage(a))}let o=t.user_tier?.toLowerCase().replace("_tier","")??"unknown";return{defaultModel:r,models:n,languages:s,featureFlags:i,userTier:o}}async getModelConfig(){let t=this._configListener.config,r=this.createRequestId();return await this.callApi(r,t,"get-models",{},i=>this.toGetModelsResult(i))}async completionFeedback(t){let r=this._configListener.config,n=this.createRequestId();await this.callApi(n,r,"completion-feedback",{request_id:t.requestId,rating:t.rating,note:t.note},void 0)}async chatFeedback(t){let r=this._configListener.config,n=this.createRequestId();await this.callApi(n,r,"chat-feedback",{request_id:t.requestId,rating:t.rating,note:t.note,mode:t.mode},void 0)}async nextEditFeedback(t){let r=this._configListener.config,n=this.createRequestId();await this.callApi(n,r,"next-edit-feedback",{request_id:t.requestId,rating:t.rating,note:t.note},void 0,r.nextEdit.url)}async getAccessToken(t,r,n,i){let s=this._configListener.config,o=this.createRequestId(),a={grant_type:"authorization_code",client_id:s.oauth.clientID,code_verifier:n,redirect_uri:t,code:i};return await this.callApi(o,s,"token",a,l=>l.access_token,r)}async uploadUserEvents(t){let r=this.createRequestId();return await this.callApi(r,this._configListener.config,"record-user-events",{extension_data:t})}async clientMetrics(t){let r=this._configListener.config,n=this.createRequestId();await this.callApi(n,r,"client-metrics",{metrics:t},void 0,void 0,e.defaultRequestTimeoutMs)}async searchExternalSources(t,r){let n=this._configListener.config,i=this.createRequestId();return await this.callApi(i,n,"search-external-sources",{query:t,source_types:r},s=>s)}async getImplicitExternalSources(t){let r=this._configListener.config,n=this.createRequestId();return await this.callApi(n,r,"get-implicit-external-sources",{message:t},i=>i)}convertToAgentCodebaseRetrievalResult(t){return{formattedRetrieval:t.formatted_retrieval}}async agentCodebaseRetrieval(t,r,n,i,s,o){let a=this._configListener.config;return await this.callApi(t,a,"agents/codebase-retrieval",{information_request:r,blobs:Il(n),dialog:i,max_output_length:s},l=>this.convertToAgentCodebaseRetrievalResult(l),a.chat.url,12e4,void 0,o)}convertToAgentEditFileResult(t){return{modifiedFileContents:t.modified_file_contents,isError:t.is_error}}async agentEditFile(t,r,n,i,s,o){let a=this._configListener.config;return await this.callApi(t,a,"agents/edit-file",{file_path:r,edit_summary:n,detailed_edit_description:i,file_contents:s},l=>this.convertToAgentEditFileResult(l),a.chat.url,12e4,void 0,o)}convertToToolSafety(t){switch(t){case 0:return mt.Unsafe;case 1:return mt.Safe;case 2:return mt.Check;default:return mt.Unsafe}}convertToListRemoteToolsResult(t){return{tools:t.tools.map(r=>({toolDefinition:r.tool_definition,remoteToolId:r.remote_tool_id,availabilityStatus:r.availability_status,toolSafety:this.convertToToolSafety(r.tool_safety),oauthUrl:r.oauth_url}))}}async listRemoteTools(t){let r=this.createRequestId(),n=this._configListener.config;return await this.callApi(r,n,"agents/list-remote-tools",{tool_id_list:{tool_ids:t}},i=>this.convertToListRemoteToolsResult(i),n.chat.url,12e4)}convertToCheckToolSafetyResult(t){return t.is_safe}async checkToolSafety(t,r){let n=this.createRequestId(),i=this._configListener.config;return await this.callApi(n,i,"agents/check-tool-safety",{tool_id:t,tool_input_json:r},s=>this.convertToCheckToolSafetyResult(s),i.chat.url,12e4)}convertToRunRemoteToolResult(t){return{toolOutput:t.tool_output,toolResultMessage:t.tool_result_message,status:t.status}}async runRemoteTool(t,r,n,i,s,o){let a=this._configListener.config,l={};if(s)if(i===Oi.Jira||i===Oi.Confluence){let c=s;l={extra_tool_input:{atlassian_tool_extra_input:{server_url:c.serverUrl,personal_api_token:c.personalApiToken,username:c.username}}}}else i===Oi.Notion?l={extra_tool_input:{notion_tool_extra_input:{api_token:s.apiToken}}}:i===Oi.Linear?l={extra_tool_input:{linear_tool_extra_input:{api_token:s.apiToken}}}:i===Oi.GitHubApi&&(l={extra_tool_input:{github_tool_extra_input:{api_token:s.apiToken}}});return await this.callApi(t,a,"agents/run-remote-tool",{tool_name:r,tool_input_json:n,tool_id:i,...l},c=>this.convertToRunRemoteToolResult(c),a.chat.url,12e4,void 0,o)}convertToRevokeToolAccessResult(t){return{status:t.status}}async revokeToolAccess(t){let r=this.createRequestId(),n=this._configListener.config;return await this.callApi(r,n,"agents/revoke-tool-access",{tool_id:t},i=>this.convertToRevokeToolAccessResult(i),n.chat.url)}reportError(t,r,n,i){return Promise.reject(new Error("reportError should only be used via APIServerImplWithErrorReporting"))}async reportClientCompletionTimelines(t){let r=this._configListener.config,n=this.createRequestId();await this.callApi(n,r,"/client-completion-timelines",{timelines:t},void 0,void 0,e.defaultRequestTimeoutMs)}async checkCommand(t,r,n){let i=this._configListener.config,s={command:t,output:r};return await this.callApi(n,i,"check_command",s,o=>o,i.autofix.autofixUrl,1e4)}async containErrors(t,r,n){let i=this._configListener.config,s={command:t,output:r};return await this.callApi(n,i,"contain_errors",s,o=>o,i.autofix.autofixUrl,1e4)}async createFixPlan(t,r,n,i,s){let o=this._configListener.config,a={output:{command:r,output:n},git_diff:t,edit_locations:i};return await this.callApi(s,o,"create_fix_plan",a,l=>l,o.autofix.autofixUrl,3e4)}async applyFileFix(t,r,n){let i=this._configListener.config,s={file_fix:t,source_content:r};return await this.callApi(n,i,"apply_file_fix",s,o=>o,i.autofix.autofixUrl,3e4)}async autofixCheck(t){let r=this._configListener.config,n=this.createRequestId();return await this.callApi(n,r,"/autofix/check",{command:this.toAutofixCommandPayload(t)},i=>this.convertToAutofixCheckResponse(i),r.autofix.autofixUrl,1e4)}async autofixPlan(t,r,n,i){let s=this._configListener.config,o=this.createRequestId();return await this.callApi(o,s,"/autofix/plan",{command:this.toAutofixCommandPayload(t),vcs_change:this.toVCSChangePayload(r),blobs:Il(n),steering_history:(i||[]).map(a=>({request_message:a.requestMessage,summary:a.summary,replacements:a.replacements.map(l=>this.toBackTextReplacement(l)),request_id:a.requestId}))},a=>this.convertToAutofixPlanResponse(a),s.autofix.autofixUrl,6e4)}async saveChat(t,r,n){let i=this._configListener.config,s=this.createRequestId(),o={conversation_id:t,chat:r.map(l=>({request_message:l.request_message,response_text:l.response_text,request_id:l.request_id})),title:n};return await this.callApi(s,i,"/save-chat",o,l=>l,i.chat.url,e.defaultRequestTimeoutMs)}},Ik=class extends IW{constructor(t,r,n,i,s){super(t,r,n,i,s)}async callApi(t,r,n,i,s=f=>f,o,a,l,c,u){let f=Date.now();try{return await super.callApi(t,r,n,i,s,o,a,l,c,u)}catch(p){throw await this.handleError(p,n,i,o??"",t,f),p}}async handleError(t,r,n,i,s,o){if(Qr.isAPIErrorWithStatus(t,We.cancelled))throw t;let l=[{key:"body_length",value:`${JSON.stringify(n,(p,g)=>g===void 0?null:g).length}`},{key:"start_time",value:`${o}`},{key:"end_time",value:`${Date.now()}`},{key:"message",value:$e(t)}],c=t instanceof Error?t.stack:void 0;t instanceof Qr&&t.status===We.augmentTooLarge&&l.push({key:"object_size_breakdown",value:`${py(n)}`});let u=t instanceof Qr?t.status:We.unknown,f=`${r} call failed with APIStatus ${We[u]}`;throw t instanceof wk&&(f=`converting ${r} response failed`),i&&this.getUniqueExtraURLs().has(i)?this._logger.error(`API error ${r} to ${i}: ${f}`):await this.reportError(s,f,c??"",l),t}async callApiStream(t,r,n,i,s,o,a,l){let c=Date.now();try{return await super.callApiStream(t,r,n,i,s,o,a,l)}catch(u){throw await this.handleError(u,n,i,o??"",t,c),u}}async reportError(t,r,n,i){let s=this._configListener.config,o=this.createRequestId(),a=n.replace(/ \(\/[^()]+\)/g,"");try{return await super.callApi(o,s,"report-error",{original_request_id:t,sanitized_message:r,stack_trace:a,diagnostics:i},void 0,void 0,500)}catch(l){this._logger.error(`Dropping error report "${r}" due to error: ${$e(l)}`)}}},SW=class{_sequenceId=0;next(){return this._sequenceId++}};var wme=V(vs()),Dc=V(require("vscode"));var Iut={Augment:null},Sut=R.object({apiToken:R.string(),completionURL:R.string(),disableCompletionsByLanguage:R.array(R.string()),enableAutomaticCompletions:R.boolean(),completions:R.object({enableAutomaticCompletions:R.boolean(),disableCompletionsByLanguage:R.array(R.string()),enableQuickSuggestions:R.boolean()}),shortcutsDisplayDelayMS:R.number(),enableEmptyFileHint:R.boolean(),conflictingCodingAssistantCheck:R.boolean(),chat:R.object({userGuidelines:R.string()}),nextEdit:R.object({enableBackgroundSuggestions:R.boolean(),enableGlobalBackgroundSuggestions:R.boolean(),highlightSuggestionsInTheEditor:R.boolean(),showDiffInHover:R.boolean(),enableAutoApply:R.boolean()}),advanced:R.object({apiToken:R.string(),completionURL:R.string(),oauth:R.object({clientID:R.string(),url:R.string()}),model:R.string(),codeInstruction:R.object({model:R.string()}),chat:R.object({url:R.string(),model:R.string(),stream:R.boolean(),enableEditableHistory:R.boolean(),useRichTextHistory:R.boolean(),smartPasteUsePrecomputation:R.boolean(),experimentalFullFilePaste:R.boolean(),modelDisplayNameToId:R.record(R.string().nullable())}),autofix:R.object({enabled:R.boolean(),locationUrl:R.string(),autofixUrl:R.string()}),enableDebugFeatures:R.boolean(),enableWorkspaceUpload:R.boolean(),enableReviewerWorkflows:R.boolean(),completions:R.object({timeoutMs:R.number(),maxWaitMs:R.number(),addIntelliSenseSuggestions:R.boolean(),filterThreshold:R.number(),filter_threshold:R.number()}),openFileManager:R.object({v2Enabled:R.boolean()}),enableDataCollection:R.boolean(),nextEditURL:R.string(),nextEditLocationURL:R.string(),nextEditGenerationURL:R.string(),nextEditBackgroundGeneration:R.boolean(),nextEdit:R.object({enabled:R.boolean(),backgroundEnabled:R.boolean(),url:R.string(),locationUrl:R.string(),generationUrl:R.string(),model:R.string(),useDebounceMs:R.number(),useCursorDecorations:R.boolean(),allowDuringDebugging:R.boolean(),useMockResults:R.boolean(),noDiffModeUseCodeLens:R.boolean(),enableGotoHinting:R.boolean(),enableBottomPanel:R.boolean()}),recencySignalManager:R.object({collectTabSwitchEvents:R.boolean()}),preferenceCollection:R.object({enable:R.boolean(),enableRetrievalDataCollection:R.boolean(),enableRandomizedMode:R.boolean()}),vcs:R.object({watcherEnabled:R.boolean()}),smartPaste:R.object({url:R.string(),model:R.string()}),instructions:R.object({model:R.string()}),integrations:R.object({atlassian:R.object({serverUrl:R.string(),personalApiToken:R.string(),username:R.string()}),notion:R.object({apiToken:R.string()}),linear:R.object({apiToken:R.string()}),github:R.object({apiToken:R.string()})}),mcpServers:R.array(R.object({command:R.string(),args:R.array(R.string()),timeoutMs:R.number(),env:R.record(R.string())})),agent:R.object({shellCommandsAlwaysSafe:R.boolean(),useIDETerminalForShellCommands:R.boolean(),disableRetrievalTool:R.boolean()}),remoteAgent:R.object({url:R.string(),apiToken:R.string()})})}),xme=Sut.deepPartial(),Sk=class e extends X{_config;_configChanged=new Dc.EventEmitter;_configMonitor;_logger=j("AugmentConfigListener");constructor(){super(),this._configMonitor=new Ry("Config",this._logger),this._refreshConfig(),this.addDisposable(Dc.workspace.onDidChangeConfiguration(()=>this._refreshConfig()))}get config(){return this._config}get onDidChange(){return this._configChanged.event}_refreshConfig(){let t=this._config;this._config=e.normalizeConfig(this._getRawSettings()),this._configMonitor.update(this._config)&&this._configChanged.fire({previousConfig:t,newConfig:this._config})}static normalizeConfig(t){return{apiToken:(t?.advanced?.apiToken??t.apiToken??"").trim().toUpperCase(),completionURL:(t?.advanced?.completionURL??t.completionURL??"").trim(),modelName:t?.advanced?.model??"",conflictingCodingAssistantCheck:t.conflictingCodingAssistantCheck??!0,codeInstruction:{model:t.advanced?.codeInstruction?.model},chat:{url:t.advanced?.chat?.url,model:t.advanced?.chat?.model,stream:t.advanced?.chat?.stream,enableEditableHistory:t.advanced?.chat?.enableEditableHistory??!1,useRichTextHistory:t.advanced?.chat?.useRichTextHistory??!0,smartPasteUsePrecomputation:t.advanced?.chat?.smartPasteUsePrecomputation??!0,experimentalFullFilePaste:t.advanced?.chat?.experimentalFullFilePaste??!1,modelDisplayNameToId:t.advanced?.chat?.modelDisplayNameToId??Iut,userGuidelines:t.chat?.userGuidelines||""},autofix:{enabled:t.advanced?.autofix?.enabled??!1,locationUrl:t.advanced?.autofix?.locationUrl,autofixUrl:t.advanced?.autofix?.autofixUrl},oauth:{clientID:t.advanced?.oauth?.clientID??"augment-vscode-extension",url:t.advanced?.oauth?.url??"https://auth.augmentcode.com"},enableUpload:t.advanced?.enableWorkspaceUpload??!0,shortcutsDisplayDelayMS:t.shortcutsDisplayDelayMS??2e3,enableEmptyFileHint:t.enableEmptyFileHint??!0,enableDataCollection:t.advanced?.enableDataCollection??!1,enableDebugFeatures:t.advanced?.enableDebugFeatures??!1,enableReviewerWorkflows:t.advanced?.enableReviewerWorkflows??!1,completions:{enableAutomaticCompletions:t.enableAutomaticCompletions??t.completions?.enableAutomaticCompletions??!0,disableCompletionsByLanguage:new Set(t.disableCompletionsByLanguage??t.completions?.disableCompletionsByLanguage??[]),enableQuickSuggestions:t.completions?.enableQuickSuggestions??!0,timeoutMs:t.advanced?.completions?.timeoutMs??800,maxWaitMs:t.advanced?.completions?.maxWaitMs??1600,addIntelliSenseSuggestions:t.advanced?.completions?.addIntelliSenseSuggestions??!0,filterThreshold:t.advanced?.completions?.filter_threshold},openFileManager:{v2Enabled:t.advanced?.openFileManager?.v2Enabled??!1},nextEdit:{enabled:t.advanced?.nextEdit?.enabled,backgroundEnabled:t.advanced?.nextEdit?.backgroundEnabled??!0,url:t.advanced?.nextEdit?.url,locationUrl:t.advanced?.nextEdit?.locationUrl??t.advanced?.nextEdit?.url,generationUrl:t.advanced?.nextEdit?.generationUrl??t.advanced?.nextEdit?.url,model:t.advanced?.nextEdit?.model,useDebounceMs:t.advanced?.nextEdit?.useDebounceMs,useCursorDecorations:t.advanced?.nextEdit?.useCursorDecorations??!1,allowDuringDebugging:t.advanced?.nextEdit?.allowDuringDebugging??!1,useMockResults:t.advanced?.nextEdit?.useMockResults??!1,noDiffModeUseCodeLens:t.advanced?.nextEdit?.noDiffModeUseCodeLens??!1,enableBackgroundSuggestions:t.nextEdit?.enableBackgroundSuggestions??!0,enableGlobalBackgroundSuggestions:t.nextEdit?.enableGlobalBackgroundSuggestions??!1,highlightSuggestionsInTheEditor:t.nextEdit?.highlightSuggestionsInTheEditor??!1,showDiffInHover:t.nextEdit?.showDiffInHover??!1,enableAutoApply:t.nextEdit?.enableAutoApply??!0,enableGotoHinting:t.advanced?.nextEdit?.enableGotoHinting??!1,enableBottomPanel:t.advanced?.nextEdit?.enableBottomPanel},recencySignalManager:{collectTabSwitchEvents:t.advanced?.recencySignalManager?.collectTabSwitchEvents??!1},preferenceCollection:{enable:t.advanced?.preferenceCollection?.enable??!1,enableRetrievalDataCollection:t.advanced?.preferenceCollection?.enableRetrievalDataCollection??!1,enableRandomizedMode:t.advanced?.preferenceCollection?.enableRandomizedMode??!0},vcs:{watcherEnabled:t.advanced?.vcs?.watcherEnabled??!1},smartPaste:{url:t.advanced?.smartPaste?.url,model:t.advanced?.smartPaste?.model},instructions:{model:t.advanced?.instructions?.model},integrations:{atlassian:t.advanced?.integrations?.atlassian?{serverUrl:t.advanced.integrations.atlassian.serverUrl||"",personalApiToken:t.advanced.integrations.atlassian.personalApiToken||"",username:t.advanced.integrations.atlassian.username||""}:void 0,notion:t.advanced?.integrations?.notion?{apiToken:t.advanced.integrations.notion.apiToken||""}:void 0,linear:t.advanced?.integrations?.linear?{apiToken:t.advanced.integrations.linear.apiToken||""}:void 0,github:t.advanced?.integrations?.github?{apiToken:t.advanced.integrations.github.apiToken||""}:void 0},mcpServers:(t.advanced?.mcpServers??[]).filter(r=>r!==void 0).map(r=>({command:_me(r.command||""),args:r.args?.map(n=>_me(n)),timeoutMs:r.timeoutMs,env:r.env})),agent:{shellCommandsAlwaysSafe:t.advanced?.agent?.shellCommandsAlwaysSafe??!1,useIDETerminalForShellCommands:t.advanced?.agent?.useIDETerminalForShellCommands??!0,disableRetrievalTool:t.advanced?.agent?.disableRetrievalTool??!1},remoteAgent:{url:t.advanced?.remoteAgent?.url,apiToken:t.advanced?.remoteAgent?.apiToken}}}_getRawSettings(){let t=Dc.workspace.getConfiguration("augment");return e.parseSettings(t)}async migrateLegacyConfig(){let t=Dc.workspace.getConfiguration("augment");await this._moveConfig(t,"enableAutomaticCompletions","completions.enableAutomaticCompletions"),await this._moveConfig(t,"disableCompletionsByLanguage","completions.disableCompletionsByLanguage"),await this._moveConfig(t,"enableBackgroundSuggestions","nextEdit.enableBackgroundSuggestions"),await this._moveConfig(t,"enableGlobalBackgroundSuggestions","nextEdit.enableGlobalBackgroundSuggestions"),await this._moveConfig(t,"highlightSuggestionsInTheEditor","nextEdit.highlightSuggestionsInTheEditor")}async _moveConfig(t,r,n){let i=t.inspect(r);if(!i)return;let s=t.inspect(n),o=[{target:Dc.ConfigurationTarget.Workspace,oldValue:i.workspaceValue,newValue:s?.workspaceValue},{target:Dc.ConfigurationTarget.Global,oldValue:i.globalValue,newValue:s?.globalValue}];for(let a of o)a.oldValue!==void 0&&(a.newValue===void 0&&await t.update(n,a.oldValue,a.target),await t.update(r,void 0,a.target))}static parseSettings(t){let r=j("AugmentConfigListener"),n=xme.safeParse(t);if(!n.success){let i=n.error.issues.map(l=>"["+l.path.join(".")+"]: "+l.message);r.error(`Failed to parse settings: 
${i.join(`
`)}`);let s=n.error.issues.map(l=>l.path.join(".")),o=(0,wme.omit)(JSON.parse(JSON.stringify(t)),s),a=xme.safeParse(o);return a.success?(r.info("settings parsed successfully after cleaning"),a.data):{}}return r.info("settings parsed successfully"),n.data}};function _me(e){let t="${workspaceFolder}";if(!e.includes(t))return e;let r=Dc.workspace.workspaceFolders?.length??0;r!==1&&j("AugmentConfigListener").warn(`Variable ${t} cannot be expanded because there are ${r} workspace folders open.`);let n=Dc.workspace.workspaceFolders?.[0]?.uri;return n&&(e=e.replaceAll(t,n.fsPath)),e}var Bk=class extends X{constructor(r,n,i){super();this._actionsModel=r;this._authSession=n;this._configListener=i;this.addDisposable(this._authSession.onDidChangeSession(()=>{this._updateSignInState()})),this.addDisposable(this._authSession.onReady(()=>{this._updateSignInState()})),this.addDisposable(this._configListener.onDidChange(({newConfig:s,previousConfig:o})=>{s.apiToken===o.apiToken&&s.completionURL===o.completionURL||this._updateSignInState()})),this._updateSignInState()}_updateSignInState(){if(!this._authSession.useOAuth){this._actionsModel.setSystemStateStatus("authenticated","complete");return}if(this._authSession.isLoggedIn===void 0)return;this._authSession.isLoggedIn===!1&&this._configListener.config.enableDebugFeatures&&this._actionsModel.restartActionsState();let r=this._authSession.isLoggedIn?"complete":"incomplete";this._actionsModel.setSystemStateStatus("authenticated",r)}};var Ime=V(vs()),Gh=V(require("vscode"));var Qx="augment.sessions",Dk=["email"],Tk=class extends X{constructor(r,n){super();this._context=r;this._config=n;this.addDisposables(this.onDidChangeSession(i=>{this._isLoggedIn=!!i,Gh.commands.executeCommand("setContext","vscode-augment.isLoggedIn",this._isLoggedIn)}),this._context.secrets.onDidChange(async i=>{i.key===Qx&&this._sessionChangeEmitter.fire(await this.getSession())}),this._config.onDidChange(()=>{Gh.commands.executeCommand("setContext","vscode-augment.useOAuth",this.useOAuth)})),this._ready=this.initState()}_sessionChangeEmitter=new Gh.EventEmitter;_readyEmitter=new Gh.EventEmitter;_isLoggedIn;_ready;get onDidChangeSession(){return this._sessionChangeEmitter.event}get onReady(){return this._readyEmitter.event}get useOAuth(){let r=this._config.config;return!!r.oauth&&!!r.oauth.url&&!!r.oauth.clientID&&!r.apiToken&&!r.completionURL}async initState(){this._isLoggedIn=!!await this.getSession(),Gh.commands.executeCommand("setContext","vscode-augment.isLoggedIn",this._isLoggedIn),Gh.commands.executeCommand("setContext","vscode-augment.useOAuth",this.useOAuth),this._readyEmitter.fire()}get isLoggedIn(){return this._isLoggedIn}async saveSession(r,n){await this._context.secrets.store(Qx,JSON.stringify({accessToken:r,tenantURL:n,scopes:Dk}))}async getSession(){let r=await this._context.secrets.get(Qx);if(r){let n=JSON.parse(r);if((0,Ime.isEqual)(n.scopes,Dk))return n}return null}async removeSession(){await this._context.secrets.get(Qx)&&await this._context.secrets.delete(Qx)}};var Qy=require("crypto"),yo=V(require("vscode"));async function Ru(e){return new Promise(t=>{let r=e(n=>{r.dispose(),t(n)})})}var Rk="augment.oauth-state",But=".augmentcode.com",Sme=10,kk=class{constructor(t,r,n,i,s){this._context=t;this._config=r;this._apiServer=n;this._authSession=i;this._onboardingSessionEventReporter=s;this.authRedirectURI=yo.Uri.from({scheme:yo.env.uriScheme,authority:this._context.extension.id,path:"/auth/result"})}_logger=j("OAuthFlow");_programmaticCancellation=new yo.EventEmitter;_previousLogin;authRedirectURI;doProgrammaticCancellation(){this._programmaticCancellation.fire("Cancelled by user")}async startFlow(t=!0){try{this._programmaticCancellation.fire("Cancelled due to new sign in"),await Promise.allSettled([this._previousLogin]),this._logger.info("Creating new session...");let r;t?r=await this.loginWithProgress():r=await this.loginWithoutProgress(),this._logger.info(`Created session ${r.tenantURL}`),this._onboardingSessionEventReporter.reportEvent("signed-in")}catch(r){throw yo.window.showErrorMessage(`Sign in failed. ${$e(r)}`),r}}async createOAuthState(){let t=Bme((0,Qy.randomBytes)(32)),r=Bme(Dut(Buffer.from(t))),n=(0,Qy.randomUUID)(),i={codeVerifier:t,codeChallenge:r,state:n,creationTime:new Date().getTime()};return await this._context.secrets.store(Rk,JSON.stringify(i)),i}async getOAuthState(){let t=await this._context.secrets.get(Rk);if(t){let r=JSON.parse(t);if(new Date().getTime()-r.creationTime<Sme*60*1e3)return r}return null}async removeOAuthState(){await this._context.secrets.get(Rk)&&await this._context.secrets.delete(Rk)}async loginWithoutProgress(){let t=new yo.CancellationTokenSource;return this.login(t.token)}async loginWithProgress(){let t={location:yo.ProgressLocation.Notification,title:"Signing in...",cancellable:!0},r=(n,i)=>(this._previousLogin=this.login(i),this._previousLogin);return yo.window.withProgress(t,r)}async login(t){if(!this._config.config.oauth.url)throw new Error("No OAuth URL defined.");let r=[this.waitForSessionChange(),new Promise((n,i)=>setTimeout(()=>i("Timed out"),Sme*60*1e3)),this.waitForProgrammaticCancellation(),this.waitForCancellation(t,"User cancelled")];try{let n=await this.createOAuthState();return await this.openBrowser(n),await Promise.race(r)}finally{await this.removeOAuthState()}}async openBrowser(t){let r=Dk.join(" "),n=new URLSearchParams({response_type:"code",code_challenge:t.codeChallenge,code_challenge_method:"S256",client_id:this._config.config.oauth.clientID||"",redirect_uri:this.authRedirectURI.toString(),state:t.state,scope:r,prompt:"login"}),i=new URL(`/authorize?${n.toString()}`,this._config.config.oauth.url),s=yo.Uri.parse(i.toString());await yo.env.openExternal(s)}async waitForSessionChange(){let t=await Ru(this._authSession.onDidChangeSession);if(!t)throw new Error("No session");return t}async waitForProgrammaticCancellation(){let t=await Ru(this._programmaticCancellation.event);throw new Error(t)}async waitForCancellation(t,r){throw await Ru(t.onCancellationRequested),new Error(r)}async processAuthRedirect(t){let r=new URLSearchParams(t.query),n=r.get("state");if(!n)throw new Error("No state");let i=await this.getOAuthState();if(!i)throw new Error("No OAuth state found");if(await this.removeOAuthState(),i.state!==n)throw new Error("Unknown state");let s=r.get("error");if(s){let l=[`(${s})`],c=r.get("error_description");throw c&&l.push(c),new Error(`OAuth request failed: ${l.join(" ")}`)}let o=r.get("code");if(!o)throw new Error("No code");let a=r.get("tenant_url");if(a){if(!new URL(a).hostname.endsWith(But))throw new Error("OAuth request failed: invalid OAuth tenant URL")}else throw new Error("No tenant URL");try{let l=await this._apiServer.getAccessToken(this.authRedirectURI.toString(),a,i.codeVerifier,o);await this._authSession.saveSession(l,a)}catch(l){throw this._logger.error(`Failed to get and save access token: ${$e(l)}`),new Error(`If you have a firewall, please add "${a}" to your allowlist.`)}}async handleAuthURI(t){try{await this.processAuthRedirect(t)}catch(r){this._logger.warn("Failed to process auth request:",r),this._programmaticCancellation.fire($e(r))}}};function Bme(e){return e.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function Dut(e){return(0,Qy.createHash)("sha256").update(e).digest()}var Xme=V(Fme()),NW=V(Pme()),Vx=V(require("path")),Kn=V(require("vscode")),e0e=require("vscode");var Ly=V(require("vscode"));var Lme=V(require("crypto")),Ny=V(require("fs")),ui=V(require("fs/promises"));function Ume(e){return e.isFile()?"File":e.isDirectory()?"Directory":"Other"}function zut(e){return e.isFile()?"File":e.isDirectory()?"Directory":"Other"}function Ome(e){return{size:e.size,type:zut(e),mtime:Math.floor(e.mtimeMs)}}async function Py(e){let t=await ui.lstat(e);return Ome(t)}async function qme(e){try{return await ui.access(e),!0}catch{return!1}}function dn(e){try{return ef(e).type==="File"}catch{return!1}}function Vme(e){try{return ef(e).type==="Directory"}catch{return!1}}async function Tc(e){try{return(await ui.stat(e)).isDirectory()}catch{return!1}}function ef(e){let t=Ny.lstatSync(e);return Ome(t)}async function Nx(e){let t=[],r=await ui.readdir(e,{withFileTypes:!0});for(let n of r)t.push([n.name,Ume(n)]);return t}function Px(e){let t=[],r=Ny.readdirSync(e,{withFileTypes:!0});for(let n of r)t.push([n.name,Ume(n)]);return t}async function kl(e){await ui.mkdir(e,{recursive:!0})}async function RW(e,t){await ui.rename(e,t)}async function Qk(e){return await ui.readFile(e)}async function Hme(e,t){let r=`${e}.${Lme.randomBytes(8).toString("hex")}.tmp`;try{await ui.writeFile(r,t),await ui.rename(r,e)}catch(n){throw await ui.unlink(r),n}}async function rn(e){return await ui.readFile(e,{encoding:"utf8"})}async function ku(e,t){return await ui.writeFile(e,t,{encoding:"utf8"})}function Wme(e,t){return Ny.writeFileSync(e,t,{encoding:"utf8"})}async function Gme(e){return await ui.unlink(e)}function Rc(e,t){Ly.commands.executeCommand("setContext",e,t)}var Nk=class e{constructor(t){this._extensionContext=t}static storageSubDir="augment-global-state";update(t,r){return this._extensionContext.globalState.update(t,r)}get(t){return this._extensionContext.globalState.get(t)}async save(t,r,n){await this._ensureStorageUriExists(n);let i=this._getFileUri(t,n);return await ku(i.fsPath,JSON.stringify(r))}async load(t,r){await this._ensureStorageUriExists(r);let n=this._getFileUri(t,r);try{let i=await rn(n.fsPath);return JSON.parse(i)}catch{return}}async _ensureStorageUriExists(t){let r=this._getStorageUri(t);await Tc(r.fsPath)||await kl(r.fsPath)}_getStorageUri(t){return t?.uniquePerWorkspace&&this._extensionContext.storageUri?Ly.Uri.joinPath(this._extensionContext.storageUri,e.storageSubDir):Ly.Uri.joinPath(this._extensionContext.globalStorageUri,e.storageSubDir)}_getFileUri(t,r){return Ly.Uri.joinPath(this._getStorageUri(r),`${t}.json`)}};var qx=V(require("vscode"));var kn=V(require("path")),kW=V(require("vscode"));var Lx=kn.posix.sep,jut=new RegExp("/\\/g");function $h(e){return kn.isAbsolute(e)}function Zut(e){return kn.sep==="\\"?e.replace(jut,Lx):e}function $me(e){return Zut(e)}function Ux(e){return e.with({path:kn.dirname(e.fsPath)})}function Yme(e){return kn.basename(e)}function Qa(e){let t=kn.dirname(e);return t==="."?"":Xut(t)}function Xut(e){return e.endsWith(Lx)?e:e+Lx}function Uy(e){for(;;){if(e===kn.sep||e===Lx||!e.endsWith(Lx)&&!e.endsWith(kn.sep))return e;e=e.slice(0,-1)}}function Fl(e,t){let r=typeof e=="string"?e:e.fsPath,n=typeof t=="string"?t:t.fsPath;return kn.relative(r,n)}function tf(e,t){let r=Fl(e,t);return r==="."?"":r.length>0&&!r.endsWith(kn.sep)?r+kn.sep:r}function Yh(e,t){let r=Fl(e,t);if(!(r===".."||r.startsWith(".."+kn.sep)||r.startsWith(".."+kn.posix.sep)))return r}function ks(e,t){return Yh(e,t)!==void 0}function Oy(e,t){let r=Fl(e,t);return r===""||r==="."||r==="."+kn.sep||r==="."+kn.posix.sep}function FW(e){if(kn.isAbsolute(e))throw new Error(`splitPath: ${e} must be a relative path`);let t=e,r=new Array;for(let n=0;t.length>0;n++){if(n>1e4)throw new Error(`Too-deep or malformed path name ${e}`);let i=kn.basename(t);i!=="."&&r.push(i);let s=Qa(t);if(s===t||s===".")break;t=s}return r.reverse()}async function Pk(e,t,r){let n=typeof e=="string"?kW.Uri.file(e):e;for(;;){try{let s=kW.Uri.joinPath(n,t),o=await Py(s.fsPath);if(r===void 0||o.type===r)return n}catch{}let i=kn.dirname(n.fsPath);if(kn.relative(i,n.fsPath).length===0)return;n=n.with({path:i})}}var zme=require("util"),kc=V(require("vscode")),Ox=class{constructor(t){this.doc=t}get eol(){return this.doc.eol}get lineCount(){return this.doc.lineCount}getText(t){return this.doc.getText(t)}offsetAt(t){return this.doc.offsetAt(t)}positionAt(t){return this.doc.positionAt(t)}validateRange(t){return this.doc.validateRange(t)}validatePosition(t){return this.doc.validatePosition(t)}getWordRangeAtPosition(t,r){return this.doc.getWordRangeAtPosition(t,r)}lineAt(t){return typeof t=="number"?this.doc.lineAt(t):this.doc.lineAt(t)}},Jme="quiet-background-file",MW=!1;function jme(){let e=kc.workspace.registerTextDocumentContentProvider(Jme,{async provideTextDocumentContent(t){return kc.workspace.fs.readFile(t.with({scheme:"file"})).then(r=>new zme.TextDecoder("utf-8").decode(r))}});return MW=!0,new kc.Disposable(()=>{MW=!1,e.dispose()})}async function Co(e){let t;if(typeof e=="string"?t=kc.Uri.file(e):t=e,!MW||t.scheme!=="file")return kc.workspace.openTextDocument(t);let r=t.toString();for(let n of kc.workspace.textDocuments)if(n.uri.scheme===t.scheme&&n.uri.toString()===r)return new Ox(n);return new Promise((n,i)=>{let s=kc.workspace.onDidOpenTextDocument(o=>{o.uri.scheme===t.scheme&&o.uri.toString()===r&&(s.dispose(),n(new Ox(o)))});kc.workspace.openTextDocument(t.with({scheme:Jme})).then(o=>{s.dispose(),n(new Ox(o))},o=>{s.dispose(),i(o)})})}function rf(e){let t;if(qx.window.activeTextEditor){let r=qx.window.activeTextEditor.document.uri.fsPath;t=e.getFolderRoot(r)}return t===void 0&&(t=e.getMostRecentlyChangedFolderRoot(),t===void 0&&(t=qx.workspace.workspaceFolders?.[0]?.uri.fsPath)),t}function Fu(e,t){if($h(e)){let i=t.getFolderRoot(e);return i===void 0?void 0:new qe(i,Fl(i,e))}let r=t.findBestWorkspaceRootMatch(e);if(r){let i=r.qualifiedPathName.rootPath;return new qe(i,e)}let n=rf(t);if(n)return new qe(n,e)}async function qy(e,t){let r=Fu(e,t)?.absPath;if(r!==void 0)try{return(await Co(r)).getText()}catch{return}}async function Zme(e,t){let r=Fu(e,t)?.absPath;if(r!==void 0)try{return(await Nx(r)).map(([i,s])=>i)}catch{return}}async function Uk(e){let t=e();return!t||!dn(t)?void 0:(await rn(t)).replace(/^\s+/,"")}async function t0e(e,t){if(!e)return;let r=Kn.Uri.joinPath(e,"Augment-Memories").fsPath,n=Kn.Uri.joinPath(e,"Agent-Memories").fsPath;if(dn(n))try{if(!dn(r)){let i=await rn(n);if(i.trim()==="")return;await ku(r,i),await Kn.workspace.fs.delete(Kn.Uri.file(n)),t.info("Migrated memories from Agent-Memories to Augment-Memories")}}catch(i){t.error("Error during memories migration:",i)}}var Kh=class{static introduction(){return`
Instructions for you:
- Repeat the following markdown without the codeblock
\`\`\`
# \u{1F44B} Meet Auggie

I'm your AI coding assistant. I excel at understanding large, complex codebases but I am happy to chip in on codebases of all sizes.
\`\`\`
`}static gitConfigured(){return"\nInstructions for you:\n- Repeat the following markdown without the codeblock\n```\n## Who are you?\n\nMind if I fetch some information about you from your git configuration:\n```\n- Run `git config user.name` and `git config user.email`\n- Repeat the following text in the codeblock\n```\nHey, {name}, since I am an LLM and I don't have a real memory (sad) I'll be using `\u{1F4E6} Augment Memories`\n```\n        "}static memories(){return`
Instructions for you:
- Repeat the following markdown without the codeblock
\`\`\`
## How I work

* **Augment Memories:** Project-specific memories
  * New folder = clean slate
  * I learn from my mistakes when you correct me
  * You can ask me to remember things (e.g. "commit to memory...")

* **Native Integrations:** Configure integrations like GitHub + Linear with 1-click over in [Settings](command:vscode-augment.showSettingsPanel)
\`\`\`
        `}},Lk=class{constructor(t,r){this.shellTool=t;this.workspaceManager=r}timeoutMsec=1e3;async getOnboardingInstructions(){return`System instructions (don't mention them to user):

Basic context:
- Assistant (you) is Augment, a coding agent that I (user) use for the first time
- Assistant (you) is tasked with welcoming and onboarding me to the agent
- Assistant (you) always keeps messages friendly, warm, and welcoming. And nice!

Complete the following instructions.
`+await this._getOnboardingInstructions()}async _getOnboardingInstructions(){try{if(rf(this.workspaceManager)===void 0)throw new Error("Cannot determine current working directory");let[r,n]=await this._getUserNameAndEmail();return r===void 0||n===void 0?Kh.introduction()+Kh.memories():Kh.introduction()+Kh.gitConfigured()+Kh.memories()}catch{return Kh.introduction()}}async _isInsideGitRepo(){return(await this.shellTool.call({command:"git rev-parse --is-inside-work-tree"},[],AbortSignal.timeout(this.timeoutMsec))).text.replace(`
`,"")==="true"}async _getUserNameAndEmail(){let t=await this.shellTool.call({command:"git config user.name"},[],AbortSignal.timeout(this.timeoutMsec)),r=await this.shellTool.call({command:"git config user.email"},[],AbortSignal.timeout(this.timeoutMsec));return t.isError||r.isError?[void 0,void 0]:[t.text.replace(`
`,""),r.text.replace(`
`,"")]}},edt=String.raw`
                     __  __                           _
                    |  \/  |                         (_)
                    | \  / | ___ _ __ ___   ___  _ __ _  ___  ___
                    | |\/| |/ _ \ '_ ' _ \ / _ \| '__| |/ _ \/ __|
                    | |  | |  __/ | | | | | (_) | |  | |  __/\__ \
                    |_|  |_|\___|_| |_| |_|\___/|_|  |_|\___||___/

 .+"+.+"+.+"+.+"+.+"+.+"+.+"+.+"+.+"+.+"+.+"+.+"+.+"+.+"+.+"+.+"+.+"+.+"+.+"+.+"+.
( Memories help me remember useful details for future interactions.               )
 )                                                                               (
( During Agent sessions, I'll try to create useful Memories automatically.        )
 )Memories can be about your codebase, technologies or your personal preferences.(
(                                                                                 )
 )Your Memories belong to you and are stored locally at the bottom of this file; (
( in the future, we may give you an option to share your memories with others.    )
 )                                                                               (
( NOTE: Memories will be compressed when this file grows too large.               )
 )For personal Memories: consider putting them in User Guidelines (via '@' menu) (
( For repository-level Memories: consider using '.augment-guidelines' file        )
 )Neither will be compressed.                                                    (
(                                                                                 )
 )Happy Coding!                                                                  (
(                                                                                 )
 "+.+"+.+"+.+"+.+"+.+"+.+"+.+"+.+"+.+"+.+"+.+"+.+"+.+"+.+"+.+"+.+"+.+"+.+"+.+"+.+"
                  ()
                O
              o
{AUGGIE_LOGO}

↓↓↓ MEMORIES START HERE ↓↓↓`,tdt=[String.raw`
      .dKWMMMMMMMMMMMMMMWd                  dWMMMMMMMMMMMMMMWKd.
     :WMMW0OOOOOOOOOOOOOk:                  ckkkkkkkkkkkkkkKMMMW;
     OMMMl                                                  oMMMk
     OMMM:                                                  cMMMk
     OMMM:                                                  cMMMk
     OMMM:                                                  cMMMk
     OMMM:          .;cc,                   .;c:'           cMMMk
     OMMM:         dWMMMMN;                dMMMMMN,         :MMMO
    :WMMX.         KMMMMMMo                KMMMMMMo         .XMMN;
dOKNMW0o.          .dOKKkc                 .d0KKk:           .o0WMNKOo
:dxOWMNk'                                                    ,kNMWOxd:
    .NMMW.           .oxc                   cxo.            'WMMX.
     OMMM:           .OMMNo'             ,oXMWO.            cMMMk
     OMMM:             'xWMMNOdl::;::ldONMMNx'              cMMMk
     OMMM:                ,lx0XNWMMMWNX0xc,                 cMMMk
     OMMM:                       ...                        cMMMk
     OMMM:                                                  cMMMk
     kMMMx.                                                .xMMMk
     'KMMMWNNNNNNNNNNNNNXd                  dXNNNNNNNNNNNNNWMMMK.
       ;x0KKKKKKKKKKKKKK0;                  ;0KKKKKKKKKKKKKK0x;
`,`
      .dKWMMMMMMMMMMMMMMWd                  dWMMMMMMMMMMMMMMWKd.
     :WMMW0OOOOOOOOOOOOOk:                  ckkkkkkkkkkkkkkKMMMW;
     OMMMl                                                  oMMMk
     OMMM:                                                  cMMMk
     OMMM:                                                  cMMMk
     OMMM:                                                  cMMMk
     OMMM:          .;cc,                     ,cc;.         cMMMk
     OMMM:         dWMMMMN;                 '0MWWMNo        :MMMO
    :WMMX.         KMMMMMMo               .dWM0,.dWMK,      .XMMN;
dOKNMW0o.          .dOKKkc                ;kd;    .okx.      .o0WMNKOo
:dxOWMNk'                                                    ,kNMWOxd:
    .NMMW.           .oxc                   cxo.            'WMMX.
     OMMM:           .OMMNo'             ,oXMWO.            cMMMk
     OMMM:             'xWMMNOdl::;::ldONMMNx'              cMMMk
     OMMM:                ,lx0XNWMMMWNX0xc,                 cMMMk
     OMMM:                       ...                        cMMMk
     OMMM:                                                  cMMMk
     kMMMx.                                                .xMMMk
     'KMMMWNNNNNNNNNNNNNXd                  dXNNNNNNNNNNNNNWMMMK.
       ;x0KKKKKKKKKKKKKK0;                  ;0KKKKKKKKKKKKKK0x;
`,`
      .dKWMMMMMMMMMMMMMMWd                  dWMMMMMMMMMMMMMMWKd.
     :WMMW0OOOOOOOOOOOOOk:                  ckkkkkkkkkkkkkkKMMMW;
     OMMMl                                                  oMMMk
     OMMM:                                                  cMMMk
     OMMM:                                                  cMMMk
     OMMM:                                                  cMMMk
     OMMM:          .;cc,                     ,cc;.         cMMMk
     OMMM:         oWMWMM0'                 '0MWWMNo        :MMMO
    :WMMX.       ,XMWx.,0MWd.             .xWM0,.dWMK,      .XMMN;
dOKNMW0o.        dkl.    ;dkc             ;kd;    .okx.      .o0WMNKOo
:dxOWMNk'                                                    ,kNMWOxd:
    .NMMW.           .oxc                   cxo.            'WMMX.
     OMMM:           .OMMNo'             ,oXMWO.            cMMMk
     OMMM:             'xWMMNOdl::;::ldONMMNx'              cMMMk
     OMMM:                ,lx0XNWMMMWNX0xc,                 cMMMk
     OMMM:                       ...                        cMMMk
     OMMM:                                                  cMMMk
     kMMMx.                                                .xMMMk
     'KMMMWNNNNNNNNNNNNNXd                  dXNNNNNNNNNNNNNWMMMK.
       ;x0KKKKKKKKKKKKKK0;                  ;0KKKKKKKKKKKKKK0x;
`],rdt=tdt.map(e=>edt.replace("{AUGGIE_LOGO}",e)),ndt=[String.raw`
                     __  __                           _
                    |  \/  |                         (_)
                    | \  / | ___ _ __ ___   ___  _ __ _  ___  ___
                    | |\/| |/ _ \ '_ ' _ \ / _ \| '__| |/ _ \/ __|
                    | |  | |  __/ | | | | | (_) | |  | |  __/\__ \
                    |_|  |_|\___|_| |_| |_|\___/|_|  |_|\___||___/

 __________________________________________________________________________________
/\                                                                                 \
\_| NOTE: Memories will be compressed when this file grows too large.              |
  | For personal Memories: consider putting them in User Guidelines (via '@' menu) |
  | For repository-level Memories: consider using '.augment-guidelines' file       |
  | Neither will be compressed.                                                    |
  |   _____________________________________________________________________________|_
   \_/_______________________________________________________________________________/

↓↓↓ MEMORIES START HERE ↓↓↓`],QW,r0e=Kn.window.createTextEditorDecorationType({isWholeLine:!0,before:{contentText:"",fontWeight:"bold"}});function n0e(){return r0e}function PW(e){let t=e[0].split(`
`).length;if(!e.every(r=>r.split(`
`).length===t))throw new Error("All animation frames must have the same number of lines");return t}async function i0e(e,t,r){let n=t();if(!n||e?.document.uri.fsPath!==Kn.Uri.file(n).fsPath)return;let i=r.get("memoriesFileOpenCount")??0;await r.update("memoriesFileOpenCount",i+1)}async function OW(e,t,r){let n=s0e(r),i=t();if(!i||e?.document.uri.fsPath!==Kn.Uri.file(i).fsPath)return;QW!==void 0&&clearInterval(QW);let s=e.document.getText().replace(/^\s+/,"");s=`
`.repeat(PW(n))+s,await e.edit(c=>{let u=e.document.lineAt(0),f=e.document.lineAt(e.document.lineCount-1),p=new Kn.Range(u.range.start,f.range.end);c.replace(p,s)}),await e.document.save();let o=0,a=1e3,l=(0,Xme.default)(()=>{let f=n[o].split(`
`).map((p,g)=>({range:new Kn.Range(g,0,g,1e4),renderOptions:{before:{contentText:p.replace(/ /g,"\xA0")}}}));e.setDecorations(r0e,f),o=(o+1)%n.length},a);l(),QW=setInterval(l,a)}function s0e(e){return(e.get("memoriesFileOpenCount")??0)<=3?rdt:ndt}function o0e(e,t,r,n){if(e.document.uri.fsPath!==r()||!t||t.document!==e.document)return;let i=s0e(n);if(!e.document.getText().startsWith(`
`.repeat(PW(i))))for(let s of e.contentChanges)s.range.start.line<PW(i)&&OW(t,r,n)}var LW=class{constructor(t,r,n,i){this.workspaceManager=t;this.apiServer=r;this.logger=n;this.progressTracker=i}toolDefinitions=[{name:"ls",description:"Lists a content of a folder by a relative path to it.",input_schema_json:JSON.stringify({type:"object",properties:{folder:{type:"string",description:"Relative path to a folder. Can be either '.' or './*'"}},required:["folder"]}),tool_safety:mt.Safe},{name:"read-file",description:"Read a file.",input_schema_json:JSON.stringify({type:"object",properties:{file_path:{type:"string",description:"The path of the file to read."}},required:["file_path"]}),tool_safety:mt.Safe},{name:"complete",description:"Tool which should be called at the very end to return final response.",input_schema_json:JSON.stringify({type:"object",properties:{response:{type:"string",description:"Final response to the user."}},required:["response"]}),tool_safety:mt.Safe},{name:"codebase-retrieval",description:"Use this tool to request information from the codebase. It will return relevant snippets for the requested information.",input_schema_json:JSON.stringify({type:"object",properties:{information_request:{type:"string",description:"A description of the information you need."}},required:["information_request"]}),tool_safety:mt.Safe}];getToolDefinitions(){return this.toolDefinitions}async runTool(t,r){switch(t){case"codebase-retrieval":{let n=this.apiServer.createRequestId(),i=r.information_request;try{let s=await this.apiServer.agentCodebaseRetrieval(n,i,this.workspaceManager.getContext().blobs,[],2e4);return Gt(s.formattedRetrieval,n)}catch(s){return this.logger.error(`Failed to retrieve codebase information: ${s}`),ot("Failed to retrieve codebase information.")}}case"ls":{let n=r.folder,i=Fu(n,this.workspaceManager)?.absPath;if(i===void 0)return ot(`Failed to list directory: ${n}`);if(!await Tc(i))return ot(`Directory does not exist: ${n}`);try{let o=(await Nx(i)).map(([a,l])=>a);return Gt(o.join(`
`))}catch{return this.logger.error(`Failed to list directory: ${n}`),ot(`Failed to list directory: ${n}`)}}case"read-file":{let n=r.file_path,i=Fu(n,this.workspaceManager)?.absPath;if(i===void 0)return ot(`Failed to read file: ${n}`);if(!dn(i))return ot(`File does not exist: ${n}`);let s=await rn(i);return s===void 0?(this.logger.error(`Failed to read file: ${n}`),ot(`Failed to read file: ${n}`)):Gt(s)}default:return ot(`Unknown tool: ${t}`)}}},UW=class e{constructor(t,r,n,i,s,o,a,l){this.rootAbsPath=t;this.apiServer=r;this.workspaceManager=n;this.featureFlagManager=i;this.logger=s;this.orientationConcurrencyLevel=o;this.progressTracker=a;this.trace=l;if(this.localizationPrompt=this.featureFlagManager.currentFlags.memoriesParams.language_localization_prompt,!this.localizationPrompt)throw this.trace.setFlag(Ft.localizationPromptMissing),new Error("Localization prompt missing");if(this.detectLanguagesPrompt=this.featureFlagManager.currentFlags.memoriesParams.detect_languages_prompt,!this.detectLanguagesPrompt)throw this.trace.setFlag(Ft.detectLanguagesPromptMissing),new Error("Detect languages prompt missing");if(this.orientationCompressionPrompt=this.featureFlagManager.currentFlags.memoriesParams.orientation_compression_prompt,!this.orientationCompressionPrompt)throw this.trace.setFlag(Ft.orientationCompressionPromptMissing),new Error("Orientation compression prompt missing");if(this.orientationMaxLanguages=this.featureFlagManager.currentFlags.memoriesParams.orientation_max_languages,!this.orientationMaxLanguages)throw this.trace.setFlag(Ft.orientationMaxLanguagesMissing),new Error("Orientation max languages missing");if(this.buildTestQuery=this.featureFlagManager.currentFlags.memoriesParams.orientation_build_test_query,!this.buildTestQuery)throw this.trace.setFlag(Ft.orientationBuildTestQueryMissing),new Error("Build test prompt missing");if(this.modelName=this.featureFlagManager.currentFlags.memoriesParams.orientation_model_name,this.modelName===void 0)throw this.trace.setFlag(Ft.orientationModelNameMissing),new Error("Orientation model name missing");this.modelName==="default"&&(this.modelName=void 0),this.queries=[{name:"build-test",template:this.buildTestQuery}],this.tools=new LW(n,r,this.logger,a)}localizationPrompt;detectLanguagesPrompt;orientationCompressionPrompt;orientationMaxLanguages;modelName;buildTestQuery;tools;queries;static agentMdPattern=new RegExp("<agent_md>(?:\\s*```(?:\\w+)?\\n?)?(.*?)(?:```\\s*)?</agent_md>","s");async appendToWorkspaceGuidelines(t){let r="[//]: # (AUGMENT-CODEBASE-ORIENTATION-RESULTS-START)",n="[//]: # (AUGMENT-CODEBASE-ORIENTATION-RESULTS-END)",i=this.workspaceManager.getBestFolderRoot();if(!i)throw this.trace.setFlag(Ft.noRootFolderFound),new Error("No root folder found");let s=Vx.default.join(i,".augment-guidelines"),o="";try{dn(s)&&(o=await rn(s))}catch(u){this.trace.setFlag(Ft.failedToReadGuidelines),this.logger.error(`Failed to read existing guidelines: ${u}`)}let a="",l=o.indexOf(r),c=o.indexOf(n);if(l!==-1&&c!==-1&&c>l){let u=o.substring(0,l),f=o.substring(c+n.length);a=u+r+`
`+t+`
`+n+f,this.logger.debug("Replacing existing orientation results between markers")}else{let u=o.trim().length>0?`

`:"";a=o.trim()+u+r+`
`+t+`
`+n,this.logger.debug("Appending new orientation results with markers")}try{await Kn.workspace.fs.writeFile(Kn.Uri.file(s),Buffer.from(a,"utf8")),this.logger.debug(`Successfully updated workspace guidelines at ${s}`)}catch(u){throw this.trace.setFlag(Ft.failedToWriteGuidelines),new Error(`Failed to write workspace guidelines: ${u}`)}}async run(){let{languages:t,allFiles:r}=await this.getTopProgrammingLanguages();if(Object.keys(t).length===0)throw new Error("No programming languages detected");this.progressTracker.set(10);let n=await this.localizeLanguages(r,t);this.progressTracker.set(25);let i=(await Zme(".",this.workspaceManager))?.join(`
`);if(!i)throw this.trace.setFlag(Ft.failedToListRootFolder),new Error("Failed to list root folder");this.progressTracker.set(30);let s=(0,NW.default)(this.orientationConcurrencyLevel),o=Object.keys(t),l=60/o.length/this.queries.length;this.trace.setFlag(Ft.agenticStarted);let c=o.map((C,v)=>s(async()=>{this.logger.debug(`Processing language: ${C}`);let b=[];for(let w of this.queries){this.logger.debug(`Processing query: ${w.name}`);let B=w.template.replace(/{language}/g,C).replace(/{rootFolderContent}/g,i).replace(/{locationList}/g,n[C].split(",").join(`
`)),F=await this.doAgenticTurn(B,l,v);b.push(F),this.logger.debug(`Response language "${C}" and query "${w.name}": ${F}`)}return b})),u=await Promise.all(c);this.trace.setFlag(Ft.agenticEnded);let f=u.flat().join(`

`);this.trace.setStringStats(Ft.agenticModelResponseStats,f),this.progressTracker.set(90);let p=this.apiServer.createRequestId();this.trace.setRequestId(Ft.compressionRequestId,p);let g=await this.simpleLlmCall(this.orientationCompressionPrompt.replace(/{assembledKnowledge}/g,f),p);this.trace.setStringStats(Ft.compressionModelResponseStats,g);let A=g.match(e.agentMdPattern);if(!A)throw this.trace.setFlag(Ft.compressionParsingFailed),new Error("Failed to parse compression response");let y=A[1].trim();this.logger.debug(`Compressed knowledge: ${y}`),this.progressTracker.set(95),this.trace.setFlag(Ft.rememberStarted),await this.appendToWorkspaceGuidelines(y),this.trace.setFlag(Ft.rememberEnded),this.progressTracker.set(100)}async doAgenticTurn(t,r,n){let i=t,s=[],o=[],a={request_message:i,response_text:"",request_id:this.apiServer.createRequestId(),request_nodes:[],response_nodes:[]},l,c=30,u=32,f=r/u,p=0;do{if(this.trace.setNum(`agenticNumTurns_${n}`,p),p>c){if(p>u)throw new Error("Too many turns in agentic loop");s=[...s,{id:2,type:al.TEXT,text_node:{content:"You did too many turns already. Call `complete` tool immediately."}}]}this.logger.debug(`Running agentic turn ${p}.`),this.progressTracker.inc(f);let g=this.apiServer.createRequestId(),A=await Ap(i,g,o,this.tools.getToolDefinitions(),s,cn.agent);for await(let y of A)if(y.nodes){let C=y.nodes.filter(v=>v.type===nc.TOOL_USE||v.type===nc.RAW_RESPONSE);a.response_nodes=a.response_nodes||[],a.response_nodes.push(...C)}if(l=a.response_nodes?.find(y=>y.type===nc.TOOL_USE),l?.tool_use!==void 0){let y=l.tool_use,C=y.tool_name,v=JSON.parse(y.input_json);if(this.logger.debug(`Calling tool: ${C}. Args: ${JSON.stringify(v)}`),C==="complete")return this.logger.debug(`Agentic turn complete. Took ${p} turns.`),this.progressTracker.inc(f*(u-p-1)),this.trace.setStringStats(`agenticModelResponseStats_${n}`,v.response),v.response;let b=await this.tools.runTool(y.tool_name,v);s=[{id:1,type:al.TOOL_RESULT,tool_result_node:{tool_use_id:y.tool_use_id,content:b.text,is_error:b.isError}}],this.logger.debug(`Tool result: ${b.text.trim().split(`
`)[0]}...`),i="",o.push(a),a={request_message:"",response_text:"",request_id:this.apiServer.createRequestId(),request_nodes:s,response_nodes:[]}}p++}while(l?.tool_use!==void 0);throw this.trace.setFlag(`agenticFailedToComplete_${n}`),new Error("Agent didn't call the complete tool.")}async localizeLanguages(t,r){let n={},i=(0,NW.default)(this.orientationConcurrencyLevel),o=15/Object.keys(r).length;this.trace.setFlag(Ft.localizationStarted);let a=Object.entries(r).map(([c,u],f)=>i(async()=>{this.logger.debug(`Localizing language: ${c} (index: ${f})`);let p=idt(t,u);if(p.trim().length===0)throw new Error(`Failed to render folder tree for ${c}`);let g=this.localizationPrompt.replace(/{programmingLanguage}/g,c).replace(/{languageTree}/g,p);this.trace.setStringStats(`localizationPromptStats_${f}`,g);let A=this.apiServer.createRequestId();this.trace.setRequestId(`localizationRequestId_${f}`,A);let y=await this.simpleLlmCall(g,A);this.trace.setStringStats(`localizationResponseStats_${f}`,y);let C=y.match(/<locations>(.*?)<\/locations>/);if(!C)throw this.trace.setFlag(`localizationParsingFailed_${f}`),new Error(`Failed to extract locations from response: ${y}`);return this.progressTracker.inc(o),{language:c,locations:C[1].trim()}})),l=await Promise.all(a);return this.trace.setFlag(Ft.localizationEnded),l.forEach(({language:c,locations:u},f)=>{let p=u.split(",").length;this.trace.setNum(`localizationNumLocations_${f}`,p),n[c]=u}),n}async getTopProgrammingLanguages(){let t=new Set(["ad","adown","argdown","argdn","bicep","c","cpp","cc","cp","cxx","h","hpp","hxx","cs","ex","elm","erb","rhtml","gd","godot","tres","tscn","go","haml","hs","hx","html","htm","java","js","jsx","kt","ml","mli","mll","mly","php","py","r","rb","rs","res","resi","sass","scala","styl","swift","tf","tfvars","ts","tsx","vue","vala"]),r={},n=[],i=async p=>{let g=await Nx(p);if(g)for(let[A,y]of g){if(A.startsWith("."))continue;let C=Vx.default.join(p,A);if(y==="Directory")await i(C);else if(y==="File"){let v=Vx.default.relative(this.rootAbsPath,C);n.push(v);let b=A.includes(".")?A.split(".").pop().toLowerCase():"";b&&t.has(b)&&(r[b]=(r[b]||0)+1)}}};await i(this.rootAbsPath),this.trace.setNum(Ft.topLanguagesNumFiles,n.length);let s=Object.entries(r).sort(([,p],[,g])=>g-p).slice(0,20).map(([p,g])=>`${p}: ${g}`).join(`
`),o=this.apiServer.createRequestId();this.trace.setRequestId(Ft.topLanguagesRequestId,o);let a=await this.simpleLlmCall(this.detectLanguagesPrompt.replace(/{fileExtensionsList}/g,s),o);this.trace.setStringStats(Ft.topLanguagesModelResponseStats,a),this.logger.debug(`Detected languages: "${a}"`);let l=JSON.parse(a.trim());this.trace.setNum(Ft.topLanguagesNumDetectedLanguages,Object.keys(l).length);let c={};for(let[p,g]of Object.entries(l))c[p]=g.reduce((A,y)=>A+(r[y]||0),0),this.logger.debug(`${p}: ${c[p]} files`);let u=Object.entries(c).sort(([,p],[,g])=>g-p).slice(0,this.orientationMaxLanguages).map(([p])=>p),f={};for(let p of u)f[p]=l[p];return this.logger.debug(`Top ${this.orientationMaxLanguages} languages: ${JSON.stringify(f)}`),this.trace.setNum(Ft.topLanguagesNumFinalLanguages,Object.keys(f).length),{languages:f,allFiles:n}}async simpleLlmCall(t,r){let n=await Ap(t,r,[],[],[],cn.chat,this.modelName);for await(let i of n)if(i.nodes){for(let s of i.nodes)if(s.type===nc.RAW_RESPONSE)return s.content}throw new Error("No response from model")}};function a0e(e,t="",r=!0,n="",i=0,s=3){if(i>s)return"";let o=[];if(n){let c=e.isDirectory?`${n}/`:n;o.push(`${t}${r?"\u2514\u2500\u2500 ":"\u251C\u2500\u2500 "}${c}`)}let a=t+(r?"    ":"\u2502   "),l=Array.from(e.children.entries()).sort(([c],[u])=>c.localeCompare(u));return l.forEach(([c,u],f)=>{let p=f===l.length-1,g=a0e(u,a,p,c,i+1,s);g&&o.push(g)}),o.join(`
`)}function idt(e,t){let r=e.filter(i=>{let s=i.split(".").pop()?.toLowerCase();return s&&t.includes(s)});if(r.length===0)return"";let n={isDirectory:!0,children:new Map};for(let i of r){let o=Kn.workspace.asRelativePath(i).split(Vx.default.sep),a=n;for(let l=0;l<o.length-1;l++){let c=o[l];a.children.has(c)||a.children.set(c,{isDirectory:!0,children:new Map}),a=a.children.get(c)}}return n.children.size===0?"":a0e(n)}var nf={state:"idle"},l0e=new e0e.EventEmitter,c0e=l0e.event;function zh(){l0e.fire(nf)}async function Ok(e,t,r,n,i){if(nf.state==="in-progress"){Kn.window.showInformationMessage("Augment Agent orientation is already in progress");return}let s=j("InitialOrientation"),o=dB.create(i);o.setFlag(Ft.start);try{nf={state:"in-progress",progress:0,lastRunTimestamp:Date.now()},zh(),await sdt(e,t,r,n,s,o),nf={state:"succeeded",progress:100,lastRunTimestamp:Date.now()},zh()}catch(a){o.setFlag(Ft.exceptionThrown),s.error(`Error in initial orientation: ${a}`),Kn.window.showErrorMessage("Augment agent orientation process failed :(");let l="";o.getFlag(Ft.noRootFolderFound)?l="Error code #1001":o.getFlag(Ft.compressionParsingFailed)?l="Error code #1002":o.getFlag(Ft.localizationStarted)&&!o.getFlag(Ft.localizationEnded)?l="Error code #1003":o.getFlag(Ft.agenticStarted)&&!o.getFlag(Ft.agenticEnded)?l="Error code #1004":o.getFlag(Ft.rememberStarted)&&!o.getFlag(Ft.rememberEnded)&&(l="Error code #1005"),nf={state:"failed",progress:0,lastRunTimestamp:Date.now(),errorMessage:l},zh()}finally{o.setFlag(Ft.end),Ui().reportEvent({eventName:Vi.initialOrientation,conversationId:"",eventData:{initialOrientationData:o}})}}async function sdt(e,t,r,n,i,s){i.debug("Starting initial orientation process.");let o=r.currentFlags.memoriesParams?.orientation_concurrency_level;if(!o){s.setFlag(Ft.concurrencyLevelMissing),i.error("Failed to get concurrency level for initial orientation.");return}if(!r.currentFlags.memoriesParams?.enable_initial_orientation){s.setFlag(Ft.initialOrientationDisabled),i.error("Initial orientation is not enabled.");return}let a=l=>{let c=0;return{inc:u=>{nf.state!=="failed"&&(c=Math.min(c+u,100),l.report({increment:0,message:`${Math.round(c)}%`}),nf={state:"in-progress",progress:Math.round(c),lastRunTimestamp:Date.now()},zh())},set:u=>{u<=c||(u=Math.min(u,100),c=u,l.report({increment:0,message:`${Math.round(c)}%`}),nf={state:"in-progress",progress:Math.round(c),lastRunTimestamp:Date.now()},zh())},reset:()=>{l.report({increment:0,message:"0%"}),c=0,nf={state:"in-progress",progress:0,lastRunTimestamp:Date.now()},zh()}}};await Kn.window.withProgress({location:Kn.ProgressLocation.Window,title:"Augment Codebase Orientation"},async(l,c)=>{let u=a(l);u.reset(),await u0e(e,t,r,n,i,o,u,s)})}async function u0e(e,t,r,n,i,s,o,a){o.set(1);try{let l=t.getBestFolderRoot();if(!l)throw a.setFlag(Ft.noRootFolderFound),new Error("No root folder found");i.debug(`Root folder: ${l}.`),o.set(2),o.set(3);let c=new UW(l,e,t,r,i,s,o,a);o.set(5),await c.run(),o.set(100),Kn.window.showInformationMessage("Augment Agent completed orientation process. Workspace guidelines were updated!")}catch(l){if(s>1&&Qr.isAPIErrorWithStatus(l,We.resourceExhausted)){a.setFlag(Ft.retryWithLowerConcurrencyLevel),Kn.window.showErrorMessage("Augment agent orientation process failed: Rate limit exceeded. Retrying..."),i.error("Retrying initial orientation with concurrency level 1."),await new Promise(c=>setTimeout(c,5e3)),o.reset(),await u0e(e,t,r,n,i,1,o,a);return}throw l}}var NCe=V(require("vscode"));var qW=class{_status="running";_buffer=new Array;_triggerYield;_resolveFn;_rejectFn;constructor(t){this._triggerYield=new Promise((r,n)=>{this._resolveFn=r,this._rejectFn=n}),this.collectBaseGenerator(t)}cancel=()=>{this.isFinished||this._reject(new Error("Cancelled"))};get isFinished(){return this._status!=="running"}get hasErrored(){return this._status==="errored"}collectBaseGenerator=async t=>{try{this._resolve(),this._triggerYield=new Promise((r,n)=>{this._resolveFn=r,this._rejectFn=n});for await(let r of t)this._buffer.push(r),this._resolve(),this._triggerYield=new Promise((n,i)=>{this._resolveFn=n,this._rejectFn=i});this._status="success",this._resolve()}catch(r){this._reject(r)}};_reject=t=>{this._status="errored",this._rejectFn(t)};_resolve=()=>{this._resolveFn()};async*copy(){let t=0;for(;;){if(t<this._buffer.length){yield this._buffer[t],t+=1;continue}if(await this._triggerYield,t===this._buffer.length&&this.isFinished)return}}};var cA=qW;var ki=V(require("vscode"));var Hx=V(require("vscode"));function d0e(e,t,r=!1,n=!0){let i=new Hx.Position(e.start.line,0),s=e.end.line;n&&e.end.character===0&&s>e.start.line&&(s-=1);let o=t.lineAt(s).range.end;return r&&t.lineCount>e.end.line+1&&(o=new Hx.Position(e.end.line+1,0)),new Hx.Range(i,o)}function f0e(e){return e?(e.selections=e.selections.map(t=>{if(e.document.getText(t).trim()==="")return t;let n=d0e(t,e.document);return t.active.isBefore(t.anchor)?new ki.Selection(n.end,n.start):new ki.Selection(n.start,n.end)}),!0):!1}function h0e(){let e=ki.window.activeTextEditor;if(!e)return[];let{document:t,selection:r}=e,n=[];return r.isEmpty||(n=ki.languages.getDiagnostics(t.uri).filter(o=>o.range.intersection(r)).map(o=>({location:{path:t.fileName,line_start:o.range.start.line,line_end:o.range.end.line},char_start:0,char_end:0,blob_name:"",current_blob_name:"",message:o.message,severity:(()=>{switch(o.severity){case ki.DiagnosticSeverity.Error:return"ERROR";case ki.DiagnosticSeverity.Warning:return"WARNING";case ki.DiagnosticSeverity.Information:return"INFORMATION";case ki.DiagnosticSeverity.Hint:return"HINT";default:return"ERROR"}})()}))),n}function VW(e,t,r,n){if(!e)return null;let{document:i,selection:s}=e,o=t.safeResolvePathName(i.uri);if(!o)return j("getSelectedCodeDetails").error("Unable to resolve path name for document"),null;let a=i.languageId,l=i.lineAt(0).range.start,c=i.lineAt(i.lineCount-1).range.end,u=i.getText(s),f,p;if(u.trim()===""){let y=new ki.Position(s.active.line+1,0);f=new ki.Range(l,y),p=new ki.Range(y,c)}else f=new ki.Range(l,s.start),p=new ki.Range(s.end,c);var g=i.getText(f),A=i.getText(p);return g.length>r&&(g=g.slice(g.length-r)),A.length>n&&(A=A.slice(0,n)),A.trim()===""&&(u+=A,A=""),{selectedCode:u,prefix:g,suffix:A,path:o.relPath,language:a,prefixBegin:f.start.character,suffixEnd:p.end.character}}var cG=V(require("fs")),Jh=V(require("os")),dA=V(require("path")),Zx=V(iCe()),jx=V(require("vscode"));var aG=Jh.default.platform(),egt=j("AugmentEnvironment");function sCe(){let e;return aG==="win32"&&process.env.APPDATA?e=dA.default.join(process.env.APPDATA,"Code","User"):aG==="darwin"?e=dA.default.join(Jh.default.homedir(),"Library","Application Support","Code","User"):aG==="linux"&&(e=dA.default.join(Jh.default.homedir(),".config","Code","User")),e&&cG.default.existsSync(e)?e:null}function oCe(){let e=Jh.default.homedir(),t;return Jh.default.platform()==="win32"?t=dA.default.join(e,"Documents"):Jh.default.platform()==="darwin"?t=dA.default.join(e,"Documents"):Jh.default.platform()==="linux"&&(t=dA.default.join(e,"Documents")),t&&cG.default.existsSync(t)?t:null}var lG;function jh(){return lG===void 0&&(lG=jx.extensions.getExtension("Augment.vscode-augment")?.packageJSON??null),lG}var uG="0.0.3141592";function wr(e,t=jh()?.version){return!t||e===""?!1:Zx.default.gte(t,e)||t===uG}function dG(e,t=jh()?.version){return t?e===""?!1:Zx.default.lte(t,e)&&t!==uG:!0}function ea(e){try{return Zx.default.gte(jx.version,e)}catch{return egt.error(`Failed to parse vscode version: ${jx.version}`),!1}}function tgt(e=jh()?.version){return e===uG}function jk(e=jh()?.version){return!e||tgt(e)?0:Zx.default.parse(e)?.patch??0}function rgt(e,t,r,n,i,s,o){return{blob_name:e,path:t,char_start:r,char_end:n,replacement_text:i,present_in_blob:s,expected_blob_name:o}}function Wy(e){return e.map(t=>rgt(t.blobName,t.pathName,t.origStart,t.origStart+t.origLength,t.text,t.uploaded,t.expectedBlobName))}function of(e){return Array.isArray?Array.isArray(e):pCe(e)==="[object Array]"}var ngt=1/0;function igt(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-ngt?"-0":t}function sgt(e){return e==null?"":igt(e)}function Qu(e){return typeof e=="string"}function hCe(e){return typeof e=="number"}function ogt(e){return e===!0||e===!1||agt(e)&&pCe(e)=="[object Boolean]"}function gCe(e){return typeof e=="object"}function agt(e){return gCe(e)&&e!==null}function Na(e){return e!=null}function fG(e){return!e.trim().length}function pCe(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}var lgt="Incorrect 'index' type",cgt=e=>`Invalid value for key ${e}`,ugt=e=>`Pattern length exceeds max of ${e}.`,dgt=e=>`Missing ${e} property in key`,fgt=e=>`Property 'weight' in key '${e}' must be a positive integer`,lCe=Object.prototype.hasOwnProperty,hG=class{constructor(t){this._keys=[],this._keyMap={};let r=0;t.forEach(n=>{let i=ACe(n);this._keys.push(i),this._keyMap[i.id]=i,r+=i.weight}),this._keys.forEach(n=>{n.weight/=r})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}};function ACe(e){let t=null,r=null,n=null,i=1,s=null;if(Qu(e)||of(e))n=e,t=cCe(e),r=gG(e);else{if(!lCe.call(e,"name"))throw new Error(dgt("name"));let o=e.name;if(n=o,lCe.call(e,"weight")&&(i=e.weight,i<=0))throw new Error(fgt(o));t=cCe(o),r=gG(o),s=e.getFn}return{path:t,id:r,weight:i,src:n,getFn:s}}function cCe(e){return of(e)?e:e.split(".")}function gG(e){return of(e)?e.join("."):e}function hgt(e,t){let r=[],n=!1,i=(s,o,a)=>{if(Na(s))if(!o[a])r.push(s);else{let l=o[a],c=s[l];if(!Na(c))return;if(a===o.length-1&&(Qu(c)||hCe(c)||ogt(c)))r.push(sgt(c));else if(of(c)){n=!0;for(let u=0,f=c.length;u<f;u+=1)i(c[u],o,a+1)}else o.length&&i(c,o,a+1)}};return i(e,Qu(t)?t.split("."):t,0),n?r:r[0]}var ggt={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},pgt={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},Agt={location:0,threshold:.6,distance:100},mgt={useExtendedSearch:!1,getFn:hgt,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1},Dt={...pgt,...ggt,...Agt,...mgt},ygt=/[^ ]+/g;function Cgt(e=1,t=3){let r=new Map,n=Math.pow(10,t);return{get(i){let s=i.match(ygt).length;if(r.has(s))return r.get(s);let o=1/Math.pow(s,.5*e),a=parseFloat(Math.round(o*n)/n);return r.set(s,a),a},clear(){r.clear()}}}var Xx=class{constructor({getFn:t=Dt.getFn,fieldNormWeight:r=Dt.fieldNormWeight}={}){this.norm=Cgt(r,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((r,n)=>{this._keysMap[r.id]=n})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,Qu(this.docs[0])?this.docs.forEach((t,r)=>{this._addString(t,r)}):this.docs.forEach((t,r)=>{this._addObject(t,r)}),this.norm.clear())}add(t){let r=this.size();Qu(t)?this._addString(t,r):this._addObject(t,r)}removeAt(t){this.records.splice(t,1);for(let r=t,n=this.size();r<n;r+=1)this.records[r].i-=1}getValueForItemAtKeyId(t,r){return t[this._keysMap[r]]}size(){return this.records.length}_addString(t,r){if(!Na(t)||fG(t))return;let n={v:t,i:r,n:this.norm.get(t)};this.records.push(n)}_addObject(t,r){let n={i:r,$:{}};this.keys.forEach((i,s)=>{let o=i.getFn?i.getFn(t):this.getFn(t,i.path);if(Na(o)){if(of(o)){let a=[],l=[{nestedArrIndex:-1,value:o}];for(;l.length;){let{nestedArrIndex:c,value:u}=l.pop();if(Na(u))if(Qu(u)&&!fG(u)){let f={v:u,i:c,n:this.norm.get(u)};a.push(f)}else of(u)&&u.forEach((f,p)=>{l.push({nestedArrIndex:p,value:f})})}n.$[s]=a}else if(Qu(o)&&!fG(o)){let a={v:o,n:this.norm.get(o)};n.$[s]=a}}}),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}};function mCe(e,t,{getFn:r=Dt.getFn,fieldNormWeight:n=Dt.fieldNormWeight}={}){let i=new Xx({getFn:r,fieldNormWeight:n});return i.setKeys(e.map(ACe)),i.setSources(t),i.create(),i}function vgt(e,{getFn:t=Dt.getFn,fieldNormWeight:r=Dt.fieldNormWeight}={}){let{keys:n,records:i}=e,s=new Xx({getFn:t,fieldNormWeight:r});return s.setKeys(n),s.setIndexRecords(i),s}function Zk(e,{errors:t=0,currentLocation:r=0,expectedLocation:n=0,distance:i=Dt.distance,ignoreLocation:s=Dt.ignoreLocation}={}){let o=t/e.length;if(s)return o;let a=Math.abs(n-r);return i?o+a/i:a?1:o}function Egt(e=[],t=Dt.minMatchCharLength){let r=[],n=-1,i=-1,s=0;for(let o=e.length;s<o;s+=1){let a=e[s];a&&n===-1?n=s:!a&&n!==-1&&(i=s-1,i-n+1>=t&&r.push([n,i]),n=-1)}return e[s-1]&&s-n>=t&&r.push([n,s-1]),r}var fA=32;function bgt(e,t,r,{location:n=Dt.location,distance:i=Dt.distance,threshold:s=Dt.threshold,findAllMatches:o=Dt.findAllMatches,minMatchCharLength:a=Dt.minMatchCharLength,includeMatches:l=Dt.includeMatches,ignoreLocation:c=Dt.ignoreLocation}={}){if(t.length>fA)throw new Error(ugt(fA));let u=t.length,f=e.length,p=Math.max(0,Math.min(n,f)),g=s,A=p,y=a>1||l,C=y?Array(f):[],v;for(;(v=e.indexOf(t,A))>-1;){let W=Zk(t,{currentLocation:v,expectedLocation:p,distance:i,ignoreLocation:c});if(g=Math.min(W,g),A=v+u,y){let Z=0;for(;Z<u;)C[v+Z]=1,Z+=1}}A=-1;let b=[],w=1,B=u+f,F=1<<u-1;for(let W=0;W<u;W+=1){let Z=0,$=B;for(;Z<$;)Zk(t,{errors:W,currentLocation:p+$,expectedLocation:p,distance:i,ignoreLocation:c})<=g?Z=$:B=$,$=Math.floor((B-Z)/2+Z);B=$;let ee=Math.max(1,p-$+1),U=o?f:Math.min(p+$,f)+u,ge=Array(U+2);ge[U+1]=(1<<W)-1;for(let N=U;N>=ee;N-=1){let se=N-1,z=r[e.charAt(se)];if(y&&(C[se]=+!!z),ge[N]=(ge[N+1]<<1|1)&z,W&&(ge[N]|=(b[N+1]|b[N])<<1|1|b[N+1]),ge[N]&F&&(w=Zk(t,{errors:W,currentLocation:se,expectedLocation:p,distance:i,ignoreLocation:c}),w<=g)){if(g=w,A=se,A<=p)break;ee=Math.max(1,2*p-A)}}if(Zk(t,{errors:W+1,currentLocation:p,expectedLocation:p,distance:i,ignoreLocation:c})>g)break;b=ge}let Q={isMatch:A>=0,score:Math.max(.001,w)};if(y){let W=Egt(C,a);W.length?l&&(Q.indices=W):Q.isMatch=!1}return Q}function xgt(e){let t={};for(let r=0,n=e.length;r<n;r+=1){let i=e.charAt(r);t[i]=(t[i]||0)|1<<n-r-1}return t}var Xk=class{constructor(t,{location:r=Dt.location,threshold:n=Dt.threshold,distance:i=Dt.distance,includeMatches:s=Dt.includeMatches,findAllMatches:o=Dt.findAllMatches,minMatchCharLength:a=Dt.minMatchCharLength,isCaseSensitive:l=Dt.isCaseSensitive,ignoreLocation:c=Dt.ignoreLocation}={}){if(this.options={location:r,threshold:n,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:c},this.pattern=l?t:t.toLowerCase(),this.chunks=[],!this.pattern.length)return;let u=(p,g)=>{this.chunks.push({pattern:p,alphabet:xgt(p),startIndex:g})},f=this.pattern.length;if(f>fA){let p=0,g=f%fA,A=f-g;for(;p<A;)u(this.pattern.substr(p,fA),p),p+=fA;if(g){let y=f-fA;u(this.pattern.substr(y),y)}}else u(this.pattern,0)}searchIn(t){let{isCaseSensitive:r,includeMatches:n}=this.options;if(r||(t=t.toLowerCase()),this.pattern===t){let A={isMatch:!0,score:0};return n&&(A.indices=[[0,t.length-1]]),A}let{location:i,distance:s,threshold:o,findAllMatches:a,minMatchCharLength:l,ignoreLocation:c}=this.options,u=[],f=0,p=!1;this.chunks.forEach(({pattern:A,alphabet:y,startIndex:C})=>{let{isMatch:v,score:b,indices:w}=bgt(t,A,y,{location:i+C,distance:s,threshold:o,findAllMatches:a,minMatchCharLength:l,includeMatches:n,ignoreLocation:c});v&&(p=!0),f+=b,v&&w&&(u=[...u,...w])});let g={isMatch:p,score:p?f/this.chunks.length:1};return p&&n&&(g.indices=u),g}},Nu=class{constructor(t){this.pattern=t}static isMultiMatch(t){return uCe(t,this.multiRegex)}static isSingleMatch(t){return uCe(t,this.singleRegex)}search(){}};function uCe(e,t){let r=e.match(t);return r?r[1]:null}var pG=class extends Nu{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){let r=t===this.pattern;return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}},AG=class extends Nu{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){let n=t.indexOf(this.pattern)===-1;return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}},mG=class extends Nu{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){let r=t.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}},yG=class extends Nu{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){let r=!t.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}},CG=class extends Nu{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){let r=t.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[t.length-this.pattern.length,t.length-1]}}},vG=class extends Nu{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){let r=!t.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}},eF=class extends Nu{constructor(t,{location:r=Dt.location,threshold:n=Dt.threshold,distance:i=Dt.distance,includeMatches:s=Dt.includeMatches,findAllMatches:o=Dt.findAllMatches,minMatchCharLength:a=Dt.minMatchCharLength,isCaseSensitive:l=Dt.isCaseSensitive,ignoreLocation:c=Dt.ignoreLocation}={}){super(t),this._bitapSearch=new Xk(t,{location:r,threshold:n,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:c})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}},tF=class extends Nu{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let r=0,n,i=[],s=this.pattern.length;for(;(n=t.indexOf(this.pattern,r))>-1;)r=n+s,i.push([n,r-1]);let o=!!i.length;return{isMatch:o,score:o?0:1,indices:i}}},EG=[pG,tF,mG,yG,vG,CG,AG,eF],dCe=EG.length,_gt=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,wgt="|";function Igt(e,t={}){return e.split(wgt).map(r=>{let n=r.trim().split(_gt).filter(s=>s&&!!s.trim()),i=[];for(let s=0,o=n.length;s<o;s+=1){let a=n[s],l=!1,c=-1;for(;!l&&++c<dCe;){let u=EG[c],f=u.isMultiMatch(a);f&&(i.push(new u(f,t)),l=!0)}if(!l)for(c=-1;++c<dCe;){let u=EG[c],f=u.isSingleMatch(a);if(f){i.push(new u(f,t));break}}}return i})}var Sgt=new Set([eF.type,tF.type]),bG=class{constructor(t,{isCaseSensitive:r=Dt.isCaseSensitive,includeMatches:n=Dt.includeMatches,minMatchCharLength:i=Dt.minMatchCharLength,ignoreLocation:s=Dt.ignoreLocation,findAllMatches:o=Dt.findAllMatches,location:a=Dt.location,threshold:l=Dt.threshold,distance:c=Dt.distance}={}){this.query=null,this.options={isCaseSensitive:r,includeMatches:n,minMatchCharLength:i,findAllMatches:o,ignoreLocation:s,location:a,threshold:l,distance:c},this.pattern=r?t:t.toLowerCase(),this.query=Igt(this.pattern,this.options)}static condition(t,r){return r.useExtendedSearch}searchIn(t){let r=this.query;if(!r)return{isMatch:!1,score:1};let{includeMatches:n,isCaseSensitive:i}=this.options;t=i?t:t.toLowerCase();let s=0,o=[],a=0;for(let l=0,c=r.length;l<c;l+=1){let u=r[l];o.length=0,s=0;for(let f=0,p=u.length;f<p;f+=1){let g=u[f],{isMatch:A,indices:y,score:C}=g.search(t);if(A){if(s+=1,a+=C,n){let v=g.constructor.type;Sgt.has(v)?o=[...o,...y]:o.push(y)}}else{a=0,s=0,o.length=0;break}}if(s){let f={isMatch:!0,score:a/s};return n&&(f.indices=o),f}}return{isMatch:!1,score:1}}},xG=[];function Bgt(...e){xG.push(...e)}function _G(e,t){for(let r=0,n=xG.length;r<n;r+=1){let i=xG[r];if(i.condition(e,t))return new i(e,t)}return new Xk(e,t)}var rF={AND:"$and",OR:"$or"},wG={PATH:"$path",PATTERN:"$val"},IG=e=>!!(e[rF.AND]||e[rF.OR]),Dgt=e=>!!e[wG.PATH],Tgt=e=>!of(e)&&gCe(e)&&!IG(e),fCe=e=>({[rF.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function yCe(e,t,{auto:r=!0}={}){let n=i=>{let s=Object.keys(i),o=Dgt(i);if(!o&&s.length>1&&!IG(i))return n(fCe(i));if(Tgt(i)){let l=o?i[wG.PATH]:s[0],c=o?i[wG.PATTERN]:i[l];if(!Qu(c))throw new Error(cgt(l));let u={keyId:gG(l),pattern:c};return r&&(u.searcher=_G(c,t)),u}let a={children:[],operator:s[0]};return s.forEach(l=>{let c=i[l];of(c)&&c.forEach(u=>{a.children.push(n(u))})}),a};return IG(e)||(e=fCe(e)),n(e)}function Rgt(e,{ignoreFieldNorm:t=Dt.ignoreFieldNorm}){e.forEach(r=>{let n=1;r.matches.forEach(({key:i,norm:s,score:o})=>{let a=i?i.weight:null;n*=Math.pow(o===0&&a?Number.EPSILON:o,(a||1)*(t?1:s))}),r.score=n})}function kgt(e,t){let r=e.matches;t.matches=[],Na(r)&&r.forEach(n=>{if(!Na(n.indices)||!n.indices.length)return;let{indices:i,value:s}=n,o={indices:i,value:s};n.key&&(o.key=n.key.src),n.idx>-1&&(o.refIndex=n.idx),t.matches.push(o)})}function Fgt(e,t){t.score=e.score}function Mgt(e,t,{includeMatches:r=Dt.includeMatches,includeScore:n=Dt.includeScore}={}){let i=[];return r&&i.push(kgt),n&&i.push(Fgt),e.map(s=>{let{idx:o}=s,a={item:t[o],refIndex:o};return i.length&&i.forEach(l=>{l(s,a)}),a})}var bo=class{constructor(t,r={},n){this.options={...Dt,...r},this.options.useExtendedSearch,this._keyStore=new hG(this.options.keys),this.setCollection(t,n)}setCollection(t,r){if(this._docs=t,r&&!(r instanceof Xx))throw new Error(lgt);this._myIndex=r||mCe(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){Na(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){let r=[];for(let n=0,i=this._docs.length;n<i;n+=1){let s=this._docs[n];t(s,n)&&(this.removeAt(n),n-=1,i-=1,r.push(s))}return r}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:r=-1}={}){let{includeMatches:n,includeScore:i,shouldSort:s,sortFn:o,ignoreFieldNorm:a}=this.options,l=Qu(t)?Qu(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return Rgt(l,{ignoreFieldNorm:a}),s&&l.sort(o),hCe(r)&&r>-1&&(l=l.slice(0,r)),Mgt(l,this._docs,{includeMatches:n,includeScore:i})}_searchStringList(t){let r=_G(t,this.options),{records:n}=this._myIndex,i=[];return n.forEach(({v:s,i:o,n:a})=>{if(!Na(s))return;let{isMatch:l,score:c,indices:u}=r.searchIn(s);l&&i.push({item:s,idx:o,matches:[{score:c,value:s,norm:a,indices:u}]})}),i}_searchLogical(t){let r=yCe(t,this.options),n=(a,l,c)=>{if(!a.children){let{keyId:f,searcher:p}=a,g=this._findMatches({key:this._keyStore.get(f),value:this._myIndex.getValueForItemAtKeyId(l,f),searcher:p});return g&&g.length?[{idx:c,item:l,matches:g}]:[]}let u=[];for(let f=0,p=a.children.length;f<p;f+=1){let g=a.children[f],A=n(g,l,c);if(A.length)u.push(...A);else if(a.operator===rF.AND)return[]}return u},i=this._myIndex.records,s={},o=[];return i.forEach(({$:a,i:l})=>{if(Na(a)){let c=n(r,a,l);c.length&&(s[l]||(s[l]={idx:l,item:a,matches:[]},o.push(s[l])),c.forEach(({matches:u})=>{s[l].matches.push(...u)}))}}),o}_searchObjectList(t){let r=_G(t,this.options),{keys:n,records:i}=this._myIndex,s=[];return i.forEach(({$:o,i:a})=>{if(!Na(o))return;let l=[];n.forEach((c,u)=>{l.push(...this._findMatches({key:c,value:o[u],searcher:r}))}),l.length&&s.push({idx:a,item:o,matches:l})}),s}_findMatches({key:t,value:r,searcher:n}){if(!Na(r))return[];let i=[];if(of(r))r.forEach(({v:s,i:o,n:a})=>{if(!Na(s))return;let{isMatch:l,score:c,indices:u}=n.searchIn(s);l&&i.push({score:c,key:t,value:s,idx:o,norm:a,indices:u})});else{let{v:s,n:o}=r,{isMatch:a,score:l,indices:c}=n.searchIn(s);a&&i.push({score:l,key:t,value:s,norm:o,indices:c})}return i}};bo.version="7.0.0";bo.createIndex=mCe;bo.parseIndex=vgt;bo.config=Dt;bo.parseQuery=yCe;Bgt(bG);var FCe=V(vs()),n_=V(require("path")),Pa=V(require("vscode"));function Fs(e){return e.rootPath+"/"+e.relPath}function nF(e){return Fs({rootPath:e.repoRoot,relPath:e.pathName})}var CCe=V(require("vscode"));function vCe(e,t){let r={type:"file-ranges-selected",data:[]};if(!e||!t)return r;let n=Qgt(e.document.uri,t),i=e.selections;return n&&i.some(s=>!s.isEmpty)&&(r.data=i.map(s=>({repoRoot:n.repoRoot,pathName:n.pathName,fullRange:{startLineNumber:s.start.line,startColumn:s.start.character,endLineNumber:s.end.line,endColumn:s.end.character},originalCode:e.document.getText(s)}))),r}function e_(e){return{startLineNumber:e.start.line,startColumn:e.start.character,endLineNumber:e.end.line,endColumn:e.end.character}}function t_(e){return new CCe.Range(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn)}function Qgt(e,t){let r=t.safeResolvePathName(e);if(r!==void 0)return Zh(r)}function Zh(e){return{repoRoot:e.rootPath,pathName:e.relPath}}var wCe=V(um());var Gy=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,bCe=new Set,SG=typeof process=="object"&&process?process:{},xCe=(e,t,r,n)=>{typeof SG.emitWarning=="function"?SG.emitWarning(e,t,r,n):console.error(`[${r}] ${t}: ${e}`)},iF=globalThis.AbortController,ECe=globalThis.AbortSignal;if(typeof iF>"u"){ECe=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(n,i){this._onabort.push(i)}},iF=class{constructor(){t()}signal=new ECe;abort(n){if(!this.signal.aborted){this.signal.reason=n,this.signal.aborted=!0;for(let i of this.signal._onabort)i(n);this.signal.onabort?.(n)}}};let e=SG.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",t=()=>{e&&(e=!1,xCe("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",t))}}var Ngt=e=>!bCe.has(e),IQt=Symbol("type"),Xh=e=>e&&e===Math.floor(e)&&e>0&&isFinite(e),_Ce=e=>Xh(e)?e<=Math.pow(2,8)?Uint8Array:e<=Math.pow(2,16)?Uint16Array:e<=Math.pow(2,32)?Uint32Array:e<=Number.MAX_SAFE_INTEGER?$y:null:null,$y=class extends Array{constructor(t){super(t),this.fill(0)}},BG=class e{heap;length;static#e=!1;static create(t){let r=_Ce(t);if(!r)return[];e.#e=!0;let n=new e(t,r);return e.#e=!1,n}constructor(t,r){if(!e.#e)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new r(t),this.length=0}push(t){this.heap[this.length++]=t}pop(){return this.heap[--this.length]}},Yy=class e{#e;#t;#i;#n;#r;#l;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#o;#u;#d;#a;#s;#p;#m;#g;#f;#v;#h;#E;#b;#y;#x;#B;#A;static unsafeExposeInternals(t){return{starts:t.#b,ttls:t.#y,sizes:t.#E,keyMap:t.#d,keyList:t.#a,valList:t.#s,next:t.#p,prev:t.#m,get head(){return t.#g},get tail(){return t.#f},free:t.#v,isBackgroundFetch:r=>t.#c(r),backgroundFetch:(r,n,i,s)=>t.#M(r,n,i,s),moveToTail:r=>t.#R(r),indexes:r=>t.#_(r),rindexes:r=>t.#w(r),isStale:r=>t.#C(r)}}get max(){return this.#e}get maxSize(){return this.#t}get calculatedSize(){return this.#u}get size(){return this.#o}get fetchMethod(){return this.#r}get memoMethod(){return this.#l}get dispose(){return this.#i}get disposeAfter(){return this.#n}constructor(t){let{max:r=0,ttl:n,ttlResolution:i=1,ttlAutopurge:s,updateAgeOnGet:o,updateAgeOnHas:a,allowStale:l,dispose:c,disposeAfter:u,noDisposeOnSet:f,noUpdateTTL:p,maxSize:g=0,maxEntrySize:A=0,sizeCalculation:y,fetchMethod:C,memoMethod:v,noDeleteOnFetchRejection:b,noDeleteOnStaleGet:w,allowStaleOnFetchRejection:B,allowStaleOnFetchAbort:F,ignoreFetchAbort:Q}=t;if(r!==0&&!Xh(r))throw new TypeError("max option must be a nonnegative integer");let W=r?_Ce(r):Array;if(!W)throw new Error("invalid max value: "+r);if(this.#e=r,this.#t=g,this.maxEntrySize=A||this.#t,this.sizeCalculation=y,this.sizeCalculation){if(!this.#t&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(v!==void 0&&typeof v!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#l=v,C!==void 0&&typeof C!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#r=C,this.#B=!!C,this.#d=new Map,this.#a=new Array(r).fill(void 0),this.#s=new Array(r).fill(void 0),this.#p=new W(r),this.#m=new W(r),this.#g=0,this.#f=0,this.#v=BG.create(r),this.#o=0,this.#u=0,typeof c=="function"&&(this.#i=c),typeof u=="function"?(this.#n=u,this.#h=[]):(this.#n=void 0,this.#h=void 0),this.#x=!!this.#i,this.#A=!!this.#n,this.noDisposeOnSet=!!f,this.noUpdateTTL=!!p,this.noDeleteOnFetchRejection=!!b,this.allowStaleOnFetchRejection=!!B,this.allowStaleOnFetchAbort=!!F,this.ignoreFetchAbort=!!Q,this.maxEntrySize!==0){if(this.#t!==0&&!Xh(this.#t))throw new TypeError("maxSize must be a positive integer if specified");if(!Xh(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#q()}if(this.allowStale=!!l,this.noDeleteOnStaleGet=!!w,this.updateAgeOnGet=!!o,this.updateAgeOnHas=!!a,this.ttlResolution=Xh(i)||i===0?i:1,this.ttlAutopurge=!!s,this.ttl=n||0,this.ttl){if(!Xh(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#Q()}if(this.#e===0&&this.ttl===0&&this.#t===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#e&&!this.#t){let Z="LRU_CACHE_UNBOUNDED";Ngt(Z)&&(bCe.add(Z),xCe("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",Z,e))}}getRemainingTTL(t){return this.#d.has(t)?1/0:0}#Q(){let t=new $y(this.#e),r=new $y(this.#e);this.#y=t,this.#b=r,this.#N=(s,o,a=Gy.now())=>{if(r[s]=o!==0?a:0,t[s]=o,o!==0&&this.ttlAutopurge){let l=setTimeout(()=>{this.#C(s)&&this.#I(this.#a[s],"expire")},o+1);l.unref&&l.unref()}},this.#D=s=>{r[s]=t[s]!==0?Gy.now():0},this.#S=(s,o)=>{if(t[o]){let a=t[o],l=r[o];if(!a||!l)return;s.ttl=a,s.start=l,s.now=n||i();let c=s.now-l;s.remainingTTL=a-c}};let n=0,i=()=>{let s=Gy.now();if(this.ttlResolution>0){n=s;let o=setTimeout(()=>n=0,this.ttlResolution);o.unref&&o.unref()}return s};this.getRemainingTTL=s=>{let o=this.#d.get(s);if(o===void 0)return 0;let a=t[o],l=r[o];if(!a||!l)return 1/0;let c=(n||i())-l;return a-c},this.#C=s=>{let o=r[s],a=t[s];return!!a&&!!o&&(n||i())-o>a}}#D=()=>{};#S=()=>{};#N=()=>{};#C=()=>!1;#q(){let t=new $y(this.#e);this.#u=0,this.#E=t,this.#T=r=>{this.#u-=t[r],t[r]=0},this.#P=(r,n,i,s)=>{if(this.#c(n))return 0;if(!Xh(i))if(s){if(typeof s!="function")throw new TypeError("sizeCalculation must be a function");if(i=s(n,r),!Xh(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i},this.#k=(r,n,i)=>{if(t[r]=n,this.#t){let s=this.#t-t[r];for(;this.#u>s;)this.#F(!0)}this.#u+=t[r],i&&(i.entrySize=n,i.totalCalculatedSize=this.#u)}}#T=t=>{};#k=(t,r,n)=>{};#P=(t,r,n,i)=>{if(n||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#_({allowStale:t=this.allowStale}={}){if(this.#o)for(let r=this.#f;!(!this.#L(r)||((t||!this.#C(r))&&(yield r),r===this.#g));)r=this.#m[r]}*#w({allowStale:t=this.allowStale}={}){if(this.#o)for(let r=this.#g;!(!this.#L(r)||((t||!this.#C(r))&&(yield r),r===this.#f));)r=this.#p[r]}#L(t){return t!==void 0&&this.#d.get(this.#a[t])===t}*entries(){for(let t of this.#_())this.#s[t]!==void 0&&this.#a[t]!==void 0&&!this.#c(this.#s[t])&&(yield[this.#a[t],this.#s[t]])}*rentries(){for(let t of this.#w())this.#s[t]!==void 0&&this.#a[t]!==void 0&&!this.#c(this.#s[t])&&(yield[this.#a[t],this.#s[t]])}*keys(){for(let t of this.#_()){let r=this.#a[t];r!==void 0&&!this.#c(this.#s[t])&&(yield r)}}*rkeys(){for(let t of this.#w()){let r=this.#a[t];r!==void 0&&!this.#c(this.#s[t])&&(yield r)}}*values(){for(let t of this.#_())this.#s[t]!==void 0&&!this.#c(this.#s[t])&&(yield this.#s[t])}*rvalues(){for(let t of this.#w())this.#s[t]!==void 0&&!this.#c(this.#s[t])&&(yield this.#s[t])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(t,r={}){for(let n of this.#_()){let i=this.#s[n],s=this.#c(i)?i.__staleWhileFetching:i;if(s!==void 0&&t(s,this.#a[n],this))return this.get(this.#a[n],r)}}forEach(t,r=this){for(let n of this.#_()){let i=this.#s[n],s=this.#c(i)?i.__staleWhileFetching:i;s!==void 0&&t.call(r,s,this.#a[n],this)}}rforEach(t,r=this){for(let n of this.#w()){let i=this.#s[n],s=this.#c(i)?i.__staleWhileFetching:i;s!==void 0&&t.call(r,s,this.#a[n],this)}}purgeStale(){let t=!1;for(let r of this.#w({allowStale:!0}))this.#C(r)&&(this.#I(this.#a[r],"expire"),t=!0);return t}info(t){let r=this.#d.get(t);if(r===void 0)return;let n=this.#s[r],i=this.#c(n)?n.__staleWhileFetching:n;if(i===void 0)return;let s={value:i};if(this.#y&&this.#b){let o=this.#y[r],a=this.#b[r];if(o&&a){let l=o-(Gy.now()-a);s.ttl=l,s.start=Date.now()}}return this.#E&&(s.size=this.#E[r]),s}dump(){let t=[];for(let r of this.#_({allowStale:!0})){let n=this.#a[r],i=this.#s[r],s=this.#c(i)?i.__staleWhileFetching:i;if(s===void 0||n===void 0)continue;let o={value:s};if(this.#y&&this.#b){o.ttl=this.#y[r];let a=Gy.now()-this.#b[r];o.start=Math.floor(Date.now()-a)}this.#E&&(o.size=this.#E[r]),t.unshift([n,o])}return t}load(t){this.clear();for(let[r,n]of t){if(n.start){let i=Date.now()-n.start;n.start=Gy.now()-i}this.set(r,n.value,n)}}set(t,r,n={}){if(r===void 0)return this.delete(t),this;let{ttl:i=this.ttl,start:s,noDisposeOnSet:o=this.noDisposeOnSet,sizeCalculation:a=this.sizeCalculation,status:l}=n,{noUpdateTTL:c=this.noUpdateTTL}=n,u=this.#P(t,r,n.size||0,a);if(this.maxEntrySize&&u>this.maxEntrySize)return l&&(l.set="miss",l.maxEntrySizeExceeded=!0),this.#I(t,"set"),this;let f=this.#o===0?void 0:this.#d.get(t);if(f===void 0)f=this.#o===0?this.#f:this.#v.length!==0?this.#v.pop():this.#o===this.#e?this.#F(!1):this.#o,this.#a[f]=t,this.#s[f]=r,this.#d.set(t,f),this.#p[this.#f]=f,this.#m[f]=this.#f,this.#f=f,this.#o++,this.#k(f,u,l),l&&(l.set="add"),c=!1;else{this.#R(f);let p=this.#s[f];if(r!==p){if(this.#B&&this.#c(p)){p.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:g}=p;g!==void 0&&!o&&(this.#x&&this.#i?.(g,t,"set"),this.#A&&this.#h?.push([g,t,"set"]))}else o||(this.#x&&this.#i?.(p,t,"set"),this.#A&&this.#h?.push([p,t,"set"]));if(this.#T(f),this.#k(f,u,l),this.#s[f]=r,l){l.set="replace";let g=p&&this.#c(p)?p.__staleWhileFetching:p;g!==void 0&&(l.oldValue=g)}}else l&&(l.set="update")}if(i!==0&&!this.#y&&this.#Q(),this.#y&&(c||this.#N(f,i,s),l&&this.#S(l,f)),!o&&this.#A&&this.#h){let p=this.#h,g;for(;g=p?.shift();)this.#n?.(...g)}return this}pop(){try{for(;this.#o;){let t=this.#s[this.#g];if(this.#F(!0),this.#c(t)){if(t.__staleWhileFetching)return t.__staleWhileFetching}else if(t!==void 0)return t}}finally{if(this.#A&&this.#h){let t=this.#h,r;for(;r=t?.shift();)this.#n?.(...r)}}}#F(t){let r=this.#g,n=this.#a[r],i=this.#s[r];return this.#B&&this.#c(i)?i.__abortController.abort(new Error("evicted")):(this.#x||this.#A)&&(this.#x&&this.#i?.(i,n,"evict"),this.#A&&this.#h?.push([i,n,"evict"])),this.#T(r),t&&(this.#a[r]=void 0,this.#s[r]=void 0,this.#v.push(r)),this.#o===1?(this.#g=this.#f=0,this.#v.length=0):this.#g=this.#p[r],this.#d.delete(n),this.#o--,r}has(t,r={}){let{updateAgeOnHas:n=this.updateAgeOnHas,status:i}=r,s=this.#d.get(t);if(s!==void 0){let o=this.#s[s];if(this.#c(o)&&o.__staleWhileFetching===void 0)return!1;if(this.#C(s))i&&(i.has="stale",this.#S(i,s));else return n&&this.#D(s),i&&(i.has="hit",this.#S(i,s)),!0}else i&&(i.has="miss");return!1}peek(t,r={}){let{allowStale:n=this.allowStale}=r,i=this.#d.get(t);if(i===void 0||!n&&this.#C(i))return;let s=this.#s[i];return this.#c(s)?s.__staleWhileFetching:s}#M(t,r,n,i){let s=r===void 0?void 0:this.#s[r];if(this.#c(s))return s;let o=new iF,{signal:a}=n;a?.addEventListener("abort",()=>o.abort(a.reason),{signal:o.signal});let l={signal:o.signal,options:n,context:i},c=(y,C=!1)=>{let{aborted:v}=o.signal,b=n.ignoreFetchAbort&&y!==void 0;if(n.status&&(v&&!C?(n.status.fetchAborted=!0,n.status.fetchError=o.signal.reason,b&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),v&&!b&&!C)return f(o.signal.reason);let w=g;return this.#s[r]===g&&(y===void 0?w.__staleWhileFetching?this.#s[r]=w.__staleWhileFetching:this.#I(t,"fetch"):(n.status&&(n.status.fetchUpdated=!0),this.set(t,y,l.options))),y},u=y=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=y),f(y)),f=y=>{let{aborted:C}=o.signal,v=C&&n.allowStaleOnFetchAbort,b=v||n.allowStaleOnFetchRejection,w=b||n.noDeleteOnFetchRejection,B=g;if(this.#s[r]===g&&(!w||B.__staleWhileFetching===void 0?this.#I(t,"fetch"):v||(this.#s[r]=B.__staleWhileFetching)),b)return n.status&&B.__staleWhileFetching!==void 0&&(n.status.returnedStale=!0),B.__staleWhileFetching;if(B.__returned===B)throw y},p=(y,C)=>{let v=this.#r?.(t,s,l);v&&v instanceof Promise&&v.then(b=>y(b===void 0?void 0:b),C),o.signal.addEventListener("abort",()=>{(!n.ignoreFetchAbort||n.allowStaleOnFetchAbort)&&(y(void 0),n.allowStaleOnFetchAbort&&(y=b=>c(b,!0)))})};n.status&&(n.status.fetchDispatched=!0);let g=new Promise(p).then(c,u),A=Object.assign(g,{__abortController:o,__staleWhileFetching:s,__returned:void 0});return r===void 0?(this.set(t,A,{...l.options,status:void 0}),r=this.#d.get(t)):this.#s[r]=A,A}#c(t){if(!this.#B)return!1;let r=t;return!!r&&r instanceof Promise&&r.hasOwnProperty("__staleWhileFetching")&&r.__abortController instanceof iF}async fetch(t,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:l=0,sizeCalculation:c=this.sizeCalculation,noUpdateTTL:u=this.noUpdateTTL,noDeleteOnFetchRejection:f=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:p=this.allowStaleOnFetchRejection,ignoreFetchAbort:g=this.ignoreFetchAbort,allowStaleOnFetchAbort:A=this.allowStaleOnFetchAbort,context:y,forceRefresh:C=!1,status:v,signal:b}=r;if(!this.#B)return v&&(v.fetch="get"),this.get(t,{allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:s,status:v});let w={allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:s,ttl:o,noDisposeOnSet:a,size:l,sizeCalculation:c,noUpdateTTL:u,noDeleteOnFetchRejection:f,allowStaleOnFetchRejection:p,allowStaleOnFetchAbort:A,ignoreFetchAbort:g,status:v,signal:b},B=this.#d.get(t);if(B===void 0){v&&(v.fetch="miss");let F=this.#M(t,B,w,y);return F.__returned=F}else{let F=this.#s[B];if(this.#c(F)){let ee=n&&F.__staleWhileFetching!==void 0;return v&&(v.fetch="inflight",ee&&(v.returnedStale=!0)),ee?F.__staleWhileFetching:F.__returned=F}let Q=this.#C(B);if(!C&&!Q)return v&&(v.fetch="hit"),this.#R(B),i&&this.#D(B),v&&this.#S(v,B),F;let W=this.#M(t,B,w,y),$=W.__staleWhileFetching!==void 0&&n;return v&&(v.fetch=Q?"stale":"refresh",$&&Q&&(v.returnedStale=!0)),$?W.__staleWhileFetching:W.__returned=W}}async forceFetch(t,r={}){let n=await this.fetch(t,r);if(n===void 0)throw new Error("fetch() returned undefined");return n}memo(t,r={}){let n=this.#l;if(!n)throw new Error("no memoMethod provided to constructor");let{context:i,forceRefresh:s,...o}=r,a=this.get(t,o);if(!s&&a!==void 0)return a;let l=n(t,a,{options:o,context:i});return this.set(t,l,o),l}get(t,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,status:o}=r,a=this.#d.get(t);if(a!==void 0){let l=this.#s[a],c=this.#c(l);return o&&this.#S(o,a),this.#C(a)?(o&&(o.get="stale"),c?(o&&n&&l.__staleWhileFetching!==void 0&&(o.returnedStale=!0),n?l.__staleWhileFetching:void 0):(s||this.#I(t,"expire"),o&&n&&(o.returnedStale=!0),n?l:void 0)):(o&&(o.get="hit"),c?l.__staleWhileFetching:(this.#R(a),i&&this.#D(a),l))}else o&&(o.get="miss")}#U(t,r){this.#m[r]=t,this.#p[t]=r}#R(t){t!==this.#f&&(t===this.#g?this.#g=this.#p[t]:this.#U(this.#m[t],this.#p[t]),this.#U(this.#f,t),this.#f=t)}delete(t){return this.#I(t,"delete")}#I(t,r){let n=!1;if(this.#o!==0){let i=this.#d.get(t);if(i!==void 0)if(n=!0,this.#o===1)this.#O(r);else{this.#T(i);let s=this.#s[i];if(this.#c(s)?s.__abortController.abort(new Error("deleted")):(this.#x||this.#A)&&(this.#x&&this.#i?.(s,t,r),this.#A&&this.#h?.push([s,t,r])),this.#d.delete(t),this.#a[i]=void 0,this.#s[i]=void 0,i===this.#f)this.#f=this.#m[i];else if(i===this.#g)this.#g=this.#p[i];else{let o=this.#m[i];this.#p[o]=this.#p[i];let a=this.#p[i];this.#m[a]=this.#m[i]}this.#o--,this.#v.push(i)}}if(this.#A&&this.#h?.length){let i=this.#h,s;for(;s=i?.shift();)this.#n?.(...s)}return n}clear(){return this.#O("delete")}#O(t){for(let r of this.#w({allowStale:!0})){let n=this.#s[r];if(this.#c(n))n.__abortController.abort(new Error("deleted"));else{let i=this.#a[r];this.#x&&this.#i?.(n,i,t),this.#A&&this.#h?.push([n,i,t])}}if(this.#d.clear(),this.#s.fill(void 0),this.#a.fill(void 0),this.#y&&this.#b&&(this.#y.fill(0),this.#b.fill(0)),this.#E&&this.#E.fill(0),this.#g=0,this.#f=0,this.#v.length=0,this.#u=0,this.#o=0,this.#A&&this.#h){let r=this.#h,n;for(;n=r?.shift();)this.#n?.(...n)}}};var ICe=V(require("vscode"));var eg=class extends X{constructor(r,n,i){super();this._globalState=r;this._cacheBackKey=n;this._options=i;this._cache=new Yy({max:1e3,...this._options?.lru}),this.loadContext(),this.addDisposable(new ICe.Disposable(()=>this.dumpContext.cancel()))}_cache;dumpContext=(0,wCe.default)(async()=>{let r=this._cache.dump();await this._globalState.save(this._cacheBackKey,r,{uniquePerWorkspace:!0}),this._globalState.update(this._cacheBackKey,void 0)},60*1e3,{leading:!0,trailing:!0});loadContext=async()=>{let r=await this._globalState.load(this._cacheBackKey,{uniquePerWorkspace:!0});if(r){this._cache.load(r);return}let n=this._globalState.get(this._cacheBackKey);n&&this._cache.load(n)};set=async(r,n)=>{this._cache.set(r,n),await this.dumpContext()};get=r=>(this.dumpContext(),this._cache.get(r));get cache(){return this._cache}remove=r=>{this._cache.delete(r)};clear=()=>{this._cache.clear()};getItems=()=>[...this._cache.values()]};var SCe=V(um()),BCe=V(require("vscode"));var r_=class extends X{constructor(r,n,i){super();this._globalState=r;this._indexBackKey=n;this._opts=i;this._maxKeysBeforeRemoval=i.maxKeysBeforeRemoval??this._maxKeysBeforeRemoval,this._flushDelay=i.maxDelayBeforeRemovalMs??this._flushDelay,this._index=new bo(Object.values(this._items),{...this._opts.fuse}),this._revalidationQueue=new Zo(this._revalidateEntry.bind(this)),this.addDisposables(this._revalidationQueue,new BCe.Disposable(()=>this.dumpContext.cancel())),this.loadContext()}_index;_items={};_revalidationQueue;_keysToRemove=new Set;_maxKeysBeforeRemoval=100;_flushTimer=null;_flushDelay=15e3;dumpContext=(0,SCe.default)(async()=>{await this._globalState.save(this._indexBackKey,this._items,{uniquePerWorkspace:!0}),this._globalState.update(this._indexBackKey,void 0)},60*1e3,{leading:!0,trailing:!0});loadContext=async()=>{let r=await this._globalState.load(this._indexBackKey,{uniquePerWorkspace:!0});if(r){this._items={...this._items,...r},this._index=new bo(Object.values(this._items),this._opts.fuse),this.markForRevalidation(Object.values(this._items));return}let n=this._globalState.get(this._indexBackKey);n&&(this._items={...this._items,...n},this._index=new bo(Object.values(this._items),this._opts.fuse),this.markForRevalidation(Object.values(this._items)))};set=r=>{let n=this._opts.keyFn(r);return this._cancelQueuedWork(n),this._items[n]?!1:(this._items[n]=r,this._index.add(r),this.dumpContext(),!0)};markForRevalidation=r=>{r.forEach(n=>{let i=this._opts.keyFn(n);this._revalidationQueue.insert(i,n)}),this._revalidationQueue.kick()};search=(r,n)=>this._index.search(r,n);remove=r=>{this._queueKeyRemoval(this._opts.keyFn(r))};clear=()=>{this._items={},this._index.setCollection([])};get items(){return{...this._items}}_cancelQueuedWork=r=>{this._revalidationQueue.cancel(r),this._keysToRemove.delete(r)};_checkValidity=async r=>this._opts.validator?await this._opts.validator(r):!0;async _revalidateEntry(r){if(r===void 0)return;let[n,i]=r;await this._checkValidity(i)||this._queueKeyRemoval(n)}_queueKeyRemoval=r=>{this._keysToRemove.add(r),this._keysToRemove.size>=this._maxKeysBeforeRemoval?this._flushToRemove():this._flushTimer||(this._flushTimer=setTimeout(()=>this._flushToRemove(),this._flushDelay))};_flushToRemove=()=>{this._flushTimer&&(clearTimeout(this._flushTimer),this._flushTimer=null);for(let r of this._keysToRemove)delete this._items[r];this._index.remove(r=>this._keysToRemove.has(this._opts.keyFn(r))),this._keysToRemove.clear()}};var Pu={keys:["relPath"],minMatchCharLength:1,minExactMatchCharLength:3,threshold:.25,ignoreLocation:!0,includeScore:!0,useExtendedSearch:!0,shouldSort:!0,findAllMatches:!0,sortFn:Lgt},sF=class extends X{constructor(r,n,i){super();this._globalState=r;this._workspaceManager=n;this._onDidChangeSyncingStatus=i;this._filesIndex=new r_(this._globalState,"fuzzyFsFilesIndex",{fuse:Pu,validator:this.validatePath,keyFn:TCe}),this._foldersIndex=new r_(this._globalState,"fuzzyFsFoldersIndex",{fuse:Pu,validator:this.validatePath,keyFn:TCe}),this._recentFiles=new eg(this._globalState,"recentlyOpenedFiles",{lru:{max:64}}),this.addDisposables(...this.trackFilesAndFolders(),this._recentFiles,Pa.window.onDidChangeActiveTextEditor(this.trackRecentTextEditor),Pa.window.onDidChangeVisibleTextEditors(this.onDidChangeVisibleTextEditors),Pa.window.tabGroups.onDidChangeTabs(s=>{s.changed.forEach(this.trackRecentTab),s.opened.forEach(this.trackRecentTab)}))}_foldersIndex;_filesIndex;_recentFiles;dispose=()=>{super.dispose(),this._filesIndex.clear(),this._foldersIndex.clear()};get files(){return Object.values(this._filesIndex.items)}get folders(){return Object.values(this._foldersIndex.items)}setFiles=r=>{let n=this._filesIndex.items;r.forEach(a=>this._filesIndex.set(a));let i=this._filesIndex.items,o=Object.keys(n).filter(a=>!i[a]).map(a=>n[a]);this._filesIndex.markForRevalidation(o)};setFolders=r=>{let n=this._foldersIndex.items;r.forEach(a=>this._foldersIndex.set(a));let i=this._foldersIndex.items,o=Object.keys(n).filter(a=>!i[a]).map(a=>n[a]);this._foldersIndex.markForRevalidation(o)};trackRecentAbsPath=r=>{let n=this._workspaceManager.resolvePathName(r);n===void 0||this._workspaceManager.getBlobName(n)===void 0||this._recentFiles.set(r,n)};trackRecentTab=r=>{if(r.input instanceof Pa.TabInputText){let n=r.input.uri.fsPath;this.trackRecentAbsPath(n)}else return};trackRecentTextEditor=r=>{r!==void 0&&this.trackRecentAbsPath(r.document.uri.fsPath)};onDidChangeVisibleTextEditors=()=>{let r=Pa.window.visibleTextEditors;for(let n of r)this.trackRecentTextEditor(n)};trackFilesAndFolders=()=>{let r=(0,FCe.throttle)(()=>{let{files:i,folders:s}=Pgt(this._workspaceManager);this.setFiles(i),this.setFolders(s)},15e3,{leading:!0,trailing:!0}),n=i=>{if(!i?.relPath)return;this._workspaceManager.getAllQualifiedPathNames(i.relPath).forEach(o=>{this._filesIndex.set(o)})};return[new Pa.Disposable(()=>r.cancel()),this._workspaceManager.onDidChangeFile(r),this._workspaceManager.onDidChangeFile(n),this._onDidChangeSyncingStatus(r)]};findRecentFiles=r=>{let n=r.data.relPath,i=r.data.maxResults||12,s=this._recentFiles.getItems().map(a=>({repoRoot:a.rootPath,pathName:a.relPath}));if(n.length<Pu.minMatchCharLength)return{type:"find-recently-opened-files-response",data:s.slice(0,i)};let o=DCe(s,n,{fuseSearch:{limit:i},fuseInit:Pu});return{type:"find-recently-opened-files-response",data:o}};findInScope=r=>{let n=r.data.relPath,i=r.data.maxResults||12;return r.data.searchScope?.files?DCe(r.data.searchScope.files,n,{fuseSearch:{limit:i},fuseInit:Pu}):[]};findFiles=r=>{let n=r.data.exactMatch??!1,i=r.data.relPath,s=n?`${i}$`:i,o=r.data.maxResults||12;if(n&&(i.length<Pu.minExactMatchCharLength||i.length<Pu.minMatchCharLength))return{type:"find-file-response",data:[]};if(i.length<Pu.minMatchCharLength){let u=Object.values(this._filesIndex.items).slice(0,100);return{type:"find-file-response",data:u.map(Zh)}}let a={type:"find-file-response",data:[]},l=this.findInScope(r);return a.data=DG([...a.data,...l]),n&&(a.data=RCe(a.data,i)),a.data.length>=o||(a.data=DG([...a.data,...this._filesIndex.search(s,{limit:o-a.data.length}).map(c=>({repoRoot:c.item.rootPath,pathName:c.item.relPath}))]),n&&(a.data=RCe(a.data,i))),a};findFolders=r=>{let n=r.data.exactMatch??!1,i=r.data.relPath,s=n?`${i}$`:i,o=r.data.maxResults||12;if(i.length<Pu.minMatchCharLength){let u=Object.values(this._foldersIndex.items).slice(0,100);return{type:"find-folder-response",data:u.map(Zh)}}let a={type:"find-folder-response",data:[]},l=this._foldersIndex.search(s,{limit:o}).map(c=>Zh(c.item));return a.data=DG([...a.data,...l]),a};validatePath=async r=>this.statPath(r).then(n=>n!==void 0);statPath=async r=>{if(await this._workspaceManager.awaitInitialFoldersEnumerated(),!!this._workspaceManager.getFolderRoot(Fs(r)))try{return await Py(Fs(r))}catch{return}}};function Pgt(e){let t=o=>e.getAllPathNames(o)[0],n=e.getContextWithBlobNames().blobNames.map(t).filter(o=>o!==void 0),i=new Map(n.map(o=>{let a={rootPath:o.rootPath,relPath:Qa(o.relPath)};return[Fs(a),a]})),s=Array.from(i.values());return{files:n,folders:s}}async function MCe(e,t){let r=await Co(Pa.Uri.file(Fs(e))),n=new Pa.Range(r.positionAt(t.charStart),r.positionAt(t.charEnd));return{repoRoot:e.rootPath,pathName:e.relPath,fullRange:{startLineNumber:n.start.line,startColumn:n.start.character,endLineNumber:n.end.line,endColumn:n.end.character}}}function DCe(e,t,r){return new bo(e,{...Pu,...r.fuseInit,keys:["relPath"]}).search(t,r.fuseSearch).map(s=>s.item)}function DG(e){let t=new Map;return e.forEach(r=>{let n=Fs({rootPath:r.repoRoot,relPath:r.pathName});t.set(n,r)}),Array.from(t.values())}function TCe(e){return Fs(e)}function Lgt(e,t){if(e.score!==t.score)return e.score-t.score;let r=e.matches?.[0].value,n=t.matches?.[0].value;return r&&n?r.length===n.length?r.localeCompare(n):r.length-n.length:e.score-t.score}function Ugt(e,t){let r=n_.normalize(e),n=n_.normalize(t);if(n.length>r.length)return!1;if(r.endsWith(n)){let i=r.length-n.length;return i===0||r[i-1]===n_.sep}return!1}function RCe(e,t){return e.filter(r=>Ugt(r.pathName,t))}var QCe=8e5,i_=class{_selectedCodeReferenceRequestId=void 0;_selectedCodeReferenceRequestIdOptionB=void 0;_selectedCode=void 0;_filePath=void 0;_maybeUpdateSelectedCodeReferenceRequestId(t,r,n){let i=n?this._selectedCodeReferenceRequestIdOptionB:this._selectedCodeReferenceRequestId;return i===void 0&&r&&(n?this._selectedCodeReferenceRequestIdOptionB=t.requestId:this._selectedCodeReferenceRequestId=t.requestId,i=Ky._newRequestReferenceId),i}},Ky=class e extends X{constructor(r,n,i,s,o,a,l){super();this._globalState=r;this._apiServer=n;this._workspaceManager=i;this._recentChats=s;this._fuzzySymbolSearcher=o;this._assetManager=a;this._featureFlagManager=l;this.selectionCache=new eg(this._globalState,"requestIdSelectionMetadata",{lru:{max:1e3}}),this.addDisposables(NCe.window.onDidChangeTextEditorSelection(()=>{this._selectedCodeReferenceRequestId=void 0}),{dispose:()=>this._chatStreams.clear()},this.selectionCache)}_chatStreams=new Map;static _newRequestReferenceId="new";_selectedCodeReferenceRequestId;_preferenceState=new i_;selectionCache;getDiagnostics=r=>({type:"get-diagnostics-response",data:h0e()});_maybeUpdateSelectedCodeReferenceRequestId(r,n){let i=this._selectedCodeReferenceRequestId;return i===void 0&&n&&(this._selectedCodeReferenceRequestId=r.requestId,i=e._newRequestReferenceId,this.selectionCache.set(r.requestId,n)),i}async _getVCSChange(){return this._workspaceManager!==void 0?await this._workspaceManager.getVCSChange():{commits:[],workingDirectory:[]}}async chat(r,n,i){this._recentChats.addItem(r),j("ChatModel").debug(`Sending chat request with ID: ${r.requestId}`);let o;i===void 0?o=this._maybeUpdateSelectedCodeReferenceRequestId(r,n):(o=this._preferenceState._maybeUpdateSelectedCodeReferenceRequestId(r,n,i.useOptionB),n?.selectedCode&&(this._preferenceState._selectedCode=n.selectedCode,this._preferenceState._filePath=n.path),r.selectedCode&&(this._preferenceState._selectedCode=r.selectedCode,this._preferenceState._filePath=r.pathName));let a=await this._getVCSChange(),l=this._getRecentChanges(),c=await this._apiServer.chat(r.requestId,r.message,r.chatHistory,r.blobs,r.userGuidedBlobs,r.externalSourceIds,r.modelId,a,l,o,n?.selectedCode||r.selectedCode,n?.prefix||r.prefix,n?.suffix||r.suffix,n?.path||r.pathName,n?.language||r.language,void 0,void 0,r.userGuidelines,r.workspaceGuidelines,r.toolDefinitions,r.nodes,r.mode,r.agentMemories,r.personaType);return c.workspaceFileChunks=TG(c.workspaceFileChunks||[]),c}getReferenceReqId(){return this._selectedCodeReferenceRequestId}cancelChatStream=r=>{this._chatStreams.get(r)?.cancel()};async*getChatStream(r){let n=this._chatStreams.get(r.data.requestId);if(n)yield*n.copy();else throw new Error(`Chat stream with ID ${r.data.requestId} not found`)}deleteChatStream=r=>{this._chatStreams.get(r)?.cancel(),this._chatStreams.delete(r)};async*chatStream(r,n,i){this._recentChats.addItem(r),yield*this._chatStreams.get(r.requestId)?.copy()??this.startChatStream(r,n,i)}_getRecentChanges(){let r=this._workspaceManager.getContext();return Wy(r.recentChunks)}resolveWorkspaceFileChunk=async r=>{let n=r.data,i=this._workspaceManager.getAllPathNames(n.blobName)[0];if(!i)throw new Error(`File chunk with blobName=${n.blobName} not found`);return{type:"resolve-workspace-file-chunk-response",data:await MCe(i,n)}};async*startChatStream(r,n,i){let s=r.requestId,o=this._chatStreams.get(s);if(o)throw new Error(`Chat stream with ID ${s} already exists`);{j("ChatModel").debug(`Sending chat stream request with ID: ${r.requestId}`);let l;i===void 0?l=this._maybeUpdateSelectedCodeReferenceRequestId(r,n):(l=this._preferenceState._maybeUpdateSelectedCodeReferenceRequestId(r,n,i.useOptionB),n?.selectedCode&&(this._preferenceState._selectedCode=n.selectedCode,this._preferenceState._filePath=n.path),r.selectedCode&&(this._preferenceState._selectedCode=r.selectedCode,this._preferenceState._filePath=r.pathName));let c=await this._getVCSChange(),u=this._getRecentChanges(),f=n?.path||r.pathName,p=f?this._workspaceManager.getAllQualifiedPathNames(f)[0]:void 0,g=n?.prefix||r.prefix,A=n?.suffix||r.suffix,y=n?.language||r.language,C=n?.selectedCode||r.selectedCode,v=await this.hydrateChatHistory(r.chatHistory),b=this.limitChatHistory(v),w=r.nodes?await this.hydrateRequestNodes(r.nodes):[],B=p?this._workspaceManager.getFolderRoot(p?.absPath):this._workspaceManager.getMostRecentlyChangedFolderRoot(),F=B?this._workspaceManager.getRepoRootForFolderRoot(B):void 0,Q=Fl(F??"",B??"");Q!==""&&Q!=="."&&(r=Vgt(r,Q));let W=await this._apiServer.chatStream(r.requestId,r.message,b,r.blobs,r.userGuidedBlobs,r.externalSourceIds,r.modelId,c,u,l,C,g,A,f,y,i&&i.useOptionB?this._apiServer.sessionId+"-B":void 0,i?.disableAutoExternalSources,r.userGuidelines,r.workspaceGuidelines,r.toolDefinitions,w,r.mode,r.agentMemories,r.personaType),Z;n?.path&&p?Z={charStart:g?.length??0,charEnd:(g?.length??0)+(C?.length??0),blobName:this._workspaceManager.getBlobName(p)??""}:Z=void 0,o=new cA(Ogt(s,Z,W,async $=>{try{let ee=await this.resolveWorkspaceFileChunk({type:"resolve-workspace-file-chunk",data:$});return this._fuzzySymbolSearcher.warmupCache($.blobName),{...$,file:ee.data}}catch{return $}})),this._chatStreams.set(s,o),yield*o.copy()}}sendFeedback=async r=>(await this._apiServer.chatFeedback(r.data),{type:"chat-rating-done",data:r.data});saveConversation=async r=>{let n=j("ChatModel"),i=await this._apiServer.saveChat(r.data.conversationId,r.data.chatHistory,r.data.title);return n.debug(`Saved chat with api server: ${i.url}`),{type:"save-chat-done",data:i}};hydrateRequestNodes=r=>{let n=j("ChatModel");return Promise.all(r.map(async i=>{if(i.type===al.IMAGE_ID){if(!i.image_id_node)return n.error("Invalid image_id_node: missing image_id_node"),i;let s=i.image_id_node.image_id,o=await this._assetManager.loadAsset(s??"");if(!o)return n.error(`Failed to load asset ${s}`),i;let a=Buffer.from(o).toString("base64").replace(/^data:.*?;base64,/,"");return{type:al.IMAGE,id:i.id,image_node:{image_data:a,format:HI.PNG}}}return i}))};hydrateChatHistory=async r=>Promise.all(r.map(async n=>(n.request_nodes&&(n.request_nodes=await this.hydrateRequestNodes(n.request_nodes)),n)));limitChatHistory=r=>wr(this._featureFlagManager.currentFlags.vscodeChatStablePrefixTruncationMinVersion)?this.limitChatHistoryTruncate(r):this.limitChatHistoryWindow(r);limitChatHistoryWindow=r=>{let n=r.length-1,i=0;for(;n>=0;){let s=r[n];if(i+=JSON.stringify(s).length,i>QCe)break;n--}return r.slice(n+1)};limitChatHistoryTruncate=r=>{let n=QCe/3,i=[0],s=0;for(let a=0;a<r.length;a++){let l=r[a],c=JSON.stringify(l).length;s+c>n&&(i.push(a),s=0),s+=c}if(i.length<4)return r;let o=2*Math.floor((i.length-2)/2);return r.slice(i[o])}};async function*Ogt(e,t,r,n){let i=new Set,s=[],o=new Ma(async l=>{if(l===void 0)return;let c=[l,await n(l)];s.push(c)});t&&(i.add(t),o.insert(t)),o.kick();for await(let l of r){TG(l.workspaceFileChunks??[]).forEach(f=>{i.add(f),o.insert(f)}),o.kick();let u=[...s];u.forEach(([f,p])=>{i.delete(f)}),s=[],yield{type:"chat-model-reply",data:{text:l.text,requestId:e,streaming:!0,workspaceFileChunks:u.map(([f,p])=>p),nodes:l.nodes}}}let a=await Promise.all([...TG([...i]).map(n)]);yield{type:"chat-model-reply",data:{text:"",requestId:e,streaming:!0,workspaceFileChunks:a}}}function TG(e){let t=new Map;for(let n of e){if(n.charStart>=n.charEnd)continue;let i=t.get(n.blobName)??[];i.push(n),t.set(n.blobName,i)}let r=[];for(let[n,i]of t){let s=i.sort((o,a)=>o.charStart-a.charStart).reduce((o,a)=>{let l=o[o.length-1];return l&&l.charEnd+1>=a.charStart?l.charEnd=a.charEnd:o.push(a),o},[]);r.push(...s)}return r}var qgt="- The user is working from the directory `${relPath}`.\n- When the user mentions a file name or when viewing output from shell commands, it is likely relative to `${relPath}`.\n- When creating, deleting, viewing or editing files, first try prepending `${relPath}` to the path.\n- When running shell commands, do not prepend `${relPath}` to the path.\n";function Vgt(e,t){return e.agentMemories?e.agentMemories+=`
`:e.agentMemories="",e.agentMemories+=qgt.replaceAll("${relPath}",t),e}var aF=V(require("vscode"));var La=V(require("vscode"));async function PCe(e){let[t,r,n]=await Promise.all([La.commands.executeCommand("vscode.provideDocumentSemanticTokensLegend",e),La.commands.executeCommand("vscode.provideDocumentSemanticTokens",e),Co(e)]);if(!t||!r||!n)return[];let i=[],s=r.data;for(let o=0;o<s.length;o+=5){let a=i[i.length-1],l=s[o],c=s[o+1],u=s[o+2],f=(a?.range.startLineNumber??0)+l,g=(l===0?a?.range.startColumn??0:0)+c,A=new La.Position(f,g),C=n.offsetAt(A)+u,v=n.positionAt(C),b=new La.Range(A,v),w=n.getText(b);i.push({name:w,kind:La.SymbolKind.String,range:e_(b),selectionRange:e_(b),detail:"",tags:[],children:[]})}return i}async function LCe(e,t){let r=La.Uri.file(nF(e)),n=await Co(r);if(!n)return Promise.resolve([]);let i=e.fullRange?t_(e.fullRange):void 0,s=i?n.offsetAt(i.start):0,o=n.getText(i),a=new RegExp(`\\b${t}\\b`,"g"),l=o.search(a);if(l>=0){let c=n.positionAt(s+l),u=n.positionAt(s+l+t.length),f=new La.Range(c,u);return Promise.resolve([{name:n.getText(f),kind:La.SymbolKind.String,range:e_(f),selectionRange:e_(f),detail:"",tags:[],children:[]}])}return Promise.resolve([])}var RG={keys:["name"],threshold:.05,includeScore:!0,useExtendedSearch:!0,isCaseSensitive:!0},Hgt=2e4,oF=class extends X{constructor(r,n,i,s){super();this._globalState=r;this._config=n;this._fuzzyFsSearcher=i;this._workspaceManager=s;this._logger=j("FuzzySymbolSearcher"),this._fileTokensCache=new eg(this._globalState,"fuzzyBlobNamesToSymbols",{lru:{max:1e3,fetchMethod:this._loadFileDetailSymbols}}),this.addDisposables(aF.window.onDidChangeActiveTextEditor(async o=>{if(!o)return;let a=this._workspaceManager.resolvePathName(o.document.uri.fsPath);if(!a)return;let l=this._workspaceManager.getBlobName(a);l&&await this.warmupCache(l)}))}_fileTokensCache;_logger;findSymbolsRegex=async r=>{if(!this._config.config.enableDebugFeatures)return{type:"find-symbol-response",data:[]};let n=r.data.searchScope.files,i=(await Promise.all(n.map(async o=>(await LCe(o,r.data.query)).map(l=>({...l,file:{...o,range:void 0,fullRange:l.range}}))))).flat(),s=UCe(i,r.data.query,{fuseSearch:{limit:1},fuseInit:RG});return{type:"find-symbol-response",data:s}};findSymbols=async r=>{if(!Wgt(r.data.query))return{type:"find-symbol-response",data:[]};let n=await this.getAllFilteredTokens(r.data.searchScope.files??[],{filter:!0,forceRefresh:!1}),i=UCe(n,r.data.query,{fuseSearch:{limit:1},fuseInit:RG});return{type:"find-symbol-response",data:i}};warmupCache=async r=>{let n=this._workspaceManager.getAllPathNames(r)[0];if(!n)return;let i={repoRoot:n.rootPath,pathName:n.relPath};await this._getAllFileTokens(i)};getAllFilteredTokens=async(r,n)=>{let i=async s=>{let o=await this._getAllFileTokens(s,n.forceRefresh);if(!o)return[];if(!n.filter||!s.fullRange)return o;let a=t_(s.fullRange);return o.filter(l=>{let c=t_(l.range);return a.contains(c)})};return(await Promise.all(r.map(i))).flat()};_loadFileDetailSymbols=async(r,n,{context:i})=>{let s=aF.Uri.file(i.absPath),o=!0,a=new Promise(l=>setTimeout(()=>{l(void 0),o=!1},i.timeoutMs));for(;o;)try{let l=new Promise(u=>setTimeout(u,4e3)),c=await Promise.race([PCe(s),a]);if(c===void 0||c.length>0)return c??[];await l}catch(l){return this._logger.error(`Failed to load symbols for ${i.absPath}: ${l instanceof Error?l.message:String(l)}`),[]}return[]};_getAllFileTokens=async(r,n=!1)=>{let i=this._getCurrFileDetails(r);if(i===void 0)return[];let s=this._getCurrBlobName(i);if(!s)return[];try{let o=await this._fileTokensCache.cache.fetch(s,{context:{absPath:nF(i),blobName:s,timeoutMs:Hgt},forceRefresh:n});return o?o.map(a=>({name:a.name,kind:a.kind,range:a.range,selectionRange:a.selectionRange,detail:a.detail,tags:a.tags||[],children:[],file:{...r,range:void 0,fullRange:a.range}})):[]}catch(o){let a=o instanceof Error?o.message:String(o);return this._logger.error(`Failed to read file tokens for ${s}: ${a}`),[]}};_getCurrBlobName=r=>{let n=new qe(r.repoRoot,r.pathName);return this._workspaceManager.getBlobName(n)};_getCurrFileDetails=r=>{let n=this._workspaceManager.getAllQualifiedPathNames(r.pathName);return n.length?{...r,repoRoot:n[0].rootPath,pathName:n[0].relPath}:void 0}};function UCe(e,t,r){return new bo(e,{...RG,...r.fuseInit,keys:["name"]}).search(`${t}$`,r.fuseSearch).map(s=>s.item)}function Wgt(e){return e.length>0&&!e.match(/[/.\s]/)}var OCe=V(require("fs")),qCe=V(dm()),kG=V(require("path")),Lu=V(require("vscode"));var lF=class extends X{constructor(r,n,i){super();this._config=r;this._flags=n;this._clientMetricsReporter=i;this._initializeWorkspaceWatchers(),this.addDisposable(Lu.workspace.onDidChangeWorkspaceFolders(s=>{s.removed.forEach(o=>{let a=this._workspaceWatchers.get(o.uri.fsPath);a&&(a.dispose(),this._workspaceWatchers.delete(o.uri.fsPath),this._workspaceGuidelinesContent.delete(o.uri.fsPath))}),s.added.forEach(o=>{this._initializeWorkspaceWatcher(o.uri.fsPath)})})),this._userGuidelinesContent=this._config?.config?.chat.userGuidelines||"",this.addDisposable(this._config.onDidChange(()=>{let s=this._userGuidelinesContent;this._userGuidelinesContent=this._config?.config?.chat.userGuidelines||"",this._guidelinesChangedEmitter.fire(),s===""&&this._userGuidelinesContent!==""?this._reportMetric("chat-set-user-guidelines"):s!==""&&this._userGuidelinesContent===""&&this._reportMetric("chat-clear-user-guidelines")}))}_workspaceGuidelinesContent=new Map;_workspaceWatchers=new Map;_userGuidelinesContent="";_guidelinesChangedEmitter=new Lu.EventEmitter;get onDidChange(){return this._guidelinesChangedEmitter.event}_initializeWorkspaceWatchers(){Lu.workspace.workspaceFolders&&Lu.workspace.workspaceFolders.forEach(r=>{this._initializeWorkspaceWatcher(r.uri.fsPath)})}_initializeWorkspaceWatcher(r){let n=kG.join(r,".augment-guidelines");this._updateWorkspaceContent(r);let i=Lu.workspace.createFileSystemWatcher(n);this.addDisposable(i);let s=()=>this._updateWorkspaceContent(r);i.onDidChange(s),i.onDidCreate(s),i.onDidDelete(()=>{this._workspaceGuidelinesContent.set(r,"")}),this._workspaceWatchers.set(r,i)}_updateWorkspaceContent(r){try{let n=kG.join(r,".augment-guidelines"),i=this._workspaceGuidelinesContent.get(r)||"",s=OCe.readFileSync(n,"utf8");this._workspaceGuidelinesContent.set(r,s),this._guidelinesChangedEmitter.fire(),i===""&&s!==""?this._reportMetric("chat-set-workspace-guidelines"):i!==""&&s===""&&this._reportMetric("chat-clear-workspace-guidelines")}catch{let n=this._workspaceGuidelinesContent.get(r)||"";this._workspaceGuidelinesContent.set(r,""),n!==""&&this._reportMetric("chat-clear-workspace-guidelines")}}getWorkspaceGuidelinesContent(r){return this._flags.currentFlags.enableGuidelines&&this._workspaceGuidelinesContent.get(r)||""}getActiveWorkspacePath(r){let n=Lu.window.activeTextEditor;if(!n)return;let i=n.document.uri.fsPath;return r.safeResolvePathName(i)?.rootPath}getCurrentWorkspaceGuidelinesContent(r){let n=Lu.workspace.workspaceFolders;if(!n||n.length===0)return"";if(n.length===1)return this.getWorkspaceGuidelinesContent(n[0].uri.fsPath);let i=this.getActiveWorkspacePath(r);return i?this.getWorkspaceGuidelinesContent(i):""}getUserGuidelinesContent(){return this._flags.currentFlags.enableGuidelines?this._userGuidelinesContent:""}getGuidelinesStates(){return this._flags.currentFlags.enableGuidelines?{userGuidelines:{enabled:this._userGuidelinesContent.length>0,overLimit:this._userGuidelinesContent.length>this._flags.currentFlags.userGuidelinesLengthLimit,contents:this._userGuidelinesContent,lengthLimit:this._flags.currentFlags.userGuidelinesLengthLimit},workspaceGuidelines:Array.from(this._workspaceGuidelinesContent.entries()).map(([r,n])=>({workspaceFolder:r,enabled:n.length>0,overLimit:n.length>this._flags.currentFlags.workspaceGuidelinesLengthLimit,lengthLimit:this._flags.currentFlags.workspaceGuidelinesLengthLimit}))}:{userGuidelines:{enabled:!1,overLimit:!1,contents:"",lengthLimit:this._flags.currentFlags.userGuidelinesLengthLimit}}}_reportMetric=(0,qCe.default)(r=>{this._clientMetricsReporter.reportWebviewClientMetric({webviewName:"chat",client_metric:r,value:1})},1e3,{leading:!0,trailing:!1})};var AF=require("child_process"),s_=V(require("os")),Jy=V(require("vscode"));var VCe=(l=>(l.webSearchV1="google_search",l.webSearch="web-search",l.gitHub="github-api",l.linear="linear",l.notion="notion",l.jira="jira",l.confluence="confluence",l.supabase="supabase",l))(VCe||{}),Ygt=new Set(Object.values(Hn));var Kgt=new Set(Object.values(VCe));var zgt=new Set(Object.values(zi));var n2t=new Set([...Ygt,...Kgt,...zgt]);var HCe=V(require("vscode")),cF=class extends Qm{_maxDiagnosticDelayMs=3e3;constructor(t,r=0,n=.2){super(t,r,n)}async _addDiagnosticsToResponse(t,r,n,i){if(t.isError)return t;try{let s=await this._waitForNewDiagnostics(i),o=this._filterDiagnosticsMap(s,i),a=await this._formatDiagnostics(o),l=n.filepath?.absPath||r,c=s.get(l)??[],u=this._filterDiagnostics(c,o.get(l)??[]),f=new Map;u.length>0&&f.set(l,u);let p=await this._formatDiagnostics(f);return Gt(`${t.text}

The IDE reports the following new issues:
${a}

The IDE reports the following additional issues in ${r}:
${p}`)}catch{return t}}async _formatDiagnostics(t){let r=[];for(let[n,i]of t.entries())if(i.length!==0){r.push(n);try{let o=(await this.readFile(n)).contents.split(`
`);for(let a of i){let l=a.range.start.line+1,c=a.range.end.line+1;r.push(`L${l}-${c}: ${a.message}`);let u=Math.max(0,a.range.start.line-3),f=Math.min(o.length-1,a.range.end.line+3);for(let p=u;p<=f;p++){let g=o[p],A=p+1;r.push(`  ${A}: ${g}`)}r.push("")}}catch{for(let o of i){let a=o.range.start.line+1,l=o.range.end.line+1;r.push(`L${a}-${l}: ${o.message}`)}}}return r.join(`
`)}async handleStrReplace(t,r,n,i){let s=this._getDiagnostics(),o=await super.handleStrReplace(t,r,n,i);return this._addDiagnosticsToResponse(o,t,r,s)}async handleInsert(t,r,n,i){let s=this._getDiagnostics(),o=await super.handleInsert(t,r,n,i);return this._addDiagnosticsToResponse(o,t,r,s)}_getDiagnostics(){let t=new Map;return HCe.languages.getDiagnostics().forEach(([r,n])=>{n.length>0&&t.set(r.fsPath,n)}),t}_filterDiagnosticsMap(t,r){let n=new Map;return t.forEach((i,s)=>{let o=r.get(s)??[],a=this._filterDiagnostics(i,o);a.length>0&&n.set(s,a)}),n}_filterDiagnostics(t,r){return t.filter(n=>!r.some(i=>n.range.start.line===i.range.start.line&&n.range.end.line===i.range.end.line&&n.message===i.message&&n.severity===i.severity))}_hasDifferentDiagnostics(t,r){if(t.size!==r.size)return!0;for(let[n,i]of t){let s=r.get(n);if(!s||i.length!==s.length)return!0;for(let o=0;o<i.length;o++){let a=i[o],l=s[o];if(a.range.start.line!==l.range.start.line||a.range.end.line!==l.range.end.line||a.message!==l.message||a.severity!==l.severity)return!0}}return!1}async _waitForNewDiagnostics(t){let r=Date.now(),n=this._getDiagnostics();for(;Date.now()-r<this._maxDiagnosticDelayMs;){let i=this._getDiagnostics(),s=this._filterDiagnosticsMap(i,t);if(this._hasDifferentDiagnostics(s,this._filterDiagnosticsMap(n,t)))return i;n=i,await ma(1e3)}return n}};var FG=V(require("path")),Kr=V(require("vscode"));var uF=class extends X{constructor(r){super();this._extensionRoot=r;this._shellInfo=this._getVSCodeShell();let n=Kr.window;n.onDidEndTerminalShellExecution&&ea("1.93.0")?(this._hasShellIntegration=!0,this._shellExecutionListener=n.onDidEndTerminalShellExecution(async i=>{for(let[s,o]of Array.from(this._processes).reverse())if(o.terminal===i.terminal&&i.execution.commandLine.value===o.command&&!o.killed&&o.exitCode===null){if(o.exitCode=i.exitCode??null,o.readStream){await ma(10),this._logger.debug(`Reading exact output for process ${s}`);let l="";for await(let c of o.readStream)l+=c;this._isBuggyOutput(l)?(this._logger.debug(`Buggy output detected for process ${s}. Please upgrade VSCode.`),Ui().reportEvent({eventName:Vi.vsCodeTerminalBuggyOutput,conversationId:""}),o.output=await this._getOutputFromClipboard(s)):o.output=this._stripControlCodes(dS(l,this._maxOutputLength))}else o.output=await this._getOutputFromClipboard(s);o.terminal!==this._longRunningTerminal&&o.terminal.dispose(),o.killed=!0;let a=this._waitResolvers.get(s);a&&a({output:o.output,returnCode:o.exitCode});break}})):Ui().reportEvent({eventName:Vi.vsCodeTerminalShellIntegrationNotAvailable,conversationId:""}),this.addDisposable(Kr.window.onDidCloseTerminal(async i=>{for(let[s,o]of this._processes)if(o.terminal===i&&!o.killed){o.readStream&&(o.output=await this._getOutputFromPossiblyIncompleteProcess(o,s)),o.killed=!0,o.exitCode=i.exitStatus?.code??-1;let a=this._waitResolvers.get(s);a&&a({output:o.output,returnCode:o.exitCode});break}}))}_shellInfo;_processes=new Map;_waitResolvers=new Map;_nextId=1;_shellExecutionListener;_activePoller;_longRunningTerminal;_hasShellIntegration=!1;_logger=j("TerminalProcessTools");_maxOutputLength=64*1024;async launch(r,n,i,s){let o=this._nextId++,a=!1,l;if(s?(!this._longRunningTerminal||this._longRunningTerminal.exitStatus?(this._longRunningTerminal=this._createTerminal("Augment",n),a=!0):this._longRunningTerminal&&!this._terminalHasShellIntegration(this._longRunningTerminal)&&(this._longRunningTerminal.dispose(),this._longRunningTerminal=this._createTerminal(`Augment - ${r}`,n),a=!0),l=this._longRunningTerminal):l=this._createTerminal(`Augment - ${r}`,n),s&&Array.from(this._processes.values()).some(f=>f.terminal===l&&f.exitCode===null&&!f.killed))return`Cannot launch another waiting process while another waiting process is running. The id of the existing waiting process is ${o}.
Please wait until this process is complete (you can use a tool for this purpose), or launch the new process as a background process with \`wait=false\`.`;l.show(!0);let c="";if(l===this._longRunningTerminal&&!a&&(c=await this._getLastCommand(l))===r){let f=this.shellName==="powershell"?"#":":";this._terminalHasShellIntegration(l)?l.shellIntegration.executeCommand(f):l.sendText(f);let p=null,g=!1;await Kv(new Promise(A=>{p=setInterval(()=>{g||(g=!0,(async()=>{try{c=await this._getLastCommand(l),c===f&&(p&&(clearInterval(p),p=null),this._logger.debug("Successfully got noop command result."),A(void 0))}finally{g=!1}})())},100)}),1e3).catch(()=>{this._logger.debug("Timed out waiting for noop command to complete"),Ui().reportEvent({eventName:Vi.vsCodeTerminalTimedOutWaitingForNoopCommand,conversationId:""})}).finally(()=>{p&&(clearInterval(p),p=null)})}let u={terminal:l,command:r,lastCommand:c,output:"",killed:!1,readStream:void 0,exitCode:null};if(this._processes.set(o,u),this._terminalHasShellIntegration(l)){let f=l.shellIntegration.executeCommand(r);u.readStream=f.read(),this._logger.debug(`Using existing shell integration for command: ${r}`)}else if(this._hasShellIntegration&&Kr.window.onDidChangeTerminalShellIntegration){let f;f=Kr.window.onDidChangeTerminalShellIntegration(p=>{if(p.terminal===l&&p.shellIntegration&&!u.readStream){let g=p.shellIntegration.executeCommand(r);u.readStream=g.read(),this._logger.debug(`Using shell integration for command: ${r}`),f&&(f.dispose(),f=void 0)}}),setTimeout(()=>{u.readStream||(l.sendText(r),this._logger.debug(`Failed to use shell integration for command: ${r}`),Ui().reportEvent({eventName:Vi.vsCodeTerminalFailedToUseShellIntegration,conversationId:""})),f&&(f.dispose(),f=void 0)},2e3)}else this._logger.debug(`Not using shell integration for command: ${r}`),l.sendText(r);return i.addEventListener("abort",()=>{this.kill(o)}),o}_createTerminal(r,n){let i=this.shellName==="bash"?{PAGER:"cat",LESS:"-FX",GIT_PAGER:"cat"}:void 0;return Kr.window.createTerminal({name:r,shellPath:this._shellInfo.path??this.shellName,shellArgs:this._shellInfo.args,cwd:n,env:i,iconPath:{light:Kr.Uri.joinPath(this._extensionRoot,"media","panel-icon-light.svg"),dark:Kr.Uri.joinPath(this._extensionRoot,"media","panel-icon-dark.svg")},isTransient:!0})}async kill(r){let n=this._processes.get(r);if(!(!n||n.killed))return n.terminal===this._longRunningTerminal?n.terminal.sendText("",!1):n.terminal.dispose(),n.killed=!0,n.exitCode=-1,n.output=await this._getOutputFromPossiblyIncompleteProcess(n,r),n.output}isInLongRunningTerminal(r){let n=this._processes.get(r);return!!n&&n.terminal===this._longRunningTerminal}async readOutput(r){let n=this._processes.get(r);return n?n.exitCode!==null||n.killed?{output:n.output,returnCode:n.exitCode}:{output:await this._getOutputFromPossiblyIncompleteProcess(n,r),returnCode:n.exitCode}:void 0}writeInput(r,n){let i=this._processes.get(r);return!i||i.killed?!1:(i.terminal.sendText(n),!0)}listProcesses(){let r=[];for(let[n,i]of this._processes.entries()){let s=i.killed?"killed":"running";r.push({id:n,command:i.command,state:s,returnCode:i.exitCode})}return r}waitForProcess(r,n,i){return new Promise(s=>{(async()=>{let o=this._processes.get(r);if(!o){s({output:"",returnCode:null});return}if(o.exitCode!==null){s({output:o.output,returnCode:o.exitCode});return}let a=setTimeout(()=>{this._waitResolvers.delete(r),this._activePoller&&(clearInterval(this._activePoller),this._activePoller=void 0),this.readOutput(r).then(c=>{s({output:c?.output??"",returnCode:null})})},n*1e3);if(o.lastCommand===o.command){this._logger.debug("Last command is the same as the current one."),Ui().reportEvent({eventName:Vi.vsCodeTerminalLastCommandIsSameAsCurrent,conversationId:""});let c=await this.readOutput(r);c?s(c):(this._logger.debug(`Failed to read output for process ${r}`),Ui().reportEvent({eventName:Vi.vsCodeTerminalFailedToReadOutput,conversationId:""}),s({output:"",returnCode:null}))}else this._activePoller&&(clearInterval(this._activePoller),this._activePoller=void 0),this._activePoller=setInterval(()=>{(async()=>{if(await this._getLastCommand(o.terminal)===o.command){this._logger.debug(`Polling determined process ${r} is done.`),Ui().reportEvent({eventName:Vi.vsCodeTerminalPollingDeterminedProcessIsDone,conversationId:""}),clearInterval(this._activePoller),this._activePoller=void 0;let u=await this.readOutput(r);o.output=u?.output??"",o.exitCode=u?.returnCode??null,o.killed=!0,u?s(u):(this._logger.debug(`Failed to read output for process ${r}`),Ui().reportEvent({eventName:Vi.vsCodeTerminalFailedToReadOutput,conversationId:""}),s({output:"",returnCode:null}))}})()},1e3),this._waitResolvers.set(r,c=>{clearTimeout(a),clearInterval(this._activePoller),this._activePoller=void 0,this._waitResolvers.delete(r),s(c)});let l=()=>{clearTimeout(a),clearInterval(this._activePoller),this._activePoller=void 0,this._waitResolvers.delete(r),s({output:"",returnCode:null})};i.addEventListener("abort",l)})()})}async _getOutputFromPossiblyIncompleteProcess(r,n){if(r.readStream){this._logger.debug(`Reading exact intermediate output for process ${n}`);let i="";try{let s=async l=>{let c=new Promise(u=>{setTimeout(()=>u({done:!0,value:void 0}),100)});return Promise.race([l.next(),c])},o=r.readStream[Symbol.asyncIterator](),a=await s(o);for(;!a.done;)a.value!==void 0&&(i+=a.value),a=await s(o)}catch(s){this._logger.debug(`Error reading stream for process ${n}: ${s.message??""}`),Ui().reportEvent({eventName:Vi.vsCodeTerminalFailedToReadOutput,conversationId:""})}return this._stripControlCodes(dS(i,this._maxOutputLength))}else return r.terminal.exitStatus||r.terminal.show(!0),await this._getOutputFromClipboard(n)}async _getOutputFromClipboard(r){let n=this._processes.get(r)?.terminal;if(n&&n===this._longRunningTerminal&&!this._terminalHasShellIntegration(n))return(await this._getLastCommandAndOutputFallback()).output;this._logger.debug(`Reading approximate output for process ${r}`),Ui().reportEvent({eventName:Vi.vsCodeTerminalReadingApproximateOutput,conversationId:""});let i=await Kr.env.clipboard.readText();await Kr.env.clipboard.writeText(""),await Kr.commands.executeCommand("workbench.action.terminal.copyLastCommandOutput");let s=await Kr.env.clipboard.readText();return await Kr.env.clipboard.writeText(i),dS(s,this._maxOutputLength)}async _getLastCommand(r){if(r&&r===this._longRunningTerminal&&!this._terminalHasShellIntegration(r))return(await this._getLastCommandAndOutputFallback()).command;let n=await Kr.env.clipboard.readText();await Kr.env.clipboard.writeText(""),await Kr.commands.executeCommand("workbench.action.terminal.copyLastCommand");let i=await Kr.env.clipboard.readText();return await Kr.env.clipboard.writeText(n),i}async _getLastCommandAndOutputFallback(){let r=await Kr.env.clipboard.readText();await Kr.env.clipboard.writeText(""),await Kr.commands.executeCommand("workbench.action.terminal.selectToPreviousCommand"),await Kr.commands.executeCommand("workbench.action.terminal.copyAndClearSelection");let n=await Kr.env.clipboard.readText();await Kr.env.clipboard.writeText(r);let i=n.split(`
`).shift()??"",s={powershell:/^\s*(?:PS\s+(?:[^>]*))?\s*>\s*/,bash:/^\s*(?:[^@]*@[^:]*:)?(?:[^$]*)?\$\s*/,zsh:/^\s*(?:[^@]*@[^:]*:)?(?:[^%]*)?%\s*/},o=s[this.shellName]??s.bash,a=i.replace(o,""),f=n.slice(i.length+1).split(`
`).filter(p=>!o.test(p)).join(`
`);return{command:a,output:f}}closeAllProcesses(){for(let r of this._processes.values())!r.killed&&r.terminal!==this._longRunningTerminal&&r.terminal.dispose();this._processes.clear(),this._activePoller&&(clearInterval(this._activePoller),this._activePoller=void 0),this._longRunningTerminal&&(this._longRunningTerminal.dispose(),this._longRunningTerminal=void 0)}cleanup(){this.closeAllProcesses(),this._shellExecutionListener&&(this._shellExecutionListener.dispose(),this._shellExecutionListener=void 0),this.dispose()}getLongRunningTerminalInfo(){if(!this._hasShellIntegration||!this._longRunningTerminal)return;let r=this._longRunningTerminal.shellIntegration?.cwd;if(r instanceof Kr.Uri)return{terminal_id:0,current_working_directory:r.fsPath}}_getVSCodeShell(){let r=Kr.workspace.getConfiguration("terminal.integrated.defaultProfile"),n;process.platform==="win32"?n="windows":process.platform==="darwin"?n="osx":n="linux";let i=r.get(n);if(typeof i=="string"){let o=Kr.workspace.getConfiguration(`terminal.integrated.profiles.${n}.${i}`).get("path"),a=i.trim().toLowerCase(),l;if(a==="git bash"&&process.platform==="win32"&&(a="bash",o||(o=this._findGitBashPath()),(!o||!dn(o))&&(this._logger.debug("Failed to find/use Git Bash path"),Ui().reportEvent({eventName:Vi.vsCodeTerminalFailedToFindGitBash,conversationId:""}),a=void 0),l=["--login","-i"]),a&&lz(a))return{name:a,path:o,args:l};a&&(this._logger.debug(`Unsupported shell: ${a}`),Ui().reportEvent({eventName:Vi.vsCodeTerminalUnsupportedVSCodeShell,conversationId:""}))}return{name:zf(process.platform),path:void 0,args:void 0}}_findGitBashPath(){let r=[`${process.env.ProgramFiles}`,`${process.env.ProgramW6432}`,`${process.env["ProgramFiles(x86)"]}`];for(let n of r){if(!Vme(n))continue;let i=[FG.default.join(n,"Git","bin","bash.exe"),FG.default.join(n,"Git","usr","bin","bash.exe")];for(let s of i)if(dn(s))return s}}get shellName(){return this._shellInfo.name}_stripControlCodes(r){return r.replace(/\x1B(?:[@-Z\\-_]|\[[0-?]*[ -/]*[@-~])/g,"").replace(/(?:\x1b\])?(\d+;[^\x07\x1b]*(?:\x07|\x1b\\))/g,"")}_isBuggyOutput(r){return!ea("1.98.0")&&!r.includes("\x1B]633;D")&&!r.includes("\x1B]133;D")}_terminalHasShellIntegration(r){return this._hasShellIntegration&&r.shellIntegration}},zy=class extends Vr{constructor(r,n,i){super(Hn.launchProcess,n().shellCommandsAlwaysSafe?mt.Safe:mt.Check);this._workspaceManager=r;this._getAgentConfig=n;this.processTools=i;this._allowlist=Rm(process.platform,this.processTools.shellName)}_allowlist;version=2;get description(){return`Launch a new process with a shell command. A process can be waiting (\`wait=true\`) or non-waiting (\`wait=false\`).

If \`wait=true\`, launches the process in an interactive terminal, and waits for the process to complete up to
\`max_wait_seconds\` seconds. If the process ends during this period, the tool call returns. If the timeout
expires, the process will continue running in the background but the tool call will return. You can then
interact with the process using the other process tools.

Note: Only one waiting process can be running at a time. If you try to launch a process with \`wait=true\`
while another is running, the tool will return an error.

If \`wait=false\`, launches a background process in a separate terminal. This returns immediately, while the
process keeps running in the background.

Notes:
- Use \`wait=true\` processes when the command is expected to be short, or when you can't
proceed with your task until the process is complete. Use \`wait=false\` for processes that are
expected to run in the background, such as starting a server you'll need to interact with, or a
long-running process that does not need to complete before proceeding with the task.
- If this tool returns while the process is still running, you can continue to interact with the process
using the other available tools. You can wait for the process, read from it, write to it, kill it, etc.
- You can use this tool to interact with the user's local version control system. Do not use the
retrieval tool for that purpose.
- If there is a more specific tool available that can perform the function, use that tool instead of
this one.

The OS is ${process.platform}. The shell is '${this.processTools.shellName}'.`}inputSchemaJson=JSON.stringify({type:"object",properties:{command:{type:"string",description:"The shell command to execute."},wait:{type:"boolean",description:"Whether to wait for the command to complete."},max_wait_seconds:{type:"number",description:"Number of seconds to wait for the command to complete. Only relevant when wait=true. 10 minutes may be a good default: increase from there if needed."},cwd:{type:"string",description:"Working directory for the command. If not supplied, uses the current working directory."}},required:["command","wait","max_wait_seconds"]});checkToolCallSafe(r){if(this._getAgentConfig().shellCommandsAlwaysSafe)return!0;let n=r.command;return km(this._allowlist,n,this.processTools.shellName)}async call(r,n,i){try{let s=r.wait,o=r.max_wait_seconds,a=r.cwd??rf(this._workspaceManager),l=!!s,c=await this.processTools.launch(r.command,a,i,l);if(typeof c=="string")return ot(c);if(!s)return Gt(`Process launched with terminal ID ${c}`);let u=await this.processTools.waitForProcess(c,o,i),f=WCe(c,this.processTools,this._workspaceManager);return u.returnCode===null?Gt(`Command may still be running. You can use read-process to get more output
and kill-process to terminate it if needed.
Terminal ID ${c}
Output so far:
<output>
${u.output}
</output>
${f}`):{text:`Here are the results from executing the command.
<return-code>
${u.returnCode}
</return-code>
<output>
${u.output}
</output>
${f}`,isError:u.returnCode!==0}}catch(s){return ot(`Failed to launch process: ${s.message??""}`)}}},dF=class extends Vr{constructor(r){super(Hn.killProcess,mt.Safe);this._processTools=r}description="Kill a process by its terminal ID.";inputSchemaJson=JSON.stringify({type:"object",properties:{terminal_id:{type:"integer",description:"Terminal ID to kill."}},required:["terminal_id"]});checkToolCallSafe(r){return!0}async call(r,n,i){let s=r.terminal_id,o=await this._processTools.kill(s);return o?Gt(`Terminal ${s} killed
<output>${o}</output>`):ot(`Terminal ${s} not found`)}},fF=class extends Vr{constructor(r,n){super(Hn.readProcess,mt.Safe);this._processTools=r;this._workspaceManager=n}description="Read output from a terminal.\n\nIf `wait=true` and the process has not yet completed, waits for the terminal to complete up to `max_wait_seconds` seconds before returning its output.\n\nIf `wait=false` or the process has already completed, returns immediately with the current output.";inputSchemaJson=JSON.stringify({type:"object",properties:{terminal_id:{type:"integer",description:"Terminal ID to read from."},wait:{type:"boolean",description:"Whether to wait for the command to complete."},max_wait_seconds:{type:"number",description:"Number of seconds to wait for the command to complete. Only relevant when wait=true. 1 minute may be a good default: increase from there if needed."}},required:["terminal_id","wait","max_wait_seconds"]});checkToolCallSafe(r){return!0}async call(r,n,i){let s=r.terminal_id,o=r.wait,a=r.max_wait_seconds;o&&await this._processTools.waitForProcess(s,a,i);let l=await this._processTools.readOutput(s);if(!l)return ot(`Terminal ${s} not found`);let c=WCe(s,this._processTools,this._workspaceManager),u=l.returnCode!==null?"completed":"still running",f=`Here is the output from terminal ${s} (status: ${u}):
<output>${l.output}</output>
`;return l.returnCode!==null&&(f+=`<return-code>
${l.returnCode}
</return-code>
`),c&&(f+=c),Gt(f)}},hF=class extends Vr{constructor(r){super(Hn.writeProcess,mt.Safe);this._processTools=r}description="Write input to a terminal.";inputSchemaJson=JSON.stringify({type:"object",properties:{terminal_id:{type:"integer",description:"Terminal ID to write to."},input_text:{type:"string",description:"Text to write to the process's stdin."}},required:["terminal_id","input_text"]});checkToolCallSafe(r){return!0}call(r,n,i){let s=r.terminal_id,o=r.input_text;return this._processTools.writeInput(s,o)?Promise.resolve(Gt(`Input written to terminal ${s}`)):Promise.resolve(ot(`Terminal ${s} not found or write failed`))}},gF=class extends Vr{constructor(r){super(Hn.listProcesses,mt.Safe);this._processTools=r}description="List all known terminals and their states.";inputSchemaJson=JSON.stringify({type:"object",properties:{},required:[]});checkToolCallSafe(r){return!0}call(r,n,i){let s=this._processTools.listProcesses();if(s.length===0)return Promise.resolve(Gt("No processes found"));let o=s.map(a=>{let l=a.state;return a.returnCode!==null&&(l+=` (return code: ${a.returnCode})`),`Terminal ${a.id}: ${a.command} - ${l}`});return Promise.resolve(Gt(`Here are all known processes:

`+o.join(`
`)))}};function WCe(e,t,r){let n=t.getLongRunningTerminalInfo()?.current_working_directory;if(!t.isInLongRunningTerminal(e)||!n)return;let i=r.safeResolvePathName(n)?.relPath;return i!=null&&!$h(i)&&(i=`//${i}`),`The terminal's current working directory is now \`${i??n}\`.
`}var GCe=(e,t,r,n,i)=>(s,o)=>new MG(s,t,e,o,r,n,i),MG=class e extends Im{constructor(r,n,i,s,o,a,l){let c=[],u,f;r===cn.agent?(c.push(new QG(n,o,i)),a.currentFlags?.vscodeAgentEditTool!==VI.strReplaceEditor?(c.push(new pF(n)),c.push(new NG(n,i,o))):c.push(new cF(o)),c.push(new PG),s().useIDETerminalForShellCommands?(f=new uF(l),c.push(new zy(n,s,f)),c.push(new dF(f)),c.push(new fF(f,n)),c.push(new hF(f)),c.push(new gF(f))):(u=new LG,c.push(new UG(n,s,u,zf(process.platform))),c.push(new OG(u)),c.push(new qG(u)),c.push(new VG(u)),c.push(new HG(u)),c.push(new WG(u)))):c.push(new pF(n));super(c,No.localToolHost);this._chatMode=r;this._workspaceManager=n;this._apiServer=i;this._getAgentConfig=s;this._checkpointManager=o;this._featureFlagManager=a;this._extensionRoot=l;this._processTools=u,this._terminalProcessTools=f}_processTools;_terminalProcessTools;async close(r=!1){await super.close(),this._processTools!==void 0&&this._processTools.close(),this._terminalProcessTools!==void 0&&this._terminalProcessTools.cleanup()}closeAllToolProcesses(){return this._processTools!==void 0&&this._processTools.close(),this._terminalProcessTools!==void 0&&this._terminalProcessTools.closeAllProcesses(),Promise.resolve()}factory(r){return new e(this._chatMode,this._workspaceManager,this._apiServer,this._getAgentConfig,this._checkpointManager,this._featureFlagManager,this._extensionRoot)}},pF=class extends Vr{constructor(r){super(Hn.readFile,mt.Safe);this._workspaceManager=r}description="Read a file.";inputSchemaJson=JSON.stringify({type:"object",properties:{file_path:{type:"string",description:"The path of the file to read."}},required:["file_path"]});checkToolCallSafe(r){return!0}async call(r,n,i){let s=r.file_path;try{let o=await qy(s,this._workspaceManager);return o===void 0?ot(`Cannot read file: ${s}`):Gt(o)}catch(o){return ot(`Failed to read file: ${s}: ${o.message??""}`)}}},QG=class extends Vr{constructor(r,n,i){super(Hn.saveFile,mt.Safe);this._workspaceManager=r;this._checkpointManager=n;this._requestIdCreator=i}description="Save a new file. Use this tool to write new files with the attached content. It CANNOT modify existing files. Do NOT use this tool to edit an existing file by overwriting it entirely. Use the str-replace-editor tool to edit existing files instead.";inputSchemaJson=JSON.stringify({type:"object",properties:{file_path:{type:"string",description:"The path of the file to save."},file_content:{type:"string",description:"The content of the file."},add_last_line_newline:{type:"boolean",description:"Whether to add a newline at the end of the file (default: true)."}},required:["file_path","file_content"]});checkToolCallSafe(r){return!0}async call(r,n,i){let s=r.file_path;try{let o=r.file_content,a=r.add_last_line_newline??!0,l=o+(a?`
`:""),c=await qy(s,this._workspaceManager)??"",u=Fu(s,this._workspaceManager);if(u===void 0)return ot(`Cannot resolve path: ${s}`);if(dn(u.absPath))return ot(`File already exists: ${u.absPath}`);let f=new pn(u,void 0,l,{});if(c===l)return f.dispose(),Gt(`No changes made to file {${s}}`);let p=n.at(-1)?.request_id??this._requestIdCreator.createRequestId(),g=this._checkpointManager.currentConversationId??"";return await this._checkpointManager.addCheckpoint({conversationId:g,path:u},{sourceToolCallRequestId:p,timestamp:Date.now(),document:f,conversationId:g}),Gt(`File saved.  Saved file {${s}}`)}catch(o){return ot(`Failed to save file: ${s}: ${o.message??""}`)}}},NG=class extends Vr{constructor(r,n,i){super(Hn.editFile,mt.Safe);this._workspaceManager=r;this._apiServer=n;this._checkpointManager=i}_maxDiagnosticDelayMs=5e3;description=`
Edit a file. Accepts a file path and a description of the edit.
This tool can edit whole files.
The description should be detailed and precise, and include all required information to perform the edit.
It can include both natural language and code. It can include multiple code snippets to described different
edits in the file. It can include descriptions of how to perform these edits precisely.

All the contents that should go in a file should be placed in a markdown code block, like this:

<begin-example>
Add a function called foo.

\`\`\`
def foo():
    ...
\`\`\`
</end-example>

This includes all contents, even if it's not code.

Be precise or I will take away your toys.

Prefer to use this tool when editing parts of a file.
`;inputSchemaJson=JSON.stringify({type:"object",properties:{file_path:{type:"string",description:"The path of the file to edit."},edit_summary:{type:"string",description:"A brief description of the edit to be made. 1-2 sentences."},detailed_edit_description:{type:"string",description:"A detailed and precise description of the edit. Can include natural language and code snippets."}},required:["file_path","edit_summary","detailed_edit_description"]});checkToolCallSafe(r){return!0}async call(r,n,i){let s=r.file_path,o;try{let a=r.edit_summary,l=r.detailed_edit_description,c=await qy(s,this._workspaceManager);if(c===void 0)return ot(`Cannot read file: ${s}`);let u=Fu(s,this._workspaceManager);if(u===void 0)return ot(`Cannot resolve path: ${s}`);let f=this._getDiagnostics();o=this._apiServer.createRequestId();let p=await this._apiServer.agentEditFile(o,s,a,l,c,i);if(p.isError)return ot(`Failed to edit file: ${s}`,o);let g=new pn(u,c,p.modifiedFileContents,{});if(c===p.modifiedFileContents)return g.dispose(),Gt(`No changes made to file {${s}}`,o);let A=n.at(-1)?.request_id??o,y=this._checkpointManager.currentConversationId??"";await this._checkpointManager.addCheckpoint({conversationId:y,path:u},{sourceToolCallRequestId:A,timestamp:Date.now(),document:g,conversationId:y});let C=await this._waitForNewDiagnostics(f),v=this._filterDiagnosticsMap(C,f),b=Array.from(v.entries()).map(([Q,W])=>`${Q}
${W.map(Z=>`${Z.range.start.line}-${Z.range.end.line}: ${Z.message}`).join(`
`)}`).join(`

`),w=C.get(u.absPath)??[],F=this._filterDiagnostics(w,v.get(u.absPath)??[]).map(Q=>`${Q.range.start.line}-${Q.range.end.line}: ${Q.message}`).join(`
`);return Gt(`File edited successfully.  Saved file {${s}}.  New diagnostics:
${b}

Additional ${s} diagnostics:
${F}`,o)}catch(a){return ot(`Failed to edit file: ${s}: ${a.message??""}`,o)}}_getDiagnostics(){let r=new Map;return Jy.languages.getDiagnostics().forEach(([n,i])=>{i.length>0&&r.set(n.fsPath,i)}),r}_filterDiagnosticsMap(r,n){let i=new Map;return r.forEach((s,o)=>{let a=n.get(o)??[],l=this._filterDiagnostics(s,a);l.length>0&&i.set(o,l)}),i}_filterDiagnostics(r,n){return r.filter(i=>!n.some(s=>i.range.start.line===s.range.start.line&&i.range.end.line===s.range.end.line&&i.message===s.message&&i.severity===s.severity))}async _waitForNewDiagnostics(r){let n=Date.now(),i=this._getDiagnostics();for(;Date.now()-n<this._maxDiagnosticDelayMs;){let s=this._getDiagnostics(),o=this._filterDiagnosticsMap(s,r);if(this._hasDifferentDiagnostics(o,this._filterDiagnosticsMap(i,r)))return s;i=s,await ma(1e3)}return i}_hasDifferentDiagnostics(r,n){if(r.size!==n.size)return!0;for(let[i,s]of r){let o=n.get(i);if(!o||s.length!==o.length)return!0;for(let a=0;a<s.length;a++){let l=s[a],c=o[a];if(l.range.start.line!==c.range.start.line||l.range.end.line!==c.range.end.line||l.message!==c.message||l.severity!==c.severity)return!0}}return!1}},PG=class extends Vr{constructor(){super(Hn.openBrowser,mt.Safe)}description="Open a URL in the default browser.\n\n1. The tool takes in a URL and opens it in the default browser.\n2. The tool does not return any content. It is intended for the user to visually inspect and interact with the page. You will not have access to it.\n3. You should not use `open-browser` on a URL that you have called the tool on before in the conversation history, because the page is already open in the user's browser and the user can see it and refresh it themselves. Each time you call `open-browser`, it will jump the user to the browser window, which is highly annoying to the user.";inputSchemaJson=JSON.stringify({type:"object",properties:{url:{type:"string",description:"The URL to open in the browser."}},required:["url"]});checkToolCallSafe(t){return!0}async call(t,r,n){try{let i=t.url,s=Jy.Uri.parse(i);return await Jy.env.openExternal(s)?Gt(`Opened ${i} in browser`):ot(`Failed to open ${i} in browser: system denied the request`)}catch(i){return ot(`Failed to open URL in browser: ${i.message??""}`)}}},LG=class{_processes=new Map;_stdoutBuffers=new Map;_stderrBuffers=new Map;_lastReadStdout=new Map;_lastReadStderr=new Map;_charBudget;constructor(t=1e5){this._charBudget=t}launch(t,r,n,i){let s={cwd:r,shell:i,stdio:["pipe","pipe","pipe"],signal:n};(s_.default.platform()==="linux"||s_.default.platform()==="darwin")&&(s.detached=!0);let o=(0,AF.spawn)(t,[],s);if(o.pid==null)return;let a=o.pid;return this._processes.set(a,o),this._stdoutBuffers.set(a,[]),this._stderrBuffers.set(a,[]),this._lastReadStdout.set(a,0),this._lastReadStderr.set(a,0),o.stdout?.on("data",l=>{let c=this._stdoutBuffers.get(a);for(c.push(l.toString("utf8"));c.join("").length>this._charBudget;)c.shift()}),o.stderr?.on("data",l=>{let c=this._stderrBuffers.get(a);for(c.push(l.toString("utf8"));c.join("").length>this._charBudget;)c.shift()}),o.on("close",()=>{}),a}kill(t){let r=this._processes.get(t);try{return s_.default.platform()==="linux"||s_.default.platform()==="darwin"?((0,AF.execSync)(`kill -9 -${t}`),!0):(r&&r.kill(),!0)}catch{return!1}}readOutput(t){let r=this._processes.get(t);if(!r)return;let n=this._stdoutBuffers.get(t),i=this._stderrBuffers.get(t),s=this._lastReadStdout.get(t),o=this._lastReadStderr.get(t),a=n.slice(s).join(""),l=i.slice(o).join("");return this._lastReadStdout.set(t,n.length),this._lastReadStderr.set(t,i.length),{stdout:a,stderr:l,returnCode:r.exitCode}}writeInput(t,r){let n=this._processes.get(t);return!n||!n.stdin?!1:n.stdin.write(r)}listProcesses(){let t=[];for(let[r,n]of this._processes.entries()){let i=n.killed?"killed":n.exitCode!==null?"completed":"running";t.push({pid:r,command:n.spawnargs.join(" "),state:i,returnCode:n.exitCode})}return t}waitForProcess(t,r,n){return new Promise(i=>{let s=this._processes.get(t);if(!s){i({stdout:"",stderr:"",returnCode:null});return}let o=setTimeout(()=>{let a=this.readOutput(t);i({stdout:a?.stdout??"",stderr:a?.stderr??"",returnCode:null})},r*1e3);n.addEventListener("abort",()=>{clearTimeout(o),i({stdout:"",stderr:"",returnCode:null})}),s.on("close",a=>{clearTimeout(o);let l=this.readOutput(t);i({stdout:l?.stdout??"",stderr:l?.stderr??"",returnCode:a})})})}close(){for(let t of this._processes.values())!t.killed&&t.exitCode===null&&t.pid&&this.kill(t.pid);this._processes.clear(),this._stdoutBuffers.clear(),this._stderrBuffers.clear(),this._lastReadStdout.clear(),this._lastReadStderr.clear()}},UG=class e extends Vr{constructor(r,n,i,s){super(Hn.launchProcess,n().shellCommandsAlwaysSafe?mt.Safe:mt.Check);this._workspaceManager=r;this._getAgentConfig=n;this._processTools=i;this._shellName=s;this._allowlist=Rm(process.platform,this._shellName)}static defaultWaitSeconds=60;_allowlist;version=2;description=`Launch a new process with a shell command. A process can be waiting (\`wait=true\`) or non-waiting (\`wait=false\`, which is default).

If \`wait=true\`, launches the process in an interactive terminal, and waits for the process to complete up to
\`wait_seconds\` seconds (default: ${e.defaultWaitSeconds}). If the process ends
during this period, the tool call returns. If the timeout expires, the process will continue running in the
background but the tool call will return. You can then interact with the process using the other process tools.

Note: Only one waiting process can be running at a time. If you try to launch a process with \`wait=true\`
while another is running, the tool will return an error.

If \`wait=false\`, launches a background process in a separate terminal. This returns immediately, while the
process keeps running in the background.

Notes:
- Use \`wait=true\` processes when the command is expected to be short, or when you can't
proceed with your task until the process is complete. Use \`wait=false\` for processes that are
expected to run in the background, such as starting a server you'll need to interact with, or a
long-running process that does not need to complete before proceeding with the task.
- If this tool returns while the process is still running, you can continue to interact with the process
using the other available tools. You can wait for the process, read from it, write to it, kill it, etc.
- You can use this tool to interact with the user's local version control system. Do not use the
retrieval tool for that purpose.
- If there is a more specific tool available that can perform the function, use that tool instead of
this one.

The OS is ${process.platform}.`;inputSchemaJson=JSON.stringify({type:"object",properties:{command:{type:"string",description:"The shell command to execute"},wait:{type:"boolean",description:"Optional: whether to wait for the command to complete (default false)"},wait_seconds:{type:"number",description:"Optional: number of seconds to wait for the command to complete (default 60). Only relevant when wait=true."},cwd:{type:"string",description:"Working directory for the command. If not supplied, uses the current working directory."}},required:["command"]});checkToolCallSafe(r){if(this._getAgentConfig().shellCommandsAlwaysSafe)return!0;let n=r.command;return km(this._allowlist,n,this._shellName)}async call(r,n,i){try{let s=r.command,o=r.wait??!1,a=r.wait_seconds??e.defaultWaitSeconds;if(!o&&a!==void 0)return ot("You cannot set wait_seconds without wait=true.");let l=r.cwd??rf(this._workspaceManager),c=this._processTools.launch(s,l,i,this._shellName);if(c===void 0)return ot("Failed to launch process");if(!o)return Gt(`Process launched with PID ${c}`);let u=await this._processTools.waitForProcess(c,a,i);return u.returnCode===null?Gt(`Command is still running after ${o} seconds. You can use read_process to get more output
and kill_process to terminate it if needed.
PID ${c}
Output so far:
<stdout>
${u.stdout}
</stdout>
<stderr>
${u.stderr}
</stderr>`):Gt(`Here are the results from executing the command.
<return-code>
${u.returnCode}
</return-code>
<stdout>
${u.stdout}
</stdout>
<stderr>
${u.stderr}
</stderr>`)}catch(s){return ot(`Failed to launch process: ${s.message??""}`)}}},OG=class extends Vr{constructor(r){super(Hn.killProcess,mt.Safe);this._processTools=r}description="Kill a process by its process ID.";inputSchemaJson=JSON.stringify({type:"object",properties:{process_id:{type:"integer",description:"Process ID to kill."}},required:["process_id"]});checkToolCallSafe(r){return!0}call(r,n,i){let s=r.process_id;return this._processTools.kill(s)?Promise.resolve(Gt(`Process ${s} killed`)):Promise.resolve(ot(`Process ${s} not found`))}},qG=class extends Vr{constructor(r){super(Hn.readProcess,mt.Safe);this._processTools=r}description="Read output from a running process.";inputSchemaJson=JSON.stringify({type:"object",properties:{process_id:{type:"integer",description:"Process ID to read from."}},required:["process_id"]});checkToolCallSafe(r){return!0}call(r,n,i){let s=r.process_id,o=this._processTools.readOutput(s);if(!o)return Promise.resolve(ot(`Process ${s} not found`));let a=o.returnCode!==null?"completed":"still running",l=`Here is the output from process ${s} (status: ${a}):
<stdout>
${o.stdout}
</stdout>
<stderr>
${o.stderr}
</stderr>`;return o.returnCode!==null&&(l+=`
<return-code>
${o.returnCode}
</return-code>`),Promise.resolve(Gt(l))}},VG=class extends Vr{constructor(r){super(Hn.writeProcess,mt.Safe);this._processTools=r}description="Write input to a process's stdin.";inputSchemaJson=JSON.stringify({type:"object",properties:{process_id:{type:"integer",description:"Process ID to write to."},input_text:{type:"string",description:"Text to write to the process's stdin."}},required:["process_id","input_text"]});checkToolCallSafe(r){return!0}call(r,n,i){let s=r.process_id,o=r.input_text;return this._processTools.writeInput(s,o)?Promise.resolve(Gt(`Input written to process ${s}`)):Promise.resolve(ot(`Process ${s} not found or write failed`))}},HG=class extends Vr{constructor(r){super(Hn.listProcesses,mt.Safe);this._processTools=r}description="List all known processes and their states.";inputSchemaJson=JSON.stringify({type:"object",properties:{},required:[]});checkToolCallSafe(r){return!0}call(r,n,i){let s=this._processTools.listProcesses();if(s.length===0)return Promise.resolve(Gt("No processes found"));let o=s.map(a=>{let l=a.state;return a.returnCode!==null&&(l+=` (return code: ${a.returnCode})`),`PID ${a.pid}: ${a.command} - ${l}`});return Promise.resolve(Gt(`Here are all known processes:

`+o.join(`
`)))}},WG=class extends Vr{constructor(r){super(Hn.waitProcess,mt.Safe);this._processTools=r}description="Wait for a process to complete or timeout.";inputSchemaJson=JSON.stringify({type:"object",properties:{process_id:{type:"integer",description:"Process ID to wait for."},wait:{type:"number",description:"Number of seconds to wait for the process to complete."}},required:["process_id","wait"]});checkToolCallSafe(r){return!0}async call(r,n,i){let s=r.process_id,o=r.wait,a=await this._processTools.waitForProcess(s,o,i);return a.returnCode===null?Gt(`Command still running after ${o} seconds.`):Gt(`Process ${s} completed with return code ${a.returnCode}.`)}};var mF=class{constructor(t,r){this._apiServer=t;this._configListener=r}_logger=j("VSCodeRemoteInfo");async retrieveRemoteTools(t){try{return(await this._apiServer.listRemoteTools(t)).tools}catch(r){return this._logger.error("Failed to list remote tools",r),[]}}filterToolsWithExtraInput(t){let r=new Set;for(let n of t)this._getExtraToolInput(n)!==void 0&&r.add(n);return Promise.resolve(r)}async runRemoteTool(t,r,n,i,s){return await this._apiServer.runRemoteTool(t,r,n,i,this._getExtraToolInput(i),s)}_getExtraToolInput(t){switch(t){case Oi.Jira:case Oi.Confluence:return this._configListener.config.integrations.atlassian;case Oi.Notion:return this._configListener.config.integrations.notion;case Oi.Linear:return this._configListener.config.integrations.linear;case Oi.GitHubApi:return this._configListener.config.integrations.github;default:return}}};var $Ce=V(require("vscode"));var yF=class e{constructor(t){this._extensionContext=t}static assetSubdirectory="augment-user-assets";async saveAsset(t,r){let n=await this._getUri(t);await Hme(n.fsPath,r)}async loadAsset(t){let r=await this._getUri(t);try{let n=await Qk(r.fsPath);return new Uint8Array(n)}catch{return}}async deleteAsset(t){let r=await this._getUri(t);return await Gme(r.fsPath)}async _getUri(t){let r=this._extensionContext.storageUri??this._extensionContext.globalStorageUri,n=zt(r.fsPath,e.assetSubdirectory);await Tc(n)||await kl(n);let i=Qa(t);if(i){let s=zt(n,i);await Tc(s)||await kl(s)}return $Ce.Uri.file(zt(n,t))}};var mve=V(require("vscode"));var YG=V(require("path")),Ei=V(require("vscode"));var Nl=V(require("vscode"));var lf=V(require("vscode"));var YCe=V(require("assert")),vF=V(require("vscode"));var CF=class extends X{constructor(r){super();this._config=r;this._logger=j("CommandManager"),this.addDisposable(new vF.Disposable(()=>{this._commands.forEach((n,i)=>{n.unregister(),this._commands.delete(i)})})),this.addDisposable(this._config.onDidChange(()=>{this.register(this.allCommands)}))}_commands=new Map;_groups=[];_logger;register(r){for(let n of r){if(this._commands.has(n.commandID)){this._commands.get(n.commandID)?.update(this._config);continue}n.register(this._config),this._commands.set(n.commandID,n)}}registerGroup(r,n){this._logger.debug(`Registering group '${r}' with ${n.length} commands.`),this._groups.push({name:r,commands:n}),this.register(n)}get availableCommands(){return Array.from(this._commands.values()).filter(r=>r.isRegistered&&r.canRun())}get availableCommandGroups(){let r=[];for(let n=0;n<this._groups.length;n++){let{name:i,commands:s}=this._groups[n],o=s.filter(a=>a.isRegistered&&a.canRun());o.length!==0&&(r.length>0&&r[r.length-1].name===i?r[r.length-1].commands.push(...o):r.push({name:i,commands:o}))}return r}get allCommands(){return Array.from(this._commands.values())}},ct=class extends X{constructor(r=void 0,n=!0){super();this._title=r;this._showInActionPanel=n;let i=this.constructor;typeof i.commandID=="string"&&(this._commandID=i.commandID),this.addDisposable({dispose:()=>this.unregister()})}_registration;_logger=j("AugmentCommand");static commandID;_commandID;get commandID(){return(0,YCe.default)(typeof this._commandID=="string",`commandID must be defined on subclass ${this.constructor.name}`),this._commandID}get title(){if(typeof this._title=="string")return this._title;if(typeof this._title=="function")return this._title()}get showInActionPanel(){return this._showInActionPanel}get isRegistered(){return this._registration!==void 0}canRun(){return!0}register(r){this._registration===void 0&&(this.type==="debug"&&!r.config.enableDebugFeatures||(this._registration=vF.commands.registerCommand(this.commandID,(...n)=>{if(!this.canRun()){this._logger.debug(`Not running '${this.commandID}' command with type ${this.type}.`);return}this.run(...n)})))}update(r){this.type==="debug"&&(r.config.enableDebugFeatures?this.register(r):this.dispose())}unregister(){this._registration?.dispose(),this._registration=void 0}};var ta=class extends ct{constructor(r,n=void 0,i=!0){super(n,i);this._syncingEnabledTracker=r}_syncingEnabled(){return this._syncingEnabledTracker.syncingEnabledState==="enabled"||this._syncingEnabledTracker.syncingEnabledState==="partial"}canRun(){return this._syncingEnabled()}};var JCe=V(require("os")),Ua=V(require("vscode"));var KCe=V(require("vscode"));function zCe(e){return e.absPath.startsWith("Untitled-")}function bF(e){return KCe.workspace.textDocuments.find(r=>r.isUntitled&&r.uri.path===e.absPath)}var Uu=class e extends pn{_instance=crypto.randomUUID();constructor(t,r,n,i){let s=JCe.default.EOL;n!==void 0&&(n=n.endsWith(s)?n:n+s),r!==void 0&&(r=r.endsWith(s)?r:r+s),super(t,r,n,{...i}),this.addDisposable(Ua.workspace.onDidChangeTextDocument(this._onBaseDocUpdated)),this.addDisposable(this.onOriginalUpdated(()=>void this._write()))}static fromPathName=async(t,r,n)=>{let i=new e(t,"","",{logger:n}),s=await i._read(),o=s===""&&!await i._fileExists()?void 0:s;return i.updateCodeVersions(o,r??o),i};_fileExists=async()=>{try{return await Ua.workspace.fs.stat(Ua.Uri.file(this.filePath.absPath)),!0}catch{return!1}};_read=async()=>{let t=await this._getVsCodeTextDocument();return t?t.getText():""};_write=async()=>{if(this.originalCode===void 0)try{let r=Ua.Uri.file(this.filePath.absPath);await this._fileExists()&&(this._opts.logger?.debug(`Deleting file ${this.filePath.absPath}`),await Ua.workspace.fs.delete(r));return}catch(r){this._opts.logger?.error(`Failed to delete file ${this.filePath.absPath}: ${String(r)}`);return}let t=await this._getVsCodeTextDocument();if(t&&t.getText()!==this.originalCode){this._opts.logger?.debug(`Writing to doc ${this._instance}`);let r=new Ua.WorkspaceEdit;r.replace(t.uri,new Ua.Range(0,0,Number.MAX_SAFE_INTEGER,0),this.originalCode),await Ua.workspace.applyEdit(r)}};_getVsCodeTextDocument=async()=>{try{let t;if(this.isUntitled?t=bF(this.filePath):t=await Ua.workspace.openTextDocument(this.filePath.absPath),t===void 0)throw new Error(`Failed to open document ${this.filePath.absPath}`);return t}catch(t){this._opts.logger?.error(`Failed to read file ${this.filePath.absPath}: ${String(t)}`);return}};_onBaseDocUpdated=t=>{if(t.document.uri.fsPath===this.absPath){let r=t.document.getText();if(r===this.originalCode)return;this.updateOriginal(r)}}};var hA=V(require("vscode")),o_=`

`;function xo(e){return e.scheme==="vscode-notebook-cell"}function jCe(e){let t=hA.window.activeNotebookEditor?.notebook;return t?Jgt(e,t)?[GG(t),jgt(t,e)]:[void 0,0]:[void 0,0]}function ZCe(e){if(xo(e.uri)){for(let t of hA.workspace.notebookDocuments)for(let r of t.getCells())if(r.document===e)return t}}function GG(e){return jy(e.getCells())}function Jgt(e,t){let r=t.getCells().find(n=>n.document===e);return r?r.kind===hA.NotebookCellKind.Code:!1}function jgt(e,t){let n=e.getCells().findIndex(i=>i.document===t);return n===-1?0:Zgt(e,n,!0)}function Zgt(e,t,r){let n=jy(e.getCells().slice(0,t));return r&&n?n.length+o_.length:n.length}function jy(e){return e.filter(n=>n.kind===hA.NotebookCellKind.Code).map(n=>n.document.getText()).join(o_)}function af(e){return e.getCells!==void 0}var xF=class extends ct{constructor(r,n,i){super();this._extension=r;this._extensionUri=n;this._apiServer=i}static commandID="vscode-augment.internal-dv.o";type="public";run=async(...r)=>{if(!this._extension.workspaceManager)throw new Error("No workspace manager");if(!this._extension.keybindingWatcher)throw new Error("No keybinding watcher");let[n,i,s]=r,o=XCe(n);if(o===void 0)return;if(o===null)return;let a=Ux(o),l=o.fsPath.replace(a.fsPath,""),c=new qe(a.fsPath,l);mn.createOrShow({extensionUri:this._extensionUri,workspaceManager:this._extension.workspaceManager,apiServer:this._apiServer,keybindingWatcher:this._extension.keybindingWatcher,fuzzyFsSearcher:this._extension.fuzzyFsSearcher,fuzzySymbolSearcher:this._extension.fuzzySymbolSearcher,workTimer:this._extension.workTimer},{document:await Uu.fromPathName(c,i),...s})};canRun(){return!0}},Zy=class extends ta{constructor(r,n,i,s,o){super(o);this._extension=r;this._extensionUri=n;this._apiServer=i;this._guidelinesWatcher=s}static commandID="vscode-augment.internal-dv.i";type="public";run=async(...r)=>{if(!this._extension.workspaceManager)throw new Error("No workspace manager");if(!this._extension.keybindingWatcher)throw new Error("No keybinding watcher");let n=lf.window.activeTextEditor;if(!n){lf.window.showInformationMessage("No active editor.");return}if(xo(n.document.uri)){lf.window.showInformationMessage("Code instructions are not supported in notebooks.");return}let[i,s,o]=r,a=XCe(i);if(a===void 0)return;if(a===null)return;let l=Ux(a),c=a.fsPath.replace(l.fsPath,""),u=new qe(l.fsPath,c),f=await Uu.fromPathName(u,s),p={...o,document:f,guidelinesWatcher:this._guidelinesWatcher},g=n.selection;p.instruction={selection:{start:{line:g.start.line,character:g.start.character},end:{line:g.end.line,character:g.end.character}}},mn.createOrShow({extensionUri:this._extensionUri,workspaceManager:this._extension.workspaceManager,apiServer:this._apiServer,keybindingWatcher:this._extension.keybindingWatcher,fuzzyFsSearcher:this._extension.fuzzyFsSearcher,fuzzySymbolSearcher:this._extension.fuzzySymbolSearcher,workTimer:this._extension.workTimer},p)};canRun(){let r=this._extension.featureFlagManager.currentFlags,n=lf.window.activeTextEditor;return!!(r.enableInstructions&&n&&!xo(n.document.uri))}},Xy=class extends ct{static commandID="vscode-augment.internal-dv.aac";type="public";constructor(){super()}run(){mn.currentPanel&&mn.controller?.diffViewMessageHandler.acceptAllChunks()}canRun(){return!0}},eC=class extends ct{static commandID="vscode-augment.internal-dv.afc";type="public";constructor(){super()}run(){mn.currentPanel&&mn.controller?.diffViewMessageHandler.acceptFocusedChunk()}canRun(){return!0}},tC=class extends ct{static commandID="vscode-augment.internal-dv.rfc";type="public";constructor(){super()}run(){mn.currentPanel&&mn.controller?.diffViewMessageHandler.rejectFocusedChunk()}canRun(){return!0}},rC=class extends ct{static commandID="vscode-augment.internal-dv.fpc";type="public";constructor(){super()}run(){mn.currentPanel&&mn.controller?.diffViewMessageHandler.focusPreviousChunk()}canRun(){return!0}},nC=class extends ct{static commandID="vscode-augment.internal-dv.fnc";type="public";constructor(){super()}run(){mn.currentPanel&&mn.controller?.diffViewMessageHandler.focusNextChunk()}canRun(){return!0}},iC=class extends ct{static commandID="vscode-augment.internal-dv.c";type="public";constructor(){super()}run(){mn.currentPanel&&mn.currentPanel.dispose()}canRun(){return!0}};function XCe(e){return e===void 0?lf.window.activeTextEditor?.document.uri:e===null?null:e instanceof lf.Uri?e:lf.Uri.parse(e)}var MF=V(require("vscode"));function _F(){return{startLineNumber:null,endLineNumber:null,newText:"",oldText:"",hasYieldedNewChunk:!1,currOffset:null,startRefined:!1,endRefined:!1,newTextBuffer:"",prefixOverlapChecked:!1}}function wF(e){return!Yn(e.startLineNumber)&&!Yn(e.endLineNumber)&&!Yn(e.newText)}function ive(e){return!e.startRefined&&!Yn(e.startLineNumber)&&e.oldText.trim().length>0}function sve(e){return!e.endRefined&&!Yn(e.endLineNumber)&&e.oldText.trim().length>0}function Xgt(e,t){if(ive(e)){let{isPureInsertion:r,lineBefore:n}=eve(e);if(r)e.startLineNumber=a_(t,e.startLineNumber,n,20)+1;else{let s=e.oldText.replaceAll(/\n$/g,"").split(`
`)[0];e.startLineNumber=a_(t,e.startLineNumber,s,20)}e.startRefined=!0}if(sve(e)){let{isPureInsertion:r}=eve(e);if(r)e.endLineNumber=e.startLineNumber;else{let n=e.oldText.replaceAll(/\n$/g,"").split(`
`),i=n[n.length-1];e.endLineNumber=a_(t,e.endLineNumber-1,i,20)+1}e.endRefined=!0}}function IF(e){let t=(e.newText.match(/\n/g)||[]).length;return{lineChange:{originalStartLineNumber:e.startLineNumber,originalEndLineNumber:e.endLineNumber?e.endLineNumber:e.startLineNumber,modifiedStartLineNumber:e.startLineNumber,modifiedEndLineNumber:e.startLineNumber+t},newText:e.newText}}function ove(e,t){let{replacementStartLine:r,replacementEndLine:n,replacementText:i,replacementOldText:s}=t;return Yn(r)||(e.startLineNumber=r),Yn(n)||(e.endLineNumber=n),Yn(i)||(e.newText+=i),Yn(s)||(e.oldText+=s),e}async function*ave(e,t){let r=[],n=_F(),i=e.split(`
`);for await(let s of cve(t)){let{replacementStartLine:o,replacementOldText:a}=s;if((!Yn(o)||!Yn(a))&&wF(n)){let l=IF(n),c=n.currOffset??BF(l,r);r.push(l);let u=SF(l,c);i=rve([...i],u),n=_F()}if(n=ove(n,s),ive(n)){let c=n.oldText.replaceAll(/\n$/g,"").split(`
`)[0];n.startLineNumber=a_(e,n.startLineNumber,c,20)}if(sve(n)){let l=n.oldText.replaceAll(/\n$/g,"").split(`
`),c=l[l.length-1];n.endLineNumber=a_(e,n.endLineNumber,c,20)+1}if(wF(n)){let l=IF(n);n.currOffset=n.currOffset??BF(l,r);let c=SF(l,n.currOffset);yield rve([...i],c).join(`
`)}}}function a_(e,t,r,n){let i=e.split(`
`).map(s=>s.trimEnd());if(r=r.trimEnd(),i[t-1]===r)return t;for(let s=1;s<=n;s++){if(t>s&&i[t-s-1]===r)return t-s;if(t+s<=i.length&&i[t+s-1]===r)return t+s}return t}function ept(e){return!Yn(e.startLineNumber)&&!e.hasYieldedNewChunk}function lve(e,t,r,n){let i="";if(Yn(e.startLineNumber))throw new Error("Start line should be already set when replacement text is set");let s=e.newTextBuffer.split(/(?<=\n)/),o=t.split(/(?<=\n)/).slice(0,e.startLineNumber-1);if(!e.prefixOverlapChecked){let c=Math.min(r,o.length);if(s.length<=c&&!n)return i;for(let u=c;u>=1;u--){let f=!0;for(let p=0;p<u;p++)if(s[p]!==o[o.length-u+p]){f=!1;break}if(f){s=s.slice(u),e.newText=e.newText.split(/(?<=\n)/).slice(u).join("");break}}e.prefixOverlapChecked=!0}if(i=s.slice(0,-r).join(""),s=s.slice(-r),!n)return e.newTextBuffer=s.join(""),i;if(Yn(e.endLineNumber))throw new Error("End line should be already set when edit is completed.");let a=t.split(/(?<=\n)/).slice(e.endLineNumber-1),l=Math.min(r,a.length);for(let c=l;c>=1;c--){let u=!0;for(let f=0;f<c;f++)if(s[s.length-c+f]!==a[f]){u=!1;break}if(u){s=s.slice(0,-c),e.newText=e.newText.split(/(?<=\n)/).slice(0,-c).join("");break}}return e.newTextBuffer="",i+=s.join(""),i.length>0&&!i.endsWith(`
`)&&(i+=`
`),i}function eve(e){if(e.oldText.length===0)return{isPureInsertion:!1,lineBefore:""};let t=e.oldText.split(`
`),r=t[t.length-1],n="PURE INSERTION AFTER LINE:";return r.startsWith(n)?{isPureInsertion:!0,lineBefore:r.substring(n.length)}:{isPureInsertion:!1,lineBefore:""}}function*tve(e,t,r){let n=lve(e,r,3,!0);n.length>0&&(yield{chunkContinue:{newText:n}});let i=IF(e),s=BF(i,t),o=SF(i,s);yield{chunkEnd:{originalStartLine:e.startLineNumber,originalEndLine:e.endLineNumber,stagedStartLine:o.lineChange.originalStartLineNumber,stagedEndLine:o.lineChange.originalEndLineNumber}},t.push(tpt(i,r))}function tpt(e,t){let r=t.split(/(?<=\n)/),n={originalStartLineNumber:e.lineChange.originalStartLineNumber,originalEndLineNumber:e.lineChange.originalEndLineNumber,modifiedStartLineNumber:e.lineChange.modifiedStartLineNumber,modifiedEndLineNumber:e.lineChange.modifiedEndLineNumber},i=e.newText.split(/(?<=\n)/);for(;n.originalStartLineNumber<n.originalEndLineNumber&&i.length>0;){let s=i[0];if(r[n.originalStartLineNumber-1]!==s)break;n.originalStartLineNumber++,n.modifiedStartLineNumber++,i=i.slice(1)}for(;n.originalStartLineNumber<n.originalEndLineNumber&&i.length>0;){let s=i[i.length-1];if(r[n.originalEndLineNumber-2]!==s)break;n.originalEndLineNumber--,n.modifiedEndLineNumber--,i=i.slice(0,-1)}return{lineChange:{originalStartLineNumber:n.originalStartLineNumber,originalEndLineNumber:n.originalEndLineNumber,modifiedStartLineNumber:n.modifiedStartLineNumber,modifiedEndLineNumber:n.modifiedEndLineNumber},newText:i.join("")}}async function*DF(e,t){let r=[],n=_F();for await(let i of cve(t)){let{text:s,replacementStartLine:o,replacementOldText:a}=i;if((!Yn(o)||!Yn(a)||!Yn(s))&&wF(n)&&(yield*tve(n,r,e),n=_F()),n=ove(n,i),Xgt(n,e),ept(n)){let l=IF(n),c=BF(l,r),u=SF(l,c);yield{newChunkStart:{originalStartLine:n.startLineNumber,stagedStartLine:u.lineChange.originalStartLineNumber}},n.hasYieldedNewChunk=!0}Yn(i.replacementText)||(n.newTextBuffer+=i.replacementText,yield{chunkContinue:{newText:lve(n,e,3,!1)}})}wF(n)&&(yield*tve(n,r,e))}async function*cve(e){for await(let t of e)Yn(t.replacementOldText)||(yield{text:"",replacementOldText:t.replacementOldText}),Yn(t.replacementStartLine)||(yield{text:"",replacementStartLine:t.replacementStartLine}),Yn(t.replacementText)||(yield{text:"",replacementText:t.replacementText}),Yn(t.replacementEndLine)||(yield{text:"",replacementEndLine:t.replacementEndLine})}function rve(e,t){let r=t.newText?t.newText.replaceAll(/\n$/g,"").split(`
`):[],n=t.lineChange.originalStartLineNumber-1,i=t.lineChange.originalEndLineNumber-t.lineChange.originalStartLineNumber;return e.splice(n,i,...r),e}function SF(e,t){return{lineChange:{originalStartLineNumber:e.lineChange.originalStartLineNumber+t,originalEndLineNumber:e.lineChange.originalEndLineNumber+t,modifiedStartLineNumber:e.lineChange.modifiedStartLineNumber+t,modifiedEndLineNumber:e.lineChange.modifiedEndLineNumber+t},newText:e.newText}}function BF(e,t){let r=0;for(let n of t)r+=rpt(e,n);return r}function rpt(e,t){if(nve(e,t))return 0;if(nve(t,e)){let r=t.lineChange.originalEndLineNumber-t.lineChange.originalStartLineNumber;return t.lineChange.modifiedEndLineNumber-t.lineChange.modifiedStartLineNumber-r}else throw new Error("Edits overlap, which is not supported")}function nve(e,t){return e.lineChange.originalEndLineNumber<=t.lineChange.originalStartLineNumber}function l_(e,t=null,r=null){if(!t&&!r)throw new Error("Must provide either a response or an error");if(t&&r)throw new Error("Must provide either a response or an error, not both");return{type:"async-wrapper",requestId:e,error:r,baseMsg:t}}var TF=class{constructor(t,r,n=void 0){this._postMessage=t;this._addMsgHandler=r;this._workTimer=n}_disposers=new Array;createWrappedHandler=(t,r,n=!0)=>i=>i.type!=="async-wrapper"||i.baseMsg?.type!==t?!1:((async o=>{try{let a;if(this._workTimer&&n?a=await this._workTimer.runTimed(t,async()=>await o):a=await o,a instanceof Error)throw a;let l=l_(i.requestId,a);this._postMessage(l)}catch(a){if(a instanceof Error){let l=l_(i.requestId,null,a.message);this._postMessage(l)}}})(r(i.baseMsg)),!0);registerHandler=(t,r,n=!0)=>{let i=this.createWrappedHandler(t,r,n),s=this._addMsgHandler(i);this._disposers.push(s)};registerSidecarHandler=t=>{let r=this.createWrappedSidecarHandler(t),n=this._addMsgHandler(r);this._disposers.push(n)};createWrappedSidecarHandler=t=>r=>{if(r.type!=="async-wrapper")return;let n=i=>{let s=l_(r.requestId,i);this._postMessage(s)};try{t(r.baseMsg,n)}catch(i){if(i instanceof Error){let s=l_(r.requestId,null,i.message);this._postMessage(s)}}};registerStreamHandler=(t,r)=>{let n=this.createWrappedStreamHandler(t,r),i=this._addMsgHandler(n);this._disposers.push(i)};createWrappedStreamHandler=(t,r)=>n=>n.type!=="async-wrapper"||n.baseMsg?.type!==t?!1:((async()=>{let i=n.requestId,s={streamMsgIdx:0,streamNextRequestId:`${n.requestId}-0`};try{for await(let o of this._workTimer?await this._workTimer.runTimed(t,()=>r(n.baseMsg)):r(n.baseMsg)){if(o instanceof Error)throw o;let a=l_(i,o);a.streamCtx={...s},i=s.streamNextRequestId;let l=s.streamMsgIdx+1;s={streamMsgIdx:l,streamNextRequestId:`${n.requestId}-${l}`},this._postMessage(a)}this._postMessage({type:"async-wrapper",requestId:i,error:null,baseMsg:{type:"empty"},streamCtx:{...s,isStreamComplete:!0}})}catch(o){let a=o;this._postMessage({type:"async-wrapper",requestId:i,error:a.message,baseMsg:null,streamCtx:{...s,isStreamComplete:!0}})}})(),!0);dispose=()=>{for(let t of this._disposers)t()}};function ss(e,t=void 0){return new TF(r=>void e.postMessage(r),r=>{let n=e.onDidReceiveMessage(r);return()=>void n.dispose()},t)}function RF(e){let t=Math.floor(e/1e3),r=e%1e3*1e6;return[t,r]}var kF=class extends X{constructor(r){super();this._apiServer=r;this.addDisposable({dispose:this._logDiffPanelResolution})}chunkResolveByStartLine=new Map;isAcceptAll=!1;isRejectAll=!1;requestId;sessionOrigin;initialRequestTime;streamFinishTime;applyTime;_logger=j("DiffViewSessionReporter");reset=()=>{this.chunkResolveByStartLine.clear(),this.isAcceptAll=!1,this.isRejectAll=!1,this.requestId=void 0,this.sessionOrigin=void 0,this.initialRequestTime=void 0,this.streamFinishTime=void 0,this.applyTime=void 0};reportResolution=r=>{let{resolveType:n,changes:i,shouldApplyToAll:s}=r.data;s&&!this.chunkResolveByStartLine.size&&(n==="accept"?this.isAcceptAll=!0:this.isRejectAll=!0);for(let o of i){let a=o.lineChanges?.lineChanges||[];for(let l of a){let c=l.originalStart;this.chunkResolveByStartLine.set(c,n==="accept")}}};_logDiffPanelResolution=()=>{if(this._logger.debug("Logging diff panel resolution"),!this.requestId){this.reset(),this._logger.warn("No request id found for diff panel resolution");return}let n=Array.from(this.chunkResolveByStartLine.keys()).sort().map(f=>this.chunkResolveByStartLine.get(f)).filter(f=>f!==void 0),[i,s]=this.initialRequestTime?RF(this.initialRequestTime):[0,0],o=Date.now(),[a,l]=RF(o),[c,u]=RF(this.streamFinishTime||o);if(this.sessionOrigin==="instruction")this._apiServer.logInstructionResolution({request_id:this.requestId,is_accepted_chunks:n,is_accept_all:this.isAcceptAll,is_reject_all:this.isRejectAll,emit_time_sec:c,emit_time_nsec:u,resolve_time_sec:a,resolve_time_nsec:l}),this._logger.debug("Logged instruction resolution");else if(this.sessionOrigin==="smart-paste"){let[f,p]=this.applyTime?RF(this.applyTime):[0,0];this._apiServer.logSmartPasteResolution({request_id:this.requestId,is_accepted_chunks:n,is_accept_all:this.isAcceptAll,is_reject_all:this.isRejectAll,initial_request_time_sec:i,initial_request_time_nsec:s,stream_finish_time_sec:c,stream_finish_time_nsec:u,apply_time_sec:f,apply_time_nsec:p,resolve_time_sec:a,resolve_time_nsec:l}),this._logger.debug("Logged smart paste resolution")}else this._logger.warn(`Unknown session origin: ${this.sessionOrigin}`);this.reset()}};var FF=class extends X{constructor(r,n,i,s,o){super();this._webview=r;this._sessionReporter=n;this._deps=i;this._opts=s;this._workTimer=o;this._workspaceManager=this._deps.workspaceManager,this._asyncMsgHandler=ss(this._webview,this._workTimer),this._registerMessageHandlers(),this.addDisposable(this._asyncMsgHandler)}_asyncMsgHandler;_workspaceManager;_registerMessageHandlers(){this._deps.fuzzyFsSearcher&&(this._asyncMsgHandler.registerHandler("find-file-request",this._deps.fuzzyFsSearcher.findFiles),this._asyncMsgHandler.registerHandler("find-folder-request",this._deps.fuzzyFsSearcher.findFolders),this._asyncMsgHandler.registerHandler("find-recently-opened-files",this._deps.fuzzyFsSearcher.findRecentFiles)),this._asyncMsgHandler.registerStreamHandler("diff-view-fetch-pending-stream",()=>this._opts.getCurrentStream()??async function*(){}()),this._asyncMsgHandler.registerHandler("diff-view-resolve-chunk",this._opts.resolveDiff),this._asyncMsgHandler.registerHandler("diff-view-window-focus-change",this._onDiffViewFocusChange),this._asyncMsgHandler.registerHandler("dispose-diff-view",async()=>(this._opts.onUserTriggeredClose?.(),Promise.resolve({}))),this._asyncMsgHandler.registerHandler("diff-view-loaded",()=>this._opts.getInitData()),this._asyncMsgHandler.registerHandler("chat-instruction-message",this._onUserSendInstruction.bind(this))}notifyReinit(){this._webview.postMessage({type:"diff-view-notify-reinit"})}acceptAllChunks(){this._sessionReporter.chunkResolveByStartLine.size||(this._sessionReporter.isAcceptAll=!0),this._webview.postMessage({type:"diff-view-accept-all-chunks"})}acceptFocusedChunk(){this._webview.postMessage({type:"diff-view-accept-selected-chunk"})}rejectFocusedChunk(){this._webview.postMessage({type:"diff-view-reject-focused-chunk"})}focusPreviousChunk(){this._webview.postMessage({type:"diff-view-focus-prev-chunk"})}focusNextChunk(){this._webview.postMessage({type:"diff-view-focus-next-chunk"})}_onDiffViewFocusChange=r=>{let n=r.data;return Rc("vscode-augment.internal-dv.panel-focused",n),{type:"empty"}};async _onUserSendInstruction(r){if(this._deps.logger.info(`onUserSendInstruction: ${JSON.stringify(r)}`),r.type!=="chat-instruction-message"||!("data"in r)||typeof r.data!="object"||!("instruction"in r.data))throw new Error("Invalid message type or data for instruction");let n=this._deps.apiServer.createRequestId();try{let i=this._runChatInstructionStream(r,n);mn.createOrShow(this._deps,{...this._opts,viewOptions:MF.ViewColumn.Active,document:await Uu.fromPathName(this._opts.document.filePath)}),mn.startStream(DF(this._opts.document.originalCode??"",i),n,"instruction")}catch(i){throw MF.window.showErrorMessage(`Failed to send instruction: ${i}`),i}return{type:"empty"}}async*_runChatInstructionStream(r,n){if(!this._opts.guidelinesWatcher){this._deps.logger.error("Guidelines watcher not initialized");return}let{instruction:i,selectedCodeDetails:s}=r.data,{selectedCode:o,prefix:a,suffix:l,path:c,language:u,prefixBegin:f,suffixEnd:p}=s;this._deps.logger.info(`Sending request to the instruction model: ${n}`);let g=this._workspaceManager.getContext(),A;!this._opts.document.isEmptyDocument&&!this._opts.document.isUntitled?A=this._workspaceManager.getBlobName(this._opts.document.filePath):A=g.blobs.checkpointId;try{let y=this._opts.guidelinesWatcher.getUserGuidelinesContent(),C=this._opts.guidelinesWatcher.getCurrentWorkspaceGuidelinesContent(this._workspaceManager),v=await this._deps.apiServer.chatInstructionStream(n,i,g.blobs,[],o,a,l,c,A,f,p,u,y,C);for await(let b of v)yield b}catch(y){throw this._deps.logger.error(`Error in runChatInstructionStream: ${$e(y)}`),y}}};var c_=V(require("vscode"));function sC(){let e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let r=0;r<32;r++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}var QF=class extends X{constructor(r,n,i,s){super();this.streamId=r;this.requestId=n;this._stream=i;this._logger=s;this._copyableGenerator=new cA(this._stream),this.addDisposable({dispose:()=>this._cancelToken?.dispose()})}_cancelToken=new c_.CancellationTokenSource;_copyableGenerator;get stream(){return this._formatStream(this._copyableGenerator.copy())}cancel=()=>{this._cancelToken?.cancel(),this._copyableGenerator.cancel(),this.dispose()};_resetStream=()=>{this._cancelToken?.cancel(),this._cancelToken?.dispose(),this._cancelToken=new c_.CancellationTokenSource};async*_formatStream(r){this._resetStream();let n=this._cancelToken.token,i=`${this.streamId}-${sC()}`;try{yield this._streamStartedMsg(i);for await(let s of r){if(n.isCancellationRequested)break;yield this._streamDataMsg(i,s)}}catch(s){this._notifyStreamError(s)}finally{yield this._streamEndedMsg(i)}}_notifyStreamError(r){c_.window.showWarningMessage("Error streaming in changes to Augment Diff. Please try again."),this._logger.error(`Error streaming in changes to Augment Diff: ${r.message}`)}_streamStartedMsg=r=>({data:{streamId:r,requestId:this.requestId},type:"diff-view-diff-stream-started"});_streamDataMsg=(r,n)=>({data:{...n,streamId:r,requestId:this.requestId},type:"diff-view-diff-stream-chunk"});_streamEndedMsg=r=>({data:{streamId:r,requestId:this.requestId},type:"diff-view-diff-stream-ended"})};var NF=class extends X{constructor(r,n,i,s,o){super();this._panel=r;this._deps=n;this._opts=i;this._workTimer=s;this._sessionReporter=new kF(this._deps.apiServer),o&&(this._sessionReporter.applyTime=o.applyTime),this._diffViewMessageHandler=new FF(this._panel.webview,this._sessionReporter,this._deps,{...this._opts,getInitData:this.getInitData,resolveDiff:this.resolveDiff,getCurrentStream:()=>this._stream?.stream},this._workTimer),this.addDisposable(this._diffViewMessageHandler),this.addDisposable(this._sessionReporter),this.addDisposable(this._opts.document),this._diffViewMessageHandler.notifyReinit()}_sessionReporter;_diffViewMessageHandler;_currentSelection;_stream;get diffViewMessageHandler(){return this._diffViewMessageHandler}get sessionReporter(){return this._sessionReporter}startStream(r,n,i){this._sessionReporter.requestId=n,this._sessionReporter.sessionOrigin=i,this._sessionReporter.initialRequestTime=Date.now(),this._cleanupStream(),this._stream=new QF(this._deps.apiServer.createRequestId(),n,r,this._deps.logger)}_cleanupStream=()=>{this._stream?.cancel(),this._stream=void 0};getInitData=()=>{let r=this._opts?.instruction?.selection,n={type:"diff-view-initialize",data:{file:{repoRoot:"",pathName:"",originalCode:"",modifiedCode:""},keybindings:this.keybindings,instruction:r&&{selection:{start:{line:r?.start.line,character:r?.start.character},end:{line:r?.end.line,character:r?.end.character}}},editable:this._opts.editable,disableResolution:this._opts.disableResolution,disableApply:this._opts.disableApply}};if(this._opts?.instruction){let{selection:i}=this._opts.instruction,{start:s,end:o}=i;this._currentSelection=new Nl.Selection(new Nl.Position(s.line,s.character),new Nl.Position(o.line,o.character))}return this._opts.document.isEmptyDocument||(n.data.file.pathName=this._opts.document.absPath,n.data.file.originalCode=this._opts.document.originalCode,n.data.file.modifiedCode=this._opts.document.modifiedCode),Promise.resolve(n)};resolveDiff=async r=>{let{file:n,resolveType:i,changes:s}=r.data;this._sessionReporter.reportResolution(r);let o=Nl.Uri.file(this._opts.document?.absPath??"").fsPath,a=Nl.Uri.file(n.pathName).fsPath,l=n.modifiedCode===void 0;if(!this._opts.document||o!==a||l)return{type:"empty"};if((i==="accept"||i==="reject")&&this._opts.document.updateCodeVersions(n.originalCode,n.modifiedCode)){let u=await Nl.workspace.openTextDocument(this._opts.document.absPath);s&&s.length>0&&u&&this.updateChangeRange(u,s,i)}return{type:"empty"}};updateChangeRange=(r,n,i)=>{if(!this._currentSelection)return;let s=this._currentSelection.start.line,o=this._currentSelection.end.line,a=Number.MAX_SAFE_INTEGER,l=0;for(let u of n)if(u.lineChanges&&u.lineChanges.lineChanges)for(let f of u.lineChanges.lineChanges)a=Math.min(a,f.originalStart),l=Math.max(l,f.modifiedEnd);i==="accept"&&(s=Math.min(s,a-1),o=Math.max(o,l-1)),s=Math.max(0,s),o=Math.min(r.lineCount-1,o);let c=r.lineAt(o).range.end;this._currentSelection=new Nl.Selection(new Nl.Position(s,0),c)};get keybindings(){return{acceptAllChunks:this._deps.keybindingWatcher.getKeybindingForCommand(Xy.commandID,!0)??"",rejectAllChunks:this._deps.keybindingWatcher.getKeybindingForCommand(iC.commandID,!0)??"",acceptFocusedChunk:this._deps.keybindingWatcher.getKeybindingForCommand(eC.commandID,!0)??"",rejectFocusedChunk:this._deps.keybindingWatcher.getKeybindingForCommand(tC.commandID,!0)??"",focusPrevChunk:this._deps.keybindingWatcher.getKeybindingForCommand(rC.commandID,!0)??"",focusNextChunk:this._deps.keybindingWatcher.getKeybindingForCommand(nC.commandID,!0)??""}}};var di=V(require("vscode"));function ipt(e,t,r,n){if(t.length===0&&r.length===0)return!1;let i;if(t.length>0&&r.length>0){let s=t[0].start.line,o=r[0].start.line;i=s<=o?t[0]:r[0]}else t.length>0?i=t[0]:r.length>0&&(i=r[0]);return i?(e.revealRange(i,n??di.TextEditorRevealType.InCenterIfOutsideViewport),!0):!1}function spt(){let e=di.window.activeColorTheme.kind===di.ColorThemeKind.Dark||di.window.activeColorTheme.kind===di.ColorThemeKind.HighContrast;return{added:{background:e?"rgba(0, 255, 0, 0.1)":"rgba(0, 200, 0, 0.05)",text:e?"rgba(150, 255, 150, 0.9)":"rgba(0, 100, 0, 0.8)"},removed:{background:"rgba(255, 0, 0, 0.05)",text:e?"rgba(255, 200, 200, 0.9)":"rgba(150, 0, 0, 0.8)",border:"rgba(150, 0, 0, 0.3)"}}}function dve(e,t,r,n){let i=spt(),s=di.window.createTextEditorDecorationType({backgroundColor:i.added.background,isWholeLine:!0,after:{color:i.added.text,margin:"0 0 0 1em"}}),o=di.window.createTextEditorDecorationType({isWholeLine:!0,before:{color:i.removed.text,border:`1px solid ${i.removed.border}`,backgroundColor:i.removed.background,margin:"0 5px 0 0"}}),a=MI("original","modified",t,r,"","",{context:0}),l=[],c=[];for(let f of a.hunks){let p=f.newStart-1,g=!1,A=0,y="";for(let C of f.lines)if(C.startsWith("+")){if(p<e.document.lineCount){let v=new di.Range(new di.Position(p,0),new di.Position(p,e.document.lineAt(p).text.length));l.push(v)}p++}else C.startsWith("-")&&(g=!0,A++,y+=C.substring(1)+`
`);if(g){let C=Math.max(0,f.newStart-2);if(C<e.document.lineCount){let v=new di.Range(new di.Position(C,0),new di.Position(C,e.document.lineAt(C).text.length));c.push({range:v,count:A,removedContent:y.trim()})}}}e.setDecorations(s,l);let u=c.map(f=>{let p=new di.MarkdownString;return p.appendMarkdown(`**Removed content:**

`),p.appendCodeblock(f.removedContent,"diff"),p.isTrusted=!0,p.supportHtml=!0,{range:f.range,renderOptions:{before:{contentText:`\u2296 ${f.count} line${f.count===1?"":"s"} removed`,color:i.removed.text,border:`1px solid ${i.removed.border}`,backgroundColor:i.removed.background,margin:"0 5px 0 0"}},hoverMessage:p}});return e.setDecorations(o,u),n?.scrollToFirstDecoration&&ipt(e,l,c.map(f=>f.range),n.revealType),[s,o]}function fve(e,t){let n=1e4*(Math.log(e.length+1)/Math.log(4)),{minDelayMs:i=1e4,maxDelayMs:s=3e4}=t,o=Math.min(Math.max(n,i),s);setTimeout(()=>{e.forEach(a=>a.dispose())},o)}function hve(e,t){let r=[],n=di.workspace.onDidChangeTextDocument(i=>{i.document.uri.toString()===e.document.uri.toString()&&(t.forEach(s=>s.dispose()),r.forEach(s=>void s.dispose()))});return r.push(n),{dispose:()=>{r.forEach(i=>void i.dispose())}}}async function gve(e,t,r){if(!d_())throw new Error("Not in HMR mode");let n=await fetch(`${e}/${t}`);if(!n.ok)throw new Error(`Failed to load ${t} from ${e}: ${n.statusText}`);let i=await n.text();if(!i?.trim())throw new Error(`Empty response when loading ${t} from ${e}: ${n.statusText}`);return $G(i,e,r)}var u_;async function pve(e){if(u_)return u_;let t=await import("fs"),r=e.fsPath+"/.augment-hmr-env";if(u_=t.readFileSync(r,"utf8").split(`
`).filter(i=>!/^\s*(#|$)/.test(i)).reduce((i,s)=>{let[o,a]=s.split("=");return i[o]=a,i},{}).AUGMENT_HMR,!u_)throw new Error(`Failed to load HMR url from '${r}'`);return u_}function $G(e,t,r){return e.replace("<head>",`<head><base href="${t}" /><meta http-equiv="Content-Security-Policy" content="${r}" />`)}function d_(){return!!process.env.AUGMENT_IS_HMR&&process.env.AUGMENT_JS_ENV!=="production"}function Ou(...e){let t={scripts:new Set,styles:new Set(["'unsafe-inline'"]),fonts:new Set,images:new Set,media:new Set,workers:new Set,connects:new Set};for(let i of e)i(t);let r=["default-src 'none';"],n={"font-src":t.fonts,"style-src":t.styles,"script-src":t.scripts,"img-src":t.images,"media-src":t.media,"worker-src":t.workers,"connect-src":t.connects};for(let[i,s]of Object.entries(n)){let o=Array.from(s).sort();o.length!==0&&r.push(`${i} ${o.join(" ")};`)}return r.join(" ")}function qu(){return e=>{e.fonts.add("https://fonts.gstatic.com"),e.styles.add("https://fonts.googleapis.com")}}function Ave(){return e=>{e.images.add("https://www.google.com"),e.images.add("https://*.gstatic.com"),e.images.add("https://s2.googleusercontent.com")}}function Vu(e){return t=>{t.scripts.add(e.cspSource),t.styles.add(e.cspSource),t.images.add(e.cspSource),t.fonts.add(e.cspSource),t.media.add(e.cspSource)}}function Hu(){return e=>{e.images.add("data:"),e.images.add("blob:")}}function PF(e){return t=>{t.scripts.add(`'nonce-${e}'`)}}function Wu(){return e=>{e.styles.add("'unsafe-inline'"),e.fonts.add("data:"),e.workers.add("blob:")}}function LF(){return e=>{e.fonts.add("https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.47.0/min/"),e.styles.add("https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.47.0/min/"),e.scripts.add("https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.47.0/min/"),e.scripts.add("'unsafe-inline'")}}function UF(e){if(!d_())return()=>{};let t=e.replace(/^https?:/,"ws:");return r=>{["fonts","styles","scripts","workers","media","images","connects"].forEach(n=>{r[n].add(e).add(t)})}}var mn=class e extends X{constructor(r,n){super();this._deps=r;this._opts=n;this._panel=Ei.window.createWebviewPanel(e.viewType,"Augment",this._opts.viewOptions??Ei.ViewColumn.Active,{retainContextWhenHidden:!0,enableScripts:!0}),this._panel.iconPath={light:Ei.Uri.joinPath(this._deps.extensionUri,"media","panel-icon-light.svg"),dark:Ei.Uri.joinPath(this._deps.extensionUri,"media","panel-icon-dark.svg")},this._controller=this._updateOpts(this._opts),this._panel.onDidDispose(()=>{this.dispose()}),this.addDisposables(this._controller,this._panel,new Ei.Disposable(()=>{e.currentPanel=void 0})),this._setHTML()}static viewType="augmentDiffView";_logger=j("DiffViewWebviewPanel");static currentPanel;_panel;_controller;get diffViewController(){return this._controller}dispose=()=>{this._opts.onDispose?.(),this._controller.dispose(),this._panel.dispose(),e.currentPanel=void 0,super.dispose()};_updateOpts=r=>(this._opts=r,this._controller?.dispose(),this._controller=new NF(this._panel,{...this._deps,panel:this._panel,logger:this._logger},{...this._opts,onUserTriggeredClose:()=>this.dispose()},this._deps.workTimer),this._controller);get logger(){return this._logger}static get controller(){return this.currentPanel?.diffViewController}static get currentDocument(){return this.currentPanel?._opts.document}static get isVisible(){return this.currentPanel?._panel.visible}async _setHTML(){let r=this._panel.webview,n=Ei.Uri.joinPath(this._deps.extensionUri,"common-webviews");r.options={enableScripts:!0,localResourceRoots:[n]};let i=r.asWebviewUri(Ei.Uri.joinPath(n,"/")),s=Ou(Vu(r),qu(),Hu(),Wu(),LF()),o=await rn(YG.default.join(n.fsPath,"diff-view.html"));o=o.replace(/<head>/i,`<head>
            <base href="${i.toString()}" />
            <meta http-equiv="Content-Security-Policy" content="${s}">
        `),r.html=o}static startStream=(r,n,i)=>{this.currentPanel?.diffViewController.startStream(r,n,i)};static async instantApply(r,n,i){let s=n.document,o=s.originalCode,a=i,l=s.absPath,c="";for await(let v of ave(o??"",a))c=v;let u=await Ei.workspace.openTextDocument(l),f=new Ei.WorkspaceEdit;f.replace(u.uri,new Ei.Range(0,0,u.lineCount,0),c),await Ei.workspace.applyEdit(f);let p=await Ei.window.showTextDocument(u),g=dve(p,o??"",c,{scrollToFirstDecoration:!0,revealType:Ei.TextEditorRevealType.InCenterIfOutsideViewport});fve(g,{minDelayMs:3e4}),hve(p,g);let y=fm(o??"",c).map(v=>({repoRoot:s.filePath.rootPath,pathName:s.filePath.relPath,originalCode:v.removed?v.value:"",modifiedCode:v.added?v.value:""})),C={file:{repoRoot:s.filePath.rootPath,pathName:s.filePath.relPath,originalCode:o??"",modifiedCode:c},changes:y,resolveType:"accept",shouldApplyToAll:!0};return this.controller?.sessionReporter.reportResolution({type:"diff-view-resolve-chunk",data:C}),c}static createOrShow(r,n){if(n.document.isEmptyDocument)return;e.currentPanel?e.currentPanel._updateOpts(n):e.currentPanel=new e(r,n);let i=e.currentPanel,s=n.document.filePath,o=YG.default.basename(s.absPath);i._panel.title=`Augment Diff - ${o}`,i._panel.reveal()}};var OF=class{constructor(t,r,n,i,s,o,a){this._extensionUri=t;this._workspaceManager=r;this._apiServer=n;this._keybindingWatcher=i;this._fuzzyFsSearcher=s;this._fuzzySymbolSearcher=o;this._workTimer=a}showDiffView(t,r,n,i){let s=mn.isVisible??!1;if(i.retainFocus&&!s)return Promise.resolve();let o={editable:!1,disableResolution:!0,document:new pn(new qe(t.rootPath,t.relPath),r,n,{}),viewOptions:{preserveFocus:!0,viewColumn:mve.ViewColumn.Active}};return this._createOrShowDiffView(o),Promise.resolve()}_createOrShowDiffView(t){mn.createOrShow({extensionUri:this._extensionUri,workspaceManager:this._workspaceManager,apiServer:this._apiServer,keybindingWatcher:this._keybindingWatcher,fuzzyFsSearcher:this._fuzzyFsSearcher,fuzzySymbolSearcher:this._fuzzySymbolSearcher,workTimer:this._workTimer},t)}};var f_=class{constructor(t){this._featureFlagManager=t}get flags(){return{enableAgentMode:wr(jk()===0?this._featureFlagManager.currentFlags.vscodeAgentModeMinVersion??"":this._featureFlagManager.currentFlags.vscodeAgentModeMinStableVersion??""),enableChatWithTools:wr(this._featureFlagManager.currentFlags.vscodeChatWithToolsMinVersion??""),agentEditTool:this._featureFlagManager.currentFlags.vscodeAgentEditTool??"",memoriesParams:this._featureFlagManager.currentFlags.memoriesParams??{}}}};var Oa=V(require("vscode"));var qF=class{constructor(t){this._workspaceManager=t}getCwd(){return Promise.resolve(rf(this._workspaceManager))}async readFile(t){await this._workspaceManager.awaitInitialFoldersEnumerated();let r=await qy(t,this._workspaceManager),n=Fu(t,this._workspaceManager);return{contents:r,filepath:n}}async writeFile(t,r){let n=await opt(t,r);if(!n||n.getText()===r)return;let i=new Oa.WorkspaceEdit;i.replace(n.uri,new Oa.Range(0,0,n.lineCount,0),r),await Oa.workspace.applyEdit(i),await n.save()}async deleteFile(t){if(dn(t.absPath))try{let r=Oa.Uri.file(t.absPath);await Oa.workspace.fs.delete(r)}catch(r){console.error(`Failed to delete file ${t.absPath}:`,r)}}onFileDeleted(t){return this._workspaceManager.onFileDeleted(t)}onFileDidMove(t){return this._workspaceManager.onFileDidMove(t)}};async function opt(e,t){try{let r;if(zCe(e))r=bF(e);else if(dn(e.absPath))r=await Oa.workspace.openTextDocument(e.absPath);else{let n=Oa.Uri.file(e.absPath);await Oa.workspace.fs.writeFile(n,Buffer.from(t??"")),r=await Oa.workspace.openTextDocument(n)}if(r===void 0)throw new Error(`Failed to open document ${e.absPath}`);return r}catch{return}}var VF=class{constructor(t){this._extensionContext=t;this.migrateKeys(eh.hasEverUsedAgent,this.getKey(Og.agent,eh.hasEverUsedAgent))}async getValue(t,r,n){if(n!==Hf.global)throw new Error(`Scope ${String(n)} is not supported`);return await this._extensionContext.globalState.get(this.getKey(t,r))}async setValue(t,r,n,i){if(i!==Hf.global)throw new Error(`Scope ${String(i)} is not supported`);await this._extensionContext.globalState.update(this.getKey(t,r),n)}getKey(t,r){return["sidecar",t,r].join(".")}async migrateKeys(t,r){let n=await this._extensionContext.globalState.get(t);n!==void 0&&(await this._extensionContext.globalState.update(r,n),await this._extensionContext.globalState.update(t,void 0))}};var HF=class{constructor(t,r){this._apiServer=t;this._workspaceManager=r}async chatStream(t,r,n,i,s,o,a){return await this._apiServer.chatStream(r,t,n,{checkpointId:void 0,addedBlobs:[],deletedBlobs:[]},[],[],a??void 0,{workingDirectory:[],commits:[]},[],void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,i,s,o,void 0,void 0)}agentCodebaseRetrieval(t,r,n,i,s){return this._apiServer.agentCodebaseRetrieval(t,r,this._workspaceManager.getContext().blobs,n,i,s)}logToolUseRequestEvent(t){return this._apiServer.logToolUseRequestEvent(t)}logAgentRequestEvent(t){return this._apiServer.logAgentRequestEvent(t)}logAgentSessionEvent(t){return this._apiServer.logAgentSessionEvent(t)}checkToolSafety(t,r){return this._apiServer.checkToolSafety(t,r)}};var PM=V(require("vscode"));var lg=V(require("vscode"));var Cve=require("child_process"),vve=require("util");var yve=j("CommandUtils"),apt=(0,vve.promisify)(Cve.exec),lpt=5e3;async function _o(e,t={}){try{let{stdout:r,stderr:n}=await apt(e,{timeout:lpt,...t});return n&&yve.debug("stderr:"+n?.toString()),r?.toString()}catch(r){yve.debug(`exec error [${r.code}] [${r.signal}] [${r.message}] [${r.stackTrace}]`)}}var Eve=V(require("vscode")),oC=class{constructor(){}get execOptions(){let t=Eve.workspace.workspaceFolders?.[0];if(!t)throw new Error("No workspace folder found");return{cwd:t.uri.fsPath}}register(t){t.registerHandler("get-git-branches-request",this.handleGetGitBranchesRequest.bind(this)),t.registerHandler("get-workspace-diff-request",this.handleGetWorkspaceDiffRequest.bind(this)),t.registerHandler("get-remote-url-request",this.handleGetRemoteUrlRequest.bind(this)),t.registerHandler("git-fetch-request",this.handleGitFetchRequest.bind(this)),t.registerHandler("is-git-repository-request",this.handleIsGitRepositoryRequest.bind(this))}async handleGetGitBranchesRequest(t){try{let{prefix:r=""}=t.data,{execOptions:n}=this,i=[],s=(await _o("git branch --show-current",n))?.trim(),o=!!await _o("git branch -r | grep $(git branch --show-current)",n),a=(await _o("git symbolic-ref --short refs/remotes/origin/HEAD",n))?.trim(),u=(await _o("git branch --list --remote | sed 's/^[ *]*//'",n))?.split(`
`).filter(Boolean)?.map(f=>{if(!(f===s||f===a)&&f.includes(r))return f}).filter(Boolean);return s&&u?.unshift(s),a&&u?.unshift(a),u?.forEach(f=>{i.push({name:f.trim(),isRemote:f===s?o:!0,isCurrentBranch:f===s,isDefault:f===a})}),{type:"get-git-branches-response",data:{branches:i}}}catch(r){return console.error("Failed to get git branches:",r),{type:"get-git-branches-response",data:{branches:[]}}}}async handleGetWorkspaceDiffRequest(t){try{let{branchName:r}=t.data,n=await _o(`git diff origin/${r} || true`,this.execOptions)||"",i=await _o("git ls-files --others --exclude-standard",this.execOptions)||"";for(let s of i.trimEnd().split(`
`)||[])n+=await _o(`git diff --no-index /dev/null ${s} || true`,this.execOptions)||"";return{type:"get-workspace-diff-response",data:{diff:n}}}catch(r){return console.error("Failed to get workspace diff:",r),{type:"get-workspace-diff-response",data:{diff:""}}}}async handleGetRemoteUrlRequest(t){let{execOptions:r}=this;try{let n=(await _o("git remote get-url origin",r))?.trim();if(!n)throw new Error("Failed to get remote url, no remote found");if(!!n?.startsWith("https://"))return{type:"get-remote-url-response",data:{remoteUrl:n}};{let s=n.replace("ssh://","").replace("git@","https://").replace(".com:",".com/").replace(".git","");return{type:"get-remote-url-response",data:{remoteUrl:s}}}}catch(n){return console.error("Failed to get remote url:",n),{type:"get-remote-url-response",data:{remoteUrl:""}}}}async handleGitFetchRequest(t){try{return await _o("git fetch",this.execOptions),{type:"git-fetch-response"}}catch(r){return console.error("Failed to fetch remote branch:",r),{type:"git-fetch-response"}}}async handleIsGitRepositoryRequest(t){try{let r=!!await _o("git rev-parse --is-inside-work-tree 2>/dev/null",this.execOptions);return console.log("isGitRepository: ",r),{type:"is-git-repository-response",data:{isGitRepository:r}}}catch(r){return console.error("Failed to check if is git repository:",r),{type:"is-git-repository-response",data:{isGitRepository:!1}}}}};var bve=async(e,t)=>{let r=e.map(l=>{let c=cpt(l.old_path,l.new_path,l.old_contents||"",l.new_contents||"");return{path:l.new_path||l.old_path,changes:c}}),n=Object.values(r).map(l=>({path:l.path,changes:l.changes.map(c=>({id:c.id,path:c.path,diff:c.diff}))})),i=`You are a helpful software engineer. You are given a diff of a set of files. Your job is to walk a fellow developer through the changes in the diff.

You need to storytell through the updates, splitting it into two levels of semantic chunks of changes. You should respond with just JSON in this format:
{
    title: string; // these are top-level categories, like "Clean up the Footer" or "New API routes"
    description: string; // use Markdown. eg. put variable names in backticks, strings in quotes in backticks (eg. \`"String"\`)
    sections: { // Keep single files in a single section
        title: string; // Aim for 1 sentence with 5 - 20 words. Use sentence case and don't use generic words like "Update". Be as descriptive as possible, like a good commit message. eg. "Increased heading spacing in footer"
        type: "fix" | "feature" | "refactor" | "documentation" | "style" | "test" | "chore" | "revert" | "other";
        warning?: string; // look for anything that might be important for the user to know. eg. "This implementation isn't complete"
        changeIds: string[]; // Group related changes into a single section. Always combine all changes with the same file path into a single section
        descriptions: { // annotate the change with one or multiple descriptions of what the code change does
            text: string; // use Markdown. eg. put variable names in backticks, strings in quotes in backticks (eg. \`"String"\`). Use \u2192 to describe value changes
            range: {
                start: number; // line number, 0-indexed
                end: number; // line number, 0-indexed
            }
        }[];
    }[]
}[]

Here's an example set of changes:

[{
    "path": "src/global.css",
    "changes": [{
    "id": "1",
    "path": "src/global.css",
    "diff": "body {
  font-family: sans-serif;
- background-color: #fff;
+ background-color: #000;
}"
    }
}]

You would respond:

[{
  "title": "Style tweaks",
  "description": "Global style changes across the app",
  "sections": [{
        "title": "Invert background color",
        "descriptions": [{
            "line": 2,
            "text": "Change the background color from white \u2192 black"
        }],
        "changeIds": ["1"]
    }]
}]


The changes are:

${JSON.stringify(n,null,2)}

Start your response with [{`,s=await t(i);return JSON.parse(s).map(l=>({title:l.title,description:l.description,sections:l.sections.map(c=>{let u=c.changeIds.map(f=>{let p=r.find(A=>A.changes.find(y=>y.id===f));return p&&p.changes.find(A=>A.id===f)||void 0}).filter(f=>f!==void 0);return{title:c.title,descriptions:c.descriptions,type:c.type,warning:c.warning,changes:u}})}))};function cpt(e,t,r,n){let i=PI(e,t,r,n,"","",{context:3});return[{id:Math.random().toString(36).substring(2,15),path:e||t,diff:i,originalCode:r,modifiedCode:n}]}var upt=Object.freeze({git:{name:".git",type:"Directory"}});async function h_(e){for(let[t,r]of Object.entries(upt)){let n=await Pk(e,r.name,r.type);if(n!==void 0)return{root:n,toolName:t}}}var YF=V(require("fs"));function dpt(e,t){let r={};for(let s=0;s<t.length;s++){let o=t[s];r[o]?r[o].push(s):r[o]=[s]}let i=[{buffer1index:-1,buffer2index:-1,chain:null}];for(let s=0;s<e.length;s++){let o=e[s],a=r[o]||[],l=0,c=i[0];for(let u=0;u<a.length;u++){let f=a[u],p;for(p=l;p<i.length&&!(i[p].buffer2index<f&&(p===i.length-1||i[p+1].buffer2index>f));p++);if(p<i.length){let g={buffer1index:s,buffer2index:f,chain:i[p]};if(l===i.length?i.push(c):i[l]=c,l=p+1,c=g,l===i.length)break}}i[l]=c}return i[i.length-1]}function xve(e,t){let r=dpt(e,t),n=[],i=e.length,s=t.length;for(let o=r;o!==null;o=o.chain){let a=i-o.buffer1index-1,l=s-o.buffer2index-1;i=o.buffer1index,s=o.buffer2index,(a||l)&&n.push({buffer1:[i+1,a],buffer1Content:e.slice(i+1,i+1+a),buffer2:[s+1,l],buffer2Content:t.slice(s+1,s+1+l)})}return n.reverse(),n}function fpt(e,t,r){let n=[];function i(l,c){n.push({ab:c,oStart:l.buffer1[0],oLength:l.buffer1[1],abStart:l.buffer2[0],abLength:l.buffer2[1]})}xve(t,e).forEach(l=>i(l,"a")),xve(t,r).forEach(l=>i(l,"b")),n.sort((l,c)=>l.oStart-c.oStart);let s=[],o=0;function a(l){l>o&&(s.push({stable:!0,buffer:"o",bufferStart:o,bufferLength:l-o,bufferContent:t.slice(o,l)}),o=l)}for(;n.length;){let l=n.shift(),c=l.oStart,u=l.oStart+l.oLength,f=[l];for(a(c);n.length;){let p=n[0],g=p.oStart;if(g>u)break;u=Math.max(u,g+p.oLength),f.push(n.shift())}if(f.length===1){if(l.abLength>0){let p=l.ab==="a"?e:r;s.push({stable:!0,buffer:l.ab,bufferStart:l.abStart,bufferLength:l.abLength,bufferContent:p.slice(l.abStart,l.abStart+l.abLength)})}}else{let p={a:[e.length,-1,t.length,-1],b:[r.length,-1,t.length,-1]};for(;f.length;){l=f.shift();let b=l.oStart,w=b+l.oLength,B=l.abStart,F=B+l.abLength,Q=p[l.ab];Q[0]=Math.min(B,Q[0]),Q[1]=Math.max(F,Q[1]),Q[2]=Math.min(b,Q[2]),Q[3]=Math.max(w,Q[3])}let g=p.a[0]+(c-p.a[2]),A=p.a[1]+(u-p.a[3]),y=p.b[0]+(c-p.b[2]),C=p.b[1]+(u-p.b[3]),v={stable:!1,aStart:g,aLength:A-g,aContent:e.slice(g,A),oStart:c,oLength:u-c,oContent:t.slice(c,u),bStart:y,bLength:C-y,bContent:r.slice(y,C)};s.push(v)}o=u}return a(t.length),s}function hpt(e,t,r,n){n=Object.assign({excludeFalseConflicts:!0,stringSeparator:/\s+/},n),typeof e=="string"&&(e=e.split(n.stringSeparator)),typeof t=="string"&&(t=t.split(n.stringSeparator)),typeof r=="string"&&(r=r.split(n.stringSeparator));let s=[],o=fpt(e,t,r),a=[];function l(){a.length&&s.push({ok:a}),a=[]}function c(u,f){if(u.length!==f.length)return!1;for(let p=0;p<u.length;p++)if(u[p]!==f[p])return!1;return!0}return o.forEach(u=>{u.stable?a.push(...u.bufferContent):n.excludeFalseConflicts&&c(u.aContent,u.bContent)?a.push(...u.aContent):(l(),s.push({conflict:{a:u.aContent,aIndex:u.aStart,o:u.oContent,oIndex:u.oStart,b:u.bContent,bIndex:u.bStart}}))}),l(),s}function _ve(e,t,r,n){n=Object.assign({excludeFalseConflicts:!0,stringSeparator:/\s+/,label:{}},n);let s="<<<<<<<"+(n.label.a?` ${n.label.a}`:""),o="=======",a=">>>>>>>"+(n.label.b?` ${n.label.b}`:""),l=hpt(e,t,r,n),c=!1,u=[];return l.forEach(f=>{f.ok?u=u.concat(f.ok):f.conflict&&(c=!0,u=u.concat([s],f.conflict.a,[o],f.conflict.b,[a]))}),{conflict:c,result:u}}var Ive=V(require("os")),KF=V(require("path")),$u=V(require("vscode")),rg=require("vscode");var wve=V(require("path")),WF=V(require("vscode"));var ra=class extends X{constructor(r,n){super();this.filename=r;this._webview=n}_logger=j("PanelWebviewBase");generateCSPPolicy(r){return Ou(Vu(this._webview),qu(),Ave(),Hu(),Wu(),r?UF(r):()=>{})}async loadHTML(r){if(d_())try{let n=await pve(r);this._logger.debug("Loading '%s' from dev server on '%s'",this.filename,n),this._webview.options={enableScripts:!0,localResourceRoots:[WF.Uri.parse(n)]},this._webview.html=await gve(n,this.filename,this.generateCSPPolicy(n));return}catch(n){this._logger.error(`Failed to load '%s' from dev server: ${String(n)} `,this.filename),this._webview.html=(await this._loadFile(r,"../../common/webviews/index.html")).replace("></code>",`>${String(n)}</code>`);return}this._webview.html=await this._loadFile(r,this.filename)}async _loadFile(r,n){let i=WF.Uri.joinPath(r,"common-webviews"),s=this._webview.asWebviewUri(WF.Uri.joinPath(i,"/"));this._webview.options={enableScripts:!0,localResourceRoots:[i]};let o=await rn(wve.join(i.fsPath,n));try{return $G(o,s.toString(),this.generateCSPPolicy())}catch(a){throw this._logger.error(`Failed to load ${n}: ${String(a)}`),a}}};var Gu=V(require("vscode"));var GF=class{constructor(t,r){this._webview=t;this._opts=r}register(t){t.registerHandler("remote-agent-diff-panel-loaded",this.handleDiffPanelLoadedMessage.bind(this))}handleDiffPanelLoadedMessage(t){return{type:"remote-agent-diff-panel-set-opts",data:this._opts}}updateOpts(t){this._opts=t,this._webview.postMessage({type:"remote-agent-diff-panel-set-opts",data:this._opts})}};var $F=class e extends ra{constructor(r,n){let i=Gu.window.createWebviewPanel("remote agent diff",e.title,Gu.ViewColumn.Active,{retainContextWhenHidden:!0,enableScripts:!0});super("remote-agent-diff.html",i.webview);this._deps=r;this._opts=n;this._panel=i;let{extensionUri:s}=this._deps;this._panel.iconPath={light:Gu.Uri.joinPath(s,"media","panel-icon-light.svg"),dark:Gu.Uri.joinPath(s,"media","panel-icon-dark.svg")},this._panel.onDidDispose(()=>{this.dispose()}),this.addDisposables(this._panel,new Gu.Disposable(()=>{e.currentPanel=void 0}));let o=ss(this._panel.webview,this._deps.workTimer);this.addDisposable(o),this._diffPanelMessenger=new GF(this._panel.webview,this._opts),this._diffPanelMessenger.register(o),this._remoteAgentsMessenger=new tg(this._deps.apiServer,this._deps.extensionUri,this._deps.workTimer),this._remoteAgentsMessenger.register(o),this.loadHTML(s)}static currentPanel;static title="Remote Agent Changes";_panel;_diffPanelMessenger;_remoteAgentsMessenger;updateOpts(r){this._opts=r,this._diffPanelMessenger.updateOpts(r)}static createOrShow(r,n,i,s){if(e.currentPanel){e.currentPanel._panel.reveal(Gu.ViewColumn.Active),e.currentPanel.updateOpts.call(e.currentPanel,s);return}e.currentPanel=new e({extensionUri:r,apiServer:n,workTimer:i},s)}};var tg=class{constructor(t,r,n){this._api=t;this._extensionUri=r;this._workTimer=n}register(t){t.registerHandler("remote-agent-manager-initialize",this.handlePanelLoadedMessage.bind(this)),t.registerHandler("create-remote-agent-request",this.handleCreateRemoteAgentMessage.bind(this)),t.registerHandler("delete-remote-agent-request",this.handleDeleteRemoteAgentMessage.bind(this)),t.registerHandler("get-remote-agent-chat-history-request",this.handleGetRemoteAgentChatHistoryMessage.bind(this)),t.registerHandler("remote-agent-chat-request",this.handleRemoteAgentChatRequestMessage.bind(this)),t.registerHandler("remote-agent-interrupt-request",this.handleRemoteAgentInterruptRequestMessage.bind(this)),t.registerHandler("get-remote-agent-overviews-request",this.handleGetRemoteAgentOverviewsMessage.bind(this)),t.registerHandler("set-remote-agent-id",this.handleSetRemoteAgentIdMessage.bind(this)),t.registerHandler("get-diff-explanation-request",this.handleDiffExplanationRequestMessage.bind(this)),t.registerHandler("apply-changes-request",this.handleDiffApplyMessage.bind(this)),t.registerHandler("get-setup-script-request",this.handleGetSetupScriptMessage.bind(this)),t.registerHandler("show-remote-agent-diff-panel",this.handleShowRemoteAgentDiffPanelMessage.bind(this))}handleSetRemoteAgentIdMessage(t){let{agentId:r}=t.data;return{type:"set-remote-agent-id",data:{agentId:r}}}async streamLlmCompletion(t){let r=await Ap(t,this._api.createRequestId(),[],[],[],cn.agent,"gemini-2-flash-001-simple");for await(let{nodes:n=[]}of r){let i=n.find(s=>s.type===nc.RAW_RESPONSE)?.content;if(i){let s=i.trim();return s=s.replace(/^```|```$/g,""),s=s.replace(/^json/g,""),s}}return""}async handleDiffExplanationRequestMessage(t){let{changedFiles:r}=t.data,n=this.streamLlmCompletion.bind(this);try{let i=await bve(r,n);return{type:"get-diff-explanation-response",data:{explanation:i}}}catch(i){return console.error("Failed to explain diff:",i),{type:"get-diff-explanation-response",data:{explanation:[]}}}}async handleDiffApplyMessage(t){let{path:r,originalCode:n,newCode:i}=t.data;try{if(!r?.trim())throw new Error("File path cannot be empty");if(typeof i!="string")throw new Error("New code must be a string");let s=this.resolveFilePath(r),o=$u.Uri.file(s),a=new $u.WorkspaceEdit,l=new $u.Range(0,0,0,0),c="",u="",f=!1;try{await rg.workspace.fs.stat(o),f=!0,u=i;let g=await rg.workspace.openTextDocument(o);l=new $u.Range(0,0,g.lineCount-1,g.lineAt(g.lineCount-1).text.length),c=(await rg.workspace.openTextDocument(o))?.getText()||"";let A=(w="")=>w.split(/(?<=\r\n|\n|\r)/g),y=A(c),C=A(n),v=A(i),b=_ve(y,C,v,{excludeFalseConflicts:!1});b.conflict||(u=b.result.join(""))}catch{f=!1,u=i}if(f||a.createFile(o,{overwrite:!0}),a.replace(o,l,u),!await $u.workspace.applyEdit(a))throw new Error("Failed to apply workspace edit");return{type:"apply-changes-response",data:{success:!0}}}catch(s){let o=s instanceof Error?s.message:String(s);return{type:"apply-changes-response",data:{success:!1,error:o}}}}resolveFilePath(t){let r=rg.workspace.workspaceFolders?.[0];if(!r)throw new Error("No workspace folder available");return $u.Uri.joinPath(r.uri,t).fsPath}handlePanelLoadedMessage(t){return{type:"remote-agent-manager-initialize",data:{}}}async handleCreateRemoteAgentMessage(t){try{let{prompt:r,workspaceSetup:n,setupScript:i}=t.data,s={request_nodes:[{id:1,type:al.TEXT,text_node:{content:r}}]},o=await this._api.createRemoteAgent(n,s,void 0,i);return console.log("Created remote agent:",o),{type:"create-remote-agent-response",data:{success:!0,agentId:o.remote_agent_id}}}catch(r){return console.error("Failed to create remote agent:",r),{type:"create-remote-agent-response",data:{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}}async handleDeleteRemoteAgentMessage(t){try{let{agentId:r}=t.data;return await this._api.deleteRemoteAgent(r),{type:"remote-agent-delete-response",data:{success:!0}}}catch(r){return console.error("Failed to delete remote agent:",r),{type:"remote-agent-delete-response",data:{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}}async handleGetRemoteAgentOverviewsMessage(t){try{let r=await this._api.listRemoteAgents();return{type:"get-remote-agent-overviews-response",data:{overviews:r.remote_agents}}}catch(r){return console.error("Failed to get remote agent overviews:",r),{type:"get-remote-agent-overviews-response",data:{overviews:[]}}}}async handleGetRemoteAgentChatHistoryMessage(t){try{let{agentId:r}=t.data,n=await this._api.getRemoteAgentChatHistory(r);return{type:"get-remote-agent-chat-history-response",data:{chatHistory:n.chat_history}}}catch(r){return console.error("Failed to get remote agent chat history:",r),{type:"get-remote-agent-chat-history-response",data:{chatHistory:[]}}}}async handleRemoteAgentChatRequestMessage(t){try{let{agentId:r,requestDetails:n}=t.data,i=await this._api.remoteAgentChat(r,n);return{type:"remote-agent-chat-response",data:i.nodes}}catch(r){return console.error("Failed to get remote agent chat response:",r),{type:"remote-agent-chat-response",data:[]}}}async handleRemoteAgentInterruptRequestMessage(t){console.log("Interrupting remote agent:",t.data.agentId);let{agentId:r}=t.data;try{let n=await this._api.interruptRemoteAgent(r);return{type:"remote-agent-interrupt-response",data:n}}catch(n){return console.error("Failed to interrupt remote agent:",n),{type:"remote-agent-interrupt-response",data:4}}}async handleGetSetupScriptMessage(t){let r=".augment",n="setup.sh";try{let i=Ive.homedir(),s=KF.join(i,r,n);if(YF.existsSync(s)){let o=await rn(s);return{type:"get-setup-script-response",data:{content:o}}}if(console.log("No home setup script found at:",s),rg.workspace.workspaceFolders&&rg.workspace.workspaceFolders.length>0){let o=rg.workspace.workspaceFolders[0].uri.fsPath,a,l=await h_(o);if(l&&(a=l.root.fsPath,console.log("Found git root using findVCS:",a)),!a)try{let u=await _o("git rev-parse --show-toplevel",{cwd:o});u&&(a=u.trim(),console.log("Found git root using git command:",a))}catch(u){console.log("Failed to get git root:",u)}if(a){let u=KF.join(a,r,n);if(console.log("Checking for git root setup script at:",u),YF.existsSync(u)){console.log("Found git root setup script at:",u);let f=await rn(u);return{type:"get-setup-script-response",data:{content:f}}}}let c=KF.join(o,r,n);if(console.log("Checking for workspace setup script at:",c),YF.existsSync(c)){console.log("Found workspace setup script at:",c);let u=await rn(c);return{type:"get-setup-script-response",data:{content:u}}}}return console.log("No setup script found in any location"),{type:"get-setup-script-response",data:{content:null}}}catch(i){return console.error("Failed to get setup script:",i),{type:"get-setup-script-response",data:{content:null,error:i instanceof Error?i.message:String(i)}}}}handleShowRemoteAgentDiffPanelMessage(t){let r=t.data;return $F.createOrShow(this._extensionUri,this._api,this._workTimer,r),t}};var zF=class extends Error{constructor(){super("Invalid source folder uri")}},JF=class extends Error{constructor(t){super(`cannot access source folder: ${t}`)}},jF=class extends Error{constructor(){super("source folder is not a directory")}},ZF=class extends Error{constructor(){super("source folder already exists")}},XF=class extends Error{constructor(){super("source folder is home directory")}},eM=class extends Error{constructor(){super("source folder is not an external source folder")}},tM=class extends Error{constructor(){super("source folder does not exist in workspace")}};var rM=class extends Error{constructor(){super("source folder enumeration is not complete")}},aC=(s=>(s[s.vscodeWorkspaceFolder=0]="vscodeWorkspaceFolder",s[s.externalFolder=1]="externalFolder",s[s.nestedWorkspaceFolder=2]="nestedWorkspaceFolder",s[s.nestedExternalFolder=3]="nestedExternalFolder",s[s.untrackedFolder=4]="untrackedFolder",s))(aC||{});var kxe=require("child_process"),Fxe=V(um()),og=V(dm()),Mxe=V(require("path")),qt=V(require("vscode"));var nM=V(require("vscode"));async function ppt(e,t,r){let i=(await rn(e)).split(`
`),s=t-1,o=r-1,a=i.slice(0,s).reduce((c,u)=>c+u.length+1,0),l=i.slice(0,o+1).reduce((c,u)=>c+u.length+1,0)-1;return{charStart:a,charEnd:l}}async function Sve(e,t){let r=nM.workspace.workspaceFolders?.[0];if(!r)throw new Error("No workspace folder found");let n=nM.Uri.joinPath(r.uri,t.path).fsPath,i=e.resolvePathName(n);if(!i)throw new Error(`Could not resolve path: ${t.path}`);let{charStart:s,charEnd:o}=await ppt(i.absPath,t.startLine,t.endLine);return{requestId:Mh(),mode:"BACKGROUND",scope:"FILE",result:{suggestionId:Mh(),path:t.path,blobName:t.oldBlobName??"",charStart:s,charEnd:o,existingCode:t.oldText,suggestedCode:t.text,changeDescription:t.description,diffSpans:[],editingScore:1,localizationScore:1,editingScoreThreshold:1},qualifiedPathName:i,lineRange:{start:t.startLine-1,stop:t.endLine-1},uriScheme:"file",occurredAt:new Date,state:"fresh",changeType:"modification"}}var KG="augment://sign-in",Bve=`Augment is only available to signed in users. [Please sign in](${KG}).`,Dve="Augment works best when it has access to your entire codebase. Please grant permission to sync your workspace.",g_=class{constructor(t,r){this.message=t;this.response=r;this.occuredAt=new Date}occuredAt};var iM=class extends X{constructor(r){super();this._getter=r;this._cache=new Yy({max:1e3,ttl:1e3*60*60,fetchMethod:this._fetchSmartPasteResults}),this.addDisposable({dispose:()=>{this._cache.clear()}})}_cache;_fetchSmartPasteResults=async(r,n,{context:i})=>{let s=await this._getter(i);return Promise.resolve({generator:new cA(s.generator),requestId:s.requestId})};get=async(r,n,i,s)=>{let o=Apt(r,n,i),a=this._cache.get(o);(!a||a.generator.hasErrored)&&this._cache.delete(o);let l=await this._cache.fetch(o,{context:s,forceRefresh:!1});if(l)return{generator:l.generator.copy(),requestId:l.requestId}};getDirect=async r=>{let n=await Promise.resolve(this._getter(r));if(!n)return;let i=new cA(n.generator);if(i)return{generator:i.copy(),requestId:n.requestId}}};function Apt(e,t,r){return`${e}--${t}--${r}`}var Tve=V(require("vscode"));var $i=class extends ct{static commandID="vscode-augment.focusAugmentPanel";type="public";constructor(){super()}async run(){await Tve.commands.executeCommand("augment-chat.focus")}};var Js=V(require("vscode"));var mpt="GitHub.copilot",ypt="Codeium.codeium";var gA=class e extends X{constructor(r,n){super();this._config=r;this._actionsModel=n;this.addDisposable(Js.workspace.onDidChangeConfiguration(i=>{(i.affectsConfiguration("github.copilot")||i.affectsConfiguration("codeium"))&&this.checkAndUpdateState()})),this.addDisposable(Js.extensions.onDidChange(()=>{this.checkAndUpdateState()}))}logger=j("ConflictingExtensions");checkAndUpdateState(){if(this._config.config.conflictingCodingAssistantCheck===!1){this._actionsModel.setSystemStateStatus("disabledGithubCopilot","complete"),this._actionsModel.setSystemStateStatus("disabledCodeium","complete");return}let n=[{check:()=>e._checkGitHubCopilot(),stateName:"disabledGithubCopilot"},{check:()=>e._checkCodeium(),stateName:"disabledCodeium"}];for(let{check:i,stateName:s}of n){let a=i().isConflicting?"incomplete":"complete";this._actionsModel.setSystemStateStatus(s,a)}}static _checkGitHubCopilot(){if(!Js.extensions.getExtension(mpt))return{extension:"copilot",isConflicting:!1};let n=Js.workspace.getConfiguration("github.copilot");return{extension:"copilot",isConflicting:n.enable&&n.enable["*"]||!1}}static async disableGitHubCopilot(){try{let r=Js.workspace.getConfiguration("github.copilot");await r.update("enable",{"*":!1},this.targetForConfig(r.inspect("enable")))}catch{Js.commands.executeCommand("workbench.extensions.search","@enabled GitHub Copilot")}}static _checkCodeium(){if(!Js.extensions.getExtension(ypt))return{extension:"codeium",isConflicting:!1};let n=Js.workspace.getConfiguration("codeium");return{extension:"codeium",isConflicting:n.enableConfig&&n.enableConfig["*"]||!1}}static async disableCodeium(){try{let r=Js.workspace.getConfiguration("codeium");await r.update("enableConfig",{"*":!1},this.targetForConfig(r.inspect("enableConfig")))}catch{Js.commands.executeCommand("workbench.extensions.search","@enabled Codeium")}}static packageName(r,n){return r.packageJSON.displayName||r.packageJSON.name||n}static targetForConfig(r){return r&&r.workspaceValue!==void 0?Js.ConfigurationTarget.Workspace:Js.ConfigurationTarget.Global}};var IM=V(Lve()),bM=V(Hve()),pbe=require("child_process"),Zbe=V(i4()),cC=V(i4()),_xe=require("events"),_M=Object.defineProperty,oAt=Object.defineProperties,aAt=Object.getOwnPropertyDescriptor,lAt=Object.getOwnPropertyDescriptors,_4=Object.getOwnPropertyNames,Wve=Object.getOwnPropertySymbols,xEe=Object.prototype.hasOwnProperty,cAt=Object.prototype.propertyIsEnumerable,Gve=(e,t,r)=>t in e?_M(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ll=(e,t)=>{for(var r in t||(t={}))xEe.call(t,r)&&Gve(e,r,t[r]);if(Wve)for(var r of Wve(t))cAt.call(t,r)&&Gve(e,r,t[r]);return e},m_=(e,t)=>oAt(e,lAt(t)),Be=(e,t)=>function(){return e&&(t=(0,e[_4(e)[0]])(e=0)),t},uAt=(e,t)=>function(){return t||(0,e[_4(e)[0]])((t={exports:{}}).exports,t),t.exports},xi=(e,t)=>{for(var r in t)_M(e,r,{get:t[r],enumerable:!0})},dAt=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of _4(t))!xEe.call(e,i)&&i!==r&&_M(e,i,{get:()=>t[i],enumerable:!(n=aAt(t,i))||n.enumerable});return e},fi=e=>dAt(_M({},"__esModule",{value:!0}),e),A_=(e,t,r)=>new Promise((n,i)=>{var s=l=>{try{a(r.next(l))}catch(c){i(c)}},o=l=>{try{a(r.throw(l))}catch(c){i(c)}},a=l=>l.done?n(l.value):Promise.resolve(l.value).then(s,o);a((r=r.apply(e,t)).next())});function fAt(...e){let t=new String(e);return wM.set(t,e),t}function vM(e){return e instanceof String&&wM.has(e)}function $ve(e){return wM.get(e)||[]}var wM,E_=Be({"src/lib/args/pathspec.ts"(){"use strict";wM=new WeakMap}}),ff,ig=Be({"src/lib/errors/git-error.ts"(){"use strict";ff=class extends Error{constructor(e,t){super(t),this.task=e,Object.setPrototypeOf(this,new.target.prototype)}}}}),b_,dC=Be({"src/lib/errors/git-response-error.ts"(){"use strict";ig(),b_=class extends ff{constructor(e,t){super(void 0,t||String(e)),this.git=e}}}}),_Ee,wEe=Be({"src/lib/errors/task-configuration-error.ts"(){"use strict";ig(),_Ee=class extends ff{constructor(e){super(void 0,e)}}}});function IEe(e){return typeof e=="function"?e:yA}function SEe(e){return typeof e=="function"&&e!==yA}function BEe(e,t){let r=e.indexOf(t);return r<=0?[e,""]:[e.substr(0,r),e.substr(r+1)]}function DEe(e,t=0){return TEe(e)&&e.length>t?e[t]:void 0}function mA(e,t=0){if(TEe(e)&&e.length>t)return e[e.length-1-t]}function TEe(e){return!!(e&&typeof e.length=="number")}function x_(e="",t=!0,r=`
`){return e.split(r).reduce((n,i)=>{let s=t?i.trim():i;return s&&n.push(s),n},[])}function w4(e,t){return x_(e,!0).map(r=>t(r))}function I4(e){return(0,IM.exists)(e,IM.FOLDER)}function Pr(e,t){return Array.isArray(e)?e.includes(t)||e.push(t):e.add(t),t}function REe(e,t){return Array.isArray(e)&&!e.includes(t)&&e.push(t),e}function SM(e,t){if(Array.isArray(e)){let r=e.indexOf(t);r>=0&&e.splice(r,1)}else e.delete(t);return t}function Yu(e){return Array.isArray(e)?e:[e]}function kEe(e){return e.replace(/[\s-]+(.)/g,(t,r)=>r.toUpperCase())}function FEe(e){return Yu(e).map(String)}function xn(e,t=0){if(e==null)return t;let r=parseInt(e,10);return isNaN(r)?t:r}function y_(e,t){let r=[];for(let n=0,i=e.length;n<i;n++)r.push(t,e[n]);return r}function C_(e){return(Array.isArray(e)?Buffer.concat(e):e).toString("utf-8")}function MEe(e,t){return Object.assign({},...t.map(r=>r in e?{[r]:e[r]}:{}))}function d4(e=0){return new Promise(t=>setTimeout(t,e))}function f4(e){if(e!==!1)return e}var uC,yA,__,BM=Be({"src/lib/utils/util.ts"(){"use strict";uC="\0",yA=()=>{},__=Object.prototype.toString.call.bind(Object.prototype.toString)}});function Ku(e,t,r){return t(e)?e:arguments.length>2?r:void 0}function S4(e,t){let r=vM(e)?"string":typeof e;return/number|string|boolean/.test(r)&&(!t||!t.includes(r))}function B4(e){return!!e&&__(e)==="[object Object]"}function QEe(e){return typeof e=="function"}var w_,js,NEe,EM,D4,PEe=Be({"src/lib/utils/argument-filters.ts"(){"use strict";BM(),E_(),w_=e=>Array.isArray(e),js=e=>typeof e=="string",NEe=e=>Array.isArray(e)&&e.every(js),EM=e=>js(e)||Array.isArray(e)&&e.every(js),D4=e=>e==null||"number|boolean|function".includes(typeof e)?!1:Array.isArray(e)||typeof e=="string"||typeof e.length=="number"}}),h4,hAt=Be({"src/lib/utils/exit-codes.ts"(){"use strict";h4=(e=>(e[e.SUCCESS=0]="SUCCESS",e[e.ERROR=1]="ERROR",e[e.NOT_FOUND=-2]="NOT_FOUND",e[e.UNCLEAN=128]="UNCLEAN",e))(h4||{})}}),v_,gAt=Be({"src/lib/utils/git-output-streams.ts"(){"use strict";v_=class{constructor(e,t){this.stdOut=e,this.stdErr=t}asStrings(){return new v_(this.stdOut.toString("utf8"),this.stdErr.toString("utf8"))}}}}),Nt,ng,pAt=Be({"src/lib/utils/line-parser.ts"(){"use strict";Nt=class{constructor(e,t){this.matches=[],this.parse=(r,n)=>(this.resetMatches(),this._regExp.every((i,s)=>this.addMatch(i,s,r(s)))?this.useMatches(n,this.prepareMatches())!==!1:!1),this._regExp=Array.isArray(e)?e:[e],t&&(this.useMatches=t)}useMatches(e,t){throw new Error("LineParser:useMatches not implemented")}resetMatches(){this.matches.length=0}prepareMatches(){return this.matches}addMatch(e,t,r){let n=r&&e.exec(r);return n&&this.pushMatch(t,n),!!n}pushMatch(e,t){this.matches.push(...t.slice(1))}},ng=class extends Nt{addMatch(e,t,r){return/^remote:\s/.test(String(r))&&super.addMatch(e,t,r)}pushMatch(e,t){(e>0||t.length>1)&&super.pushMatch(e,t)}}}});function LEe(...e){let t=process.cwd(),r=Object.assign(Ll({baseDir:t},UEe),...e.filter(n=>typeof n=="object"&&n));return r.baseDir=r.baseDir||t,r.trimmed=r.trimmed===!0,r}var UEe,AAt=Be({"src/lib/utils/simple-git-options.ts"(){"use strict";UEe={binary:"git",maxConcurrentProcesses:5,config:[],trimmed:!1}}});function T4(e,t=[]){return B4(e)?Object.keys(e).reduce((r,n)=>{let i=e[n];return vM(i)?r.push(i):S4(i,["boolean"])?r.push(n+"="+i):r.push(n),r},t):t}function na(e,t=0,r=!1){let n=[];for(let i=0,s=t<0?e.length:t;i<s;i++)"string|number".includes(typeof e[i])&&n.push(String(e[i]));return T4(R4(e),n),r||n.push(...mAt(e)),n}function mAt(e){let t=typeof mA(e)=="function";return Ku(mA(e,t?1:0),w_,[])}function R4(e){let t=QEe(mA(e));return Ku(mA(e,t?1:0),B4)}function hi(e,t=!0){let r=IEe(mA(e));return t||SEe(r)?r:void 0}var yAt=Be({"src/lib/utils/task-options.ts"(){"use strict";PEe(),BM(),E_()}});function g4(e,t){return e(t.stdOut,t.stdErr)}function sa(e,t,r,n=!0){return Yu(r).forEach(i=>{for(let s=x_(i,n),o=0,a=s.length;o<a;o++){let l=(c=0)=>{if(!(o+c>=a))return s[o+c]};t.some(({parse:c})=>c(l,e))}}),e}var CAt=Be({"src/lib/utils/task-parser.ts"(){"use strict";BM()}}),OEe={};xi(OEe,{ExitCodes:()=>h4,GitOutputStreams:()=>v_,LineParser:()=>Nt,NOOP:()=>yA,NULL:()=>uC,RemoteLineParser:()=>ng,append:()=>Pr,appendTaskOptions:()=>T4,asArray:()=>Yu,asCamelCase:()=>kEe,asFunction:()=>IEe,asNumber:()=>xn,asStringArray:()=>FEe,bufferToString:()=>C_,callTaskParser:()=>g4,createInstanceConfig:()=>LEe,delay:()=>d4,filterArray:()=>w_,filterFunction:()=>QEe,filterHasLength:()=>D4,filterPlainObject:()=>B4,filterPrimitives:()=>S4,filterString:()=>js,filterStringArray:()=>NEe,filterStringOrStringArray:()=>EM,filterType:()=>Ku,first:()=>DEe,folderExists:()=>I4,forEachLineWithContent:()=>w4,getTrailingOptions:()=>na,including:()=>REe,isUserFunction:()=>SEe,last:()=>mA,objectToString:()=>__,orVoid:()=>f4,parseStringResponse:()=>sa,pick:()=>MEe,prefixedArray:()=>y_,remove:()=>SM,splitOn:()=>BEe,toLinesWithContent:()=>x_,trailingFunctionArgument:()=>hi,trailingOptionsArgument:()=>R4});var _t=Be({"src/lib/utils/index.ts"(){"use strict";PEe(),hAt(),gAt(),pAt(),AAt(),yAt(),CAt(),BM()}}),qEe={};xi(qEe,{CheckRepoActions:()=>p4,checkIsBareRepoTask:()=>HEe,checkIsRepoRootTask:()=>VEe,checkIsRepoTask:()=>vAt});function vAt(e){switch(e){case"bare":return HEe();case"root":return VEe()}return{commands:["rev-parse","--is-inside-work-tree"],format:"utf-8",onError:DM,parser:k4}}function VEe(){return{commands:["rev-parse","--git-dir"],format:"utf-8",onError:DM,parser(t){return/^\.(git)?$/.test(t.trim())}}}function HEe(){return{commands:["rev-parse","--is-bare-repository"],format:"utf-8",onError:DM,parser:k4}}function EAt(e){return/(Not a git repository|Kein Git-Repository)/i.test(String(e))}var p4,DM,k4,WEe=Be({"src/lib/tasks/check-is-repo.ts"(){"use strict";_t(),p4=(e=>(e.BARE="bare",e.IN_TREE="tree",e.IS_REPO_ROOT="root",e))(p4||{}),DM=({exitCode:e},t,r,n)=>{if(e===128&&EAt(t))return r(Buffer.from("false"));n(t)},k4=e=>e.trim()==="true"}});function bAt(e,t){let r=new GEe(e),n=e?YEe:$Ee;return x_(t).forEach(i=>{let s=i.replace(n,"");r.paths.push(s),(KEe.test(s)?r.folders:r.files).push(s)}),r}var GEe,$Ee,YEe,KEe,xAt=Be({"src/lib/responses/CleanSummary.ts"(){"use strict";_t(),GEe=class{constructor(e){this.dryRun=e,this.paths=[],this.files=[],this.folders=[]}},$Ee=/^[a-z]+\s*/i,YEe=/^[a-z]+\s+[a-z]+\s*/i,KEe=/\/$/}}),A4={};xi(A4,{EMPTY_COMMANDS:()=>TM,adhocExecTask:()=>zEe,configurationErrorTask:()=>ia,isBufferTask:()=>jEe,isEmptyTask:()=>ZEe,straightThroughBufferTask:()=>JEe,straightThroughStringTask:()=>wo});function zEe(e){return{commands:TM,format:"empty",parser:e}}function ia(e){return{commands:TM,format:"empty",parser(){throw typeof e=="string"?new _Ee(e):e}}}function wo(e,t=!1){return{commands:e,format:"utf-8",parser(r){return t?String(r).trim():r}}}function JEe(e){return{commands:e,format:"buffer",parser(t){return t}}}function jEe(e){return e.format==="buffer"}function ZEe(e){return e.format==="empty"||!e.commands.length}var TM,bi=Be({"src/lib/tasks/task.ts"(){"use strict";wEe(),TM=[]}}),XEe={};xi(XEe,{CONFIG_ERROR_INTERACTIVE_MODE:()=>F4,CONFIG_ERROR_MODE_REQUIRED:()=>M4,CONFIG_ERROR_UNKNOWN_OPTION:()=>Q4,CleanOptions:()=>AM,cleanTask:()=>ebe,cleanWithOptionsTask:()=>_At,isCleanOptionsArray:()=>wAt});function _At(e,t){let{cleanMode:r,options:n,valid:i}=IAt(e);return r?i.options?(n.push(...t),n.some(DAt)?ia(F4):ebe(r,n)):ia(Q4+JSON.stringify(e)):ia(M4)}function ebe(e,t){return{commands:["clean",`-${e}`,...t],format:"utf-8",parser(n){return bAt(e==="n",n)}}}function wAt(e){return Array.isArray(e)&&e.every(t=>N4.has(t))}function IAt(e){let t,r=[],n={cleanMode:!1,options:!0};return e.replace(/[^a-z]i/g,"").split("").forEach(i=>{SAt(i)?(t=i,n.cleanMode=!0):n.options=n.options&&BAt(r[r.length]=`-${i}`)}),{cleanMode:t,options:r,valid:n}}function SAt(e){return e==="f"||e==="n"}function BAt(e){return/^-[a-z]$/i.test(e)&&N4.has(e.charAt(1))}function DAt(e){return/^-[^\-]/.test(e)?e.indexOf("i")>0:e==="--interactive"}var F4,M4,Q4,AM,N4,tbe=Be({"src/lib/tasks/clean.ts"(){"use strict";xAt(),_t(),bi(),F4="Git clean interactive mode is not supported",M4='Git clean mode parameter ("n" or "f") is required',Q4="Git clean unknown option found in: ",AM=(e=>(e.DRY_RUN="n",e.FORCE="f",e.IGNORED_INCLUDED="x",e.IGNORED_ONLY="X",e.EXCLUDING="e",e.QUIET="q",e.RECURSIVE="d",e))(AM||{}),N4=new Set(["i",...FEe(Object.values(AM))])}});function TAt(e){let t=new nbe;for(let r of rbe(e))t.addValue(r.file,String(r.key),r.value);return t}function RAt(e,t){let r=null,n=[],i=new Map;for(let s of rbe(e,t))s.key===t&&(n.push(r=s.value),i.has(s.file)||i.set(s.file,[]),i.get(s.file).push(r));return{key:t,paths:Array.from(i.keys()),scopes:i,value:r,values:n}}function kAt(e){return e.replace(/^(file):/,"")}function*rbe(e,t=null){let r=e.split("\0");for(let n=0,i=r.length-1;n<i;){let s=kAt(r[n++]),o=r[n++],a=t;if(o.includes(`
`)){let l=BEe(o,`
`);a=l[0],o=l[1]}yield{file:s,key:a,value:o}}}var nbe,FAt=Be({"src/lib/responses/ConfigList.ts"(){"use strict";_t(),nbe=class{constructor(){this.files=[],this.values=Object.create(null)}get all(){return this._all||(this._all=this.files.reduce((e,t)=>Object.assign(e,this.values[t]),{})),this._all}addFile(e){if(!(e in this.values)){let t=mA(this.files);this.values[e]=t?Object.create(this.values[t]):{},this.files.push(e)}return this.values[e]}addValue(e,t,r){let n=this.addFile(e);n.hasOwnProperty(t)?Array.isArray(n[t])?n[t].push(r):n[t]=[n[t],r]:n[t]=r,this._all=void 0}}}});function s4(e,t){return typeof e=="string"&&m4.hasOwnProperty(e)?e:t}function MAt(e,t,r,n){let i=["config",`--${n}`];return r&&i.push("--add"),i.push(e,t),{commands:i,format:"utf-8",parser(s){return s}}}function QAt(e,t){let r=["config","--null","--show-origin","--get-all",e];return t&&r.splice(1,0,`--${t}`),{commands:r,format:"utf-8",parser(n){return RAt(n,e)}}}function NAt(e){let t=["config","--list","--show-origin","--null"];return e&&t.push(`--${e}`),{commands:t,format:"utf-8",parser(r){return TAt(r)}}}function PAt(){return{addConfig(e,t,...r){return this._runTask(MAt(e,t,r[0]===!0,s4(r[1],"local")),hi(arguments))},getConfig(e,t){return this._runTask(QAt(e,s4(t,void 0)),hi(arguments))},listConfig(...e){return this._runTask(NAt(s4(e[0],void 0)),hi(arguments))}}}var m4,ibe=Be({"src/lib/tasks/config.ts"(){"use strict";FAt(),_t(),m4=(e=>(e.system="system",e.global="global",e.local="local",e.worktree="worktree",e))(m4||{})}});function LAt(e){return sbe.has(e)}var o4,sbe,obe=Be({"src/lib/tasks/diff-name-status.ts"(){"use strict";o4=(e=>(e.ADDED="A",e.COPIED="C",e.DELETED="D",e.MODIFIED="M",e.RENAMED="R",e.CHANGED="T",e.UNMERGED="U",e.UNKNOWN="X",e.BROKEN="B",e))(o4||{}),sbe=new Set(Object.values(o4))}});function UAt(...e){return new lbe().param(...e)}function OAt(e){let t=new Set,r={};return w4(e,n=>{let[i,s,o]=n.split(uC);t.add(i),(r[i]=r[i]||[]).push({line:xn(s),path:i,preview:o})}),{paths:t,results:r}}function qAt(){return{grep(e){let t=hi(arguments),r=na(arguments);for(let i of abe)if(r.includes(i))return this._runTask(ia(`git.grep: use of "${i}" is not supported.`),t);typeof e=="string"&&(e=UAt().param(e));let n=["grep","--null","-n","--full-name",...r,...e];return this._runTask({commands:n,format:"utf-8",parser(i){return OAt(i)}},t)}}}var abe,p_,Yve,lbe,cbe=Be({"src/lib/tasks/grep.ts"(){"use strict";_t(),bi(),abe=["-h"],p_=Symbol("grepQuery"),lbe=class{constructor(){this[Yve]=[]}*[(Yve=p_,Symbol.iterator)](){for(let e of this[p_])yield e}and(...e){return e.length&&this[p_].push("--and","(",...y_(e,"-e"),")"),this}param(...e){return this[p_].push(...y_(e,"-e")),this}}}}),ube={};xi(ube,{ResetMode:()=>mM,getResetMode:()=>HAt,resetTask:()=>VAt});function VAt(e,t){let r=["reset"];return dbe(e)&&r.push(`--${e}`),r.push(...t),wo(r)}function HAt(e){if(dbe(e))return e;switch(typeof e){case"string":case"undefined":return"soft"}}function dbe(e){return fbe.includes(e)}var mM,fbe,hbe=Be({"src/lib/tasks/reset.ts"(){"use strict";bi(),mM=(e=>(e.MIXED="mixed",e.SOFT="soft",e.HARD="hard",e.MERGE="merge",e.KEEP="keep",e))(mM||{}),fbe=Array.from(Object.values(mM))}});function WAt(){return(0,bM.default)("simple-git")}function Kve(e,t,r){return!t||!String(t).replace(/\s*/,"")?r?(n,...i)=>{e(n,...i),r(n,...i)}:e:(n,...i)=>{e(`%s ${n}`,t,...i),r&&r(n,...i)}}function GAt(e,t,{namespace:r}){if(typeof e=="string")return e;let n=t&&t.namespace||"";return n.startsWith(r)?n.substr(r.length+1):n||r}function P4(e,t,r,n=WAt()){let i=e&&`[${e}]`||"",s=[],o=typeof t=="string"?n.extend(t):t,a=GAt(Ku(t,js),o,n);return c(r);function l(u,f){return Pr(s,P4(e,a.replace(/^[^:]+/,u),f,n))}function c(u){let f=u&&`[${u}]`||"",p=o&&Kve(o,f)||yA,g=Kve(n,`${i} ${f}`,p);return Object.assign(o?p:g,{label:e,sibling:l,info:g,step:c})}}var gbe=Be({"src/lib/git-logger.ts"(){"use strict";_t(),bM.default.formatters.L=e=>String(D4(e)?e.length:"-"),bM.default.formatters.B=e=>Buffer.isBuffer(e)?e.toString("utf8"):__(e)}}),gM,y4,$At=Be({"src/lib/runners/tasks-pending-queue.ts"(){"use strict";ig(),gbe(),gM=class{constructor(e="GitExecutor"){this.logLabel=e,this._queue=new Map}withProgress(e){return this._queue.get(e)}createProgress(e){let t=gM.getName(e.commands[0]),r=P4(this.logLabel,t);return{task:e,logger:r,name:t}}push(e){let t=this.createProgress(e);return t.logger("Adding task to the queue, commands = %o",e.commands),this._queue.set(e,t),t}fatal(e){for(let[t,{logger:r}]of Array.from(this._queue.entries()))t===e.task?(r.info("Failed %o",e),r("Fatal exception, any as-yet un-started tasks run through this executor will not be attempted")):r.info("A fatal exception occurred in a previous task, the queue has been purged: %o",e.message),this.complete(t);if(this._queue.size!==0)throw new Error(`Queue size should be zero after fatal: ${this._queue.size}`)}complete(e){this.withProgress(e)&&this._queue.delete(e)}attempt(e){let t=this.withProgress(e);if(!t)throw new ff(void 0,"TasksPendingQueue: attempt called for an unknown task");return t.logger("Starting task"),t}static getName(e="empty"){return`task:${e}:${++gM.counter}`}},y4=gM,y4.counter=0}});function AA(e,t){return{method:DEe(e.commands)||"",commands:t}}function YAt(e,t){return r=>{t("[ERROR] child process exception %o",r),e.push(Buffer.from(String(r.stack),"ascii"))}}function zve(e,t,r,n){return i=>{r("%s received %L bytes",t,i),n("%B",i),e.push(i)}}var C4,KAt=Be({"src/lib/runners/git-executor-chain.ts"(){"use strict";ig(),bi(),_t(),$At(),C4=class{constructor(e,t,r){this._executor=e,this._scheduler=t,this._plugins=r,this._chain=Promise.resolve(),this._queue=new y4}get cwd(){return this._cwd||this._executor.cwd}set cwd(e){this._cwd=e}get env(){return this._executor.env}get outputHandler(){return this._executor.outputHandler}chain(){return this}push(e){return this._queue.push(e),this._chain=this._chain.then(()=>this.attemptTask(e))}attemptTask(e){return A_(this,null,function*(){let t=yield this._scheduler.next(),r=()=>this._queue.complete(e);try{let{logger:n}=this._queue.attempt(e);return yield ZEe(e)?this.attemptEmptyTask(e,n):this.attemptRemoteTask(e,n)}catch(n){throw this.onFatalException(e,n)}finally{r(),t()}})}onFatalException(e,t){let r=t instanceof ff?Object.assign(t,{task:e}):new ff(e,t&&String(t));return this._chain=Promise.resolve(),this._queue.fatal(r),r}attemptRemoteTask(e,t){return A_(this,null,function*(){let r=this._plugins.exec("spawn.binary","",AA(e,e.commands)),n=this._plugins.exec("spawn.args",[...e.commands],AA(e,e.commands)),i=yield this.gitResponse(e,r,n,this.outputHandler,t.step("SPAWN")),s=yield this.handleTaskData(e,n,i,t.step("HANDLE"));return t("passing response to task's parser as a %s",e.format),jEe(e)?g4(e.parser,s):g4(e.parser,s.asStrings())})}attemptEmptyTask(e,t){return A_(this,null,function*(){return t("empty task bypassing child process to call to task's parser"),e.parser(this)})}handleTaskData(e,t,r,n){let{exitCode:i,rejection:s,stdOut:o,stdErr:a}=r;return new Promise((l,c)=>{n("Preparing to handle process response exitCode=%d stdOut=",i);let{error:u}=this._plugins.exec("task.error",{error:s},Ll(Ll({},AA(e,t)),r));if(u&&e.onError)return n.info("exitCode=%s handling with custom error handler"),e.onError(r,u,f=>{n.info("custom error handler treated as success"),n("custom error returned a %s",__(f)),l(new v_(Array.isArray(f)?Buffer.concat(f):f,Buffer.concat(a)))},c);if(u)return n.info("handling as error: exitCode=%s stdErr=%s rejection=%o",i,a.length,s),c(u);n.info("retrieving task output complete"),l(new v_(Buffer.concat(o),Buffer.concat(a)))})}gitResponse(e,t,r,n,i){return A_(this,null,function*(){let s=i.sibling("output"),o=this._plugins.exec("spawn.options",{cwd:this.cwd,env:this.env,windowsHide:!0},AA(e,e.commands));return new Promise(a=>{let l=[],c=[];i.info("%s %o",t,r),i("%O",o);let u=this._beforeSpawn(e,r);if(u)return a({stdOut:l,stdErr:c,exitCode:9901,rejection:u});this._plugins.exec("spawn.before",void 0,m_(Ll({},AA(e,r)),{kill(p){u=p||u}}));let f=(0,pbe.spawn)(t,r,o);f.stdout.on("data",zve(l,"stdOut",i,s.step("stdOut"))),f.stderr.on("data",zve(c,"stdErr",i,s.step("stdErr"))),f.on("error",YAt(c,i)),n&&(i("Passing child process stdOut/stdErr to custom outputHandler"),n(t,f.stdout,f.stderr,[...r])),this._plugins.exec("spawn.after",void 0,m_(Ll({},AA(e,r)),{spawned:f,close(p,g){a({stdOut:l,stdErr:c,exitCode:p,rejection:u||g})},kill(p){f.killed||(u=p,f.kill("SIGINT"))}}))})})}_beforeSpawn(e,t){let r;return this._plugins.exec("spawn.before",void 0,m_(Ll({},AA(e,t)),{kill(n){r=n||r}})),r}}}}),Abe={};xi(Abe,{GitExecutor:()=>mbe});var mbe,zAt=Be({"src/lib/runners/git-executor.ts"(){"use strict";KAt(),mbe=class{constructor(e,t,r){this.cwd=e,this._scheduler=t,this._plugins=r,this._chain=new C4(this,this._scheduler,this._plugins)}chain(){return new C4(this,this._scheduler,this._plugins)}push(e){return this._chain.push(e)}}}});function JAt(e,t,r=yA){let n=s=>{r(null,s)},i=s=>{s?.task===e&&r(s instanceof b_?jAt(s):s,void 0)};t.then(n,i)}function jAt(e){let t=n=>{console.warn(`simple-git deprecation notice: accessing GitResponseError.${n} should be GitResponseError.git.${n}, this will no longer be available in version 3`),t=yA};return Object.create(e,Object.getOwnPropertyNames(e.git).reduce(r,{}));function r(n,i){return i in e||(n[i]={enumerable:!1,configurable:!1,get(){return t(i),e.git[i]}}),n}}var ZAt=Be({"src/lib/task-callback.ts"(){"use strict";dC(),_t()}});function Jve(e,t){return zEe(r=>{if(!I4(e))throw new Error(`Git.cwd: cannot change to non-directory "${e}"`);return(t||r).cwd=e})}var XAt=Be({"src/lib/tasks/change-working-directory.ts"(){"use strict";_t(),bi()}});function a4(e){let t=["checkout",...e];return t[1]==="-b"&&t.includes("-B")&&(t[1]=SM(t,"-B")),wo(t)}function emt(){return{checkout(){return this._runTask(a4(na(arguments,1)),hi(arguments))},checkoutBranch(e,t){return this._runTask(a4(["-b",e,t,...na(arguments)]),hi(arguments))},checkoutLocalBranch(e){return this._runTask(a4(["-b",e,...na(arguments)]),hi(arguments))}}}var tmt=Be({"src/lib/tasks/checkout.ts"(){"use strict";_t(),bi()}});function rmt(){return{count:0,garbage:0,inPack:0,packs:0,prunePackable:0,size:0,sizeGarbage:0,sizePack:0}}function nmt(){return{countObjects(){return this._runTask({commands:["count-objects","--verbose"],format:"utf-8",parser(e){return sa(rmt(),[ybe],e)}})}}}var ybe,imt=Be({"src/lib/tasks/count-objects.ts"(){"use strict";_t(),ybe=new Nt(/([a-z-]+): (\d+)$/,(e,[t,r])=>{let n=kEe(t);e.hasOwnProperty(n)&&(e[n]=xn(r))})}});function smt(e){return sa({author:null,branch:"",commit:"",root:!1,summary:{changes:0,insertions:0,deletions:0}},Cbe,e)}var Cbe,omt=Be({"src/lib/parsers/parse-commit.ts"(){"use strict";_t(),Cbe=[new Nt(/^\[([^\s]+)( \([^)]+\))? ([^\]]+)/,(e,[t,r,n])=>{e.branch=t,e.commit=n,e.root=!!r}),new Nt(/\s*Author:\s(.+)/i,(e,[t])=>{let r=t.split("<"),n=r.pop();!n||!n.includes("@")||(e.author={email:n.substr(0,n.length-1),name:r.join("<").trim()})}),new Nt(/(\d+)[^,]*(?:,\s*(\d+)[^,]*)(?:,\s*(\d+))/g,(e,[t,r,n])=>{e.summary.changes=parseInt(t,10)||0,e.summary.insertions=parseInt(r,10)||0,e.summary.deletions=parseInt(n,10)||0}),new Nt(/^(\d+)[^,]*(?:,\s*(\d+)[^(]+\(([+-]))?/,(e,[t,r,n])=>{e.summary.changes=parseInt(t,10)||0;let i=parseInt(r,10)||0;n==="-"?e.summary.deletions=i:n==="+"&&(e.summary.insertions=i)})]}});function amt(e,t,r){return{commands:["-c","core.abbrev=40","commit",...y_(e,"-m"),...t,...r],format:"utf-8",parser:smt}}function lmt(){return{commit(t,...r){let n=hi(arguments),i=e(t)||amt(Yu(t),Yu(Ku(r[0],EM,[])),[...Ku(r[1],w_,[]),...na(arguments,0,!0)]);return this._runTask(i,n)}};function e(t){return!EM(t)&&ia("git.commit: requires the commit message to be supplied as a string/string[]")}}var cmt=Be({"src/lib/tasks/commit.ts"(){"use strict";omt(),_t(),bi()}});function umt(){return{firstCommit(){return this._runTask(wo(["rev-list","--max-parents=0","HEAD"],!0),hi(arguments))}}}var dmt=Be({"src/lib/tasks/first-commit.ts"(){"use strict";_t(),bi()}});function fmt(e,t){let r=["hash-object",e];return t&&r.push("-w"),wo(r,!0)}var hmt=Be({"src/lib/tasks/hash-object.ts"(){"use strict";bi()}});function gmt(e,t,r){let n=String(r).trim(),i;if(i=vbe.exec(n))return new yM(e,t,!1,i[1]);if(i=Ebe.exec(n))return new yM(e,t,!0,i[1]);let s="",o=n.split(" ");for(;o.length;)if(o.shift()==="in"){s=o.join(" ");break}return new yM(e,t,/^re/i.test(n),s)}var yM,vbe,Ebe,pmt=Be({"src/lib/responses/InitSummary.ts"(){"use strict";yM=class{constructor(e,t,r,n){this.bare=e,this.path=t,this.existing=r,this.gitDir=n}},vbe=/^Init.+ repository in (.+)$/,Ebe=/^Rein.+ in (.+)$/}});function Amt(e){return e.includes(L4)}function mmt(e=!1,t,r){let n=["init",...r];return e&&!Amt(n)&&n.splice(1,0,L4),{commands:n,format:"utf-8",parser(i){return gmt(n.includes("--bare"),t,i)}}}var L4,ymt=Be({"src/lib/tasks/init.ts"(){"use strict";pmt(),L4="--bare"}});function U4(e){for(let t=0;t<e.length;t++){let r=O4.exec(e[t]);if(r)return`--${r[1]}`}return""}function Cmt(e){return O4.test(e)}var O4,I_=Be({"src/lib/args/log-format.ts"(){"use strict";O4=/^--(stat|numstat|name-only|name-status)(=|$)/}}),bbe,vmt=Be({"src/lib/responses/DiffSummary.ts"(){"use strict";bbe=class{constructor(){this.changed=0,this.deletions=0,this.insertions=0,this.files=[]}}}});function xbe(e=""){let t=_be[e];return r=>sa(new bbe,t,r,!1)}var l4,jve,Zve,Xve,_be,wbe=Be({"src/lib/parsers/parse-diff-summary.ts"(){"use strict";I_(),vmt(),obe(),_t(),l4=[new Nt(/^(.+)\s+\|\s+(\d+)(\s+[+\-]+)?$/,(e,[t,r,n=""])=>{e.files.push({file:t.trim(),changes:xn(r),insertions:n.replace(/[^+]/g,"").length,deletions:n.replace(/[^-]/g,"").length,binary:!1})}),new Nt(/^(.+) \|\s+Bin ([0-9.]+) -> ([0-9.]+) ([a-z]+)/,(e,[t,r,n])=>{e.files.push({file:t.trim(),before:xn(r),after:xn(n),binary:!0})}),new Nt(/(\d+) files? changed\s*((?:, \d+ [^,]+){0,2})/,(e,[t,r])=>{let n=/(\d+) i/.exec(r),i=/(\d+) d/.exec(r);e.changed=xn(t),e.insertions=xn(n?.[1]),e.deletions=xn(i?.[1])})],jve=[new Nt(/(\d+)\t(\d+)\t(.+)$/,(e,[t,r,n])=>{let i=xn(t),s=xn(r);e.changed++,e.insertions+=i,e.deletions+=s,e.files.push({file:n,changes:i+s,insertions:i,deletions:s,binary:!1})}),new Nt(/-\t-\t(.+)$/,(e,[t])=>{e.changed++,e.files.push({file:t,after:0,before:0,binary:!0})})],Zve=[new Nt(/(.+)$/,(e,[t])=>{e.changed++,e.files.push({file:t,changes:0,insertions:0,deletions:0,binary:!1})})],Xve=[new Nt(/([ACDMRTUXB])([0-9]{0,3})\t(.[^\t]*)(\t(.[^\t]*))?$/,(e,[t,r,n,i,s])=>{e.changed++,e.files.push({file:s??n,changes:0,insertions:0,deletions:0,binary:!1,status:f4(LAt(t)&&t),from:f4(!!s&&n!==s&&n),similarity:xn(r)})})],_be={"":l4,"--stat":l4,"--numstat":jve,"--name-status":Xve,"--name-only":Zve}}});function Emt(e,t){return t.reduce((r,n,i)=>(r[n]=e[i]||"",r),Object.create({diff:null}))}function Ibe(e=H4,t=Sbe,r=""){let n=xbe(r);return function(i){let s=x_(i.trim(),!1,q4).map(function(o){let a=o.split(V4),l=Emt(a[0].split(e),t);return a.length>1&&a[1].trim()&&(l.diff=n(a[1])),l});return{all:s,latest:s.length&&s[0]||null,total:s.length}}}var q4,V4,H4,Sbe,Bbe=Be({"src/lib/parsers/parse-list-log-summary.ts"(){"use strict";_t(),wbe(),I_(),q4="\xF2\xF2\xF2\xF2\xF2\xF2 ",V4=" \xF2\xF2",H4=" \xF2 ",Sbe=["hash","date","message","refs","author_name","author_email"]}}),Dbe={};xi(Dbe,{diffSummaryTask:()=>bmt,validateLogFormatConfig:()=>RM});function bmt(e){let t=U4(e),r=["diff"];return t===""&&(t="--stat",r.push("--stat=4096")),r.push(...e),RM(r)||{commands:r,format:"utf-8",parser:xbe(t)}}function RM(e){let t=e.filter(Cmt);if(t.length>1)return ia(`Summary flags are mutually exclusive - pick one of ${t.join(",")}`);if(t.length&&e.includes("-z"))return ia(`Summary flag ${t} parsing is not compatible with null termination option '-z'`)}var W4=Be({"src/lib/tasks/diff.ts"(){"use strict";I_(),wbe(),bi()}});function xmt(e,t){let r=[],n=[];return Object.keys(e).forEach(i=>{r.push(i),n.push(String(e[i]))}),[r,n.join(t)]}function _mt(e){return Object.keys(e).reduce((t,r)=>(r in v4||(t[r]=e[r]),t),{})}function Tbe(e={},t=[]){let r=Ku(e.splitter,js,H4),n=!S4(e.format)&&e.format?e.format:{hash:"%H",date:e.strictDate===!1?"%ai":"%aI",message:"%s",refs:"%D",body:e.multiLine?"%B":"%b",author_name:e.mailMap!==!1?"%aN":"%an",author_email:e.mailMap!==!1?"%aE":"%ae"},[i,s]=xmt(n,r),o=[],a=[`--pretty=format:${q4}${s}${V4}`,...t],l=e.n||e["max-count"]||e.maxCount;if(l&&a.push(`--max-count=${l}`),e.from||e.to){let c=e.symmetric!==!1?"...":"..";o.push(`${e.from||""}${c}${e.to||""}`)}return js(e.file)&&a.push("--follow",fAt(e.file)),T4(_mt(e),a),{fields:i,splitter:r,commands:[...a,...o]}}function wmt(e,t,r){let n=Ibe(e,t,U4(r));return{commands:["log",...r],format:"utf-8",parser:n}}function Imt(){return{log(...r){let n=hi(arguments),i=Tbe(R4(arguments),Ku(arguments[0],w_)),s=t(...r)||RM(i.commands)||e(i);return this._runTask(s,n)}};function e(r){return wmt(r.splitter,r.fields,r.commands)}function t(r,n){return js(r)&&js(n)&&ia("git.log(string, string) should be replaced with git.log({ from: string, to: string })")}}var v4,Rbe=Be({"src/lib/tasks/log.ts"(){"use strict";I_(),E_(),Bbe(),_t(),bi(),W4(),v4=(e=>(e[e["--pretty"]=0]="--pretty",e[e["max-count"]=1]="max-count",e[e.maxCount=2]="maxCount",e[e.n=3]="n",e[e.file=4]="file",e[e.format=5]="format",e[e.from=6]="from",e[e.to=7]="to",e[e.splitter=8]="splitter",e[e.symmetric=9]="symmetric",e[e.mailMap=10]="mailMap",e[e.multiLine=11]="multiLine",e[e.strictDate=12]="strictDate",e))(v4||{})}}),CM,kbe,Smt=Be({"src/lib/responses/MergeSummary.ts"(){"use strict";CM=class{constructor(e,t=null,r){this.reason=e,this.file=t,this.meta=r}toString(){return`${this.file}:${this.reason}`}},kbe=class{constructor(){this.conflicts=[],this.merges=[],this.result="success"}get failed(){return this.conflicts.length>0}get reason(){return this.result}toString(){return this.conflicts.length?`CONFLICTS: ${this.conflicts.join(", ")}`:"OK"}}}}),E4,Fbe,Bmt=Be({"src/lib/responses/PullSummary.ts"(){"use strict";E4=class{constructor(){this.remoteMessages={all:[]},this.created=[],this.deleted=[],this.files=[],this.deletions={},this.insertions={},this.summary={changes:0,deletions:0,insertions:0}}},Fbe=class{constructor(){this.remote="",this.hash={local:"",remote:""},this.branch={local:"",remote:""},this.message=""}toString(){return this.message}}}});function c4(e){return e.objects=e.objects||{compressing:0,counting:0,enumerating:0,packReused:0,reused:{count:0,delta:0},total:{count:0,delta:0}}}function eEe(e){let t=/^\s*(\d+)/.exec(e),r=/delta (\d+)/i.exec(e);return{count:xn(t&&t[1]||"0"),delta:xn(r&&r[1]||"0")}}var Mbe,Dmt=Be({"src/lib/parsers/parse-remote-objects.ts"(){"use strict";_t(),Mbe=[new ng(/^remote:\s*(enumerating|counting|compressing) objects: (\d+),/i,(e,[t,r])=>{let n=t.toLowerCase(),i=c4(e.remoteMessages);Object.assign(i,{[n]:xn(r)})}),new ng(/^remote:\s*(enumerating|counting|compressing) objects: \d+% \(\d+\/(\d+)\),/i,(e,[t,r])=>{let n=t.toLowerCase(),i=c4(e.remoteMessages);Object.assign(i,{[n]:xn(r)})}),new ng(/total ([^,]+), reused ([^,]+), pack-reused (\d+)/i,(e,[t,r,n])=>{let i=c4(e.remoteMessages);i.total=eEe(t),i.reused=eEe(r),i.packReused=xn(n)})]}});function Qbe(e,t){return sa({remoteMessages:new Pbe},Nbe,t)}var Nbe,Pbe,Lbe=Be({"src/lib/parsers/parse-remote-messages.ts"(){"use strict";_t(),Dmt(),Nbe=[new ng(/^remote:\s*(.+)$/,(e,[t])=>(e.remoteMessages.all.push(t.trim()),!1)),...Mbe,new ng([/create a (?:pull|merge) request/i,/\s(https?:\/\/\S+)$/],(e,[t])=>{e.remoteMessages.pullRequestUrl=t}),new ng([/found (\d+) vulnerabilities.+\(([^)]+)\)/i,/\s(https?:\/\/\S+)$/],(e,[t,r,n])=>{e.remoteMessages.vulnerabilities={count:xn(t),summary:r,url:n}})],Pbe=class{constructor(){this.all=[]}}}});function Tmt(e,t){let r=sa(new Fbe,Ube,[e,t]);return r.message&&r}var tEe,rEe,nEe,iEe,Ube,sEe,G4,Obe=Be({"src/lib/parsers/parse-pull.ts"(){"use strict";Bmt(),_t(),Lbe(),tEe=/^\s*(.+?)\s+\|\s+\d+\s*(\+*)(-*)/,rEe=/(\d+)\D+((\d+)\D+\(\+\))?(\D+(\d+)\D+\(-\))?/,nEe=/^(create|delete) mode \d+ (.+)/,iEe=[new Nt(tEe,(e,[t,r,n])=>{e.files.push(t),r&&(e.insertions[t]=r.length),n&&(e.deletions[t]=n.length)}),new Nt(rEe,(e,[t,,r,,n])=>r!==void 0||n!==void 0?(e.summary.changes=+t||0,e.summary.insertions=+r||0,e.summary.deletions=+n||0,!0):!1),new Nt(nEe,(e,[t,r])=>{Pr(e.files,r),Pr(t==="create"?e.created:e.deleted,r)})],Ube=[new Nt(/^from\s(.+)$/i,(e,[t])=>void(e.remote=t)),new Nt(/^fatal:\s(.+)$/,(e,[t])=>void(e.message=t)),new Nt(/([a-z0-9]+)\.\.([a-z0-9]+)\s+(\S+)\s+->\s+(\S+)$/,(e,[t,r,n,i])=>{e.branch.local=n,e.hash.local=t,e.branch.remote=i,e.hash.remote=r})],sEe=(e,t)=>sa(new E4,iEe,[e,t]),G4=(e,t)=>Object.assign(new E4,sEe(e,t),Qbe(e,t))}}),oEe,qbe,aEe,Rmt=Be({"src/lib/parsers/parse-merge.ts"(){"use strict";Smt(),_t(),Obe(),oEe=[new Nt(/^Auto-merging\s+(.+)$/,(e,[t])=>{e.merges.push(t)}),new Nt(/^CONFLICT\s+\((.+)\): Merge conflict in (.+)$/,(e,[t,r])=>{e.conflicts.push(new CM(t,r))}),new Nt(/^CONFLICT\s+\((.+\/delete)\): (.+) deleted in (.+) and/,(e,[t,r,n])=>{e.conflicts.push(new CM(t,r,{deleteRef:n}))}),new Nt(/^CONFLICT\s+\((.+)\):/,(e,[t])=>{e.conflicts.push(new CM(t,null))}),new Nt(/^Automatic merge failed;\s+(.+)$/,(e,[t])=>{e.result=t})],qbe=(e,t)=>Object.assign(aEe(e,t),G4(e,t)),aEe=e=>sa(new kbe,oEe,e)}});function lEe(e){return e.length?{commands:["merge",...e],format:"utf-8",parser(t,r){let n=qbe(t,r);if(n.failed)throw new b_(n);return n}}:ia("Git.merge requires at least one option")}var kmt=Be({"src/lib/tasks/merge.ts"(){"use strict";dC(),Rmt(),bi()}});function Fmt(e,t,r){let n=r.includes("deleted"),i=r.includes("tag")||/^refs\/tags/.test(e),s=!r.includes("new");return{deleted:n,tag:i,branch:!i,new:!s,alreadyUpdated:s,local:e,remote:t}}var cEe,Vbe,uEe,Mmt=Be({"src/lib/parsers/parse-push.ts"(){"use strict";_t(),Lbe(),cEe=[new Nt(/^Pushing to (.+)$/,(e,[t])=>{e.repo=t}),new Nt(/^updating local tracking ref '(.+)'/,(e,[t])=>{e.ref=m_(Ll({},e.ref||{}),{local:t})}),new Nt(/^[=*-]\s+([^:]+):(\S+)\s+\[(.+)]$/,(e,[t,r,n])=>{e.pushed.push(Fmt(t,r,n))}),new Nt(/^Branch '([^']+)' set up to track remote branch '([^']+)' from '([^']+)'/,(e,[t,r,n])=>{e.branch=m_(Ll({},e.branch||{}),{local:t,remote:r,remoteName:n})}),new Nt(/^([^:]+):(\S+)\s+([a-z0-9]+)\.\.([a-z0-9]+)$/,(e,[t,r,n,i])=>{e.update={head:{local:t,remote:r},hash:{from:n,to:i}}})],Vbe=(e,t)=>{let r=uEe(e,t),n=Qbe(e,t);return Ll(Ll({},r),n)},uEe=(e,t)=>sa({pushed:[]},cEe,[e,t])}}),Hbe={};xi(Hbe,{pushTagsTask:()=>Qmt,pushTask:()=>$4});function Qmt(e={},t){return Pr(t,"--tags"),$4(e,t)}function $4(e={},t){let r=["push",...t];return e.branch&&r.splice(1,0,e.branch),e.remote&&r.splice(1,0,e.remote),SM(r,"-v"),Pr(r,"--verbose"),Pr(r,"--porcelain"),{commands:r,format:"utf-8",parser:Vbe}}var Wbe=Be({"src/lib/tasks/push.ts"(){"use strict";Mmt(),_t()}});function Nmt(){return{showBuffer(){let e=["show",...na(arguments,1)];return e.includes("--binary")||e.splice(1,0,"--binary"),this._runTask(JEe(e),hi(arguments))},show(){let e=["show",...na(arguments,1)];return this._runTask(wo(e),hi(arguments))}}}var Pmt=Be({"src/lib/tasks/show.ts"(){"use strict";_t(),bi()}}),dEe,Gbe,Lmt=Be({"src/lib/responses/FileStatusSummary.ts"(){"use strict";dEe=/^(.+)\0(.+)$/,Gbe=class{constructor(e,t,r){if(this.path=e,this.index=t,this.working_dir=r,t==="R"||r==="R"){let n=dEe.exec(e)||[null,e,e];this.from=n[2]||"",this.path=n[1]||""}}}}});function fEe(e){let[t,r]=e.split(uC);return{from:r||t,to:t}}function Wa(e,t,r){return[`${e}${t}`,r]}function u4(e,...t){return t.map(r=>Wa(e,r,(n,i)=>Pr(n.conflicted,i)))}function Umt(e,t){let r=t.trim();switch(" "){case r.charAt(2):return n(r.charAt(0),r.charAt(1),r.substr(3));case r.charAt(1):return n(" ",r.charAt(0),r.substr(2));default:return}function n(i,s,o){let a=`${i}${s}`,l=$be.get(a);l&&l(e,o),a!=="##"&&a!=="!!"&&e.files.push(new Gbe(o,i,s))}}var hEe,$be,Ybe,Omt=Be({"src/lib/responses/StatusSummary.ts"(){"use strict";_t(),Lmt(),hEe=class{constructor(){this.not_added=[],this.conflicted=[],this.created=[],this.deleted=[],this.ignored=void 0,this.modified=[],this.renamed=[],this.files=[],this.staged=[],this.ahead=0,this.behind=0,this.current=null,this.tracking=null,this.detached=!1,this.isClean=()=>!this.files.length}},$be=new Map([Wa(" ","A",(e,t)=>Pr(e.created,t)),Wa(" ","D",(e,t)=>Pr(e.deleted,t)),Wa(" ","M",(e,t)=>Pr(e.modified,t)),Wa("A"," ",(e,t)=>Pr(e.created,t)&&Pr(e.staged,t)),Wa("A","M",(e,t)=>Pr(e.created,t)&&Pr(e.staged,t)&&Pr(e.modified,t)),Wa("D"," ",(e,t)=>Pr(e.deleted,t)&&Pr(e.staged,t)),Wa("M"," ",(e,t)=>Pr(e.modified,t)&&Pr(e.staged,t)),Wa("M","M",(e,t)=>Pr(e.modified,t)&&Pr(e.staged,t)),Wa("R"," ",(e,t)=>{Pr(e.renamed,fEe(t))}),Wa("R","M",(e,t)=>{let r=fEe(t);Pr(e.renamed,r),Pr(e.modified,r.to)}),Wa("!","!",(e,t)=>{Pr(e.ignored=e.ignored||[],t)}),Wa("?","?",(e,t)=>Pr(e.not_added,t)),...u4("A","A","U"),...u4("D","D","U"),...u4("U","A","D","U"),["##",(e,t)=>{let r=/ahead (\d+)/,n=/behind (\d+)/,i=/^(.+?(?=(?:\.{3}|\s|$)))/,s=/\.{3}(\S*)/,o=/\son\s([\S]+)$/,a;a=r.exec(t),e.ahead=a&&+a[1]||0,a=n.exec(t),e.behind=a&&+a[1]||0,a=i.exec(t),e.current=a&&a[1],a=s.exec(t),e.tracking=a&&a[1],a=o.exec(t),e.current=a&&a[1]||e.current,e.detached=/\(no branch\)/.test(t)}]]),Ybe=function(e){let t=e.split(uC),r=new hEe;for(let n=0,i=t.length;n<i;){let s=t[n++].trim();s&&(s.charAt(0)==="R"&&(s+=uC+(t[n++]||"")),Umt(r,s))}return r}}});function qmt(e){return{format:"utf-8",commands:["status","--porcelain","-b","-u","--null",...e.filter(r=>!Kbe.includes(r))],parser(r){return Ybe(r)}}}var Kbe,Vmt=Be({"src/lib/tasks/status.ts"(){"use strict";Omt(),Kbe=["--null","-z"]}});function xM(e=0,t=0,r=0,n="",i=!0){return Object.defineProperty({major:e,minor:t,patch:r,agent:n,installed:i},"toString",{value(){return`${this.major}.${this.minor}.${this.patch}`},configurable:!1,enumerable:!1})}function Hmt(){return xM(0,0,0,"",!1)}function Wmt(){return{version(){return this._runTask({commands:["--version"],format:"utf-8",parser:Gmt,onError(e,t,r,n){if(e.exitCode===-2)return r(Buffer.from(Y4));n(t)}})}}}function Gmt(e){return e===Y4?Hmt():sa(xM(0,0,0,e),zbe,e)}var Y4,zbe,$mt=Be({"src/lib/tasks/version.ts"(){"use strict";_t(),Y4="installed=false",zbe=[new Nt(/version (\d+)\.(\d+)\.(\d+)(?:\s*\((.+)\))?/,(e,[t,r,n,i=""])=>{Object.assign(e,xM(xn(t),xn(r),xn(n),i))}),new Nt(/version (\d+)\.(\d+)\.(\D+)(.+)?$/,(e,[t,r,n,i=""])=>{Object.assign(e,xM(xn(t),xn(r),n,i))})]}}),Jbe={};xi(Jbe,{SimpleGitApi:()=>b4});var b4,Ymt=Be({"src/lib/simple-git-api.ts"(){"use strict";ZAt(),XAt(),tmt(),imt(),cmt(),ibe(),dmt(),cbe(),hmt(),ymt(),Rbe(),kmt(),Wbe(),Pmt(),Vmt(),bi(),$mt(),_t(),b4=class{constructor(e){this._executor=e}_runTask(e,t){let r=this._executor.chain(),n=r.push(e);return t&&JAt(e,n,t),Object.create(this,{then:{value:n.then.bind(n)},catch:{value:n.catch.bind(n)},_executor:{value:r}})}add(e){return this._runTask(wo(["add",...Yu(e)]),hi(arguments))}cwd(e){let t=hi(arguments);return typeof e=="string"?this._runTask(Jve(e,this._executor),t):typeof e?.path=="string"?this._runTask(Jve(e.path,e.root&&this._executor||void 0),t):this._runTask(ia("Git.cwd: workingDirectory must be supplied as a string"),t)}hashObject(e,t){return this._runTask(fmt(e,t===!0),hi(arguments))}init(e){return this._runTask(mmt(e===!0,this._executor.cwd,na(arguments)),hi(arguments))}merge(){return this._runTask(lEe(na(arguments)),hi(arguments))}mergeFromTo(e,t){return js(e)&&js(t)?this._runTask(lEe([e,t,...na(arguments)]),hi(arguments,!1)):this._runTask(ia("Git.mergeFromTo requires that the 'remote' and 'branch' arguments are supplied as strings"))}outputHandler(e){return this._executor.outputHandler=e,this}push(){let e=$4({remote:Ku(arguments[0],js),branch:Ku(arguments[1],js)},na(arguments));return this._runTask(e,hi(arguments))}stash(){return this._runTask(wo(["stash",...na(arguments)]),hi(arguments))}status(){return this._runTask(qmt(na(arguments)),hi(arguments))}},Object.assign(b4.prototype,emt(),lmt(),PAt(),nmt(),umt(),qAt(),Imt(),Nmt(),Wmt())}}),jbe={};xi(jbe,{Scheduler:()=>Xbe});var gEe,Xbe,Kmt=Be({"src/lib/runners/scheduler.ts"(){"use strict";_t(),gbe(),gEe=(()=>{let e=0;return()=>{e++;let{promise:t,done:r}=(0,Zbe.createDeferred)();return{promise:t,done:r,id:e}}})(),Xbe=class{constructor(e=2){this.concurrency=e,this.logger=P4("","scheduler"),this.pending=[],this.running=[],this.logger("Constructed, concurrency=%s",e)}schedule(){if(!this.pending.length||this.running.length>=this.concurrency){this.logger("Schedule attempt ignored, pending=%s running=%s concurrency=%s",this.pending.length,this.running.length,this.concurrency);return}let e=Pr(this.running,this.pending.shift());this.logger("Attempting id=%s",e.id),e.done(()=>{this.logger("Completing id=",e.id),SM(this.running,e),this.schedule()})}next(){let{promise:e,id:t}=Pr(this.pending,gEe());return this.logger("Scheduling id=%s",t),this.schedule(),e}}}}),exe={};xi(exe,{applyPatchTask:()=>zmt});function zmt(e,t){return wo(["apply",...t,...e])}var Jmt=Be({"src/lib/tasks/apply-patch.ts"(){"use strict";bi()}});function jmt(e,t){return{branch:e,hash:t,success:!0}}function Zmt(e){return{branch:e,hash:null,success:!1}}var txe,Xmt=Be({"src/lib/responses/BranchDeleteSummary.ts"(){"use strict";txe=class{constructor(){this.all=[],this.branches={},this.errors=[]}get success(){return!this.errors.length}}}});function rxe(e,t){return t===1&&x4.test(e)}var pEe,x4,AEe,kM,e0t=Be({"src/lib/parsers/parse-branch-delete.ts"(){"use strict";Xmt(),_t(),pEe=/(\S+)\s+\(\S+\s([^)]+)\)/,x4=/^error[^']+'([^']+)'/m,AEe=[new Nt(pEe,(e,[t,r])=>{let n=jmt(t,r);e.all.push(n),e.branches[t]=n}),new Nt(x4,(e,[t])=>{let r=Zmt(t);e.errors.push(r),e.all.push(r),e.branches[t]=r})],kM=(e,t)=>sa(new txe,AEe,[e,t])}}),nxe,t0t=Be({"src/lib/responses/BranchSummary.ts"(){"use strict";nxe=class{constructor(){this.all=[],this.branches={},this.current="",this.detached=!1}push(e,t,r,n,i){e==="*"&&(this.detached=t,this.current=r),this.all.push(r),this.branches[r]={current:e==="*",linkedWorkTree:e==="+",name:r,commit:n,label:i}}}}});function mEe(e){return e?e.charAt(0):""}function ixe(e){return sa(new nxe,sxe,e)}var sxe,r0t=Be({"src/lib/parsers/parse-branch.ts"(){"use strict";t0t(),_t(),sxe=[new Nt(/^([*+]\s)?\((?:HEAD )?detached (?:from|at) (\S+)\)\s+([a-z0-9]+)\s(.*)$/,(e,[t,r,n,i])=>{e.push(mEe(t),!0,r,n,i)}),new Nt(new RegExp("^([*+]\\s)?(\\S+)\\s+([a-z0-9]+)\\s?(.*)$","s"),(e,[t,r,n,i])=>{e.push(mEe(t),!1,r,n,i)})]}}),oxe={};xi(oxe,{branchLocalTask:()=>i0t,branchTask:()=>n0t,containsDeleteBranchCommand:()=>axe,deleteBranchTask:()=>o0t,deleteBranchesTask:()=>s0t});function axe(e){let t=["-d","-D","--delete"];return e.some(r=>t.includes(r))}function n0t(e){let t=axe(e),r=["branch",...e];return r.length===1&&r.push("-a"),r.includes("-v")||r.splice(1,0,"-v"),{format:"utf-8",commands:r,parser(n,i){return t?kM(n,i).all[0]:ixe(n)}}}function i0t(){return{format:"utf-8",commands:["branch","-v"],parser:ixe}}function s0t(e,t=!1){return{format:"utf-8",commands:["branch","-v",t?"-D":"-d",...e],parser(r,n){return kM(r,n)},onError({exitCode:r,stdOut:n},i,s,o){if(!rxe(String(i),r))return o(i);s(n)}}}function o0t(e,t=!1){let r={format:"utf-8",commands:["branch","-v",t?"-D":"-d",e],parser(n,i){return kM(n,i).branches[e]},onError({exitCode:n,stdErr:i,stdOut:s},o,a,l){if(!rxe(String(o),n))return l(o);throw new b_(r.parser(C_(s),C_(i)),String(o))}};return r}var a0t=Be({"src/lib/tasks/branch.ts"(){"use strict";dC(),e0t(),r0t(),_t()}}),lxe,l0t=Be({"src/lib/responses/CheckIgnore.ts"(){"use strict";lxe=e=>e.split(/\n/g).map(t=>t.trim()).filter(t=>!!t)}}),cxe={};xi(cxe,{checkIgnoreTask:()=>c0t});function c0t(e){return{commands:["check-ignore",...e],format:"utf-8",parser:lxe}}var u0t=Be({"src/lib/tasks/check-ignore.ts"(){"use strict";l0t()}}),uxe={};xi(uxe,{cloneMirrorTask:()=>f0t,cloneTask:()=>dxe});function d0t(e){return/^--upload-pack(=|$)/.test(e)}function dxe(e,t,r){let n=["clone",...r];return js(e)&&n.push(e),js(t)&&n.push(t),n.find(d0t)?ia("git.fetch: potential exploit argument blocked."):wo(n)}function f0t(e,t,r){return Pr(r,"--mirror"),dxe(e,t,r)}var h0t=Be({"src/lib/tasks/clone.ts"(){"use strict";bi(),_t()}});function g0t(e,t){return sa({raw:e,remote:null,branches:[],tags:[],updated:[],deleted:[]},fxe,[e,t])}var fxe,p0t=Be({"src/lib/parsers/parse-fetch.ts"(){"use strict";_t(),fxe=[new Nt(/From (.+)$/,(e,[t])=>{e.remote=t}),new Nt(/\* \[new branch]\s+(\S+)\s*-> (.+)$/,(e,[t,r])=>{e.branches.push({name:t,tracking:r})}),new Nt(/\* \[new tag]\s+(\S+)\s*-> (.+)$/,(e,[t,r])=>{e.tags.push({name:t,tracking:r})}),new Nt(/- \[deleted]\s+\S+\s*-> (.+)$/,(e,[t])=>{e.deleted.push({tracking:t})}),new Nt(/\s*([^.]+)\.\.(\S+)\s+(\S+)\s*-> (.+)$/,(e,[t,r,n,i])=>{e.updated.push({name:n,tracking:i,to:r,from:t})})]}}),hxe={};xi(hxe,{fetchTask:()=>m0t});function A0t(e){return/^--upload-pack(=|$)/.test(e)}function m0t(e,t,r){let n=["fetch",...r];return e&&t&&n.push(e,t),n.find(A0t)?ia("git.fetch: potential exploit argument blocked."):{commands:n,format:"utf-8",parser:g0t}}var y0t=Be({"src/lib/tasks/fetch.ts"(){"use strict";p0t(),bi()}});function C0t(e){return sa({moves:[]},gxe,e)}var gxe,v0t=Be({"src/lib/parsers/parse-move.ts"(){"use strict";_t(),gxe=[new Nt(/^Renaming (.+) to (.+)$/,(e,[t,r])=>{e.moves.push({from:t,to:r})})]}}),pxe={};xi(pxe,{moveTask:()=>E0t});function E0t(e,t){return{commands:["mv","-v",...Yu(e),t],format:"utf-8",parser:C0t}}var b0t=Be({"src/lib/tasks/move.ts"(){"use strict";v0t(),_t()}}),Axe={};xi(Axe,{pullTask:()=>x0t});function x0t(e,t,r){let n=["pull",...r];return e&&t&&n.splice(1,0,e,t),{commands:n,format:"utf-8",parser(i,s){return G4(i,s)},onError(i,s,o,a){let l=Tmt(C_(i.stdOut),C_(i.stdErr));if(l)return a(new b_(l));a(s)}}}var _0t=Be({"src/lib/tasks/pull.ts"(){"use strict";dC(),Obe(),_t()}});function w0t(e){let t={};return mxe(e,([r])=>t[r]={name:r}),Object.values(t)}function I0t(e){let t={};return mxe(e,([r,n,i])=>{t.hasOwnProperty(r)||(t[r]={name:r,refs:{fetch:"",push:""}}),i&&n&&(t[r].refs[i.replace(/[^a-z]/g,"")]=n)}),Object.values(t)}function mxe(e,t){w4(e,r=>t(r.split(/\s+/)))}var S0t=Be({"src/lib/responses/GetRemoteSummary.ts"(){"use strict";_t()}}),yxe={};xi(yxe,{addRemoteTask:()=>B0t,getRemotesTask:()=>D0t,listRemotesTask:()=>T0t,remoteTask:()=>R0t,removeRemoteTask:()=>k0t});function B0t(e,t,r){return wo(["remote","add",...r,e,t])}function D0t(e){let t=["remote"];return e&&t.push("-v"),{commands:t,format:"utf-8",parser:e?I0t:w0t}}function T0t(e){let t=[...e];return t[0]!=="ls-remote"&&t.unshift("ls-remote"),wo(t)}function R0t(e){let t=[...e];return t[0]!=="remote"&&t.unshift("remote"),wo(t)}function k0t(e){return wo(["remote","remove",e])}var F0t=Be({"src/lib/tasks/remote.ts"(){"use strict";S0t(),bi()}}),Cxe={};xi(Cxe,{stashListTask:()=>M0t});function M0t(e={},t){let r=Tbe(e),n=["stash","list",...r.commands,...t],i=Ibe(r.splitter,r.fields,U4(n));return RM(n)||{commands:n,format:"utf-8",parser:i}}var Q0t=Be({"src/lib/tasks/stash-list.ts"(){"use strict";I_(),Bbe(),W4(),Rbe()}}),vxe={};xi(vxe,{addSubModuleTask:()=>N0t,initSubModuleTask:()=>P0t,subModuleTask:()=>FM,updateSubModuleTask:()=>L0t});function N0t(e,t){return FM(["add",e,t])}function P0t(e){return FM(["init",...e])}function FM(e){let t=[...e];return t[0]!=="submodule"&&t.unshift("submodule"),wo(t)}function L0t(e){return FM(["update",...e])}var U0t=Be({"src/lib/tasks/sub-module.ts"(){"use strict";bi()}});function O0t(e,t){let r=isNaN(e),n=isNaN(t);return r!==n?r?1:-1:r?Exe(e,t):0}function Exe(e,t){return e===t?0:e>t?1:-1}function q0t(e){return e.trim()}function pM(e){return typeof e=="string"&&parseInt(e.replace(/^\D+/g,""),10)||0}var yEe,bxe,V0t=Be({"src/lib/responses/TagList.ts"(){"use strict";yEe=class{constructor(e,t){this.all=e,this.latest=t}},bxe=function(e,t=!1){let r=e.split(`
`).map(q0t).filter(Boolean);t||r.sort(function(i,s){let o=i.split("."),a=s.split(".");if(o.length===1||a.length===1)return O0t(pM(o[0]),pM(a[0]));for(let l=0,c=Math.max(o.length,a.length);l<c;l++){let u=Exe(pM(o[l]),pM(a[l]));if(u)return u}return 0});let n=t?r[0]:[...r].reverse().find(i=>i.indexOf(".")>=0);return new yEe(r,n)}}}),xxe={};xi(xxe,{addAnnotatedTagTask:()=>G0t,addTagTask:()=>W0t,tagListTask:()=>H0t});function H0t(e=[]){let t=e.some(r=>/^--sort=/.test(r));return{format:"utf-8",commands:["tag","-l",...e],parser(r){return bxe(r,t)}}}function W0t(e){return{format:"utf-8",commands:["tag",e],parser(){return{name:e}}}}function G0t(e,t){return{format:"utf-8",commands:["tag","-a","-m",t,e],parser(){return{name:e}}}}var $0t=Be({"src/lib/tasks/tag.ts"(){"use strict";V0t()}}),Y0t=uAt({"src/git.js"(e,t){"use strict";var{GitExecutor:r}=(zAt(),fi(Abe)),{SimpleGitApi:n}=(Ymt(),fi(Jbe)),{Scheduler:i}=(Kmt(),fi(jbe)),{configurationErrorTask:s}=(bi(),fi(A4)),{asArray:o,filterArray:a,filterPrimitives:l,filterString:c,filterStringOrStringArray:u,filterType:f,getTrailingOptions:p,trailingFunctionArgument:g,trailingOptionsArgument:A}=(_t(),fi(OEe)),{applyPatchTask:y}=(Jmt(),fi(exe)),{branchTask:C,branchLocalTask:v,deleteBranchesTask:b,deleteBranchTask:w}=(a0t(),fi(oxe)),{checkIgnoreTask:B}=(u0t(),fi(cxe)),{checkIsRepoTask:F}=(WEe(),fi(qEe)),{cloneTask:Q,cloneMirrorTask:W}=(h0t(),fi(uxe)),{cleanWithOptionsTask:Z,isCleanOptionsArray:$}=(tbe(),fi(XEe)),{diffSummaryTask:ee}=(W4(),fi(Dbe)),{fetchTask:U}=(y0t(),fi(hxe)),{moveTask:ge}=(b0t(),fi(pxe)),{pullTask:Se}=(_0t(),fi(Axe)),{pushTagsTask:N}=(Wbe(),fi(Hbe)),{addRemoteTask:se,getRemotesTask:z,listRemotesTask:ne,remoteTask:Ke,removeRemoteTask:It}=(F0t(),fi(yxe)),{getResetMode:ye,resetTask:Lt}=(hbe(),fi(ube)),{stashListTask:Zt}=(Q0t(),fi(Cxe)),{addSubModuleTask:Rt,initSubModuleTask:de,subModuleTask:kr,updateSubModuleTask:ir}=(U0t(),fi(vxe)),{addAnnotatedTagTask:Lr,addTagTask:He,tagListTask:sn}=($0t(),fi(xxe)),{straightThroughBufferTask:Ur,straightThroughStringTask:fr}=(bi(),fi(A4));function be(fe,Ee){this._plugins=Ee,this._executor=new r(fe.baseDir,new i(fe.maxConcurrentProcesses),Ee),this._trimmed=fe.trimmed}(be.prototype=Object.create(n.prototype)).constructor=be,be.prototype.customBinary=function(fe){return this._plugins.reconfigure("binary",fe),this},be.prototype.env=function(fe,Ee){return arguments.length===1&&typeof fe=="object"?this._executor.env=fe:(this._executor.env=this._executor.env||{})[fe]=Ee,this},be.prototype.stashList=function(fe){return this._runTask(Zt(A(arguments)||{},a(fe)&&fe||[]),g(arguments))};function Fr(fe,Ee,bt,ln){return typeof bt!="string"?s(`git.${fe}() requires a string 'repoPath'`):Ee(bt,f(ln,c),p(arguments))}be.prototype.clone=function(){return this._runTask(Fr("clone",Q,...arguments),g(arguments))},be.prototype.mirror=function(){return this._runTask(Fr("mirror",W,...arguments),g(arguments))},be.prototype.mv=function(fe,Ee){return this._runTask(ge(fe,Ee),g(arguments))},be.prototype.checkoutLatestTag=function(fe){var Ee=this;return this.pull(function(){Ee.tags(function(bt,ln){Ee.checkout(ln.latest,fe)})})},be.prototype.pull=function(fe,Ee,bt,ln){return this._runTask(Se(f(fe,c),f(Ee,c),p(arguments)),g(arguments))},be.prototype.fetch=function(fe,Ee){return this._runTask(U(f(fe,c),f(Ee,c),p(arguments)),g(arguments))},be.prototype.silent=function(fe){return console.warn("simple-git deprecation notice: git.silent: logging should be configured using the `debug` library / `DEBUG` environment variable, this will be an error in version 3"),this},be.prototype.tags=function(fe,Ee){return this._runTask(sn(p(arguments)),g(arguments))},be.prototype.rebase=function(){return this._runTask(fr(["rebase",...p(arguments)]),g(arguments))},be.prototype.reset=function(fe){return this._runTask(Lt(ye(fe),p(arguments)),g(arguments))},be.prototype.revert=function(fe){let Ee=g(arguments);return typeof fe!="string"?this._runTask(s("Commit must be a string"),Ee):this._runTask(fr(["revert",...p(arguments,0,!0),fe]),Ee)},be.prototype.addTag=function(fe){let Ee=typeof fe=="string"?He(fe):s("Git.addTag requires a tag name");return this._runTask(Ee,g(arguments))},be.prototype.addAnnotatedTag=function(fe,Ee){return this._runTask(Lr(fe,Ee),g(arguments))},be.prototype.deleteLocalBranch=function(fe,Ee,bt){return this._runTask(w(fe,typeof Ee=="boolean"?Ee:!1),g(arguments))},be.prototype.deleteLocalBranches=function(fe,Ee,bt){return this._runTask(b(fe,typeof Ee=="boolean"?Ee:!1),g(arguments))},be.prototype.branch=function(fe,Ee){return this._runTask(C(p(arguments)),g(arguments))},be.prototype.branchLocal=function(fe){return this._runTask(v(),g(arguments))},be.prototype.raw=function(fe){let Ee=!Array.isArray(fe),bt=[].slice.call(Ee?arguments:fe,0);for(let _n=0;_n<bt.length&&Ee;_n++)if(!l(bt[_n])){bt.splice(_n,bt.length-_n);break}bt.push(...p(arguments,0,!0));var ln=g(arguments);return bt.length?this._runTask(fr(bt,this._trimmed),ln):this._runTask(s("Raw: must supply one or more command to execute"),ln)},be.prototype.submoduleAdd=function(fe,Ee,bt){return this._runTask(Rt(fe,Ee),g(arguments))},be.prototype.submoduleUpdate=function(fe,Ee){return this._runTask(ir(p(arguments,!0)),g(arguments))},be.prototype.submoduleInit=function(fe,Ee){return this._runTask(de(p(arguments,!0)),g(arguments))},be.prototype.subModule=function(fe,Ee){return this._runTask(kr(p(arguments)),g(arguments))},be.prototype.listRemote=function(){return this._runTask(ne(p(arguments)),g(arguments))},be.prototype.addRemote=function(fe,Ee,bt){return this._runTask(se(fe,Ee,p(arguments)),g(arguments))},be.prototype.removeRemote=function(fe,Ee){return this._runTask(It(fe),g(arguments))},be.prototype.getRemotes=function(fe,Ee){return this._runTask(z(fe===!0),g(arguments))},be.prototype.remote=function(fe,Ee){return this._runTask(Ke(p(arguments)),g(arguments))},be.prototype.tag=function(fe,Ee){let bt=p(arguments);return bt[0]!=="tag"&&bt.unshift("tag"),this._runTask(fr(bt),g(arguments))},be.prototype.updateServerInfo=function(fe){return this._runTask(fr(["update-server-info"]),g(arguments))},be.prototype.pushTags=function(fe,Ee){let bt=N({remote:f(fe,c)},p(arguments));return this._runTask(bt,g(arguments))},be.prototype.rm=function(fe){return this._runTask(fr(["rm","-f",...o(fe)]),g(arguments))},be.prototype.rmKeepLocal=function(fe){return this._runTask(fr(["rm","--cached",...o(fe)]),g(arguments))},be.prototype.catFile=function(fe,Ee){return this._catFile("utf-8",arguments)},be.prototype.binaryCatFile=function(){return this._catFile("buffer",arguments)},be.prototype._catFile=function(fe,Ee){var bt=g(Ee),ln=["cat-file"],_n=Ee[0];if(typeof _n=="string")return this._runTask(s("Git.catFile: options must be supplied as an array of strings"),bt);Array.isArray(_n)&&ln.push.apply(ln,_n);let _i=fe==="buffer"?Ur(ln):fr(ln);return this._runTask(_i,bt)},be.prototype.diff=function(fe,Ee){let bt=c(fe)?s("git.diff: supplying options as a single string is no longer supported, switch to an array of strings"):fr(["diff",...p(arguments)]);return this._runTask(bt,g(arguments))},be.prototype.diffSummary=function(){return this._runTask(ee(p(arguments,1)),g(arguments))},be.prototype.applyPatch=function(fe){let Ee=u(fe)?y(o(fe),p([].slice.call(arguments,1))):s("git.applyPatch requires one or more string patches as the first argument");return this._runTask(Ee,g(arguments))},be.prototype.revparse=function(){let fe=["rev-parse",...p(arguments,!0)];return this._runTask(fr(fe,!0),g(arguments))},be.prototype.clean=function(fe,Ee,bt){let ln=$(fe),_n=ln&&fe.join("")||f(fe,c)||"",_i=p([].slice.call(arguments,ln?1:0));return this._runTask(Z(_n,_i),g(arguments))},be.prototype.exec=function(fe){let Ee={commands:[],format:"utf-8",parser(){typeof fe=="function"&&fe()}};return this._runTask(Ee)},be.prototype.clearQueue=function(){return this},be.prototype.checkIgnore=function(fe,Ee){return this._runTask(B(o(f(fe,u,[]))),g(arguments))},be.prototype.checkIsRepo=function(fe,Ee){return this._runTask(F(f(fe,c)),g(arguments))},t.exports=be}});E_();ig();var K0t=class extends ff{constructor(e,t){super(void 0,t),this.config=e}};ig();ig();var df=class extends ff{constructor(e,t,r){super(e,r),this.task=e,this.plugin=t,Object.setPrototypeOf(this,new.target.prototype)}};dC();wEe();WEe();tbe();ibe();obe();cbe();hbe();function z0t(e){return e?[{type:"spawn.before",action(n,i){e.aborted&&i.kill(new df(void 0,"abort","Abort already signaled"))}},{type:"spawn.after",action(n,i){function s(){i.kill(new df(void 0,"abort","Abort signal received"))}e.addEventListener("abort",s),i.spawned.on("close",()=>e.removeEventListener("abort",s))}}]:void 0}function J0t(e){return typeof e=="string"&&e.trim().toLowerCase()==="-c"}function j0t(e,t){if(J0t(e)&&/^\s*protocol(.[a-z]+)?.allow/.test(t))throw new df(void 0,"unsafe","Configuring protocol.allow is not permitted without enabling allowUnsafeExtProtocol")}function Z0t(e,t){if(/^\s*--(upload|receive)-pack/.test(e))throw new df(void 0,"unsafe","Use of --upload-pack or --receive-pack is not permitted without enabling allowUnsafePack");if(t==="clone"&&/^\s*-u\b/.test(e))throw new df(void 0,"unsafe","Use of clone with option -u is not permitted without enabling allowUnsafePack");if(t==="push"&&/^\s*--exec\b/.test(e))throw new df(void 0,"unsafe","Use of push with option --exec is not permitted without enabling allowUnsafePack")}function X0t({allowUnsafeProtocolOverride:e=!1,allowUnsafePack:t=!1}={}){return{type:"spawn.args",action(r,n){return r.forEach((i,s)=>{let o=s<r.length?r[s+1]:"";e||j0t(i,o),t||Z0t(i,n.method)}),r}}}_t();function eyt(e){let t=y_(e,"-c");return{type:"spawn.args",action(r){return[...t,...r]}}}_t();var CEe=(0,cC.deferred)().promise;function tyt({onClose:e=!0,onExit:t=50}={}){function r(){let i=-1,s={close:(0,cC.deferred)(),closeTimeout:(0,cC.deferred)(),exit:(0,cC.deferred)(),exitTimeout:(0,cC.deferred)()},o=Promise.race([e===!1?CEe:s.closeTimeout.promise,t===!1?CEe:s.exitTimeout.promise]);return n(e,s.close,s.closeTimeout),n(t,s.exit,s.exitTimeout),{close(a){i=a,s.close.done()},exit(a){i=a,s.exit.done()},get exitCode(){return i},result:o}}function n(i,s,o){i!==!1&&(i===!0?s.promise:s.promise.then(()=>d4(i))).then(o.done)}return{type:"spawn.after",action(i,s){return A_(this,arguments,function*(o,{spawned:a,close:l}){var c,u;let f=r(),p=!0,g=()=>void(p=!1);(c=a.stdout)==null||c.on("data",g),(u=a.stderr)==null||u.on("data",g),a.on("error",g),a.on("close",A=>f.close(A)),a.on("exit",A=>f.exit(A));try{yield f.result,p&&(yield d4(50)),l(f.exitCode)}catch(A){l(f.exitCode,A)}})}}}_t();var ryt="Invalid value supplied for custom binary, requires a single string or an array containing either one or two strings",vEe="Invalid value supplied for custom binary, restricted characters must be removed or supply the unsafe.allowUnsafeCustomBinary option";function nyt(e){return!e||!/^([a-z]:)?([a-z0-9/.\\_-]+)$/i.test(e)}function EEe(e,t){if(e.length<1||e.length>2)throw new df(void 0,"binary",ryt);if(e.some(nyt))if(t)console.warn(vEe);else throw new df(void 0,"binary",vEe);let[n,i]=e;return{binary:n,prefix:i}}function iyt(e,t=["git"],r=!1){let n=EEe(Yu(t),r);e.on("binary",i=>{n=EEe(Yu(i),r)}),e.append("spawn.binary",()=>n.binary),e.append("spawn.args",i=>n.prefix?[n.prefix,...i]:i)}ig();function syt(e){return!!(e.exitCode&&e.stdErr.length)}function oyt(e){return Buffer.concat([...e.stdOut,...e.stdErr])}function ayt(e=!1,t=syt,r=oyt){return(n,i)=>!e&&n||!t(i)?n:r(i)}function bEe(e){return{type:"task.error",action(t,r){let n=e(t.error,{stdErr:r.stdErr,stdOut:r.stdOut,exitCode:r.exitCode});return Buffer.isBuffer(n)?{error:new ff(void 0,n.toString("utf-8"))}:{error:n}}}}_t();var lyt=class{constructor(){this.plugins=new Set,this.events=new _xe.EventEmitter}on(e,t){this.events.on(e,t)}reconfigure(e,t){this.events.emit(e,t)}append(e,t){let r=Pr(this.plugins,{type:e,action:t});return()=>this.plugins.delete(r)}add(e){let t=[];return Yu(e).forEach(r=>r&&this.plugins.add(Pr(t,r))),()=>{t.forEach(r=>this.plugins.delete(r))}}exec(e,t,r){let n=t,i=Object.freeze(Object.create(r));for(let s of this.plugins)s.type===e&&(n=s.action(n,i));return n}};_t();function cyt(e){let t="--progress",r=["checkout","clone","fetch","pull","push"];return[{type:"spawn.args",action(s,o){return r.includes(o.method)?REe(s,t):s}},{type:"spawn.after",action(s,o){var a;o.commands.includes(t)&&((a=o.spawned.stderr)==null||a.on("data",l=>{let c=/^([\s\S]+?):\s*(\d+)% \((\d+)\/(\d+)\)/.exec(l.toString("utf8"));c&&e({method:o.method,stage:uyt(c[1]),progress:xn(c[2]),processed:xn(c[3]),total:xn(c[4])})}))}}]}function uyt(e){return String(e.toLowerCase().split(" ",1))||"unknown"}_t();function dyt(e){let t=MEe(e,["uid","gid"]);return{type:"spawn.options",action(r){return Ll(Ll({},t),r)}}}function fyt({block:e,stdErr:t=!0,stdOut:r=!0}){if(e>0)return{type:"spawn.after",action(n,i){var s,o;let a;function l(){a&&clearTimeout(a),a=setTimeout(u,e)}function c(){var f,p;(f=i.spawned.stdout)==null||f.off("data",l),(p=i.spawned.stderr)==null||p.off("data",l),i.spawned.off("exit",c),i.spawned.off("close",c),a&&clearTimeout(a)}function u(){c(),i.kill(new df(void 0,"timeout","block timeout reached"))}r&&((s=i.spawned.stdout)==null||s.on("data",l)),t&&((o=i.spawned.stderr)==null||o.on("data",l)),i.spawned.on("exit",c),i.spawned.on("close",c),l()}}}E_();function hyt(){return{type:"spawn.args",action(e){let t=[],r;function n(i){(r=r||[]).push(...i)}for(let i=0;i<e.length;i++){let s=e[i];if(vM(s)){n($ve(s));continue}if(s==="--"){n(e.slice(i+1).flatMap(o=>vM(o)&&$ve(o)||o));break}t.push(s)}return r?[...t,"--",...r.map(String)]:t}}}_t();var gyt=Y0t();function pyt(e,t){var r;let n=new lyt,i=LEe(e&&(typeof e=="string"?{baseDir:e}:e)||{},t);if(!I4(i.baseDir))throw new K0t(i,"Cannot use simple-git on a directory that does not exist");return Array.isArray(i.config)&&n.add(eyt(i.config)),n.add(X0t(i.unsafe)),n.add(hyt()),n.add(tyt(i.completion)),i.abort&&n.add(z0t(i.abort)),i.progress&&n.add(cyt(i.progress)),i.timeout&&n.add(fyt(i.timeout)),i.spawnOptions&&n.add(dyt(i.spawnOptions)),n.add(bEe(ayt(!0))),i.errors&&n.add(bEe(i.errors)),iyt(n,i.binary,(r=i.unsafe)==null?void 0:r.allowUnsafeCustomBinary),new gyt(i,n)}dC();var wxe=pyt;var Ixe={added_file_stats:{changed_file_count:0,per_file_change_stats_head:[],per_file_change_stats_tail:[]},broken_file_stats:{changed_file_count:0,per_file_change_stats_head:[],per_file_change_stats_tail:[]},copied_file_stats:{changed_file_count:0,per_file_change_stats_head:[],per_file_change_stats_tail:[]},deleted_file_stats:{changed_file_count:0,per_file_change_stats_head:[],per_file_change_stats_tail:[]},modified_file_stats:{changed_file_count:0,per_file_change_stats_head:[],per_file_change_stats_tail:[]},renamed_file_stats:{changed_file_count:0,per_file_change_stats_head:[],per_file_change_stats_tail:[]},unmerged_file_stats:{changed_file_count:0,per_file_change_stats_head:[],per_file_change_stats_tail:[]},unknown_file_stats:{changed_file_count:0,per_file_change_stats_head:[],per_file_change_stats_tail:[]}},fC=class{git;constructor(t){try{this.git=wxe({baseDir:t,binary:"git",maxConcurrentProcesses:6,trimmed:!1})}catch{this.git=void 0}}countTokens(t){return Math.ceil(t.length/3)}async getChangedFileStats(t){let r=await this.git.status(),n=["created","deleted","modified","renamed"],i=Ixe,s=new Set(r.staged);for(let o of n){let a=[];if(o==="renamed"?a=r.renamed.map(l=>l.to):a=r[o],t.onlyUseStagedChanges&&(a=a.filter(l=>s.has(l))),a.length>0){let l=o;o==="created"&&(l="added");let c=`${l}_file_stats`;i[c].changed_file_count=a.length;let u=await Promise.all(a.map(async g=>{let{insertions:A,deletions:y}=await this.getInsertionDeletionStats(t.onlyUseStagedChanges,[g]);return{file_path:g,insertion_count:A,deletion_count:y,old_file_path:o==="renamed"&&r.renamed.find(C=>C.to===g)?.from||g}})),f=u.slice(0,5),p=u.slice(-5);i[c].per_file_change_stats_head=f,i[c].per_file_change_stats_tail=p.filter(g=>!f.find(A=>A.file_path===g.file_path))}}return i}async getInsertionDeletionStats(t,r){let n=["--staged","--shortstat"].concat(r),i=await this.git.diff(n);if(!t){let l=["--shortstat"].concat(r);i+=await this.git.diff(l)}let s=i.split(",").map(l=>l.trim()),o=parseInt(s.find(l=>l.includes("insertion"))?.split(" ")[0]||"0"),a=parseInt(s.find(l=>l.includes("deletion"))?.split(" ")[0]||"0");return{insertions:o,deletions:a}}async getTruncatedDiffs(t,r){let{insertions:n,deletions:i}=await this.getInsertionDeletionStats(t.onlyUseStagedChanges,[]);if(n+i<=t.diffNoopLineLimit){let o=await this.git.diff(["--staged","--name-only"]);t.onlyUseStagedChanges||(o+=await this.git.diff(["--name-only"]));let a=o.split(`
`).filter(Boolean),l=await Promise.all(a.map(async f=>{let p=await this.git.diff(["--staged",f]);return t.onlyUseStagedChanges||(p+=await this.git.diff([f])),{fileName:f,diff:p,tokens:this.countTokens(p)}}));l.sort((f,p)=>f.tokens-p.tokens);let c="",u=r;for(let f of l)if(u+f.tokens<=t.diffBudget)c+=f.diff+`
`,u+=f.tokens;else break;return c.trim()}else{let o=await this.git.diff(["--staged"]);return t.onlyUseStagedChanges||(o+=await this.git.diff([])),o.split(`
`).slice(0,t.diffNoopLineLimit).join(`
`).slice(0,t.diffBudget-r)}}async getCommitMessages(t){return(await this.git.log({maxCount:t})).all.map(n=>n.message)}async getCurrentAuthor(){let r=(await this.git.listConfig()).all["user.email"];return Array.isArray(r)?r[0]||void 0:r||void 0}getExampleCommitMessages(t,r,n,i){let s=[],o=0;for(let a of t.slice(r.length)){if(s.length>=i-r.length)break;let l=this.countTokens(a);if(o+l<=n)s.push(a),o+=l;else break}return s}async getRelevantCommitMessages(t,r){return this.git.log({maxCount:3}).then(n=>n.all.filter(i=>i.author_email===t.trim()).map(i=>i.message).reduce((i,s)=>{let o=this.countTokens(s);return this.countTokens(i.join(`
`))+o<=r&&i.push(s),i},[]))}async getCommitMessagePromptData(t){if(!this.git)return{changedFileStats:Ixe,diff:"",generatedCommitMessageSubrequest:{relevant_commit_messages:[],example_commit_messages:[]}};let r=await this.getChangedFileStats(t),n=this.countTokens(JSON.stringify(r)),i=await this.getTruncatedDiffs(t,n),s=await this.getCommitMessages(32),o=await this.getCurrentAuthor(),a=[],l=[];if(o){a=await this.getRelevantCommitMessages(o,t.relevantMessageSubbudget);let c=this.countTokens(a.join(`
`)),u=t.messageBudget-c;l=this.getExampleCommitMessages(s,a,u,t.maxExampleCommitMessages)}return{changedFileStats:r,diff:i,generatedCommitMessageSubrequest:{relevant_commit_messages:a,example_commit_messages:l}}}};function Sxe(e,t=!1){let r=2166136261,n=t?e.length-e.trimLeft().length:0;for(let i=n;i<e.length;i++)r^=e.charCodeAt(i),r*=16777619;return r>>>0}function Ayt(e,t){let r=e.length,n=t.length,i=Array(n+1).fill(null).map(()=>({lcsLength:0,minSubstringLength:1/0})),s=Array(n+1).fill(null).map(()=>({lcsLength:0,minSubstringLength:1/0}));i[0].minSubstringLength=0;let o=0,a=1/0,l=-1;for(let c=1;c<=r;c++){s[0]={lcsLength:0,minSubstringLength:0};for(let u=1;u<=n;u++){if(e[c-1]===t[u-1]){let f=i[u-1].lcsLength+1,p=i[u-1].minSubstringLength+1;s[u]={lcsLength:f,minSubstringLength:p}}else{let f=i[u],p=s[u-1];if(f.lcsLength>p.lcsLength){let g=f.lcsLength,A=f.minSubstringLength+1;s[u]={lcsLength:g,minSubstringLength:A}}else if(f.lcsLength<p.lcsLength){let g=p.lcsLength,A=p.minSubstringLength;s[u]={lcsLength:g,minSubstringLength:A}}else{let g=f.lcsLength,A=Math.min(f.minSubstringLength+1,p.minSubstringLength);s[u]={lcsLength:g,minSubstringLength:A}}}if(u===n){let f=s[u];(f.lcsLength>o||f.lcsLength===o&&f.minSubstringLength<a)&&(o=f.lcsLength,a=f.minSubstringLength,l=c)}}[i,s]=[s,i]}return{maxLCSLength:o,minSubstringLength:a,endIndex:l}}function Bxe(e,t){let r=e.split(`
`),n=t.trim().split(`
`);function i(p){let g=r.map(y=>Sxe(y,p)),A=n.map(y=>Sxe(y,p));return Ayt(g,A)}let s=i(!1),o=i(!0),{maxLCSLength:a,minSubstringLength:l,endIndex:c}=s.maxLCSLength>=o.maxLCSLength?s:o;if(a===0)return null;let u=c-l,f=c-1;return{start:u,end:f}}var Dxe=require("path"),zr=V(require("vscode"));async function sg(e,t=void 0){let r=(0,Dxe.resolve)(e.repoRoot,e.pathName);e.differentTab?t===void 0||zr.window.tabGroups.all.length===1?await zr.commands.executeCommand("vscode.openWith",zr.Uri.file(r),"default",zr.ViewColumn.Beside):await zr.commands.executeCommand("vscode.openWith",zr.Uri.file(r),"default",t===zr.ViewColumn.One?t+1:t-1):await zr.commands.executeCommand("vscode.open",zr.Uri.file(r));let n;if(!(!zr.window.activeTextEditor||zr.window.activeTextEditor.document.uri.fsPath!==r)){if(e.fullRange){let i=e.fullRange;n=zr.window.activeTextEditor.document.validateRange(new zr.Range(i.startLineNumber,i.startColumn,i.endLineNumber,i.endColumn))}else if(e.range){let i=e.range;n=zr.window.activeTextEditor.document.validateRange(new zr.Range(i.start-1,0,i.stop-1,999))}else if(e.snippet){let s=(await zr.workspace.openTextDocument(r)).getText(),o=Bxe(s,e.snippet);if(o===null){let a=zr.window.activeTextEditor.selection.active;n=zr.window.activeTextEditor.document.validateRange(new zr.Range(a,a))}else n=zr.window.activeTextEditor.document.validateRange(new zr.Range(o.start,0,o.end,999))}else return;zr.window.activeTextEditor?.revealRange(n),zr.window.activeTextEditor.selection=new zr.Selection(n.end,n.start)}}var Rxe=V(require("path")),Fc=V(require("vscode"));function myt(e){return e.endsWith(`
`)?e.slice(0,-1):e}function Txe(e,t){let r=e.split(`
`);for(let n of[...t].sort(({result:{charEnd:i}},{result:{charEnd:s}})=>s-i))r.splice(n.lineRange.start,n.lineRange.stop-n.lineRange.start,myt(n.result.suggestedCode));return r.join(`
`)}var CA=class e extends X{constructor(r,n,i,s,o,a,l){super();this._extensionUri=r;this._conversationId=n;this._initialIterationId=i;this._initialStage=s;this._chatApp=o;this._resolveFileService=a;this._workTimer=l;this._panel=Fc.window.createWebviewPanel(e.viewType,"Augment",Fc.ViewColumn.One,{retainContextWhenHidden:!0,enableScripts:!0}),this._detailsPanelAsyncMsgHandler=ss(this._panel.webview,this._workTimer),this._detailsPanelAsyncMsgHandler.registerHandler("autofix-panel-details-init-request",this.handleAutofixInitMessage),this._detailsPanelAsyncMsgHandler.registerHandler("autofix-panel-apply-and-retest-request",this.handleAutofixApplyAndRetestRequest.bind(this)),this._resolveFileService.register(this._detailsPanelAsyncMsgHandler),this._panel.iconPath={light:Fc.Uri.joinPath(this._extensionUri,"media","panel-icon-light.svg"),dark:Fc.Uri.joinPath(this._extensionUri,"media","panel-icon-dark.svg")},this.addDisposables(this._panel,new Fc.Disposable(()=>{e.currentPanel=void 0})),this._panel.onDidDispose(()=>{this.dispose(),e.currentPanel=void 0}),this._setHTML()}static viewType="augmentAutofixPanel";_logger=j("AutofixWebviewPanel");static currentPanel;_panel;_detailsPanelAsyncMsgHandler;get logger(){return this._logger}async _setHTML(){let r=this._panel.webview,n=Fc.Uri.joinPath(this._extensionUri,"common-webviews");r.options={enableScripts:!0,localResourceRoots:[n]};let i=r.asWebviewUri(Fc.Uri.joinPath(n,"/")),s=Ou(Vu(r),qu(),Hu(),Wu(),LF()),o=await rn(Rxe.default.join(n.fsPath,"autofix.html"));o=o.replace(/<head>/i,`<head>
            <base href="${i.toString()}" />
            <meta http-equiv="Content-Security-Policy" content="${s}">
        `),r.html=o}static launchAutofixPanel(r,n,i,s,o,a,l){if(e.currentPanel)if(e.currentPanel._conversationId===n){e.currentPanel.openSpecificStage(i,s),e.currentPanel._panel.reveal();return}else e.currentPanel.dispose();e.currentPanel=new e(r,n,i,s,o,a,l)}handleAutofixStateUpdate=async r=>{await this._panel.webview.postMessage({type:"autofix-panel-state-update",data:r.data})};handleCommandPartialOutput=async r=>{await this._panel.webview.postMessage(r)};handleAutofixInitMessage=async r=>(await this._chatApp.sendAutofixUpdateRequestMessage(),{type:"autofix-panel-open-specific-stage",data:{iterationId:this._initialIterationId,stage:this._initialStage}});handleAutofixApplyAndRetestRequest=async r=>(await this._applyAllAutofixChanges(r.data.selectedSolutions),await this._chatApp.sendAutofixSuggestionsAppliedMessage(r.data.selectedSolutions),{type:"empty"});async openSpecificStage(r,n){await this._panel.webview.postMessage({type:"autofix-panel-open-specific-stage",data:{iterationId:r,stage:n}})}async _applyAutofixChanges(r,n){let i=await rn(r),s=Txe(i,n);await ku(r,s)}async _applyAllAutofixChanges(r){let n=new Map;for(let i of r){let s=Fs(i.qualifiedPathName);n.has(s)?n.get(s).push(i):n.set(s,[i])}for(let[i,s]of n.entries())await this._applyAutofixChanges(i,s)}};var Mc=V(require("vscode"));function yyt(e){if(e.startsWith("A")||e.startsWith("="))return!0;if(e.startsWith("B"))return!1;throw new Error(`Incorrect rating: ${e}`)}function K4(e){let t;if(e.startsWith("A"))t=-1*parseInt(e.charAt(1),10);else if(e.startsWith("B"))t=parseInt(e.charAt(1),10);else if(e.startsWith("="))t=0;else throw new Error(`Incorrect rating: ${e}`);return t}var hC=class e extends ra{constructor(r,n,i,s,o,a,l,c){super("preference.html",r.webview);this._extensionUri=n;this._fuzzyFsSearcher=i;this.inputData=o;this._externalSources=l;this._userSpecifiedExternalSources=c;this._asyncMsgHandler=ss(r.webview,a),this.addDisposable(this._asyncMsgHandler),this._asyncMsgHandler.registerHandler("find-file-request",this._fuzzyFsSearcher.findFiles),this._asyncMsgHandler.registerHandler("chat-loaded",u=>Promise.resolve({type:"chat-initialize",data:{}})),this._panel=r,this._inputData=o}static currentPanel;_panel;static _logger=j("PreferenceWebviewPanel");_inputData;_asyncMsgHandler;_resolvePreference;handleMessage=r=>{if(r.type==="preference-result-message"){let n=r.data;this._resolvePreference(n),this._panel.dispose()}r.type==="preference-notify"&&Mc.window.showInformationMessage(r.data),r.type==="preference-panel-loaded"&&(e._logger.info("Preference panel loaded, sending input data"),this._panel.webview.postMessage({type:"preference-init",data:this._inputData})),r.type==="open-file"&&sg(r.data)};static async launchStandalonePreferencePanel(r,n,i,s,o=[],a=[],l){e.currentPanel&&(e.currentPanel.dispose(),e.currentPanel=void 0);let u=(Mc.window.activeTextEditor?Mc.window.activeTextEditor.viewColumn:void 0)||Mc.ViewColumn.One,f={type:"Chat",data:n,enableRetrievalDataCollection:i},p=Mc.window.createWebviewPanel("preference","Augment Preference",u,{enableScripts:!0,retainContextWhenHidden:!0,localResourceRoots:[Mc.Uri.joinPath(r,"/common-webviews")]}),g=e.currentPanel=new e(p,r,s,u,f,l,o,a);return await g.loadHTML(r),p.onDidDispose(()=>{g._resolvePreference&&g._resolvePreference(null),g.dispose()}),g.addDisposables(p,new Mc.Disposable(()=>{e.currentPanel=void 0})),p.webview.onDidReceiveMessage(g.handleMessage),e.currentPanel}async postStreamChunk(r,n){await this._panel.webview.postMessage({...r,stream:n})}async postStreamDone(){await this._panel.webview.postMessage({type:"chat-stream-done"})}async getResult(r,n,i){let s=await new Promise(o=>{this._resolvePreference=o});return s?(await this.sendResultToBackend(r,n,i,s),yyt(s.overallRating)):!0}async sendResultToBackend(r,n,i,s){let o=`${s.textFeedback}
MODEL_IDS_START_LABEL
${i?.a}
${i?.b}
MODEL_IDS_END_LABEL
IMPLICIT_EXTERNAL_SOURCES_START_LABEL
${this._externalSources?.map(a=>a.name).join(", ")??""}
IMPLICIT_EXTERNAL_SOURCES_END_LABEL
USER_SPECIFIED_EXTERNAL_SOURCES_START_LABEL
${this._userSpecifiedExternalSources?.join(", ")??""}
USER_SPECIFIED_EXTERNAL_SOURCES_END_LABEL
`;await Ii(async()=>{try{return await n.recordPreferenceSample({request_ids:[r.a,r.b],scores:{overallRating:K4(s.overallRating),formattingRating:K4(s.formattingRating),instructionFollowingRating:K4(s.instructionFollowingRating),isHighQuality:s.isHighQuality?1:0},feedback:o})}catch(a){throw e._logger.error(`Error reporting preference sample: ${a}`),a}},e._logger)}};var MM=2e5;var S_=class extends X{constructor(r,n,i,s,o,a,l,c,u,f,p,g,A,y,C,v,b,w,B,F,Q,W,Z){super();this._chatModel=r;this._chatModelConfigs=n;this._apiServer=i;this._workspaceManager=s;this._keybindingWatcher=o;this._config=a;this._extensionUri=l;this._featureFlagManager=c;this._clientMetricsReporter=u;this._actionsModel=f;this._syncingEnabledTracker=p;this._onboardingWorkspaceModel=g;this._syncingStatus=A;this._onboardingSessionEventReporter=y;this._fuzzyFsSearcher=C;this._fuzzySymbolSearcher=v;this._toolsModel=b;this._resolveFileService=w;this._checkpointManager=B;this._guidelinesWatcher=F;this._assetManager=Q;this._globalState=W;this._workTimer=Z;let $=qt.workspace.workspaceFolders?.at(0)?.uri.fsPath??"";this._commitMessagePromptPreparer=new fC($),this._remoteAgentsMessenger=new tg(this._apiServer,this._extensionUri,this._workTimer),this._gitReferenceMessenger=new oC,this._smartPasteCache=new iM(async ee=>{let U=this._apiServer.createRequestId();return Promise.resolve({generator:this._smartPasteWithChatInstruction(ee,U),requestId:U})}),this.addDisposables(this._actionsModel.onDerivedStatesSatisfied(this.handleDerivedStateChange.bind(this)),this._syncingEnabledTracker.onDidChangeSyncingEnabled(this.sendSyncEnabledStatus.bind(this)),this._guidelinesWatcher.onDidChange(this.sendCurrentGuidelinesState.bind(this)),this._smartPasteCache,this._checkpointManager.onAgentEditListHasUpdates(()=>this._notifyAgentEditListHasUpdates()))}_logger=j("ChatApp");_asyncMsgHandler;_lastKnownSourceFolders=[];_webview;_smartPasteCache;_commitMessagePromptPreparer;_remoteAgentsMessenger;_gitReferenceMessenger;appType(){return"chat"}title(){return""}register(r){this._webview=r,this._asyncMsgHandler=ss(this._webview,this._workTimer),this.addDisposable(this._asyncMsgHandler),this._asyncMsgHandler.registerHandler("find-file-request",this._fuzzyFsSearcher.findFiles),this._asyncMsgHandler.registerHandler("find-folder-request",this._fuzzyFsSearcher.findFolders),this._asyncMsgHandler.registerHandler("find-recently-opened-files",this._fuzzyFsSearcher.findRecentFiles),this._asyncMsgHandler.registerHandler("resolve-file-request",async n=>({type:"resolve-file-response",data:await this.resolveTargetPath(n.data.relPath,n.data.searchScope,n.data.exactMatch)})),this._asyncMsgHandler.registerStreamHandler("chat-user-message",this.onUserSendMessage.bind(this)),this._asyncMsgHandler.registerStreamHandler("generate-commit-message",this.generateCommitMessage.bind(this)),this._asyncMsgHandler.registerStreamHandler("chat-get-stream-request",this._chatModel.getChatStream.bind(this._chatModel)),this._asyncMsgHandler.registerHandler("chat-user-cancel",n=>this.onUserCancel(n)),this._asyncMsgHandler.registerHandler("chat-rating",this._chatModel.sendFeedback),this._asyncMsgHandler.registerHandler("save-chat",this._chatModel.saveConversation),this._asyncMsgHandler.registerHandler("chat-launch-autofix-panel",n=>this.onLaunchAutofixPanel(n)),this._asyncMsgHandler.registerHandler("chat-autofix-state-update",n=>this.handleAutofixStateUpdate(n)),this._asyncMsgHandler.registerHandler("open-confirmation-modal",n=>this.onOpenConfirmationModal(n)),this._asyncMsgHandler.registerHandler("find-external-sources-request",this.onExternalSourceSearch),this._asyncMsgHandler.registerHandler("resolve-workspace-file-chunk",this._chatModel.resolveWorkspaceFileChunk),this._asyncMsgHandler.registerHandler("find-symbol-request",this._fuzzySymbolSearcher.findSymbols),this._asyncMsgHandler.registerHandler("chat-autofix-execute-command-request",this.onExecuteCommand.bind(this)),this._asyncMsgHandler.registerHandler("chat-autofix-plan-request",this.onAutofixPlan.bind(this)),this._asyncMsgHandler.registerHandler("find-symbol-regex-request",this._fuzzySymbolSearcher.findSymbolsRegex),this._asyncMsgHandler.registerHandler("get-diagnostics-request",this._chatModel.getDiagnostics),this._asyncMsgHandler.registerHandler("report-webview-client-metric",n=>(this._clientMetricsReporter.reportWebviewClientMetric(n.data),Promise.resolve({type:"empty"}))),this._asyncMsgHandler.registerHandler("get-workspace-info-request",async()=>{await Promise.resolve(null);try{let i=this._workspaceManager.listSourceFolders().filter(o=>o.syncingEnabled).reduce((o,a)=>"trackedFileCount"in a?o+a.trackedFileCount:o,0),s=i>0?[i]:[];return{type:"get-workspace-info-response",data:{trackedFileCount:s.length>0?s:void 0}}}catch(n){return this._logger.error("Error getting workspace info:",n),{type:"get-workspace-info-response",data:{}}}}),this._asyncMsgHandler.registerHandler("show-augment-panel",this.showAugmentPanel),this._asyncMsgHandler.registerHandler("call-tool",this.callTool,!1),this._asyncMsgHandler.registerHandler("cancel-tool-run",this.cancelToolRun),this._asyncMsgHandler.registerHandler("check-safe",this.toolCheckSafe),this._asyncMsgHandler.registerHandler("checkToolExists",this.checkToolExists),this._asyncMsgHandler.registerHandler("get-ide-state-node-request",this._getChatRequestIdeState),this._asyncMsgHandler.registerHandler("getAgentEditContentsByRequestId",this._getAgentEditContentsByRequestId),this._asyncMsgHandler.registerHandler("chat-save-image-request",this._saveImage),this._asyncMsgHandler.registerHandler("chat-load-image-request",this._loadImage),this._asyncMsgHandler.registerHandler("chat-delete-image-request",this._deleteImage),this._asyncMsgHandler.registerHandler("chat-mode-changed",n=>(this._toolsModel.setMode(n.data.mode),Promise.resolve({type:"empty"}))),this._asyncMsgHandler.registerHandler("chat-get-agent-onboarding-prompt-request",async()=>{let n=zf(process.platform),i=new Fm(()=>this._config.config.agent,cn.agent,process.platform,n),s=new Lk(i,this._workspaceManager);return this._onboardingSessionEventReporter.reportEvent("saw-agent-onboarding"),Promise.resolve({type:"chat-get-agent-onboarding-prompt-response",data:{prompt:await s.getOnboardingInstructions()}})}),this._asyncMsgHandler.registerHandler("check-agent-auto-mode-approval",()=>{let n=this._globalState.get("agentAutoModeApproved");return Promise.resolve({type:"check-agent-auto-mode-approval-response",data:n??!1})}),this._asyncMsgHandler.registerHandler("set-agent-auto-mode-approved",async n=>(await this._globalState.update("agentAutoModeApproved",n.data),{type:"empty"})),this._asyncMsgHandler.registerHandler("chat-loaded",n=>{this.sendSourceFolders(),this.sendSyncStatus(),this.sendSyncEnabledStatus(),this.sendCurrentGuidelinesState(),this._onboardingWorkspaceModel.shouldShowSummary&&this.sendShowSummary(),this._actionsModel.broadcastDerivedStates();let i=qt.window.activeTextEditor;i?.document.uri?(this.sendCurrentlyOpenFiles([i.document.uri]),this.sendFileSelections(i)):this.sendCurrentlyOpenFiles([]),this._notifyAgentEditListHasUpdates();let s=this._toolsModel.memoriesAbsPath?{rootPath:"",relPath:this._toolsModel.memoriesAbsPath}:void 0;return Promise.resolve({type:"chat-initialize",data:{enablePreferenceCollection:this._config.config.preferenceCollection.enable,enableRetrievalDataCollection:this._config.config.preferenceCollection.enableRetrievalDataCollection,enableDebugFeatures:this._config.config.enableDebugFeatures,useRichTextHistory:this._config.config.chat.useRichTextHistory,modelDisplayNameToId:this.getMergedAdditionalChatModels(),fullFeatured:!0,enableExternalSourcesInChat:wr(this._featureFlagManager.currentFlags.vscodeExternalSourcesInChatMinVersion??""),smallSyncThreshold:this._featureFlagManager.currentFlags.smallSyncThreshold,bigSyncThreshold:this._featureFlagManager.currentFlags.bigSyncThreshold,enableSmartPaste:wr(this._featureFlagManager.currentFlags.enableSmartPasteMinVersion??""),enableDirectApply:!1,summaryTitles:this._featureFlagManager.currentFlags.enableSummaryTitles,suggestedEditsAvailable:wr(this._featureFlagManager.currentFlags.vscodeNextEditMinVersion??""),enableShareService:wr(this._featureFlagManager.currentFlags.vscodeShareMinVersion??""),maxTrackableFileCount:this._featureFlagManager.currentFlags.maxTrackableFileCount,enableDesignSystemRichTextEditor:wr(this._featureFlagManager.currentFlags.vscodeDesignSystemRichTextEditorMinVersion??""),enableSources:wr(this._featureFlagManager.currentFlags.vscodeSourcesMinVersion??""),enableChatMermaidDiagrams:this._featureFlagManager.currentFlags.enableChatMermaidDiagrams,smartPastePrecomputeMode:this._featureFlagManager.currentFlags.smartPastePrecomputeMode,useNewThreadsMenu:wr(this._featureFlagManager.currentFlags.vscodeNewThreadsMenuMinVersion??""),enableEditableHistory:wr(this._featureFlagManager.currentFlags.vscodeEditableHistoryMinVersion??""),enableChatMermaidDiagramsMinVersion:wr(this._featureFlagManager.currentFlags.vscodeEnableChatMermaidDiagramsMinVersion??""),enableChatMultimodal:wr(this._featureFlagManager.currentFlags.vscodeChatMultimodalMinVersion??""),enableAgentMode:wr(jk()===0?this._featureFlagManager.currentFlags.vscodeAgentModeMinVersion??"":this._featureFlagManager.currentFlags.vscodeAgentModeMinStableVersion??""),enableRichCheckpointInfo:wr(this._featureFlagManager.currentFlags.vscodeRichCheckpointInfoMinVersion??""),agentMemoriesFilePathName:s,workspaceUnpopulated:this._actionsModel.isDerivedStateSatisfied("WorkspaceNotPopulated"),truncateChatHistory:!1,enableVirtualizedMessageList:wr(this._featureFlagManager.currentFlags.vscodeVirtualizedMessageListMinVersion??""),enableBackgroundAgents:this._config.config.remoteAgent.url!==void 0}})}),this._asyncMsgHandler.registerSidecarHandler((n,i)=>{qY(n,i)}),this._resolveFileService.register(this._asyncMsgHandler),this.addDisposables(qt.window.onDidChangeTextEditorSelection(n=>{!n||n.textEditor.document.uri.scheme==="output"||(this.sendSourceFolders(),this.sendFileSelections(n.textEditor))}),this._onboardingWorkspaceModel.onShouldShowSummary(this.sendShowSummary),this._webview.onDidReceiveMessage(this.onDidReceiveMessage),this._workspaceManager.onDidChangeSourceFolders(this.sendSourceFolders),qt.window.onDidChangeActiveTextEditor(n=>{this.sendSourceFolders(),n?this.sendCurrentlyOpenFiles([n.document.uri]):(this.sendCurrentlyOpenFiles([]),this.sendFileSelections(void 0))}),this._syncingStatus.onDidChangeSyncingStatus(this.sendSyncStatus)),this._remoteAgentsMessenger.register(this._asyncMsgHandler),this._gitReferenceMessenger.register(this._asyncMsgHandler),this.updateLastKnownSourceFolders()}async*generateCommitMessage(r){let n;try{n=await this._commitMessagePromptPreparer.getCommitMessagePromptData({diffBudget:9216,messageBudget:3072,relevantMessageSubbudget:1024,diffNoopLineLimit:5e3,onlyUseStagedChanges:!1,maxExampleCommitMessages:3})}catch(i){let s=`Cannot generate commit message prompt: Failed to generate diff details. Error: ${i instanceof Error?i.message:String(i)}`;throw qt.window.showInformationMessage(s),new Error(s)}yield*this.onGenerateCommitMessage(n)}getMergedAdditionalChatModels=()=>{let r=this._config.config.chat.modelDisplayNameToId||{},n=this._featureFlagManager.currentFlags.additionalChatModels;n=n.replace(/'/g,'"');try{return{...n!==""?JSON.parse(n):{},...r}}catch(i){return this._logger.debug(`Failed to parse additional chat models: ${i.message}`),r}};onUserCancel=r=>(this._logger.debug("onUserCancel"),this._chatModel.cancelChatStream(r.data.requestId),{type:"empty"});isMemoriesFile(r){let n=this._toolsModel.memoriesAbsPath;if(!n)return!1;let i=qe.from({rootPath:"rootPath"in r?r.rootPath:r.repoRoot,relPath:"relPath"in r?r.relPath:r.pathName}),s=qe.from({rootPath:"",relPath:n});return qe.equals(i,s)}filterMemoriesFromSelectedCode(r){return r&&(this.isMemoriesFile({rootPath:"",relPath:r.path})?null:r)}sendCurrentlyOpenFiles=(0,Fxe.default)(r=>{let n=r.map(i=>this._resolvePathName(i)).filter(i=>i!==void 0).filter(i=>!this.isMemoriesFile(i));this._webview?.postMessage({type:"currently-open-files",data:n})},250);sendShowSummary=(0,og.default)(()=>{this._webview?.postMessage({type:"should-show-summary"}),this._onboardingWorkspaceModel.setShouldShowSummary(!1),this._onboardingSessionEventReporter.reportEvent("saw-summary")},250,{leading:!0,trailing:!0});sendSyncStatus=(0,og.default)(()=>{this._webview?.postMessage({type:"source-folders-sync-status",data:this._syncingStatus.status})},250,{leading:!0,trailing:!0});sendSyncEnabledStatus=(0,og.default)(()=>{this._webview?.postMessage({type:"sync-enabled-state",data:this._syncingEnabledTracker.syncingEnabledState})},250,{leading:!0,trailing:!0});sendCurrentGuidelinesState=(0,og.default)(()=>{this._webview?.postMessage({type:"update-guidelines-state",data:this._guidelinesWatcher.getGuidelinesStates()})},250,{leading:!0,trailing:!0});sendSourceFolders=(0,og.default)(()=>{this.updateLastKnownSourceFolders(),this._webview?.postMessage({type:"source-folders-updated",data:{sourceFolders:this._lastKnownSourceFolders}})},250,{leading:!0,trailing:!0});updateLastKnownSourceFolders(){this._lastKnownSourceFolders=this._workspaceManager.trackedSourceFolderNames()}sendFileSelections=(0,og.default)(r=>{if(r?.document.uri){let n=this._resolvePathName(r.document.uri);n&&!this.isMemoriesFile(n)?this._webview?.postMessage({type:"currently-open-files",data:[n]}):this._webview?.postMessage({type:"currently-open-files",data:[]}),n&&!this.isMemoriesFile(n)?this._webview?.postMessage(vCe(r,this._workspaceManager)):this._webview?.postMessage({type:"file-ranges-selected",data:[]})}else this._webview?.postMessage({type:"file-ranges-selected",data:[]})},250,{leading:!0,trailing:!0});onOpenConfirmationModal=async r=>{let n=await qt.window.showInformationMessage(r.data.message,{modal:!0},{title:r.data.cancelButtonText,isCloseAffordance:!0},{title:r.data.confirmButtonText});return{type:"confirmation-modal-response",data:{ok:n?.title===r.data.confirmButtonText}}};_handleCompleteChatReply(r){this._workspaceManager.recordChatReponse(r)}async postStreamChunksToPanel(r,n,i,s){await r.postStreamChunk({type:"chat-model-reply",data:{text:n,requestId:i,workspaceFileChunks:[]}},s)}getNextLine(r){let n=r.indexOf(`
`);return n===-1?[r,""]:[r.slice(0,n+1),r.slice(n+1)]}async*onGenerateCommitMessage(r){let n=this._apiServer.createRequestId(),i=await this._apiServer.generateCommitMessageStream(n,r);for await(let s of i)yield{type:"chat-model-reply",data:{text:s.text,requestId:n,workspaceFileChunks:[]}}}handleAutofixStateUpdate=async r=>(await CA.currentPanel?.handleAutofixStateUpdate(r),{type:"empty"});onLaunchAutofixPanel=r=>(CA.launchAutofixPanel(this._extensionUri,r.data.conversationId,r.data.iterationId,r.data.stage,this,this._resolveFileService,this._workTimer),{type:"empty"});async*onUserSendMessage(r){let n=this._apiServer.createRequestId(),i=this._workspaceManager.getContext(),s={checkpointId:void 0,addedBlobs:[],deletedBlobs:[]};(r.data.context?.userSpecifiedFiles?.length||r.data.context?.sourceFolders?.length)&&!r.data.disableRetrieval&&(s=i.blobs);let o=[];r.data.context?.userSpecifiedFiles&&!r.data.disableRetrieval&&(o=this._getBlobNames(r.data.context.userSpecifiedFiles));let a=this._guidelinesWatcher.getUserGuidelinesContent(),l=this._guidelinesWatcher.getCurrentWorkspaceGuidelinesContent(this._workspaceManager),c=[];r.data.context?.externalSources&&!r.data.disableRetrieval&&(c=r.data.context.externalSources.map(p=>p.id));let u;if((r.data.context?.selections?.length||r.data.context?.recentFiles?.length)&&!r.data.disableSelectedCodeDetails){f0e(qt.window.activeTextEditor);let p=this._chatModelConfigs.get(r.data?.modelId??"")?.suggestedPrefixCharCount??MM,g=this._chatModelConfigs.get(r.data?.modelId??"")?.suggestedSuffixCharCount??MM;u=VW(qt.window.activeTextEditor,this._workspaceManager,p,g),u=this.filterMemoriesFromSelectedCode(u)}let f=p=>{let g=this._workspaceManager;p.unknownBlobNames&&p.unknownBlobNames.length>0&&g.handleUnknownBlobs(i,p.unknownBlobNames),p.checkpointNotFound&&g.handleUnknownCheckpoint(n,s.checkpointId)};try{let p=!0;if(this._config.config.chat.stream!==!1&&!this._config.config.preferenceCollection.enable){let A="";if(r.data.memoriesInfo?.isClassifyAndDistill){let C=this._featureFlagManager.currentFlags.memoriesParams.classify_and_distill_prompt;if(!C){this._logger.error("Classify and distill prompt missing.");return}r.data.text=C.replace("{message}",r.data.text),r.data.nodes?.length&&(r.data.nodes=r.data.nodes.map(v=>v.type===al.TEXT&&v.text_node?{...v,text_node:{content:C.replace("{message}",v.text_node.content)}}:v))}else if(r.data.memoriesInfo?.isDistill){let C=this._featureFlagManager.currentFlags.memoriesParams.distill_prompt;if(!C){this._logger.error("Distill prompt missing.");return}r.data.text=C.replace("{message}",r.data.text)}let y;this._toolsModel.chatMode===cn.agent&&(y=await Uk(this._checkpointManager.getAgentMemoriesAbsPath));for await(let C of this._chatModel.chatStream({requestId:n,message:r.data.text,chatHistory:r.data.chatHistory,blobs:s,userGuidedBlobs:o,externalSourceIds:c,modelId:r.data.modelId,userGuidelines:a,workspaceGuidelines:l,toolDefinitions:(await this._toolsModel.getToolDefinitions()).map(v=>v.definition),nodes:r.data.nodes,mode:this._toolsModel.getMode(),agentMemories:y,personaType:r.data.personaType},u)){if(f(C.data),p){p=!1;let v=this._syncingStatus.status.foldersProgress.some(b=>b.progress?.newlyTracked);this._syncingStatus.status.status!=="done"&&v&&(C.data.text=`*Note: Augment is not yet fully synced and may be unable to answer questions about your workspace.*

`+C.data.text)}A+=C.data.text,yield C}this._handleCompleteChatReply(A);return}yield*await this.handlePreferenceCollection(r,n,s,o,c,u)}catch(p){if(p instanceof Qr&&p.status===We.augmentTooLarge)return yield{type:"chat-model-reply-failed",data:{text:"",requestId:n,workspaceFileChunks:[]},displayErrorMessage:"The selected text exceeds the allowable limit. Please reduce the amount of text and try again"};if(p instanceof Error)return yield{type:"chat-model-reply-failed",data:{text:"",requestId:n,workspaceFileChunks:[]},displayErrorMessage:p.message};if(String(p).startsWith("Error: Cancelled"))return;throw qt.window.showErrorMessage(`Failed to send chat message: ${p}`),p}}async handlePreferenceCollection(r,n,i,s,o,a){let l=this._featureFlagManager.currentFlags.eloModelConfiguration;if((!l.highPriorityModels||l.highPriorityModels.length<2)&&l.highPriorityThreshold!==0||(!l.regularBattleModels||l.regularBattleModels.length<2)&&l.highPriorityThreshold<1)return async function*(){await Promise.resolve(),yield{type:"chat-model-reply-failed",data:{text:"",requestId:n,workspaceFileChunks:[]},displayErrorMessage:"Model comparison is not available at this time."}}();let c=l.highPriorityThreshold;(this._chatModel._preferenceState._selectedCode!==a?.selectedCode||this._chatModel._preferenceState._filePath!==a?.path)&&(this._chatModel._preferenceState=new i_);let u={message:r,requestId:n,blobs:i,userGuidedBlobs:s,selectedCodeDetails:a};return Math.random()<c?this.handleHighPriorityTest(u,o,l.highPriorityModels):this.handleRegularBattle(u,o,l.regularBattleModels)}handleHighPriorityTest(r,n,i){let s,o;if(i.length>0&&Array.isArray(i[0])){let a=Math.floor(Math.random()*i.length);[s,o]=i[a]}else[s,o]=i.sort(()=>Math.random()-.5).slice(0,2);return Promise.resolve(this.runComparison(r,{modelId:s,modelIdB:o,externalSourceIds:n,externalSourceIdsB:n}))}handleRegularBattle(r,n,i){let s=i[Math.floor(Math.random()*i.length)],o;do o=i[Math.floor(Math.random()*i.length)];while(o===s&&i.length>1);return Promise.resolve(this.runComparison(r,{modelId:s,modelIdB:o,externalSourceIds:n,externalSourceIdsB:n}))}async*runComparison(r,n){let i=this._apiServer.createRequestId(),s=(await this._toolsModel.getToolDefinitions()).map(A=>A.definition),o=this._chatModel.chatStream({requestId:r.requestId,message:r.message.data.text,chatHistory:r.message.data.chatHistory,blobs:r.blobs,userGuidedBlobs:r.userGuidedBlobs,externalSourceIds:n.externalSourceIds,modelId:n.modelId,toolDefinitions:s,personaType:r.message.data.personaType},r.selectedCodeDetails),a=this._chatModel.chatStream({requestId:i,message:r.message.data.text,chatHistory:r.message.data.chatHistory,blobs:r.blobs,userGuidedBlobs:r.userGuidedBlobs,externalSourceIds:n.externalSourceIdsB,modelId:n.modelIdB,toolDefinitions:s,personaType:r.message.data.personaType},r.selectedCodeDetails),{responseA:l,responseB:c,workspaceFileChunksA:u,workspaceFileChunksB:f,preferencePanel:p}=await this.processStreams(o,a,r.message,r.requestId,i,n.implicitExternalSources?n.implicitExternalSources:[],[...n.externalSourceIds??[],...n.externalSourceIdsB??[]]);p.postStreamDone();let g=await p?.getResult({a:r.requestId,b:i},this._apiServer,{a:n.modelId,b:n.modelIdB});g?this._chatModel._preferenceState._selectedCodeReferenceRequestIdOptionB=this._chatModel._preferenceState._selectedCodeReferenceRequestId:this._chatModel._preferenceState._selectedCodeReferenceRequestId=this._chatModel._preferenceState._selectedCodeReferenceRequestIdOptionB,this._handleCompleteChatReply(g?l:c),yield{type:"chat-model-reply",data:{text:g?l:c,requestId:g?r.requestId:i,workspaceFileChunks:g?u:f}}}async processStreams(r,n,i,s,o,a,l){let c="",u="",f="",p="",g=[],A=[],y=await hC.launchStandalonePreferencePanel(this._extensionUri,{a:new g_(i.data.text,""),b:new g_(i.data.text,"")},this._config.config.preferenceCollection.enableRetrievalDataCollection,this._fuzzyFsSearcher,a,l,this._workTimer),C=r[Symbol.asyncIterator](),v=n[Symbol.asyncIterator](),b=await C.next(),w=await v.next();for(;!b.done||!w.done;){!b.done&&(!c.includes(`
`)||w.done)&&(c+=b.value.data.text,g=g.concat(b.value.data.workspaceFileChunks),b=await C.next()),!w.done&&(!u.includes(`
`)||b.done)&&(u+=w.value.data.text,A=A.concat(w.value.data.workspaceFileChunks),w=await v.next());let B,F;for(;(c.includes(`
`)&&u.includes(`
`)||b.done||w.done)&&([B,c]=b.done&&!c.includes(`
`)?[c,""]:this.getNextLine(c),[F,u]=w.done&&!u.includes(`
`)?[u,""]:this.getNextLine(u),f+=B,p+=F,this.postStreamChunksToPanel(y,f,s,"A"),this.postStreamChunksToPanel(y,p,o,"B"),!(c.length===0||u.length===0)););}return c&&(f+=c,this.postStreamChunksToPanel(y,f,s,"A")),u&&(p+=u,this.postStreamChunksToPanel(y,p,o,"B")),{responseA:f,responseB:p,workspaceFileChunksA:g,workspaceFileChunksB:A,preferencePanel:y}}onExternalSourceSearch=async r=>{if(!wr(this._featureFlagManager.currentFlags.vscodeExternalSourcesInChatMinVersion))return{type:"find-external-sources-response",data:{sources:[]}};let n=await this._apiServer.searchExternalSources(r.data.query,[]);return{type:"find-external-sources-response",data:n}};getActiveWorkspacePath=()=>{let r=qt.window.activeTextEditor;if(!r)return;let n=r.document.uri.fsPath;return this._workspaceManager.safeResolvePathName(n)?.rootPath};_resolvePathName(r){let n=this._workspaceManager.safeResolvePathName(r);if(n!==void 0)return{repoRoot:n.rootPath,pathName:n.relPath}}_getDefaultTargetPath=()=>{let r=qt.window.activeTextEditor;if(!r)return;let n=r.document.uri.fsPath,i=this._workspaceManager.safeResolvePathName(n);return i?Zh(i):void 0};resolveTargetPath=async(r,n=void 0,i=!0)=>{if(!r)return;let s;if($h(r))s=this._workspaceManager.safeResolvePathName(r);else{let a=this._workspaceManager.findBestWorkspaceRootMatch(r);a&&(s={rootPath:a.qualifiedPathName.rootPath,relPath:r})}if(s){let a=await this._fuzzyFsSearcher.statPath(s);if(a){let l=Zh(s);return l.fileType=a.type,l}}let o=this._fuzzyFsSearcher.findFiles({type:"find-file-request",data:{rootPath:"",relPath:r,exactMatch:i,maxResults:10,searchScope:n}});if(o.data.length>=0)return o.data[0]};async*_smartPasteWithChatInstruction(r,n){let{message:i,targetFilePath:s,targetFileContent:o}=r,a=r.selectedCodeDetails;n=n??this._apiServer.createRequestId();let l=this._workspaceManager.getContext().blobs,c=i.data.chatHistory.map(f=>({request_message:f.request_message,response_text:f.response_text,request_id:f.request_id})),u=this._chatModel.getReferenceReqId();for(let f=c.length-1;f>=0;f--){let p=c[f],g=this._chatModel.selectionCache.get(p.request_id);if(g){a=g,u=p.request_id;break}}try{let f=await this._apiServer.smartPasteStream(n,"",l,c,a?.selectedCode,a?.prefix,a?.suffix,a?.path,void 0,a?.prefixBegin,a?.suffixEnd,a?.language,i.data.generatedCode,s,o,u);for await(let p of f)yield p}catch(f){throw this._logger.error(`Error in _smartPasteWithChatInstruction: ${$e(f)}`),f}}onClearMetadataFor=r=>{let n=r.data,i=this._chatModel;n.requestIds?.forEach(s=>{i.deleteChatStream(s),i.selectionCache.remove(s)}),n.conversationIds?.forEach(s=>{this._checkpointManager.clearConversationCheckpoints(s)})};async onExecuteCommand(r){let{iterationId:n,command:i,args:s}=r.data,o=(0,kxe.spawn)(i,s,{stdio:["ignore","pipe","pipe"],shell:!0,cwd:this.getActiveWorkspacePath()}),a="",l=-1;return await new Promise((c,u)=>{o.stdout?.on("data",f=>{a+=f.toString(),CA.currentPanel?.handleCommandPartialOutput({type:"autofix-panel-execute-command-partial-output",data:{iterationId:n,output:a}})}),o.stderr?.on("data",f=>{a+=f.toString(),CA.currentPanel?.handleCommandPartialOutput({type:"autofix-panel-execute-command-partial-output",data:{iterationId:n,output:a}})}),o.on("close",f=>{l=f??-1,c()}),o.on("error",u)}),{type:"chat-autofix-execute-command-result",data:{output:a,returnCode:l}}}async _getVCSChange(){return this._workspaceManager!==void 0?await this._workspaceManager.getVCSChange():{commits:[],workingDirectory:[]}}async onAutofixPlan(r){let i=this._workspaceManager.getContext().blobs,s=await this._getVCSChange(),o=null;try{o=await this._apiServer.autofixPlan(r.data.command,s,i,r.data.steeringHistory)}catch{return{type:"chat-autofix-plan-response",data:{plan:{summary:"Error",replacements:[],originalReplacements:[]}}}}let a=o.replacements,l=await Promise.all(a.map(async c=>await Sve(this._workspaceManager,c)));return{type:"chat-autofix-plan-response",data:{plan:{summary:o.summary,replacements:l,originalReplacements:a}}}}onDidReceiveMessage=async r=>{switch(r.type){case"chat-create-file":{let n=r.data.relPath;if(n){let i=this._workspaceManager.findBestWorkspaceRootMatch(n);if(!i||i.fileType!=="Directory"){qt.window.showWarningMessage(`Directory ${Qa(n)} not found.`);break}let s=Fs({rootPath:i.qualifiedPathName.rootPath,relPath:n}),o=qt.Uri.file(s);try{await qt.workspace.fs.stat(o),qt.window.showErrorMessage(`Cannot create file at ${o.fsPath}. File already exists.`);break}catch{}try{await qt.workspace.fs.writeFile(o,Buffer.from(r.data.code));let a=await qt.workspace.openTextDocument(o);if(!a){this._logger.error(`Could not open document at ${o.fsPath} during file creation.`);break}await qt.window.showTextDocument(a)}catch(a){this._logger.error(`Could not create file at ${o.fsPath}: ${a}`)}}else{try{let i=await qt.workspace.openTextDocument({content:r.data.code}),s=i.uri;await qt.workspace.fs.writeFile(s,Buffer.from(r.data.code)),await qt.window.showTextDocument(i)}catch(i){this._logger.error(`Could not create untitled file: ${i}`)}break}break}case"chat-smart-paste":{let n=qt.window.activeTextEditor,i=null;n&&(i=VW(n,this._workspaceManager,MM,MM));let s,o=await this.resolveTargetPath(r.data.targetFile)??this._getDefaultTargetPath();if(!r.data.options?.dryRun)if(o){if(r.data.options?.requireFileConfirmation&&!(await this.onOpenConfirmationModal({type:"open-confirmation-modal",data:{title:"Apply Codeblock",message:`Are you sure you want to apply the codeblock to ${o.pathName}?`,confirmButtonText:"Apply",cancelButtonText:"Cancel"}})).data.ok)return}else{qt.window.showWarningMessage("Cannot apply codeblock. No valid target file found."),this._clientMetricsReporter.reportWebviewClientMetric({webviewName:"chat",client_metric:"chat-failed-smart-paste-resolve-file",value:1});return}if(!o)return;s=Fs({rootPath:o.repoRoot,relPath:o.pathName});let a=(await Co(s)).getText(),l=qe.from({rootPath:o.repoRoot,relPath:o.pathName}),c;!r.data.options?.dryRun&&!r.data.options?.instantApply&&this._createOrShowDiffView({smartPasteContext:{applyTime:c},document:new Uu(l,a,r.data.generatedCode)});let u,f;if(this._config.config.chat.smartPasteUsePrecomputation??!0){let p=await this._smartPasteCache.get(r.data.generatedCode,s,a,{message:r,selectedCodeDetails:i,targetFilePath:s,targetFileContent:a});if(!p){this._logger.error("Could not get valid edit stream for smart paste.");return}u=p.generator,f=p.requestId,this._clientMetricsReporter.reportWebviewClientMetric({webviewName:"chat",client_metric:"chat-precompute-smart-paste",value:1})}else{if(r.data.options?.dryRun)return;{let p=await this._smartPasteCache.getDirect({message:r,selectedCodeDetails:i,targetFilePath:s,targetFileContent:a});if(!p){this._logger.error("Could not get valid edit stream for smart paste.");return}u=p.generator,f=p.requestId,this._clientMetricsReporter.reportWebviewClientMetric({webviewName:"chat",client_metric:"chat-smart-paste",value:1})}}if(!u){this._logger.error("Could not get valid edit stream for smart paste.");return}r.data.options?.dryRun||(r.data.options?.instantApply?await mn.instantApply({extensionUri:this._extensionUri,workspaceManager:this._workspaceManager,apiServer:this._apiServer,keybindingWatcher:this._keybindingWatcher,fuzzyFsSearcher:this._fuzzyFsSearcher,fuzzySymbolSearcher:this._fuzzySymbolSearcher,workTimer:this._workTimer},{document:new Uu(l,a,r.data.generatedCode)},u):mn.startStream(DF(a,u),f,"smart-paste"));break}case"open-file":{let n=await this.resolveTargetPath(r.data.pathName,void 0,!1);if(!n&&r.data.allowOutOfWorkspace){sg(r.data);return}else if(!n)return;let i=n.repoRoot,s=n.pathName;sg({repoRoot:i,pathName:s,range:r.data.range,fullRange:r.data.fullRange,differentTab:r.data.differentTab,snippet:r.data.snippet});break}case"open-memories-file":{let n=this._toolsModel.memoriesAbsPath;if(!n)return;sg({repoRoot:"",pathName:n});break}case"main-panel-perform-action":{this.performAction(r.data);break}case"used-slash-action":{this._onboardingSessionEventReporter.reportEvent("used-slash-action");break}case"used-chat":{this._onboardingSessionEventReporter.reportEvent("used-chat");break}case"chat-clear-metadata":{this.onClearMetadataFor(r);break}case"open-guidelines":{this._openGuidelines(r.data);break}case"update-user-guidelines":{this._updateUserGuidelines(r.data);break}case"augment-link":{try{let n=r.data;if(n){let i=qt.Uri.parse(n);qt.env.openExternal(i)}}catch(n){this._logger.error(`Failed to open URL: ${$e(n)}`)}break}case"trigger-initial-orientation":{if(!this._featureFlagManager.currentFlags.memoriesParams?.enable_initial_orientation)return;await Ok(this._apiServer,this._workspaceManager,this._featureFlagManager,this._checkpointManager,Zm.onboarding);break}case"execute-command":{let n=r.data;try{await qt.commands.executeCommand(n)}catch(i){this._logger.error(`Failed to execute command ${n}: ${i}`)}break}}};_openGuidelines=r=>{if(r){let n=Mxe.default.join(r,".augment-guidelines"),i=qt.Uri.file(n);qt.commands.executeCommand("vscode.open",i);return}else{qt.commands.executeCommand("workbench.action.openSettings","augment.userGuidelines");return}};_updateUserGuidelines=r=>{qt.workspace.getConfiguration("augment.chat").update("userGuidelines",r,qt.ConfigurationTarget.Global)};_getBlobNames(r){let n=new Array;for(let i of r){let s=this._workspaceManager.getBlobName(qe.from(i));s!==void 0&&n.push(s)}return n}performAction(r){switch(r){case"disable-github-copilot":{gA.disableGitHubCopilot();break}case"disable-codeium":{gA.disableCodeium();break}case"move-extension-aside":{this._actionsModel.setSystemStateStatus("hasMovedExtensionAside","complete");break}case"open-folder":{qt.commands.executeCommand("vscode.openFolder");break}case"close-folder":{qt.commands.executeCommand("vscode.closeFolder");break}case"grant-sync-permission":{this._syncingEnabledTracker.enableSyncing();break}}}handleDerivedStateChange(r){this.sendActionsToWebview(r.map(n=>n.name))}async sendActionsToWebview(r){await this._webview?.postMessage({type:"main-panel-actions",data:r})}async sendAutofixUpdateRequestMessage(){await this._webview?.postMessage({type:"chat-autofix-state-update-request"})}async sendAutofixSuggestionsAppliedMessage(r){await this._webview?.postMessage({type:"chat-autofix-suggestions-applied",data:{selectedSolutions:r}})}onChatExtensionMessage=async r=>{switch(r){case"runSlashFix":{await this._webview?.postMessage({type:"run-slash-command",data:"fix"});break}case"runSlashExplain":{await this._webview?.postMessage({type:"run-slash-command",data:"explain"});break}case"newThread":{await this._webview?.postMessage({type:"new-thread"});break}case"runSlashTest":{await this._webview?.postMessage({type:"run-slash-command",data:"write-test"});break}case"runSlashDocument":{await this._webview?.postMessage({type:"run-slash-command",data:"document"});break}case"reset-agent-onboarding":{await this._webview?.postMessage({type:"reset-agent-onboarding"});break}}};showAugmentPanel=async()=>(await qt.commands.executeCommand($i.commandID),{type:"empty"});callTool=async r=>{let n=r.data,i=await this._chatModel.hydrateChatHistory(n.chatHistory),s=this._chatModel.limitChatHistory(i),o=await this._toolsModel.callTool(n.chatRequestId,n.toolUseId,n.name,n.input,s,n.conversationId);return{type:"call-tool-response",data:o}};cancelToolRun=async r=>(await this._toolsModel.cancelToolRun(r.data.requestId,r.data.toolUseId),{type:"cancel-tool-run-response"});toolCheckSafe=async r=>{let n=r.data,i=await this._toolsModel.checkToolCallSafe(n.name,n.input);return{type:"check-safe-response",data:{isSafe:i}}};checkToolExists=async r=>{let n=await this._toolsModel.checkToolExists(r.toolName);return{type:"checkToolExistsResponse",exists:n}};_getAgentEditContentsByRequestId=async r=>{let n=await this._checkpointManager.getCheckpointByRequestId(r.data.requestId),i=n?.files.at(0);return n===void 0||i===void 0||n.files.length!==1?Promise.resolve({type:"getAgentEditContentsByRequestId",data:void 0}):Promise.resolve({type:"getAgentEditContentsByRequestId",data:{originalCode:i.changeDocument.originalCode,modifiedCode:i.changeDocument.modifiedCode}})};_getChatRequestIdeState=async r=>{let n=qt.window.activeTextEditor?this._workspaceManager.getFolderRoot(qt.window.activeTextEditor?.document.uri):void 0,i=this._workspaceManager.getMostRecentlyChangedFolderRoot(),s=this._workspaceManager.listSourceFolders().filter(l=>l.type===0).sort(l=>l.folderRoot===n?-1:l.folderRoot===i?0:1).map(l=>({folder_root:l.folderRoot,repository_root:this._workspaceManager.getRepoRootForFolderRoot(l.folderRoot)??l.folderRoot})),o=this._toolsModel.getTool(Hn.launchProcess),a;return o&&o instanceof zy&&(a=o.processTools.getLongRunningTerminalInfo()),!a&&s.length>0&&(a={terminal_id:0,current_working_directory:s[0].folder_root}),Promise.resolve({type:"get-ide-state-node-response",data:{workspace_folders:s,workspace_folders_unchanged:!1,current_terminal:a}})};_createOrShowDiffView=r=>{mn.createOrShow({extensionUri:this._extensionUri,workspaceManager:this._workspaceManager,apiServer:this._apiServer,keybindingWatcher:this._keybindingWatcher,fuzzyFsSearcher:this._fuzzyFsSearcher,fuzzySymbolSearcher:this._fuzzySymbolSearcher,workTimer:this._workTimer},r)};_notifyAgentEditListHasUpdates=(0,og.default)(()=>{this._webview?.postMessage({type:"chat-agent-edit-list-has-updates",data:{}})},1e3,{leading:!0,trailing:!0});_saveImage=async r=>{let{filename:n,data:i}=r.data;return await this._assetManager.saveAsset(n,i),{type:"chat-save-image-response",data:n}};_deleteImage=async r=>{let n=r.data;return await this._assetManager.deleteAsset(n),{type:"chat-delete-image-response"}};_loadImage=async r=>{let n=r.data,i=await this._assetManager.loadAsset(n);return{type:"chat-load-image-response",data:i}}};var J4=V(require("vscode")),Nxe=require("vscode");var Qxe=require("vscode");var pC=class extends ct{constructor(r,n){super();this._featureFlagManager=r;this._changeWebviewAppEvent=n}type="public";static commandID="_vscode-augment.showSidebarChat";run(){this._changeWebviewAppEvent.fire("chat"),Qxe.commands.executeCommand($i.commandID)}};async function hf(e){try{await J4.commands.executeCommand($i.commandID),await J4.commands.executeCommand(pC.commandID)}catch(t){t instanceof Error&&Nxe.window.showErrorMessage(`Sorry, Augment ${e} encountered an unexpected error: ${$e(t)}`)}}var AC=class extends ta{constructor(r,n,i,s,o,a){super(s,o,a);this._extension=r;this._configListener=n;this._chatExtensionEvent=i;this._extension=r,this._configListener=n,this._chatExtensionEvent=i}type="public";canRun(){return this._extension.ready}updateSelectionToCoverDiagnostics(r){let n=lg.window.activeTextEditor;if(n){let i;if(r&&!r.every(s=>n.selection.contains(s.range))){let s=Math.min(...r.map(c=>c.range.start.line)),o=Math.max(...r.map(c=>c.range.end.line)),a=new lg.Position(s,0),l=n.document.lineAt(o).range.end;i=new lg.Range(a,l)}else n.selection.isEmpty&&(i=n.document.lineAt(n.selection.active.line).range);i&&(n.selection=new lg.Selection(i.start,i.end))}}},ag=class extends AC{static commandID="vscode-augment.chat.slash.fix";constructor(t,r,n,i){super(t,r,n,i,"Fix using Augment",!1)}async run(t,r){await hf("Quick Fix"),r&&this.updateSelectionToCoverDiagnostics(r),this._chatExtensionEvent.fire("runSlashFix")}},mC=class extends AC{static commandID="vscode-augment.chat.slash.explain";constructor(t,r,n,i){super(t,r,n,i,"Explain using Augment",!1)}async run(){await hf("Explain"),this._chatExtensionEvent.fire("runSlashExplain")}},yC=class extends AC{static commandID="vscode-augment.chat.slash.test";constructor(t,r,n,i){super(t,r,n,i,"Write test using Augment",!1)}async run(){await hf("Write a Test"),this._chatExtensionEvent.fire("runSlashTest")}},CC=class extends AC{static commandID="vscode-augment.chat.slash.document";constructor(t,r,n,i){super(t,r,n,i,"Document",!0)}async run(){await hf("Document"),this._chatExtensionEvent.fire("runSlashDocument")}};var NM=class{provideCodeActions(t,r,n,i){let s=n.diagnostics;if(s.length===0)return Promise.resolve(void 0);let o=new PM.CodeAction("Fix using Augment",PM.CodeActionKind.QuickFix);return o.command={command:ag.commandID,title:"Fix using Augment",arguments:[t.uri,s]},Promise.resolve([o])}resolveCodeAction(t,r){return t}};var j4=V(require("vscode"));var LM=class extends ct{constructor(r,n){super("Reset Agent Onboarding",!0);this._chatExtensionEvent=r;this._globalState=n}static commandID="augment.resetAgentOnboarding";type="debug";async run(){await hf("Reset Agent Onboarding"),this._chatExtensionEvent.fire("reset-agent-onboarding"),await this._globalState.update("memoriesFileOpenCount",0)}},vC=class extends ta{constructor(r,n,i){super(i,"Run Agent Initial Orientation",!0);this._extension=r;this._apiServer=n}static commandID="vscode-augment.runAgentInitialOrientation";type="debug";async run(){if(!this._extension.workspaceManager){j4.window.showErrorMessage("Workspace manager is not ready");return}if(!this._extension.agentCheckpointManager){j4.window.showErrorMessage("Agent checkpoint manager is not ready");return}await Ok(this._apiServer,this._extension.workspaceManager,this._extension.featureFlagManager,this._extension.agentCheckpointManager,Zm.command)}canRun(){return super.canRun()&&this._extension.ready}};var vA=class e extends ct{constructor(r,n,i,s){super(s);this._auth=r;this._oauthFlow=n;this._commandID=i}static signInCommandID="vscode-augment.signIn";static signOutCommandID="vscode-augment.signOut";type="public";async run(){this.commandID===e.signInCommandID?await this._oauthFlow.startFlow():await this._auth.removeSession()}canRun(){return this._auth.useOAuth?this.commandID===e.signOutCommandID?this._auth.isLoggedIn===!0:!this._auth.isLoggedIn:!1}};var Lxe=require("child_process"),EC=V(require("fs")),EA=require("path"),mr=V(require("vscode"));var Z4=class{documents=new Map;setDocumentContent(t,r){this.documents.set(t.toString(),r)}provideTextDocumentContent(t){return this.documents.get(t.toString())}},UM=class e extends ct{constructor(r,n){super();this._extension=r;this._apiServer=n;this._outputChannel=mr.window.createOutputChannel("Autofix Command Output")}static commandID="vscode-augment.autofixCommand";type="public";static testCommandHistory=[];_outputChannel;_chunkCount=32;_autofixLogger=j("AutofixCommand");async _locationToChunkContents(r,n){let i=(0,EA.join)(n,r.path),o=(await EC.promises.readFile(i,{encoding:"utf8"})).split(`
`),a=0,l=Math.max(r.range.start-a,0),c=Math.min(r.range.stop+a,o.length);return{path:r.path,content:o.slice(l,c).join(`
`),start_line:l,end_line:c}}_clearAndShowOutput(r){this._outputChannel.clear(),this._outputChannel.appendLine(r),this._outputChannel.show()}async _openDiffForChanges(r,n){let i=r.map(async s=>{let o="virtual",a=new Z4,l=mr.workspace.registerTextDocumentContentProvider(o,a),c=mr.Uri.parse(`${o}:/${s.path}.right`);a.setDocumentContent(c,s.targetContent),await mr.commands.executeCommand("vscode.diff",mr.Uri.file((0,EA.join)(n,s.path)),c,`Diff - ${s.path}`),await new Promise(u=>{let f=mr.workspace.onDidCloseTextDocument(p=>{p.uri.toString()===c.toString()&&(f.dispose(),l.dispose(),u())})})});await Promise.all(i)}async _getTestCommand(){let r=mr.window.createQuickPick();r.placeholder="Enter the test command to run (e.g. `pytest`)",r.ignoreFocusOut=!0;let n=()=>{let s=r.value?[{label:r.value,description:"New command"}]:[],o=e.testCommandHistory.filter(a=>a.toLowerCase()!==r.value.toLowerCase()).map(a=>({label:a,description:"Previous command"}));r.items=[...s,...o]};r.onDidChangeValue(n),n(),r.show();let i=await new Promise(s=>{r.onDidAccept(()=>{let o=r.selectedItems[0]?.label||r.value;s(o||void 0),r.hide()}),r.onDidHide(()=>s(void 0))});return r.dispose(),i&&(e.testCommandHistory=[i,...e.testCommandHistory.filter(s=>s!==i)].slice(0,10)),i}_runCommand(r,n,i=!1){return i&&this._clearAndShowOutput("Running command: "+r),new Promise(s=>{let o=r.split(" "),a=o[0],l=o.slice(1),c=(0,Lxe.spawn)(a,l,{cwd:n,stdio:["ignore","pipe","pipe"],shell:!0}),u="";c.stdout.on("data",f=>{u+=f.toString(),i&&this._outputChannel.append(f.toString())}),c.stderr.on("data",f=>{u+=f.toString(),i&&this._outputChannel.append(f.toString())}),c.on("close",f=>{s({output:u,success:f===0})}),c.on("error",f=>{s({output:f.message,success:!1})})})}async _askYesNo(r,n=""){let i={modal:!0,detail:n},s=[{title:"Yes"},{title:"No",isCloseAffordance:!0}];return await mr.window.showInformationMessage(r,i,...s)===s[0]}async _getEditLocations(r,n,i,s,o,a){let l=await this._apiServer.nextEditLocation(a,r,"",n,[],i,[],[],o,!1);if(l.checkpointNotFound)throw new Error("Checkpoint not found");if(l.candidateLocations.length===0)throw new Error("No candidate locations found");return Promise.all(l.candidateLocations.map(async c=>this._locationToChunkContents(c.item,s)))}async _diffToChunks(r){return Promise.all(r.map(n=>{let i=n.afterContent.split(`
`);return{path:n.afterPath,content:n.afterContent,start_line:0,end_line:i.length-1}}))}async _applyChanges(r,n,i){if(n&&await this._askYesNo("Would you like to apply and test the changes?")){for(let o of r){let{path:a,targetContent:l}=o;await EC.promises.writeFile((0,EA.join)(i,a),l)}if((await this._runCommand(n,i,!0)).success)mr.window.showInformationMessage("The tests has passed.");else{let o="Command failed. Keep changes anyway?";if(!await this._askYesNo(o,"return code != 0"))for(let a of r){let{path:l,sourceContent:c}=a;await EC.promises.writeFile((0,EA.join)(i,l),c)}}}}_checkOutputReturn(r){return r.success&&r.output.length>0}async _getGitDiffObject(r,n){let i=`git diff ${r} --name-status -M`,o=(await this._runGitCommand(i,n)).split(`
`),a=[];for(let l of o){let[c,...u]=l.split("	"),f=u[0],p=u[u.length-1],g;switch(c[0]){case"M":if(g=tr.modified,f!==p)throw new Error("Unexpected change type: modified with rename");break;case"A":g=tr.added,f="";break;case"D":g=tr.deleted,p="";break;case"R":if(g=tr.renamed,f===p)throw new Error("Unexpected change type: rename with no change");break;default:continue}let A="",y="";if(g!==tr.added){let C=`git show ${r}:${f}`,v=await this._runCommand(C,n);if(!v.success)throw new Error("Failed to execute git command");A=v.output}if(g!==tr.deleted){let C=(0,EA.join)(n,p);y=await EC.promises.readFile(C,{encoding:"utf8"})}a.push({beforePath:f,afterPath:p,changeType:g,beforeContent:A,afterContent:y})}return a}_diffToVCSChange(r){let n=new rh(1e3);return{commits:[],workingDirectory:r.map(i=>{let s=n.calculateNoThrow(i.afterPath,i.afterContent)||"",o=n.calculateNoThrow(i.afterPath,i.afterContent)||"";return{beforePath:i.beforePath,afterPath:i.afterPath,changeType:i.changeType,headBlobName:s,indexedBlobName:o,currentBlobName:o}})}}async _uploadBlobs(r,n){let i=[];r.workingDirectory.forEach((s,o)=>{s.currentBlobName&&i.push({pathName:s.afterPath||"",text:n[o].afterContent,blobName:s.currentBlobName,metadata:[]}),s.headBlobName&&i.push({pathName:s.beforePath||"",text:n[o].beforeContent,blobName:s.headBlobName,metadata:[]})});try{await Promise.all(i.map(s=>this._apiServer.batchUpload([s])))}catch{}}async _runGitCommand(r,n){let i=await this._runCommand(r,n);if(!this._checkOutputReturn(i))throw new Error(`Failed to execute git command: ${r}
Output: ${i.output}`);return i.output.trimEnd()}async run(){if(!this._extension.workspaceManager)throw new Error("Workspace manager is not ready");let r=this._extension.workspaceManager.getContext();if(!mr.workspace.workspaceFolders||mr.workspace.workspaceFolders.length===0){mr.window.showErrorMessage("No workspace folders");return}let n=mr.workspace.workspaceFolders[0].uri.fsPath,i=await this._runGitCommand("git rev-parse --show-toplevel",n),s=await this._runGitCommand("git rev-parse --abbrev-ref origin/HEAD",i),o=await this._runGitCommand("git rev-parse --abbrev-ref HEAD",i),a=N=>N.slice(N.lastIndexOf("/")+1),l="HEAD";a(o)!==a(s)&&(l=await this._runGitCommand(`git merge-base HEAD ${s}`,i));let c=`git diff -U10 ${l}`,u=await this._runCommand(c,i);if(!this._checkOutputReturn(u)){mr.window.showErrorMessage(`Failed to get git diff: ${u.output}`);return}let f;try{f=await this._getGitDiffObject(l,i)}catch(N){mr.window.showErrorMessage(`Failed to parse git diff: ${N instanceof Error?N.message:String(N)}`);return}let p=this._diffToVCSChange(f);try{await this._uploadBlobs(p,f)}catch(N){mr.window.showErrorMessage(`Failed to upload blobs: ${N instanceof Error?N.message:String(N)}`);return}let g=await this._getTestCommand();if(!g){mr.window.showInformationMessage("No test command provided.");return}let A=await this._runCommand(g,i,!0),y="The tests has passed, would you like to continue anyway?";if(A.success&&!await this._askYesNo(y,"return code: 0"))return;if(A.output.length===0){mr.window.showInformationMessage("No command output found.");return}let C=this._apiServer.createRequestId();this._autofixLogger.info(`Requesting edit locations with requestId=${C}`);let v=this._getEditLocations(A.output,p,r.blobs,i,this._chunkCount,C);C=this._apiServer.createRequestId(),this._autofixLogger.info(`Requesting check command with requestId=${C}`);let b=this._apiServer.checkCommand(g,A.output,C);C=this._apiServer.createRequestId(),this._autofixLogger.info(`Requesting contain errors with requestId=${C}`);let w=this._apiServer.containErrors(g,A.output,C);try{let N=await b,se="Command doesn't appear code-related. Continue anyway?";if(N.result)mr.window.showInformationMessage("\u2705 Command check passed.");else if(!await this._askYesNo(se,N.desc))return}catch(N){mr.window.showErrorMessage(`Failed to check command: ${N instanceof Error?N.message:String(N)}`);return}try{let N=await w,se="Couldn't find errors in the output. Continue anyway?";if(N.result)mr.window.showInformationMessage("\u2705 Contain errors check passed.");else if(!await this._askYesNo(se,N.desc))return}catch(N){mr.window.showErrorMessage(`Failed to check for errors: ${N instanceof Error?N.message:String(N)}`);return}let B;try{B=await v}catch(N){mr.window.showErrorMessage(`Failed to get edit locations: ${N instanceof Error?N.message:String(N)}`);return}let F=f.filter(N=>N.afterPath!==""),Q=F.map(N=>N.afterPath),W=await this._diffToChunks(F),Z=B.filter(N=>!Q.includes(N.path)).concat(W);mr.window.showInformationMessage(`Found ${B.length} potential edit locations.`),mr.window.showInformationMessage("Creating fix plan...");let $;try{C=this._apiServer.createRequestId(),this._autofixLogger.info(`Requesting create fix plan with requestId=${C}`),$=await this._apiServer.createFixPlan(u.output,g,A.output,Z,C)}catch(N){mr.window.showErrorMessage(`Failed to create fix plan: ${N instanceof Error?N.message:String(N)}`);return}let ee=`Changes:
${$.changes.map(N=>`- ${N.path}`).join(`
`)}`,U=`${$.fix_desc}

${ee}`,ge=Promise.all($.changes.map(async N=>{let se=(0,EA.join)(i,N.path),z=await EC.promises.readFile(se,{encoding:"utf8"});return C=this._apiServer.createRequestId(),this._autofixLogger.info(`Requesting apply file fix with requestId=${C}`),this._apiServer.applyFileFix(N,z,C)}));if(!await this._askYesNo("Do you confirm the the following fix?",U))return;mr.window.showInformationMessage("Generating patch...");let Se;try{Se=await ge}catch(N){mr.window.showErrorMessage(`Failed to generate patch: ${N instanceof Error?N.message:String(N)}`);return}if(Se=Se.filter(N=>N.targetContent!==N.sourceContent),Se.length===0){mr.window.showWarningMessage("Sorry, no changes to apply.");return}mr.window.showInformationMessage("Close all diff views to continue.");try{await this._openDiffForChanges(Se,i)}catch(N){N instanceof Error&&mr.window.showErrorMessage(`Failed to open diff views: ${N.message}`);return}try{await this._applyChanges(Se,g,i)}catch(N){mr.window.showErrorMessage(`Failed to apply changes: ${N instanceof Error?N.message:String(N)}`);return}}};var f1=V(require("vscode"));var Fi=V(require("vscode"));var bA=V(require("vscode"));var B_=(n=>(n.showDiffInHover="showDiffInHover",n.highlightSuggestionsInTheEditor="highlightSuggestionsInTheEditor",n.enableAutoApply="enableAutoApply",n))(B_||{}),OM=class extends X{constructor(r,n,i){super();this.configListener=r;this.featureFlagManager=n;this.augmentGlobalState=i;this.addDisposable(this.featureFlagManager.subscribe(["vscodeNextEditUx2MaxVersion"],s=>void this.processUxMigration(s)))}get config(){return Cyt(this.configListener.config,this.featureFlagManager)}async toggleSetting(r){let n=bA.workspace.getConfiguration("augment"),i="nextEdit."+B_[r],s=n.inspect(i),o=bA.ConfigurationTarget.Global;return s?.workspaceValue!==void 0&&(o=bA.ConfigurationTarget.Workspace),n.update(i,!this.configListener.config.nextEdit[r],o)}async setGlobalBooleanSetting(r,n){let i=bA.workspace.getConfiguration("augment"),s="nextEdit."+B_[r];return i.update(s,n,bA.ConfigurationTarget.Global)}async processUxMigration({newFlags:r}){let n=this.augmentGlobalState.get("nextEditUxMigrationStatus");dG(r.vscodeNextEditUx2MaxVersion)&&n?.ux3ToUx2Status!==!0?(await Promise.all([this.setGlobalBooleanSetting("showDiffInHover",!0),this.setGlobalBooleanSetting("enableAutoApply",!1)]),await this.augmentGlobalState.update("nextEditUxMigrationStatus",{...n,ux3ToUx2Status:!0})):!dG(r.vscodeNextEditUx2MaxVersion)&&n?.ux2ToUx3Status!==!0&&n?.ux3ToUx2Status===!0&&(await Promise.all([this.setGlobalBooleanSetting("showDiffInHover",void 0),this.setGlobalBooleanSetting("enableAutoApply",void 0)]),await this.augmentGlobalState.update("nextEditUxMigrationStatus",{...n,ux2ToUx3Status:!0}))}};function Cyt(e,t){return{enableAutoApply:e.nextEdit.enableAutoApply,showDiffInHover:e.nextEdit.showDiffInHover,enablePanel:e.nextEdit.enableBottomPanel??wr(t.currentFlags.vscodeNextEditBottomPanelMinVersion)??!1}}var nn=class extends ta{constructor(r,n,i,s,o=!0,a=!1){super(i,s,o);this._extension=r;this._configListener=n;this._isFileRequired=a}type="debug";static _generateHref(r,n,...i){return`command:${r}?${encodeURIComponent(JSON.stringify([n,...i]))}`}canRun(){return super.canRun()&&this._extension.ready&&Ul(this._configListener.config,this._extension.featureFlagManager.currentFlags.vscodeNextEditMinVersion)&&(this._isFileRequired?Fi.window.activeTextEditor!==void 0:!0)}_getEventSource(r){if(r.length===0)return"command";for(let n in Rs){if(!isNaN(Number(n)))continue;let i=Rs[n];if(r[0]===i)return i}return r.length===2&&r[0]instanceof Fi.Uri&&"groupId"in r[1]?"editor-action-click":r.length===1&&r[0]instanceof Fi.Uri?"right-click":r.length===1&&r[0]===void 0?"next-edit-panel-item-click":"command"}},qM=class extends nn{type="public";static commandID="vscode-augment.next-edit.force";constructor(t,r,n){super(t,r,n,void 0,void 0,!0)}canRun(){return super.canRun()}run(...t){this._extension.forceNextEditSuggestion(this._getEventSource(t))}},VM=class extends nn{type="public";static commandID="vscode-augment.next-edit.update";constructor(t,r,n){super(t,r,n,void 0,!0,!1)}run(...t){this._extension.nextEditUpdate(this._getEventSource(t))}},HM=class extends nn{type="private";static commandID="_vscode-augment.next-edit.update.loading";constructor(t,r,n){super(t,r,n,void 0,!1)}run(){this._extension.noopClicked()}},WM=class extends nn{type="private";static commandID="_vscode-augment.next-edit.update.disabled-no-changes";constructor(t,r,n){super(t,r,n,void 0,!1)}run(){this._extension.noopClicked()}},GM=class extends nn{type="private";static commandID="_vscode-augment.next-edit.update.disabled-cached";constructor(t,r,n){super(t,r,n,void 0,!1)}run(){this._extension.noopClicked()}},Qc=class extends nn{type="public";static commandID="vscode-augment.next-edit.background.accept";constructor(t,r,n){super(t,r,n,void 0)}static generateHref(t,r){return super._generateHref(this.commandID,t,r)}run(...t){this._extension.editorNextEdit?.accept(this._getEventSource(t),void 0,typeof t[1]=="string"?t[1]:void 0)}},xA=class extends nn{type="public";static commandID="vscode-augment.next-edit.background.accept-all";constructor(t,r,n){super(t,r,n,void 0,!0)}run(...t){this._extension.editorNextEdit?.acceptAllSuggestions(this._getEventSource(t))}},gf=class extends nn{type="private";static commandID="_vscode-augment.next-edit.background.accept-code-action";constructor(t,r,n){super(t,r,n,void 0,!1)}run(t){this._extension.editorNextEdit?.acceptSuggestion(t,"code-action")}},Nc=class extends nn{type="public";static commandID="vscode-augment.next-edit.background.reject";constructor(t,r,n){super(t,r,n,void 0)}static generateHref(t="hover-click",r){return super._generateHref(this.commandID,t,r)}run(...t){this._extension.editorNextEdit?.reject(this._getEventSource(t),typeof t[1]=="string"?t[1]:void 0)}},_A=class extends nn{type="public";static commandID="vscode-augment.next-edit.background.reject-all";constructor(t,r,n){super(t,r,n,void 0,!0)}run(...t){this._extension.editorNextEdit?.rejectAllSuggestions(this._getEventSource(t))}},zu=class extends nn{type="public";static commandID="vscode-augment.next-edit.background.dismiss";constructor(t,r,n){super(t,r,n,void 0)}run(...t){this._extension.editorNextEdit?.dismissOrReject(this._getEventSource(t))}},Ga=class extends nn{type="public";static commandID="vscode-augment.next-edit.background.goto-hinting";constructor(t,r,n){super(t,r,n,void 0)}run(...t){this._extension.editorNextEdit?.gotoHinting(this._getEventSource(t))}},oa=class extends nn{type="public";static commandID="vscode-augment.next-edit.background.next";constructor(t,r,n){super(t,r,n,void 0)}run(...t){this._extension.editorNextEdit?.next(this._getEventSource(t))}},Ju=class extends nn{type="public";static commandID="vscode-augment.next-edit.background.previous";constructor(t,r,n){super(t,r,n,void 0)}run(...t){this._extension.editorNextEdit?.previous(this._getEventSource(t))}},$M=class extends nn{type="private";static commandID="_vscode-augment.next-edit.background.open";constructor(t,r,n){super(t,r,n,void 0,!1)}run(...t){let r=t[0];this._extension.editorNextEdit?.openSuggestionAt(r.uri,r.lineNumber-1)}},YM=class extends nn{type="public";static commandID="vscode-augment.next-edit.toggle-panel-horizontal-split";constructor(t,r,n){super(t,r,n,void 0,!1)}run(...t){this._extension.nextEditTogglePanelHorizontalSplit(this._getEventSource(t))}},cg=class extends nn{type="public";static commandID="vscode-augment.next-edit.learn-more";constructor(t,r,n){super(t,r,n,void 0,!0)}static generateHref(t="hover-click",r){return super._generateHref(this.commandID,t,r)}run(...t){this._extension.nextEditLearnMore(this._getEventSource(t))}},KM=class extends nn{type="private";static commandID="_vscode-augment.next-edit.background.next.disabled";constructor(t,r,n){super(t,r,n,void 0,!1)}run(){this._extension.noopClicked()}},zM=class extends nn{type="private";static commandID="_vscode-augment.next-edit.background.previous.disabled";constructor(t,r,n){super(t,r,n,void 0,!1)}run(){this._extension.noopClicked()}},ju=class extends nn{constructor(r,n,i){super(r,n,i,void 0,r.nextEditConfigManager.config.enablePanel);this.extension=r}type="public";static commandID="vscode-augment.next-edit.open-panel";get showInActionPanel(){return this.extension.nextEditConfigManager.config.enablePanel}static generateHref(r="hover-click",n){return"command:augment-next-edit.focus"}run(...r){this._extension.openNextEditPanel(this._getEventSource(r))}},Io=class extends nn{type="private";static commandID="_vscode-augment.next-edit.undo-accept-suggestion";constructor(t,r,n){super(t,r,n,void 0,!1)}static generateHref(t="hover-click",r){return super._generateHref(this.commandID,t,r)}run(...t){this._extension.editorNextEdit?.undoAcceptSuggestion(void 0,this._getEventSource(t))}},bC=class extends nn{type="private";static commandID="_vscode-augment.next-edit.toggle-hover-diff";constructor(t,r,n){super(t,r,n,void 0,!1)}static generateHref(t="hover-click",r){return super._generateHref(this.commandID,t,r)}run(...t){this._extension.editorNextEdit?.toggleHoverDiff(this._getEventSource(t),typeof t[1]=="string"?t[1]:void 0)}},JM=class e extends nn{type="public";static commandID="vscode-augment.next-edit.toggle-bg";static backgroundSuggestionsConfigKey="nextEdit.enableBackgroundSuggestions";defaultParams={promptFirst:!1,newValue:void 0};constructor(t,r,n){super(t,r,n,()=>r.config.nextEdit.enableBackgroundSuggestions?"Turn Background Suggestions Off":"Turn Background Suggestions On",!0)}async run(t){let r={...this.defaultParams,...t},n=Fi.workspace.getConfiguration("augment"),i=n.inspect(e.backgroundSuggestionsConfigKey),s=Fi.ConfigurationTarget.Global;i?.workspaceValue!==void 0&&(s=Fi.ConfigurationTarget.Workspace);let o=r.newValue??!this._configListener.config.nextEdit.enableBackgroundSuggestions;if(r.promptFirst&&o===!1){let a=await Fi.window.showErrorMessage("Are you sure you want to disable Next Edit Suggestions?",{modal:!0,detail:"You can re-enable them in Settings > Augment > Enable Background Suggestions."},"Disable","Go to Settings");if(a==="Go to Settings"&&Fi.commands.executeCommand("workbench.action.openSettings","@ext:augment.vscode-augment nextEdit.enableBackgroundSuggestions"),a!=="Disable")return}await n.update(e.backgroundSuggestionsConfigKey,o,s)}},jM=class extends nn{type="public";static commandID="vscode-augment.next-edit.toggle-all-highlights";constructor(t,r,n){super(t,r,n,()=>this._configListener.config.nextEdit.highlightSuggestionsInTheEditor?"Turn Off All Line Highlights":"Turn On All Line Highlights")}canRun(){return super.canRun()}run(){this._extension.nextEditConfigManager.toggleSetting("highlightSuggestionsInTheEditor")}},D_=class e extends nn{type="public";static commandID="vscode-augment.next-edit.enable-bg";static backgroundSuggestionsConfigKey="nextEdit.enableBackgroundSuggestions";constructor(t,r,n){super(t,r,n,()=>"Enable Background Suggestions",!0)}canRun(){return super.canRun()&&this._extension.ready&&!this._configListener.config.nextEdit.enableBackgroundSuggestions}async run(){let t=Fi.workspace.getConfiguration("augment");if(t.get(e.backgroundSuggestionsConfigKey))return;let r=t.inspect(e.backgroundSuggestionsConfigKey),n=Fi.ConfigurationTarget.Global;r?.workspaceValue!==void 0&&(n=Fi.ConfigurationTarget.Workspace),await t.update(e.backgroundSuggestionsConfigKey,!0,n)}},ZM=class e extends nn{type="public";static commandID="vscode-augment.next-edit.disable-bg";static backgroundSuggestionsConfigKey="nextEdit.enableBackgroundSuggestions";constructor(t,r,n){super(t,r,n,()=>"Disable Background Suggestions",!0)}canRun(){return super.canRun()&&this._extension.ready&&this._configListener.config.nextEdit.enableBackgroundSuggestions}async run(){let t=Fi.workspace.getConfiguration("augment");if(!t.get(D_.backgroundSuggestionsConfigKey))return;let r=t.inspect(e.backgroundSuggestionsConfigKey),n=Fi.ConfigurationTarget.Global;r?.workspaceValue!==void 0&&(n=Fi.ConfigurationTarget.Workspace),await t.update(e.backgroundSuggestionsConfigKey,!1,n)}},XM=class e extends nn{constructor(r,n,i,s){super(r,n,i,e.title);this._globalState=s}static title="Reset Next Edit Onboarding";static commandID="_vscode-augment.next-edit.reset-onboarding";type="debug";canRun(){return this._configListener.config.enableDebugFeatures&&super.canRun()}async run(){await this._globalState.update("nextEditSuggestionSeen",void 0),await this._globalState.update("nextEditSuggestionAccepted",void 0),await this._globalState.update("nextEditKeybindingUsageCount",void 0),await this._globalState.update("nextEditUxMigrationStatus",void 0)}},e1=class extends nn{static commandID="vscode-augment.next-edit.settings";type="public";constructor(t,r,n){super(t,r,n,()=>"Enable Background Suggestions",!1)}run(){Fi.commands.executeCommand("workbench.action.openSettings","@ext:augment.vscode-augment augment.nextEdit")}};var u1=V(require("fs")),r_e=V(a8()),n_e=V(require("os")),i_e=V(require("path")),Ol=V(require("vscode"));var k_=class{_keyCodeToStr;_strToKeyCode;constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(t,r){this._keyCodeToStr[t]=r,this._strToKeyCode[r.toLowerCase()]=t}keyCodeToStr(t){return this._keyCodeToStr[t]}strToKeyCode(t){return this._strToKeyCode[t.toLowerCase()]||0}},s1=new k_,l8=new k_,c8=new k_,Byt=new Array(230),Dyt={},zxe=[],Jxe=Object.create(null),jxe=Object.create(null),o1={lowerCaseToEnum:e=>jxe[e]||0,toEnum:e=>Jxe[e]||0,toString:e=>zxe[e]||"None"},Zxe=[],u8=[];for(let e=0;e<=193;e++)Zxe[e]=-1;for(let e=0;e<=132;e++)u8[e]=-1;(function(){let e="",t=[[1,0,"None",0,"unknown",0,"VK_UNKNOWN",e,e],[1,1,"Hyper",0,e,0,e,e,e],[1,2,"Super",0,e,0,e,e,e],[1,3,"Fn",0,e,0,e,e,e],[1,4,"FnLock",0,e,0,e,e,e],[1,5,"Suspend",0,e,0,e,e,e],[1,6,"Resume",0,e,0,e,e,e],[1,7,"Turbo",0,e,0,e,e,e],[1,8,"Sleep",0,e,0,"VK_SLEEP",e,e],[1,9,"WakeUp",0,e,0,e,e,e],[0,10,"KeyA",31,"A",65,"VK_A",e,e],[0,11,"KeyB",32,"B",66,"VK_B",e,e],[0,12,"KeyC",33,"C",67,"VK_C",e,e],[0,13,"KeyD",34,"D",68,"VK_D",e,e],[0,14,"KeyE",35,"E",69,"VK_E",e,e],[0,15,"KeyF",36,"F",70,"VK_F",e,e],[0,16,"KeyG",37,"G",71,"VK_G",e,e],[0,17,"KeyH",38,"H",72,"VK_H",e,e],[0,18,"KeyI",39,"I",73,"VK_I",e,e],[0,19,"KeyJ",40,"J",74,"VK_J",e,e],[0,20,"KeyK",41,"K",75,"VK_K",e,e],[0,21,"KeyL",42,"L",76,"VK_L",e,e],[0,22,"KeyM",43,"M",77,"VK_M",e,e],[0,23,"KeyN",44,"N",78,"VK_N",e,e],[0,24,"KeyO",45,"O",79,"VK_O",e,e],[0,25,"KeyP",46,"P",80,"VK_P",e,e],[0,26,"KeyQ",47,"Q",81,"VK_Q",e,e],[0,27,"KeyR",48,"R",82,"VK_R",e,e],[0,28,"KeyS",49,"S",83,"VK_S",e,e],[0,29,"KeyT",50,"T",84,"VK_T",e,e],[0,30,"KeyU",51,"U",85,"VK_U",e,e],[0,31,"KeyV",52,"V",86,"VK_V",e,e],[0,32,"KeyW",53,"W",87,"VK_W",e,e],[0,33,"KeyX",54,"X",88,"VK_X",e,e],[0,34,"KeyY",55,"Y",89,"VK_Y",e,e],[0,35,"KeyZ",56,"Z",90,"VK_Z",e,e],[0,36,"Digit1",22,"1",49,"VK_1",e,e],[0,37,"Digit2",23,"2",50,"VK_2",e,e],[0,38,"Digit3",24,"3",51,"VK_3",e,e],[0,39,"Digit4",25,"4",52,"VK_4",e,e],[0,40,"Digit5",26,"5",53,"VK_5",e,e],[0,41,"Digit6",27,"6",54,"VK_6",e,e],[0,42,"Digit7",28,"7",55,"VK_7",e,e],[0,43,"Digit8",29,"8",56,"VK_8",e,e],[0,44,"Digit9",30,"9",57,"VK_9",e,e],[0,45,"Digit0",21,"0",48,"VK_0",e,e],[1,46,"Enter",3,"Enter",13,"VK_RETURN",e,e],[1,47,"Escape",9,"Escape",27,"VK_ESCAPE",e,e],[1,48,"Backspace",1,"Backspace",8,"VK_BACK",e,e],[1,49,"Tab",2,"Tab",9,"VK_TAB",e,e],[1,50,"Space",10,"Space",32,"VK_SPACE",e,e],[0,51,"Minus",88,"-",189,"VK_OEM_MINUS","-","OEM_MINUS"],[0,52,"Equal",86,"=",187,"VK_OEM_PLUS","=","OEM_PLUS"],[0,53,"BracketLeft",92,"[",219,"VK_OEM_4","[","OEM_4"],[0,54,"BracketRight",94,"]",221,"VK_OEM_6","]","OEM_6"],[0,55,"Backslash",93,"\\",220,"VK_OEM_5","\\","OEM_5"],[0,56,"IntlHash",0,e,0,e,e,e],[0,57,"Semicolon",85,";",186,"VK_OEM_1",";","OEM_1"],[0,58,"Quote",95,"'",222,"VK_OEM_7","'","OEM_7"],[0,59,"Backquote",91,"`",192,"VK_OEM_3","`","OEM_3"],[0,60,"Comma",87,",",188,"VK_OEM_COMMA",",","OEM_COMMA"],[0,61,"Period",89,".",190,"VK_OEM_PERIOD",".","OEM_PERIOD"],[0,62,"Slash",90,"/",191,"VK_OEM_2","/","OEM_2"],[1,63,"CapsLock",8,"CapsLock",20,"VK_CAPITAL",e,e],[1,64,"F1",59,"F1",112,"VK_F1",e,e],[1,65,"F2",60,"F2",113,"VK_F2",e,e],[1,66,"F3",61,"F3",114,"VK_F3",e,e],[1,67,"F4",62,"F4",115,"VK_F4",e,e],[1,68,"F5",63,"F5",116,"VK_F5",e,e],[1,69,"F6",64,"F6",117,"VK_F6",e,e],[1,70,"F7",65,"F7",118,"VK_F7",e,e],[1,71,"F8",66,"F8",119,"VK_F8",e,e],[1,72,"F9",67,"F9",120,"VK_F9",e,e],[1,73,"F10",68,"F10",121,"VK_F10",e,e],[1,74,"F11",69,"F11",122,"VK_F11",e,e],[1,75,"F12",70,"F12",123,"VK_F12",e,e],[1,76,"PrintScreen",0,e,0,e,e,e],[1,77,"ScrollLock",84,"ScrollLock",145,"VK_SCROLL",e,e],[1,78,"Pause",7,"PauseBreak",19,"VK_PAUSE",e,e],[1,79,"Insert",19,"Insert",45,"VK_INSERT",e,e],[1,80,"Home",14,"Home",36,"VK_HOME",e,e],[1,81,"PageUp",11,"PageUp",33,"VK_PRIOR",e,e],[1,82,"Delete",20,"Delete",46,"VK_DELETE",e,e],[1,83,"End",13,"End",35,"VK_END",e,e],[1,84,"PageDown",12,"PageDown",34,"VK_NEXT",e,e],[1,85,"ArrowRight",17,"RightArrow",39,"VK_RIGHT","Right",e],[1,86,"ArrowLeft",15,"LeftArrow",37,"VK_LEFT","Left",e],[1,87,"ArrowDown",18,"DownArrow",40,"VK_DOWN","Down",e],[1,88,"ArrowUp",16,"UpArrow",38,"VK_UP","Up",e],[1,89,"NumLock",83,"NumLock",144,"VK_NUMLOCK",e,e],[1,90,"NumpadDivide",113,"NumPad_Divide",111,"VK_DIVIDE",e,e],[1,91,"NumpadMultiply",108,"NumPad_Multiply",106,"VK_MULTIPLY",e,e],[1,92,"NumpadSubtract",111,"NumPad_Subtract",109,"VK_SUBTRACT",e,e],[1,93,"NumpadAdd",109,"NumPad_Add",107,"VK_ADD",e,e],[1,94,"NumpadEnter",3,e,0,e,e,e],[1,95,"Numpad1",99,"NumPad1",97,"VK_NUMPAD1",e,e],[1,96,"Numpad2",100,"NumPad2",98,"VK_NUMPAD2",e,e],[1,97,"Numpad3",101,"NumPad3",99,"VK_NUMPAD3",e,e],[1,98,"Numpad4",102,"NumPad4",100,"VK_NUMPAD4",e,e],[1,99,"Numpad5",103,"NumPad5",101,"VK_NUMPAD5",e,e],[1,100,"Numpad6",104,"NumPad6",102,"VK_NUMPAD6",e,e],[1,101,"Numpad7",105,"NumPad7",103,"VK_NUMPAD7",e,e],[1,102,"Numpad8",106,"NumPad8",104,"VK_NUMPAD8",e,e],[1,103,"Numpad9",107,"NumPad9",105,"VK_NUMPAD9",e,e],[1,104,"Numpad0",98,"NumPad0",96,"VK_NUMPAD0",e,e],[1,105,"NumpadDecimal",112,"NumPad_Decimal",110,"VK_DECIMAL",e,e],[0,106,"IntlBackslash",97,"OEM_102",226,"VK_OEM_102",e,e],[1,107,"ContextMenu",58,"ContextMenu",93,e,e,e],[1,108,"Power",0,e,0,e,e,e],[1,109,"NumpadEqual",0,e,0,e,e,e],[1,110,"F13",71,"F13",124,"VK_F13",e,e],[1,111,"F14",72,"F14",125,"VK_F14",e,e],[1,112,"F15",73,"F15",126,"VK_F15",e,e],[1,113,"F16",74,"F16",127,"VK_F16",e,e],[1,114,"F17",75,"F17",128,"VK_F17",e,e],[1,115,"F18",76,"F18",129,"VK_F18",e,e],[1,116,"F19",77,"F19",130,"VK_F19",e,e],[1,117,"F20",78,"F20",131,"VK_F20",e,e],[1,118,"F21",79,"F21",132,"VK_F21",e,e],[1,119,"F22",80,"F22",133,"VK_F22",e,e],[1,120,"F23",81,"F23",134,"VK_F23",e,e],[1,121,"F24",82,"F24",135,"VK_F24",e,e],[1,122,"Open",0,e,0,e,e,e],[1,123,"Help",0,e,0,e,e,e],[1,124,"Select",0,e,0,e,e,e],[1,125,"Again",0,e,0,e,e,e],[1,126,"Undo",0,e,0,e,e,e],[1,127,"Cut",0,e,0,e,e,e],[1,128,"Copy",0,e,0,e,e,e],[1,129,"Paste",0,e,0,e,e,e],[1,130,"Find",0,e,0,e,e,e],[1,131,"AudioVolumeMute",117,"AudioVolumeMute",173,"VK_VOLUME_MUTE",e,e],[1,132,"AudioVolumeUp",118,"AudioVolumeUp",175,"VK_VOLUME_UP",e,e],[1,133,"AudioVolumeDown",119,"AudioVolumeDown",174,"VK_VOLUME_DOWN",e,e],[1,134,"NumpadComma",110,"NumPad_Separator",108,"VK_SEPARATOR",e,e],[0,135,"IntlRo",115,"ABNT_C1",193,"VK_ABNT_C1",e,e],[1,136,"KanaMode",0,e,0,e,e,e],[0,137,"IntlYen",0,e,0,e,e,e],[1,138,"Convert",0,e,0,e,e,e],[1,139,"NonConvert",0,e,0,e,e,e],[1,140,"Lang1",0,e,0,e,e,e],[1,141,"Lang2",0,e,0,e,e,e],[1,142,"Lang3",0,e,0,e,e,e],[1,143,"Lang4",0,e,0,e,e,e],[1,144,"Lang5",0,e,0,e,e,e],[1,145,"Abort",0,e,0,e,e,e],[1,146,"Props",0,e,0,e,e,e],[1,147,"NumpadParenLeft",0,e,0,e,e,e],[1,148,"NumpadParenRight",0,e,0,e,e,e],[1,149,"NumpadBackspace",0,e,0,e,e,e],[1,150,"NumpadMemoryStore",0,e,0,e,e,e],[1,151,"NumpadMemoryRecall",0,e,0,e,e,e],[1,152,"NumpadMemoryClear",0,e,0,e,e,e],[1,153,"NumpadMemoryAdd",0,e,0,e,e,e],[1,154,"NumpadMemorySubtract",0,e,0,e,e,e],[1,155,"NumpadClear",131,"Clear",12,"VK_CLEAR",e,e],[1,156,"NumpadClearEntry",0,e,0,e,e,e],[1,0,e,5,"Ctrl",17,"VK_CONTROL",e,e],[1,0,e,4,"Shift",16,"VK_SHIFT",e,e],[1,0,e,6,"Alt",18,"VK_MENU",e,e],[1,0,e,57,"Meta",91,"VK_COMMAND",e,e],[1,157,"ControlLeft",5,e,0,"VK_LCONTROL",e,e],[1,158,"ShiftLeft",4,e,0,"VK_LSHIFT",e,e],[1,159,"AltLeft",6,e,0,"VK_LMENU",e,e],[1,160,"MetaLeft",57,e,0,"VK_LWIN",e,e],[1,161,"ControlRight",5,e,0,"VK_RCONTROL",e,e],[1,162,"ShiftRight",4,e,0,"VK_RSHIFT",e,e],[1,163,"AltRight",6,e,0,"VK_RMENU",e,e],[1,164,"MetaRight",57,e,0,"VK_RWIN",e,e],[1,165,"BrightnessUp",0,e,0,e,e,e],[1,166,"BrightnessDown",0,e,0,e,e,e],[1,167,"MediaPlay",0,e,0,e,e,e],[1,168,"MediaRecord",0,e,0,e,e,e],[1,169,"MediaFastForward",0,e,0,e,e,e],[1,170,"MediaRewind",0,e,0,e,e,e],[1,171,"MediaTrackNext",124,"MediaTrackNext",176,"VK_MEDIA_NEXT_TRACK",e,e],[1,172,"MediaTrackPrevious",125,"MediaTrackPrevious",177,"VK_MEDIA_PREV_TRACK",e,e],[1,173,"MediaStop",126,"MediaStop",178,"VK_MEDIA_STOP",e,e],[1,174,"Eject",0,e,0,e,e,e],[1,175,"MediaPlayPause",127,"MediaPlayPause",179,"VK_MEDIA_PLAY_PAUSE",e,e],[1,176,"MediaSelect",128,"LaunchMediaPlayer",181,"VK_MEDIA_LAUNCH_MEDIA_SELECT",e,e],[1,177,"LaunchMail",129,"LaunchMail",180,"VK_MEDIA_LAUNCH_MAIL",e,e],[1,178,"LaunchApp2",130,"LaunchApp2",183,"VK_MEDIA_LAUNCH_APP2",e,e],[1,179,"LaunchApp1",0,e,0,"VK_MEDIA_LAUNCH_APP1",e,e],[1,180,"SelectTask",0,e,0,e,e,e],[1,181,"LaunchScreenSaver",0,e,0,e,e,e],[1,182,"BrowserSearch",120,"BrowserSearch",170,"VK_BROWSER_SEARCH",e,e],[1,183,"BrowserHome",121,"BrowserHome",172,"VK_BROWSER_HOME",e,e],[1,184,"BrowserBack",122,"BrowserBack",166,"VK_BROWSER_BACK",e,e],[1,185,"BrowserForward",123,"BrowserForward",167,"VK_BROWSER_FORWARD",e,e],[1,186,"BrowserStop",0,e,0,"VK_BROWSER_STOP",e,e],[1,187,"BrowserRefresh",0,e,0,"VK_BROWSER_REFRESH",e,e],[1,188,"BrowserFavorites",0,e,0,"VK_BROWSER_FAVORITES",e,e],[1,189,"ZoomToggle",0,e,0,e,e,e],[1,190,"MailReply",0,e,0,e,e,e],[1,191,"MailForward",0,e,0,e,e,e],[1,192,"MailSend",0,e,0,e,e,e],[1,0,e,114,"KeyInComposition",229,e,e,e],[1,0,e,116,"ABNT_C2",194,"VK_ABNT_C2",e,e],[1,0,e,96,"OEM_8",223,"VK_OEM_8",e,e],[1,0,e,0,e,0,"VK_KANA",e,e],[1,0,e,0,e,0,"VK_HANGUL",e,e],[1,0,e,0,e,0,"VK_JUNJA",e,e],[1,0,e,0,e,0,"VK_FINAL",e,e],[1,0,e,0,e,0,"VK_HANJA",e,e],[1,0,e,0,e,0,"VK_KANJI",e,e],[1,0,e,0,e,0,"VK_CONVERT",e,e],[1,0,e,0,e,0,"VK_NONCONVERT",e,e],[1,0,e,0,e,0,"VK_ACCEPT",e,e],[1,0,e,0,e,0,"VK_MODECHANGE",e,e],[1,0,e,0,e,0,"VK_SELECT",e,e],[1,0,e,0,e,0,"VK_PRINT",e,e],[1,0,e,0,e,0,"VK_EXECUTE",e,e],[1,0,e,0,e,0,"VK_SNAPSHOT",e,e],[1,0,e,0,e,0,"VK_HELP",e,e],[1,0,e,0,e,0,"VK_APPS",e,e],[1,0,e,0,e,0,"VK_PROCESSKEY",e,e],[1,0,e,0,e,0,"VK_PACKET",e,e],[1,0,e,0,e,0,"VK_DBE_SBCSCHAR",e,e],[1,0,e,0,e,0,"VK_DBE_DBCSCHAR",e,e],[1,0,e,0,e,0,"VK_ATTN",e,e],[1,0,e,0,e,0,"VK_CRSEL",e,e],[1,0,e,0,e,0,"VK_EXSEL",e,e],[1,0,e,0,e,0,"VK_EREOF",e,e],[1,0,e,0,e,0,"VK_PLAY",e,e],[1,0,e,0,e,0,"VK_ZOOM",e,e],[1,0,e,0,e,0,"VK_NONAME",e,e],[1,0,e,0,e,0,"VK_PA1",e,e],[1,0,e,0,e,0,"VK_OEM_CLEAR",e,e]],r=[],n=[];for(let i of t){let[s,o,a,l,c,u,f,p,g]=i;if(n[o]||(n[o]=!0,zxe[o]=a,Jxe[a]=o,jxe[a.toLowerCase()]=o,s&&(Zxe[o]=l,l!==0&&l!==3&&l!==5&&l!==4&&l!==6&&l!==57&&(u8[l]=o))),!r[l]){if(r[l]=!0,!c)throw new Error(`String representation missing for key code ${l} around scan code ${a}`);s1.define(l,c),l8.define(l,p||c),c8.define(l,g||p||c)}u&&(Byt[u]=l),f&&(Dyt[f]=l)}u8[3]=46})();var F_;(o=>{function e(a){return s1.keyCodeToStr(a)}o.toString=e;function t(a){return s1.strToKeyCode(a)}o.fromString=t;function r(a){return l8.keyCodeToStr(a)}o.toUserSettingsUS=r;function n(a){return c8.keyCodeToStr(a)}o.toUserSettingsGeneral=n;function i(a){return l8.strToKeyCode(a)||c8.strToKeyCode(a)}o.fromUserSettings=i;function s(a){if(a>=98&&a<=113)return null;switch(a){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return s1.keyCodeToStr(a)}o.toElectronAccelerator=s})(F_||={});var d8=class{unexpectedErrorHandler;listeners;constructor(){this.listeners=[],this.unexpectedErrorHandler=function(t){setTimeout(()=>{throw t.stack?a1.isErrorNoTelemetry(t)?new a1(t.message+`

`+t.stack):new Error(t.message+`

`+t.stack):t},0)}}addListener(t){return this.listeners.push(t),()=>{this._removeListener(t)}}emit(t){this.listeners.forEach(r=>{r(t)})}_removeListener(t){this.listeners.splice(this.listeners.indexOf(t),1)}setUnexpectedErrorHandler(t){this.unexpectedErrorHandler=t}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(t){this.unexpectedErrorHandler(t),this.emit(t)}onUnexpectedExternalError(t){this.unexpectedErrorHandler(t)}},P5t=new d8;function Xxe(e){return e?new Error(`Illegal argument: ${e}`):new Error("Illegal argument")}var a1=class e extends Error{name;constructor(t){super(t),this.name="CodeExpectedError"}static fromError(t){if(t instanceof e)return t;let r=new e;return r.message=t.message,r.stack=t.stack,r}static isErrorNoTelemetry(t){return t.name==="CodeExpectedError"}};var xC=class e{constructor(t,r,n,i,s){this.ctrlKey=t;this.shiftKey=r;this.altKey=n;this.metaKey=i;this.keyCode=s}equals(t){return t instanceof e&&this.ctrlKey===t.ctrlKey&&this.shiftKey===t.shiftKey&&this.altKey===t.altKey&&this.metaKey===t.metaKey&&this.keyCode===t.keyCode}getHashCode(){let t=this.ctrlKey?"1":"0",r=this.shiftKey?"1":"0",n=this.altKey?"1":"0",i=this.metaKey?"1":"0";return`K${t}${r}${n}${i}${this.keyCode}`}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}toKeybinding(){return new SA([this])}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}},dg=class e{constructor(t,r,n,i,s){this.ctrlKey=t;this.shiftKey=r;this.altKey=n;this.metaKey=i;this.scanCode=s}equals(t){return t instanceof e&&this.ctrlKey===t.ctrlKey&&this.shiftKey===t.shiftKey&&this.altKey===t.altKey&&this.metaKey===t.metaKey&&this.scanCode===t.scanCode}getHashCode(){let t=this.ctrlKey?"1":"0",r=this.shiftKey?"1":"0",n=this.altKey?"1":"0",i=this.metaKey?"1":"0";return`S${t}${r}${n}${i}${this.scanCode}`}isDuplicateModifierCase(){return this.ctrlKey&&(this.scanCode===157||this.scanCode===161)||this.shiftKey&&(this.scanCode===158||this.scanCode===162)||this.altKey&&(this.scanCode===159||this.scanCode===163)||this.metaKey&&(this.scanCode===160||this.scanCode===164)}},SA=class{chords;constructor(t){if(t.length===0)throw Xxe("chords");this.chords=t}getHashCode(){let t="";for(let r=0,n=this.chords.length;r<n;r++)r!==0&&(t+=";"),t+=this.chords[r].getHashCode();return t}equals(t){if(t===null||this.chords.length!==t.chords.length)return!1;for(let r=0;r<this.chords.length;r++)if(!this.chords[r].equals(t.chords[r]))return!1;return!0}};var l1=class{static _readModifiers(t){t=t.toLowerCase().trim();let r=!1,n=!1,i=!1,s=!1,o;do o=!1,/^ctrl(\+|\-)/.test(t)&&(r=!0,t=t.substr(5),o=!0),/^shift(\+|\-)/.test(t)&&(n=!0,t=t.substr(6),o=!0),/^alt(\+|\-)/.test(t)&&(i=!0,t=t.substr(4),o=!0),/^meta(\+|\-)/.test(t)&&(s=!0,t=t.substr(5),o=!0),/^win(\+|\-)/.test(t)&&(s=!0,t=t.substr(4),o=!0),/^cmd(\+|\-)/.test(t)&&(s=!0,t=t.substr(4),o=!0);while(o);let a,l=t.indexOf(" ");return l>0?(a=t.substring(0,l),t=t.substring(l)):(a=t,t=""),{remains:t,ctrl:r,shift:n,alt:i,meta:s,key:a}}static parseChord(t){let r=this._readModifiers(t),n=r.key.match(/^\[([^\]]+)\]$/);if(n){let s=n[1],o=o1.lowerCaseToEnum(s);return[new dg(r.ctrl,r.shift,r.alt,r.meta,o),r.remains]}let i=F_.fromUserSettings(r.key);return[new xC(r.ctrl,r.shift,r.alt,r.meta,i),r.remains]}static parseKeybinding(t){if(!t)return null;let r=[],n;for(;t.length>0;)[n,t]=this.parseChord(t),r.push(n);return r.length>0?new SA(r):null}};var d1=class{constructor(t,r){this.platform=t;this.keybindings=r}},Lc=class e extends X{constructor(r){super();this._globalState=r;if(this.defaultKeybindings=this.getDefaultKeybindings(),!this.isRemote&&!this.isWeb){this.platform=n_e.default.platform();let n=sCe();if(n){let i=i_e.default.join(n,e.keybindingFileName);this.userKeybindings=this.getUserKeybindings(i),this.watcher=u1.default.watch(n,(s,o)=>{o===e.keybindingFileName&&(e._logger.info(`keybindings file changed: ${s} ${o}`),this.userKeybindings=this.getUserKeybindings(i))}),this.addDisposable({dispose:()=>{this.watcher?.close()}})}}else{let n=this._globalState.get("userKeybindingInfo");this.platform=n?.platform,this.userKeybindings=n?.keybindings??{},this.addDisposable(Ol.workspace.onDidSaveTextDocument(i=>{i.uri.scheme==="vscode-userdata"&&i.fileName.endsWith(e.keybindingFileName)&&(this.platform=this.getPlatformFromFilename(i.fileName),this.userKeybindings=this.getUserKeybindingsFromJSON(i.fileName,i.getText()),this._globalState.update("userKeybindingInfo",new d1(this.platform,this.userKeybindings)))})),setTimeout(()=>{this.tryToFindPlatformAndUserKeybindings()},e.remoteHeuristicDelayMs)}}static remoteHeuristicDelayMs=1e3*5;static _logger=j("KeybindingWatcher");static keybindingFileName="keybindings.json";isRemote=Ol.env.remoteName!==void 0;isWeb=Ol.env.uiKind===Ol.UIKind.Web;platform;watcher;defaultKeybindings={};userKeybindings={};async tryToFindPlatformAndUserKeybindings(){if(this.isRemote&&this.platform===void 0){let n=(await Ol.workspace.openTextDocument(Ol.Uri.from({scheme:"output",path:"exthost"}))).getText(),i=/Skipping acquiring lock for (.*)\./,s=n.match(i);if(s){e._logger.debug("Loading user keybindings");let a=s[1].replace(/workspaceStorage.*/,e.keybindingFileName);this.platform=this.getPlatformFromFilename(a);let l=await Ol.workspace.openTextDocument(Ol.Uri.from({scheme:"vscode-userdata",path:a}));this.userKeybindings=this.getUserKeybindingsFromJSON(l.fileName,l.getText()),this._globalState.update("userKeybindingInfo",new d1(this.platform,this.userKeybindings))}}}getKeybindingForCommand(r,n=!1){let i=this.userKeybindings[r];if(!i){if(this.userKeybindings["-"+r])return;let o=this.defaultKeybindings[r];o&&(this.platform!==void 0||o.key===o.mac)&&(i=o)}let s;return i?(this.platform===void 0?s=Array.from(new Set([i.key,i.mac])).filter(o=>o!==void 0).join("/"):this.platform==="darwin"&&i.mac?s=i.mac:s=i.key,n?e.formatKeyboardShortcut(s,this.getSimplifiedPlatform()):s):null}static getStructuredKeybinding(r){try{if(!r)return null;let n=l1.parseKeybinding(r);return n?new f8(n.chords):null}catch(n){return this._logger.warn(`error parsing keybinding ${r}`,n),null}}static formatKeyboardShortcut(r,n){try{let i=e.getStructuredKeybinding(r);return i?i.toPrettyString(n):""}catch(i){return this._logger.warn("error formatting keybinding, returning unformatted keybinding.",i),r||""}}getSimplifiedPlatform(){return this.platform==="darwin"?"darwin":this.platform==="win32"?"win32":"linux"}getDefaultKeybindings(){let r=jh();if(r&&r.contributes&&r.contributes.keybindings){let{keybindings:n}=r.contributes;return Object.fromEntries(n.map(i=>[i.command,i]))}return{}}getUserKeybindings(r){if(u1.default.existsSync(r)){let n=u1.default.readFileSync(r,"utf8");return this.getUserKeybindingsFromJSON(r,n)}return{}}getUserKeybindingsFromJSON(r,n){try{let i=r_e.default.parse(n);return Object.fromEntries(i.map(s=>[s.command,s]))}catch(i){return e._logger.debug(`Failed to parse '${r}': ${i.message}`),{}}}getPlatformFromFilename(r){return r.startsWith("/Users/")?"darwin":r.match(/^\/?[a-zA-Z](?::|%3A)\/.*/)?"win32":"linux"}},c1={meta:{darwin:"\u2318",win32:"Win",linux:"Meta"},ctrl:{darwin:"\u2303",win32:"Ctrl",linux:"Ctrl"},alt:{darwin:"\u2325",win32:"Alt",linux:"Alt"},shift:"\u21E7"},t_e={Enter:"\u23CE",UpArrow:"\u2191",DownArrow:"\u2193",Backspace:"\u232B",Escape:"Esc"},f8=class extends SA{constructor(t){super(t)}toPrettyString(t){let r=[];for(let n of this.chords){let i=[];n.ctrlKey&&i.push(c1.ctrl[t]),n.shiftKey&&i.push(c1.shift),n.altKey&&i.push(c1.alt[t]),n.metaKey&&i.push(c1.meta[t]);let s;n instanceof xC?s=F_.toString(n.keyCode):s=o1.toString(n.scanCode),s in t_e&&(s=t_e[s]),s=s.charAt(0).toUpperCase()+s.substring(1).toLowerCase(),i.push(s),i.join("").length<=2||t==="darwin"?r.push(i.join("")):r.push(i.join("+"))}return r.indexOf("Unknown")!==-1?"":r.join(" ").trim()}};function Ul(e,t){return e.nextEdit.enabled??wr(t)}function M_(e,t){return e.nextEdit.enableBackgroundSuggestions&&e.nextEdit.backgroundEnabled&&Ul(e,t)}function _C(){let e=f1.window.tabGroups.activeTabGroup?.activeTab?.input;return e instanceof f1.TabInputTextDiff||e!=null&&Object.hasOwn(e,"base")&&Object.hasOwn(e,"input1")&&Object.hasOwn(e,"input2")}var h8=e=>{let t=new Map;for(let r of e.filter(Boolean))t.set(r.result.suggestionId,r);return Array.from(t.values())},Q_=(...e)=>t=>e.some(r=>r(t));function wC(e){return e?.state==="accepted"}function gi(e){return e?.state==="fresh"&&e.changeType!=="noop"}function Zu(e,t,r=!1){let n=e.getKeybindingForCommand(t,r);return n||(t===Io.commandID?(e.getSimplifiedPlatform()==="darwin"?n="Cmd+Z":n="Ctrl+Z",r?Lc.formatKeyboardShortcut(n,e.getSimplifiedPlatform()):n):t==="redo"?(e.getSimplifiedPlatform()==="darwin"?n="Cmd+Shift+Z":n="Ctrl+Y",r?Lc.formatKeyboardShortcut(n,e.getSimplifiedPlatform()):n):n)}var h1=class e extends ct{constructor(r,n){super(e.title);this._extension=r;this._configListener=n}static title="Clear Recent Editing History";static commandID="vscode-augment.clear-recent-editing-history";type="public";run(){this._extension.clearFileEdits()}canRun(){return super.canRun()&&this._extension.ready&&Ul(this._configListener.config,this._extension.featureFlagManager.currentFlags.vscodeNextEditMinVersion)}};var p1=require("vscode");var Tyt=j("CopySessionIdPanelCommand"),g1=class extends ct{constructor(r){super();this._apiServer=r}static commandID="vscode-augment.copySessionId";type="public";async run(){try{let r=this._apiServer.sessionId;await p1.env.clipboard.writeText(r),await p1.window.showInformationMessage("Copied session ID to clipboard")}catch(r){Tyt.error(`Failed to copy session ID: ${r}`)}}};var BA=class e extends ct{constructor(r){super("Start Extension CPU Profile");this._flagManager=r}static commandID="vscode-augment.cpu-profile.start";static isProfileRunning=!1;type="debug";run(){!this._flagManager.currentFlags.vscodeEnableCpuProfile||e.isProfileRunning||(e.markAsRunning(),console.profile())}canRun(){return this._flagManager.currentFlags.vscodeEnableCpuProfile&&!e.isProfileRunning}static markAsRunning(){e.isProfileRunning=!0}static markAsNotRunning(){e.isProfileRunning=!1}},A1=class extends ct{constructor(r){super("End Extension CPU Profile");this._flagManager=r}static commandID="vscode-augment.cpu-profile.stop";type="debug";run(){BA.isProfileRunning&&(console.profileEnd(),BA.markAsNotRunning())}canRun(){return BA.isProfileRunning}};var yf=class extends ct{constructor(r,n,i=!0){super(n,i);this._config=r}type="debug";canRun(){return this._config.config.enableDebugFeatures}};var m1=class e extends yf{constructor(r,n,i){super(n,e.title);this._syncingEnabledTracker=r;this._extension=i}static title="$(sync) Enable workspace syncing";static commandID="vscode-augment.enable-workspace-syncing";run(){this._syncingEnabledTracker.syncingEnabledState!=="initializing"&&this._syncingEnabledTracker.enableSyncing()}canRun(){let r=this._syncingEnabledTracker.syncingEnabledState;return super.canRun()&&this._extension.ready&&(r==="disabled"||r==="partial")}},y1=class e extends yf{constructor(r,n,i){super(n,e.title);this._syncingStateTracker=r;this._extension=i}static title="$(circle-slash) Disable workspace syncing";static commandID="vscode-augment.disable-workspace-syncing";run(){this._syncingStateTracker.syncingEnabledState!=="initializing"&&this._syncingStateTracker.disableSyncing()}canRun(){let r=this._syncingStateTracker.syncingEnabledState;return super.canRun()&&this._extension.ready&&(r==="enabled"||r==="partial")}};var v1=require("vscode");var C1=class extends yf{constructor(r,n){super(n,"Show Extension Status");this._extension=r}static commandID="vscode-augment.extensionStatus";async run(){this._extension.updateStatusTrace();let r=await v1.workspace.openTextDocument(DA.displayStatusUri);await v1.window.showTextDocument(r)}};var fg=V(require("vscode"));var E1=class extends ct{constructor(r,n,i){super();this._configListener=i;this._apiServer=n,this.extension=r,this.commitMessagePromptPreparer=new fC(fg.default?.workspace.workspaceFolders?.[0].uri.fsPath??"")}type="public";static commandID="vscode-augment.generateCommitMessage";_apiServer;extension;commitMessagePromptPreparer;canRun(){return this._configListener.config.enableDebugFeatures}async run(r){await this.generateCommitMessage()}async generateCommitMessage(){let r;try{r=fg.default.extensions.getExtension("vscode.git")?.exports}catch{fg.default.window.showInformationMessage("Cannot generate commit message: Failed to interact with git extension");return}let n=r?.getAPI(1)?.repositories,i=fg.default.workspace.workspaceFolders?.at(0)?.uri??"",s=n?.find(u=>u.rootUri.toString()===i.toString());if(!s){fg.default.window.showInformationMessage("Cannot generate commit message: no repo");return}if(s.inputBox.value="Augment is generating...",!this.extension.workspaceManager){fg.default.window.showInformationMessage("Cannot generate commit message: no workspace");return}let o;try{o=await this.commitMessagePromptPreparer.getCommitMessagePromptData({diffBudget:9216,messageBudget:3072,relevantMessageSubbudget:1024,diffNoopLineLimit:5e3,onlyUseStagedChanges:!1,maxExampleCommitMessages:3})}catch(u){fg.default.window.showInformationMessage(`Cannot generate commit message: Failed to generate diff details. Error: ${u instanceof Error?u.message:String(u)}`);return}let a=this._apiServer.createRequestId(),l=await this._apiServer.generateCommitMessageStream(a,o),c="";try{for await(let u of l)c+=u.text,s.inputBox.value=c}catch{s.inputBox.value="Server error: failed to generate commit message."}}};var Xu=require("vscode");var N_=require("vscode"),s_e=new N_.EventEmitter,o_e=new N_.EventEmitter,a_e=new N_.EventEmitter,l_e=new N_.EventEmitter,Uc=e=>s_e.event(e),TA=e=>a_e.event(e),c_e=e=>o_e.event(e),u_e=e=>s_e.fire(e),d_e=()=>a_e.fire(),g8=e=>o_e.fire(e),f_e=e=>l_e.event(e),Cf=e=>l_e.fire(e);var b1=class extends ta{constructor(r,n){super(n);this._extension=r}static commandID="vscode-augment.insertCompletion";completionTimeoutMS=1e4;type="public";async run(){let r={location:Xu.ProgressLocation.Notification,title:"Waiting for completion...",cancellable:!0},n,i=async(s,o)=>{n=await this.requestCompletion(o)};if(await Xu.window.withProgress(r,i),!n){await Xu.window.showWarningMessage("Failed to request a completion");return}switch(n.resultType){case"timeout":await Xu.window.showWarningMessage("Failed to request a completion");break;case"cancelled":await Xu.window.showInformationMessage("Completion request cancelled");break;default:n.foundCompletion||await Xu.window.showInformationMessage("No completions found");break}}async requestCompletion(r){let n=Promise.race([(async()=>{let i=await Ru(Uc),s=!1;return i?.completions&&i.completions.length>0&&(s=!0),{foundCompletion:s,resultType:"completion"}})(),(async()=>(await Ru(TA),{foundCompletion:!1,resultType:"cancelled"}))(),(async()=>(await Ru(r.onCancellationRequested),{foundCompletion:!1,resultType:"cancelled"}))(),new Promise(i=>{setTimeout(()=>{i({foundCompletion:!1,resultType:"timeout"})},this.completionTimeoutMS)})]);return Xu.commands.executeCommand("editor.action.inlineSuggest.trigger"),await n}canRun(){return super.canRun()&&this._extension.ready}};var aa=V(require("vscode"));var x1=class e extends yf{constructor(r,n){super(n,"Show Internal Context");this._extension=r}static commandID="vscode-augment.showWorkspaceContext";static textDocumentName="Augment Workspace Context.txt";_documentUri=aa.Uri.file(e.textDocumentName).with({scheme:"untitled"});async run(){let r=this._formatContext(),n=await aa.workspace.openTextDocument(this._documentUri);await aa.window.showTextDocument(n);let i=new aa.Range(new aa.Position(0,0),new aa.Position(n.lineCount,0)),s=new aa.WorkspaceEdit;s.replace(n.uri,i,r),await aa.workspace.applyEdit(s)}_formatContext(){let r=this._extension.workspaceManager;if(r===void 0)return"no workspace manager";let n=r.getContextWithBlobNames(),i=`Augment workspace context
`,s=this._formatBlobs(r,n),o=this._formatChunks(n.recentChunks);return i+s+`


`+o}_formatBlobs(r,n){let i=new Array,s=new Set;for(let[c,u]of n.trackedPaths)for(let[f,p]of u)s.add(p);let o=new Map,a=new Set;for(let c of n.blobNames){let u=r.getAllPathInfo(c);for(let[f,p,g]of u){let A=o.get(f);A===void 0&&(A=new Map,o.set(f,A)),A.set(g,[c,u.length])}u.length===0&&!s.has(c)&&a.add(c)}let l=new Map;for(let c of n.recentChunks){let u=c.repoRoot,f=c.pathName,p=l.get(u);p===void 0&&(p=new Map,l.set(u,p)),p.set(f,(p.get(f)||0)+1)}for(let[c,u]of o){let f=n.trackedPaths.get(c)||new Map,p=u.size,g=f.size,A=l.get(c)||new Map;for(let b of A.keys())f.has(b)||i.push(`    ${c}: ${b} has recent chunks but is not open`);let y=`Repo root ${c}: ${p} paths (${g} open)`;i.push(""),i.push(y),i.push("=".repeat(y.length));let C=Array.from(f.keys());C.sort();for(let b of C){let w=f.get(b),B=A.get(b)||0;i.push(`    ${w} -> ${b}: open, recent chunks: ${B}`)}C.length>0&&i.push("");let v=Array.from(u.keys());v.sort();for(let b of v){if(f.has(b))continue;let[w,B]=u.get(b),F=B===1?"":` (x ${B})`;i.push(`    ${w} -> ${b}${F}`)}}if(a.size>0)for(let c of a)i.push(`unknown blob: ${c}`);return i.join(`
`)}_formatChunks(r){let n=new Array,i="Recent chunks";if(n.push(i),n.push("=".repeat(i.length)),r.length===0)return n.push("    (no recent chunks)"),n.join(`
`);for(let s=0;s<r.length;s++){let o=r[s];n.push(""),n.push(`Chunk ${s+1} of ${r.length}`),n.push(`    seq:      ${o.seq}`),n.push(`    uploaded: ${o.uploaded}`),n.push(`    repoRoot: ${o.repoRoot}`),n.push(`    pathName: ${o.pathName}`),n.push(`    blobName: ${o.blobName}`),n.push(`    start:    ${o.origStart}`),n.push(`    length:   ${o.origLength}`),n.push("======== chunk begin ========"),n.push(o.text),n.push("-------- chunk end ----------"),n.push("")}return n.join(`
`)}};var _1=V(require("vscode"));var vf=class e extends ct{constructor(r,n){super();this.extension=r;this._commandID=n}static commandIDCommunity="vscode-augment.manageAccountCommunity";static commandIDProfessional="vscode-augment.manageAccountProfessional";static commandIDEnterprise="vscode-augment.manageAccountEnterprise";type="public";run(){_1.env.openExternal(_1.Uri.parse("https://app.augmentcode.com/account"))}canRun(){let r=this.extension.userTier,n=this._commandID===e.commandIDCommunity?"community":this._commandID===e.commandIDProfessional?"professional":"enterprise";return super.canRun()&&r===n}};var ed=V(require("vscode"));var w1=class e extends ra{constructor(r,n,i){let s=ed.window.createWebviewPanel("agent","Agent Manager",ed.ViewColumn.Active,{retainContextWhenHidden:!0,enableScripts:!0});super("remote-agent-manager.html",s.webview);this._extensionUri=r;this._api=n;this._workTimer=i;this._panel=s,this._panel.iconPath={light:ed.Uri.joinPath(this._extensionUri,"media","panel-icon-light.svg"),dark:ed.Uri.joinPath(this._extensionUri,"media","panel-icon-dark.svg")},this._panel.onDidDispose(()=>{this.dispose()}),this.addDisposables(this._panel,new ed.Disposable(()=>{e.currentPanel=void 0}));let o=ss(this._panel.webview,this._workTimer);this.addDisposable(o),this._remoteAgentsMessenger=new tg(this._api,this._extensionUri,this._workTimer),this._remoteAgentsMessenger.register(o),this._gitReferenceMessenger=new oC,this._gitReferenceMessenger.register(o),this.loadHTML(this._extensionUri)}static currentPanel;_panel;_remoteAgentsMessenger;_gitReferenceMessenger;static createOrShow(r,n,i){if(e.currentPanel){e.currentPanel._panel.reveal(ed.ViewColumn.Active);return}e.currentPanel=new e(r,n,i)}dispose(){super.dispose(),e.currentPanel=void 0,this._panel.dispose()}};var I1=class extends ct{constructor(r,n,i){super("Manage Background Agents");this._extensionUri=r;this._apiServer=n;this._workTimer=i}static commandID="vscode-augment.open-agent-manager";type="debug";run=()=>{w1.createOrShow(this._extensionUri,this._apiServer,this._workTimer)};canRun(){return!0}};var p8=require("vscode");var S1=class extends ct{static commandID="vscode-augment.settings";type="public";run(){p8.commands.executeCommand("workbench.action.openSettings","@ext:augment.vscode-augment")}},B1=class extends ct{static commandID="vscode-augment.keyboard-shortcuts";type="public";run(){p8.commands.executeCommand("workbench.action.openGlobalKeybindings","@ext:augment.vscode-augment")}};var h_e=require("vscode"),g_e=V(require("vscode"));var D1=class extends ct{static commandID="vscode-augment.showDocs";type="public";async run(){await g_e.env.openExternal(h_e.Uri.parse("https://docs.augmentcode.com"))}};var us=V(require("vscode"));var T1=class e extends X{constructor(r,n,i,s,o,a,l,c){super();this._extensionUri=r;this._config=n;this._apiServer=i;this._recentCompletions=o;this._recentInstructions=a;this._recentNextEditResults=l;this._workTimer=c;this._panel=us.window.createWebviewPanel("history","Augment History",s),this._panel.iconPath={light:us.Uri.joinPath(this._extensionUri,"media","panel-icon-light.svg"),dark:us.Uri.joinPath(this._extensionUri,"media","panel-icon-dark.svg")},this._panel.onDidDispose(()=>{this.dispose()}),this.addDisposables(this._panel,new us.Disposable(()=>{e.currentPanel=void 0})),this.addDisposable(this._recentInstructions.onNewItems(u=>{!this._panel||!this._panel.visible||this._panel.webview.postMessage({type:"instructions",data:[u]})})),this.addDisposable(this._recentNextEditResults.onNewItems(u=>{!this._panel||!this._panel.visible||this._panel.webview.postMessage({type:"next-edit-suggestions",data:u})})),this.addDisposable(this._recentCompletions.onNewItems(async u=>{await this.sendCompletions()})),this.addDisposable(this._config.onDidChange(async()=>{await this.sendConfig()})),this._panel.webview.onDidReceiveMessage(async u=>{await this._workTimer.runTimed(u.type,async()=>{await this._handleMessage(u)})}),this._setHTML()}static currentPanel;_panel;async _setHTML(){let r=this._panel.webview,n=us.Uri.joinPath(this._extensionUri,"common-webviews");r.options={enableScripts:!0,localResourceRoots:[n]},this._panel.webview.html=await this._getHtmlForWebview(n,this._panel.webview)}async _getHtmlForWebview(r,n){let i=us.Uri.joinPath(r,"history.html").fsPath,s=sC(),o=Ou(Vu(n),PF(s),Hu(),Wu(),qu());return(await rn(i)).replace(/<head>/i,`<head><base href="${n.asWebviewUri(us.Uri.joinPath(r,"/")).toString()}" /><meta http-equiv="Content-Security-Policy" content="${o}">`)}async _postMessage(r){!this._panel||!this._panel.visible||await this._panel.webview.postMessage(r)}async sendCompletions(){await this._postMessage({type:"completions",data:this._getCompletions()})}_getCompletions(){return this._recentCompletions.items.map(r=>({occuredAt:r.occuredAt.toISOString(),requestId:r.requestId,repoRoot:r.repoRoot,pathName:r.pathName,prefix:r.prefix,completions:r.completions.map(n=>({text:n.completionText,skippedSuffix:n.skippedSuffix,suffixReplacementText:n.suffixReplacementText})),suffix:r.suffix}))}async sendConfig(){await this._postMessage({type:"history-config",data:this._config.config})}async _handleMessage(r){if(!(!this._panel||!this._panel.visible))switch(r.type){case"history-loaded":await this._postMessage({type:"history-initialize",data:{config:this._config.config,completionRequests:this._getCompletions(),instructions:this._recentInstructions.items.slice(),nextEdits:this._recentNextEditResults.items.slice()}});break;case"copy-request-id-to-clipboard":await us.env.clipboard.writeText(r.data),await us.window.showInformationMessage("Copied request ID to clipboard");break;case"open-file":{sg(r.data,this._panel.viewColumn);break}case"completion-rating":{let n=!0;try{await this._apiServer.completionFeedback(r.data)}catch(i){n=!1,us.window.showErrorMessage(`Failed to submit feedback: ${i.message}`)}finally{this._panel.webview.postMessage({type:"completion-rating-done",data:{success:n,requestId:r.data.requestId}})}break}case"next-edit-rating":{let n=!0;try{await this._apiServer.nextEditFeedback(r.data)}catch(i){n=!1,us.window.showErrorMessage(`Failed to submit feedback: ${i.message}`)}finally{this._panel.webview.postMessage({type:"next-edit-rating-done",data:{success:n,requestId:r.data.requestId}})}break}}}static createOrShow(r,n,i,s,o,a,l){if(e.currentPanel){e.currentPanel._panel.reveal(us.ViewColumn.Beside);return}e.currentPanel=new e(r,n,i,us.ViewColumn.Beside,s,o,a,l)}};var R1=class extends ct{constructor(r,n,i,s,o,a,l){super();this._extensionUri=r;this._config=n;this._apiServer=i;this._recentCompletions=s;this._recentInstructions=o;this._recentNextEditResults=a;this._workTimer=l}static commandID="vscode-augment.showHistoryPanel";type="public";run(){T1.createOrShow(this._extensionUri,this._config,this._apiServer,this._recentCompletions,this._recentInstructions,this._recentNextEditResults,this._workTimer)}};var IC=V(require("vscode"));var k1=class extends ct{constructor(r,n,i){super();this._extension=r;this._context=n;this._commandManager=i}static commandID="vscode-augment.showAugmentCommands";type="public";async run(){let r=this._context.extension.packageJSON?.contributes?.commands;if(!r)return;let n=Object.fromEntries(r.map(({command:a,title:l})=>[a,l]));for(let a of this._commandManager.availableCommands){let l=a.title||n[a.commandID];l&&(n[a.commandID]=l)}let i={};if(this._extension.keybindingWatcher)for(let a of Object.keys(n)){let l=this._extension.keybindingWatcher.getKeybindingForCommand(a,!0);l&&(i[a]=`${l}`)}let s=this.getActions(n,i),o=await IC.window.showQuickPick(s,{title:"Augment Commands"});o&&o.commandID&&IC.commands.executeCommand(o.commandID)}getActions(r,n){let i=[];for(let{name:s,commands:o}of this._commandManager.availableCommandGroups){let a=o.filter(l=>r[l.commandID]);if(a.length!==0){i.length>0&&i.push({label:s,kind:IC.QuickPickItemKind.Separator});for(let l of a)l.showInActionPanel&&i.push({commandID:l.commandID,label:r[l.commandID],description:n[l.commandID]})}}return Promise.resolve(i)}};var ds=V(require("vscode"));var A8=V(dm()),F1=V(require("vscode"));var SC=class e extends X{constructor(r,n,i,s=void 0){super();this._workspaceManager=r;this._webview=n;this._featureFlagManager=i;this._asyncMsgHandler=ss(this._webview,s),this.addDisposable(this._featureFlagManager.subscribe(["enableWorkspaceManagerUi"],this._registerAllHandlers.bind(this))),this._registerAllHandlers()}_logger=j("WorkspaceUIModel");_asyncMsgHandler;_registerAllHandlers(){this._featureFlagManager.currentFlags.enableWorkspaceManagerUi&&(this._setupWorkspaceListeners(),this.addDisposable(this._asyncMsgHandler),this.addDisposable(this._webview.onDidReceiveMessage(this.onDidReceiveMessage)),this._asyncMsgHandler.registerHandler("ws-context-get-source-folders-request",this.getSourceFoldersHandler),this._asyncMsgHandler.registerHandler("ws-context-get-children-request",this.getChildrenHandler))}_setupWorkspaceListeners(){this.addDisposable(this._workspaceManager.onDidChangeSourceFolders((0,A8.default)(()=>{this._webview.postMessage({type:"ws-context-source-folders-changed"})},500,{leading:!0,trailing:!0}))),this.addDisposable(this._workspaceManager.onDidChangeSourceFolderContents((0,A8.default)(r=>{this._webview.postMessage({type:"ws-context-folder-contents-changed",data:r})},500,{leading:!0,trailing:!0})))}getSourceFoldersHandler=()=>{let r=this._workspaceManager.listSourceFolders().sort((n,i)=>n.name.localeCompare(i.name));return{type:"ws-context-get-source-folders-response",data:{workspaceFolders:r.map(e.makeWSContextSourceFolder)}}};getChildrenHandler=r=>{let n=this._workspaceManager.listChildren(r.data.fileId.folderRoot,r.data.fileId.relPath).sort((i,s)=>i.name.localeCompare(s.name));return{type:"ws-context-get-children-response",data:{children:n.map(e.makeWSContextFileItem)}}};static getInclusionState(r){return r.included?r.type==="Directory"&&r.containsExcludedItems?"partial":"included":"excluded"}static makeWSContextFileItem=r=>({name:r.name,fileId:{folderRoot:r.folderRoot,relPath:r.relPath},type:r.type==="Directory"?"folder":"file",inclusionState:e.getInclusionState(r),reason:r.reason,trackedFileCount:r.type==="Directory"?r.trackedFileCount:void 0});static makeWSContextSourceFolder=r=>({name:r.name,fileId:{folderRoot:r.folderRoot,relPath:""},inclusionState:r.containsExcludedItems?"partial":"included",isWorkspaceFolder:r.type===0||r.type===2,isNestedFolder:r.type===2||r.type===3,isPending:r.enumerationState===0,trackedFileCount:r.type===0||r.type===1?r.trackedFileCount:void 0});onDidReceiveMessage=async r=>{switch(this._logger.debug(`Extension received message: ${r.type}`),r.type){case"ws-context-add-more-source-folders":{let n=await F1.window.showOpenDialog({canSelectFolders:!0,canSelectFiles:!1,canSelectMany:!0,openLabel:"Add Source Folder"});if(n&&n.length>0){let i=n.map(s=>{try{return this._workspaceManager.addExternalSourceFolder(s),null}catch(o){return this._logger.error("Failed to add source folder:",o),o instanceof Error?{path:s.fsPath,message:o.message}:{path:s.fsPath,message:String(o)}}}).filter(s=>s!==null);i.length>0&&F1.window.showErrorMessage(`One or more source folders could not be added:
`+i.map(s=>`${s.path}: ${s.message}`).join(`
`))}break}case"ws-context-remove-source-folder":{try{this._workspaceManager.removeExternalSourceFolder(r.data)}catch(n){let i=n;n instanceof Error&&(i=n.message),this._logger.error("Failed to remove source folder:",i),F1.window.showErrorMessage(`Failed to remove source folder ${r.data}:
 ${String(i)}`)}break}case"ws-context-user-requested-refresh":{this._workspaceManager.refreshSourceFolders();break}}}};var m8=1,ql=class extends Error{constructor(t){super(t),this.name="ToolConfigError"}};var P_=class extends ql{constructor(t){super(`Failed to parse tool config: ${t}`),this.name="ToolConfigParseError"}};var M1=class e extends ra{constructor(r,n,i,s,o=ds.window.createWebviewPanel(e.viewType,"Augment Settings",ds.ViewColumn.Active,{retainContextWhenHidden:!0,enableScripts:!0})){super("settings.html",o.webview);this._extensionUri=r;this._extension=n;this._apiServer=i;this._config=s;this._panel=o;this._store=this._extension.toolConfigStore,this._featureFlagManager=this._extension.featureFlagManager,this._panel.iconPath={light:ds.Uri.joinPath(this._extensionUri,"media","panel-icon-light.svg"),dark:ds.Uri.joinPath(this._extensionUri,"media","panel-icon-dark.svg")},this._panel.onDidDispose(()=>{this.dispose()}),this.addDisposables(this._panel,new ds.Disposable(()=>{e.currentPanel=void 0}),c0e(a=>{this._postMessage({type:"orientation-status-update",data:a})})),this.addDisposable(this._panel.webview.onDidReceiveMessage(async a=>{try{await this._extension.workTimer.runTimed(a.type,()=>this._handleMessage(a))}catch(l){this._handleError(l)}})),this._extension.workspaceManager&&(this._workspaceUiModel=new SC(this._extension.workspaceManager,this._panel.webview,this._extension.featureFlagManager,this._extension.workTimer),this.addDisposable(this._workspaceUiModel)),this.loadHTML(r)}static viewType="augmentSettingsPanel";_log=j("SettingsWebviewPanel");static currentPanel;_workspaceUiModel=null;static mcpServersKey="mcpServers";_store;_featureFlagManager;dispose=()=>{this._panel.dispose(),e.currentPanel=void 0,super.dispose()};_handleError(r){r instanceof ql?ds.window.showErrorMessage(r.message):ds.window.showErrorMessage(`Unexpected error: ${$e(r)}`)}async _handleMessage(r){switch(r.type){case"tool-config-loaded":await this._handleConfigLoaded();break;case"tool-config-save":await this._handleConfigSave(r.data);break;case"tool-config-get-definitions":await this._handleGetDefinitions(r);break;case"tool-config-start-oauth":await this._handleStartOAuth(r.data);break;case"tool-config-revoke-access":await this._handleRevokeAccess(r.data);break;case"get-stored-mcp-servers":await this._handleGetStorageValue();break;case"set-stored-mcp-servers":await this._handleSetStorageValue(r.data);break;case"execute-initial-orientation":await this._handleExecuteInitialOrientation();break;case"get-orientation-status":this._handleGetOrientationStatus();break}}async _handleConfigLoaded(){try{let r=await this._store.get(),n=this._getEnableAgentMode(),i=[],s=[];n&&(i=await(this._extension.toolsModel?.getToolStatusForSettingsPanel()??Promise.resolve([])),s=r.tools.map(o=>({config:JSON.stringify(o.config,null,2),isConfigured:o.isConfigured,name:o.name}))),await this._postMessage({type:"tool-config-initialize",data:{toolConfigs:s,hostTools:i,enableDebugFeatures:this._config.config.enableDebugFeatures,settingsComponentSupported:{workspaceContext:!0,mcpServerList:!0,orientation:!0,remoteTools:!0},enableAgentMode:n,userTier:this._extension.userTier}}),await this._handleGetStorageValue()}catch(r){this._handleError(r)}}async _handleConfigSave(r){try{let n=await this._store.get(),i;try{i=JSON.parse(r.toolConfig)}catch(a){throw this._log.error(`Failed to parse tool config: ${$e(a)}`),new P_($e(a))}let s={config:i,isConfigured:r.isConfigured,name:r.toolName},o=n.tools.findIndex(a=>a.name===r.toolName);o>=0?n.tools[o]=s:n.tools.push(s),await this._store.save(n)}catch(n){throw this._log.error(`Error saving tool configuration: ${$e(n)}`),new P_($e(n))}}async _handleGetDefinitions(r){let n=!!r?.data?.useCache,i=[];this._getEnableAgentMode()&&(i=await(this._extension.toolsModel?.getToolStatusForSettingsPanel(n)??Promise.resolve([]))),await this._postMessage({type:"tool-config-definitions-response",data:{hostTools:i}})}async _handleStartOAuth(r){let n=!1;try{let i=r.authUrl,s=ds.Uri.parse(i);n=await ds.env.openExternal(s),n||this._log.warn(`Failed to open URL: ${i}`)}catch(i){this._log.error(`Error opening URL: ${$e(i)}`)}finally{await this._postMessage({type:"tool-config-start-oauth-response",data:{ok:n}})}}async _handleRevokeAccess(r){try{let i=(await(this._extension.toolsModel?.getToolStatusForSettingsPanel()??Promise.resolve([]))).find(s=>s.identifier.hostName===r.toolId.hostName&&s.identifier.toolId===r.toolId.toolId);if(i&&i.identifier.hostName===No.remoteToolHost){let s=i.identifier.toolId;this._log.info(`Revoking access for remote tool: ${i.definition.name} (${s})`);let o;try{o=await this._apiServer.revokeToolAccess(s)}catch(a){this._log.error(`API error revoking access: ${$e(a)}`),ds.window.showErrorMessage(`Error revoking access: ${$e(a)}`);return}switch(o.status){case 3:this._log.info(`Successfully revoked access for ${i.definition.name} (${s}).`),await this._handleGetDefinitions();break;case 4:this._log.info(`Tool ${i.definition.name} (${s}) has no access to revoke.`),await this._handleGetDefinitions();break;case 1:this._log.warn(`Revoking access is not implemented for ${i.definition.name} (${s}).`),ds.window.showWarningMessage(`Revoking access is not implemented for ${i.definition.name} (${s}).`);break;case 2:throw new ql(`Tool not found: ${i.definition.name} (${s}).`);case 5:throw new ql(`Failed to revoke access for ${i.definition.name} (${s}).`);default:throw new ql(`Unknown status (${o.status}) when revoking access for ${i.definition.name} (${s}).`)}}else throw new ql(`Tool not found: ${r.toolId.hostName} ${r.toolId.toolId}`)}catch(n){this._log.error(`Error revoking access: ${$e(n)}`),this._handleError(n)}}async _handleGetStorageValue(){try{let r=await this._store.getMCPServers();await this._postMessage({type:"get-stored-mcp-servers-response",data:r})}catch(r){this._log.error(`Error getting storage value: ${$e(r)}`),this._handleError(r)}}async _handleSetStorageValue(r){try{await this._store.saveMCPServers(r)}catch(n){this._log.error(`Error setting storage value: ${$e(n)}`),this._handleError(n)}}async _postMessage(r){try{return await this._panel.webview.postMessage(r),!0}catch(n){return this._log.error(`Failed to post message to webview: ${$e(n)}`),!1}}async _handleExecuteInitialOrientation(){try{await ds.commands.executeCommand(vC.commandID)}catch(r){this._log.error(`Failed to execute initial orientation: ${$e(r)}`),this._handleError(r)}}_getEnableAgentMode(){return wr(this._featureFlagManager.currentFlags.vscodeAgentModeMinVersion??"")}_handleGetOrientationStatus(){try{zh()}catch(r){this._log.error(`Failed to get orientation status: ${$e(r)}`),this._handleError(r)}}static createOrShow(r,n,i,s){return e.currentPanel?(e.currentPanel._panel.reveal(),e.currentPanel):(e.currentPanel=new e(r,n,i,s),e.currentPanel)}};var Q1=class extends ct{constructor(r,n,i,s){super("Show Settings Panel",!1);this._extensionUri=r;this._extension=n;this._apiServer=i;this._config=s}static commandID="vscode-augment.showSettingsPanel";type="public";run(){M1.createOrShow(this._extensionUri,this._extension,this._apiServer,this._config)}};var N1=class extends ct{constructor(r){super();this._chatExtensionEvent=r}static commandID="vscode-augment.startNewChat";type="public";async run(){await hf("Start chat command"),this._chatExtensionEvent.fire("newThread")}};var p_e=V(require("vscode"));var BC=class extends ct{static commandID="_vscode-augment.statusbarClick";type="private";constructor(){super(void 0,!1)}async run(){await p_e.commands.executeCommand("augment-chat.focus")}};var L_=require("vscode");var P1=class e extends ta{constructor(r,n){super(n,()=>this._configListener.config.completions.enableAutomaticCompletions?"Turn Automatic Completions Off":"Turn Automatic Completions On");this._configListener=r}static commandID="vscode-augment.toggleAutomaticCompletionSetting";static autoCompletionsConfigKey="completions.enableAutomaticCompletions";type="public";run(){let r=L_.workspace.getConfiguration("augment"),n=r.inspect(e.autoCompletionsConfigKey),i=L_.ConfigurationTarget.Global;n?.workspaceValue!==void 0&&(i=L_.ConfigurationTarget.Workspace),r.update(e.autoCompletionsConfigKey,!this._configListener.config.completions.enableAutomaticCompletions,i)}canRun(){return super.canRun()}};function A_e(e,t,r,n,i,s,o,a,l,c,u,f,p){let g=new CF(r);return g.registerGroup("",[new vA(n,i,vA.signInCommandID,"$(sign-in) Sign In"),new $i,new m1(f,r,t)]),g.registerGroup("Completions",[new b1(t,f),new P1(r,f)]),g.registerGroup("Code Instruction",[new Zy(t,e.extensionUri,s,t.guidelinesWatcher,f)]),g.registerGroup("Chat",[new ag(t,r,u,f),new mC(t,r,u,f),new N1(u),new yC(t,r,u,f),new CC(t,r,u,f),new LM(u,p),new vC(t,s,f),new Q1(e.extensionUri,t,s,r)]),g.registerGroup("Next Edit Suggestions",[new Qc(t,r,f),new Nc(t,r,f),new xA(t,r,f),new _A(t,r,f),new zu(t,r,f),new Ju(t,r,f),new oa(t,r,f),new Ga(t,r,f),new qM(t,r,f),new YM(t,r,f),new VM(t,r,f),new cg(t,r,f),new D_(t,r,f),new ZM(t,r,f),new jM(t,r,f),new XM(t,r,f,p),new h1(t,r),new HM(t,r,f),new WM(t,r,f),new GM(t,r,f),new gf(t,r,f),new $M(t,r,f),new ju(t,r,f),new zM(t,r,f),new KM(t,r,f),new Io(t,r,f),new bC(t,r,f)]),g.registerGroup("Debug",[new C1(t,r),new x1(t,r),new BA(t.featureFlagManager),new A1(t.featureFlagManager)]),r.config.remoteAgent.url&&g.register([new I1(e.extensionUri,s,t.workTimer)]),g.registerGroup("",[new S1,new B1,new y1(f,r,t),new D1,new R1(e.extensionUri,r,s,o,a,l,t.workTimer),new g1(s),new vf(t,vf.commandIDCommunity),new vf(t,vf.commandIDProfessional),new vf(t,vf.commandIDEnterprise),new vA(n,i,vA.signOutCommandID,"$(sign-out) Sign Out"),new e1(t,r,f)]),r.config.autofix.enabled&&r.config.autofix.autofixUrl&&g.register([new UM(t,s)]),g.register([new k1(t,e,g),new JM(t,r,f),new pC(t.featureFlagManager,c),new E1(t,s,r),new xF(t,e.extensionUri,s),new Xy,new eC,new tC,new rC,new nC,new iC,new BC]),g}var L1=class e{constructor(t,r,n,i,s=e.chunkSize){this._apiServer=t;this._completionTimeoutMs=r,this._completionParams={prefixSize:n,suffixSize:i,chunkSize:s}}static chunkSize=1024;_completionTimeoutMs;_completionParams;createRequestId(){return this._apiServer.createRequestId()}get completionParams(){return this._completionParams}async complete(t,r,n,i,s,o,a,l,c,u,f,p,g){let A=await this._apiServer.complete(t,r,n,i,s,o,a,l,c,u,f,p,g);return A.completionTimeoutMs!==void 0&&(this._completionTimeoutMs=A.completionTimeoutMs),A.suggestedPrefixCharCount!==void 0&&(this._completionParams.prefixSize=A.suggestedPrefixCharCount),A.suggestedSuffixCharCount!==void 0&&(this._completionParams.suffixSize=A.suggestedSuffixCharCount),A.suggestedPrefixCharCount!==void 0&&(this._completionParams.chunkSize=e.chunkSize),A}};var C_e=V(vs()),Oc=V(require("vscode"));var Ef=class{constructor(t,r,n,i){this.completionText=t;this.suffixReplacementText=r;this.skippedSuffix=n;this.range=i}toString(){return`text: ${this.completionText}
    suffixReplacementText: ${this.suffixReplacementText}
    skippedSuffix: ${this.skippedSuffix}
    start: ${this.range.startOffset}
    end: ${this.range.endOffset}`}};function U1(e,t,r){let n="",i=t.completionText,s=e.document,o=s.offsetAt(r)-t.range.startOffset;return o<0?n=e.prefix.slice(o):i=i.slice(o),new Ef(n+i,t.suffixReplacementText,t.skippedSuffix,{startOffset:s.offsetAt(r),endOffset:t.range.endOffset})}function m_e(e,t){return`context:
    text: ${t.selectedCompletionInfo?.text}
    range: ${DC(e,t.selectedCompletionInfo?.range)}
    triggerKind: ${t.triggerKind}`}function y_e(e){return`context:
    text: ${e.triggerCharacter}
    triggerKind: ${e.triggerKind}`}function hg(e,t){return`ln: ${t.line} ch: ${t.character} offset: ${e.offsetAt(t)}`}function DC(e,t){return t===void 0?"<undefined>":`start: ${hg(e,t.start)} -> end: ${hg(e,t.end)}`}function O1(e,t){return t?`${e}'${t}'`:""}var TC=class{constructor(t){this._config=t;this._documentation.isTrusted=!0}_logger=j("CompletionItemsProvider");_documentation=new Oc.MarkdownString(`This is a suggestion from Augment.

You can let us know about good or bad suggestions via [the History Panel](command:vscode-augment.showHistoryPanel).`);static triggerCharacters=[".",":"];static languageSelector=["python","typescript","javascript","java","go","rust","c","cpp","php","csharp","ruby","bash","html","css","scss","less","sass","json","yaml","markdown","xml","sql","swift","kotlin","objective-c","perl","scala","lua","groovy","powershell","*"];async provideCompletionItems(t,r,n,i){if(this._logger.debug(`Pop-Up Request - ${t.uri.toString()} ${hg(t,r)}${O1(" ",i.triggerCharacter)}`),this._logger.verbose(y_e(i)),i.triggerKind===Oc.CompletionTriggerKind.TriggerCharacter)return this._logger.debug("Returning no completions because trigger kind was a trigger character"),[];if(!this._config.config.completions.enableAutomaticCompletions)return this._logger.debug("Automatic completions are disabled"),[];let s,o;try{return await Promise.race([this._getCompletions(t,r,n),new Promise(a=>{let c=(0,C_e.debounce)(()=>{this._logger.warn("Failed to find completions in time"),a([])},this._config.config.completions.timeoutMs,{maxWait:this._config.config.completions.maxWaitMs});o=TA(()=>{c()}),s=c,c()})])}finally{o?.dispose(),s?.cancel()}}_getCompletionSuffix(t,r){let n=r.substring(t.length,t.length+50);if(n.length===0)return"";let i=n.match(/^[^{}\[\]\(\)"`'<>]+/);return i?i[0]===n?n:i[0]+"\u2026":"\u2026"}async _getCompletions(t,r,n){let i=await Ru(Uc);if(!this._config.config.completions.enableQuickSuggestions)return this._logger.debug("Enable IntelliSense suggestion is disabled"),[];if(!i)return this._logger.debug("No completion request"),[];if(t!==i.document)return this._logger.debug(`Completion request document does not match the current document.     current document: ${t.uri.toString()}     completion request document: ${i.document.uri.toString()}`),[];let s=[];for(let o of i.completions){this._logger.verbose(`AugmentCompletion: ${o.toString()}`);let a=t.getWordRangeAtPosition(r)?.start??r,l=U1(i,o,a),c=t.offsetAt(r);if(c<l.range.startOffset||c>l.range.endOffset){this._logger.debug(`Inline provider event does not satisfy this requests position.     completion item: ${hg(t,r)}    inline provider event: ${l.range.startOffset} => ${l.range.endOffset}}`);continue}let u=t.offsetAt(r)-t.offsetAt(a),f=(l.completionText+l.suffixReplacementText).slice(u),p=f.split(/[^a-zA-Z0-9_]/).shift()??"",g=new Oc.Range(a,r),y=t.getText(g)+p+this._getCompletionSuffix(p,f),C=new Oc.CompletionItem(y);C.insertText=l.completionText+l.suffixReplacementText;let v=new Oc.Range(t.positionAt(l.range.startOffset),t.positionAt(t.offsetAt(r)+l.skippedSuffix.length));C.range={inserting:v,replacing:v},C.preselect=!1,C.kind=Oc.CompletionItemKind.Snippet,C.detail="Augment",C.documentation=this._documentation,C.keepWhitespace=!0,this._logger.debug(`insert: ${C.insertText}
label: ${y}
position: ${hg(t,r)}
inserting: ${DC(t,C.range.inserting)}
replacing: ${DC(t,C.range.replacing)})}`),s.push(C)}return n.isCancellationRequested?(this._logger.debug("Completion cancelled"),[]):s}};var y8=V(require("vscode"));var U_=class extends Error{constructor(r){super(`Configured model "${r}" is not available`);this.modelName=r}};var q1=class extends Error{constructor(){super("No models available")}},gg=class extends Error{constructor(t="Skipping inline completion."){super(t)}};function kyt(e,t){return r=>{let n=performance.now()-e;return t(Math.round(n)),r}}function v_e(e,t){return(...r)=>{let n=performance.now(),i=kyt(n,t),s=e(...r);return s instanceof Promise?s.then(i):i(s)}}var V1=class{constructor(t,r,n){this._extension=t;this._configListener=r;this._metricsReporter=n;this.generateCompletion=v_e(this.generateCompletion.bind(this),i=>{this._metricsReporter.report({client_metric:"generate_completion_latency",value:i})})}_logger=j("CompletionsModel");_completionSerial=0;async generateCompletion(t,r,n){let i=this._extension.workspaceManager;if(i===void 0)return;let s=i.completionServer,o=s.createRequestId(),a=i.safeResolvePathName(t.uri);if(a===void 0)return;let[l,c]=[a.rootPath,a.relPath],u=t.offsetAt(r),[f,p,g,A,y]=this._extractPrefixAndSuffix(t,u);u+=y;let C={prefixBegin:g,cursorPosition:u,suffixEnd:A},b=(await this._requestCompletion(i,s,o,t,f,p,C,a,n)).completionItems;if(b.length===0)return{completions:[],document:t,requestId:o,repoRoot:l,pathName:c,prefix:f,suffix:p,occuredAt:new Date,isReused:!1};b.length>1&&this._logger.warn("Multiple completions not supported, ignoring all but the first");let w=[],F=b[0];return F.skippedSuffix.includes(`
`)&&(this._logger.debug("Skipped suffix spans multiple lines, dropping it"),F.skippedSuffix="",F.suffixReplacementText=""),w.push(new Ef(F.text,F.suffixReplacementText,F.skippedSuffix,{startOffset:t.offsetAt(r),endOffset:t.offsetAt(r)})),this._logger.debug(`Returning ${w.length} completion(s)`),{occuredAt:new Date,completions:w,document:t,requestId:o,repoRoot:l,pathName:c,prefix:f,suffix:p,isReused:!1}}async _requestCompletion(t,r,n,i,s,o,a,l,c){let u=i.languageId;if(this._configListener.config.completions.disableCompletionsByLanguage.has(u))throw new gg(`Language ${u} is disabled.`);let p=this._completionSerial++;this._logger.debug(`Requesting new completion - #${p} submitted; requestId: ${n}`);let g=t.translateRange(l,a.prefixBegin,a.suffixEnd),A=g===void 0?a:{prefixBegin:g.beginOffset,cursorPosition:a.cursorPosition,suffixEnd:g.endOffset},y=t.getContext(),C=y.blobs,v=this._getRecentChanges(y),w=t.getEnableCompletionFileEditEvents()?t.getFileEditEvents():void 0;try{let B=await r.complete(n,s,o,l.relPath,g?.blobName,A,u,C,v,w,void 0,void 0,c);return B.unknownBlobNames.length>0&&t.handleUnknownBlobs(y,B.unknownBlobNames),B.checkpointNotFound&&t.handleUnknownCheckpoint(n,C.checkpointId),Fyt(B.completionItems,o,this._logger),this._extension.updateModelInfo(B),B.completionItems=B.completionItems.filter(F=>(F.text+F.suffixReplacementText).length>0),B}catch(B){if(Qr.isAPIErrorWithStatus(B,We.cancelled))throw this._logger.debug(`Completion #${p} cancelled in back end; requestId ${n}`),new gg("Cancelled in back end");if(Qr.isRetriableAPIError(B))throw this._logger.debug(`Completion #${p} retriable error on back end; requestId ${n}`),new gg("Retriable error on back end");let F=$e(B);throw this._logger.warn(`Completion #${p} failed: ${F}; requestId ${n}`),B}}_extractPrefixAndSuffix(t,r){let n=this._extension.modelInfo,i=n.suggestedPrefixCharCount,s=n.suggestedSuffixCharCount,[o,a]=jCe(t);o!==void 0&&(r+=a);let l=Math.max(0,r-i),c=r+s;if(o!==void 0){let b=o.slice(l,r),w=o.slice(r,c);return[b,w,l,r+w.length,a]}let u=t.positionAt(l),f=t.positionAt(r),p=t.positionAt(r),g=t.positionAt(c),A=new y8.Range(u,f),y=new y8.Range(p,g),C=t.getText(A),v=t.getText(y);return[C,v,l,r+v.length,0]}_getRecentChanges(t){let r=t.recentChunks,n=t.lastChatResponse;if(n!==void 0){let i={seq:n.seq,uploaded:!1,repoRoot:"",pathName:"",blobName:"",text:n.text,origStart:0,origLength:0,expectedBlobName:""},s=r.findIndex(o=>o.seq<i.seq);s<0&&(s=r.length),r=r.slice(0,s).concat([i]).concat(r.slice(s))}return Wy(r)}};function Fyt(e,t,r){for(let n of e)t.startsWith(n.skippedSuffix)||(r.warn(`Skipped suffix does not match the actual suffix. Skipped suffix: ${n.skippedSuffix}. First ${n.skippedSuffix.length} characters of suffix: ${t.substring(0,n.skippedSuffix.length)}`),n.suffixReplacementText="",n.skippedSuffix="")}var pg=V(require("vscode"));var RA=class{constructor(t){this._statusBar=t}_state;setState(t){return this.dispose(),this._state=this._statusBar.setState(t),this._state}dispose(){this._state?.dispose()}};var O_=require("vscode");var H1=(i=>(i[i.high=0]="high",i[i.medium=1]="medium",i[i.low=2]="low",i[i.neutral=3]="neutral",i))(H1||{}),C8=Object.values(H1).filter(e=>typeof e=="number").sort();var RC={background:new O_.ThemeColor("statusBarItem.warningBackground"),foreground:new O_.ThemeColor("statusBarItem.warningForeground")},v8={background:new O_.ThemeColor("statusBarItem.errorBackground"),foreground:new O_.ThemeColor("statusBarItem.errorForeground")},E_e={priority:3,tooltip:"Augment",icon:"$(augment-icon-simple)"},b_e={priority:3,tooltip:"Open Augment",icon:"$(augment-icon-smile)"},x_e={priority:0,tooltip:"Sign in to start using Augment",icon:"$(augment-icon-simple)",colors:RC},__e={priority:2,tooltip:"Augment is indexing your codebase",icon:"$(sync)"},w_e={priority:0,tooltip:"No API token",icon:"$(augment-icon-simple)",colors:RC},I_e={priority:0,tooltip:"No completion URL",icon:"$(augment-icon-simple)",colors:RC},S_e={priority:2,tooltip:"Initializing Augment",icon:"$(loading~spin)"},B_e={priority:0,tooltip:"Authentication failed, please sign in again",icon:"$(augment-icon-simple)",colors:RC},D_e={priority:0,tooltip:"Authentication failed, please check your API token and completion URL",icon:"$(augment-icon-simple)",colors:RC},T_e={priority:0,tooltip:"The completion URL setting is invalid. Please enter a valid value",icon:"$(augment-icon-simple)",colors:RC},R_e={priority:2,tooltip:"Automatic completions are off",icon:"$(augment-icon-closed-eyes)"},k_e={priority:1,tooltip:"Enhancements are off",icon:"$(augment-icon-simple)"},E8={priority:0,tooltip:"Cannot connect to Augment",icon:"$(augment-icon-simple)",colors:v8},F_e={priority:0,tooltip:"Failed to generate completion",icon:"$(augment-icon-simple)",colors:v8},M_e={priority:1,tooltip:"Generating completion",icon:"$(augment-icon-dots)"},Q_e={priority:2,tooltip:"No completions generated",icon:"$(augment-icon-zero)"},N_e={priority:0,tooltip:"Failed to generate suggestions",icon:"$(augment-icon-simple)",colors:v8},P_e={priority:1,tooltip:"Generating suggestions",icon:"$(augment-icon-dots)"},L_e={priority:2,tooltip:"No suggestions generated",icon:"$(augment-icon-zero)"},U_e={priority:0,tooltip:"Workspace indexing is disabled",icon:"$(circle-slash)"};var W1=class{rpcStart;rpcEnd;constructor(){}};var G1=class extends W1{requestStart;emitTime;constructor(t=Date.now(),r,n,i){super(),this.requestStart=t,this.rpcStart=r,this.rpcEnd=n,this.emitTime=i}isComplete(){return[this.rpcStart,this.rpcEnd,this.emitTime].every(r=>r!==void 0)}};var V_=V(require("vscode"));var $1=class extends X{constructor(r){super();this._metricsReporter=r;this.addDisposables(V_.workspace.onDidChangeTextDocument(n=>{this._onTextDocumentChange(n)}),V_.window.onDidChangeActiveTextEditor(()=>{this._rejectPendingCompletion()}),V_.window.onDidChangeWindowState(()=>{this._rejectPendingCompletion()}),Uc(n=>{n&&this._onNewCompletion(n)}))}_logger=j("PendingCompletion");_pendingCompletion;getPendingCompletion(r,n){if(!this._pendingCompletion){this._logger.verbose("No previous completion to use");return}if(this._pendingCompletion.document!==r){this._logger.debug(`Not reusing previous completion as documents differ ${this._pendingCompletion.document.uri.toString()} vs ${r.uri.toString()}`),this._rejectPendingCompletion();return}let i=this._pendingCompletion.completion,s=r.offsetAt(n),o=i.range.endOffset+this._pendingCompletion.added;if(s<i.range.startOffset){this._logger.debug(`Not reusing previous completion as position is before completion: ${s} vs
                ${i.range.startOffset}`),this._rejectPendingCompletion();return}if(s>o){this._logger.debug(`Not reusing previous completion as position is after completion: ${s} vs
                ${o}`),this._rejectPendingCompletion();return}let a=i.skippedSuffix,l=i.completionText,c=i.suffixReplacementText;this._pendingCompletion.deleted>0&&(a=a.slice(this._pendingCompletion.deleted)),a===""&&(l=l+c,c="");let u=new Ef(l,c,a,{startOffset:i.range.startOffset,endOffset:o});return this._logger.verbose(`Reusing pending completion: ${u.completionText}`),{...this._pendingCompletion,completions:[u],isReused:!0}}_onNewCompletion(r){let{completions:n,requestId:i}=r;if(this._pendingCompletion?.requestId===i)return;if(!n.length){this._logger.verbose(`No completions in ${i}`),this._rejectPendingCompletion();return}if(n.length!==1){this._logger.warn(`Unable to handle multiple completions, received ${n.length}`),this._rejectPendingCompletion();return}let s=this._findLastMatches(n[0]);if(!s){this._logger.verbose(`Skipped suffix is not a subsequence of the suffix replacement text:
                ${n[0].skippedSuffix} !<= ${n[0].suffixReplacementText}`),this._rejectPendingCompletion();return}this._logger.verbose(`Registering pending completion: ${n[0].completionText}`),this._pendingCompletion={...r,completion:this._stripCommonSkippedSuffix(n[0]),added:0,deleted:0,suffixMatches:s,emitTime:Date.now()}}_findLastMatches(r){let n=r.skippedSuffix,i=r.suffixReplacementText,s=[],o=n.length-1,a=i.length-1;for(;o>=0&&a>=0;)n[o]===i[a]&&(s.push(a),o--),a--;if(!(o>=0))return s.reverse()}_stripCommonSkippedSuffix(r){let n=r.skippedSuffix,i=r.suffixReplacementText,s=0;for(;s<n.length&&s<i.length&&n[n.length-1-s]===i[i.length-1-s];)s++;return s===0?r:new Ef(r.completionText,i.slice(0,-s),n.slice(0,-s),r.range)}_onTextDocumentChange(r){if(!this._pendingCompletion||this._pendingCompletion.document!==r.document||r.contentChanges.length===0)return;if(r.contentChanges.length>1){this._logger.verbose(`Unexpected number of content changes: ${r.contentChanges.length}`),this._rejectPendingCompletion();return}let n=this._normalizeChange(r.contentChanges[0]);if(!n){this._logger.verbose(`Unexpected content change: ${JSON.stringify(r.contentChanges[0])}`),this._rejectPendingCompletion();return}let i=this._pendingCompletion.added,s=this._pendingCompletion.deleted,o=this._pendingCompletion.completion,a=n.rangeOffset+n.rangeLength,l=o.range.startOffset+i,c=a-l,u=l-n.rangeOffset;if(c<0||u<0){this._logger.verbose(`Change would delete or unadd negative characters: ${a} - ${l} < 0
                    or ${l} - ${n.rangeOffset} < 0`),this._rejectPendingCompletion();return}s+=c,i-=u;let f=o.completionText+o.suffixReplacementText,p=n.text.length,g=f.slice(i,i+p);if(n.text.slice(0,g.length)!==g){this._logger.verbose(`Pending completion mismatch: ${n.text} vs ${g}`),this._rejectPendingCompletion();return}if(i+=p,s<this._pendingCompletion.suffixMatches.length){let A=this._pendingCompletion.suffixMatches[s];if(i>o.completionText.length+A){this._logger.verbose(`Remaining skipped suffix is not a subsequence of the remaining suffix replacement text:
                    ${o.skippedSuffix.slice(s)} !<= ${f.slice(i)}`),this._rejectPendingCompletion();return}}this._pendingCompletion.added=i,this._pendingCompletion.deleted=s,this._pendingCompletion.added>=f.length&&this._pendingCompletion.deleted>=o.skippedSuffix.length?this._acceptPendingInlineCompletion():(this._pendingCompletion.added>=f.length||this._pendingCompletion.deleted>o.skippedSuffix.length)&&this._rejectPendingCompletion()}_normalizeChange(r){if(!this._pendingCompletion)return;let n=this._pendingCompletion.completion,i=this._pendingCompletion.added,s=this._pendingCompletion.deleted;if(r.rangeOffset<n.range.startOffset){let a=n.range.startOffset-r.rangeOffset;return a>r.rangeLength?void 0:{rangeLength:r.rangeLength-a,rangeOffset:r.rangeOffset+a,text:r.text.slice(a)}}let o=n.range.startOffset+i;if(r.rangeOffset>o){let a=r.rangeOffset-o;return s+a>n.skippedSuffix.length?void 0:{rangeLength:r.rangeLength+a,rangeOffset:r.rangeOffset-a,text:n.skippedSuffix.slice(s,s+a)+r.text}}return{rangeLength:r.rangeLength,rangeOffset:r.rangeOffset,text:r.text}}_rejectPendingCompletion(){this._pendingCompletion&&(g8({requestId:this._pendingCompletion.requestId,acceptedIdx:-1,document:this._pendingCompletion.document}),Cf(!1),this._logger.debug(`Rejecting completion: ${this._pendingCompletion.requestId}`),this._metricsReporter.reportResolution(this._pendingCompletion.requestId,this._pendingCompletion.emitTime,Date.now(),void 0),this._pendingCompletion=void 0)}_acceptPendingInlineCompletion(){this._pendingCompletion&&(g8({requestId:this._pendingCompletion.requestId,acceptedIdx:0,document:this._pendingCompletion.document}),Cf(!1),this._logger.debug(`Accepting completion: ${this._pendingCompletion.requestId}`),this._metricsReporter.reportResolution(this._pendingCompletion.requestId,this._pendingCompletion.emitTime,Date.now(),0),this._pendingCompletion=void 0)}};var kA=V(require("vscode"));var Y1=class extends X{_logger=j("SuppressDeletedCompletions");_inProgressDeletion=void 0;_prevCompletions=void 0;constructor(){super(),this.addDisposables(kA.workspace.onDidChangeTextDocument(t=>{this._onTextDocumentChange(t)}),kA.window.onDidChangeActiveTextEditor(t=>{this._resetDeletions(t)}))}_onTextDocumentChange(t){if(t.document.uri.scheme!=="file"&&!xo(t.document.uri)||t.contentChanges.length===0)return;if(this._inProgressDeletion===void 0||t.contentChanges.length!==1||t.contentChanges[0].text.length>0||t.document!==this._inProgressDeletion.document){this._inProgressDeletion={document:t.document,preDeletionDocumentText:t.document.getText(),prevDeletionRange:void 0,prevDeletionText:void 0,curDocumentText:t.document.getText()},this._prevCompletions=[];return}(this._inProgressDeletion.prevDeletionRange===void 0||!this._areAdjacentDeletions(t.contentChanges[0].range,this._inProgressDeletion.prevDeletionRange))&&(this._inProgressDeletion.preDeletionDocumentText=this._inProgressDeletion.curDocumentText);let r=this._inProgressDeletion.curDocumentText.substring(t.contentChanges[0].rangeOffset,t.contentChanges[0].rangeOffset+t.contentChanges[0].rangeLength);this._inProgressDeletion.prevDeletionRange=t.contentChanges[0].range,this._inProgressDeletion.prevDeletionText=r,this._inProgressDeletion.curDocumentText=t.document.getText()}_areAdjacentDeletions(t,r){return t.end.isEqual(r.start)||t.start.isEqual(r.start)}_resetDeletions(t){if(this._prevCompletions=[],t===void 0){this._inProgressDeletion=void 0;return}this._inProgressDeletion={document:t.document,preDeletionDocumentText:t.document.getText(),prevDeletionRange:void 0,prevDeletionText:void 0,curDocumentText:t.document.getText()}}processRequest(t){if(!t||!this._inProgressDeletion)return t;let r=t.completions;return this._inProgressDeletion.document===t.document&&(r=t.completions.filter(n=>this._checkIfCompletionWasDeleted(t,n)?(this._logger.debug("Suppressing previously deleted completion"),!1):this._checkIfForwardDeletion(t,n)?(this._logger.debug("Suppressing completion due to forward deletion"),!1):!0)),this._inProgressDeletion.document===t.document&&(this._prevCompletions=[...t.completions]),t.completions=r,t}_checkIfCompletionWasDeleted(t,r){let n=t.document,i=n.getText(new kA.Range(n.positionAt(0),n.positionAt(r.range.startOffset))),s=n.getText(new kA.Range(n.positionAt(r.range.endOffset+r.skippedSuffix.length),n.positionAt(n.getText().length))),o=i+r.completionText+s;return this._inProgressDeletion.preDeletionDocumentText===o}_checkIfForwardDeletion(t,r){if(this._inProgressDeletion.prevDeletionRange)return this._prevCompletions?.some(i=>{let s=this._inProgressDeletion?.document?.positionAt(i.range.endOffset),o=t.document.positionAt(r.range.endOffset);if(!s||!s.isEqual(o))return!1;let a=(i.completionText+i.suffixReplacementText).substring(i.range.endOffset-i.range.startOffset),l=r.completionText+r.suffixReplacementText,c=[a];if(this._inProgressDeletion?.prevDeletionText&&c.push(a+this._inProgressDeletion?.prevDeletionText),!c.some(f=>f===l))return!1;let u=this._inProgressDeletion?.document.positionAt(i.range.endOffset);return u&&this._inProgressDeletion?.prevDeletionRange?.start&&u.isEqual(this._inProgressDeletion.prevDeletionRange.start)})}};var Myt=2e3,K1=class extends X{constructor(r,n,i,s,o){super();this._completionsModel=r;this._config=s;this._timelineReporter=o;this._pendingCompletions=new $1(n),this._stateController=new RA(i),this.addDisposable(this._pendingCompletions),this.addDisposable(this._deletedCompletions),this.addDisposable(pg.window.onDidChangeTextEditorSelection(a=>{a.textEditor.document.uri.scheme==="file"&&Cf(!1)}))}_logger=j("InlineCompletionProvider");_pendingCompletions;_deletedCompletions=new Y1;_stateController;async provideInlineCompletionItems(r,n,i,s){let o=new G1;if(!this._config.config.completions.enableAutomaticCompletions&&i.triggerKind===pg.InlineCompletionTriggerKind.Automatic)return Cf(!1),[];this._stateController.dispose(),this._logger.debug(`Inline Request - ${r.uri.toString()} ${hg(r,n)}${O1(" ",i.selectedCompletionInfo?.text)}`),this._logger.verbose(m_e(r,i));let a=await this._getCompletions(r,n,i,o),l=this._deletedCompletions.processRequest(a);if(s.isCancellationRequested)return this._logger.debug("Completion cancelled"),d_e(),Cf(!1),[];if(u_e(l),!l)return this._logger.debug("Returning no completions"),Cf(!1),[];o.emitTime=Date.now(),l.isReused||this._timelineReporter.reportCompletionTimeline(l.requestId,o);let c=l.completions.map(u=>{this._logger.verbose(`AugmentCompletion: ${u.toString()}`);let f=new pg.InlineCompletionItem(u.completionText+u.suffixReplacementText,new pg.Range(r.positionAt(u.range.startOffset),r.positionAt(u.range.endOffset+u.skippedSuffix.length)));return this._logger.verbose(`InlineCompletionItem: ${JSON.stringify(f.insertText)} ${DC(r,f.range)}`),f});return c.length>0&&Cf(!0),c}async _getCompletions(r,n,i,s){let o=this._pendingCompletions.getPendingCompletion(r,n);if(o&&o.completions.length>0){let l=this._processCompletionForMode(o,i);return this._logger.debug(`Returning ${l.length} completions`),{...o,completions:l}}if(i.selectedCompletionInfo?.text){this._logger.debug("Returning no completions because the provider request includes selected text that does not match an Augment suggestion");return}let a=this._stateController.setState(M_e);try{let l=await this._completionsModel.generateCompletion(r,n,s);if(l&&l.completions.length===0){let c=this._stateController.setState(Q_e);setTimeout(()=>{c.dispose()},Myt)}return l}catch(l){l instanceof gg||this._stateController.setState(F_e)}finally{a.dispose()}}_processCompletionForMode(r,n){if(!n.selectedCompletionInfo||!n.selectedCompletionInfo.text)return r.completions;let i=n.selectedCompletionInfo.range.start;return r.completions.map(o=>U1(r,o,i))}};var O_e=V(require("vscode"));var Ag=class extends X{constructor(r=100,n=()=>!0){super();this._itemVerifier=n;this._ringBuffer=new jc(r),this.addDisposable(this._newItemEventEmitter)}_ringBuffer;_newItemEventEmitter=new O_e.EventEmitter;get onNewItems(){return this._newItemEventEmitter.event}get items(){return this._ringBuffer.slice()}get mostRecentItem(){return this._ringBuffer.at(-1)}addItem(r){this._itemVerifier(r)&&(this._ringBuffer.addItem(r),this._newItemEventEmitter.fire(r))}};var z1=class extends Ag{constructor(){super(100,t=>t.completions.length>0&&!t.isReused)}};var j1=V(require("vscode"));var q_e=V(require("crypto"));function kC(e){let t=q_e.createHash("sha256");return t.update(e),t.digest("hex")}var FC=class e{constructor(t,r){this.start=t;this.stop=r}equals(t){return this.start===t.start&&this.stop===t.stop}get length(){return this.stop-this.start}toString(){return`[${this.start}, ${this.stop})`}compareTo(t){return this.start-t.start}contains(t){return typeof t=="number"&&(t=new e(t,t+1)),this.start<=t.start&&this.stop>=t.stop&&this.stop>t.start}intersects(t){return typeof t=="number"&&(t=new e(t,t+1)),this.start<t.stop&&this.stop>t.start}touches(t){return typeof t=="number"&&(t=new e(t,t+1)),this.start===t.stop||this.stop===t.start}intersection(t){if(this.intersects(t))return new e(Math.max(this.start,t.start),Math.min(this.stop,t.stop))}distanceTo(t){return typeof t=="number"&&(t=new e(t,t+1)),-Math.min(0,Math.min(this.stop,t.stop)-Math.max(this.start,t.start))}offset(t,r,n=-1/0,i=1/0){let s=Math.min(i,Math.max(n,this.start+t)),o=Math.max(n,Math.min(i,this.stop+r));if(s>o){let a=Math.ceil((this.start+this.stop)/2),l=Math.max(n,Math.min(i,a));return new e(l,l)}return new e(s,o)}static anyOverlaps(t){if(t.length<=1)return!1;t.sort((n,i)=>n.start===i.start?n.stop-i.stop:n.start-i.start);let r=t[0].stop;for(let n=1;n<t.length;n++){if(t[n].start<r)return!0;r=t[n].stop}return!1}static mergeTouching(t){if(t.length<=1)return[...t];let r=[...t].sort((i,s)=>i.start-s.start),n=[r[0]];for(let i=1;i<r.length;i++){let s=n[n.length-1],o=r[i];s.stop>=o.start?s.stop=Math.max(s.stop,o.stop):n.push(o)}return n}},Bo=class extends FC{},Nn=class extends FC{};function Qyt(e,t){let r=t.text===void 0?"":t.text,n;return t.rangeOffset!==void 0&&t.rangeLength!==void 0?n={start:t.rangeOffset,end:t.rangeOffset+t.rangeLength}:n={start:e.offsetAt(t.range.start),end:e.offsetAt(t.range.end)},{text:r,range:n}}var b8=class{constructor(t,r,n){this._uploadBatchFunction=t;this._batchSize=r;this._maxUploadDelayMs=n}_queue=[];_queueNonEmptyTimer;add(t){if(this._queue.push(t),this._queue.length===1&&(clearTimeout(this._queueNonEmptyTimer),this._queueNonEmptyTimer=setTimeout(()=>{this._uploadBatch()},this._maxUploadDelayMs)),this._queue.length>=this._batchSize){let r=this._queue;this._queue=[];let n={user_events:r};this._uploadBatchFunction(n)}}_uploadBatch(){let t=this._queue;this._queue=[];let r=t.length,n={user_events:t};r!==0&&this._uploadBatchFunction(n),clearTimeout(this._queueNonEmptyTimer)}dispose(){this.stop()}stop(){clearTimeout(this._queueNonEmptyTimer)}},x8=class{constructor(t){this._apiServer=t;this._logger=j("UploadHandler")}_logger;_lastErrorTime;_uploadInterruptPeriodMs=15e3;async uploadUserEvents(t){try{if(this._lastErrorTime?Date.now()-this._lastErrorTime<this._uploadInterruptPeriodMs:!1)return;await this._apiServer.uploadUserEvents(t)}catch(r){throw this._logger.info("Error uploading tracked events",r),this._lastErrorTime=Date.now(),r}}},J1=class e extends X{constructor(r,n,i,s,o,a=e.defaultUploadBatchSize,l=e.defaultMaxUploadDelayMs){super();this._pathResolver=n;this._recentInstructions=i;this._recentCompletions=s;this._recentNextEditSuggestions=o;this._uploadHandler=new x8(r),this._uploadQueue=new b8(c=>void this._uploadHandler.uploadUserEvents.bind(this._uploadHandler)(c),a,l),this._createSubscriptions(),this.addDisposable(this._uploadQueue)}static defaultUploadBatchSize=128;static defaultMaxUploadDelayMs=5e3;_uploadQueue;_uploadHandler;_createSubscriptions(){this.addDisposable(j1.workspace.onDidChangeTextDocument(this._processChangeTextDocument.bind(this))),this.addDisposable(this._recentInstructions.onNewItems(this._processInstruction.bind(this))),this.addDisposable(this._recentCompletions.onNewItems(this._processCompletion.bind(this))),this.addDisposable(this._recentNextEditSuggestions.onNewItems(this._processNextEdit.bind(this)))}_processChangeTextDocument(r){let n=r.document.uri.fsPath,i=new Date().toISOString(),s=this._pathResolver.resolvePathName(n);if(s===void 0||r.contentChanges.length===0)return;let o=[];for(let y of r.contentChanges)o.push(Qyt(r.document,y));let a=500,l=r.document.getText().length,c=o.map(y=>new Bo(y.range.start,y.range.end)).map(y=>y.offset(-a,a,0,l)),u=FC.mergeTouching(c),f=u.map(y=>r.document.getText(new j1.Range(r.document.positionAt(y.start),r.document.positionAt(y.stop)))),p=kC(new TextEncoder().encode(f.join(""))),g={reason:r.reason,content_changes:o,after_changes_hash:p,source_folder_root:s.rootPath,hash_char_ranges:u.map(y=>({start:y.start,end:y.stop})),after_doc_length:l},A={time:i,file_path:s.relPath,text_edit:g};this._uploadQueue.add(A)}_processInstruction(r){let n={request_id:r.requestId},i={time:r.requestedAt.toISOString(),file_path:r.pathName,edit_request_id_issued:n};this._uploadQueue.add(i)}_processNextEdit(r){let n={request_id:r.requestId},i={time:r.requestTime.toISOString(),file_path:r.qualifiedPathName?.relPath??"",next_edit_request_id_issued:n};this._uploadQueue.add(i)}_processCompletion(r){let n={time:r.occuredAt.toISOString(),file_path:r.pathName??"",completion_request_id_issued:{request_id:r.requestId}};this._uploadQueue.add(n)}};var MC=V(require("vscode"));var _8=class{constructor(t,r,n){this.uri=t;this.diagnostic=r;this.time=n}},w8=class{constructor(t,r,n,i){this.uri=t;this.diagnostic=r;this.charStart=n;this.charEnd=i}};function Nyt(e,t){return e.message===t.message&&e.severity===t.severity&&e.range.isEqual(t.range)}var Z1=class e extends X{static _maxDiagnosticsPerFile=10;_diagnostics=new Map;_logger=j("DiagnosticsManager");constructor(){super(),this.addDisposable(MC.languages.onDidChangeDiagnostics(t=>{let r=new Date;for(let n of t.uris){if(xo(n))continue;let i=this._diagnostics.get(n.path),s=MC.languages.getDiagnostics(n).slice(0,e._maxDiagnosticsPerFile),o=[];for(let a of s){if(a.severity!==MC.DiagnosticSeverity.Error&&a.severity!==MC.DiagnosticSeverity.Warning)continue;let l=i?.find(c=>Nyt(c.diagnostic,a));l===void 0?o.push(new _8(n,a,r)):o.push(l)}this._diagnostics.set(n.path,o)}}))}async getMostRecentDiagnostics(t,r,n=void 0){let s=Array.from(this._diagnostics.entries()).flatMap(([c,u])=>n!==void 0&&!c.startsWith(n)?[]:u).sort((c,u)=>{let f=u.time.getTime()-c.time.getTime();return f!==0?f:c.diagnostic.severity-u.diagnostic.severity}),o=new Map,a=[],l=new Map;for(let c of s){if(c.diagnostic.range.start.line<0||c.diagnostic.range.start.line>c.diagnostic.range.end.line){this._logger.debug(`Ignoring invalid diagnostic ${c.diagnostic.message} in ${c.uri.path} at ${c.diagnostic.range.start.line}:${c.diagnostic.range.end.line}`);continue}let u=o.get(c.uri.path)??0;if(u<r){if(!l.has(c.uri.path))try{l.set(c.uri.path,await Co(c.uri))}catch{this._logger.debug(`Failed to open document ${c.uri.fsPath}.`);continue}let f=l.get(c.uri.path);if(!f)continue;if(c.diagnostic.range.end.line>=f.lineCount){this._logger.debug(`Ignoring stale diagnostic ${c.diagnostic.message} in ${c.uri.path} at ${c.diagnostic.range.start.line}:${c.diagnostic.range.end.line}`);continue}let p=f.offsetAt(c.diagnostic.range.start),g=f.offsetAt(c.diagnostic.range.end);if(a.push(new w8(c.uri,c.diagnostic,p,g)),o.set(c.uri.path,u+1),a.length>=t)break}}return a}};var I8=V(um()),fs=V(require("vscode"));var Pyt=5,X1=class extends X{constructor(r,n){super();this._keybindingWatcher=r;this._inlineCompletionProvider=n;this.createDecorationTypes(),this.addDisposables(...this.setupEmptyFileHint());let i=fs.window.activeTextEditor;i&&i.document.getText()===""&&this.debouncedDecorations(i),this._logger.info("HotKeyHints initialized")}_logger=j("HotKeyHints");activeCompletion=!1;emptyFileHotKeyHintDecorationType;debouncedDecorations=(0,I8.default)(r=>{(r.document.uri.scheme==="file"||r.document.uri.scheme==="untitled")&&r.document.getText()===""&&!this.activeCompletion?r.setDecorations(this.emptyFileHotKeyHintDecorationType,[r.selection]):this.hideHints(r)},Pyt,{leading:!1,trailing:!0});createDecorationTypes(){let r=this._keybindingWatcher.getKeybindingForCommand($i.commandID),n="";r?n=`${r} to open Augment.`:n="Click the robot icon in the side bar to open Augment.",this.emptyFileHotKeyHintDecorationType=fs.window.createTextEditorDecorationType({after:{contentText:n,color:"rgba(150, 150, 150, 0.9)",margin:"0 0 0 0.5rem"}})}setupEmptyFileHint(){let r=[];return r.push({dispose:()=>{this.debouncedDecorations.cancel()}}),this._inlineCompletionProvider&&(r.push(Uc(n=>{let i=fs.window.activeTextEditor;!i||!n||n.completions.length===0||(this.debouncedDecorations.cancel(),this.hideHints(i),this.activeCompletion=!0)})),r.push(TA(()=>{this.activeCompletion=!1;let n=fs.window.activeTextEditor;!n||n.document.getText()!==""||this.debouncedDecorations(n)}))),fs.workspace.onDidCloseTextDocument(()=>{this.activeCompletion=!1}),r.push(fs.window.onDidChangeActiveTextEditor(n=>{!n||n.document.getText()!==""||(this.activeCompletion=!1,this.debouncedDecorations(n))})),r.push(fs.workspace.onDidChangeTextDocument(n=>{if(n.contentChanges.length>0&&(this.activeCompletion=!1),n.document.uri.scheme!=="file"&&n.document.uri.scheme!=="untitled")return;let i=fs.window.activeTextEditor;if(!(!i||i.document.uri.toString()!==n.document.uri.toString())){if(i.document.getText()!==""){this.hideHints(i);return}this.activeCompletion||this.debouncedDecorations(i)}})),r}hideHints(r){r.setDecorations(this.emptyFileHotKeyHintDecorationType,[])}},eQ=class extends X{constructor(r,n){super();this._keybindingWatcher=r;this._inlineCompletionProvider=n;this.createDecorationTypes(),this.addDisposables(...this.setupEmptyLineHint())}_logger=j("EmptyLineHints");activeCompletion=!1;decorationType;debouncedDecorations=(0,I8.default)(r=>{let n=r.selection.active,s=r.document.lineAt(n.line).text,o=s.lastIndexOf(" ")!==-1?s.lastIndexOf(" "):s.length-1,a=new fs.Range(n.line,o+1,n.line,o+1);/\S/.test(s)===!1&&(s.trim()===""||n.character===s.length)?r.setDecorations(this.decorationType,[a]):this.hideHints(r)},16,{leading:!1,trailing:!0});createDecorationTypes(){let r="",n=this._keybindingWatcher.getKeybindingForCommand("augment-chat.focus",!0);n&&(r=`${n} to open Augment`),this.decorationType=fs.window.createTextEditorDecorationType({after:{contentText:r,color:"rgba(150, 150, 150, 0.5)",margin:"0 0 0 1.2rem"}})}setupEmptyLineHint(){let r=[];return r.push({dispose:()=>{this.debouncedDecorations.cancel()}}),this._inlineCompletionProvider&&(r.push(Uc(n=>{let i=fs.window.activeTextEditor;!i||!n||n.completions.length===0||(this.debouncedDecorations.cancel(),this.hideHints(i),this.activeCompletion=!0)})),r.push(TA(()=>{this.activeCompletion=!1;let n=fs.window.activeTextEditor;n&&this.debouncedDecorations(n)}))),r.push(fs.window.onDidChangeTextEditorSelection(n=>{this.debouncedDecorations(n.textEditor)})),r.push(fs.workspace.onDidChangeTextDocument(n=>{let i=fs.window.activeTextEditor;!i||i.document.uri.toString()!==n.document.uri.toString()||this.activeCompletion||this.debouncedDecorations(i)})),r}hideHints(r){r.setDecorations(this.decorationType,[])}};var W_e=V(require("vscode"));var V_e=new Map([["authenticated",{name:"authenticated",status:"initializing"}],["syncingPermitted",{name:"syncingPermitted",status:"complete"}],["disabledGithubCopilot",{name:"disabledGithubCopilot",status:"initializing"}],["hasMovedExtensionAside",{name:"hasMovedExtensionAside",status:"incomplete"}],["workspacePopulated",{name:"workspacePopulated",status:"initializing"}],["workspaceSelected",{name:"workspaceSelected",status:"initializing"}],["disabledCodeium",{name:"disabledCodeium",status:"initializing"}],["uploadingHomeDir",{name:"uploadingHomeDir",status:"initializing"}],["workspaceTooLarge",{name:"workspaceTooLarge",status:"initializing"}]]),H_e=new Map([["UserShouldSignIn",{name:"UserShouldSignIn",renderOrder:0,desiredConditions:[{name:"authenticated",status:"incomplete"}]}],["SyncingPermissionNeeded",{name:"SyncingPermissionNeeded",renderOrder:1,desiredConditions:[{name:"syncingPermitted",status:"initializing"}]}],["uploadingHomeDir",{name:"uploadingHomeDir",renderOrder:2,desiredConditions:[{name:"uploadingHomeDir",status:"complete"}]}],["workspaceTooLarge",{name:"workspaceTooLarge",renderOrder:2,desiredConditions:[{name:"workspaceTooLarge",status:"complete"}]}],["ShouldDisableCopilot",{name:"ShouldDisableCopilot",renderOrder:3,desiredConditions:[{name:"authenticated",status:"complete"},{name:"disabledGithubCopilot",status:"incomplete"}]}],["ShouldDisableCodeium",{name:"ShouldDisableCodeium",renderOrder:3,desiredConditions:[{name:"authenticated",status:"complete"},{name:"disabledCodeium",status:"incomplete"}]}],["WorkspaceNotSelected",{name:"WorkspaceNotSelected",renderOrder:5,desiredConditions:[{name:"authenticated",status:"complete"},{name:"syncingPermitted",status:"complete"},{name:"workspaceSelected",status:"incomplete"}]}],["WorkspacePopulated",{name:"WorkspacePopulated",renderOrder:5,desiredConditions:[{name:"authenticated",status:"complete"},{name:"syncingPermitted",status:"complete"},{name:"workspaceSelected",status:"complete"},{name:"workspacePopulated",status:"complete"}]}],["WorkspaceNotPopulated",{name:"WorkspaceNotPopulated",renderOrder:5,desiredConditions:[{name:"authenticated",status:"complete"},{name:"syncingPermitted",status:"complete"},{name:"workspaceSelected",status:"complete"},{name:"workspacePopulated",status:"incomplete"}]}],["AllActionsComplete",{name:"AllActionsComplete",renderOrder:6,desiredConditions:[{name:"authenticated",status:"complete"},{name:"syncingPermitted",status:"complete"},{name:"disabledGithubCopilot",status:"complete"},{name:"disabledCodeium",status:"complete"},{name:"workspacePopulated",status:"complete"},{name:"workspaceSelected",status:"complete"}]}]]),tQ=class extends X{_systemStates;_derivedStates;_onDerivedStatesSatisfied=new W_e.EventEmitter;_systemToDerivedStateMap=new Map;_globalState;_satisfiedDerivedStates=new Set;constructor(t,r=V_e,n=H_e){super(),this.addDisposable(this._onDerivedStatesSatisfied),this._systemStates=new Map(r),this._derivedStates=new Map(n),this._globalState=t,this.loadSystemStates(),this._derivedStates.forEach(this.updateSystemToDerivedStateMap.bind(this)),this._derivedStates.forEach(i=>{this._isStateSatisfied(i)&&this._satisfiedDerivedStates.add(i.name)}),this._emitSatisfiedStates()}get satisfiedStates(){return Array.from(this._satisfiedDerivedStates).map(t=>this._derivedStates.get(t)).sort((t,r)=>t.renderOrder-r.renderOrder)}saveSystemStates(){let t=JSON.stringify(Array.from(this._systemStates.entries()));this._globalState.update("actionSystemStates",t)}loadSystemStates(){let t=this._globalState.get("actionSystemStates")||"[]";new Map(JSON.parse(t)).forEach(n=>{this._systemStates.set(n.name,n)})}get onDerivedStatesSatisfied(){return this._onDerivedStatesSatisfied.event}updateSystemToDerivedStateMap(t){t.desiredConditions.forEach(r=>{this._systemToDerivedStateMap.has(r.name)||this._systemToDerivedStateMap.set(r.name,new Set),this._systemToDerivedStateMap.get(r.name).add(t.name)})}setSystemStateStatus(t,r){let n={name:t,status:r};this._systemStates.set(n.name,n),this.saveSystemStates();let i=this._systemToDerivedStateMap.get(n.name)||new Set,s=!1;i.forEach(o=>{let a=this._derivedStates.get(o);if(a){let l=this._satisfiedDerivedStates.has(o),c=this._isStateSatisfied(a);l!==c&&(s=!0,c?this._satisfiedDerivedStates.add(o):this._satisfiedDerivedStates.delete(o))}}),s&&this._emitSatisfiedStates(),this.saveSystemStates()}restartActionsState(){this._systemStates=new Map(V_e),this._derivedStates=new Map(H_e),this._systemToDerivedStateMap=new Map,this._satisfiedDerivedStates=new Set,this._derivedStates.forEach(this.updateSystemToDerivedStateMap.bind(this)),this._derivedStates.forEach(t=>{this._isStateSatisfied(t)&&this._satisfiedDerivedStates.add(t.name)}),this._emitSatisfiedStates(),this.saveSystemStates()}getSystemState(t){return this._systemStates.get(t)}addDerivedState(t){this._derivedStates.set(t.name,t),this.updateSystemToDerivedStateMap(t),this._isStateSatisfied(t)&&(this._satisfiedDerivedStates.add(t.name),this._emitSatisfiedStates()),this.saveSystemStates()}isDerivedStateSatisfied(t){let r=this._derivedStates.get(t);return r?this._isStateSatisfied(r):!1}isSystemStateComplete(t){return this._systemStates.get(t)?.status==="complete"}_emitSatisfiedStates(){this._onDerivedStatesSatisfied.fire(this.satisfiedStates)}broadcastDerivedStates(){this._emitSatisfiedStates()}_isStateSatisfied(t){for(let r of t.desiredConditions){let n=this._systemStates.get(r.name);if(!n||n.status!==r.status)return!1}return!0}};var G_e=V(dm()),H_=V(require("vscode"));var rQ=class extends X{constructor(r,n,i,s,o,a,l){super();this._actionsModel=r;this._apiServer=n;this._config=i;this._syncingEnabledTracker=s;this._changeWebviewAppEvent=o;this._featureFlagManager=a;this._userTier=l;this.addDisposables(this._actionsModel.onDerivedStatesSatisfied(this.handleDerivedStateChange.bind(this)),this._syncingEnabledTracker.onDidChangeSyncingEnabled(this.sendSyncEnabledStatus.bind(this)),this._actionsModel.onDerivedStatesSatisfied(c=>{for(let u of c)(u.name==="WorkspacePopulated"||u.name==="WorkspaceNotPopulated")&&(this._workspaceChecked=!0,this._waitingOnWorkspace&&(this._waitingOnWorkspace=!1,this.changeToChatApp()))}))}_logger=j("AwaitingSyncingPermissionApp");_webview;_asyncMsgHandler;_workspaceChecked=!1;_waitingOnWorkspace=!1;appType(){return"awaiting-syncing-permission"}title(){return"Syncing Permission Needed"}register(r){this._logger.info("Registering AwaitingSyncingPermissionApp"),this._webview=r,this.addDisposable(r.onDidReceiveMessage(n=>this.onMessageFromWebview(n)))}sendSyncEnabledStatus=(0,G_e.default)(()=>{this._webview?.postMessage({type:"sync-enabled-state",data:this._syncingEnabledTracker.syncingEnabledState})},250,{leading:!0,trailing:!0});async handleDerivedStateChange(r){let n=new Set(["SyncingPermissionNeeded","uploadingHomeDir","workspaceTooLarge","WorkspaceNotSelected"]),i=r.map(s=>s.name).filter(s=>n.has(s));if(i.length===0){this._workspaceChecked?this.changeToChatApp():this._waitingOnWorkspace=!0;return}await this.sendActionsToWebview(i)}changeToChatApp(){this._changeWebviewAppEvent.fire("chat")}async sendActionsToWebview(r){await this._webview?.postMessage({type:"main-panel-actions",data:r})}onMessageFromWebview(r){switch(r.type){case"main-panel-perform-action":this.performAction(r.data);break;case"awaiting-syncing-permission-loaded":{this.handleDerivedStateChange(this._actionsModel.satisfiedStates),this.sendSyncEnabledStatus(),this._webview?.postMessage({type:"awaiting-syncing-permission-initialize",data:{workspaceName:H_.workspace.name,enableDebugFeatures:this._config.config.enableDebugFeatures,maxTrackableFileCount:this._featureFlagManager.currentFlags.maxTrackableFileCount,userTier:this._userTier}});break}}}performAction(r){switch(r){case"grant-sync-permission":{this._logger.info("User granted syncing permission"),this._syncingEnabledTracker.enableSyncing();break}case"open-folder":{H_.commands.executeCommand("vscode.openFolder");break}case"close-folder":{H_.commands.executeCommand("workbench.action.closeFolder");break}}}async*onUserSendMessage(r){let n=this._apiServer.createRequestId(),i=Dve;for(let s of i)yield{type:"chat-model-reply",data:{text:s,requestId:n,workspaceFileChunks:[],streaming:!0}},await new Promise(o=>setTimeout(o,8));yield{type:"chat-model-reply",data:{text:"",requestId:n,workspaceFileChunks:[],streaming:!1}}}};var bf=V(require("vscode"));var nQ=class extends X{constructor(r){super();this._onboardingSessionEventReporter=r}_webview;appType(){return"folder-selection"}title(){return"Select Folder"}register(r){this._webview=r,this.addDisposables(this._webview.onDidReceiveMessage(this.onDidReceiveMessage))}onDidReceiveMessage=r=>{switch(r.type){case"main-panel-perform-action":this.performAction(r.data);break;case"main-panel-create-project":this.createProject(r.data.name);break}};performAction(r){switch(r){case"open-folder":{this._onboardingSessionEventReporter.reportEvent("opened-folder"),bf.commands.executeCommand("vscode.openFolder");break}case"close-folder":{bf.commands.executeCommand("workbench.action.closeFolder");break}case"clone-repository":{this._onboardingSessionEventReporter.reportEvent("cloned-repo"),bf.commands.executeCommand("git.clone");break}}}async createProject(r){let n="augment-projects",i=oCe();if(!i)return;let s=bf.Uri.file(i),o=bf.Uri.joinPath(s,n),a=bf.Uri.joinPath(o,r);await Tc(a.fsPath)||await kl(a.fsPath),this._onboardingSessionEventReporter.reportEvent("created-new-project"),await this._onboardingSessionEventReporter.uploadNow(),bf.commands.executeCommand("vscode.openFolder",a)}};var iQ=class extends X{constructor(r,n,i,s){super();this._apiServer=r;this._config=n;this._oauthFlow=i;this._actionsModel=s}_logger=j("SignInApp");_webview;_signInFlow;appType(){return"sign-in"}title(){return""}register(r){this._webview=r,this.addDisposable(r.onDidReceiveMessage(i=>this.onMessageFromWebview(i))),this.addDisposable(this._actionsModel.onDerivedStatesSatisfied(this.handleDerivedStateChange.bind(this)));let n=ss(r);this.addDisposable(n),n.registerStreamHandler("chat-user-message",i=>this.onUserSendMessage(i)),n.registerHandler("chat-loaded",i=>(this._actionsModel.isDerivedStateSatisfied("UserShouldSignIn")&&this.sendSignInActions(),Promise.resolve({type:"chat-initialize",data:{enableDebugFeatures:this._config.config.enableDebugFeatures,fullFeatured:!1}})))}onMessageFromWebview(r){switch(r.type){case"main-panel-perform-action":this.performAction(r.data);break;case"augment-link":{switch(r.data){case KG:this.performAction("sign-in");break;default:this._logger.warn(`Unknown augment link: ${r.data}`);break}break}case"sign-in-loaded":{let n={type:"sign-in-loaded-response",data:{client:"vscode"}};this._webview?.postMessage(n);break}}}performAction(r){switch(r){case"cancel-sign-in":this._oauthFlow.doProgrammaticCancellation(),this.sendSignInActions();break;case"sign-in":{this.sendInProgressActions();let n=this._oauthFlow.startFlow(!1);this._signInFlow=n,n.catch(i=>{this._signInFlow===n&&this.sendSignInActions()});break}}}async sendSignInActions(){await this.sendActionsToWebview(["UserShouldSignIn"])}async sendInProgressActions(){await this.sendActionsToWebview(["SignInInProgress"])}handleDerivedStateChange(r){for(let n of r)n.name==="UserShouldSignIn"&&this.sendSignInActions()}async sendActionsToWebview(r){await this._webview?.postMessage({type:"main-panel-actions",data:r})}async*onUserSendMessage(r){let n=this._apiServer.createRequestId(),i=Bve;for(let s of i)yield{type:"chat-model-reply",data:{text:s,requestId:n,workspaceFileChunks:[],streaming:!0}},await new Promise(o=>setTimeout(o,8));yield{type:"chat-model-reply",data:{text:"",requestId:n,workspaceFileChunks:[],streaming:!1}}}};var sQ=class extends X{constructor(r,n,i){super();this._workspaceManager=r;this._featureFlagManager=n;this._workTimer=i}_workspaceUiModel=null;appType(){return"workspace-context"}title(){return"Workspace Context"}register(r){this._workspaceUiModel?.dispose(),this._featureFlagManager.currentFlags.enableWorkspaceManagerUi&&(this._workspaceUiModel=new SC(this._workspaceManager,r,this._featureFlagManager,this._workTimer),this.addDisposable(this._workspaceUiModel))}};var oQ=class e extends ti{constructor(r){super("ClientMetricsReporter",e.defaultMaxRecords,e.defaultUploadMsec,e.defaultBatchSize);this._apiServer=r}static defaultMaxRecords=1e4;static defaultBatchSize=500;static defaultUploadMsec=1e4;reportWebviewClientMetric=r=>{this.report({client_metric:`webview__${r.webviewName}__${r.client_metric}`,value:r.value})};performUpload(r){return this._apiServer.clientMetrics(r)}};var aQ=class{constructor(t){this._apiServer=t}uploadEnabled=!1;_logger=j("CodeEditReporter");enableUpload(){this.uploadEnabled=!0}disableUpload(){this.uploadEnabled=!1}dispose(){this.disableUpload()}async reportResolution(t,r,n,i,s){let[o,a]=Pn(r),[l,c]=Pn(n),u={request_id:t,emit_time_sec:o,emit_time_nsec:a,resolve_time_sec:l,resolve_time_nsec:c,is_accepted:i,annotated_text:s};await Ii(async()=>{if(this.uploadEnabled)try{return await this._apiServer.logCodeEditResolution(u)}catch(f){throw this._logger.error(`Error reporting edit resolution: ${f}`),f}},this._logger)}};var lQ=class e extends ti{constructor(r,n,i,s,o){super("CompletionAcceptanceReporter",i??e.defaultMaxRecords,s??e.defaultUploadMsec,o??e.defaultBatchSize);this._apiServer=r;this._onboardingSessionEventReporter=n}static defaultMaxRecords=1e4;static defaultBatchSize=1e3;static defaultUploadMsec=1e4;reportResolution(r,n,i,s){let[o,a]=Pn(n),[l,c]=Pn(i);this.report({request_id:r,emit_time_sec:o,emit_time_nsec:a,resolve_time_sec:l,resolve_time_nsec:c,accepted_idx:s??-1}),s!==void 0&&this._onboardingSessionEventReporter.reportEvent("accepted-completion")}performUpload(r){return this._apiServer.resolveCompletions(r)}};var cQ=class e extends ti{constructor(r,n,i,s){super("TimelineEventReporter",n??e.defaultMaxRecords,i??e.defaultUploadMsec,s??e.defaultBatchSize);this._apiServer=r}static defaultMaxRecords=1e4;static defaultBatchSize=1e3;static defaultUploadMsec=1e4;reportCompletionTimeline(r,n){if(!n.emitTime||!n.rpcStart||!n.rpcEnd)return;let[i,s]=Pn(n.requestStart),[o,a]=Pn(n.emitTime),[l,c]=Pn(n.rpcStart),[u,f]=Pn(n.rpcEnd);this.report({request_id:r,initial_request_time_sec:i,initial_request_time_nsec:s,api_start_time_sec:l,api_start_time_nsec:c,api_end_time_sec:u,api_end_time_nsec:f,emit_time_sec:o,emit_time_nsec:a})}performUpload(r){return this._apiServer.reportClientCompletionTimelines(r)}};var mg=V(require("vscode"));function uQ(e,t="",r={}){for(let n in e)if(Object.hasOwn(e,n)){let i=t?`${t}.${n}`:n;typeof e[n]=="object"&&e[n]!==null?uQ(e[n],i,r):r[i]=String(e[n])}return r}var dQ=class e extends ti{constructor(r,n,i,s){super("ExtensionSessionEventReporter",n??e.defaultMaxRecords,i??e.defaultUploadMsec,s??e.defaultBatchSize);this._apiServer=r}static defaultMaxRecords=1e4;static defaultBatchSize=1e3;static defaultUploadMsec=1e4;reportEvent(r,n){this.report({time_iso:new Date().toISOString(),event_name:r,additional_data:n})}performUpload(r){return this._apiServer.logExtensionSessionEvent(r)}reportSourceFolders(r){if(!r.workspaceStorageUri)return;let n=kC(new TextEncoder().encode(r.workspaceStorageUri));delete r.workspaceStorageUri;let i=uQ({projectId:n,...r});this.report({time_iso:new Date().toISOString(),event_name:"source-folder-snapshot",additional_data:Object.entries(i).map(([s,o])=>({key:s,value:o}))})}reportConfiguration(r,n,i){let s=uQ({otherConfig:{theme:mg.workspace.getConfiguration().get("workbench.colorTheme"),fontSize:mg.workspace.getConfiguration().get("editor.fontSize"),isDark:[mg.ColorThemeKind.Dark,mg.ColorThemeKind.HighContrast].includes(mg.window.activeColorTheme.kind)},config:n,featureFlags:i});for(let o in s)o.toLowerCase().includes("token")&&s[o]&&(s[o]="<redacted>");this.report({time_iso:new Date().toISOString(),event_name:"configuration-snapshot",additional_data:Object.entries(s).map(([o,a])=>({key:o,value:a}))})}};var fQ=class e extends ti{constructor(r,n,i,s){super("NextEditResolutionReporter",n??e.defaultMaxRecords,i??e.defaultUploadMsec,s??e.defaultBatchSize);this._apiServer=r}static defaultMaxRecords=1e4;static defaultBatchSize=1e3;static defaultUploadMsec=1e4;reportResolution(r,n,i,s){let[o,a]=Pn(n),[l,c]=Pn(i);this.report({request_id:r,emit_time_sec:o,emit_time_nsec:a,resolve_time_sec:l,resolve_time_nsec:c,is_accepted:s})}performUpload(r){return this._apiServer.resolveNextEdits(r)}};var hQ=class e extends ti{constructor(r,n,i,s){super("NextEditSessionEventReporter",n??e.defaultMaxRecords,i??e.defaultUploadMsec,s??e.defaultBatchSize);this._apiServer=r}static defaultMaxRecords=1e4;static defaultBatchSize=1e3;static defaultUploadMsec=1e4;reportEvent(r,n,i,s,o){let[a,l]=Pn(i);this.report({related_request_id:r,related_suggestion_id:n,event_time_sec:a,event_time_nsec:l,event_name:s,event_source:o})}reportEventFromSuggestion(r,n,i){this.reportEvent(r?.requestId,r?.result.suggestionId,Date.now(),n,i)}reportEventWithoutIds(r,n){this.reportEvent(void 0,void 0,Date.now(),r,n)}performUpload(r){return this._apiServer.logNextEditSessionEvent(r)}};var gQ=class e extends ti{constructor(r,n,i,s){super("OnboardingSessionEventReporter",n??e.defaultMaxRecords,i??e.defaultUploadMsec,s??e.defaultBatchSize);this._apiServer=r}static defaultMaxRecords=1e4;static defaultBatchSize=1e3;static defaultUploadMsec=1e4;reportEvent(r){let[n,i]=Pn(Date.now());this.report({event_time_sec:n,event_time_nsec:i,event_name:r})}performUpload(r){return this._apiServer.logOnboardingSessionEvent(r)}};var pQ=class extends X{constructor(r,n,i){super();this._reporter=r;this._workTimer=n;this._options=i;this._options.periodMs=Math.max(this._options.periodMs,10),this._options.infoThresholdMs=Math.max(this._options.infoThresholdMs,10),this._options.debugThresholdMs=Math.min(Math.max(this._options.debugThresholdMs,10),this._options.infoThresholdMs),this._schedule(),this.addDisposable({dispose:()=>clearTimeout(this._nextCheck)})}_logger=j("StallDetector");_targetWakeup=0;_nextCheck;_schedule(){this._targetWakeup=Date.now()+this._options.periodMs,this._nextCheck=setTimeout(()=>this._checkStall(),this._options.periodMs)}_checkStall(){let n=Date.now()-this._targetWakeup;if(n>this._options.debugThresholdMs){let s=`Event loop delay: Timer(${this._options.periodMs} msec) ran ${n} msec late.`,o=n>this._options.infoThresholdMs?"info":"debug";this._logger.log(o,s),this._reporter.report({client_metric:"event_loop_delay",value:n})}let i=this._workTimer.popSlowEvents();i.length>0&&this._logger.info(`Recent work: ${JSON.stringify(i)}`),this._schedule()}};var AQ=class e{thresholdMs;slowEvents;static maxSlowEvents=1e3;constructor(t=1e3){this.thresholdMs=t,this.slowEvents=[]}async runTimed(t,r){let n=process.hrtime.bigint(),i;try{return i=await r(),i}finally{this.recordIfSlow(t,n)}}recordIfSlow(t,r){let n=process.hrtime.bigint()-r,i=Number(n)/1e6;i>=this.thresholdMs&&(this.slowEvents.push({name:t,durationMs:i,timestamp:new Date}),this.slowEvents.length>e.maxSlowEvents&&this.slowEvents.splice(0,e.maxSlowEvents/2))}popSlowEvents(){let t=this.slowEvents;return this.slowEvents=[],t}clear(){this.slowEvents=[]}};var $a=V(require("vscode"));var S8=V(require("vscode"));var Uyt=j("RangesVSCode");function Ms(e,t){return t&&t.lineCount<e.stop?(Uyt.warn(`LineRange[${e.start}, ${e.stop}) is out of bounds for document ${t.uri.path}.`),new S8.Range(e.start,0,t.lineCount,0)):new S8.Range(e.start,0,e.stop,0)}function td(e){return new Nn(e.start.line,e.end.line+(e.end.character>0?1:0))}function Y_e(e){return`[${$_e(e.start)},${$_e(e.end)})`}function $_e(e){return`${e.line}:${e.character}`}function B8(e){return[...e.visibleRanges].sort((t,r)=>t.start.line-r.start.line)}function hs(e){return Uy(e.fsPath)}function mQ(e){return e.fsPath}function xf(e){if(e.scheme==="file"||e.scheme==="untitled"||xo(e))return hs(e)}function K_e(e){if(e.scheme==="file")return hs(e)}var vQ=V(require("vscode"));var QC=class{constructor(t,r){this.title=t;this.action=r;this.title=t,this.action=r}},CQ=class extends X{constructor(r,n,i,s,o,a,l){super();this._configListener=r;this._suggestionManager=n;this._keybindingWatcher=i;this._globalState=s;this._nextEditSessionEventReporter=o;this._nextEditConfigManager=a;this._completionVisibilityWatcher=l;this._addInitialTutorial(),this._addSecondTutorial()}_addInitialTutorial(){let r=this._nextEditConfigManager.config.enableAutoApply,n=Zu(this._keybindingWatcher,this._configListener.config.nextEdit.enableGotoHinting?Ga.commandID:oa.commandID,!0),i=Zu(this._keybindingWatcher,zu.commandID,!0);this._addTutorial("nextEditSuggestionSeen",s=>s.newSuggestions,gi,"You have a Next Edit suggestion available. Next Edit helps you complete your train of thought by suggesting changes that continue your recent work.",[new QC(r?`Preview & Apply (${n})`:`Preview (${n})`,yQ(this._configListener.config.nextEdit.enableGotoHinting?Ga.commandID:oa.commandID)),new QC(`Dismiss All (${i})`,yQ(zu.commandID))],"tutorial-initial-shown")}_addSecondTutorial(){let r=Zu(this._keybindingWatcher,Io.commandID,!0),n=Zu(this._keybindingWatcher,"redo",!0),i=Zu(this._keybindingWatcher,ju.commandID,!0),s=[new QC("Learn More",yQ(cg.commandID))].concat(this._nextEditConfigManager.config.enablePanel?[new QC(`View All in Panel (${i})`,yQ(ju.commandID))]:[]);this._addTutorial("nextEditSuggestionAccepted",o=>o.accepted,void 0,`You just applied a Next Edit suggestion! Use Undo (${r}) and Redo (${n}) to go back and forth between the original and suggested code.`,s,"tutorial-after-accept-shown")}_addTutorial(r,n,i,s,o,a){this._globalState.get(r)!==!0&&this.addDisposable(this._suggestionManager.onSuggestionsChanged(async l=>{if(!this._shouldShowTutorial(r,n(l),i)||this._completionVisibilityWatcher.maybeInlineCompletionVisible)return;this._globalState.update(r,!0),this._nextEditSessionEventReporter.reportEventWithoutIds(a,"unknown");let c=await vQ.window.showInformationMessage(s,...o);c?.action(),this._nextEditSessionEventReporter.reportEventWithoutIds(c?"tutorial-nonempty-response":"tutorial-empty-response","unknown")}))}_shouldShowTutorial(r,n,i=void 0){return i&&(n=n.filter(i)),!(n.length===0||this._globalState.get(r)===!0)}};function yQ(e){return()=>void vQ.commands.executeCommand(e,"tutorial")}var EQ=class extends X{constructor(r,n,i,s,o,a,l,c,u){super();this.workspaceManager=r;this._nextEditSessionEventReporter=n;this._configListener=s;this._suggestionManager=o;this._requestManager=a;this._nextEditConfigManager=c;this._completionVisibilityWatcher=u;this.addDisposable(new $a.Disposable(()=>{this._requestManager?.clearCompletedRequests(),this._suggestionManager?.clear(!1,"BACKGROUND"),this._noopReportTimer&&(clearTimeout(this._noopReportTimer),this._noopReportTimer=null)})),this._scheduleNoopReport(),this.addDisposable($a.workspace.onDidChangeTextDocument(this._handleTextDocumentChanged)),this.addDisposable($a.window.onDidChangeTextEditorSelection(this._handleTextEditorSelectionChanged)),this.addDisposable(new $a.Disposable(this._requestManager.lastFinishedRequest.listen(g=>{if(this._configListener.config.nextEdit.enableGlobalBackgroundSuggestions&&g&&g.apiResult===We.ok&&g.mode==="BACKGROUND"&&g.scope!=="WORKSPACE"&&g.suggestions.filter(gi).length===0){let A=$a.window.activeTextEditor,y=A&&this.workspaceManager.safeResolvePathName(A.document.uri);this._requestManager.enqueueRequest(y,"BACKGROUND","WORKSPACE")}}))),this.addDisposable(this._suggestionManager.onSuggestionsChanged(g=>{for(let C of g.accepted.filter(v=>v.result.truncationChar!==void 0))this._requestManager.enqueueRequest(C.qualifiedPathName,"BACKGROUND","CURSOR",C.lineRange);let y=g.accepted.map(C=>C.requestId).map(C=>g.newSuggestions.filter(v=>gi(v)&&v.requestId===C));for(let C of y)if(!C.some(v=>v.result.truncationChar===void 0))for(let v of C)this._requestManager.enqueueRequest(v.qualifiedPathName,"BACKGROUND","CURSOR",v.lineRange)})),this.addDisposable(new CQ(this._configListener,this._suggestionManager,i,l,n,this._nextEditConfigManager,this._completionVisibilityWatcher));let f=$a.window.activeTextEditor;if(!f)return;let p=this.workspaceManager.safeResolvePathName(f.document.uri);p&&(this._requestManager.enqueueRequest(p,"BACKGROUND","FILE"),this._requestManager.enqueueRequest(p,"BACKGROUND","CURSOR"))}_logger=j("BackgroundNextEdits");_noopSources=new Set;_noopReportTimer=null;_noopReportDelayMs=6e4*5;get _isDebugging(){return $a.debug.activeDebugSession!==void 0&&!this._configListener.config.nextEdit.allowDuringDebugging}_scheduleNoopReport(){this._noopReportTimer&&(clearTimeout(this._noopReportTimer),this._noopReportTimer=null),this._noopReportTimer=setTimeout(()=>{this._reportNoopSources(),this._scheduleNoopReport()},this._noopReportDelayMs)}_reportNoopSources(){if(this._noopSources.size!==0){for(let r of this._noopSources.values())this._nextEditSessionEventReporter.reportEventWithoutIds("background-noop",r);this._noopSources.clear()}}_handleTextDocumentChanged=r=>{if(r.contentChanges.length===0){this._noopSources.add("no-content-changes");return}if(this._isDebugging){this._noopSources.add("debug-session");return}if(af(r.document)){this._noopSources.add("notebook-document");return}if(!K_e(r.document.uri)){this._noopSources.add("unsupported-uri");return}let n=this.workspaceManager.safeResolvePathName(r.document.uri);if(!n){this._noopSources.add("missing-path-name");return}let i=$a.window.activeTextEditor;if(!i||r.document!==i.document){this._noopSources.add("not-active-editor");return}if(this._logger.debug(`Received TextDocumentChangeEvent for ${n.relPath}`),this._suggestionManager.getActiveSuggestions().filter(o=>o.qualifiedPathName.equals(n)&&gi(o)&&o.result.truncationChar===void 0).length>0){this._noopSources.add("fresh-suggestions"),this._logger.debug("Continuing with remaining fresh suggestions.");return}this._requestManager.enqueueRequest(n,"BACKGROUND","FILE"),this._requestManager.enqueueRequest(n,"BACKGROUND","CURSOR")};_handleTextEditorSelectionChanged=r=>{let n=$a.window.activeTextEditor;if(!n||r.textEditor.document!==n.document||_C()||this._isDebugging||xo(n.document.uri))return;let i=this.workspaceManager.safeResolvePathName(r.textEditor.document.uri);if(!i)return;let s=this._suggestionManager.getActiveSuggestions().filter(a=>a.qualifiedPathName.equals(i)&&(a.state==="fresh"||a.state==="accepted")),o=td(n.selection);s.some(a=>{let l=a.state==="accepted"?a.afterLineRange(n.document):a.lineRange;return l.intersects(o)||l.touches(o)})||(this._requestManager.enqueueRequest(i,"BACKGROUND","FILE"),this._requestManager.enqueueRequest(i,"BACKGROUND","CURSOR"))}};var la=class e{constructor(t,r=(i,s)=>i===s,n=[]){this._value=t;this._equalityFn=r;this._listeners=n}static watch(t,...r){let n=()=>t(...r.map(a=>a.value)),i=new e(n()),s=r.map(a=>a.listen(()=>{i.value=n()})),o=i.dispose;return i.dispose=()=>{o(),s.forEach(a=>a())},i}dispose=()=>{this._listeners=[]};listen(t,r=!1){return r&&t(this._value,this._value),this._listeners.push(t),()=>{this._listeners=this._listeners.filter(n=>n!==t)}}get value(){return this._value}set value(t){if(this._equalityFn(t,this._value))return;let r=this._value;this._value=t;for(let n of this._listeners)n(t,r)}waitUntil(t,r){return new Promise((n,i)=>{let s,o=r!==void 0&&setTimeout(()=>{s?.(),i(new Error("Timeout exceeded."))},r);s=this.listen(a=>{t(a)&&(o&&clearTimeout(o),s?.(),n(a))},!0)})}};var bQ=class extends X{_maybeInlineCompletionVisible=new la(!1);constructor(){super(),this.addDisposable(f_e(t=>{this._maybeInlineCompletionVisible.value=t}))}get maybeInlineCompletionVisible(){return this._maybeInlineCompletionVisible.value}listen(t){return this._maybeInlineCompletionVisible.listen(t)}};var mwe=V(vs()),Ie=V(require("vscode"));var rd=V(require("vscode"));var D8=class{constructor(t,r){this.suggestion=t;this.isNext=r}toString(){return"hinted-suggestion"}},jn=class{constructor(){}get suggestion(){}toString(){return"no-suggestions"}},gs=class{constructor(t,r){this.suggestion=t;this.isNext=r}toString(){return"hinting"}get hintedSuggestion(){return new D8(this.suggestion,this.isNext)}},Ir=class{constructor(t){this.suggestion=t}toString(){return"before-preview"}},Vt=class{constructor(t){this.suggestion=t}toString(){return"after-preview"}},Sr=class{constructor(t,r,n){this.suggestion=t;this.selection=r;this.timeout=n}toString(){return"animating"}};function z_e(e,t){return e instanceof jn&&t instanceof jn?!0:e instanceof gs&&t instanceof gs?e.suggestion.equals(t.suggestion)&&e.isNext===t.isNext:e instanceof Ir&&t instanceof Ir||e instanceof Vt&&t instanceof Vt?e.suggestion.equals(t.suggestion):e instanceof Sr&&t instanceof Sr?e.suggestion.equals(t.suggestion)&&e.selection.isEqual(t.selection)&&e.timeout===t.timeout:!1}var xQ=class{constructor(t,r){this._state=t;this._keybindingWatcher=r}_onDidChangeCodeLenses=new rd.EventEmitter;onDidChangeCodeLenses=this._onDidChangeCodeLenses.event;get _activeSuggestion(){return this._state.value instanceof Ir||this._state.value instanceof Vt||this._state.value instanceof Sr?this._state.value.suggestion:void 0}refresh(){this._onDidChangeCodeLenses.fire()}_buildCodeLens(t,r,n){return new rd.CodeLens(n,{title:t,command:r,tooltip:this._getKeybindingForCommand(r,!0)??void 0,arguments:["code-lens"]})}_getKeybindingForCommand(t,r=!1){return Zu(this._keybindingWatcher,t,r)?.replace("Escape","esc")}provideCodeLenses(t,r){let n=this._activeSuggestion;if(!n)return[];if(!n.qualifiedPathName.equals(t.uri))return[];let i=[],s=new rd.Range(new rd.Position(n.lineRange.start,0),new rd.Position(n.lineRange.start,0));return i.push(new rd.CodeLens(s,{title:`Augment Next Edit: ${n.result.changeDescription}`,command:""})),this._state.value instanceof Vt||this._state.value instanceof Sr?i.push(this._buildCodeLens("Undo",Io.commandID,s)):i.push(this._buildCodeLens("Apply",Qc.commandID,s)),i.push(this._buildCodeLens("Reject",Nc.commandID,s)),i}};var NC=require("vscode");var J_e=new NC.EventEmitter,FA=J_e.event,W_=class extends X{constructor(r,n,i){super();this._reportId=n;this._vcsDetails=i;this._logger=j(`HeadChangeWatcher[${r}]`)}_logger;listening=!1;handleChange=()=>{this._logger.debug("handling HEAD change"),J_e.fire({repoId:this._reportId})};listenForChanges(){if(this.listening)return;if(this._vcsDetails.toolName!=="git")throw new Error("only git is supported for now");let r=NC.workspace.createFileSystemWatcher(new NC.RelativePattern(this._vcsDetails.root,".git/logs/HEAD"));this.addDisposables(r,r.onDidCreate(this.handleChange),r.onDidChange(this.handleChange),r.onDidDelete(this.handleChange)),this.listening=!0,this._logger.debug("Listening for HEAD changes.")}};var PC=require("vscode");var _Q=new PC.EventEmitter,IQ=_Q.event,wQ=class extends X{constructor(r,n,i){super();this._repoRoot=r;this._folderName=n;this._repoId=i;this._logger=j(`StashWatcher[${this._folderName}]`)}_logger;listening=!1;listenForChanges(){if(this.listening)return;let r=PC.Uri.joinPath(this._repoRoot,".git","refs","stash"),n=PC.workspace.createFileSystemWatcher(r.fsPath);this.addDisposables(n,n.onDidCreate(()=>{this._logger.debug("Stash created"),_Q.fire({repoId:this._repoId})}),n.onDidChange(()=>{this._logger.debug("Stash changed"),_Q.fire({repoId:this._repoId})}),n.onDidDelete(()=>{this._logger.debug("Stash deleted"),_Q.fire({repoId:this._repoId})})),this.listening=!0,this._logger.debug("Listening for stash changes.")}};var owe=V(require("assert")),Ve=V(require("vscode"));var SQ=V(require("vscode")),Z_e="var(--vscode-editorGhostText-foreground)";function k8(){return SQ.window.createTextEditorDecorationType({after:{contentText:" ",margin:"0 0 0 3em"}})}function F8(e){let t={after:{color:Z_e,margin:"0 0.25em 0 0"}};return(e||[1,2,3,4,5]).map((n,i)=>SQ.window.createTextEditorDecorationType({...t,...e?e[i]:{}}))}function BQ(e){return SQ.window.createTextEditorDecorationType({after:{color:Z_e,margin:"0 0 0 0.5em",contentText:e}})}function X_e(){return[k8(),F8(),BQ()]}var qyt=V(require("vscode"));function DQ(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}var Vyt=new Map([[31,"a"],[32,"b"],[33,"c"],[34,"d"],[35,"e"],[36,"f"],[37,"g"],[38,"h"],[39,"i"],[40,"j"],[41,"k"],[42,"l"],[43,"m"],[44,"n"],[45,"o"],[46,"p"],[47,"q"],[48,"r"],[49,"s"],[50,"t"],[51,"u"],[52,"v"],[53,"w"],[54,"x"],[55,"y"],[56,"z"],[4,"shift"],[20,"delete"],[3,"return"],[2,"tab"],[9,"escape"],[85,"semicolon"],[1,"backspace"],[5,{linux:"ctrl",win32:"ctrl",darwin:"control"}],[6,{linux:"alt",win32:"alt",darwin:"option"}],[57,{linux:"meta",win32:"win",darwin:"command"}]]);function ewe(e,t){let r=Vyt.get(e);return r==null||typeof r=="object"&&(r=r[t],r==null)?null:r}function Hyt(e,t){let r=ewe(e,t);return r==null?null:`$(augment-kb-${r})`}function twe(e,t){let r=ewe(e,t);if(r==null)return null;let i=jh()?.contributes.icons[`augment-kb-${r}`].default.fontCharacter?.replace("\\","")??null;return i==null?null:String.fromCharCode(parseInt(i,16))}function rwe(e,t){return e==null||e.chords.length<1?null:e.chords.find(n=>n instanceof dg)?e.toPrettyString(t):e.chords.map(n=>{let i=[],s=o=>{i.push(Hyt(o,t))};return n.ctrlKey&&s(5),n.shiftKey&&s(4),n.altKey&&s(6),n.metaKey&&s(57),n.keyCode&&s(n.keyCode),i.some(o=>o==null)?DQ(e.toPrettyString(t)):i.join("&nbsp;")}).join("&nbsp;&nbsp;")}function G_(e,t,r){let n=Lc.getStructuredKeybinding(t.getKeybindingForCommand(e));if(!n||n.chords.length<1)return[];if(n.chords.length>1||n.chords[0]instanceof dg)return[{after:{contentText:n?`[${n.toPrettyString(t.getSimplifiedPlatform())}]`:""}}];{let i=n.chords[0],s=[],o=l=>{s.push(twe(l,t.getSimplifiedPlatform()))};if(i.ctrlKey&&o(5),i.shiftKey&&o(4),i.altKey&&o(6),i.metaKey&&o(57),i.keyCode&&o(i.keyCode),s.some(l=>l==null))return[{after:{contentText:n?`[${n.toPrettyString(t.getSimplifiedPlatform())}]`:""}}];let a={fontFamily:'"Augment.vscode-augment/augment-kb-icon-font.woff"',verticalAlign:"bottom"};return s.map(l=>({light:{after:{...a,contentText:l}},dark:{after:{...a,contentText:l}}}))}}var LC=V(require("vscode"));function yg(e){let t=new LC.Position(e,0);return new LC.Range(t,t)}function Cg(e,t){let r=e.document.lineAt(t).range.end;return new LC.Range(r,r)}var iwe=V(require("assert")),TQ=V(require("vscode"));var nwe=j("DecorationManager"),RQ=class extends X{previousDecorationsPerEditor=new Map;addExtraDecorationsForActiveEditor(t,r,n,i){return t}getDecorationsForNextSuggestion;decorate(t,r){let n=new Map;for(let i of TQ.window.visibleTextEditors){if(!i.viewColumn)continue;let s=n.get(i)??n.set(i,this.createEmptyDecorations()).get(i),o=t.filter(a=>a.qualifiedPathName.equals(i.document.uri));for(let a of o)this.addDecorationsForItem(s,i,a,r);i===TQ.window.activeTextEditor&&this.addExtraDecorationsForActiveEditor(s,i,t,r)}for(let[i,s]of n)for(let[o,a]of s){if(o===void 0){nwe.warn("Got an undefined decoration type.");continue}(0,iwe.default)(a.every(l=>l instanceof a[0].constructor)),i.setDecorations(o,a)}for(let[i,s]of this.previousDecorationsPerEditor){if(!TQ.window.visibleTextEditors.includes(i)){this.previousDecorationsPerEditor.delete(i);continue}if(!n.has(i))for(let[o,a]of s){if(o===void 0){nwe.warn("Got an undefined decoration type.");continue}i.setDecorations(o,[])}}this.previousDecorationsPerEditor=n}};var Ya=class e{constructor(t,r,n,i,s,o,a="file",l=new Date,c="fresh"){this.requestId=t;this.mode=r;this.scope=n;this.result=i;this.qualifiedPathName=s;this.lineRange=o;this.uriScheme=a;this.occurredAt=l;this.state=c;this.changeType=e.determineChangeType(this.result.existingCode,this.result.suggestedCode),this.changeType==="modification"&&this.makeOneLineDiffSpans().filter(f=>f.type!=="noop").every(f=>f.type==="insertion"&&f.updated.isWholeLine)&&(this.changeType="insertion"),this.changeType==="insertion"&&this.lineRange.start>0?this.highlightRange=new Nn(this.lineRange.start-1,this.lineRange.stop-(this.lineRange.stop>this.lineRange.start&&this.result.existingCode.indexOf(`
`)===-1?1:0)):this.changeType==="insertion"&&this.lineRange.start===0&&this.lineRange.stop===0?this.highlightRange=new Nn(0,1):this.highlightRange=this.lineRange}changeType;highlightRange;previewCursorRange(t){let r=this.previewBoxRange(t);return new Nn(Math.max(0,r.start-1),r.stop)}previewBoxRange(t){let r=this.state==="accepted",n=r?this.afterLineRange(t):this.highlightRange;return r&&(this.changeType==="deletion"&&n.start>0?n=new Nn(n.start-1,n.stop-(n.stop>n.start&&this.result.suggestedCode.indexOf(`
`)===-1?1:0)):this.changeType==="deletion"&&n.start===0&&n.stop===0&&(n=new Nn(0,1))),n}get previewTargetCursorLine(){return Math.max(0,this.lineRange.start-1)}toString(){return`EditSuggestion(${this.qualifiedPathName.relPath}:${this.lineRange.toString()})`}equals(t){return this.result.suggestionId===t?.result.suggestionId}compareTo(t){return this.qualifiedPathName.equals(t.qualifiedPathName)?this.lineRange.compareTo(t.lineRange):this.qualifiedPathName.relPath.localeCompare(t.qualifiedPathName.relPath)}makeOneLineDiffSpans(){return e.makeOneLineDiffSpans(this.result.diffSpans,this.result.existingCode,this.result.suggestedCode,this.lineRange)}static determineChangeType(t,r){return t===r?"noop":t===""?"insertion":r===""?"deletion":"modification"}static makeOneLineDiffSpans(t,r,n,i){if(!t)return[];let s=t.sort((f,p)=>f.original.start-p.original.start),o=[],a=i.start,l=i.start,c=!0,u=!0;for(let f of s){let p=r.slice(f.original.start,f.original.stop),g=n.slice(f.updated.start,f.updated.stop),A=e.determineChangeType(p,g),y=p.split(`
`),C=g.split(`
`),v=Math.max(y.length,C.length),b=f.original.start,w=f.updated.start;for(let B=0;B<v;B++){let F=y.length>B?y[B]:"",Q=C.length>B?C[B]:"";if(B<y.length-1&&(F+=`
`),B<C.length-1&&(Q+=`
`),F===""&&Q==="")continue;let W=A;o.push({original:{text:F,charRange:new Bo(b,b+F.length),line:a,isWholeLine:c&&F.endsWith(`
`)},updated:{text:Q,charRange:new Bo(w,w+Q.length),line:l,isWholeLine:u&&Q.endsWith(`
`)},type:W}),b+=F.length,w+=Q.length,F.endsWith(`
`)?(a++,c=!0):c=!1,Q.endsWith(`
`)?(l++,u=!0):u=!1}}return o.filter(f=>f.original.text!==""||f.updated.text!=="")}afterLineRange(t){return this.state!=="accepted"?this.lineRange:t?this.result.charStart+Tl(this.result.suggestedCode)>Tl(t.getText())?this.lineRange:new Nn(t.positionAt(this.result.charStart).line,t.positionAt(this.result.charStart+Tl(this.result.suggestedCode)).line):new Nn(this.lineRange.start,this.lineRange.stop+this.result.suggestedCode.split(`
`).length-this.result.existingCode.split(`
`).length)}intersects(t){return this.qualifiedPathName.equals(t.qualifiedPathName)&&(this.lineRange.equals(t.lineRange)||this.lineRange.intersects(t.lineRange))}with(t){return new e(t.requestId??this.requestId,t.mode??this.mode,t.scope??this.scope,t.result??this.result,t.qualifiedPathName??this.qualifiedPathName,t.lineRange??this.lineRange,t.uriScheme??this.uriScheme,t.occurredAt??this.occurredAt,t.state??this.state)}static from(t){return new e(t.requestId,t.mode,t.scope,t.result,qe.from(t.qualifiedPathName),new Nn(t.lineRange.start,t.lineRange.stop),t.uriScheme,t.occurredAt,t.state)}};var Vc=V(require("vscode"));var swe={border:0,background:1,line:2},kQ=class extends X{constructor(r){super();this._styles=r;this._decorationTypes.insertion=this._createDecorations(this._styles.insertion),this._decorationTypes.deletion=this._createDecorations(this._styles.deletion),this.addDisposables(...Object.values(this._decorationTypes.insertion).flat(),...Object.values(this._decorationTypes.deletion).flat())}_decorationTypes={insertion:{upper:[],lower:[]},deletion:{upper:[],lower:[]}};_createDecorations(r){return{upper:this._createHalfDecoration(r,!1),lower:this._createHalfDecoration(r,!0)}}_createHalfDecoration(r,n){let i=s=>n?`${s} 0 0 0`:`0 0 ${s} 0`;return[Vc.window.createTextEditorDecorationType({borderWidth:i(r.borderWidth),light:{borderColor:r.lightBorderColor},dark:{borderColor:r.darkBorderColor},borderStyle:"solid",isWholeLine:!0}),Vc.window.createTextEditorDecorationType({borderWidth:i("0.2em"),light:{borderColor:r.lightBackgroundColor},dark:{borderColor:r.darkBackgroundColor},borderStyle:"solid",isWholeLine:!0}),Vc.window.createTextEditorDecorationType({borderWidth:i("0.1em"),borderColor:r.lineColor,borderStyle:"solid",isWholeLine:!0,overviewRulerColor:n?r.overviewRulerColor:void 0,overviewRulerLane:n?Vc.OverviewRulerLane.Right:void 0})]}addEmptyDecorations(r){for(let n of["insertion","deletion"])for(let i of["upper","lower"])for(let s of this._decorationTypes[n][i])r.set(s,[])}addDecorations(r,n,i){if(n>0)for(let s of this._decorationTypes[r].upper)i.get(s)?.push(new Vc.Range(n-1,0,n-1,0));for(let s of this._decorationTypes[r].lower)i.get(s)?.push(new Vc.Range(n,0,n,0))}addSimpleInsertionDecoration(r,n){r>0&&n.get(this._decorationTypes.insertion.upper[swe.line])?.push(new Vc.Range(r-1,0,r-1,0)),n.get(this._decorationTypes.insertion.lower[swe.line])?.push(new Vc.Range(r,0,r,0))}};var FQ=class e extends RQ{constructor(r,n,i,s,o,a,l){super();this._context=r;this._workspaceManager=n;this._keybindingWatcher=i;this._configListener=s;this._nextEditSessionEventReporter=o;this._completionVisible=a;this._showAllLineHighlights=l;let c={active:{insertion:{light:"nextedit-addition-selected-light.svg",dark:"nextedit-addition-selected-dark.svg"},insertionInBetween:{light:"nextedit-addition-inbetween-selected-light.svg",dark:"nextedit-addition-inbetween-selected-dark.svg"},deletion:{light:"nextedit-deletion-selected-light.svg",dark:"nextedit-deletion-selected-dark.svg"},modification:{light:"nextedit-change-selected-light.svg",dark:"nextedit-change-selected-dark.svg"}},inactive:{insertion:{light:"nextedit-addition-light.svg",dark:"nextedit-addition-dark.svg"},insertionInBetween:{light:"nextedit-addition-inbetween-light.svg",dark:"nextedit-addition-inbetween-dark.svg"},deletion:{light:"nextedit-deletion-light.svg",dark:"nextedit-deletion-dark.svg"},modification:{light:"nextedit-change-light.svg",dark:"nextedit-change-dark.svg"}},applied:{light:"nextedit-applied-light.svg",dark:"nextedit-applied-dark.svg"},appliedInBetween:{light:"nextedit-applied-inbetween-light.svg",dark:"nextedit-applied-inbetween-dark.svg"},grayline:{light:"bg-next-edit-gray-line.svg",dark:"bg-next-edit-gray-line.svg"},grayhook:{light:"bg-next-edit-gray-hook.svg",dark:"bg-next-edit-gray-hook.svg"}},u=new Map([["insertion",{inline:"rgb(from var(--vscode-diffEditor-insertedTextBackground) r g b / calc(alpha * 1.8))",focusLine:"rgb(from var(--vscode-diffEditor-insertedTextBackground) r g b / calc(alpha * 1.3))",lineBackground:new Ve.ThemeColor("diffEditor.insertedLineBackground"),lineOverview:new Ve.ThemeColor("editorOverviewRuler.addedForeground")}],["deletion",{inline:"rgb(from var(--vscode-diffEditor-removedTextBackground) r g b / calc(alpha * 2))",focusLine:"var(--vscode-diffEditor-removedLineBackground)",lineBackground:"rgb(from var(--vscode-diffEditor-removedLineBackground) r g b / calc(alpha * 0.5))",lineOverview:new Ve.ThemeColor("editorOverviewRuler.deletedForeground")}],["modification",{inline:"rgb(from var(--vscode-editorOverviewRuler-modifiedForeground) r g b / calc(alpha * 0.5))",focusLine:"rgb(from var(--vscode-editorOverviewRuler-modifiedForeground) r g b / calc(alpha * 0.35))",lineBackground:"rgb(from var(--vscode-editorOverviewRuler-modifiedForeground) r g b / calc(alpha * 0.2))",lineOverview:new Ve.ThemeColor("editorOverviewRuler.modifiedForeground")}]]),f=new Map([["insertion",{dark:{backgroundColor:"#27E14966",color:"#BCF0C9"},light:{backgroundColor:"#82CC0266",color:"#4B543E"}}],["deletion",{dark:{backgroundColor:"#FF272766",color:"#F4A2A6"},light:{backgroundColor:"#FF272766",color:"#412C2D"}}],["modification",{dark:{backgroundColor:"#FFE30966",color:"#F4EEB6"},light:{backgroundColor:"#EDBD0099",color:"#433C1E"}}]]),p={light:{after:{color:"color-mix(in srgb, rgb(0, 0, 0) 50%, var(--vscode-editor-background))",backgroundColor:"color-mix(in srgb, rgb(0,0,0) 15%, var(--vscode-editor-background))"}},dark:{after:{color:"color-mix(in srgb, rgb(255, 255, 255) 90%, var(--vscode-editor-background))",backgroundColor:"color-mix(in srgb, rgb(255, 255, 255) 25%, var(--vscode-editor-background))"}}},g=(v,b,w,B="75%")=>{let F=c[v][b][w];return{gutterIconPath:Ve.Uri.joinPath(r.extensionUri,"media","next-edit",F),gutterIconSize:B}},A=(v,b,w="75%")=>{let B=c[v][b];return{gutterIconPath:Ve.Uri.joinPath(r.extensionUri,"media","next-edit",B),gutterIconSize:w}};this._gutterDecorations={active:{insertion:Ve.window.createTextEditorDecorationType({light:g("active","insertion","light"),dark:g("active","insertion","dark"),overviewRulerColor:u.get("insertion")?.lineOverview,overviewRulerLane:Ve.OverviewRulerLane.Right}),insertionInBetween:Ve.window.createTextEditorDecorationType({light:g("active","insertionInBetween","light"),dark:g("active","insertionInBetween","dark"),overviewRulerColor:u.get("insertion")?.lineOverview,overviewRulerLane:Ve.OverviewRulerLane.Right}),deletion:Ve.window.createTextEditorDecorationType({light:g("active","deletion","light"),dark:g("active","deletion","dark"),overviewRulerColor:u.get("deletion")?.lineOverview,overviewRulerLane:Ve.OverviewRulerLane.Right}),modification:Ve.window.createTextEditorDecorationType({light:g("active","modification","light"),dark:g("active","modification","dark"),overviewRulerColor:u.get("modification")?.lineOverview,overviewRulerLane:Ve.OverviewRulerLane.Right})},inactive:{insertion:Ve.window.createTextEditorDecorationType({light:g("inactive","insertion","light"),dark:g("inactive","insertion","dark"),overviewRulerColor:u.get("insertion")?.lineOverview,overviewRulerLane:Ve.OverviewRulerLane.Right}),insertionInBetween:Ve.window.createTextEditorDecorationType({light:g("inactive","insertionInBetween","light"),dark:g("inactive","insertionInBetween","dark"),overviewRulerColor:u.get("insertion")?.lineOverview,overviewRulerLane:Ve.OverviewRulerLane.Right}),deletion:Ve.window.createTextEditorDecorationType({light:g("inactive","deletion","light"),dark:g("inactive","deletion","dark"),overviewRulerColor:u.get("deletion")?.lineOverview,overviewRulerLane:Ve.OverviewRulerLane.Right}),modification:Ve.window.createTextEditorDecorationType({light:g("inactive","modification","light"),dark:g("inactive","modification","dark"),overviewRulerColor:u.get("modification")?.lineOverview,overviewRulerLane:Ve.OverviewRulerLane.Right})},applied:Ve.window.createTextEditorDecorationType({light:A("applied","light"),dark:A("applied","dark")}),appliedInBetween:Ve.window.createTextEditorDecorationType({light:A("appliedInBetween","light"),dark:A("appliedInBetween","dark")}),grayline:Ve.window.createTextEditorDecorationType({light:A("grayline","light","cover"),dark:A("grayline","dark","cover")}),grayhook:Ve.window.createTextEditorDecorationType({light:A("grayhook","light","cover"),dark:A("grayhook","dark","cover")})},this.addDisposables(...Object.values(this._gutterDecorations.active),...Object.values(this._gutterDecorations.inactive),this._gutterDecorations.applied,this._gutterDecorations.appliedInBetween,this._gutterDecorations.grayline,this._gutterDecorations.grayhook),this._focusLineDecorations=new Map,this._focusWholeLineDecorations=new Map,this._wholeLineDecorations=new Map,this._lineDecorations=new Map,this._zeroWidthChangeDecorationsRight=new Map,this._zeroWidthChangeDecorationsLeft=new Map,this._zeroWidthChangeDecorationsStartLine=new Map,this._zeroWidthChangeDecorationsEndLine=new Map;for(let[v,b]of u){this._focusLineDecorations.set(v,Ve.window.createTextEditorDecorationType({backgroundColor:b.focusLine,isWholeLine:!1,overviewRulerColor:b.lineOverview,overviewRulerLane:Ve.OverviewRulerLane.Right})),this._focusWholeLineDecorations.set(v,Ve.window.createTextEditorDecorationType({backgroundColor:b.focusLine,isWholeLine:!0,overviewRulerColor:b.lineOverview,overviewRulerLane:Ve.OverviewRulerLane.Right})),this._lineDecorations.set(v,Ve.window.createTextEditorDecorationType({backgroundColor:b.lineBackground,isWholeLine:!1,overviewRulerColor:b.lineOverview,overviewRulerLane:Ve.OverviewRulerLane.Right})),this._wholeLineDecorations.set(v,Ve.window.createTextEditorDecorationType({backgroundColor:b.lineBackground,isWholeLine:!0,overviewRulerColor:b.lineOverview,overviewRulerLane:Ve.OverviewRulerLane.Right}));let w={borderStyle:"solid",borderColor:b.inline};this._zeroWidthChangeDecorationsRight.set(v,Ve.window.createTextEditorDecorationType({borderWidth:"0 0.2em 0 0",...w})),this._zeroWidthChangeDecorationsLeft.set(v,Ve.window.createTextEditorDecorationType({borderWidth:"0 0 0 0.2em",...w})),this._zeroWidthChangeDecorationsStartLine.set(v,Ve.window.createTextEditorDecorationType({borderWidth:"0 0 0 0.4em",...w})),this._zeroWidthChangeDecorationsEndLine.set(v,Ve.window.createTextEditorDecorationType({borderWidth:"0 0.4em 0 0",...w}))}this.addDisposables(...this._focusLineDecorations.values(),...this._focusWholeLineDecorations.values(),...this._lineDecorations.values(),...this._wholeLineDecorations.values(),...this._zeroWidthChangeDecorationsRight.values(),...this._zeroWidthChangeDecorationsLeft.values(),...this._zeroWidthChangeDecorationsStartLine.values(),...this._zeroWidthChangeDecorationsEndLine.values()),this._inlineDecorations=new Map;for(let[v,b]of f)this._inlineDecorations.set(v,Ve.window.createTextEditorDecorationType({...b,borderRadius:"0.2em"}));this.addDisposables(...this._inlineDecorations.values()),this._bottomLineDecorationType=Ve.window.createTextEditorDecorationType({after:{backgroundColor:"var(--vscode-editor-background)"}}),this.addDisposables(this._bottomLineDecorationType),this._bottomBoxDecorationType=Ve.window.createTextEditorDecorationType({light:{after:{backgroundColor:p.light.after.backgroundColor}},dark:{after:{backgroundColor:p.dark.after.backgroundColor}}}),this.addDisposables(this._bottomBoxDecorationType),this._bottomBoxLogoDecorationType=Ve.window.createTextEditorDecorationType({light:{after:{color:p.light.after.color}},dark:{after:{color:`color-mix(in srgb, ${p.dark.after.color} 50%, ${p.dark.after.backgroundColor})`}}}),this.addDisposables(this._bottomBoxLogoDecorationType),[this._rightSpacerDecorationType,this._rightKeybindingDecorationTypes,this._rightDecorationType]=X_e(),this.addDisposables(this._rightSpacerDecorationType,...this._rightKeybindingDecorationTypes,this._rightDecorationType),this._bottomTextDecorationType=Ve.window.createTextEditorDecorationType({dark:{after:{color:p.dark.after.color,backgroundColor:p.dark.after.backgroundColor}},light:{after:{color:p.light.after.color,backgroundColor:p.light.after.backgroundColor}}}),this.addDisposables(this._bottomTextDecorationType);let y={light:{borderColor:"#87BFFF80",backgroundColor:"#87BFFF33",overviewRulerColor:"#87BFFF"},dark:{borderColor:"#9ECBFF80",backgroundColor:"#9ECBFF1A",overviewRulerColor:"#9ECBFF"},borderStyle:"solid",isWholeLine:!0,borderWidth:"0.1em",borderRadius:"0.4em",overviewRulerLane:Ve.OverviewRulerLane.Right},C={light:{borderColor:"#87BFFF",backgroundColor:"#87BFFF33",overviewRulerColor:"#87BFFF"},dark:{borderColor:"#9ECBFF",backgroundColor:"#9ECBFF1A",overviewRulerColor:"#9ECBFF"},borderStyle:"solid",isWholeLine:!0,borderWidth:"0.2em",borderRadius:"0.4em",overviewRulerLane:Ve.OverviewRulerLane.Right};this._zeroHeightDiffLineBuilder=new kQ({insertion:{lineColor:"rgb(from var(--vscode-diffEditor-insertedLineBackground) r g b / 1)",lightBorderColor:y.light.borderColor,darkBorderColor:y.dark.borderColor,lightBackgroundColor:"color-mix(in srgb, #87BFFF 33%, var(--vscode-editor-background))",darkBackgroundColor:"color-mix(in srgb, #9ECBFF 10%, var(--vscode-editor-background))",borderWidth:"0.3em",overviewRulerColor:u.get("insertion")?.lineOverview},deletion:{lineColor:"rgb(from var(--vscode-diffEditor-removedLineBackground) r g b / calc(alpha * 1.3))",lightBorderColor:C.light.borderColor,darkBorderColor:C.dark.borderColor,lightBackgroundColor:"color-mix(in srgb, #87BFFF 33%, var(--vscode-editor-background))",darkBackgroundColor:"color-mix(in srgb, #9ECBFF 10%, var(--vscode-editor-background))",borderWidth:"0.4em",overviewRulerColor:u.get("deletion")?.lineOverview}}),this.addDisposables(this._zeroHeightDiffLineBuilder),this._activeChangeDecoration1Line=new Map,this._activeChangeDecorationTop=new Map,this._activeChangeDecorationMiddle=new Map,this._activeChangeDecorationBottom=new Map;for(let{baseType:v,mode:b}of[{baseType:y,mode:0},{baseType:C,mode:1}])this._activeChangeDecoration1Line.set(b,Ve.window.createTextEditorDecorationType({...v})),this._activeChangeDecorationTop.set(b,Ve.window.createTextEditorDecorationType({...v,borderWidth:[v.borderWidth,v.borderWidth,"0",v.borderWidth].join(" "),borderRadius:[v.borderRadius,v.borderRadius,"0","0"].join(" ")})),this._activeChangeDecorationMiddle.set(b,Ve.window.createTextEditorDecorationType({...v,borderRadius:void 0,borderWidth:["0",v.borderWidth,"0",v.borderWidth].join(" ")})),this._activeChangeDecorationBottom.set(b,Ve.window.createTextEditorDecorationType({...v,borderWidth:["0",v.borderWidth,v.borderWidth,v.borderWidth].join(" "),borderRadius:["0","0",v.borderRadius,v.borderRadius].join(" ")}));this.addDisposables(...this._activeChangeDecoration1Line.values(),...this._activeChangeDecorationTop.values(),...this._activeChangeDecorationMiddle.values(),...this._activeChangeDecorationBottom.values())}_gutterDecorations;_lineDecorations;_wholeLineDecorations;_focusLineDecorations;_focusWholeLineDecorations;_inlineDecorations;_rightDecorationType;_bottomBoxLogoDecorationType;_rightKeybindingDecorationTypes;_rightSpacerDecorationType;_bottomLineDecorationType;_bottomBoxDecorationType;_bottomTextDecorationType;_zeroWidthChangeDecorationsRight;_zeroWidthChangeDecorationsLeft;_zeroWidthChangeDecorationsStartLine;_zeroWidthChangeDecorationsEndLine;_activeChangeDecoration1Line;_activeChangeDecorationTop;_activeChangeDecorationMiddle;_activeChangeDecorationBottom;_zeroHeightDiffLineBuilder;shouldDrawBottomDecorations=new la(!0);babyGlobalHintRange;bottomBoxRange;cursorHintRange;_filesWithGutterIconActions=new Set;_linesWithGutterIconActions=[];_logger=j("BackgroundDecorationManager");static suppressGhostTextLineThreshold=3;static _maxGrayTextChars=40;static _maxBottomTextPathChars=40;static _maxBottomTextChars=80;createEmptyDecorations(){let r=new Map;r.set(this._rightSpacerDecorationType,[]),r.set(this._rightDecorationType,[]),this._rightKeybindingDecorationTypes.forEach(i=>{r.set(i,[])}),r.set(this._bottomLineDecorationType,[]),r.set(this._bottomBoxDecorationType,[]),r.set(this._bottomBoxLogoDecorationType,[]),r.set(this._bottomTextDecorationType,[]),this._zeroHeightDiffLineBuilder.addEmptyDecorations(r),this._activeChangeDecoration1Line.forEach(i=>{r.set(i,[])}),this._activeChangeDecorationTop.forEach(i=>{r.set(i,[])}),this._activeChangeDecorationMiddle.forEach(i=>{r.set(i,[])}),this._activeChangeDecorationBottom.forEach(i=>{r.set(i,[])}),Object.values(this._gutterDecorations.active).forEach(i=>{r.set(i,[])}),Object.values(this._gutterDecorations.inactive).forEach(i=>{r.set(i,[])}),r.set(this._gutterDecorations.applied,[]),r.set(this._gutterDecorations.appliedInBetween,[]),r.set(this._gutterDecorations.grayline,[]),r.set(this._gutterDecorations.grayhook,[]);let n=["insertion","deletion","modification"];for(let i of n)r.set(this._lineDecorations.get(i),[]),r.set(this._focusLineDecorations.get(i),[]),r.set(this._wholeLineDecorations.get(i),[]),r.set(this._focusWholeLineDecorations.get(i),[]),r.set(this._inlineDecorations.get(i),[]),r.set(this._zeroWidthChangeDecorationsRight.get(i),[]),r.set(this._zeroWidthChangeDecorationsLeft.get(i),[]),r.set(this._zeroWidthChangeDecorationsStartLine.get(i),[]),r.set(this._zeroWidthChangeDecorationsEndLine.get(i),[]);return r}decorate(r,n){this._filesWithGutterIconActions.clear(),this._linesWithGutterIconActions=[],super.decorate(r,n),Ve.commands.executeCommand("setContext","vscode-augment.nextEdit.linesWithGutterIconActions",this._linesWithGutterIconActions),Ve.commands.executeCommand("setContext","vscode-augment.nextEdit.filesWithGutterIconActions",Array.from(this._filesWithGutterIconActions))}addDecorationsForItem(r,n,i,s){if(!i.qualifiedPathName.equals(n.document.uri)||i.changeType==="noop")return r;let o=i.equals(s.activeSuggestion),a=o||i.equals(s.hintSuggestion?.suggestion),l=i.state==="accepted",c=i.makeOneLineDiffSpans(),u=l?i.afterLineRange(n.document):i.lineRange,f;u.start===0||i.changeType!=="insertion"&&!(c[0]&&c[0].type==="insertion"&&c[0].updated.isWholeLine)?f=u:n.document.lineAt(u.start-1).text.length>0?f=new Nn(u.start-1,u.stop):f=new Nn(u.start-1,u.stop-1);let p=ee=>{l||(this._filesWithGutterIconActions.add(i.qualifiedPathName.absPath),this._linesWithGutterIconActions.push(ee+1))},g=i.changeType==="insertion"&&i.lineRange.length===0?"insertionInBetween":i.changeType,A=s.activeSuggestion!==void 0&&s.activeSuggestion.state!=="accepted",y;l&&u.length===0?y=this._gutterDecorations.appliedInBetween:l?y=this._gutterDecorations.applied:o||!A&&a?y=this._gutterDecorations.active[g]:y=this._gutterDecorations.inactive[g];let C=i.previewBoxRange(n.document);r.get(y)?.push(yg(C.start)),p(C.start);for(let ee=C.start+1;ee<C.stop-1;ee++)r.get(this._gutterDecorations.grayline)?.push(yg(ee)),p(ee);if(C.stop-C.start>1&&(r.get(this._gutterDecorations.grayhook)?.push(yg(C.stop-1)),p(C.stop-1)),s.isAnimating&&s.activeSuggestion&&!o||a&&this._completionVisible())return r;let v=o,b=this._showAllLineHighlights()&&!v&&!l,w=Ms(f);if(b&&!o)if(i.changeType==="insertion")this._zeroHeightDiffLineBuilder.addSimpleInsertionDecoration(w.start.line+1,r);else{let ee=f.length===0||i.result.existingCode===`
`,U=[[this._lineDecorations,this._wholeLineDecorations],[this._focusLineDecorations,this._focusWholeLineDecorations]][+a][+ee],ge=w;ee&&(ge=w.with(void 0,w.end.translate(-1,0))),r.get(U.get(i.changeType))?.push(ge)}else if(v){if(i.changeType==="insertion"&&!l||i.changeType==="deletion"&&l)this._zeroHeightDiffLineBuilder.addDecorations(i.changeType,w.start.line+(i.changeType==="insertion"?1:0),r);else if(i.changeType===(l?"deletion":"insertion")){let U=f.length===0?this._focusWholeLineDecorations:this._focusLineDecorations;r.get(U.get(i.changeType))?.push(w)}for(let[U,ge]of Wyt(n.document,i,!l))if(U==="noop")b&&r.get(this._focusLineDecorations.get(i.changeType))?.push(ge);else if(U==="deletion"&&ge.start.character===0&&ge.end.character===0){r.get(this._focusLineDecorations.get(U))?.push(ge);continue}else ge.start.isEqual(ge.end)?this._addZeroWidthDecoration(n.document,r,ge,U):r.get(this._inlineDecorations.get(U)).push(ge);let ee=l?1:0;this._addPreviewBox(r,n,i,ee)}let B=i.result.changeDescription,F=n.selection,Q=n.visibleRanges.some(ee=>ee.contains(Ms(f))),W=this._configListener.config.nextEdit.useCursorDecorations,Z=F.active.line-f.start,$=!W||Math.abs(Z)<=e.suppressGhostTextLineThreshold;return a&&Q&&!l&&!o&&($&&this.addKeybindingDecor(f.start,r,n,this._configListener.config.nextEdit.enableGotoHinting?Ga.commandID:s.hintSuggestion?.isNext?oa.commandID:Ju.commandID),this.addGrayText(`${B}`,f.start,r,n),this._nextEditSessionEventReporter.reportEventFromSuggestion(i,"suggestion-hint-shown","background")),Q&&!l&&this._nextEditSessionEventReporter.reportEventFromSuggestion(i,"suggestion-visibly-shown","background"),r}_addZeroWidthDecoration(r,n,i,s){if(i.start.character===0){n.get(this._zeroWidthChangeDecorationsStartLine.get(s)).push(new Ve.Range(i.start,i.start.translate(0,1)));return}else if(i.start.character===r.lineAt(i.start.line).text.length){n.get(this._zeroWidthChangeDecorationsEndLine.get(s)).push(new Ve.Range(i.start.translate(0,-1),i.start));return}else n.get(this._zeroWidthChangeDecorationsLeft.get(s)).push(new Ve.Range(i.start,i.start.translate(0,1))),n.get(this._zeroWidthChangeDecorationsRight.get(s)).push(new Ve.Range(i.start.translate(0,-1),i.start))}addKeybindingDecor(r,n,i,s=oa.commandID){G_(s,this._keybindingWatcher,this._context).map((o,a)=>{n.get(this._rightKeybindingDecorationTypes[a])?.push({range:Cg(i,r),renderOptions:o})})}addGrayText(r,n,i,s){i.get(this._rightSpacerDecorationType).push({range:Cg(s,n)});let o=ac(r,e._maxGrayTextChars);i.get(this._rightDecorationType).push({range:Cg(s,n),renderOptions:{after:{contentText:o}}})}addExtraDecorationsForActiveEditor(r,n,i,s){(0,owe.default)(n===Ve.window.activeTextEditor);let o=this._workspaceManager.safeResolvePathName(n.document.uri);if(!o)return r;this.babyGlobalHintRange=void 0,this.bottomBoxRange=void 0,this.cursorHintRange=void 0;let a=s.hintSuggestion?.suggestion;if(this._completionVisible()||!a||n.visibleRanges.length===0)return r;let l=this._configListener.config.nextEdit.useCursorDecorations;if(a.qualifiedPathName.equals(n.document.uri)){let c=a.result.changeDescription,u=n.selection,f;if(a.changeType!=="insertion"||a.lineRange.start===0?f=a.lineRange:n.document.lineAt(a.lineRange.start-1).text.length>0?f=new Nn(a.lineRange.start-1,a.lineRange.stop):f=new Nn(a.lineRange.start-1,a.lineRange.stop-1),l){let p=u.intersection(Ms(f)),g=u.start.line-f.start,A=Math.abs(g)>e.suppressGhostTextLineThreshold||!n.visibleRanges.some(C=>C.contains(Ms(f))),y="";!p&&A&&(y=`${g>0?"\u2191":"\u2193"}${Math.abs(g)} lines: `),(y||p)&&(this.addKeybindingDecor(u.start.line,r,n,this._configListener.config.nextEdit.enableGotoHinting?Ga.commandID:g<=0?oa.commandID:Ju.commandID),this.addGrayText(`${y}${c}`,u.start.line,r,n),this.cursorHintRange=Cg(n,u.start.line),this._nextEditSessionEventReporter.reportEventFromSuggestion(a,"suggestion-offset-text-shown","background"))}else{if(n.visibleRanges.some(g=>g.contains(Ms(a.highlightRange))))return r;let p=f.start<B8(n)[0].start.line?"\u2191":"\u2193";this.addBottomDecoration(r,n,`${p} ${c}`),this._nextEditSessionEventReporter.reportEventFromSuggestion(a,"suggestion-bottom-text-shown","background")}}else if(this._configListener.config.nextEdit.enableGlobalBackgroundSuggestions){if(l){this.addKeybindingDecor(n.selection.active.line,r,n);let c="in file: ";this.addGrayText(`${c}${ac(a.qualifiedPathName.relPath,e._maxGrayTextChars-Tl(c),!0)}`,n.selection.active.line,r,n),this.babyGlobalHintRange=Cg(n,n.selection.active.line)}else{let c="\u21AA ",u=Fl(o.relPath,a.qualifiedPathName.relPath),f=ac(u.length<a.qualifiedPathName.relPath.length?u:a.qualifiedPathName.relPath,e._maxBottomTextPathChars,!0),p=a.result.changeDescription,g=ac(`${c}${f}: ${p}`,e._maxBottomTextChars,!1);this.addBottomDecoration(r,n,g)}this._nextEditSessionEventReporter.reportEventFromSuggestion(a,"suggestion-global-bottom-text-shown","background")}return r}addBottomDecoration(r,n,i){if(n.visibleRanges.length===0||!this.shouldDrawBottomDecorations.value)return;let s=B8(n),o=s[s.length-1],a=o.end.line>=n.document.lineCount-1,l=n.selection,c=a?l.active.line>o.end.line-2:l.active.line>o.end.line-3;if(s.some(v=>v.intersection(l))&&c)return;let u=ac(i,e._maxBottomTextChars),f=v=>{if(v<0||v>=n.document.lineCount)return;let b=n.document.lineAt(v).text.length;r.get(this._bottomLineDecorationType).push({range:new Ve.Range(v,b,v,b),renderOptions:{after:{margin:`0 ${-b}ch 0 ${-b}ch`,contentText:`${"\xA0".repeat(b)}`,padding:"0 0 0.3lh 0"}}})};a?f(o.end.line):(f(o.end.line-1),f(o.end.line),f(o.end.line+1),f(o.end.line+2));let p=a?n.document.lineCount-1:o.end.line-1,g=n.document.lineAt(p).text.length,A=new Ve.Range(p,g,p,g);this.babyGlobalHintRange=new Ve.Range(p,0,p,g),this.bottomBoxRange=this.babyGlobalHintRange;let y=20;r.get(this._bottomBoxDecorationType).push({range:A,renderOptions:{after:{margin:`0 -${y+1}ch 0 0`,contentText:`${"\xA0".repeat(y)}`,padding:"0.2em 1ch 0.15em 1ch",borderRadius:"0.3em"}}});let C={contentText:"\uE901",fontFamily:'"Augment.vscode-augment/augment-icon-font.woff"',verticalAlign:"top",margin:"0 1ch 0 0"};r.get(this._bottomBoxLogoDecorationType).push({renderOptions:{light:{after:C},dark:{after:C}},range:A}),this.addKeybindingDecor(p,r,n),r.get(this._bottomTextDecorationType).push({range:A,renderOptions:{after:{margin:"0 0 0 1ch",contentText:u,padding:"0.2em 1ch 0.15em 0",borderRadius:"0 0.3em 0.3em 0"}}})}_addPreviewBox(r,n,i,s){let o=s===1;if(i.changeType==="insertion"&&!o||i.changeType==="deletion"&&o)return;let a=i.previewBoxRange(n.document);a.stop-a.start<=1?r.get(this._activeChangeDecoration1Line.get(s))?.push(yg(a.start)):r.get(this._activeChangeDecorationTop.get(s))?.push(yg(a.start));for(let l=a.start+1;l<a.stop-1;l++)r.get(this._activeChangeDecorationMiddle.get(s))?.push(yg(l));a.stop-a.start>1&&r.get(this._activeChangeDecorationBottom.get(s))?.push(yg(a.stop-1))}};function Wyt(e,t,r){let n=t.result.existingCode,i=t.result.suggestedCode,s=[];for(let o of t.result.diffSpans){let a=n.slice(o.original.start,o.original.stop),l=i.slice(o.updated.start,o.updated.stop),c=Ya.determineChangeType(a,l),u=r?o.original:o.updated,f=t.result.charStart+u.start,p=t.result.charStart+u.stop;c===(r?"insertion":"deletion")&&e.positionAt(f).character===0&&l.endsWith(`
`)&&(f=t.result.charStart+u.start-1),s.push([c,new Ve.Range(e.positionAt(f),e.positionAt(p))])}return s}var QQ=V(require("vscode"));var MQ=class{constructor(t,r,n){this._suggestionManager=t;this._configListener=r;this._nextEditSessionEventReporter=n}provideCodeActions(t,r,n,i){if(!this._configListener.config.enableDebugFeatures)return;let s=new Nn(r.start.line,r.end.line),o=this._suggestionManager.getActiveSuggestions().find(c=>c.changeType!=="noop"&&c.previewCursorRange(t).intersects(s));if(!o)return;let a=o.result.changeDescription||"Augment: Accept suggestion",l=new QQ.CodeAction(a,QQ.CodeActionKind.QuickFix);return l.command={command:gf.commandID,title:a,arguments:[o]},this._nextEditSessionEventReporter.reportEventFromSuggestion(o,"code-action-shown","code-action"),[l]}resolveCodeAction(t,r){return t}};var Zn=V(require("vscode"));var uwe=V(require("os"));var u$t=j("markdown-html-utils");function awe(){return ea("1.92.0")}function Gyt(e){return e.replace(/\$\(([\w-]+)\)/gi,"&dollar;($1)")}function UC(e){return Gyt(DQ(e))}var $_=class e{_spaces;_tabs;constructor({spaces:t,tabs:r}){this._spaces=t,this._tabs=r}static computeCommonLeadingWhitespace(t){if(t.length===0)return new e({spaces:0,tabs:0});let n=t.filter(o=>o.trim().length>0).map(o=>{let a=o.match(/^([ \t]*)/);return a?a[1]:""}),i=n.map(o=>o.length-o.replace(/ /g,"").length),s=n.map(o=>o.length-o.replace(/\t/g,"").length);return new e({spaces:i.reduce((o,a)=>Math.min(o,a),i[0]),tabs:s.reduce((o,a)=>Math.min(o,a),s[0])})}trimLeadingIncremental(t){let r=this._spaces,n=this._tabs,i=0;for(;i<t.length&&(r>0||n>0);){let s=t[i++];if(s===" "&&r>0)r--;else if(s==="	"&&n>0)n--;else return}return{trimmed:t.slice(i),remaining:new e({spaces:r,tabs:n})}}trimLeadingFull(t,r){let n=this.trimLeadingIncremental(t);return n?!n.remaining.isEmpty()&&t.length>0?(r?.debug("Untrimmed whitespace"),t):n.trimmed:(r?.debug(`No common leading whitespace for line: ${t}`),t)}isEmpty(){return this._spaces===0&&this._tabs===0}total(){return this._spaces+this._tabs}};function dwe(e,t,r,n,i,s,o){let a=Yyt(e.makeOneLineDiffSpans()),l=a.filter(Q=>Q.type==="updated").length-a.filter(Q=>Q.type==="original").length,c=(e.lineRange.stop+2+l).toString().length+1,u;if(s){let Q=t?.split(`
`)??[],W=r?.split(`
`)??[],Z=[...Q,...a.map($=>$.spans.map(ee=>ee.text).join("")),...W];u=$_.computeCommonLeadingWhitespace(Z),t=Q.map($=>u.trimLeadingFull($,o)).join(`
`),r=W.map($=>u.trimLeadingFull($,o)).join(`
`)}else u=$_.computeCommonLeadingWhitespace([]);let f=n,{rendered:p,longestLineLength:g}=zyt(a,f,i,e.result.truncationChar,u,o);t&&(t=ac(t,g)),r&&(r=ac(r,g));let A=OC(e.lineRange.start,c),y=t?`<span style="color:${i.lineNumberColor};">${A}${A}<span class="codicon codicon-blank"></span> ${UC(cwe(Y_(t),g+1))}</span>
`:"",C=OC(e.lineRange.stop+1,c),v=OC(e.lineRange.stop+1+l,c),b="",w="";uwe.default.platform()==="win32"&&(b="<strong>",w="</strong>");let B="background-color:var(--vscode-editor-background);"+($yt()?"border-radius:5px;":""),F=r?`
<span style="color:${i.lineNumberColor};">${C}${v}<span class="codicon codicon-blank"></span> ${UC(cwe(Y_(r),g+1))}</span>`:"";return{result:`
${b}<pre><span style="${B}">${y}${p}${F}</span></pre>${w}
`,longestLineLength:g+c}}function $yt(){return awe()&&!ea("1.97.0")}function Yyt(e){let t=[],r=[];if(e.length===0)return[];let n={type:"noop",spans:[],originalLineNumber:-1,updatedLineNumber:-1},i={type:"noop",spans:[],originalLineNumber:-1,updatedLineNumber:-1},s=()=>{n.spans.some(a=>a.text.length>0)&&t.push(n)},o=()=>{i.spans.some(a=>a.text.length>0)&&r.push(i)};for(let a of e)(a.original.text!==""||!a.updated.isWholeLine)&&(n.spans.push({type:a.type,text:a.original.text,charRange:a.original.charRange}),n.originalLineNumber=a.original.line,a.type!=="noop"?n.type="original":n.updatedLineNumber=a.updated.line),(a.updated.text!==""||!a.original.isWholeLine)&&(i.spans.push({type:a.type,text:a.updated.text,charRange:a.updated.charRange}),i.updatedLineNumber=a.updated.line,a.type!=="noop"?i.type="updated":(i.originalLineNumber=a.original.line,i.type!=="noop"?n.type="original":n.type!=="noop"&&(i.type="updated"))),a.original.text.endsWith(`
`)&&(s(),n={type:"noop",spans:[],originalLineNumber:-1,updatedLineNumber:-1}),a.updated.text.endsWith(`
`)&&(o(),i={type:"noop",spans:[],originalLineNumber:-1,updatedLineNumber:-1});return s(),o(),Kyt(t,r)}function Kyt(e,t){let r=[],n=0,i=0,s=0;for(;i<e.length||s<t.length;){if(n++>1e4)throw new Error("infinite loop in groupLines");for(;i<e.length&&e[i].type!=="noop";)r.push(e[i]),i++;for(;s<t.length&&t[s].type!=="noop";)r.push(t[s]),s++;for(;i<e.length&&s<t.length&&e[i].type==="noop"&&t[s].type==="noop";)r.push(e[i]),i++,s++}return r}function zyt(e,t,r,n,i,s){if(e.length===0)return{rendered:"",longestLineLength:0};let{linePadAmounts:o,longestLineLength:a}=Jyt(e,t,i),c=(e.map(f=>f.updatedLineNumber).concat(e.map(f=>f.originalLineNumber)).reduce((f,p)=>Math.max(f,p),0)+2).toString().length+1,u=[];for(let f=0;f<e.length;f++){let p=e[f],g,A;p.type==="noop"?(g=p.spans.map(b=>b.text).join(""),g=i.trimLeadingFull(g),A="#00000000"):p.type==="original"?(g=lwe(p.spans,!0,r,i,s),A=r.originalLineColor):(g=lwe(p.spans,!1,r,i,s),A=r.updatedLineColor),g=Y_(g);let y=(p.type!=="updated"?p.originalLineNumber+1:"").toString(),C=(p.type!=="original"?p.updatedLineNumber+1:"").toString(),v=p.type==="noop"?'<span class="codicon codicon-blank"></span>':p.type==="original"?'<span class="codicon codicon-diff-remove"></span>':'<span class="codicon codicon-diff-insert"></span>';u.push(`<span style="color:${r.lineNumberColor};background-color:${A};">${OC(y,c)}${OC(C,c)}</span><span style="background-color:${A};">${v} </span>${g}<span style="background-color:${A};">${" ".repeat(o[f])}</span>`)}return n!==void 0&&u.push(`<span style="color:${r.lineNumberColor};">${OC(" ",2*c+1)}...(MORE CHANGES)...</span>`),{rendered:u.join(`
`),longestLineLength:a}}function Jyt(e,t,r){let n=e.map(s=>Y_(s.spans.map(o=>o.text).join(""))),i=Math.max(t,n.map(s=>s.length).reduce((s,o)=>Math.max(s,o),0)-r.total());return{linePadAmounts:n.map(s=>i-Math.max(0,s.length-r.total())+1),longestLineLength:i}}function lwe(e,t,r,n,i){let s=[];if(e.length===0||e.every(o=>o.text===""))return"";for(let o of e){let a;o.type==="noop"?t?a=`background-color:${r.originalLineColor};`:a=`background-color:${r.updatedLineColor};`:t?a=`background-color:${r.originalTextColor};`:a=`background-color:${r.updatedTextColor};`;let l=o.text,c=n.trimLeadingIncremental(o.text);c?(l=c.trimmed,n=c.remaining):i?.debug(`No common leading whitespace for span: ${o.text}`);let u=UC(l),f=u.endsWith(`
`);u=Y_(u),s.push(`<span style="${a}">${u}</span>${f?`
`:""}`)}return n.isEmpty()||i?.debug("Untrimmed whitespace"),s.join("")}function OC(e,t){let r=e.toString();return t-Tl(r)>=0?" ".repeat(t-r.length)+r:r}function cwe(e,t){let r=e.toString();return t-Tl(r)>=0?r+" ".repeat(t-r.length):r}function Y_(e){return e.endsWith(`
`)?e.slice(0,-1):e}var hwe=V(require("vscode"));function M8(e,t,r,n,i){let s="$(augment-icon-simple)&#x2009;&#x1D5D;",o=t.length>0?fwe(t[0]):"";for(let c=1;c<t.length;c++){let u=t[c].noLeftMargin?"&nbsp;&nbsp;":"&nbsp;&nbsp;&nbsp;&nbsp;";o+=`${u}${fwe(t[c])}`}let a=r?`<br/>${r}`:"",l=new hwe.MarkdownString(`${s}&nbsp;&nbsp;&nbsp;&nbsp;${o}<br/>${e}${a}`);return l.isTrusted=!0,l.supportHtml=!0,l.supportThemeIcons=!0,l}function fwe(e){return`<a href="${e.href}" title="${e.tooltip}">${e.text}${e.keybindingIcons?`&nbsp;${e.keybindingIcons}`:""}</a>`}var jyt=38,NQ=class e extends X{constructor(r,n,i,s,o,a,l,c,u){super();this._keybindingWatcher=r;this._nextEditSessionEventReporter=n;this._suggestionManager=i;this._state=s;this._configListener=o;this._hasCompletionShowing=a;this._showKeybindingsOnButtons=l;this._keybindingStatus=c;this._nextEditConfigManager=u;this.addDisposable(Zn.window.onDidChangeTextEditorVisibleRanges(f=>{this._handleVisibleRangesChanged(f)})),this._register(void 0),this.addDisposable(Zn.window.onDidChangeActiveTextEditor(f=>this._register(f))),this.addDisposable(this._suggestionManager.onSuggestionsChanged(f=>{this._register(Zn.window.activeTextEditor)})),this.addDisposable(new Zn.Disposable(()=>{this._provider?.dispose(),this._provider=void 0}))}_logger=j("BackgroundNextEditsHoverProvider");static inlineDiffColors={originalLineColor:"var(--vscode-diffEditor-removedLineBackground)",originalTextColor:"#FF000066",updatedLineColor:"var(--vscode-diffEditor-insertedLineBackground)",updatedTextColor:"#9CCC2C66",lineNumberColor:"var(--vscode-editorGhostText-foreground)"};_provider;_waitingToShowHover=!1;get _showDiffInDifflessHover(){return this._nextEditConfigManager.config.showDiffInHover}_handleVisibleRangesChanged(r){let n=r.textEditor.document,i=this._state.value.suggestion;i&&(this._state.value instanceof Ir||this._state.value instanceof Vt||this._state.value instanceof Sr)&&i.qualifiedPathName.equals(n.uri)&&r.visibleRanges.some(s=>s.contains(Ms(i.highlightRange)))&&this.showHover()}_register(r){this._waitingToShowHover||(this._provider?.dispose(),this._provider=void 0,r&&(this._provider=Zn.languages.registerHoverProvider({pattern:r.document.uri.fsPath},this)))}provideHover(r,n,i){if(this._hoverDisabled())return;let s,o;try{if(r.uri.scheme==="output"||this._hasCompletionShowing())return;this._waitingToShowHover=!1,o=this._suggestionManager.getActiveSuggestions().filter(c=>c.state==="fresh"&&c.changeType!=="noop"&&c.qualifiedPathName.equals(r.uri)).find(c=>this.hoverContactCondition(c,n,r));let l=this._provideDifflessHover(r,n,o);return l&&this._nextEditSessionEventReporter.reportEventFromSuggestion(o,"hover-shown","unknown"),l&&new Zn.Hover(l)}catch(a){return a instanceof Error&&(this._logger.error(`Error in hover provider: ${a.message}, requestId: ${s}`),a.stack&&this._logger.error(a.stack),this._nextEditSessionEventReporter.reportEventFromSuggestion(o,"error-hover-error","unknown")),new Zn.Hover(`Error rendering hover. requestId: ${s}`)}}_keybindingWillWork(r,n){return r===ju?this._nextEditConfigManager.config.enablePanel:n&&!n.equals(this._state.value.suggestion)?!1:this._keybindingStatus.get(r)}_provideDifflessHover(r,n,i){let s,o=[];i=this._state.value instanceof jn||this._state.value instanceof gs?i:void 0;let a=["hover-click",i?.result.suggestionId??void 0],l=(y,C)=>{if(this._keybindingWillWork(y,i)){let v=this.getPrettyKeybinding(y.commandID);return`${C}${v?"&nbsp;"+v:""}`}return C},c=(y,C,v)=>{let b=y.commandID;return{href:y.generateHref(...a),text:C,tooltip:l(y,v),keybindingIcons:this._showKeybindingsOnButtons()&&this._keybindingWillWork(y,i)?this.getPrettyKeybindingIcons(b):null}},u=c(Nc,"Reject","Reject Suggestion"),f=c(ju,"$(layout-panel)","Open Suggestions Panel");f.keybindingIcons=null;let p=c(bC,"$(diff-single)",this._showDiffInDifflessHover?"Hide Diff":"Show Diff");p.noLeftMargin=!0;let g={href:`command:workbench.action.openSettings?${encodeURIComponent(JSON.stringify(["@ext:augment.vscode-augment augment.nextEdit"]))}`,text:"$(gear)",tooltip:"Open Settings",noLeftMargin:!0},A=c(cg,"Learn More","Learn More");if(((this._state.value instanceof Ir||this._state.value instanceof Vt)&&this._state.value.suggestion?.previewCursorRange(r).contains(n.line)||i)&&(s=i||this._state.value.suggestion,o=[c(Qc,"Apply","Apply Suggestion"),u,...this._showKeybindingsOnButtons()?[A]:[],...this._nextEditConfigManager.config.enablePanel?[f]:[],p,g]),this._state.value instanceof Vt){let y=this._state.value.suggestion.previewCursorRange(r);(y.contains(n.line)||this._state.value.suggestion?.changeType==="deletion"&&y?.touches(n.line))&&(s=this._state.value.suggestion,o=[c(Io,"Undo","Undo Suggestion"),u,...this._showKeybindingsOnButtons()?[A]:[],...this._nextEditConfigManager.config.enablePanel?[f]:[],p,g])}if(s){let y=UC(s.result.changeDescription);if(this._showDiffInDifflessHover){let{result:C,longestLineLength:v}=this.getHoverDiff(r,s,jyt);return M8(y,o,C,[],v)}else return M8(y,o)}}hoverContactCondition(r,n,i){return r.previewCursorRange(i).contains(n.line)}getPrettyKeybinding(...r){return this.getKeybindingsForCommands(r,!0)}getPrettyKeybindingIcons(...r){let n=Lc.getStructuredKeybinding(this.getKeybindingsForCommands(r));return rwe(n,this._keybindingWatcher.getSimplifiedPlatform())}getKeybindingsForCommands(r,n=!1){let i=r.map(s=>Zu(this._keybindingWatcher,s,n));return i.includes(null)?"":i.join(" ")}getHoverDiff(r,n,i){let s=n.state==="accepted"?n.afterLineRange(r):n.lineRange,o=s.start>0?new Zn.Range(s.start-1,0,s.start,0):void 0,a=s.stop<r.lineCount-1?new Zn.Range(s.stop,0,s.stop+1,0):void 0,l=dwe(n,o&&r.getText(o),a&&r.getText(a),i,e.inlineDiffColors,!0,this._logger);return n.result.truncationChar!==void 0&&this._nextEditSessionEventReporter.reportEventFromSuggestion(n,"suggestion-truncated-in-hover","unknown"),l}_hoverDisabled(){return this._configListener.config.nextEdit.noDiffModeUseCodeLens}showHover(){this._hoverDisabled()||(this._register(Zn.window.activeTextEditor),this._waitingToShowHover=!0,Zn.commands.executeCommand("editor.action.showHover",{focus:"noAutoFocus"}))}hideHover(r="unknown"){this._hoverDisabled()||r==="keybinding"||(ea("1.97.0-insider")||ea("1.97.0")?Zn.commands.executeCommand("editor.action.hideHover"):(Zn.commands.executeCommand("editorScroll",{to:"down",by:"line",value:0}),Zn.commands.executeCommand("editorScroll",{to:"up",by:"line",value:0})))}async hideHoverAsync(r="unknown"){this._hoverDisabled()||r==="keybinding"||(ea("1.97.0-insider")||ea("1.97.0")?await Zn.commands.executeCommand("editor.action.hideHover"):(await Zn.commands.executeCommand("editorScroll",{to:"down",by:"line",value:0}),await Zn.commands.executeCommand("editorScroll",{to:"up",by:"line",value:0})))}};var gwe=V(require("vscode"));var Zyt=new Map([[Ga,"vscode-augment.nextEdit.canGotoHinting"],[oa,"vscode-augment.nextEdit.canNext"],[Ju,"vscode-augment.nextEdit.canPrevious"],[Qc,"vscode-augment.nextEdit.canAccept"],[Nc,"vscode-augment.nextEdit.canReject"],[zu,"vscode-augment.nextEdit.canDismiss"],[gf,"vscode-augment.nextEdit.canAcceptCodeAction"],[xA,"vscode-augment.nextEdit.canAcceptAll"],[_A,"vscode-augment.nextEdit.canRejectAll"],[Io,"vscode-augment.nextEdit.canUndoAcceptSuggestion"]]),PQ=class extends X{constructor(r){super();this._state=r;this.addDisposable(new gwe.Disposable(this._state.listen(n=>{let i=!(n instanceof jn);this._set(Ga,i),this._set(oa,i),this._set(Ju,i),this._set(Qc,n instanceof Ir||n instanceof Sr||n instanceof Vt),this._set(Nc,n instanceof Ir||n instanceof Sr||n instanceof Vt),this._set(Io,n instanceof Vt),this._set(zu,i),this._set(gf,n instanceof Vt),this._set(xA,i),this._set(_A,i)},!0)))}_status=new Map;get(r){return this._status.get(r)??!1}_set(r,n){this._status.set(r,n);let i=Zyt.get(r);i&&Rc(i,n)}};var LQ=class e extends X{constructor(r,n,i,s,o,a,l,c,u,f,p=g=>{}){super();this.workspaceManager=n;this._nextEditSessionEventReporter=i;this._configListener=o;this._suggestionManager=a;this._requestManager=l;this._globalState=c;this._nextEditConfigManager=u;this._completionVisibilityWatcher=f;this._onCursorWithinSuggestion=p;this._state=new la(new jn,z_e),this._decorationManager=new FQ(r,n,s,o,i,this.isInlineCompletionVisible,this.isShowAllHighlightsEnabled),this.addDisposable(this._decorationManager),this._codeActionProvider=new MQ(this._suggestionManager,this._configListener,i),this._keybindingStatus=this.addDisposable(new PQ(this._state)),this._hoverProvider=new NQ(s,i,this._suggestionManager,this._state,this._configListener,this.isInlineCompletionVisible,()=>(this._globalState.get("nextEditKeybindingUsageCount")??0)<e.maxKeybindingUsageCount,this._keybindingStatus,this._nextEditConfigManager),this.addDisposable(this._hoverProvider),this._codeLensProvider=new xQ(this._state,s),this.addDisposable(new Ie.Disposable(()=>{this._state.value=new jn,this._state.dispose(),this._decorationManager.decorate([],{}),this._hoverProvider.hideHover("command")})),this.addDisposable(Ie.languages.registerCodeActionsProvider("*",this._codeActionProvider)),this.addDisposable(Ie.workspace.onDidChangeTextDocument(this._handleTextDocumentChanged)),this.addDisposable(Ie.window.onDidChangeActiveTextEditor(this._handleEditorChange)),this.addDisposable(Ie.window.onDidChangeTextEditorSelection(this._handleTextEditorSelectionChanged)),this.addDisposable(new Ie.Disposable(this._requestManager.lastResponse.listen(g=>{g&&this._suggestionManager.add([Ya.from(g)],g.mode==="FORCED")}))),this.addDisposable(this._suggestionManager.onSuggestionsChanged(g=>{this._handleSuggestionsChanged(g)})),this.addDisposable(Ie.window.onDidChangeTextEditorVisibleRanges(g=>{this.workspaceManager.safeResolvePathName(g.textEditor.document.uri)&&g.textEditor===Ie.window.activeTextEditor&&!_C()&&(!this._lastVisibleRanges||this._lastVisibleRanges.uri.fsPath!==g.textEditor.document.uri.fsPath||this._lastVisibleRanges.visibleRanges.length!==g.visibleRanges.length||this._lastVisibleRanges.visibleRanges.some((A,y)=>!A.equals(td(g.visibleRanges[y]))))&&(this._drawDecorations(),this._configListener.config.nextEdit.useCursorDecorations||(this._decorationManager.shouldDrawBottomDecorations.value=!1,this._debouncedSetBottomDecorations()),this._lastVisibleRanges={uri:g.textEditor.document.uri,visibleRanges:g.visibleRanges.map(A=>td(A))})})),this.addDisposable(new Ie.Disposable(this._suggestionManager.suggestionWasJustAccepted.listen(g=>{g&&(this._debouncedSetBottomDecorations.flush(),this._drawDecorations())}))),this._configListener.addDisposable(this._configListener.onDidChange(g=>{!!g.newConfig.nextEdit.highlightSuggestionsInTheEditor!=!!g.previousConfig.nextEdit.highlightSuggestionsInTheEditor&&this._drawDecorations()})),this.addDisposable(this.workspaceManager.onDidChangeSourceFolderContents(g=>{let A=new Map,y=this._suggestionManager.getAllSuggestions().filter(C=>{if(C.qualifiedPathName.rootPath!==g)return!1;let v=C.qualifiedPathName.relPath;return A.get(v)||A.set(v,this.workspaceManager.hasFile(C.qualifiedPathName)),!A.get(v)});this._suggestionManager.remove(y)})),this.addDisposable(new Ie.Disposable(this._completionVisibilityWatcher.listen(()=>{this._drawDecorations()}))),this._configListener.config.nextEdit.noDiffModeUseCodeLens&&(this.addDisposable(Ie.languages.registerCodeLensProvider("*",this._codeLensProvider)),this.addDisposable(new Ie.Disposable(this._state.listen(()=>{this._codeLensProvider.refresh()})))),this.addDisposable(new Ie.Disposable(this._state.listen(()=>{this._drawDecorations()}))),this.addDisposable(new Ie.Disposable(this._state.listen(g=>{let A;g instanceof jn?A="state-transitioned-to-no-suggestions":g instanceof gs?A="state-transitioned-to-hinting":g instanceof Ir?A="state-transitioned-to-before-preview":g instanceof Vt?A="state-transitioned-to-after-preview":g instanceof Sr&&(A="state-transitioned-to-animating"),A!==void 0&&this._nextEditSessionEventReporter.reportEventFromSuggestion(g.suggestion,A,"unknown")}))),this.addDisposable(Ie.debug.onDidStartDebugSession(()=>{this._suggestionManager.clear(!1),this._decorationManager.decorate([],{})})),this.addDisposable(Ie.debug.onDidTerminateDebugSession(()=>{this._handleEditorChange(Ie.window.activeTextEditor)})),this.addDisposable(FA(()=>{this._suggestionManager.clear(!1),this._decorationManager.decorate([],{})})),this.addDisposable(IQ(()=>{this._suggestionManager.clear(!1),this._decorationManager.decorate([],{})}))}static _waitForAcceptTimeoutMs=1e3;static _applySuggestionDelayMs={fromHover:50,atCursor:250,onScreen:500,offScreen:750,largeBonus:250};static _largeChangeLineCountThreshold=3;static _postScrollRenderDelayMs=250;static maxKeybindingUsageCount=30;_logger=j("EditorNextEdits");_decorationManager;_codeActionProvider;_keybindingStatus;_hoverProvider;_codeLensProvider;_state;_lastVisibleRanges;_ignoreSelectionChangeEvents=!1;_debouncedSetBottomDecorations=(0,mwe.debounce)(()=>{this._decorationManager.shouldDrawBottomDecorations.value=!0,this._drawDecorations()},e._postScrollRenderDelayMs);static get _smoothScrollDelayMs(){return Ie.workspace.getConfiguration("editor").smoothScrolling??!1?150:0}dismiss(r,n=!1,i=!0){this._state.value instanceof Ir||this._state.value instanceof Sr?(this._state.value=new gs(this._state.value.suggestion,!0),i&&this._suggestionManager.clearJustAcceptedSuggestions(),this._nextEditSessionEventReporter.reportEventWithoutIds("preview-decoration-dismissed",r??"command")):this._state.value instanceof Vt&&(this._state.value=this._getHintedState(),i&&this._suggestionManager.clearJustAcceptedSuggestions(),this._nextEditSessionEventReporter.reportEventWithoutIds("reverse-decoration-dismissed",r??"command")),n&&this._hoverProvider.hideHover()}async dismissOrReject(r){let n=Ie.window.activeTextEditor;this._state.value instanceof Vt?(await this._undoSuggestions(this._state.value.suggestion),this.dismiss(r,!0)):this._state.value instanceof Ir||this._state.value instanceof Sr?this.dismiss(r):n&&this._state.value instanceof gs&&this._hoverProvider.hoverContactCondition(this._state.value.suggestion,n.selection.active,n.document)?this.reject(r,this._state.value.suggestion.result.suggestionId):this.reject(r)}isInlineCompletionVisible=()=>this._completionVisibilityWatcher.maybeInlineCompletionVisible;isShowAllHighlightsEnabled=()=>this._configListener.config.nextEdit.highlightSuggestionsInTheEditor;nextAvailableSuggestion=(r=!0,n=!1)=>Awe(this._suggestionManager.getActiveSuggestions().filter(gi),this._state.value instanceof Ir||this._state.value instanceof Vt||this._state.value instanceof Sr?this._state.value.suggestion:void 0,!r,n,this._configListener.config.nextEdit.enableGlobalBackgroundSuggestions);_handleSuggestionsChanged=async r=>{this._updateSuggestions(r.newSuggestions,!0);let n=Ie.window.activeTextEditor,i=n&&r.undone.find(s=>s.lineRange.contains(n.selection.active.line)||s.lineRange.touches(n.selection.active.line));if(i&&this._state.value instanceof Vt){await this._suggestionManager.suggestionWasJustUndone.waitUntil(o=>o===!0,e._waitForAcceptTimeoutMs);let s=this._getSuggestionSelection(i);s.isEqual(n.selection)||(this._ignoreSelectionChangeEvents=!0,n.selection=s),this._state.value=new Ir(i),this._nextEditSessionEventReporter.reportEventFromSuggestion(this._state.value.suggestion,"undid-accepted-suggestion","document-changed"),this._hoverProvider.showHover()}if(n&&r.accepted.length>0&&(this._state.value instanceof Ir||this._state.value instanceof Sr)){await this._suggestionManager.suggestionWasJustAccepted.waitUntil(a=>a===!0,e._waitForAcceptTimeoutMs);let s=r.accepted[r.accepted.length-1],o=this._getSuggestionSelection(s);o.isEqual(n.selection)||(this._ignoreSelectionChangeEvents=!0,n.selection=o),this._state.value=new Vt(s),this._hoverProvider.showHover()}else r.accepted.length>0&&(this._ignoreSelectionChangeEvents=!0)};_updateSuggestions(r,n){if(_C())return;let i=r.filter(gi);if((this._configListener.config.nextEdit.enableGlobalBackgroundSuggestions?i:i.filter(o=>o.qualifiedPathName.equals(Ie.window.activeTextEditor?.document.uri))).length===0&&this._state.value instanceof gs){this._state.value=new jn,this._onCursorWithinSuggestion(void 0);return}n&&(this._state.value instanceof jn||this._state.value instanceof gs)&&(this._state.value=this._getHintedState()),this._drawDecorations()}get _isDebugging(){return Ie.debug.activeDebugSession!==void 0&&!this._configListener.config.nextEdit.allowDuringDebugging}_drawDecorations(){if(this._isDebugging){this._decorationManager.decorate([],{});return}let r=this._suggestionManager.getActiveSuggestions().filter(gi),n=this._suggestionManager.getJustAcceptedSuggestions(),i=this._state.value instanceof gs?this._state.value:this._getHintedState();this._decorationManager.decorate(r.concat(n),{hintSuggestion:i instanceof gs?i.hintedSuggestion:void 0,activeSuggestion:this._state.value instanceof Ir||this._state.value instanceof Vt||this._state.value instanceof Sr?this._state.value.suggestion:void 0,isAnimating:this._state.value instanceof Sr})}_handleTextDocumentChanged=r=>{if(r.contentChanges.length===0)return;let n=this.workspaceManager.safeResolvePathName(r.document.uri);if(this._isDebugging||xo(r.document.uri)||!n)return;let i=Ie.window.activeTextEditor;!i||r.document!==i.document||(this._clearAnimatedApply(),(this._state.value instanceof Vt||this._state.value instanceof Sr)&&(this._state.value=new jn,this._nextEditSessionEventReporter.reportEventWithoutIds("reverse-decoration-dismissed","document-changed")))};_handleTextEditorSelectionChanged=r=>{let n=Ie.window.activeTextEditor;if(!n||r.textEditor.document!==n.document||_C()||this._isDebugging||xo(n.document.uri)||!this.workspaceManager.safeResolvePathName(r.textEditor.document.uri))return;this._clearAnimatedApply(n.selection);let s=!(r.kind===Ie.TextEditorSelectionChangeKind.Keyboard||r.kind===Ie.TextEditorSelectionChangeKind.Mouse)&&this._ignoreSelectionChangeEvents;this._ignoreSelectionChangeEvents=!1,(this._state.value instanceof Ir||this._state.value instanceof Sr||this._state.value instanceof Vt)&&!s?this.dismiss("editor-selection-changed"):s||this._suggestionManager.clearJustAcceptedSuggestions(),(this._state.value instanceof jn||this._state.value instanceof gs||this._state.value instanceof Sr&&!this._getSuggestionSelection(this._state.value.suggestion).isEqual(n.selection))&&(this._state.value=this._getHintedState()),this._drawDecorations();let o=this._state.value.suggestion;if(o&&n.selection.isEmpty&&this._hoverProvider.hoverContactCondition(o,n.selection.active,n.document)){let l="unknown";r.kind===Ie.TextEditorSelectionChangeKind.Keyboard?l="keyboard":r.kind===Ie.TextEditorSelectionChangeKind.Mouse?l="click":r.kind===Ie.TextEditorSelectionChangeKind.Command&&(l="command"),this._nextEditSessionEventReporter.reportEventFromSuggestion(o,"cursor-inside-suggestion",l),this._onCursorWithinSuggestion(o)}else this._onCursorWithinSuggestion(void 0)};_handleEditorChange=r=>{this.dismiss("active-editor-changed"),r&&this._updateSuggestions(this._suggestionManager.getActiveSuggestions(),!1)};async accept(r,n=!0,i,s){let o;if(i){if(o=this._suggestionManager.findSuggestionById(i),o)return this._hoverProvider.hideHover(),await this.open(o,{shouldAutoApply:!0,animationDelayMs:e._applySuggestionDelayMs.fromHover,preserveFocus:s,eventSource:r}),!0}else(this._state.value instanceof Ir||this._state.value instanceof Sr||this._state.value instanceof Vt)&&(o=this._state.value.suggestion);return this.acceptSuggestion(o,r,n,s)}async acceptSuggestion(r,n,i=!0,s=!1){if(!r)return Ie.window.showInformationMessage("No Next Edit to accept."),this._nextEditSessionEventReporter.reportEventWithoutIds("error-no-suggestion-to-accept",n??"command"),!1;if(this._state.value instanceof Vt&&this._state.value.suggestion?.equals(r))return this.dismiss(n),!1;if(i&&this._hoverProvider.hideHover(n??"command"),await this.gotoSuggestion(r,void 0,s),Ie.window.activeTextEditor&&!r.qualifiedPathName.equals(Ie.window.activeTextEditor.document.uri))return this._logger.debug(`Current suggestion ${r.qualifiedPathName.relPath} does not match active document ${Ie.window.activeTextEditor?.document.uri.toString()}`),this._nextEditSessionEventReporter.reportEventFromSuggestion(r,"error-accept-suggestion-wrong-document",n??"command"),!1;this._nextEditSessionEventReporter.reportEventFromSuggestion(r,"accept",n??"command"),this._state.value instanceof Ir||(this._state.value=new Ir(r)),pwe(),this._suggestionManager.accept([r]);try{await this._suggestionManager.suggestionWasJustAccepted.waitUntil(o=>o===!0,e._waitForAcceptTimeoutMs)}catch{return this._logger.debug("Error waiting for suggestion to be accepted."),!1}return this.incrementKeybindingUsageCount(n),!0}_acceptSuggestions(r,n){if(r.length===0){Ie.window.showInformationMessage("No Next Edits to accept.");return}this._state.value=new jn,pwe(),this._hoverProvider.hideHover("command");for(let i of r)this._nextEditSessionEventReporter.reportEventFromSuggestion(i,"accept",n??"command");this._suggestionManager.accept(r)}acceptAllSuggestionsInFile(r,n){let i=Fs(r),s=this._suggestionManager.getActiveSuggestions().filter(gi).filter(o=>i===o.qualifiedPathName.absPath);this._acceptSuggestions(s,n),this._nextEditSessionEventReporter.reportEventWithoutIds("accept-all-in-file",n??"command")}acceptAllSuggestions(r){let n=this._suggestionManager.getActiveSuggestions().filter(gi);this._acceptSuggestions(n,r),this._nextEditSessionEventReporter.reportEventWithoutIds("accept-all",r??"command")}reject(r,n){let i;return n?i=this._suggestionManager.findSuggestionById(n):(this._state.value instanceof Ir||this._state.value instanceof Vt||this._state.value instanceof Sr)&&(i=this._state.value.suggestion),this.rejectSuggestion(i,r)}rejectSuggestion(r,n){this._hoverProvider.hideHover(n??"command"),r&&Ie.window.activeTextEditor&&!r.qualifiedPathName.equals(Ie.window.activeTextEditor.document.uri)&&this._logger.debug(`Current suggestion ${r.qualifiedPathName.relPath} does not match active document ${Ie.window.activeTextEditor?.document.uri.toString()}`);let i=this._state.value;this._state.value instanceof Sr?(this._clearAnimatedApply(),this._state.value=new jn):this._state.value=new jn;let s,o,a=!1;r?(s=[r],this._suggestionManager.reject(s),o="reject",a=r.state==="accepted"):(s=this._suggestionManager.getActiveSuggestions().filter(gi),this._suggestionManager.reject(s),o="reject-all"),this._drawDecorations(),this._requestManager?.clearCompletedRequests("FORCED");for(let l of s)this._nextEditSessionEventReporter.reportEventFromSuggestion(l,o,n??"command");i instanceof Vt?this._undoSuggestions(i.suggestion):r&&a&&this._undoSuggestions(r)}_rejectSuggestions(r,n){if(this._nextEditSessionEventReporter.reportEventWithoutIds("reject-all",n??"command"),this._suggestionManager.reject(r),r.length===0){Ie.window.showInformationMessage("No Next Edits to reject.");return}this._state.value=new jn,this._hoverProvider.hideHover("command"),this._suggestionManager.reject(r),this._requestManager?.clearCompletedRequests("FORCED");for(let i of r)this._nextEditSessionEventReporter.reportEventFromSuggestion(i,"reject",n??"command")}rejectAllSuggestionsInFile(r,n){let i=Fs(r),s=this._suggestionManager.getJustAcceptedSuggestions().filter(a=>i===a.qualifiedPathName.absPath),o=this._suggestionManager.getActiveSuggestions().filter(gi).filter(a=>i===a.qualifiedPathName.absPath).concat(s);this._rejectSuggestions(o,n),this._undoSuggestions(s),this._nextEditSessionEventReporter.reportEventWithoutIds("reject-all-in-file",n??"command")}rejectAllSuggestions(r){let n=this._suggestionManager.getJustAcceptedSuggestions(),i=this._suggestionManager.getActiveSuggestions().filter(gi).concat(n);this._rejectSuggestions(i,r),this._undoSuggestions(n),this._nextEditSessionEventReporter.reportEventWithoutIds("reject-all",r??"command")}_undoSuggestions(r){Array.isArray(r)||(r=[r]);let n=new Ie.WorkspaceEdit;for(let i of r)n.replace(Ie.Uri.from({scheme:i.uriScheme,path:i.qualifiedPathName.absPath}),new Ie.Range(new Ie.Position(i.afterLineRange().start,0),new Ie.Position(i.afterLineRange().stop,0)),i.result.existingCode);return Ie.workspace.applyEdit(n)}gotoHinting(r){this.incrementKeybindingUsageCount(r);let n=this._getHintedState().suggestion;if(this._state.value instanceof jn){Ie.window.showInformationMessage("No more suggestions right now."),this._hoverProvider.hideHover(r??"command");return}else{if(this._state.value instanceof Vt&&!n)return this.dismiss(r);if(this._state.value instanceof Sr)return this._clearAnimatedApply(),this.accept();if(n)return this._nextEditSessionEventReporter.reportEventFromSuggestion(this._state.value instanceof Ir||this._state.value instanceof Vt?this._state.value.suggestion:void 0,"goto-hinting-triggered-from",r??"command"),this._nextEditSessionEventReporter.reportEventFromSuggestion(n,"goto-hinting-triggered-to",r??"command"),this.open(n,{eventSource:r});this._logger.debug("Could not goto hinting.")}}next(r){return this._nextOrPrevious(!0,r)}previous(r){return this._nextOrPrevious(!1,r)}_nextOrPrevious(r,n,i=!0){let s=this._suggestionManager.getActiveSuggestions().filter(gi),o=Awe(s,this._state.value instanceof Ir||this._state.value instanceof Vt||this._state.value instanceof Sr?this._state.value.suggestion:void 0,!r,!1,this._configListener.config.nextEdit.enableGlobalBackgroundSuggestions);if(this._nextEditSessionEventReporter.reportEventFromSuggestion(this._state.value instanceof Ir||this._state.value instanceof Vt?this._state.value.suggestion:void 0,r?"next-triggered-from":"previous-triggered-from",n??"command"),this._nextEditSessionEventReporter.reportEventFromSuggestion(o,r?"next-triggered-to":"previous-triggered-to",n??"command"),!o){i&&Ie.window.showInformationMessage("No more suggestions right now."),this._hoverProvider.hideHover(n??"command");return}return this._decorationManager.shouldDrawBottomDecorations.value=!1,this._debouncedSetBottomDecorations(),this._state.value instanceof Sr?(this._logger.debug("Finishing animation instead of opening suggestion."),this._clearAnimatedApply(),this.accept()):(this.incrementKeybindingUsageCount(n),this.open(o,{eventSource:n}))}undoAcceptSuggestion(r,n){r??=this._state.value instanceof Vt?this._state.value.suggestion:void 0,r&&r.state==="accepted"?this._undoSuggestions(r):Ie.commands.executeCommand("undo"),this._hoverProvider.hideHover(n??"command"),this._nextEditSessionEventReporter.reportEventWithoutIds("undo-accept",n??"command")}undoAllSuggestionsInFile(r,n){let i=Fs(r),s=this._suggestionManager.getActiveSuggestions().filter(wC).filter(o=>i===o.qualifiedPathName.absPath);if(s.length===0){Ie.window.showInformationMessage("No Next Edits to undo.");return}this._nextEditSessionEventReporter.reportEventWithoutIds("undo-all-in-file",n??"command"),this._undoSuggestions(s),this._hoverProvider.hideHover(n??"command")}async toggleHoverDiff(r,n){if(await this._nextEditConfigManager.toggleSetting("showDiffInHover"),n){let i=this._suggestionManager.findSuggestionById(n),s=Ie.window.activeTextEditor;if(i&&s){this._hoverProvider.hideHover(r??"command");let o=s.selection,a=this._getSuggestionSelection(i);(!this._hoverProvider.hoverContactCondition(i,s.selection.active,s.document)||!s.selection.isEqual(a))&&(this._ignoreSelectionChangeEvents=!0,s.selection=a),this._hoverProvider.showHover(),s.selection=o}}else this._hoverProvider.hideHover(r??"command"),this._hoverProvider.showHover()}_clearAnimatedApply(r){this._state.value instanceof Sr&&(!r||!r.isEqual(this._state.value.selection))&&clearTimeout(this._state.value.timeout)}async gotoSuggestion(r,n=void 0,i=!1){this._completionVisibilityWatcher.maybeInlineCompletionVisible&&(this._logger.debug("Clearing inline completion before opening next edit suggestion."),await Ie.commands.executeCommand("editor.action.inlineSuggest.hide"));let s=!1;if(r.qualifiedPathName.equals(Ie.window.activeTextEditor?.document.uri))i||await Ie.commands.executeCommand("workbench.action.focusActiveEditorGroup");else{s=!0,this._nextEditSessionEventReporter.reportEventFromSuggestion(r,"suggestion-global-offset-text-triggered","command");let l=Ie.window.visibleTextEditors.find(c=>r.qualifiedPathName.equals(c.document.uri));if(l)await Ie.window.showTextDocument(l.document,{selection:this._getSuggestionSelection(r),preserveFocus:i});else{if(!dn(r.qualifiedPathName.absPath)){Ie.window.showInformationMessage(`Suggestion for ${r.qualifiedPathName.relPath} is no longer relevant.`),this._suggestionManager.remove(this._suggestionManager.getActiveSuggestions().filter(c=>c.qualifiedPathName.equals(r.qualifiedPathName)));return}await Ie.window.showTextDocument(Ie.Uri.file(r.qualifiedPathName.absPath),{selection:this._getSuggestionSelection(r),preserveFocus:i})}}let o=Ie.window.activeTextEditor;if(!o||!r.qualifiedPathName.equals(o.document.uri)){this._logger.debug(`Unable to go to suggestion in ${r.qualifiedPathName.absPath}.`);return}if(r.lineRange.start>=o.document.lineCount&&(this._logger.warn("Trying to move to a line that doesn't exist."),this._nextEditSessionEventReporter.reportEventFromSuggestion(r,"error-moving-to-line-that-doesnt-exist","unknown")),o.visibleRanges.some(l=>l.contains(Ms(r.lineRange)))||(o.revealRange(new Ie.Range(r.lineRange.start,0,r.lineRange.stop,0),Ie.TextEditorRevealType.InCenterIfOutsideViewport),await ma(e._smoothScrollDelayMs)),n===void 0){let l=!s&&r.highlightRange.contains(o.selection.active.line),c=!s&&o.visibleRanges.some(u=>u.contains(Ms(r.lineRange)));n=l?e._applySuggestionDelayMs.atCursor:c?e._applySuggestionDelayMs.onScreen:e._applySuggestionDelayMs.offScreen,r.lineRange.length>e._largeChangeLineCountThreshold&&(n+=e._applySuggestionDelayMs.largeBonus)}let a=this._getSuggestionSelection(r);return(!this._hoverProvider.hoverContactCondition(r,o.selection.active,o.document)||!o.selection.isEqual(a))&&(this._ignoreSelectionChangeEvents=!0,o.selection=a),n}async open(r,n={}){if(r.state==="stale"){this._logger.debug(`Tried to open stale suggestion. ${r.result.suggestionId}`);return}let i=await this.gotoSuggestion(r,n.animationDelayMs,n.preserveFocus);if(i===void 0)return;let s=Ie.window.activeTextEditor;if(!s){this._logger.debug(`Unable to open suggestion in ${r.qualifiedPathName.absPath}.`);return}(this._state.value instanceof Ir||this._state.value instanceof Vt)&&!r.equals(this._state.value.suggestion)&&await this._hoverProvider.hideHoverAsync(n.eventSource??"command"),r.state==="accepted"?this._state.value=new Vt(r):this._state.value=new Ir(r),this._state.value instanceof Ir&&(n.shouldAutoApply??this.nextEditConfig.enableAutoApply)?(this._clearAnimatedApply(),this._state.value=new Sr(r,s.selection,setTimeout(()=>{this.accept(void 0,!1,void 0,n.preserveFocus)},i))):this._hoverProvider.showHover()}openSuggestionAt(r,n){let i=this._suggestionManager.getActiveSuggestions().find(s=>gi(s)&&s.qualifiedPathName.equals(r)&&(s.lineRange.contains(n)||s.lineRange.touches(n)));i?(this._nextEditSessionEventReporter.reportEventFromSuggestion(i,"suggestion-opened","gutter-click"),this.open(i,{animationDelayMs:e._applySuggestionDelayMs.atCursor,eventSource:"gutter-click"})):(this._logger.error(`No suggestion found for ${r.toString()} at line ${n}.`),Ie.window.showInformationMessage("No suggestion found."),this._nextEditSessionEventReporter.reportEventWithoutIds("error-no-suggestion-found","command"))}_getHintedState(){let r=Ie.window.activeTextEditor;if(!r)return new jn;let n=this.nextAvailableSuggestion(!0);if(!n)return new jn;let i=this.nextAvailableSuggestion(!1);return i?r.visibleRanges.some(s=>s.contains(Ms(i.highlightRange)))&&!r.visibleRanges.some(s=>s.contains(Ms(n.highlightRange)))?new gs(i,!1):new gs(n,!0):new gs(n,!0)}get state(){return this._state.value}addStateListener(r){return this._state.listen(r)}_getSuggestionSelection(r){let n=r.previewTargetCursorLine;return new Ie.Selection(n,0,n,0)}async incrementKeybindingUsageCount(r){if(r!=="keybinding")return;let n=this._globalState.get("nextEditKeybindingUsageCount")??0;if(!(n>=e.maxKeybindingUsageCount))return this._globalState.update("nextEditKeybindingUsageCount",n+1)}get nextEditConfig(){return this._nextEditConfigManager.config}};async function pwe(){try{await Ie.commands.executeCommand("extension.vim_escape"),await Ie.commands.executeCommand("extension.vim_insert"),await Ie.commands.executeCommand("extension.vim_escape")}catch{}}function Awe(e,t,r,n,i){let s=r?-1:1;if(e.length===0)return;let o=Ie.window.activeTextEditor;if(!o)return;let a=o.selection;if(!a)return;let l=td(a),c=e.filter(f=>f.qualifiedPathName.equals(o.document.uri)&&(!n||!f.equals(t)));if(c.length===0&&i)return e.filter(f=>!n||!f.equals(t)).filter(f=>f.scope==="WORKSPACE").reduce((f,p)=>f!=null&&f.result.localizationScore>p.result.localizationScore?f:p,void 0);n&&(c=c.filter(f=>!f.equals(t)));let u=c.sort((f,p)=>s*f.highlightRange.compareTo(p.highlightRange));return t?u.find(f=>s*f.highlightRange.compareTo(t.highlightRange)>0)??u[0]:u.find(f=>s*f.highlightRange.compareTo(l)>=0||f.previewBoxRange(o.document).contains(a.active.line)||f.previewBoxRange(o.document).contains(a.anchor.line))??u[0]}var Vl=V(require("vscode"));var Zs=V(require("vscode"));var UQ=V(require("assert")),ywe=V(a8()),qC=V(require("vscode"));function OQ(e){return zt(e.rootPath,e.relPath+".next-edit-results.json5")}async function*Cwe(e){(0,UQ.default)(e.pathName);let t=await qC.workspace.openTextDocument(qe.from(e.pathName).absPath),r=OQ(e.pathName);(0,UQ.default)(dn(r));let n=ywe.default.parse((await qC.workspace.openTextDocument(r)).getText()),i=t.getText(),s=0;for await(let o of n)o.path=o.path??e.pathName?.relPath,o.blobName=e.blobName??"",o.suggestionId=o.suggestionId??`mock-suggestion-${o.blobName}-${s++}`,o.charStart=o.charStart??t.offsetAt(new qC.Position(o.lineStart,0)),o.charEnd=o.charEnd??t.offsetAt(new qC.Position(o.lineEnd,0)),o.diffSpans=o.diffSpans??(o.existingCode!=null&&o.suggestedCode!=null?Xyt(o.existingCode,o.suggestedCode):[{original:{start:o.charStart,stop:o.charEnd},updated:{start:o.charStart,stop:o.charEnd}}]),o.existingCode=o.existingCode?.replaceAll("|","")??i.substring(o.charStart,o.charEnd),o.suggestedCode=o.suggestedCode?.replaceAll("|","")??i.substring(o.charStart,o.charEnd),o.changeDescription=o.changeDescription??"",o.editingScore=o.editingScore??1,o.localizationScore=o.localizationScore??1,o.editingScoreThreshold=o.editingScoreThreshold??1,yield{result:o,unknownBlobNames:[],checkpointNotFound:!1}}function Xyt(e,t){let r=[],n=e.split("|"),i=t.split("|");(0,UQ.default)(n.length===i.length);let s=0,o=0;for(let a=0;a<n.length;a++)r.push({original:{start:s,stop:s+n[a].length},updated:{start:o,stop:o+i[a].length}}),s+=n[a].length,o+=i[a].length;return r}var eCt=10,tCt=3;function vwe(e,t){return t?e.getFolderRoot(qe.from(t).absPath):e.getMostRecentlyChangedFolderRoot()}function N8(e,t,r,n){let i=!!t.config.nextEdit.useMockResults&&!!r&&dn(OQ(r));return(n??e.getFileEditEvents(vwe(e,r))).length!==0||i}async function*Ewe(e,t,r,n,i,s,o,a){let l=j("queryNextEditStream");if(o.isCancellationRequested){l.debug("Skipping Next Edit with cancelled token."),yield{status:We.cancelled};return}if(!N8(t,s,e.pathName,e.fileEditEvents)){l.debug("Skipping Next Edit with no changes."),yield{status:We.ok};return}let u=s.config.nextEdit.useMockResults&&e.pathName&&dn(OQ(e.pathName)),f=vwe(t,e.pathName),p=e.fileEditEvents??t.getFileEditEvents(f),g=f?t.getRepoRootForFolderRoot(f):void 0,A=e.pathName&&qe.from(e.pathName),y=A?.rootPath??g,C=t.getContext();e={...e,blobName:e.blobName??(A&&t.getBlobName(A)),blobs:e.blobs??C.blobs,recentChanges:e.recentChanges??Wy(C.recentChunks.filter(b=>!b.uploaded)),fileEditEvents:p,unindexedEditEvents:e.unindexedEditEvents.length>0?e.unindexedEditEvents:C.unindexedEditEvents,unindexedEditEventsBaseBlobNames:e.unindexedEditEventsBaseBlobNames.length>0?e.unindexedEditEventsBaseBlobNames:C.unindexedEditEventsBaseBlobNames,diagnostics:await nCt(r,y,i,t)};let v=new Q8(e.requestId,t);l.debug(`[${e.requestId}] Starting request for ${A?.relPath} (mode=${e.mode}, scope=${e.scope}).`);try{let b;if(u?b=Cwe(e):b=await n.nextEditStream(e),o.isCancellationRequested){l.debug(`[${e.requestId}] Skipping next edit with cancelled token.`),yield{status:We.cancelled};return}for await(let w of b){let B=`[${e.requestId}/${w.result.suggestionId}]`;if(w.unknownBlobNames.length>0&&(t.handleUnknownBlobs(C,w.unknownBlobNames),l.warn(`${B} Found ${w.unknownBlobNames.length} unknown blobs.`)),w.checkpointNotFound&&(t.handleUnknownCheckpoint(e.requestId,e.blobs.checkpointId),l.warn(`${B} Checkpoint was not found.`)),o.isCancellationRequested){l.debug(`${B} Cancelled by the client.`),yield{status:We.cancelled};return}let F=await rCt(w.result.path,y,t),Q=F&&t.safeResolvePathName(F.uri);if(o.isCancellationRequested){l.debug(`${B} Cancelled by the client.`),yield{status:We.cancelled};return}if(!Q){l.warn(`${B} Response path ${w.result.path} has no document.`),a.reportEvent(e.requestId,w.result.suggestionId,Date.now(),"error-no-document-for-response","unknown");continue}if(F?.uri.scheme==="file"&&!dn(Q.absPath)){l.warn(`${B} Response path ${Q.relPath} does not exist.`),a.reportEvent(e.requestId,w.result.suggestionId,Date.now(),"error-response-file-is-deleted","unknown");continue}let W=F.getText(),Z=_W(W,w.result.charStart),$=_W(W,w.result.charEnd),ee=v.updateWithPendingEdits(Q,new Bo(Z,$));if(!ee){l.debug(`${B} Response was invalidated by pending edits.`),yield{status:We.invalidArgument};return}let U=new Zs.Range(F.positionAt(ee.start),F.positionAt(ee.stop)),ge=F.lineAt(U.end.line);if(ge.range.isEqual(ge.rangeIncludingLineBreak)&&U.end.line===F.lineCount-1&&U.end.character===ge.range.end.character&&!U.isEmpty&&(U=U.with({end:new Zs.Position(U.end.line+1,0)})),U.start.character!==0||U.end.character!==0){if(l.warn(`${B} Response was not line-aligned ${Y_e(U)}.`),l.debug(`${B} Converting char range ${w.result.charStart}-${w.result.charEnd} to ${Z}-${$}.`),l.debug(`${B} Updated char range to ${ee?.start}-${ee?.stop}.`),l.debug(`${B} The bad line is: "${F.lineAt(U.end.character!==0?U.end.line:U.start.line).text}".`),a.reportEvent(e.requestId,w.result.suggestionId,Date.now(),"error-response-not-line-aligned","unknown"),Q.relPath!==e.pathName?.relPath)continue;a.reportEvent(e.requestId,w.result.suggestionId,Date.now(),"error-response-not-line-aligned-for-current-file","unknown"),yield{status:We.invalidArgument};return}if(F.getText(U)!==w.result.existingCode){if(l.warn(`${B} Code in buffer doesn't match code in response.`),l.debug(`${B} Converting char range ${w.result.charStart}-${w.result.charEnd} to ${Z}-${$}.`),l.debug(`${B} Updated char range to ${ee?.start}-${ee?.stop}.`),l.debug(`${B} Buffer code: "${F.getText(U)}", response code: "${w.result.existingCode}".`),a.reportEvent(e.requestId,w.result.suggestionId,Date.now(),"error-code-in-buffer-doesnt-match-code-in-response","unknown"),Q.relPath!==e.pathName?.relPath)continue;a.reportEvent(e.requestId,w.result.suggestionId,Date.now(),"error-code-in-buffer-doesnt-match-code-in-response-for-current-file","unknown"),yield{status:We.invalidArgument};return}let Se=new Ya(e.requestId,e.mode,e.scope,{...w.result,charStart:ee.start,charEnd:ee.stop},Q,td(U),F.uri.scheme);l.debug(`${B} Returning ${Se.changeType} suggestion for ${Q.relPath}@${Se.lineRange.toString()}.`),yield{status:We.ok,suggestion:Se}}l.debug(`[${e.requestId}] Request completed.`)}catch(b){if(Qr.isAPIErrorWithStatus(b,We.cancelled)){l.debug(`[${e.requestId}] Cancelled by the server.`),yield{status:We.cancelled};return}l.warn(`[${e.requestId}] Next edit failed: ${b}.`),a.reportEvent(e.requestId,void 0,Date.now(),"error-api-error","unknown"),yield{status:We.unknown};return}finally{v.dispose()}}var Q8=class extends X{constructor(r,n){super();this.requestId=r;this.workspaceManager=n;this.addDisposable(Zs.workspace.onDidChangeTextDocument(i=>{if(i.contentChanges.length===0)return;let s=this.workspaceManager.safeResolvePathName(i.document.uri);if(!s)return;let o=this._pendingEdits.get(s.absPath)??[];o.push(...i.contentChanges),this._pendingEdits.set(s.absPath,o)}))}_pendingEdits=new Map;updateWithPendingEdits(r,n){let i=this._pendingEdits.get(r.absPath)??[];for(let s of i){let o=s.text.length-s.rangeLength;if(s.rangeOffset+s.rangeLength<n.start)n.start+=o,n.stop+=o;else if(s.rangeOffset<=n.stop)return}return n}};async function rCt(e,t,r){if(!t){let n=r.getAllQualifiedPathNames(e);n.length===1&&(t=n[0].rootPath)}if(t){let n=Zs.Uri.file(zt(t,e)),i=await Zs.workspace.openTextDocument(n);if(i)return i}return Zs.window.visibleTextEditors.find(n=>n.document.uri.fsPath===e)?.document}async function nCt(e,t,r,n){let i=await e.getMostRecentDiagnostics(eCt,tCt,t),s=new Map;return(await Promise.all(i.map(async a=>{let l=a.uri.path;t&&l.startsWith(t)&&(l=l.substring(t.length));let c;switch(a.diagnostic.severity){case Zs.DiagnosticSeverity.Error:c="ERROR";break;case Zs.DiagnosticSeverity.Warning:c="WARNING";break;case Zs.DiagnosticSeverity.Information:c="INFORMATION";break;case Zs.DiagnosticSeverity.Hint:c="HINT";break}s.has(l)||s.set(l,r.calculateNoThrow(l,(await Co(a.uri.fsPath)).getText()));let u=s.get(l);if(!u)return;let f=n.safeResolvePathName(a.uri);if(!f)return;let p=n.getBlobName(f);return p?{location:{path:l,line_start:a.diagnostic.range.start.line,line_end:a.diagnostic.range.end.line},message:a.diagnostic.message,severity:c,current_blob_name:u,blob_name:p,char_start:a.charStart,char_end:a.charEnd}:void 0}))).filter(a=>a!==void 0)}var qQ=class extends X{constructor(r,n,i,s,o){super();this._workspaceManager=r;this._nextEditRequestManager=n;this._suggestionManager=i;this._configListener=s;this._nextEditSessionEventReporter=o;this.addDisposable(Vl.workspace.onDidChangeTextDocument(this.handleWorkspaceEditsAvailable)),this.addDisposable(Vl.window.onDidChangeActiveTextEditor(this.handleWorkspaceEditsAvailable)),this.addDisposable(new Vl.Disposable(this._nextEditRequestManager.lastFinishedRequest.listen(()=>{this._handleWorkspaceEditsCached()})))}timeoutMs=1e3*30;_logger=j("GlobalNextEdits");async startGlobalQuery(r){Vl.commands.executeCommand("setContext","vscode-augment.nextEdit.global.updating",!0);try{this._nextEditSessionEventReporter.reportEventWithoutIds("global-mode-refreshed",r??"command");let n=Vl.window.activeTextEditor,i=n?this._workspaceManager.safeResolvePathName(n.document.uri):void 0,s=this._nextEditRequestManager.enqueueRequest(i,"FOREGROUND","WORKSPACE");if(!s)return;await this._nextEditRequestManager.lastFinishedRequest.waitUntil(a=>a!==void 0&&a.requestId===s,this.timeoutMs).catch(a=>{this._logger.error(`Global next edit failed: ${a}`),this._nextEditSessionEventReporter.reportEvent(s,void 0,Date.now(),"error-global-mode-error","command")});let o=this._suggestionManager.getActiveSuggestions().filter(a=>!dn(a.qualifiedPathName.absPath));this._suggestionManager.remove(o)}finally{Vl.commands.executeCommand("setContext","vscode-augment.nextEdit.global.updating",!1)}}cancel(){this._nextEditRequestManager.cancelAll(),this._nextEditSessionEventReporter.reportEventWithoutIds("global-mode-canceled","command")}handleWorkspaceEditsAvailable=()=>{let{activeTextEditor:r}=Vl.window,n=r?this._workspaceManager.safeResolvePathName(r?.document.uri):void 0,i=N8(this._workspaceManager,this._configListener,n);Rc("vscode-augment.nextEdit.global.canUpdate",i)};_handleWorkspaceEditsCached(){let{activeTextEditor:r}=Vl.window,n=r?this._workspaceManager.safeResolvePathName(r?.document.uri):void 0,i=this._nextEditRequestManager.shouldNotEnqueueRequestReason(n,"FOREGROUND","WORKSPACE");Rc("vscode-augment.nextEdit.global.updateCached",i)}};var bwe=V(vs()),Hl=V(require("vscode"));var VQ=class e extends X{constructor(r,n,i,s,o,a,l,c,u,f,p,g){super();this._apiServer=r;this._configListener=n;this._workspaceManager=i;this._diagnosticsManager=s;this._nextEditSessionEventReporter=o;this._clientMetricsReporter=a;this._blobNameCalculator=l;this._suggestionManager=c;this._recentSuggestions=u;this._stateController=f;this._completionJustAccepted=p;this._featureFlagManager=g;this.addDisposable(new Hl.Disposable(()=>{this._inflightRequest?.cancelTokenSource?.cancel(),this._inflightRequest?.cancelTokenSource?.dispose(),this._inflightRequest=void 0,this.lastFinishedRequest.dispose(),this.lastResponse.dispose(),this.state.dispose()})),this.addDisposable(new Hl.Disposable(this.state.listen(y=>{Rc("vscode-augment.nextEdit.loading",y==="inflight")})));let A=y=>{let C=y??this._featureFlagManager.currentFlags.nextEditDebounceMs;this._processPendingRequestsDebounced&&this._processPendingRequestsDebounced.cancel(),this._processPendingRequestsDebounced=(0,bwe.debounce)(()=>void this._processPendingRequests(),C)};A(this._configListener.config.nextEdit.useDebounceMs),this.addDisposable(this._configListener.onDidChange(y=>{y.newConfig.nextEdit.useDebounceMs!==y.previousConfig.nextEdit.useDebounceMs&&A(y.newConfig.nextEdit.useDebounceMs)})),this.addDisposable(Hl.workspace.onDidChangeTextDocument(y=>{y.contentChanges.length>0&&this._workspaceManager.safeResolvePathName(y.document.uri)&&(this._freshCompletedRequests=[]),!(!qe.equals(this._inflightRequest?.qualifiedPathName,y.document.uri)&&!this._pendingRequests.some(C=>qe.equals(C.qualifiedPathName,y.document.uri)))&&y.contentChanges.length>0&&!this._suggestionManager.suggestionWasJustAccepted.value&&this.cancelAll()}))}_logger=j("NextEditRequestManager");static _statusClearTimeoutMs=2e3;_pendingRequests=[];_inflightRequest;lastFinishedRequest=new la(void 0);lastResponse=new la(void 0);state=new la("ready");_processPendingRequestsDebounced;_freshCompletedRequests=[];get hasInflightRequest(){return!!this._inflightRequest}get pendingQueueLength(){return this._pendingRequests.length}shouldNotEnqueueRequestReason(r,n,i,s){let o=this._resolvePath(r),a={mode:n,scope:i,selection:s??o?.selection,requestBlobName:o?.blobName,qualifiedPathName:r},l=this._inflightRequest||this._pendingRequests[0];if(l&&P8(a,l))return`Skipping ${n}/${i} request because it is subsumed by inflight request ${l.id}.`;let c=this._freshCompletedRequests.find(f=>P8(a,f)),u=`${r?.relPath}@${a.selection?.toString()}`;if(c)return`Skipping ${n}/${i} request at ${u} because it is subsumed by ${c.id}, which was recently completed.`}enqueueRequest(r,n,i,s){let o=this.shouldNotEnqueueRequestReason(r,n,i,s);if(o){this._logger.debug(o);return}let a=this._resolvePath(r);s=s??a?.selection;let l=`${r?.relPath}@${s?.toString()}`,c={id:this._apiServer.createRequestId(),qualifiedPathName:r,mode:n,scope:i,enqueuedAt:Date.now()};this._logger.debug(`Starting enqueuing ${n}/${i} request ${c.id} at ${l}.`);let u=this._inflightRequest||this._pendingRequests[0];u&&(c.mode==="FOREGROUND"||c.mode==="FORCED"?(this._logger.debug(`Clearing requests for foreground request @ ${l}.`),this.cancelAll()):c.mode==="BACKGROUND"&&u.mode==="BACKGROUND"&&!qe.equals(u.qualifiedPathName,c.qualifiedPathName)?(this._logger.debug(`Clearing requests for background request @ ${l}.`),this.cancelAll()):c.mode==="BACKGROUND"&&u.mode==="BACKGROUND"&&u.scope==="WORKSPACE"&&c.scope==="FILE"&&(this._logger.debug(`Clearing background workspace requests for background file request @ ${l}.`),this.cancelAll()));let f=this._pendingRequests.find(p=>P8(c,p));return f?this._logger.debug(`Skipping enqueueing request ${c.id} at ${l} because it is subsumed by ${f.id}, which is already pending.`):this._pendingRequests.push(c),this.state.value=this._inflightRequest?"inflight":"pending",this._processPendingRequestsDebounced(),(c.mode==="FOREGROUND"||c.mode==="FORCED"||this._suggestionManager.suggestionWasJustAccepted.value||this._completionJustAccepted.value)&&this._processPendingRequestsDebounced.flush(),c.id}cancelAll(){this._inflightRequest&&(this._logger.debug(`Cancelling inflight request ${this._inflightRequest.id}.`),this._inflightRequest.cancelTokenSource?.cancel(),this._inflightRequest.cancelTokenSource?.dispose(),this._inflightRequest=void 0),this._pendingRequests.length>0&&(this._logger.debug(`Cancelling ${this._pendingRequests.length} pending requests: ${this._pendingRequests.map(r=>r.id).toString()}.`),this._pendingRequests=[],this._processPendingRequestsDebounced.cancel())}async _processPendingRequests(){if(this._inflightRequest){this._logger.debug("Waiting for inflight request to complete.");return}else if(!this._pendingRequests.length){this._logger.debug("Waiting for a request to be enqueued.");return}let[r]=this._pendingRequests.splice(0,1),n=this._resolvePath(r.qualifiedPathName),i=Date.now()-r.enqueuedAt;this._logger.debug(`Starting to process ${r.id} after ${i} ms.`);let s=n?.blobName,o=r.qualifiedPathName,a=n?.document,l=n?.selection,c=r.mode,u=r.scope,f=this._suggestionManager.getRejectedSuggestions().filter(b=>b.changeType!=="noop"&&(u==="WORKSPACE"||o===void 0||b.qualifiedPathName.equals(o))).map(b=>new Ek(b.qualifiedPathName.relPath,b.lineRange,b.result.charStart,b.result.charEnd)),p=r.id,g=this._inflightRequest={...r,requestBlobName:s,selection:l,cancelTokenSource:new Hl.CancellationTokenSource};this.state.value="inflight";let A=this._stateController.setState(P_e),y=We.ok,C=[],v=new Date;try{let b=Date.now(),w=Ewe({requestId:p,clientCreatedAt:new Date,instruction:"",selectedCode:a?.getText(l&&Ms(l,a)),prefix:l&&a?.getText(Ms({start:0,stop:l.start},a)),suffix:l&&a?.getText(Ms({start:l.stop,stop:a.lineCount},a)),language:a?.languageId,pathName:o,mode:c,scope:u,blockedLocations:f,unindexedEditEvents:[],unindexedEditEventsBaseBlobNames:[]},this._workspaceManager,this._diagnosticsManager,this._apiServer,this._blobNameCalculator,this._configListener,g.cancelTokenSource.token,this._nextEditSessionEventReporter),B=Date.now(),F=0,Q=0,W=0,Z=b-g.enqueuedAt;this._logger.debug(`[${g.id}] queued for ${Z} ms.`);for await(let ee of w){if(y=ee.status,!ee.suggestion)break;W++;let ge=Date.now()-g.enqueuedAt;this._logger.debug(`[${ee.suggestion?.requestId}/${ee.suggestion?.result.suggestionId}] ${ee.suggestion?.changeType?.toString()} took ${ge} ms since enqueue.`),F===0&&ee.suggestion!==void 0&&ee.suggestion.changeType!=="noop"&&(F=ge),W===4&&F===0&&(Q=ge),this.lastResponse.value=ee.suggestion,ee.suggestion&&C.push(ee.suggestion)}let $=y===We.ok&&C.length===0;if(y===We.ok&&!$&&this._freshCompletedRequests.push(g),!$&&g.mode==="BACKGROUND"){this._clientMetricsReporter.report({client_metric:"next_edit_bg_stream_preprocessing_latency_ms",value:B-b});let ee=Date.now()-g.enqueuedAt;y===We.ok?this._clientMetricsReporter.report({client_metric:"next_edit_bg_stream_finish_latency_ms",value:ee}):F>0||Q>0?this._clientMetricsReporter.report({client_metric:"next_edit_bg_stream_partial_latency_ms",value:ee}):y===We.cancelled?this._clientMetricsReporter.report({client_metric:"next_edit_bg_stream_cancel_latency_ms",value:ee}):this._clientMetricsReporter.report({client_metric:"next_edit_bg_stream_error_latency_ms",value:ee}),F>0?this._clientMetricsReporter.report({client_metric:"next_edit_bg_first_change_latency_ms",value:F}):Q>0?this._clientMetricsReporter.report({client_metric:"next_edit_bg_sufficient_noops_latency_ms",value:Q}):W<4&&y===We.ok&&this._clientMetricsReporter.report({client_metric:"next_edit_bg_sufficient_noops_latency_ms",value:ee})}}catch(b){this._logger.warn(`[${p}] Next edit failed: ${b}.`),this._nextEditSessionEventReporter.reportEvent(p,void 0,Date.now(),"error-api-error","unknown")}finally{g===this._inflightRequest&&(this._inflightRequest=void 0,this._pendingRequests.length>0?(this._processPendingRequestsDebounced(),this._processPendingRequestsDebounced.flush()):(this._logger.debug("No more pending requests."),this.state.value="ready",y===We.ok&&!this._suggestionManager.getActiveSuggestions().some(w=>w.state==="fresh"&&w.changeType!=="noop")?sCt(this._stateController.setState(L_e),e._statusClearTimeoutMs):y!==We.cancelled&&y!==We.ok&&(this._stateController.setState(N_e),this._logger.debug(`Request ${p} failed with status: ${y}.`))));let b=new bk(p,c,u,o,y,C,v);this._recentSuggestions.addItem(b),this.lastFinishedRequest.value=b,A.dispose(),g.cancelTokenSource.dispose()}}clearCompletedRequests(r){this._freshCompletedRequests=this._freshCompletedRequests.filter(n=>r!==void 0&&n.mode!==r)}_resolvePath(r){let n=r&&qe.from(r),i=n&&this._findEditorForPath(n),s=i&&i.document,o=s&&this._blobNameCalculator.calculate(n.relPath,s.getText()),a=i&&new Nn(i.selection.start.line,i.selection.end.line);return{blobName:o,document:s,selection:a}}_findEditorForPath(r){let n=qe.from(r);return Hl.window.activeTextEditor&&this._workspaceManager.safeResolvePathName(Hl.window.activeTextEditor.document.uri)?.equals(n)?Hl.window.activeTextEditor:Hl.window.visibleTextEditors.find(i=>this._workspaceManager.safeResolvePathName(i.document.uri)?.equals(n))}},iCt=15;function P8(e,t){return e.mode===t.mode&&(e.scope===t.scope||e.scope==="CURSOR"&&t.scope==="FILE")&&(e.scope==="WORKSPACE"||qe.equals(e.qualifiedPathName,t.qualifiedPathName))&&!(e.scope!=="WORKSPACE"&&e.requestBlobName&&t.requestBlobName&&e.requestBlobName!==t.requestBlobName)&&!(e.scope==="CURSOR"&&e.selection?.start!=null&&t.selection?.start!=null&&Math.abs(e.selection.start-t.selection.start)>iCt)}function sCt(e,t){setTimeout(()=>{e.dispose()},t)}var wwe=V(vs()),Qs=V(require("vscode"));var K_=V(require("vscode"));var MA=class extends X{_document;_lastSetAt;_observable;constructor(t=void 0,r=1){super(),this._observable=this.addDisposable(new la(t));let n=i=>{this.value===void 0||i&&this._document&&i!==this._document||this._lastSetAt&&Date.now()-this._lastSetAt<r||this.clear()};this.addDisposable(K_.window.onDidChangeActiveTextEditor(()=>{n()})),this.addDisposable(K_.window.onDidChangeTextEditorSelection(i=>{n(i.textEditor.document)})),this.addDisposable(K_.workspace.onDidChangeTextDocument(i=>{n(i.document)}))}get value(){return this._observable.value}listen(t,r=!1){return this._observable.listen(t,r)}waitUntil(t,r){return this._observable.waitUntil(t,r)}set(t,r){this._lastSetAt=Date.now(),this._document=r,this._observable.value=t}clear(){this._document=void 0,this._observable.value=void 0}};var _we=V(require("vscode"));var QA=class{constructor(t){this.suggestion=t}},VC=class{constructor(t){this.suggestion=t}},z_=class{constructor(t){this.suggestion=t}},HC=class{constructor(t){this.suggestion=t}},WC=class{constructor(t){this.suggestion=t}};function HQ(e,t){if(t.contentChanges.length===0||t.document.uri.fsPath!==e.qualifiedPathName.absPath)return new QA(e);let r=e.state==="accepted",n=t.document,i=r?e.afterLineRange():e.lineRange,s=t.contentChanges.filter(g=>g.range.end.line<=i.start&&!xwe(g,i)),o=s.map(g=>{let A=g.text.match(/\n/g)?.length??0,y=g.range.end.line-g.range.start.line;return A-y}).reduce((g,A)=>g+A,0),a=new Nn(e.lineRange.start+o,e.lineRange.stop+o),l=s.map(g=>g.text.length-g.rangeLength).reduce((g,A)=>g+A,0),c=n.offsetAt(new _we.Position(a.start,0))-l,u=e.with({result:{...e.result,charStart:e.result.charStart+l,charEnd:e.result.charEnd+l},lineRange:a}),f=t.contentChanges.filter(g=>xwe(g,i)).map(g=>({rangeOffset:g.rangeOffset-c,rangeLength:g.rangeLength,text:g.text})).sort((g,A)=>g.rangeOffset-A.rangeOffset);if(f.length===0)return l===0?new QA(u):new VC(u);let p=0;for(let g of f){if((r?e.result.existingCode:e.result.suggestedCode).slice(p+g.rangeOffset,p+g.rangeOffset+g.text.length)!==g.text)return new HC(e);p+=g.text.length-g.rangeLength}return r&&(p*=-1),p!==e.result.suggestedCode.length-e.result.existingCode.length?new HC(e):r?new WC(u.with({state:"fresh"})):new z_(u.with({state:"accepted"}))}function oCt(e){return new Nn(e.start.line,e.end.line+(e.end.character>0?1:0))}function xwe(e,t){let r=oCt(e.range);return r.intersects(t)||t.length===0&&r.touches(t)?!0:r.length===0&&r.start===t.start?!e.text.endsWith(`
`)||r.equals(t):!1}var WQ=class extends X{constructor(r,n,i=1e3*60*10){super();this._workspaceManager=r;this._nextEditSessionEventReporter=n;this.defaultRejectionDurationMs=i;this.suggestionWasJustAccepted=new MA,this.suggestionWasJustUndone=new MA,this.addDisposable(this.suggestionWasJustAccepted),this.addDisposable(this.suggestionWasJustUndone),this.addDisposable(new Qs.Disposable(()=>this.clear(!0))),this.addDisposable(Qs.workspace.onDidChangeTextDocument(s=>{this.handleChangeEvent(s)}))}_suggestions=[];_justAcceptedSuggestions=[];_rejectedSuggestions=[];_suggestionsChangedListeners=[];suggestionWasJustAccepted;suggestionWasJustUndone;_logger=j("SuggestionManagerImpl");onSuggestionsChanged(r){return this._suggestionsChangedListeners.push(r),new Qs.Disposable(()=>{this._suggestionsChangedListeners=this._suggestionsChangedListeners.filter(n=>n!==r)})}dispatchSuggestionsChangedEvent(r){let n={...r,newSuggestions:r.newSuggestions,oldSuggestions:r.oldSuggestions};this._suggestionsChangedListeners.forEach(i=>void i(n))}add(r,n){if(this._rejectedSuggestions=this._getCurrentRejectedSuggestions(),n){let s=this._rejectedSuggestions.length;this._rejectedSuggestions=this._rejectedSuggestions.filter(([o,a])=>!r.some(l=>o.intersects(l))),s!==this._rejectedSuggestions.length&&this._logger.debug(`Clearing ${s-this._rejectedSuggestions.length} old rejections.`)}else{let s=r.length;r=r.filter(o=>!this._rejectedSuggestions.some(([a,l])=>a.intersects(o))),s!==r.length&&this._logger.debug(`Dropping ${s-r.length} suggestions that overlap with rejected suggestions.`)}if(!r.length)return!1;let i=this._suggestions;this._filterSuggestions(s=>!r.some(o=>s.intersects(o)));for(let s of r)this._reportNonemptyEvent(s,"nonempty-suggestion-added");return this._suggestions.push(...r),this.checkValidity(this._suggestions),this.dispatchSuggestionsChangedEvent({oldSuggestions:i,newSuggestions:this._suggestions,accepted:this._justAcceptedSuggestions,rejected:[],undone:[]}),!0}remove(r){if(!r.length)return!1;let n=this._suggestions,i=this._rejectedSuggestions;return this._filterSuggestions(s=>!r.some(o=>o.equals(s))),this._rejectedSuggestions=this._getCurrentRejectedSuggestions().filter(([s,o])=>!r.some(a=>a.equals(s))),this._logger.debug(`Removing ${n.length-this._suggestions.length} suggestions and ${i.length-this._rejectedSuggestions.length} rejections from the manager.`),n.length!==this._suggestions.length?(this.dispatchSuggestionsChangedEvent({oldSuggestions:n,newSuggestions:this._suggestions,accepted:this._justAcceptedSuggestions,rejected:[],undone:[]}),!0):i.length!==this._rejectedSuggestions.length}clear(r,n){let i=this._suggestions;for(let s of i)this._reportNonemptyEvent(s,"nonempty-suggestion-cleared");n?this._suggestions=this._suggestions.filter(s=>s.mode!==n):this._suggestions=[],r&&(this._rejectedSuggestions=[]),this._justAcceptedSuggestions=[],this.dispatchSuggestionsChangedEvent({oldSuggestions:i,newSuggestions:[],accepted:this._justAcceptedSuggestions,rejected:[],undone:[]})}getActiveSuggestions(){return[...this._suggestions]}getJustAcceptedSuggestions(){return[...this._justAcceptedSuggestions]}clearJustAcceptedSuggestions(){this._justAcceptedSuggestions.length!==0&&(this._justAcceptedSuggestions=[],this.dispatchSuggestionsChangedEvent({oldSuggestions:this._suggestions,newSuggestions:this._suggestions,accepted:this._justAcceptedSuggestions,rejected:[],undone:[]}))}findSuggestionById(r){return this._suggestions.find(n=>n.result.suggestionId===r)}_getCurrentRejectedSuggestions(){let r=Date.now(),n=this._rejectedSuggestions.filter(([i,s])=>r<s);return n.length!==this._rejectedSuggestions.length&&this._logger.debug(`Filtering out ${this._rejectedSuggestions.length-n.length} expired rejections.`),n}getRejectedSuggestions(){return this._rejectedSuggestions=this._getCurrentRejectedSuggestions(),this._rejectedSuggestions.map(([r,n])=>r)}getAllSuggestions(){return[...this.getActiveSuggestions(),...this.getRejectedSuggestions()]}accept(r){if(r.length===0)return;let n=new Qs.WorkspaceEdit;for(let i of r)n.replace(Qs.Uri.from({scheme:i.uriScheme,path:i.qualifiedPathName.absPath}),new Qs.Range(new Qs.Position(i.lineRange.start,0),new Qs.Position(i.lineRange.stop,0)),i.result.suggestedCode);Qs.workspace.applyEdit(n)}reject(r,n=this.defaultRejectionDurationMs){if(r.length===0)return;this._logger.debug(`Rejecting ${r.length} suggestions.`),this._justAcceptedSuggestions=this._justAcceptedSuggestions.filter(a=>!r.some(l=>l.equals(a)));let i=this._suggestions;this._filterSuggestions(a=>!r.some(l=>l.equals(a)));let s=Date.now()+n,o=r.map(a=>[a,s]);this._rejectedSuggestions=this._getCurrentRejectedSuggestions().concat(o),this.dispatchSuggestionsChangedEvent({oldSuggestions:i,newSuggestions:this._suggestions,accepted:this._justAcceptedSuggestions,rejected:r,undone:[]})}handleChangeEvent(r){if(r.contentChanges.length===0)return!1;let n=this._workspaceManager.safeResolvePathName(r.document.uri);if(n===void 0)return!1;let i=this._suggestions,[s,o]=(0,wwe.partition)(this._suggestions,w=>n.equals(w.qualifiedPathName)),a=s.map(w=>HQ(w,r)),l=this._justAcceptedSuggestions.map(w=>HQ(w,r)),c=this._getCurrentRejectedSuggestions().map(([w,B])=>HQ(w,r)),u=vg(a,z_),f=vg(a,HC),p=vg(l,WC),g=vg(c,WC);this._justAcceptedSuggestions=vg(l,QA).concat(vg(l,VC));let A=p.concat(g),y=f.filter(w=>A.some(B=>B.lineRange.equals(w.afterLineRange(r.document))||B.lineRange.intersects(w.afterLineRange(r.document))));(u.length>0||f.length>0||A.length>0)&&this._logger.debug(`Accepting ${u.length} suggestions and invalidating ${f.length} suggestions (of which ${y.length} were invalidated due to undo) and undoing ${A.length} suggestions.`);let C=u.length===0&&A.length===0&&f.length>y.length,v=[...vg(a,QA),...vg(a,VC)].map(w=>this._markStaleIfNeeded(w,C,"document-changed")),b=o.map(w=>this._markStaleIfNeeded(w,C,"document-changed"));for(let w of u)this._reportNonemptyEvent(w,r.reason===Qs.TextDocumentChangeReason.Redo?"nonempty-suggestion-redone":"nonempty-suggestion-accepted","document-changed");for(let w of f)this._reportNonemptyEvent(w,"nonempty-suggestion-invalidated","document-changed");for(let w of A)this._reportNonemptyEvent(w,"nonempty-suggestion-undone","document-changed");return this._suggestions=b.concat(v,p),this.checkValidity(this._suggestions),this._justAcceptedSuggestions=(C?[]:this._justAcceptedSuggestions).concat(u),u.length>0&&this.suggestionWasJustAccepted.set(!0),p.length>0&&this.suggestionWasJustUndone.set(!0),this.dispatchSuggestionsChangedEvent({oldSuggestions:i,newSuggestions:this._suggestions,accepted:this._justAcceptedSuggestions,rejected:[],undone:p}),u.length>0}_filterSuggestions(r){this._suggestions=this._suggestions.filter(n=>{let i=r(n);return i||this._reportNonemptyEvent(n,"nonempty-suggestion-dropped"),i}),this.checkValidity(this._suggestions)}_markStaleIfNeeded(r,n,i){return n?(this._reportNonemptyEvent(r,"nonempty-suggestion-becomes-stale",i),r.with({state:"stale"})):r}checkValidity(r){if(r.length<2)return!0;let n=[...r];n.sort((s,o)=>s.qualifiedPathName.relPath.localeCompare(o.qualifiedPathName.relPath)||s.lineRange.compareTo(o.lineRange));let i=n[0];for(let s=1;s<n.length;s++){let o=n[s];if(i.intersects(o))return this._logger.error(`Found intersecting suggestions, ${i.toString()} and ${o.toString()}`),this._nextEditSessionEventReporter.reportEventFromSuggestion(o,"error-intersecting-suggestions","unknown"),!1}return!0}_reportNonemptyEvent(r,n,i){r.changeType!=="noop"&&this._nextEditSessionEventReporter.reportEventFromSuggestion(r,n,i??"unknown")}};function vg(e,t){return e.filter(r=>r instanceof t).map(r=>r.suggestion)}var GQ=V(vs()),Xs=V(require("vscode"));var aCt=2,lCt=200,cCt=80,uCt=3,dCt=3,fCt=4,GC=class e extends X{constructor(r,n,i,s,o){super();this._configListener=r;this._context=n;this._keybindingWatcher=i;this._featureFlagManager=s;this._hints=o;this._decorations=new L8(this._context,this._keybindingWatcher,this._hints),this._hoverPanel=new U8,this.showHintDecoration=GQ.debounce(a=>{this._decorations.decorate(a)},lCt)}_decorations;_previousEditor;_hoverPanel;showHintDecoration;enable(){this.dispose(),(this._configListener.config.enableDebugFeatures||wr(this._featureFlagManager.currentFlags.vscodeChatHintDecorationMinVersion))&&(this._hoverPanel.enable(),this.addDisposable(Xs.window.onDidChangeActiveTextEditor(r=>{this._decorations.clearDecorations(this._previousEditor),this._previousEditor=r,r&&e.canDecorateEditor(r)&&this.enableMultilineSelectionHints(r.selection)})),this.addDisposable(Xs.window.onDidChangeTextEditorSelection(r=>{if(!e.canDecorateEditor(r.textEditor))return;let n=r.selections[0];this.enableMultilineSelectionHints(n)})))}dispose(){super.dispose(),this._decorations.clearDecorations(),this._hoverPanel.dispose()}enableMultilineSelectionHints(r){this._decorations.clearDecorations(),r.isSingleLine?this._hoverPanel.setRange():(this.showHintDecoration(this.getOffsetLine(r)),this._hoverPanel.setRange(r.start,r.end))}static canDecorateEditor(r){return r.document.uri.scheme==="file"||r.document.uri.scheme==="untitled"}getOffsetLine(r){let n=Xs.window.activeTextEditor,i=r.active.line<r.anchor.line;if(!n)return i?r.active.line-1:r.active.line+1;let s=i?1:-1,o=[Math.min(r.anchor.line,r.active.line),Math.max(r.anchor.line,r.active.line)],a=r.active.line+s*aCt,l=r.active.line,c=[Math.min(a,l),Math.max(a,l)],u=GQ.range(Math.max(c[0],o[0]),Math.min(c[1],o[1])+1);return u.sort((f,p)=>{let g=n.document.lineAt(f).text.length-n.document.lineAt(p).text.length;return g===0?i?f-p:p-f:g}),u[0]===r.active.line?u[1]:u[0]}},L8=class{constructor(t,r,n){this._context=t;this._keybindingWatcher=r;this._hints=n;this._rightSpacerDecorationType=k8(),this._keyHintDecorationTypes=[],this._hints.forEach((i,s)=>{let o=G_(i.keyBindingId,this._keybindingWatcher,this._context);this._decorationLength+=o.length*dCt;let a={keyBindingDecorationTypes:F8(),textDecorationType:BQ(i.text)};this._decorationLength+=i.text.length,s<this._hints.length-1&&(a.gapDecorationType=BQ(" | "),this._decorationLength+=fCt),this._keyHintDecorationTypes.push(a)})}_rightSpacerDecorationType;_keyHintDecorationTypes;_decorationLength=0;decorate(t){let r=Xs.window.activeTextEditor;if(!r||!GC.canDecorateEditor(r)||this._keyHintDecorationTypes.length===0)return;let n=Cg(r,t),i=r.document.lineAt(t).text.length,s=Math.max(cCt-i-this._decorationLength,uCt);r.setDecorations(this._rightSpacerDecorationType,[{range:n,renderOptions:{after:{margin:`0 0 0 ${s}ch`}}}]),this._keyHintDecorationTypes.forEach((o,a)=>{let l=G_(this._hints[a].keyBindingId,this._keybindingWatcher,this._context);o.keyBindingDecorationTypes.forEach((c,u)=>{l[u]&&r.setDecorations(c,[{range:n,renderOptions:l[u]}])}),r.setDecorations(o.textDecorationType,[{range:n}]),o.gapDecorationType&&r.setDecorations(o.gapDecorationType,[{range:n,renderOptions:{after:{margin:"0 0.65em 0 0.5em"}}}])})}clearDecorations(t){let r=t??Xs.window.activeTextEditor;r&&(r.setDecorations(this._rightSpacerDecorationType,[]),this._keyHintDecorationTypes.forEach(n=>{n.keyBindingDecorationTypes.forEach(i=>{r.setDecorations(i,[])}),r.setDecorations(n.textDecorationType,[]),n.gapDecorationType&&r.setDecorations(n.gapDecorationType,[])}))}},U8=class extends X{_provider;_range;enable(){this.registerHoverProvider(Xs.window.activeTextEditor),this.addDisposable(Xs.window.onDidChangeActiveTextEditor(t=>{this.registerHoverProvider(t)}))}setRange(t,r){if(t&&r){this._range=new Xs.Range(t,r);return}this._range=void 0}provideHover(t,r,n){if(this._range&&this._range.contains(r)){let i=`
$(augment-icon-simple)
&nbsp;
<a href="command:${$i.commandID}" title="Open Augment Chat">
    Open in Chat
</a> |
<a href="command:${ag.commandID}" title="Fix with Augment Chat">
    Fix
</a> |
<a href="command:${mC.commandID}" title="Explain with Augment Chat">
    Explain
</a> | <a href="command:${yC.commandID}" title="Write a test with Augment Chat">
    Write a Test
</a> | <a href="command:${CC.commandID}" title="Document with Augment Chat">
    Document
</a>
            `,s=new Xs.MarkdownString(i);return s.isTrusted=!0,s.supportHtml=!0,s.supportThemeIcons=!0,new Xs.Hover(s,this._range)}}registerHoverProvider(t){this._provider?.dispose(),this._provider=void 0,!(!t||!GC.canDecorateEditor(t))&&(this._provider=Xs.languages.registerHoverProvider({pattern:t.document.uri.fsPath},this))}};var Iwe=V(require("vscode"));var $Q=class{_logger=j("ResolveFileService");constructor(){}getOpenDocumentText(t){for(let r of Iwe.workspace.textDocuments)if(r.uri.fsPath===t&&r.uri.scheme==="file")return r.getText();return null}async resolveFile(t){let r=qe.from(t).absPath,n=this.getOpenDocumentText(r);if(n==null)try{n=await rn(r)}catch(i){this._logger.warn(`Could not read file: ${r}`,i),n=""}return n}register(t){t.registerHandler("read-file-request",async r=>({type:"read-file-response",data:{pathName:r.data.pathName,content:await this.resolveFile(r.data.pathName)}}))}};var YQ=class e{constructor(t){this.publish=t}static _lineLen=80;static _indent="    ";static _subIndent="  ";_content="";_disposed=!1;get content(){return this._content}addSection(t){let r=(this._content.length===0?"":`
`)+`================
`;this._addLine(r+t)}addObject(t){if(t===void 0)this.addLine(this.formatValue(t));else for(let r in t){let n=t[r];typeof n!="object"?this.addValue(r,n):this.addValue(r,JSON.stringify(n))}}formatValue(t){return t===void 0?"<undefined>":t===null?"<null>":typeof t=="string"?`"${t}"`:`${t}`}addLine(t){this._disposed||this._addLine(e._indent+t)}addText(t,r){if(this._disposed)return;let n=(this._content.length===0?"":`
`)+">>>>>>>>>>>>>>>> ";this._addLine(n+t),this._addLine(r,""),r.length>0&&r[r.length-1]!==`
`&&this._addLine("|<---- (ends here)"),this._addLine("<<<<<<<<<<<<<<<< "+t)}addError(t){if(e._indent.length+t.length<=e._lineLen){this._addLine(e._indent+t);return}let r=0,n=e._indent;for(;;){let i=t.indexOf(": ",r);if(i===-1){this._addLine(n+t.substring(r));break}this._addLine(n+t.substring(r,i+1)),r=i+2,n+=e._subIndent}}addValue(t,r){this._addLine(e._indent+t+": "+this.formatValue(r))}addStringValue(t,r,n=!0){this._addLine(e._indent+t+": "+(n?`"${r}"`:r))}_addLine(t,r=`
`){this._disposed||(this._content+=t+r)}savePoint(){return this._content.length}rollback(t){this._disposed||this._content.length>t&&(this._content=this._content.substring(0,t))}dispose(){this._disposed=!0,this._content=""}};var $C=V(require("vscode"));var zQ=V(require("vscode"));var KQ=class{constructor(t){this._baseState=t}_stateEventEmitter=new zQ.EventEmitter;_state={0:[],1:[],2:[],3:[]};onDidChangeState=this._stateEventEmitter.event;setState(t){this._state[t.priority].push(t);let r=!1;return zQ.Disposable.from({dispose:()=>{if(r)return;r=!0;let n=!1;this._state[t.priority]=this._state[t.priority].filter(i=>n?!0:(n=i===t,!n)),this._stateEventEmitter.fire()}})}getPriorityState(){for(let t of C8){let r=this._state[t];if(r.length>0)return r[r.length-1]}return this._baseState}reset(){for(let t of C8)this._state[t]=[];this._stateEventEmitter.fire()}};var hCt="Augment",JQ=class extends X{_statusBarItem;_stateManager=new KQ(E_e);_currentState;constructor(){super(),this.addDisposable(new $C.Disposable(()=>this.reset())),this._statusBarItem=$C.window.createStatusBarItem("vscode-augment.PrimaryStatusBarItem",$C.StatusBarAlignment.Right),this._statusBarItem.name="Augment",this._statusBarItem.command=BC.commandID,this.addDisposables(this._statusBarItem,this._stateManager.onDidChangeState(()=>this.updateState())),this.updateState(),this._statusBarItem.show()}updateState(){let t=this._stateManager.getPriorityState();if(t===this._currentState)return;this._currentState=t,this._statusBarItem.tooltip=t.tooltip,this._statusBarItem.backgroundColor=t.colors?.background,this._statusBarItem.color=t.colors?.foreground;let r=t.label?t.label:hCt;this._statusBarItem.text=`${t.icon} ${r}`}setState(t){let r=this._stateManager.setState(t);return this.updateState(),r}reset(){this._stateManager.reset()}};var YC=V(require("vscode"));var jQ=class extends ra{constructor(r,n,i,s,o,a,l,c,u,f,p=ss(i,f)){super("next-edit-suggestions.html",i);this._webviewView=n;this._suggestionManager=s;this._globalNextEdit=o;this._editorEditManager=a;this._nextEditSessionEventReporter=l;this._resolveFileService=c;this._nextEditVSCodeToWebviewMessage=u;this._asyncMsgHandler=p;this.loadHTML(r),this.addDisposable(this._asyncMsgHandler),this._resolveFileService.register(this._asyncMsgHandler),this.addDisposable(this._suggestionManager.onSuggestionsChanged(g=>{let A=h8([this._editorEditManager.state.suggestion].concat(g.newSuggestions).concat(this._suggestionManager.getJustAcceptedSuggestions())).filter(Q_(gi,wC));this.postMessage({type:"next-edit-suggestions-changed",data:{suggestions:A}}),n.badge={value:A.length,tooltip:"Next Edit Suggestions"}})),this.addDisposable(new YC.Disposable(this._editorEditManager.addStateListener((g,A)=>{if(g instanceof Vt||g instanceof Ir||g instanceof Sr){this.postMessage({type:"next-edit-preview-active",data:g.suggestion});return}if(A instanceof Vt||A instanceof Ir||A instanceof Sr){this.postMessage({type:"next-edit-dismiss"});return}if((g.suggestion?.equals(A.suggestion)??A.suggestion===void 0)&&!(g instanceof Vt)&&!(A instanceof Vt))return;let y=h8([this._editorEditManager.state.suggestion].concat(this._suggestionManager.getActiveSuggestions()).concat(this._suggestionManager.getJustAcceptedSuggestions())).filter(Q_(gi,wC));this.postMessage({type:"next-edit-suggestions-changed",data:{suggestions:y}}),this.postMessage({type:"next-edit-next-suggestion-changed",data:g.suggestion})}))),this.addDisposable(this._nextEditVSCodeToWebviewMessage.event(g=>{this.postMessage(g)})),this.addDisposable(this._webview.onDidReceiveMessage(this.onDidReceiveMessage)),n.badge={value:this._suggestionManager.getActiveSuggestions().filter(Q_(gi)).length,tooltip:"Next Edit Suggestions"},this._nextEditSessionEventReporter.reportEventWithoutIds("panel-created","unknown")}logger=j("NextEditSuggestionsPanel");wrapAsyncMsg(r,n,i=null){return this.postMessage({type:"async-wrapper",requestId:r.requestId,error:i,baseMsg:n})}postMessage=async r=>this._webview.postMessage(r);onDidReceiveMessage=async r=>{switch(r.type){case"next-edit-suggestions-action":if("accept"in r.data){await this._editorEditManager.acceptSuggestion(Ya.from(r.data.accept),"next-edit-panel-item-click",void 0,!0);return}if("reject"in r.data){this._editorEditManager.rejectSuggestion(Ya.from(r.data.reject),"next-edit-panel-item-click");return}if("undo"in r.data&&r.data.undo){this._editorEditManager.undoAcceptSuggestion(Ya.from(r.data.undo),"next-edit-panel-item-click");return}if("acceptAllInFile"in r.data){if(r.data.acceptAllInFile.length===0){YC.window.showInformationMessage("No Next Edits to accept.");return}this._editorEditManager.acceptAllSuggestionsInFile(r.data.acceptAllInFile[0].qualifiedPathName,"next-edit-panel-item-click");return}if("rejectAllInFile"in r.data){if(r.data.rejectAllInFile.length===0){YC.window.showInformationMessage("No Next Edits to reject.");return}this._editorEditManager.rejectAllSuggestionsInFile(r.data.rejectAllInFile[0].qualifiedPathName,"next-edit-panel-item-click");return}if("undoAllInFile"in r.data){if(r.data.undoAllInFile.length===0){YC.window.showInformationMessage("No Next Edits to undo.");return}this._editorEditManager.undoAllSuggestionsInFile(r.data.undoAllInFile[0].qualifiedPathName,"next-edit-panel-item-click");return}this.logger.error("Unknown action message: "+JSON.stringify(r));return;case"next-edit-dismiss":this._editorEditManager.dismiss("next-edit-panel-item-click",!0,!1);return;case"next-edit-loaded":this._nextEditSessionEventReporter.reportEventWithoutIds("panel-opened","unknown"),await this.postMessage({type:"next-edit-suggestions-changed",data:{suggestions:this._suggestionManager.getActiveSuggestions().concat(this._suggestionManager.getJustAcceptedSuggestions()).filter(Q_(gi,wC))}}),this.postMessage({type:"next-edit-next-suggestion-changed",data:this._editorEditManager.state.suggestion}),this._globalNextEdit.handleWorkspaceEditsAvailable();return;case"next-edit-open-suggestion":await this._editorEditManager.open(Ya.from(r.data),{shouldAutoApply:!1,preserveFocus:!0,eventSource:"next-edit-panel-item-click",animationDelayMs:0}),this._nextEditSessionEventReporter.reportEvent(r.data.requestId,r.data.result.suggestionId,Date.now(),"panel-suggestion-clicked","click");return;case"next-edit-refresh-started":await this._globalNextEdit.startGlobalQuery(),await this.postMessage({type:"next-edit-refresh-finished"});return;case"next-edit-cancel":this._globalNextEdit.cancel();return;case"next-edit-active-suggestion":this.postMessage({type:"next-edit-active-suggestion",data:r.data});return}};generateCSPPolicy(r){return Ou(Vu(this._webview),qu(),PF(sC()),Hu(),Wu(),r?UF(r):()=>{})}};var ZQ=class{constructor(t,r,n){this.storage=t;this.toolsModel=r;this.getSettingsMcpServers=n}logger=j("ToolConfigStore");async get(){try{return await this.storage.load("toolsConfiguration")??{version:m8,tools:[]}}catch(t){return this.logger.error(`Failed to load tool configurations: ${$e(t)}`),{version:m8,tools:[]}}}async save(t){try{await this.storage.save("toolsConfiguration",t)}catch(r){let n=`Failed to save tool configurations: ${$e(r)}`;throw this.logger.error(n),new ql(n)}}async getMCPServers(){try{let t=await this.storage.load("mcpServers");return Array.isArray(t)?t:[]}catch(t){return this.logger.error(`Failed to load MCP servers: ${$e(t)}`),[]}}async saveMCPServers(t){try{await this.storage.save("mcpServers",t),await this.updateSidecarMCPServers()}catch(r){let n=`Failed to save MCP servers: ${$e(r)}`;throw this.logger.error(n),new ql(n)}}async updateSidecarMCPServers(){try{let r=(await this.getMCPServers()).map(s=>({name:s.name,command:s.command,args:[],useShellInterpolation:!0})),n=this.getSettingsMcpServers?this.getSettingsMcpServers():[],i=[...r];n&&n.length>0&&i.push(...n),this.toolsModel&&this.toolsModel.setMcpServers(i)}catch(t){this.logger.error(`Failed to update sidecar MCP servers: ${$e(t)}`)}}};var Swe=V(require("vscode"));var XQ=class extends ra{_currentApp;constructor(t){super("main-panel.html",t),this.addDisposable(this._webview.onDidReceiveMessage(r=>this.onDidReceiveMessage(r)))}changeApp(t){this._currentApp=t,this._currentApp&&(this._currentApp.register(this._webview),Rc("vscode-augment.mainPanel.app",this._currentApp.appType())),this._postAppTypeMsg()}onDidReceiveMessage(t){switch(t.type){case"main-panel-loaded":this._postAppTypeMsg();break}}_postAppTypeMsg(){this._webview.postMessage({type:"main-panel-display-app",data:this._currentApp?.appType()})}};var eN=class extends X{constructor(r){super();this._extensionUri=r;this.addDisposable(this.visibilityEventEmitter)}_logger=j("MainPanelWebviewProvider");_webviewView=void 0;_mainPanelWebview=void 0;currentApp=void 0;visibilityEventEmitter=new Swe.EventEmitter;get onVisibilityChange(){return this.visibilityEventEmitter.event}isVisible(){return!!this._webviewView?.visible}changeApp(r){this.currentApp?.dispose(),r&&this.addDisposable(r),this._setViewTitle(r?.title()||""),this.currentApp=r,this._mainPanelWebview?.changeApp(r)}_setViewTitle(r){this._webviewView&&(this._webviewView.title=r)}async resolveWebviewView(r,n,i){r.onDidDispose(()=>{this._webviewView===r&&(this._logger.debug("Disposing of main panel webview view"),this._webviewView=void 0)}),this._webviewView=r,this._setViewTitle(this.currentApp?.title()||""),this._mainPanelWebview?.dispose(),this._mainPanelWebview=new XQ(this._webviewView.webview),this.addDisposable(this._mainPanelWebview),this._mainPanelWebview.changeApp(this.currentApp),this._mainPanelWebview.addDisposable(this._webviewView.onDidChangeVisibility(()=>{this.visibilityEventEmitter.fire(!!this._webviewView?.visible)})),await this._mainPanelWebview.loadHTML(this._extensionUri)}};var tN=class extends X{constructor(r,n,i){super();this._config=r;this._featureFlagsManager=n;this.onWebviewCreated=i;this.maybeRegisterWebview()}webviewView=void 0;nextEditWebview=void 0;maybeRegisterWebview=()=>{!this.webviewView||!Ul(this._config.config,this._featureFlagsManager.currentFlags.vscodeNextEditMinVersion)||(this.nextEditWebview?.dispose(),this.nextEditWebview=this.onWebviewCreated(this.webviewView),this.addDisposable(this.nextEditWebview))};resolveWebviewView(r,n,i){this.webviewView=r,this.maybeRegisterWebview()}};var O8=class extends Error{constructor(){super("SingletonExecutor has been disposed")}},nd=class e extends X{constructor(r){super();this._execute=r;this.addDisposable({dispose:()=>this._stopping=!0})}static _disposedError=new O8;_nextExecutionScheduled=!1;_kickPromise=Promise.resolve();_stopping=!1;kick(){return this._nextExecutionScheduled?this._kickPromise:(this._nextExecutionScheduled=!0,this._kickPromise=this._kickPromise.then(async()=>(this._nextExecutionScheduled=!1,this._stopping?Promise.reject(e._disposedError):this._execute())),this._kickPromise)}};var rN=class e{constructor(t){this._workspaceStorage=t;this._persistedFolders=this._readFolders(),this._toPersist=new Map(this._persistedFolders),this._persister=new nd(async()=>await this._persistFolders())}static storageKey="external-source-folders:original";_persistedFolders;_toPersist;_persister;getFolders(){return new Map(this._persistedFolders)}async setFolders(t){Bwe(this._persistedFolders,t)||(this._toPersist=new Map(t),await this._persister.kick())}async _persistFolders(){if(Bwe(this._persistedFolders,this._toPersist))return;let t=new Map(this._toPersist),r=new Array;for(let[n,i]of t)r.push({folderRoot:n,folderName:i});await this._workspaceStorage.update(e.storageKey,r),this._persistedFolders=t}_readFolders(){let t=this._workspaceStorage.get(e.storageKey);if(t===void 0)return new Map;if(!Array.isArray(t))return new Map;let r=new Map;for(let n of t)n.folderRoot===void 0||typeof n.folderRoot!="string"||n.folderName===void 0||typeof n.folderName!="string"||r.set(n.folderRoot,n.folderName);return r}};function Bwe(e,t){if(e.size!==t.size)return!1;for(let[r,n]of e)if(t.get(r)!==n)return!1;return!0}var Dwe=V(require("vscode"));var nN=class extends X{constructor(r,n){super();this._globalState=r;this._syncingStatus=n;this.loadWorkspaceMessageState(),this.addDisposable(this._syncingStatus.onDidChangeSyncingStatus(i=>this._handleSyncingProgress()))}_workspaceMessageState=new Map;_shouldShowSummary=!1;shouldShowSummaryEmitter=new Dwe.EventEmitter;get shouldShowSummary(){return this._shouldShowSummary}get onShouldShowSummary(){return this.shouldShowSummaryEmitter.event}setShouldShowSummary(r){this._shouldShowSummary=r}async _handleSyncingProgress(){let r=this._syncingStatus.status;r.foldersProgress.length!==0&&await this.handleShowingSummaryMsg(r)}async handleShowingSummaryMsg(r){if(!(r.status!=="done"||r.foldersProgress.every(s=>s.progress?.trackedFiles===void 0||s.progress.trackedFiles===0)||r.foldersProgress.find(s=>this._workspaceMessageState.get(s.folderRoot)?.workspaceSummary)||!r.foldersProgress.find(s=>s.progress?.newlyTracked))){this.showSummaryMessage();for(let s of r.foldersProgress)this._workspaceMessageState.set(s.folderRoot,{folderRoot:s.folderRoot,workspaceSummary:!0});await this.saveWorkspaceMessageState()}}showSummaryMessage(){this._shouldShowSummary=!0,this.shouldShowSummaryEmitter.fire(!0)}async saveWorkspaceMessageState(){await this._globalState.update("workspaceMessageStates",Array.from(this._workspaceMessageState.values()))}loadWorkspaceMessageState(){let r=this._globalState.get("workspaceMessageStates");r&&(this._workspaceMessageState=new Map(r.map(n=>[n.folderRoot,n])))}dispose(){this.shouldShowSummaryEmitter.dispose()}};var sN=V(require("vscode"));var iN=class extends X{constructor(r,n){super();this._statusBar=r;this.addDisposables(n(i=>this._handleSyncingStatusChanged(i)),new sN.Disposable(()=>{this._syncingStatusBarDisposable?.dispose(),this._syncingStatusBarDisposable=void 0}))}static syncingMessage="Augment is synchronizing with your codebase to make better suggestions. The first time typically takes a few minutes.";_syncingStatusBarDisposable;_syncingNotificationShown=!1;_handleSyncingStatusChanged(r){switch(r.status){case"longRunning":this._syncingNotificationShown||r.foldersProgress.find(i=>i.progress?.newlyTracked)&&(this._syncingNotificationShown=!0,sN.commands.executeCommand($i.commandID));case"running":this._syncingStatusBarDisposable||(this._syncingStatusBarDisposable=this._statusBar.setState(__e));break;case"done":this._syncingNotificationShown=!1,this._syncingStatusBarDisposable?.dispose(),this._syncingStatusBarDisposable=void 0;break}}};var oN=class extends X{constructor(r,n){super();this._statusBarManager=r;this._syncingEnabledTracker=n;this.addDisposable(this._syncingEnabledTracker.onDidChangeSyncingEnabled(s=>this._updateSyncingState(s==="enabled")));let i=this._syncingEnabledTracker.syncingEnabledState;i!=="initializing"&&this._updateSyncingState(i==="enabled")}_syncingDisabledDisp=void 0;_updateSyncingState(r){r?(this._syncingDisabledDisp?.dispose(),this._syncingDisabledDisp=void 0):this._syncingDisabledDisp||(this._syncingDisabledDisp=this._statusBarManager.setState(U_e))}};var lN=V(require("vscode"));var aN=class extends X{_workspaceManager=void 0;_syncingEnabledChangedEmitter=new lN.EventEmitter;_publishStateExecutor;constructor(){super(),this._publishStateExecutor=new nd(async()=>{await this._publishSyncingState()})}get syncingEnabledState(){return this._workspaceManager?this._workspaceManager.syncingEnabledState:"initializing"}get onDidChangeSyncingEnabled(){return this._syncingEnabledChangedEmitter.event}enableSyncing(){if(this.syncingEnabledState==="initializing")throw new Error("Syncing enabled state not initialized");this.syncingEnabledState!=="enabled"&&this._workspaceManager.enableSyncing()}disableSyncing(){if(this.syncingEnabledState==="initializing")throw new Error("Syncing enabled state not initialized");this.syncingEnabledState!=="disabled"&&this._workspaceManager.disableSyncing()}set workspaceManager(t){this._workspaceManager=t,this.addDisposable(this._workspaceManager.onDidChangeSyncingState(r=>void this._publishStateExecutor.kick()))}async _publishSyncingState(){await lN.commands.executeCommand("setContext","vscode-augment.syncingEnabledState",this.syncingEnabledState),this._syncingEnabledChangedEmitter.fire(this.syncingEnabledState)}};var cN=class e extends X{constructor(r){super();this._workspaceStorage=r;this._currentPermission=this._getStoredPermission(),this._persister=new nd(async()=>await this._persistCurrentPermission()),this._logPermission("Initial syncing permission",this._currentPermission)}static storageKey="syncingPermission.2024102300";_currentPermission;_persister;_logger=j("SyncingPermissionTracker");get syncingPermissionDenied(){return this._currentPermission?.state===1}getFolderSyncingPermission(r){let n=this._currentPermission;if(n===void 0)return this._logger.info(`Permission to sync folder ${r} unknown: no permission information recorded`),"unknown";if(n.state===1){let i=new Date(n.timestamp).toLocaleString();return this._logger.info(`Permission to sync folder ${r} denied at ${i}`),"denied"}for(let i of n.permittedFolders)if(r===i.sourceFolder){let s=new Date(i.timestamp).toLocaleString();return this._logger.info(`Permission to sync folder ${r} granted at ${s}; type = ${i.type}`),"granted"}return this._logger.info(`Permission to sync folder ${r} unknown: no current permission for folder`),"unknown"}setDefaultPermissions(r){if(this._currentPermission!==void 0||r.length===0)return;let n=Date.now();this._setSyncingPermission({state:0,permittedFolders:r.map(i=>({sourceFolder:i,type:"implicit",timestamp:n}))})}setPermittedFolders(r){let n=Date.now();this._setSyncingPermission({state:0,permittedFolders:r.map(i=>({sourceFolder:i,type:"explicit",timestamp:n}))})}addPermittedFolder(r){let n=this._currentPermission;(n===void 0||n.state===1)&&(n={state:0,permittedFolders:[]});let i={sourceFolder:r,type:"explicit",timestamp:Date.now()};this._setSyncingPermission({...n,permittedFolders:[...n.permittedFolders,i]})}addImplicitlyPermittedFolder(r){let n=this._currentPermission;if(n?.state===1)return;if(n===void 0)n={state:0,permittedFolders:[]};else if(n.permittedFolders.find(o=>o.sourceFolder===r)!==void 0)return;let i={sourceFolder:r,type:"implicit",timestamp:Date.now()};this._setSyncingPermission({...n,permittedFolders:[...n.permittedFolders,i]})}dropPermission(r){if(r.length===0||this._currentPermission===void 0||this._currentPermission.state===1)return;let n=this._currentPermission.permittedFolders.filter(i=>!r.includes(i.sourceFolder));this._setSyncingPermission({...this._currentPermission,permittedFolders:n})}dropStaleFolders(r){if(this._currentPermission===void 0||this._currentPermission.state===1)return;let n=this._currentPermission.permittedFolders.filter(i=>r.includes(i.sourceFolder));this._setSyncingPermission({...this._currentPermission,permittedFolders:n})}denyPermission(){this._setSyncingPermission({state:1,timestamp:Date.now()})}_getStoredPermission(){return this._workspaceStorage.get(e.storageKey)}_setSyncingPermission(r){this._currentPermission=r,this._logPermission("Updating syncing permission",r),this._persister.kick()}async persistCurrentPermission(){await this._persister.kick()}async _persistCurrentPermission(){await this._workspaceStorage.update(e.storageKey,this._currentPermission)}_logPermission(r,n){if(n===void 0){this._logger.info(`${r}: undefined`);return}if(n.state===1){let s=new Date(n.timestamp).toLocaleString();this._logger.info(`${r}: syncing permission denied for workspace at ${s}`);return}let i=n.permittedFolders.length===0?"none":n.permittedFolders.map(s=>{let o=new Date(s.timestamp).toLocaleString();return`
    ${s.sourceFolder} (${s.type}) at ${o}`}).join("");this._logger.info(`${r}: syncing permission granted for workspace. Folders:${i}`)}};var Twe=V(require("vscode"));var uN=class extends X{constructor(r,n){super();this._featureFlagManager=r;this._workspaceManager=n;this.addDisposable(this._workspaceManager.onDidChangeSourceFolders(()=>this._handleSourceFoldersChanged())),this.addDisposable(this._workspaceManager.onDidChangeSyncingProgress(i=>this._handleSyncingProgressChanged(i))),this._handleSourceFoldersChanged()}_newFolders=new Set;_folderBacklogSize=new Map;_folderTrackedFilesSize=new Map;_syncingStatusEmitter=new Twe.EventEmitter;_status={status:"done",foldersProgress:[]};get status(){return this._status}get onDidChangeSyncingStatus(){return this._syncingStatusEmitter.event}_handleSourceFoldersChanged(){this._newFolders.clear(),this._folderBacklogSize.clear(),this._folderTrackedFilesSize.clear(),this._workspaceManager.getSyncingProgress().forEach(r=>this._updateFolderState(r)),this._reportSyncingStatus()}_handleSyncingProgressChanged(r){this._updateFolderState(r),this._reportSyncingStatus()}_updateFolderState(r){r.progress!==void 0&&(r.progress.newlyTracked?this._newFolders.add(r.folderRoot):this._newFolders.delete(r.folderRoot),this._folderBacklogSize.set(r.folderRoot,r.progress.backlogSize),this._folderTrackedFilesSize.set(r.folderRoot,r.progress.trackedFiles))}_reportSyncingStatus(){let r=!1,n=0,i=0,s=this._featureFlagManager.currentFlags;this._folderBacklogSize.forEach((a,l)=>{a>=s.bigSyncThreshold&&(r=!0),n+=a}),this._folderTrackedFilesSize.forEach((a,l)=>{i+=a});let o="done";r?o="longRunning":(n>s.smallSyncThreshold||n/i>=.1)&&(o="running"),this._status={status:o,foldersProgress:this._workspaceManager.getSyncingProgress()},this._syncingStatusEmitter.fire(this._status)}};var $l=V(vs()),wt=V(require("vscode"));var q8=class{async read(t){try{return await Qk(t)}catch{return}}stat(t){try{return ef(t)}catch{return}}};function Rwe(){return new q8}var pCt="file-edit-events.json",dN=class{save(t){return Promise.resolve()}load(){return Promise.resolve([])}clear(){}},fN=class{_logger=j("FileEditEventsStore");_version="1";_storeFile;constructor(t){this._logger.debug(`Using [${t.directory}] to store events`),this._storeFile=zt(t.directory,pCt)}save(t){this._logger.debug(`Saving ${t.length} events to ${this._storeFile}`),Wme(this._storeFile,JSON.stringify({version:this._version,events:t}))}async load(){this._logger.debug(`Loading events from ${this._storeFile}`);try{if(!dn(this._storeFile))return this._logger.debug(`File ${this._storeFile} does not exist. Not loading events.`),[];let t=await rn(this._storeFile),r=JSON.parse(t);return r.version!==this._version?(this._logger.debug(`Version mismatch: ${r.version} !== ${this._version}. Not loading events from ${this._storeFile}`),[]):(this._logger.debug(`Loaded ${r.events.length} events from ${this._storeFile}`),r.events)}catch(t){return this._logger.debug(`Failed to load events from ${this._storeFile}`,t),[]}}clear(){this.save([])}};function kwe(e,t){let r=Math.min(e.length,t.length),n=1024,i=0;for(;i<r;){let s=e.slice(i,i+n),o=t.slice(i,i+n);if(s!==o)break;if(s.length===0)throw new Error(`unexpected empty block: s1=${e}, s2=${t}`);i+=s.length}for(;i<r&&e[i]===t[i];)i++;return i}function Fwe(e,t){let r=Math.min(e.length,t.length),n=1024,i=0;for(;i<r;){let a=e.slice(Math.max(0,e.length-i-n),e.length-i),l=t.slice(Math.max(0,t.length-i-n),t.length-i);if(a!==l)break;if(a.length===0)throw new Error(`unexpected empty block: s1=${e}, s2=${t}`);i+=a.length}let s=e.length-1,o=t.length-1;for(;i<r&&e[s-i]===t[o-i];)i++;return i}var Wl=class e{beforeStart;afterStart;beforeText;afterText;constructor(t){this.beforeStart=t.beforeStart,this.afterStart=t.afterStart,this.beforeText=t.beforeText,this.afterText=t.afterText}static from(t){return new e({beforeStart:t.beforeStart??0,afterStart:t.afterStart??0,beforeText:t.beforeText??"",afterText:t.afterText??""})}get beforeEnd(){return this.beforeStart+this.beforeText.length}get afterEnd(){return this.afterStart+this.afterText.length}get beforeCRange(){return new Bo(this.beforeStart,this.beforeEnd)}get afterCRange(){return new Bo(this.afterStart,this.afterEnd)}toString(){return`SingleEdit{before=${this.beforeStart}:${this.beforeEnd}, after=${this.afterStart}:${this.afterEnd}, beforeText=${JSON.stringify(this.beforeText)}, afterText=${JSON.stringify(this.afterText)}}`}mergeNext(t){if(t.afterText===""&&t.beforeStart>=this.afterStart&&t.beforeEnd<=this.afterEnd){let r=this.afterText.slice(0,t.beforeStart-this.afterStart)+this.afterText.slice(t.beforeEnd-this.afterStart);return new e({beforeStart:this.beforeStart,afterStart:this.afterStart,beforeText:this.beforeText,afterText:r})}else{if(this.afterEnd===t.beforeStart)return new e({beforeStart:this.beforeStart,afterStart:this.afterStart,beforeText:this.beforeText+t.beforeText,afterText:this.afterText+t.afterText});if(t.beforeEnd===this.afterStart)return new e({beforeStart:t.beforeStart,afterStart:t.afterStart,beforeText:t.beforeText+this.beforeText,afterText:t.afterText+this.afterText})}}normalize(){let t=this.beforeStart,r=this.afterStart,n=this.beforeText,i=this.afterText,s=kwe(n,i);s>0&&(t+=s,r+=s,n=n.slice(s),i=i.slice(s));let o=Fwe(n,i);return o>0&&(n=n.slice(0,-o),i=i.slice(0,-o)),new e({beforeStart:t,afterStart:r,beforeText:n,afterText:i})}};var Eg=class e{path;beforeBlobName;afterBlobName;edits;constructor(t){this.path=t.path,this.beforeBlobName=t.beforeBlobName,this.afterBlobName=t.afterBlobName,this.edits=t.edits}static from(t){return new e({path:t.path??"",beforeBlobName:t.beforeBlobName??"",afterBlobName:t.afterBlobName??"",edits:t.edits?.map(n=>Wl.from(n))??[]})}changedChars(){return this.edits.reduce((t,r)=>t+r.beforeText.length+r.afterText.length,0)}isRepeatedChange(){if(this.edits.length<=1)return!0;let t=this.edits[0];return this.edits.every(r=>r.beforeText===t.beforeText&&r.afterText===t.afterText)}mergeNext(t){if(this.edits.length!==t.edits.length||this.path!==t.path||!t.isRepeatedChange())return;let r=[],n=0,i=0;for(let s=0;s<this.edits.length;s++){let o=this.edits[s],a=o.mergeNext(t.edits[s]);if(a===void 0)return;r.push(new Wl({beforeStart:a.beforeStart+n,afterStart:a.afterStart+i,beforeText:a.beforeText,afterText:a.afterText})),n+=a.beforeText.length-o.beforeText.length,i+=a.afterText.length-o.afterText.length}if(r.length>=2){let s=r.map(a=>a.beforeCRange);if(Bo.anyOverlaps(s))return;let o=r.map(a=>a.afterCRange);if(Bo.anyOverlaps(o))return}return new e({path:this.path,beforeBlobName:this.beforeBlobName,afterBlobName:t.afterBlobName,edits:r}).normalize()}normalize(){let t=this.edits.map(r=>r.normalize()).filter(r=>r.beforeText!==r.afterText).sort((r,n)=>r.beforeStart-n.beforeStart);return new e({path:this.path,beforeBlobName:this.beforeBlobName,afterBlobName:this.afterBlobName,edits:t})}hasChange(){return this.edits.some(t=>t.beforeText!==t.afterText)}};var Qwe=V(V8());var J_=class{_events=new Qwe.default;_queueSizeChars=0;constructor(){}add(t){return this._events.push(t),this._updateState(t,"ADDED")}_updateState(t,r){return t===void 0?0:(r==="ADDED"?this._queueSizeChars+=t.changedChars()??0:this._queueSizeChars-=t.changedChars()??0,t.changedChars()??0)}removeOld(){let t=this._events.shift();return this._updateState(t,"REMOVED"),t}removeNew(){let t=this._events.pop();return this._updateState(t,"REMOVED"),t}newest(){if(this._events.length!==0)return this.at(this._events.length-1)}asArray(){return this._events.toArray()}get numEvents(){return this._events.length}get sizeChars(){return this._queueSizeChars}at(t){return this._events.get(t)}removeAt(t){let r=this._events.get(t);this._updateState(r,"REMOVED"),this._events.removeOne(t)}clear(){this._events.clear(),this._queueSizeChars=0}};var NA=class{constructor(t,r=new J_){this.maxQueueSizeChars=t;this._queue=r}addEvent(t,r){let n=this._queue.newest(),i=n?.afterBlobName===r,s=0,o=i?void 0:n?.mergeNext(t);if(o!==void 0){let a=this._queue.removeNew();s-=a?.changedChars()??0,o.hasChange()&&(s+=this._queue.add(o))}else s+=this._queue.add(t);for(;this._queue.sizeChars>this.maxQueueSizeChars;)this._queue.removeOld();return s}removeEventsForFile(t){for(let r=this._queue.numEvents-1;r>=0;r--){let n=this._queue.at(r);n!==void 0&&n.path===t&&this._queue.removeAt(r)}}removeEventsPriorToBlob(t){let r=null;for(let n=this._queue.numEvents-1;n>=0;n--){let i=this._queue.at(n);if(!r&&i?.beforeBlobName===t){r=i.path;continue}r&&i?.path===r&&this._queue.removeAt(n)}}updatePath(t,r){for(let n=0;n<this._queue.numEvents;n++){let i=this._queue.at(n);i!==void 0&&i.path===t&&(i.path=r)}}getEvents(){return this._queue.asArray()}clear(){this._queue.clear()}};var H8=["file".toString(),"untitled".toString()];var j_=class extends X{constructor(r,n,i,s,o=5e3){super();this._folderName=r;this._blobNameCalculator=n;this._maxBlobSizeBytes=i;this._store=s;this.maxEventCharsToReturn=o;this._logger=j(`FileEditEventsWatcher[${this._folderName}]`),this._eventsQueue=new NA(this.maxEventCharsToReturn*2)}_eventsQueue;_lastKnownText=new Map;_lastEventTimestamp=0;_logger;_swapLastKnownText(r,n){if(!this._lastKnownText.has(r))throw new Error(`no known text for [${r}]`);let i=this._lastKnownText.get(r);return this._lastKnownText.set(r,n),i}_vscodeEventToFileEditEvent(r,n){let i=n.document.getText(),s=this._swapLastKnownText(r,i),o=n.contentChanges.map(a=>new Wl({beforeStart:a.rangeOffset,afterStart:a.rangeOffset,beforeText:s.substring(a.rangeOffset,a.rangeOffset+a.rangeLength),afterText:a.text}));if(o.length>1){o.sort((l,c)=>l.beforeStart-c.beforeStart);let a=0;o=o.map(l=>{let c=l.afterStart+a;return a+=l.afterText.length-l.beforeText.length,new Wl({beforeStart:l.beforeStart,afterStart:c,beforeText:l.beforeText,afterText:l.afterText})})}return new Eg({path:r,edits:o,beforeBlobName:this._blobNameCalculator.calculateNoThrow(r,s),afterBlobName:this._blobNameCalculator.calculateNoThrow(r,i)}).normalize()}handleChangedDocument(r){let n=r.relPath,i=r.event;if(!H8.includes(i.document.uri.scheme))return;if(i.document.getText().length>this._maxBlobSizeBytes){this._logger.debug(`Ignoring event for ${n} because it is too large`);return}if(!this._lastKnownText.has(n)){this._logger.debug(i.contentChanges.length>0?`Last known text is not for the same file. Missing last known text for [${n}].  This is ok if we have recently cleared.`:`Updating last known text for ${n} - based on empty event`),this._lastKnownText.set(n,i.document.getText());return}if(i.contentChanges.length===0){this._logger.verbose(`Ignoring event for ${n} - no content changes`);return}let s=this._vscodeEventToFileEditEvent(n,i);s.hasChange()&&(this._eventsQueue.addEvent(s),this._lastEventTimestamp=Date.now())}get lastEventTimestamp(){return this._lastEventTimestamp}handleOpenedDocument(r){if(H8.includes(r.document.uri.scheme)){if(r.document.getText().length>this._maxBlobSizeBytes){this._logger.debug(`Ignoring event for ${r.relPath} because it is too large`);return}this._logger.debug(`Adding last known text for ${r.relPath}. size before = ${this._lastKnownText.size}`),this._lastKnownText.set(r.relPath,r.document.getText())}}handleClosedDocument(r){this._logger.debug(`Removing last known text for ${r.relPath}. size before = ${this._lastKnownText.size}`),this._lastKnownText.delete(r.relPath)}getEvents(){let r=[],n=0,i=this._eventsQueue.getEvents();for(let s=i.length-1;s>=0;s--){let o=i[s];if(n+o.changedChars()>this.maxEventCharsToReturn)break;r.push(o),n+=o.changedChars()}return r.reverse(),r}handleFileDeleted(r){this._logger.debug(`Deleting events for ${r.relPath}`),this._lastKnownText.delete(r.relPath),this._eventsQueue.removeEventsForFile(r.relPath)}_handleFileWillRename(r,n){this._logger.debug(`Renaming events for file [${r}] to [${n}]`),this._lastKnownText.has(r)&&(this._lastKnownText.set(n,this._lastKnownText.get(r)),this._lastKnownText.delete(r)),this._eventsQueue.updatePath(r,n)}handleFileWillRename(r){if(this._logger.debug(`Renaming events for file/folder [${r.oldRelPath}] to [${r.newRelPath}]`),r.type==="File")this._handleFileWillRename(r.oldRelPath,r.newRelPath);else if(r.type==="Directory"){for(let n of this._lastKnownText.keys())if(ks(r.oldRelPath,n)){let i=r.newRelPath+n.slice(r.oldRelPath.length);this._handleFileWillRename(n,i)}}}clear(r){this._eventsQueue.clear(),r.clearLastKnown&&this._lastKnownText.clear(),this._lastEventTimestamp=0,this._store.clear()}async loadEvents(){(await this._store.load()).forEach(n=>this._eventsQueue.addEvent(Eg.from(n)))}dispose(){super.dispose(),this._store.save(this._eventsQueue.getEvents()),this._logger.debug("Disposing FileEditEventsWatcher")}};var Z_=class extends X{constructor(r,n,i,s,o,a,l,c,u=5e3){super();this._blobNameCalculator=r;this._maxBlobSizeBytes=n;this._onFolderTextDocumentChanged=i;this._onFolderTextDocumentOpened=s;this._onFolderTextDocumentClosed=o;this._onFolderFileDeleted=a;this._onFolderFileWillRename=l;this._debugFeaturesEnabled=c;this._maxEventCharsToReturn=u}_watcher=new Map;_logger=j("FileEditManager");listenToEvents(){this._logger.debug("Listening to events"),this.addDisposable(this._onFolderTextDocumentChanged(r=>this._handleTextDocumentChanged(r))),this.addDisposable(this._onFolderTextDocumentOpened(r=>this._handleTextDocumentOpened(r))),this.addDisposable(this._onFolderTextDocumentClosed(r=>this._handleTextDocumentClosed(r))),this.addDisposable(this._onFolderFileDeleted(r=>this._handleFileDeleted(r))),this.addDisposable(this._onFolderFileWillRename(r=>this._handleFileWillRename(r))),this.addDisposable(IQ(r=>{this._logger.debug(`Stash changed for repo ${r.repoId}`),this._watcher.get(r.repoId)?.clear({clearLastKnown:!0})})),this.addDisposable(FA(r=>{this._logger.debug(`Head changed for repo ${r.repoId}`),this._watcher.get(r.repoId)?.clear({clearLastKnown:!0})}))}_handleTextDocumentChanged(r){let n=this._watcher.get(r.folderId);n&&n.handleChangedDocument(r)}_handleTextDocumentOpened(r){let n=this._watcher.get(r.folderId);n&&n.handleOpenedDocument(r)}_handleTextDocumentClosed(r){let n=this._watcher.get(r.folderId);n&&n.handleClosedDocument(r)}_handleFileDeleted(r){let n=this._watcher.get(r.folderId);n&&n.handleFileDeleted(r)}_handleFileWillRename(r){let n=this._watcher.get(r.folderId);n&&n.handleFileWillRename(r)}findFolderIdWithMostRecentChanges(){let r,n=-1,i=-1;for(let[s,o]of this._watcher)o.lastEventTimestamp>n&&(r=o,n=o.lastEventTimestamp,i=s);return r===void 0?-1:i}findEventsForFolder(r){let n=this._watcher.get(r);return n===void 0?[]:n.getEvents()}addInitialDocument(r){this._handleTextDocumentOpened(r)}startTracking(r,n,i){this._logger.debug(`Tracking folder ${r} with store at ${i.directory}`);let s=new j_(n,this._blobNameCalculator,this._maxBlobSizeBytes,this._debugFeaturesEnabled?new fN(i):new dN,this._maxEventCharsToReturn);return this._watcher.set(r,s),s.loadEvents(),s}clearAll(r){this._watcher.forEach(n=>n.clear(r))}dispose(){super.dispose(),this._logger.debug("Disposing FileEditManager"),this._watcher.forEach(r=>r.dispose())}};var ew=V(require("vscode")),X8=V(Gwe());var X_=class{accepted=!0},bg=class{accepted=!1};var xg=class extends X_{explicit=!1;format(){return"Tracked"}},z8=class extends X_{constructor(r){super();this.ignoreSourceName=r}explicit=!0;format(){return`Tracked (${this.ignoreSourceName})`}},J8=class extends bg{constructor(r){super();this.ignoreSourceName=r}explicit=!0;format(){return`Not tracked (${this.ignoreSourceName})`}},gN=class{constructor(t,r,n,i){this.dirName=t;this.ignoreSource=r;this.rules=n;this.next=i}},j8=class e{constructor(t,r,n){this._rootUri=t;this._ignoreSource=r;this._top=n}static async buildNew(t,r,n){let i=new Array;if(tf(n,r)!==""){let o=r;for(;;){o=Ux(o);let a=tf(n,o),l=await t.getRules(o);if(l&&i.push([a,t,l]),a==="")break}}let s;for(let o=i.length-1;o>=0;o--){let[a,l,c]=i[o];s=new gN(a,l,c,s)}return new e(n,t,s)}async buildAtop(t,r){let n=await this._ignoreSource.getRules(t,r);if(n===void 0)return this;let i=tf(this._rootUri,t),s=new gN(i,this._ignoreSource,n,this._top);return new e(this._rootUri,this._ignoreSource,s)}getPathInfo(t){for(let r=this._top;r!==void 0;r=r.next){if(!ks(r.dirName,t))throw new Error(`candidatePath "${t}" is not below ignore file's parent "${r.dirName}"`);let n=t.slice(r.dirName.length),i=r.rules.test(n);if(i.ignored)return new J8(r.ignoreSource.getName(ew.Uri.joinPath(this._rootUri,r.dirName)));if(i.unignored)return new z8(r.ignoreSource.getName(ew.Uri.joinPath(this._rootUri,r.dirName)))}return new xg}},Z8=class e{constructor(t,r){this._ignoreSources=t;this._ignoreStacks=r}static async buildNew(t,r,n){let i=new Array;for(let s of t){let o=await j8.buildNew(s,r,n);i.push(o)}return new e(t,i)}async buildAtop(t,r){let n=new Array,i=0;for(let s=0;s<this._ignoreStacks.length;s++){let o=this._ignoreStacks[s],a=await o.buildAtop(t,r);a!==o&&i++,n.push(a)}return i===0?this:new e(this._ignoreSources,n)}getPathInfo(t){for(let r=this._ignoreStacks.length-1;r>=0;r--){let i=this._ignoreStacks[r].getPathInfo(t);if(i.explicit)return i}return new xg}};async function FCt(e,t){let r=ew.Uri.joinPath(e,t);try{let n=await rn(r.fsPath),i=(0,X8.default)({ignorecase:!1});return i.add(n),i}catch{}}var KC=class{constructor(t=[]){this._ignoreSources=t}async build(t,r){return await Z8.buildNew(this._ignoreSources,t,r)}},tw=class{constructor(t){this.filename=t}getName(t){return mQ(ew.Uri.joinPath(t,this.filename))}async getRules(t,r){if(!(r!==void 0&&!(r.find(([i,s])=>s==="File"&&this.filename===i)!==void 0)))return FCt(t,this.filename)}},pN=class{constructor(t){this._sourceFolderRootPath=t}getName(){return"default Augment rules"}getRules(t){return new Promise(r=>{if(hs(t)!==this._sourceFolderRootPath)r(void 0);else{let n=(0,X8.default)({ignorecase:!1});n.add([".git","*.pem","*.key","*.pfx","*.p12","*.jks","*.keystore","*.pkcs12","*.crt","*.cer","id_rsa","id_ed25519","id_ecdsa","id_dsa",".augment-guidelines",".env"]),r(n)}})}};var AN=class{constructor(t){this.name=t}start=Date.now();increments=[];charge(t){this.increments.push({name:t,end:Date.now()})}*[Symbol.iterator](){let t=this.start;for(let{name:r,end:n}of this.increments)yield[r,n-t],t=n;yield["total",t-this.start]}format(){return(this.name?`${this.name}:
`:"")+Array.from(this).map(([r,n])=>`  - ${r}: ${n} ms`).join(`
`)}},mN=class{_value=0;_add(t=1){this._value+=t}_invalidate(){this._value=Number.NaN}get value(){return this._value}},e6=class extends mN{increment(t=1){this._add(t)}},t6=class extends mN{_start=void 0;start(){this._start=Date.now()}stop(){this._start===void 0?this._invalidate():this._add(Date.now()-this._start)}},zC=class{constructor(t){this.name=t}counters=new Map;timings=new Map;counterMetric(t){let r=this.counters.get(t);return r===void 0&&(r=new e6,this.counters.set(t,r)),r}timingMetric(t){let r=this.timings.get(t);return r===void 0&&(r=new t6,this.timings.set(t,r)),r}format(){let t=this.name?`${this.name}:`:"",r=Array.from(this.counters.entries()).map(([s,o])=>`  - ${s}: ${o.value}`).join(`
`),n="  - timing stats:",i=Array.from(this.timings.entries()).map(([s,o])=>`    - ${s}: ${o.value} ms`).join(`
`);return t+`
`+r+`
`+n+`
`+i}};var $we=V(require("os"));function Ywe(e){let t=$we.default.homedir();return Oy(e,t)}var rw=V(require("path")),s6=V(require("vscode"));async function CN(e,t,r,n){let i=await r.build(e,t),s=new Map;s.set("",i),s.set(".",i);let o=200,a=Date.now(),l=[];l.push([e,i]);let c;for(;(c=l.pop())!==void 0;){Date.now()-a>=o&&(await new Promise(C=>setTimeout(C,0)),a=Date.now());let[f,p]=c,g=tf(t,f),A=Px(f.fsPath),y=await p.buildAtop(f,A);y!==p&&s.set(g,y);for(let[C,v]of A){if(Date.now()-a>=o&&(await new Promise(Q=>setTimeout(Q,0)),a=Date.now()),C==="."||C===".."||v!=="Directory")continue;let w=s6.Uri.joinPath(f,C),B=zt(g,C,!0);y.getPathInfo(B).accepted&&l.push([w,y])}}return new n6(s,n)}var JC=class{constructor(t,r,n,i){this._name=t;this._startUri=r;this._rootUri=n;this._pathFilter=i;if(!rw.isAbsolute(r.fsPath))throw new Error(`PathIterator[${this._name}]: startUri ${this._name} must contain an absolute pathname`);if(!rw.isAbsolute(n.fsPath))throw new Error(`PathIterator[${this._name}]: rootUri ${n.toString()} must contain an absolute pathname`);if(!ks(hs(n),hs(r)))throw new Error(`PathIterator[${this._name}]: startUri ${hs(this._startUri)} must be inside rootUri ${hs(this._rootUri)}`);this._logger.verbose(`Created PathIterator for startUri ${this._startUri.fsPath}, rootUri ${this._rootUri.fsPath}`)}stats=new zC("Path metrics");_logger=j("PathIterator");_dirsEmitted=this.stats.counterMetric("directories emitted");_filesEmitted=this.stats.counterMetric("files emitted");_otherEmitted=this.stats.counterMetric("other paths emitted");_totalEmitted=this.stats.counterMetric("total paths emitted");_readDirMs=this.stats.timingMetric("readDir");_filterMs=this.stats.timingMetric("filter");_yieldMs=this.stats.timingMetric("yield");_totalMs=this.stats.timingMetric("total");async*[Symbol.asyncIterator](){this._totalMs.start();let t=200,r=Date.now(),n=new Array;n.push(this._startUri);let i;for(;(i=n.pop())!==void 0;){Date.now()-r>=t&&(await new Promise(c=>setTimeout(c,0)),r=Date.now());let o=tf(this._rootUri,i),a=this._pathFilter.makeLocalPathFilter(o);this._readDirMs.start();let l=Px(i.fsPath);this._readDirMs.stop();for(let[c,u]of l){if(Date.now()-r>=t&&(await new Promise(C=>setTimeout(C,0)),r=Date.now()),c==="."||c==="..")continue;this._filterMs.start();let p=s6.Uri.joinPath(i,c),g=zt(o,c,u==="Directory"),A=a.getPathInfo(g,u);this._filterMs.stop();let y=g;u==="File"?this._filesEmitted.increment():u==="Directory"?(y=Uy(g),this._dirsEmitted.increment()):this._otherEmitted.increment(),this._totalEmitted.increment(),this._yieldMs.start(),yield[p,y,u,A],this._yieldMs.stop(),u==="Directory"&&A.accepted&&n.push(p)}}this._totalMs.stop()}},r6=class extends bg{constructor(r){super();this.extension=r}format(){return`Unsupported file extension (${this.extension})`}},yN=class{_fileExtensions;constructor(t){if(t){this._fileExtensions=new Set;for(let r of t)this._fileExtensions.add(r.toLowerCase())}else this._fileExtensions=void 0}acceptsPath(t,r="File"){return this.getPathInfo(t,r).accepted}getPathInfo(t,r="File"){if(r==="File"){let i=rw.extname(t);if(this._fileExtensions!==void 0&&!this._fileExtensions.has(i.toLowerCase()))return new r6(i)}else r==="Directory"&&!t.endsWith("/")&&(t+="/");let n=this._getIgnoreStack(Qa(t));return n===void 0?new xg:n.getPathInfo(t)}},n6=class extends yN{constructor(r,n){super(n);this._ignorePathMap=r}makeLocalPathFilter(r){let n=this._getIgnoreStack(r);return new i6(n,this._fileExtensions)}_getIgnoreStack(r){if($h(r))throw new Error(`Absolute path ${r} passed to PathFilter`);let n=r;for(let i=0;i<1e4;i++){let s=this._ignorePathMap.get(n);if(s)return s;if(Qa(n)===n)return;n=Qa(n)}throw new Error(`Too-deep or malformed directory name ${r}`)}},i6=class extends yN{constructor(r,n){super(n);this._ignoreStack=r}_getIgnoreStack(r){return this._ignoreStack}};var MCt=V(require("vscode"));function PA(e){let t;return new Promise(r=>{t=e(n=>{t.dispose(),r(n)})})}var vN=class e{static defaultStartSeq=1e4;_next;constructor(t=e.defaultStartSeq){this._next=t}next(){return this._next++}};var EN=class{constructor(t,r=_o){this.root=t;this.commandExecutor=r}async version(){return await this.commandExecutor("git --version")}async diff(t){let r=["git","diff"];t.nameStatus&&r.push("--name-status"),t.hash1&&r.push(t.hash1),t.hash2&&r.push(t.hash2),t.relPath&&(r.push("--"),r.push(t.relPath));let n=r.join(" ");return await this.commandExecutor(n,{cwd:this.root.fsPath})}async lsFiles(t){let r=["git","ls-files"];t.others&&r.push("--others"),t.excludeStandard&&r.push("--exclude-standard"),t.relPath&&(r.push("--"),r.push(t.relPath));let n=r.join(" ");return await this.commandExecutor(n,{cwd:this.root.fsPath})}async show(t){let r=["git","show"];t.nameStatus&&r.push("--name-status"),t.oneLine&&r.push("--oneline"),t.object&&r.push(`"${t.object}"`);let n=r.join(" ");return await this.commandExecutor(n,{cwd:this.root.fsPath})}async symbolicRef(t){let r=["git","symbolic-ref"];t.name&&r.push(t.name);let n=r.join(" ");return await this.commandExecutor(n,{cwd:this.root.fsPath})}async log(t){let r=["git","log"];t.commit1&&r.push(t.commit1),t.commit2&&r.push(t.commit2),t.noMerges&&r.push("--no-merges"),t.format&&r.push(`--format="${t.format}"`),t.not&&r.push(`--not "${t.not}"`);let n=r.join(" ");return await this.commandExecutor(n,{cwd:this.root.fsPath})}};var LA={};mP(LA,{BlobNameRetrieverImpl:()=>o6,FileChangeWatcherImpl:()=>a6,FileUploaderImpl:()=>l6,FileUtilsImpl:()=>c6,HeadChangeWatcher:()=>W_,onDidChange:()=>FA});var Kwe=V(require("vscode"));var o6=class{constructor(t,r,n){this._rootPath=t;this._workspaceManager=r;this._blobNameCalculator=n}async getBufferBlobName(t){let r=Kwe.Uri.file(zt(this._rootPath,t)),i=(await Co(r)).getText();return this._blobNameCalculator.calculate(t,i)}getIndexedBlobName(t){return this._workspaceManager.getBlobName(new qe(this._rootPath,t))}};var bN=require("vscode");var a6=class{constructor(t,r){this._rootPath=t;this.onDidChangeFile=r}async _getOpenTabs(){let t=[];for(let r of bN.window.tabGroups.all)for(let n of r.tabs){let i=n.input;if(!xk(i,"uri"))continue;let s=i.uri;if(!await qme(s.fsPath))continue;let a=null;try{a=await bN.workspace.openTextDocument(s)}catch{continue}let l=a.isDirty;t.push({label:n.label,uri:s,isDirty:l})}return t}async getPathsWithBufferChanges(){let r=(await this._getOpenTabs()).filter(i=>i.isDirty&&ks(this._rootPath.fsPath,i.uri.fsPath)),n=[];for(let i of r){let s=Yh(this._rootPath.fsPath,i.uri.fsPath);s!==void 0&&n.push(s)}return n}};var zwe=require("vscode");var l6=class extends X{constructor(r,n){super();this._blobNameCalculator=r;this._apiServer=n;this._uploadQueue=new Ma(async i=>{i!==void 0&&await this._processUpload(i)}),this.addDisposable(this._uploadQueue)}_emitter=new zwe.EventEmitter;_uploadQueue;_logger=j("FileUploaderImpl");get onDidChange(){return this._emitter.event}upload(r,n){let i=this._blobNameCalculator.calculate(r,n);if(i===void 0)throw new Error(`blobNameCalculator returned undefined for ${r}`);return this._uploadQueue.insert({path:r,content:n,blobName:i}),this._uploadQueue.kick(),Promise.resolve(i)}async _processUpload(r){try{this._logger.debug(`Upload started: path [${r.path}] with blob name [${r.blobName}]`),await this._apiServer.batchUpload([{pathName:r.path,text:r.content,blobName:r.blobName,metadata:[]}]),this._logger.debug(`Upload complete: path [${r.path}] with blob name [${r.blobName}]`)}catch(n){this._logger.debug(`Failed upload for [${r.path}]. Caused by: ${n.stack}.`)}}};var c6=class{constructor(t){this._pathFilter=t}isUploadable(t){return this._pathFilter.acceptsPath(t)}};var u6=V(require("vscode"));var Jwe=(i=>(i.added="A",i.deleted="D",i.modified="M",i.renamed="R",i))(Jwe||{}),QCt=Object.freeze({A:tr.added,D:tr.deleted,M:tr.modified,R:tr.renamed}),NCt=new RegExp("^R\\d{3}$"),PCt=`
`,LCt="	";function UCt(e,t){for(let r in e)if(e[r]===t)return e[r]}function OCt(e){let r=NCt.test(e)?"R":UCt(Jwe,e);if(!r)throw new Error(`Unknown diff change type [${e}]`);return r}function qCt(e){return QCt[OCt(e)]}function VCt(e,t,r){return{[tr.added]:void 0,[tr.deleted]:e,[tr.modified]:e,[tr.renamed]:e}[r]}function HCt(e,t,r){return{[tr.added]:e,[tr.deleted]:void 0,[tr.modified]:e,[tr.renamed]:t}[r]}function xN(e){let t=[],r=e.split(PCt);for(let n of r){if(!n||n.trim().length===0)continue;let[i,s,o]=n.split(LCt),a=qCt(i),l={beforePath:VCt(s,o,a),afterPath:HCt(s,o,a),changeType:a};t.push(l)}return t}var _N=class{constructor(t){this._git=t}async getWorkingDirectoryChanges(){let t=`
`,r=[],n=new Set,i=await this._git.diff({hash1:"HEAD",nameStatus:!0});if(i){r=xN(i);for(let o of r.slice(0,50))o.afterPath!==void 0&&n.add(o.afterPath)}let s=await this._git.lsFiles({others:!0,excludeStandard:!0});if(s){let o=s.split(t).filter(a=>a.trim().length>0&&!n.has(a)).map(a=>({afterPath:a,beforePath:void 0,changeType:tr.added}));r=r.concat(o)}return r}async _getDefaultBranch(){let t="refs/remotes/origin",r=await this._git.symbolicRef({name:`${t}/HEAD`});if(r)return r.trim().replace(t+"/","")}async _getCommitHashes(){let t="%H",r=`
`,n=await this._getDefaultBranch();return(await this._git.log({commit1:n,commit2:"HEAD",noMerges:!0,format:t,not:n}))?.split(r)??[]}async getCommitChanges(){let t=`
`,r={},n=await this._getCommitHashes();for(let i of n){let s=await this._git.show({object:i,nameStatus:!0,oneLine:!0}),o=s?.slice(s.indexOf(t)+1);if(o==null)throw new Error(`Could not get commit changes for commit ${i}`);let a=xN(o);r[i]=a}return r}async getFileWorkingDirectoryChange(t){let r=await this._git.diff({hash1:"HEAD",nameStatus:!0,relPath:t});if(r){let i=xN(r);if(i.length>0)return i[0]}if((await this._git.lsFiles({others:!0,excludeStandard:!0,relPath:t}))?.trim()===t)return{afterPath:t,beforePath:void 0,changeType:tr.added}}async getFileContentForCommit(t,r){let n=await this._git.show({object:`${r}:${t}`});if(n===void 0)throw new Error(`Could not find file ${t} in commit ${r}`);return n}async getFileContentBeforeCommit(t,r){return this.getFileContentForCommit(t,`${r}^`)}};var jwe=V(vs());var wN=class extends X{constructor(r,n,i,s,o,a,l){super();this._workspaceName=r;this._vcs=n;this._fileUtils=i;this._fileUploader=s;this._fileChangeWatcher=o;this._blobNameRetriever=a;this._configListener=l;this._logger=j(`VCSRepoWatcher[${r}]`),this._changes={commits:[],workingDirectory:[]},this.addDisposable(s.onDidChange(c=>this.handleFileUploaded(c))),this.addDisposable(o.onDidChangeFile(c=>this.handleFileChange(c)))}_changes;_workingDirectoryTrackedPaths=new Set;_trackedBlobs=new Map;_logger;async _uploadFile(r){let n=await r.readContent(),i=await this._fileUploader.upload(r.path,n);return this._trackedBlobs.set(i,r),i}_clear(){this._changes={commits:[],workingDirectory:[]},this._workingDirectoryTrackedPaths.clear(),this._trackedBlobs.clear()}async handleHeadChange(){this._logger.debug("Handling head changes"),this._clear();try{let i=await this.collectCommitChanges();this._changes.commits=i}catch(i){this._logger.error("Error collecting commit changes",i)}let r=await this.collectWorkingDirectoryChanges(),n=await this.collectBufferChanges();this._changes.workingDirectory=r.concat(n)}handleFileUploaded(r){throw new Error("Method not implemented.")}async handleFileChange(r){if(this._logger.debug(`Handling file change [${r.relPath}]`),r.origin==="buffer"&&this._workingDirectoryTrackedPaths.has(r.relPath))return;r.origin==="disk"&&(this._changes.workingDirectory=this._changes.workingDirectory.filter(s=>s.afterPath!==r.relPath)),this._workingDirectoryTrackedPaths.add(r.relPath);let n;if(r.origin==="disk")n=await this._vcs.getFileWorkingDirectoryChange(r.relPath);else if(r.origin==="buffer")n={afterPath:r.relPath,beforePath:r.relPath,changeType:tr.modified};else{this._logger.debug(`Unknown file change origin ${JSON.stringify(r)}`);return}if(!n){this._changes.workingDirectory=this._changes.workingDirectory.filter(s=>{let o=s.changeType===tr.renamed&&s.afterPath===r.relPath,a=s.changeType===tr.deleted&&s.beforePath===r.relPath,l=s.changeType===tr.added&&s.afterPath===r.relPath;return!o&&!a&&!l});return}let i={changeType:n.changeType};n.beforePath&&(i.beforePath=n.beforePath),n.afterPath&&(i.afterPath=n.afterPath),[tr.deleted,tr.modified,tr.renamed].includes(n.changeType)&&(i.headBlobName=await this._uploadFile({path:n.afterPath,readContent:()=>this._vcs.getFileContentForCommit(n.beforePath,"HEAD")})),tr.renamed.includes(n.changeType)&&(this._changes.workingDirectory=this._changes.workingDirectory.filter(s=>s.afterPath!==n.beforePath)),this._changes.workingDirectory.push(i)}async collectCommitChanges(){let r=[];this._logger.debug("Collecting disk changes");let n=await this._vcs.getCommitChanges();for(let i in n){let s={hash:i,files:[]};for(let o of n[i]){let a={changeType:o.changeType};if(o.afterPath!==void 0){if(!this._fileUtils.isUploadable(o.afterPath))continue;a.afterPath=o.afterPath,a.afterBlobName=await this._uploadFile({path:o.afterPath,readContent:()=>this._vcs.getFileContentForCommit(o.afterPath,i)})}if(o.beforePath!==void 0){if(!this._fileUtils.isUploadable(o.beforePath))continue;a.beforePath=o.beforePath,a.beforeBlobName=await this._uploadFile({path:o.beforePath,readContent:()=>this._vcs.getFileContentBeforeCommit(o.beforePath,i)})}s.files.push(a)}r.push(s)}return r}async collectWorkingDirectoryChanges(){let r=[],n=await this._vcs.getWorkingDirectoryChanges();for(let i of n){[tr.added,tr.modified].includes(i.changeType)&&this._workingDirectoryTrackedPaths.add(i.afterPath);let s={changeType:i.changeType};if(i.afterPath!==void 0){if(!this._fileUtils.isUploadable(i.afterPath))continue;s.afterPath=i.afterPath}if(i.beforePath!==void 0){if(!this._fileUtils.isUploadable(i.beforePath))continue;s.beforePath=i.beforePath,s.headBlobName=await this._uploadFile({path:i.beforePath,readContent:()=>this._vcs.getFileContentForCommit(i.beforePath,"HEAD")})}r.push(s)}return r}async collectBufferChanges(){let r=[],n=await this._fileChangeWatcher.getPathsWithBufferChanges();for(let i of n){if(!this._fileUtils.isUploadable(i)||this._workingDirectoryTrackedPaths.has(i))continue;this._workingDirectoryTrackedPaths.add(i);let s={changeType:tr.modified,afterPath:i,beforePath:i};s.headBlobName=await this._uploadFile({path:i,readContent:()=>this._vcs.getFileContentForCommit(i,"HEAD")}),r.push(s)}return r}async getChanges(){let r=(0,jwe.cloneDeep)(this._changes),n=[];for(let i of r.workingDirectory.slice(-50)){if(!i.afterPath){n.push(i);continue}i.indexedBlobName=this._blobNameRetriever.getIndexedBlobName(i.afterPath),i.indexedBlobName!==void 0&&(i.currentBlobName=await this._blobNameRetriever.getBufferBlobName(i.afterPath),n.push(i))}return r.workingDirectory=n,r}handleUnknownBlobs(r){for(let n of r){let i=this._trackedBlobs.get(n);i!==void 0&&this._uploadFile(i)}}};var IN=class{constructor(t,r){this._fileUploader=t;this.configListener=r}_repoWatchers=new Map;_disposables=new Map;_logger=j("VCSWatcher");_headChangeListener;_createFacade(t){if(t.toolName==="git")return new _N(new EN(t.root));throw new Error("only git is supported for now")}startTracking(t,r,n,i,s,o){if(this._logger.debug(`startTracking folderId ${r}`),this._repoWatchers.has(r))return this._logger.debug(`folderId ${r} is already being tracked`),new u6.Disposable(()=>{});let a=new wN(t,this._createFacade(n),o,this._fileUploader,i,s,this.configListener);return this._repoWatchers.set(r,a),this._disposables.set(r,[a]),a.handleHeadChange(),new u6.Disposable(()=>this._stopTracking(r))}_stopTracking(t){this._logger.debug(`stopTracking folderId ${t}`);let r=this._disposables.get(t);if(r){for(let n of r)n.dispose();this._disposables.delete(t)}this._repoWatchers.delete(t)}dispose(){this._logger.debug("Disposing VCSWatcher");for(let t of this._repoWatchers.keys())this._stopTracking(t);this._repoWatchers.clear(),this._disposables.clear()}getWatchedFolderIds(){return Array.from(this._repoWatchers.keys())}async getChanges(){let t={commits:[],workingDirectory:[]};for(let r of this._repoWatchers.values()){let n=await r.getChanges();t.commits=t.commits.concat(n.commits),t.workingDirectory=t.workingDirectory.concat(n.workingDirectory)}return t}handleUnknownBlobs(t){for(let r of this._repoWatchers.values())r.handleUnknownBlobs(t)}listenForEvents(){this._logger.debug("Registering for events"),this._headChangeListener!==void 0&&this._headChangeListener.dispose(),this._headChangeListener=FA(t=>{this._logger.debug(`Head changed for repo ${t.repoId}`),this._repoWatchers.get(t.repoId)?.handleHeadChange().catch(r=>{r instanceof Error?this._logger.error(`Error handling head change: ${r.message??""} ${r.stack}`):this._logger.error(`Error handling head change: ${r}`)})})}};var d6=V(vs());var SN=class{constructor(t,r,n){this._configListener=t;this._openFileManagerV1=r;this._openFileManagerV2=n}_logger=j("OpenFileManagerProxy");get isV2Enabled(){return this._configListener.config.openFileManager.v2Enabled}startTrackingFolder(t,r){return this.isV2Enabled?[this._openFileManagerV2.startTrackingFolder(t,r),this._openFileManagerV1.openSourceFolder(r)]:[this._openFileManagerV1.openSourceFolder(r)]}addOpenedDocument(t,r){this._openFileManagerV1.startTracking(t.folderId,t.relPath,t.document),this.isV2Enabled&&this._openFileManagerV2.addOpenedDocument(t,r)}getBlobName(t,r){if(this.isV2Enabled){let n=this._openFileManagerV2.getBlobName(t,r),i=this._openFileManagerV1.getBlobName(t,r);return(n===void 0&&i!==void 0||n!==void 0&&i===void 0)&&this._logger.debug(`[WARN] getBlobName returned different results between v1 and v2 [${t}:${r}]
[${JSON.stringify(n)}]
[${JSON.stringify(i)}]`),i}else return this._openFileManagerV1.getBlobName(t,r)}handleMissingBlob(t,r,n){if(this.isV2Enabled){let i=this._openFileManagerV2.handleMissingBlob(t,r,n);return this._openFileManagerV1.notifyMissingBlob(t,r,n)||i}else return this._openFileManagerV1.notifyMissingBlob(t,r,n)}loseFocus(){this._openFileManagerV1.loseFocus()}stopTracking(t,r){this._openFileManagerV1.stopTracking(t,r),this.isV2Enabled&&this._openFileManagerV2.stopTracking(t,r)}handleClosedDocument(t){let r=af(t.document);this._openFileManagerV1.stopTracking(t.folderId,t.relPath,r?1:0),this.isV2Enabled&&this._openFileManagerV2.handleClosedDocument(t)}handleChangedDocument(t){Object.prototype.hasOwnProperty.call(t.event,"notebook")?this._openFileManagerV1.applyNotebookChange(t.folderId,t.relPath,t.event):this._openFileManagerV1.applyTextDocumentChange(t.folderId,t.relPath,t.event),this.isV2Enabled&&this._openFileManagerV2.handleChangedDocument(t)}isTracked(t,r){if(this.isV2Enabled){let n=this._openFileManagerV2.isTracked(t,r),i=this._openFileManagerV1.isTracked(t,r);return n!==i&&this._logger.debug(`[WARN] isTracked returned different results between v1 and v2 [${t}:${r}]
[${JSON.stringify(n)}]
[${JSON.stringify(i)}]`),i}else return this._openFileManagerV1.isTracked(t,r)}getTrackedPaths(t){if(this.isV2Enabled){let r=this._openFileManagerV2.getTrackedPaths(t),n=this._openFileManagerV1.getTrackedPaths(t),i=(0,d6.difference)(r,n);i.length>0&&this._logger.debug(`[WARN] getTrackedPaths in new but not in old [${t}]
[${JSON.stringify(i)}]`);let s=(0,d6.difference)(n,r);return s.length>0&&this._logger.debug(`[WARN] getTrackedPaths in old but not in new [${t}]
[${JSON.stringify(s)}]`),n}else return this._openFileManagerV1.getTrackedPaths(t)}getRecencySummary(t){return this._openFileManagerV1.getRecencySummary(t)}getAllEditEvents(){return this.isV2Enabled?this._openFileManagerV2.getAllEditEvents():new Map}getAllPathToIndexedBlob(){return this.isV2Enabled?this._openFileManagerV2.getAllPathToIndexedBlob():new Map}translateRange(t,r,n,i){if(this.isV2Enabled){let s=this._openFileManagerV2.translateRange(t,r,n,i),o=this._openFileManagerV1.translateRange({folderId:t,relPath:r,beginOffset:n,endOffset:i});return(s?.blobName!==o?.blobName||s?.beginOffset!==o?.beginOffset||s?.endOffset!==o?.endOffset)&&this._logger.debug(`[WARN] translateRange returned different results between v1 and v2 [${t}:${r}]
[${JSON.stringify(s)}]
[${JSON.stringify(o)}]`),o}else return this._openFileManagerV1.translateRange({folderId:t,relPath:r,beginOffset:n,endOffset:i})}};var f6=V(vs()),BN=class{store;primaryKey;constructor(t){this.store={},this.primaryKey=t}add(t){let r=t[this.primaryKey];if(this.get(r))throw new Error(`Record with primary key ${r} already exists.`);this.store[r]=Object.assign({},t)}update(t,r){this.store[t]={...this.store[t],...r}}delete(t){let r=this.store[t];return delete this.store[t],r}deleteBy(t){let r=this.search(t);for(let n of r)this.delete(n[this.primaryKey])}get(t){return this.store[t]}search(t,{limit:r}={}){let n=0,i=[];for(let s of Object.values(this.store))if(f6.default.every(t,(o,a)=>f6.default.isEqual(s[a],o))&&(i.push(s),n++,r&&n>=r))break;return i}getAll(){return Object.values(this.store)}clear(){this.store={}}};var DN=class{_logger=j("BlobStatusStore");_store=new BN("blobName");_embargoedPaths=new Set;getIndexedBlobName(t){if(this._embargoedPaths.has(t)){this._logger.debug(`Path [${t}] is embargoed`);return}let r=this._store.search({pathName:t,status:"indexed"});if(r.length===0){this._logger.debug(`No indexed blob found for ${t}`);return}return r.length>1?(this._logger.warn(`Multiple indexed blobs found for ${t}`),r.sort((n,i)=>(n.indexedAt??0)-(i.indexedAt??0)),r[r.length-1].blobName):r[0].blobName}isTrackingBlob(t){return this._store.get(t)!==void 0}removePath(t){this._store.deleteBy({pathName:t}),this._embargoedPaths.delete(t)}isTrackingPath(t){return this._embargoedPaths.has(t)||this._store.search({pathName:t},{limit:1}).length>0}clear(){this._store.clear(),this._embargoedPaths.clear()}getTrackedPaths(){return[...new Set(...this._store.getAll().map(t=>t.pathName),...this._embargoedPaths)]}addIndexedBlob(t,r){this.addUploadedBlob(t,r),this.updateBlobIndexed(t)}addUploadedBlob(t,r){this._store.add({blobName:t,pathName:r,status:"uploaded",uploadRequestedAt:Date.now()})}getLastBlobNameForPath(t){return this._store.search({pathName:t}).reduce((n,i)=>n===void 0?i:(n.uploadRequestedAt??0)>(i.uploadRequestedAt??0)?n:i)?.blobName}updateBlobIndexed(t){let r=Date.now(),n=this._store.get(t);if(!n){this._logger.debug(`[ERROR] Failed to find record for ${t}`);return}if(n.status==="indexed"){this._logger.debug(`[WARN] Blob ${t} is already indexed`);return}let i=this._store.search({pathName:n.pathName,status:"indexed"});if(i.length===0){n.status="indexed",n.indexedAt=r;return}if((i.reduce((o,a)=>(o.uploadRequestedAt??0)>(a.uploadRequestedAt??0)?o:a).uploadRequestedAt??0)>(n.uploadRequestedAt??0)){this._logger.info(`Blob ${t} is indexed but there is a newer blob to upload for ${n.pathName}`),this._store.delete(t);return}for(let o of i)this._store.delete(o.blobName);n.status="indexed",n.indexedAt=r}embargoPath(t){if(this._embargoedPaths.has(t)){this._logger.debug(`Path [${t}] is already embargoed`);return}this._logger.debug(`Embargoing path [${t}]`),this._store.deleteBy({pathName:t}),this._embargoedPaths.add(t)}isEmbargoed(t){return this._embargoedPaths.has(t)}updateBlobName(t,r){let n=this._store.get(t);if(!n){this._logger.debug(`[ERROR] Failed to find record for ${t}`);return}this._store.delete(t),n.blobName=r,this._store.add(n)}getAllPathToIndexedBlob(){return this._store.search({status:"indexed"}).reduce((t,r)=>(t.set(r.pathName,r.blobName),t),new Map)}};var iw=require("vscode");var TN=require("vscode"),h6=new TN.EventEmitter,g6=h6.event,p6=new TN.EventEmitter,A6=p6.event,m6=new TN.EventEmitter,y6=m6.event;var Zwe=V(V8());var RN=class{_queue=new Zwe.default;config;constructor(t={}){this.config={sizeLimit:t.sizeLimit??1e6,queueSizeManagement:t.queueSizeManagement??"REMOVE_OLDEST"}}enqueue(t){if(this._queue.length>=this.config.sizeLimit){if(this.config.queueSizeManagement==="REJECT_NEW_ITEMS")return!1;this.config.queueSizeManagement==="REMOVE_OLDEST"&&this._queue.shift()}return this._queue.push(t),!0}dequeue(){return this._queue.shift()}isEmpty(){return this._queue.isEmpty()}clear(){this._queue.clear()}peek(){return this.peek()}getItems(){return Object.freeze(this._queue.toArray())}size(){return this._queue.length}};var Xwe=j("SimpleQueueProcessor"),nw=class{queue;_inProgress=!1;_disposed=!1;constructor(t=new RN){this.queue=t}enqueue(t){return this.queue.enqueue(t)}dequeue(){return this.queue.dequeue()}isEmpty(){return this.queue.isEmpty()}clear(){this.queue.clear()}peek(){return this.queue.peek()}getItems(){return this.queue.getItems()}size(){return this.queue.size()}dispose(){this._disposed=!0}retry(t,r){setTimeout(()=>{for(let n of t)this.enqueue(n);this.startProcess()},r)}startProcess(){this._inProgress||(this._inProgress=!0,Promise.resolve().then(async()=>{for(;!this.isEmpty()&&!this.isDisposed();){let t=this.peek();if(await this.internalProcess(),t===this.peek())break}}).catch(t=>{t instanceof Error?Xwe.info(`Unhandled error while processing task: ${t.message} ${t.stack}`):Xwe.info(`Unhandled error while processing task: ${t}`)}).finally(()=>{this._inProgress=!1}))}isDisposed(){return this._disposed}};function $Ct(e,t){let r=new Set(t.unknownBlobNames.concat(t.nonindexedBlobNames)),n=[];for(let i of e)r.has(i)||n.push(i);return n}var C6=class extends nw{constructor(r,n){super();this._apiServer=r;this._config=n}_onFoundIndexedBlobNamesEmitter=new iw.EventEmitter;_onFoundUnknownBlobNamesEmitter=new iw.EventEmitter;_pollingStartTime=new Map;_logger=j("FileUploader#BlobStatusExecutor");dispose(){super.dispose(),this._pollingStartTime.clear(),this._onFoundIndexedBlobNamesEmitter.dispose(),this._onFoundUnknownBlobNamesEmitter.dispose()}get onFoundIndexedBlobNames(){return this._onFoundIndexedBlobNamesEmitter.event}get onFoundUnknownBlobNames(){return this._onFoundUnknownBlobNamesEmitter.event}retryBlobNames(r){let[s,o]=r.reduce((a,l)=>{let c=this._pollingStartTime.get(l);return c===void 0?(this._logger.debug(`[WARN] retryBlobNames: missing start time for ${l}`),a[1].push(l),a):(Date.now()-c<this._config.oldBlobNameThresholdMs?a[1].push(l):a[0].push(l),a)},[[],[]]);s.length>0&&this.retry(s,this._config.newBlobNameRetryMs),o.length>0&&this.retry(o,this._config.oldBlobNameRetryMs)}async internalProcess(){let r=new Set,n=0;for(;n<this._config.maxBatchCount;){let o=this.dequeue();if(o===void 0)break;r.add(o),this._pollingStartTime.has(o)||this._pollingStartTime.set(o,Date.now()),n++}this._logger.verbose(`FindMissingProcess started: for [${r.size}] items`);let i;try{i=await Ii(()=>this._apiServer.findMissing([...r]),this._logger)}catch{this._logger.debug(`[ERROR] FindMissingProcess failed: for [${r.size}] items`),this.retryBlobNames([...r]);return}if(i.unknownBlobNames.length>0){this._logger.debug(`FindMissingProcess found unknown: for [${i.unknownBlobNames.length}] items`);for(let o of i.unknownBlobNames)this._pollingStartTime.delete(o);this._onFoundUnknownBlobNamesEmitter.fire(i.unknownBlobNames)}i.nonindexedBlobNames.length>0&&(this._logger.debug(`FindMissingProcess found nonindexed: for [${i.nonindexedBlobNames.length}] items`),this.retryBlobNames(i.nonindexedBlobNames));let s=$Ct(r,i);for(let o of s)this._pollingStartTime.delete(o);s.length>0&&(this._logger.verbose(`FindMissingProcess found not missing: for [${s.length}] items`),this._onFoundIndexedBlobNamesEmitter.fire(s))}},v6=class extends nw{constructor(r,n){super();this._apiServer=r;this._config=n}_onUploadedEmitter=new iw.EventEmitter;_onFailedEmitter=new iw.EventEmitter;_logger=j("FileUploader#UploadExecutor");dispose(){super.dispose(),this._onUploadedEmitter.dispose(),this._onFailedEmitter.dispose()}get onDidUpload(){return this._onUploadedEmitter.event}get onFailed(){return this._onFailedEmitter.event}async _processUpload(r){let n=Date.now(),i;this._logger.verbose(`Upload started [${n}]: for [${r.length}] items`),i=await Ii(()=>this._apiServer.batchUpload(r),this._logger),this._logger.debug(`Upload complete [${n}]: for [${i.blobNames.length} / ${r.length}] items`);let s=new Map;if(i!==void 0)for(let a=0;a<i.blobNames.length;a++){let l=r[a].blobName,c=i.blobNames[a];s.set(l,c),l!==c&&this._logger.debug(`[WARN]Upload blob name mismatch: ${l} -> ${c}`)}let o=r.length-(i?.blobNames.length??0);return{expectedToActualBlobNameMap:s,failedCount:o}}processResult(r,n){let{expectedToActualBlobNameMap:i,failedCount:s}=r;s>0&&(this._logger.debug(`[WARN] Scheduling for retry [${s}] items`),this.retry(n.slice(n.length-s),this._config.retryMs)),i.size>0&&this._onUploadedEmitter.fire(i)}async internalProcess(){let r=0,n=[],i=[],s=0;for(;!this.isDisposed()&&s<this._config.maxBatchCount;){let o=this.peek();if(o===void 0)break;let a=await o.readContent();if(a.length>this._config.maxUploadSize){this._logger.debug(`[WARN] UploadExecutor: skipping upload for ${o.path} because it is too large`),this.dequeue();continue}if(r+a.length>this._config.maxUploadSize)break;r+=a.length,n.push({pathName:o.path,text:a,blobName:o.blobName,metadata:[]}),i.push(o),this.dequeue(),s++}if(n.length===0){this._logger.debug("UploadExecutor: no items to upload");return}try{let o=await this._processUpload(n);this.processResult(o,i)}catch(o){this._logger.debug(`[ERROR] UploadExecutor failed: for [${n.length}] items. Caused by: ${o.message} ${o.stack}`),await this.processIndividualUploads(i,n)}}async processIndividualUploads(r,n){for(let i=0;i<r.length;i++){let s=r[i],o=n[i];try{let a=await this._processUpload([o]);this.processResult(a,[s])}catch{this._logger.debug(`[ERROR] UploadExecutor failed: for [${s.blobName}]`),this._onFailedEmitter.fire(s)}}}},YCt={uploadConfig:{maxUploadSize:1e7,maxBatchCount:128,retryMs:6e4},blobStatusConfig:{maxBatchCount:1e3,oldBlobNameThresholdMs:6e4,oldBlobNameRetryMs:6e4,newBlobNameRetryMs:3e3}},kN=class extends X{constructor(r,n,i=YCt){super();this._blobNameCalculator=r;this._apiServer=n;this._config=i;this._uploadExecutor=new v6(n,i.uploadConfig),this._blobStatusExecutor=new C6(n,i.blobStatusConfig),this.addDisposables({dispose:()=>{this._handledItems.clear()}},this._uploadExecutor,this._blobStatusExecutor,this._uploadExecutor.onDidUpload(s=>{p6.fire({expectedToActualBlobNameMap:s});for(let[o,a]of s)this._handledItems.has(o)&&(o!==a&&(this._handledItems.set(a,this._handledItems.get(o)),this._handledItems.delete(o)),this._blobStatusExecutor.enqueue(a));this._blobStatusExecutor.startProcess()}),this._uploadExecutor.onFailed(s=>{this._logger.debug(`[ERROR] Upload failed: ${s.path}`),this._handledItems.delete(s.blobName),h6.fire({blobName:s.blobName})}),this._blobStatusExecutor.onFoundIndexedBlobNames(s=>{for(let o of s)this._handledItems.delete(o);m6.fire({blobNames:s})}),this._blobStatusExecutor.onFoundUnknownBlobNames(s=>{for(let o of s){let a=this._handledItems.get(o);a&&this._uploadExecutor.enqueue(a)}this._uploadExecutor.startProcess()}))}_logger=j("BlobUploaderImpl");_uploadExecutor;_blobStatusExecutor;_handledItems=new Map;enqueueUpload(r,n){let i=this._blobNameCalculator.calculate(r.path,n);if(i===void 0){this._logger.debug(`blobNameCalculator returned undefined for ${r.path}`);return}let s={...r,blobName:i};return this._handledItems.set(i,s),this._logger.debug(`upload: ${r.path}. total: ${this._handledItems.size}`),this._blobStatusExecutor.enqueue(i),i}startUpload(){this._blobStatusExecutor.startProcess()}};var E6=class{constructor(t){this._blobNameCalculator=t}_logger=j("OpenDocumentSnapshotCache");_lastKnownText=new Map;handleDocumentOpened(t){af(t.document)||this._lastKnownText.set(t.relPath,t.document.getText())}handleDocumentClosed(t){this._lastKnownText.delete(t.relPath)}handleFileRename(t){for(let r of this._lastKnownText.keys())if(ks(t.oldRelPath,r)){let n=t.newRelPath+r.slice(t.oldRelPath.length);this._lastKnownText.set(n,this._lastKnownText.get(r)),this._lastKnownText.delete(r)}}handleFileDeletion(t){this._lastKnownText.delete(t.relPath)}_swapLastKnownText(t,r){if(!this._lastKnownText.has(t)){this._logger.verbose(`[WARN] no known last text for path [${t}]. initializing.`),this._lastKnownText.set(t,r);return}let n=this._lastKnownText.get(t);return this._lastKnownText.set(t,r),n}handleDocumentChange(t){if(Object.prototype.hasOwnProperty.call(t.event,"notebook"))return;t=t;let r=t.event.document.getText(),n=this._swapLastKnownText(t.relPath,r);if(!n||t.event.contentChanges.length===0)return;let i=t.event.contentChanges.map(s=>new Wl({beforeStart:s.rangeOffset,afterStart:s.rangeOffset,beforeText:n.substring(s.rangeOffset,s.rangeOffset+s.rangeLength),afterText:s.text}));if(i.length>1){i.sort((o,a)=>o.beforeStart-a.beforeStart);let s=0;i=i.map(o=>{let a=o.afterStart+s;return s+=o.afterText.length-o.beforeText.length,new Wl({beforeStart:o.beforeStart,afterStart:a,beforeText:o.beforeText,afterText:o.afterText})})}return new Eg({path:t.relPath,edits:i,beforeBlobName:this._blobNameCalculator.calculateNoThrow(t.relPath,n),afterBlobName:this._blobNameCalculator.calculateNoThrow(t.relPath,r)}).normalize()}getLastKnownText(t){return this._lastKnownText.get(t)}},FN=class{constructor(t){this._blobNameCalculator=t;this._openDocumentSnapshotCache=new E6(this._blobNameCalculator),this._fileEditsStore=new NA(1e6)}_openDocumentSnapshotCache;_fileEditsStore;handleDocumentOpened(t){this._openDocumentSnapshotCache.handleDocumentOpened(t)}handleDocumentClosed(t){this._openDocumentSnapshotCache.handleDocumentClosed(t)}handleFileWillRename(t){this._openDocumentSnapshotCache.handleFileRename(t)}handleFileDeletion(t){this._openDocumentSnapshotCache.handleFileDeletion(t)}handleDocumentChange(t,r){let n=this._openDocumentSnapshotCache.handleDocumentChange(t);return n===void 0?0:this._fileEditsStore.addEvent(n,r)}getEvents(){return this._fileEditsStore.getEvents()}removeEventsPriorToBlob(t){this._fileEditsStore.removeEventsPriorToBlob(t)}getLastKnownText(t){return this._openDocumentSnapshotCache.getLastKnownText(t)}};var b6=class{constructor(t,r,n,i,s){this.blobStatusStore=t;this.fileEditProcessor=r;this.fileChangeSizeCounter=n;this.workspaceName=i;this.folderId=s}dispose(){this.blobStatusStore.clear()}};var x6=class{_size=0;_relPath="";get size(){return this._size}add(t,r){return this._relPath!==r?(this._size=t,this._relPath=r):this._size+=t,this._size}clear(){this._size=0,this._relPath=""}};function eIe(e){return af(e)?e.getCells().map(t=>t.document.getText()).join(`
`):e.getText()}var KCt=1e3;function zCt(e){return Object.prototype.hasOwnProperty.call(e.event,"notebook")?e.event.notebook:e.event.document}var MN=class extends X{constructor(r,n){super();this._blobUploader=r;this._blobNameCalculator=n;this.addDisposables(y6(i=>this.handleBlobIndexed(i)),A6(i=>this.handleBlobUploaded(i)),g6(i=>this.handleBlobUploadFailed(i)))}_folderResources=new Map;_logger=j("OpenFileManagerV2");_uploadingBlobToFolder=new Map;startTrackingFolder(r,n){let i=new FN(this._blobNameCalculator),s=new b6(new DN,i,new x6,r,n);return this._folderResources.set(n,s),this.addDisposable(s),s}handleBlobIndexed(r){for(let n of r.blobNames){this._logger.verbose(`Blob ${n} indexed`);let i=this._uploadingBlobToFolder.get(n);if(i===void 0){this._logger.debug(`[WARN] Blob ${n} was indexed but not tracked. Ignoring.`);return}this._uploadingBlobToFolder.delete(n),this._folderResources.get(i)?.blobStatusStore.updateBlobIndexed(n),this._folderResources.get(i)?.fileEditProcessor.removeEventsPriorToBlob(n)}}handleBlobUploadFailed(r){let n=r.blobName;this._uploadingBlobToFolder.has(n)&&(this._logger.debug(`Blob ${n} failed to upload`),this._uploadingBlobToFolder.delete(n))}handleBlobUploaded(r){this._logger.verbose(`Handling ${r.expectedToActualBlobNameMap.size} uploaded blobs`);for(let[n,i]of r.expectedToActualBlobNameMap){if(n===i)continue;let s=this._uploadingBlobToFolder.get(n);if(s===void 0){this._logger.debug(`Blob ${n} was uploaded but not tracked. Ignoring.`);continue}this._logger.debug(`[WARN] Blob name mismatch. Expected ${n} but got ${i}.`),this._uploadingBlobToFolder.set(i,s),this._uploadingBlobToFolder.delete(n);let o=this._folderResources.get(s);if(o===void 0){this._logger.debug(`[WARN] Blob ${n} was uploaded but folder ${s} is not tracked. Ignoring.`);continue}o.blobStatusStore.updateBlobName(n,i)}}_upload(r,n,i,s){let o=this._folderResources.get(r)?.workspaceName;this._logger.info(`[${o}] Uploading [${i}] because [${s}]`);let a=this._blobUploader.enqueueUpload({path:i,readContent:async()=>n},n);a&&(this._uploadingBlobToFolder.set(a,r),this._folderResources.get(r)?.blobStatusStore.addUploadedBlob(a,i))}stopTracking(r,n){this._logger.info(`[${this._folderResources.get(r)?.workspaceName}] Stopping tracking [${n}]`),this._folderResources.get(r)?.blobStatusStore.removePath(n)}addOpenedDocument(r,n){let i=this._folderResources.get(r.folderId);if(i===void 0)throw new Error(`Source folder [${r.folderId}] is not open`);let s=i.workspaceName;af(r.document)&&this._logger.info(`TODO [${s}] Ignoring notebook document ${r.relPath}`);let o=eIe(r.document),a=this._blobNameCalculator.calculate(r.relPath,o);if(!a){i.blobStatusStore.embargoPath(r.relPath),this._logger.debug(`[WARN] Failed to calculate blob name for ${r.relPath}`);return}a!==n?(this._upload(r.folderId,o,r.relPath,"new file"),this._logger.debug(`[INFO] Blob name mismatch. Expected ${n} but got ${a}.`)):i.blobStatusStore.addIndexedBlob(n,r.relPath)}getBlobName(r,n){return this._folderResources.get(r)?.blobStatusStore?.getIndexedBlobName(n)}handleMissingBlob(r,n,i){let s=this._folderResources.get(r);if(s===void 0)return!1;let o=s.blobStatusStore.isTrackingBlob(i),a=s.workspaceName;if(!o)return!1;this._logger.info(`[${a}] Re-uploading ${i} for ${n} in ${r}`);let l=s.fileEditProcessor.getLastKnownText(n);return l===void 0?!1:(this._upload(r,l,n,"missing blob"),!0)}handleClosedDocument(r){let n=this._folderResources.get(r.folderId)?.workspaceName;this._logger.info(`[${n}] Handling closed document ${r.relPath}`),this.stopTracking(r.folderId,r.relPath)}handleChangedDocument(r){let n=this._folderResources.get(r.folderId);if(n===void 0){this._logger.debug(`Ignoring change event for ${r.relPath} because folder is not tracked`);return}if(n.blobStatusStore.isEmbargoed(r.relPath))return;let i=n.workspaceName;if(Object.prototype.hasOwnProperty.call(r.event,"notebook")){this._logger.debug(`[${i}] Ignoring notebook document ${r.relPath}`);return}let s=n.fileEditProcessor;if(s===void 0){this._logger.debug(`[${i}] Ignoring change event for ${r.relPath} because folder is not tracked`);return}let o=n.blobStatusStore.getLastBlobNameForPath(r.relPath),a=s.handleDocumentChange(r,o);(n.fileChangeSizeCounter.add(a,r.relPath)??0)>KCt&&(this._upload(r.folderId,eIe(zCt(r)),r.relPath,"large change"),n.fileChangeSizeCounter.clear())}isTracked(r,n){return this._folderResources.get(r)?.blobStatusStore.isTrackingPath(n)??!1}getTrackedPaths(r){return this._folderResources.get(r)?.blobStatusStore.getTrackedPaths()??[]}translateRange(r,n,i,s){let o=this.getBlobName(r,n);if(o===void 0)return;let a={blobName:o,beginOffset:i,endOffset:s},l=(u,f)=>{if(u.afterStart>f.endOffset)return f;if(u.afterEnd<f.beginOffset){let p=u.afterText.length-u.beforeText.length;return{blobName:f.blobName,beginOffset:f.beginOffset-p,endOffset:f.endOffset-p}}return{blobName:f.blobName,beginOffset:Math.min(u.afterStart,f.beginOffset),endOffset:Math.max(u.afterEnd,f.endOffset)}},c=this._folderResources.get(r)?.fileEditProcessor.getEvents().filter(u=>u.path===n)??[];for(let u of c)for(let f of u.edits)a=l(f,a);return a}getAllEditEvents(){let r=new Map;return Array.from(this._folderResources.keys()).reduce((n,i)=>{let s=Number(i);return n.set(s,this._folderResources.get(s)?.fileEditProcessor.getEvents()??[]),n},r)}getAllPathToIndexedBlob(){let r=new Map;return Array.from(this._folderResources.keys()).reduce((n,i)=>{let s=Number(i);return n.set(s,this._folderResources.get(s)?.blobStatusStore.getAllPathToIndexedBlob()??new Map),n},r)}};var tIe=V(require("vscode"));var _6=require("vscode");var sw=class extends Error{constructor(r,n){let i=r instanceof Error?r.message:`${r}`;super(`WorkQueueItemFailed: ${i}, retry = ${n}`);this.toThrow=r;this.retry=n}},w6=class{throwError(t,r){throw new sw(t,r)}},I6=class{progressReporter;completedItems=0;totalItems;constructor(t,r){this.progressReporter=t,this.totalItems=r,this.update(0,this.totalItems)}update(t,r){this.completedItems+=t,this.totalItems=this.completedItems+r,this.progressReporter.update(this.completedItems,this.totalItems)}cancel(){this.progressReporter.cancel()}},S6=class{constructor(t,r){this.item=t;this.process=r}itemCount(){return 1}start(t){return this.process(this.item,t)}},B6=class{constructor(t,r){this.items=t;this.process=r}itemCount(){return this.items.size}start(t){return this.process(this.items,t)}},QN=class{queue=new Set;get size(){return this.queue.size}add(t){this.queue.add(t)}delete(t){this.queue.delete(t)}},D6=class extends QN{constructor(r){super();this.process=r}dequeue(){let r=this.queue.values().next();if(r.done)throw new Error("Cannot dequeue from empty queue");let n=r.value;return this.queue.delete(n),new S6(n,this.process)}},T6=class extends QN{constructor(r,n){super();this.process=r;this._maxBatchSize=n}dequeue(){let r;if(this._maxBatchSize===void 0||this.queue.size<=this._maxBatchSize)r=this.queue,this.queue=new Set;else{r=new Set;let n=this.queue.values();for(let i=0;i<this._maxBatchSize;i++){let s=n.next();if(s.done)break;let o=s.value;this.queue.delete(o),r.add(o)}}return new B6(r,this.process)}},NN=class e{constructor(t,r,n,i){this.name=t;this.shutdownError=n;if("processOne"in r)this.queue=new D6(r.processOne);else if("processBatch"in r)this.queue=new T6(r.processBatch,r.maxBatchSize);else throw new Error("Invalid processor type");this.backoffParams=i||e.defaultBackoffParams,this.logger=j(`WorkQueue[${t}]`),this.errorHandler=new w6}static queueStatusChanged="QueueStatusChanged";static itemFailed="ItemFailed";static defaultBackoffParams={initialMS:100,mult:2,maxMS:3e4};eventEmitters={[e.queueStatusChanged]:new _6.EventEmitter,[e.itemFailed]:new _6.EventEmitter};queue;countReporters=new Set;progressReporters=new Set;errorHandler;backoffParams;itemsInProgress=0;stopping=!1;logger;stop(){this.stopping=!0,this.update(),this.notifyStatusChanged()}add(t){this.stopping||(this.queue.add(t),this.update(),this.kick())}delete(t){this.stopping||(this.queue.delete(t),this.update())}size(){return this.queue.size+this.itemsInProgress}reportQueueSize(t){let r=this.size();t.update(r),this.countReporters.add(t)}awaitEmpty(t,r=!0){if(this.stopping)return Promise.resolve();let n=this.size();return n===0?Promise.resolve():(t&&this.progressReporters.add(new I6(t,n)),new Promise((i,s)=>{let o=[];function a(){for(let l of o)l.dispose()}o.push(this.eventEmitters[e.queueStatusChanged].event(()=>{a(),this.stopping?s(this.shutdownError):i()})),r&&o.push(this.eventEmitters[e.itemFailed].event(l=>{a(),s(l)}))}))}update(t=0){if(this.stopping){for(let r of this.countReporters)r.cancel();for(let r of this.progressReporters)r.cancel()}else{this.itemsInProgress-=t;let r=this.size();for(let n of this.countReporters)n.update(r);for(let n of this.progressReporters)n.update(t,r)}}notifyStatusChanged(){this.eventEmitters[e.queueStatusChanged].fire(null),this.progressReporters.clear()}notifyItemFailed(t){let r=t instanceof sw?t.toThrow:t;this.eventEmitters[e.itemFailed].fire(r)}delay(t){return new Promise(r=>setTimeout(r,t))}async kick(){if(!this.itemsInProgress){for(;!this.stopping&&this.queue.size!==0;){let t=this.queue.dequeue();this.itemsInProgress=t.itemCount();let r=0,n=0;do{try{await t.start(this.errorHandler),n&&this.logger.debug(`item succeeded; retries = ${n}`);break}catch(i){if(this.notifyItemFailed(i),!(i instanceof sw&&i.retry)){this.logger.debug(`item failed, not retrying; retries = ${n}`);break}}this.logger.debug(`item failed, retrying in ${r} ms; retries = ${n}`),await this.delay(r),this.logger.debug("retrying"),r===0?r=this.backoffParams.initialMS:r=Math.min(r*this.backoffParams.mult,this.backoffParams.maxMS),n++}while(!this.stopping);this.stopping||this.update(this.itemsInProgress)}this.notifyStatusChanged()}}};function jC(e,t){let r=new Set(t);return e.filter(n=>!r.has(n))}var PN=class e extends X{static defaultCheckpointThreshold=1e3;_checkpointId;_checkpointBlobNames=new Map;_toAdd=new Map;_toRemove=new Set;_apiServer;_logger;_checkpointQueue;_checkpointThreshold;_maxCheckpointBatchSize=1e4;_featureFlagManager;_onContextChange=new tIe.EventEmitter;onContextChange=this._onContextChange.event;get _flags(){return this._featureFlagManager.currentFlags}constructor(t,r,n,i){super(),this._logger=j("BlobsCheckpointManager"),this._checkpointId=void 0,this._apiServer=t,this._featureFlagManager=r,this._checkpointThreshold=i??e.defaultCheckpointThreshold,this.addDisposable(n(s=>{this.updateBlob(s.absPath,s.prevBlobName,s.newBlobName)})),this._checkpointQueue=new NN("checkpoint",{processOne:async(s,o)=>await this._checkpoint(s,o)}),this._logger.info(`BlobsCheckpointManager created. checkpointThreshold: ${this._checkpointThreshold}`)}refBlob(t){let r=this._checkpointBlobNames.get(t);r!==void 0?(this._checkpointBlobNames.set(t,r+1),r===0&&this._toRemove.delete(t)):this._toAdd.set(t,(this._toAdd.get(t)??0)+1)}derefBlob(t){!this.derefFromCheckpoint(t)&&!this.derefFromAdded(t)&&this._logger.error(`derefBlob: blob ${t} not found in checkpoint or toAdd`)}derefFromCheckpoint(t){let r=this._checkpointBlobNames.get(t);return r===void 0||r<=0?(r!==void 0&&this._logger.error(`derefFromCheckpoint: blob ${t} has reference count ${r}. In toRemove? ${this._toRemove.has(t)}`),!1):(this._checkpointBlobNames.set(t,r-1),r===1&&this._toRemove.add(t),!0)}derefFromAdded(t){let r=this._toAdd.get(t);return r===void 0?!1:r<=1?(this._toAdd.delete(t),r===1):(this._toAdd.set(t,r-1),!0)}getCheckpointedBlobNames(){return Array.from(this._checkpointBlobNames.keys())}getContext(){return{checkpointId:this._checkpointId,addedBlobs:Array.from(this._toAdd.keys()),deletedBlobs:Array.from(this._toRemove)}}getContextAdjusted(t,r){let n=new Set(this._toAdd.keys()),i=new Set(this._toRemove);for(let s of t)this._checkpointBlobNames.has(s)||n.add(s),i.delete(s);for(let s of r)this._checkpointBlobNames.has(s)&&i.add(s),n.delete(s);return{checkpointId:this._checkpointId,addedBlobs:Array.from(n),deletedBlobs:Array.from(i)}}blobsPayload(t){let r=this.getCheckpointedBlobNames(),n=jC(t,r),i=jC(r,t);return{checkpointId:this._checkpointId,addedBlobs:n,deletedBlobs:i}}expandBlobs(t){if(t.checkpointId===void 0)return t.addedBlobs;if(t.checkpointId!==this._checkpointId)throw new Error(`expandBlobs: checkpointId mismatch: ${t.checkpointId} != ${this._checkpointId}`);let r=this.getCheckpointedBlobNames();if(r.push(...t.addedBlobs),t.deletedBlobs.length>0){let n=new Set(t.deletedBlobs);return r.filter(i=>!n.has(i))}return r}validateMatching(t,r,n=!1){if(t.checkpointId!==r.checkpointId)return this._logger.error(`checkpointId mismatch: ${t.checkpointId} vs ${r.checkpointId}`),!1;let i=!0,s=jC(t.addedBlobs,r.addedBlobs),o=jC(r.addedBlobs,t.addedBlobs);return(s.length>0||o.length>0)&&(i=!1,this._logger.error(`addedBlobs mismatch: -${s.length}/+${o.length}`),n&&(this._logger.error(`left-added: ${s.slice(0,5).join(",")}`),this._logger.error(`right-added: ${o.slice(0,5).join(",")}`))),s=jC(t.deletedBlobs,r.deletedBlobs),o=jC(r.deletedBlobs,t.deletedBlobs),(s.length>0||o.length>0)&&(i=!1,this._logger.error(`deletedBlobs mismatch: -${s.length}/+${o.length}`),n&&(this._logger.error(`left-deleted: ${s.slice(0,5).join(",")}`),this._logger.error(`right-deleted: ${o.slice(0,5).join(",")}`))),i}updateBlob(t,r,n){this._logger.verbose(`notifyBlobChange ${t}: ${r} to ${n}`),n&&n!==r&&this.refBlob(n),r&&n!==r&&this.derefBlob(r),this._toAdd.size+this._toRemove.size>=this._checkpointThreshold&&this._checkpointQueue.size()===0&&this._queueCheckpoint()}resetCheckpoint(){for(let[t,r]of this._checkpointBlobNames)r>0?this._toAdd.set(t,r):this._toRemove.delete(t)||this._logger.warn(`blob with 0 references was not found in toRemove: ${t}`);for(let t of this._toRemove)this._logger.warn(`blob in toRemove was not found in checkpoint: ${t}`);this._toRemove.clear(),this._checkpointId=void 0,this._checkpointBlobNames.clear(),this._onContextChange.fire(this.getContext())}async awaitEmptyQueue(){await this._checkpointQueue.awaitEmpty(void 0,!1)}async _checkpoint(t,r){let{checkpointId:n,addedBlobs:i,deletedBlobs:s}=t;this._logger.debug(`Begin checkpoint of working set into ${n}`),this._logger.debug(`add ${i.length} blobs, remove ${s.length} blobs into ${n}`);let o={newCheckpointId:""};try{o=await this._apiServer.checkpointBlobs(t)}catch(a){let l=a instanceof Error?a.message:`${a}`,c=this._checkpointId?this._checkpointId:"{initial}";Qr.isAPIErrorWithStatus(a,We.invalidArgument)||Qr.isAPIErrorWithStatus(a,We.unimplemented)?(this._logger.warn(`checkpoint-blobs from ${c} failed with invalid argument: ${l}. Recreating checkpoint.`),this.resetCheckpoint(),this._queueCheckpoint(),r.throwError(a,!1)):(this._logger.error(`checkpoint-blobs failed with error: ${l}.`),r.throwError(a,!1))}if(n!==this._checkpointId)this._logger.warn(`original checkpointId ${n} does not match current checkpointId ${this._checkpointId}. Abandoning new checkpoint.`);else{this._logger.debug(`checkpointId ${n} advanced to ${o.newCheckpointId}`),this._checkpointId=o.newCheckpointId;for(let a of i){let l=this._toAdd.get(a);l===void 0?(this._checkpointBlobNames.set(a,0),this._toRemove.add(a)):(this._checkpointBlobNames.set(a,l),this._toAdd.delete(a))}for(let a of s){let l=this._checkpointBlobNames.get(a);l===void 0?this._logger.warn(`In _checkpoint: deleted blob ${a} not found in checkpoint`):l>0&&this._toAdd.set(a,l),this._checkpointBlobNames.delete(a),this._toRemove.delete(a)}this._onContextChange.fire(this.getContext())}this._toAdd.size+this._toRemove.size>=this._checkpointThreshold&&(this._logger.debug(`starting a new round of checkpointing due to size ${this._toAdd.size} + ${this._toRemove.size}`),this._queueCheckpoint())}_queueCheckpoint(){this._logger.debug("queue checkpoint");let t=Array.from(this._toAdd.keys()).slice(0,this._maxCheckpointBatchSize),r=Array.from(this._toRemove).slice(0,this._maxCheckpointBatchSize),n={checkpointId:this._checkpointId,addedBlobs:t,deletedBlobs:r};this._logger.debug(`queue checkpoint: version: ${n.checkpointId}, add: ${n.addedBlobs.length} blobs, rm: ${n.deletedBlobs.length} blob`),this._checkpointQueue.add(n)}};var ow=V(require("vscode"));function _g(e,t,r,n){let i=0;for(let s of r)if(e.log(t,`  ${s}`),i++,n!==void 0&&i>=n){e.log(t,"  ...");break}}var R6=class{constructor(t,r){this.maxItems=t;this.maxByteSize=r}items=new Map;byteSize=0;addItem(t,r){let n=this.items.get(t);if(n===void 0){if(this.items.size>=this.maxItems||this.byteSize+r.byteSize>=this.maxByteSize)return!1;this.items.set(t,[r]),this.byteSize+=r.byteSize}else n.push(r);return!0}},k6=class{constructor(t){this.maxItemCount=t}items=new Map;get full(){return this.items.size>=this.maxItemCount}addItem(t,r){if(this.items.has(t))return!1;this.items.set(t,r)}},LN=class e extends X{constructor(r,n,i,s,o){super();this.workspaceName=r;this._apiServer=n;this._pathHandler=i;this._pathMap=s;this._logger=j(`DiskFileManager[${r}]`),o===void 0?this._probeBatchSize=e.maxProbeBatchSize:(o<e.minProbeBatchSize?this._logger.verbose(`Rejecting requested probe batch size of ${o} (min = ${e.minProbeBatchSize})`):o>e.maxProbeBatchSize&&this._logger.verbose(`Rejecting requested probe batch size of ${o} (max = ${e.maxProbeBatchSize})`),this._probeBatchSize=Math.max(Math.min(o,e.maxProbeBatchSize),e.minProbeBatchSize)),this._toCalculate=new Zo(this._calculate.bind(this)),this.addDisposable(this._toCalculate),this._toProbe=new Zo(this._probe.bind(this)),this.addDisposable(this._toProbe),this._probeBatch=this._newProbeBatch(),this._toUpload=new Zo(this._upload.bind(this)),this.addDisposable(this._toUpload),this._uploadBatch=this._newUploadBatch(),this._probeRetryWaiters=new Zo(this._enqueueForProbe.bind(this)),this.addDisposable(this._probeRetryWaiters),this._probeRetryKicker=new Bc(this._probeRetryWaiters,e.probeRetryPeriodMs),this.addDisposable(this._probeRetryKicker),this._probeRetryBackoffWaiters=new Zo(this._enqueueForProbe.bind(this)),this._probeRetryBackoffKicker=new Bc(this._probeRetryBackoffWaiters,e.probeRetryBackoffPeriodMs),this.addDisposable(this._probeRetryBackoffKicker)}static minProbeBatchSize=1;static maxProbeBatchSize=1e3;static maxUploadBatchBlobCount=128;static maxUploadBatchByteSize=1e6;static probeRetryPeriodMs=3*1e3;static probeBackoffAfterMs=60*1e3;static probeRetryBackoffPeriodMs=60*1e3;_notAPlainFile="Not a file";_fileNotAccessible="File not readable";_fileNotText="Binary file";_fileUploadFailure="Upload failed";_onDidChangeInProgressItemCountEmitter=new ow.EventEmitter;onDidChangeInProgressItemCount=this._onDidChangeInProgressItemCountEmitter.event;_onQuiescedEmitter=new ow.EventEmitter;_onQuiesced=this._onQuiescedEmitter.event;_textDecoder=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});_toCalculate;_toProbe;_probeBatch;_probeBatchSize;_probeRetryWaiters;_probeRetryKicker;_probeRetryBackoffWaiters;_probeRetryBackoffKicker;_toUpload;_uploadBatch;_itemsInFlight=new Map;_seq=1e3;metrics=new zC("File metrics");_logger;_stopping=!1;_pathsAccepted=this.metrics.counterMetric("paths accepted");_pathsNotAccessible=this.metrics.counterMetric("paths not accessible");_nonFiles=this.metrics.counterMetric("not plain files");_largeFiles=this.metrics.counterMetric("large files");_blobNameCalculationFails=this.metrics.counterMetric("blob name calculation fails");_encodingErrors=this.metrics.counterMetric("encoding errors");_mtimeCacheHits=this.metrics.counterMetric("mtime cache hits");_mtimeCacheMisses=this.metrics.counterMetric("mtime cache misses");_probeBatches=this.metrics.counterMetric("probe batches");_blobNamesProbed=this.metrics.counterMetric("blob names probed");_filesRead=this.metrics.counterMetric("files read");_blobsUploaded=this.metrics.counterMetric("blobs uploaded");_ingestPathMs=this.metrics.timingMetric("ingestPath");_probeMs=this.metrics.timingMetric("probe");_statMs=this.metrics.timingMetric("stat");_readMs=this.metrics.timingMetric("read");_uploadMs=this.metrics.timingMetric("upload");stop(){this.dispose()}dispose(){this._stopping=!0,super.dispose()}get probeBatchSize(){return this._probeBatchSize}get itemsInFlight(){return this._itemsInFlight.size}ingestPath(r,n){this._ingestPathMs.start(),!this._stopping&&(n=$me(n),this._enqueueForCalculate(r,n),this._ingestPathMs.stop())}async awaitQuiesced(){if(!(this._stopping||this._itemsInFlight.size===0))return PA(this._onQuiesced)}_nextSeq(){return this._seq++}_makeAbsPath(r,n){let i=this._pathMap.getRepoRoot(r);if(i!==void 0)return zt(i,n)}_fileTooLargeString(r){return`File too large (${r} > ${this._pathHandler.maxBlobSize})`}_getMtime(r,n,i,s){this._statMs.start();let o=this._pathHandler.classifyPath(r);switch(this._statMs.stop(),o.type){case"inaccessible":this._pathsNotAccessible.increment(),this._pathMapInvalidate(n,i,s,this._fileNotAccessible);return;case"not a file":this._nonFiles.increment(),this._pathMapInvalidate(n,i,s,this._notAPlainFile);return;case"large file":this._largeFiles.increment(),this._pathMapInvalidate(n,i,s,this._fileTooLargeString(o.size));return;case"accepted":return o.mtime}}async _readAndValidate(r,n,i,s){this._readMs.start();let o=await this._pathHandler.readText(r);switch(this._readMs.stop(),this._filesRead.increment(),o.type){case"inaccessible":this._pathsNotAccessible.increment(),this._pathMapInvalidate(n,i,s,this._fileNotAccessible);return;case"large file":this._largeFiles.increment(),this._pathMapInvalidate(n,i,s,this._fileTooLargeString(o.size));return;case"binary":this._pathMapInvalidate(n,i,s,this._fileNotText);return;case"text":return o.contents}}_calculateBlobName(r,n,i,s){try{return this._pathHandler.calculateBlobName(r,n)}catch(o){if(o instanceof DE){this._largeFiles.increment();let a=this._fileTooLargeString(n.length);this._pathMapInvalidate(i,r,s,a)}else this._blobNameCalculationFails.increment(),this._pathMapInvalidate(i,r,s,$e(o));return}}async _calculate(r){if(r===void 0)return;let[n,[i,s]]=r;if(!this._pathMapVerify(i,s,n))return;let o=this._makeAbsPath(i,s);if(o===void 0){this._inflightItemRemove(n);return}let a=this._getMtime(o,i,s,n);if(a===void 0)return;let l,c=this._pathMap.getBlobInfo(i,s,a);if(c!==void 0){this._mtimeCacheHits.increment();let[f,p]=c;if(p>0){this._pathMapUpdate(i,s,n,f,a);return}l=f}else{let f=await this._readAndValidate(o,i,s,n);if(f===void 0||(this._mtimeCacheMisses.increment(),l=this._calculateBlobName(s,f,i,n),l===void 0))return}this._pathsAccepted.increment();let u={folderId:i,relPath:s,blobName:l,mtime:a,startTime:Date.now()};this._enqueueForProbeRetry(n,u)}_newProbeBatch(){return new k6(this._probeBatchSize)}_grabProbeBatch(){if(this._probeBatch.items.size===0)return;let r=this._probeBatch;return this._probeBatch=this._newProbeBatch(),r}async _probe(r){if(r!==void 0){let[o,a]=r;if(!this._pathMapVerify(a.folderId,a.relPath,o)||(this._probeBatch.addItem(o,a),!this._probeBatch.full))return}let n=this._grabProbeBatch();if(n===void 0)return;let i=new Set;for(let[o,a]of n.items)i.add(a.blobName);this._probeBatches.increment(),this._blobNamesProbed.increment(n.items.size),this._logger.verbose(`probe ${i.size} blobs`),this._probeMs.start();let s;try{s=await Ii(async()=>this._apiServer.findMissing([...i]),this._logger)}catch{}if(this._probeMs.stop(),s!==void 0){this._logger.verbose(`find-missing reported ${s.unknownBlobNames.length} unknown blob names and ${s.nonindexedBlobNames.length} nonindexed blob names.`),s.unknownBlobNames.length>0&&(this._logger.verbose("unknown blob names:"),_g(this._logger,"verbose",s.unknownBlobNames,5)),s.nonindexedBlobNames.length>0&&(this._logger.verbose("nonindexed blob names:"),_g(this._logger,"verbose",s.nonindexedBlobNames,5));let o=new Set(s.unknownBlobNames),a=new Set(s.nonindexedBlobNames),l=this._beginUploadBatch();for(let[c,u]of n.items)this._pathMapVerify(u.folderId,u.relPath,c)&&(o.has(u.blobName)?this._enqueueForUpload(c,u.folderId,u.relPath,!1):a.has(u.blobName)?this._enqueueForProbeRetry(c,u):this._pathMapUpdate(u.folderId,u.relPath,c,u.blobName,u.mtime));l.dispose()}else for(let[o,a]of n.items)this._enqueueForProbeRetry(o,a)}_newUploadBatch(){return new R6(e.maxUploadBatchBlobCount,e.maxUploadBatchByteSize)}_grabUploadBatch(){if(this._uploadBatch.items.size===0)return;let r=this._uploadBatch;return this._uploadBatch=this._newUploadBatch(),r}async _upload(r){let n;if(r!==void 0){let[a,{seq:l,folderId:c,relPath:u}]=r;if(!this._pathMapVerify(c,u,l))return;let f=this._getMtime(a,c,u,l);if(f===void 0)return;let p=await this._readAndValidate(a,c,u,l);if(p===void 0)return;let g=this._calculateBlobName(u,p,c,l);if(g===void 0)return;let A;try{A=this._textDecoder.decode(p)}catch(C){this._pathMapInvalidate(c,u,l,$e(C)),this._encodingErrors.increment();return}let y={seq:l,folderId:c,pathName:u,text:A,blobName:g,mtime:f,byteSize:p.length,metadata:[]};if(this._uploadBatch.addItem(g,y))return;n=y}let i=this._grabUploadBatch();if(i===void 0)return;n!==void 0&&this._uploadBatch.addItem(n.blobName,n),this._logger.verbose(`upload ${i.items.size} blobs`);let s=new Array;for(let[a,l]of i.items)s.push(l[0]);this._uploadMs.start();let o=await this._uploadBlobBatch(s);this._uploadMs.stop(),this._blobsUploaded.increment(o.size);for(let[a,l]of i.items){let c=o.get(a);if(c===void 0)for(let u of l)this._pathMapInvalidate(u.folderId,u.pathName,u.seq,this._fileUploadFailure);else for(let u of l){let f={folderId:u.folderId,relPath:u.pathName,blobName:c,mtime:u.mtime,startTime:Date.now()};this._enqueueForProbeRetry(u.seq,f)}}}async _uploadBlobBatch(r){this._logger.verbose(`upload begin: ${r.length} blobs`);for(let s of r)this._logger.verbose(`    - ${s.folderId}:${s.pathName}; expected blob name ${s.blobName}`);let n;try{n=await Ii(async()=>await this._apiServer.batchUpload(r),this._logger)}catch(s){this._logger.error(`batch upload failed: ${$e(s)}`)}let i=new Map;if(n!==void 0)for(let s=0;s<n.blobNames.length;s++)i.set(r[s].blobName,n.blobNames[s]);return await this._uploadBlobsSequentially(r,n?.blobNames.length??0,i),i}async _uploadBlobsSequentially(r,n,i){for(let s=n;s<r.length;s++){let o=r[s];try{this._logger.verbose(`sequential upload of ${o.pathName} -> ${o.blobName}`);let a=await Ii(async()=>this._apiServer.memorize(o.pathName,o.text,o.blobName,[]),this._logger);i.set(o.blobName,a.blobName)}catch{}}}_inflightItemAdd(r,n,i){this._itemsInFlight.set(r,[n,i])}_inflightItemRemove(r){this._itemsInFlight.delete(r),this._onDidChangeInProgressItemCountEmitter.fire(this._itemsInFlight.size),this._itemsInFlight.size===0&&(this._logger.verbose("inflight items signaling empty"),this._onQuiescedEmitter.fire())}_pathMapVerify(r,n,i){if(!this._pathMap.shouldTrack(r,n))return this._inflightItemRemove(i),!1;let s=this._pathMap.getContentSeq(r,n);return s!==void 0&&s>=i?(this._inflightItemRemove(i),!1):!0}_pathMapUpdate(r,n,i,s,o){this._inflightItemRemove(i),this._pathMap.update(r,n,i,s,o)}_pathMapInvalidate(r,n,i,s){this._logger.verbose(`path map invalidate: ${r}:${n} (${s})`),this._pathMap.markUntrackable(r,n,i,s),this._inflightItemRemove(i),this._pathMap.markUntrackable(r,n,i,s)}_enqueueForCalculate(r,n){let i=this._nextSeq();this._inflightItemAdd(i,r,n),this._toCalculate.insert(i,[r,n])?this._toCalculate.kick():this._inflightItemRemove(i)}_enqueueForProbe(r){if(r===void 0)this._toProbe.kick();else{let[n,i]=r;this._logger.verbose(`probe enqueue ${i.blobName} -> ${n}, ${i.folderId}:${i.relPath}`),this._toProbe.insert(n,i)}return Promise.resolve()}_beginUploadBatch(){return new ow.Disposable(()=>this._toUpload.kick())}_enqueueForUpload(r,n,i,s=!0){this._logger.verbose(`upload enqueue ${n}:${i} -> ${r}`);let o=this._makeAbsPath(n,i);if(o===void 0){this._inflightItemRemove(r);return}let a=this._toUpload.get(o);if(a!==void 0){let l=a.seq;if(l>r)this._inflightItemRemove(l);else if(l<r){this._inflightItemRemove(r);return}}this._toUpload.insert(o,{seq:r,folderId:n,relPath:i},!0),s&&this._toUpload.kick()}_enqueueForProbeRetry(r,n){Date.now()-n.startTime<e.probeBackoffAfterMs?(this._logger.verbose(`probe-retry enqueue ${n.blobName} -> ${r}, ${n.folderId}:${n.relPath}`),this._probeRetryWaiters.insert(r,n)):(this._logger.verbose(`probe-retry enqueue backoff ${n.blobName} -> ${r}, ${n.folderId}:${n.relPath}`),this._probeRetryBackoffWaiters.insert(r,n))}};var wf=class{static cacheFileName="mtime-cache.json";static tmpFileName="mtime-cache.json.tmp"},F6=class{constructor(t=TE){this.namingVersion=t}entries=new Array};function jCt(e){if(!(e.mtime===void 0||typeof e.mtime!="number"||!e.mtime)&&!(e.name===void 0||typeof e.name!="string"||!e.name))return{mtime:e.mtime,name:e.name}}function ZCt(e){return zt(e,wf.cacheFileName)}function ON(e){let t=ZCt(e);return dn(t)}async function nIe(e,t){let r=zt(e,wf.cacheFileName),n=zt(t,wf.cacheFileName);await kl(t),await RW(r,n)}async function iIe(e,t){let r=new Map,n=j(`MtimeCache[${e}]`),i=zt(t,wf.cacheFileName);n.info(`reading blob name cache from ${i}`);try{let s=0,o=await rn(i),a=JSON.parse(o);if(a.namingVersion===void 0||a.namingVersion!==TE)n.info(`blob naming version ${a.namingVersion} !== ${TE}`);else if(Array.isArray(a.entries))for(let[l,c]of a.entries){let u=jCt(c);u!==void 0&&(r.set(l,{mtime:u.mtime,name:u.name}),s++)}n.info(`read ${s} entries from ${i}`)}catch(s){let o=$e(s);s instanceof Error&&"code"in s&&s.code==="ENOENT"?n.info(`no blob name cache found at ${i} (probably new source folder); error = ${o}`):n.error(`failed to read blob name cache ${i}: ${o}`)}return r}var UN=class extends wf{constructor(r,n){super();this._name=r;this._cacheDirName=n;this._cacheFileName=zt(this._cacheDirName,wf.cacheFileName),this._tmpFileName=zt(this._cacheDirName,wf.tmpFileName)}_cacheFileName;_tmpFileName;_logger=j("MTimeCacheWriter");get cacheFileName(){return this._cacheFileName}async write(r){this._logger.debug(`persisting to ${this._cacheFileName}`);let n=new F6;for(let[i,s,o]of r)n.entries.push([i,{mtime:s,name:o}]);await kl(this._cacheDirName),await ku(this._tmpFileName,JSON.stringify(n,void 0,4)),await RW(this._tmpFileName,this._cacheFileName),this._logger.debug(`persisted ${n.entries.length} entries at naming version ${TE} to ${this._cacheFileName}`)}};var oIe=V(vs()),lw=V(require("vscode"));var sIe=require("console");var M6=class{constructor(t,r,n,i){this.seq=t;this.start=r;this.length=n;this.origLength=i}get end(){return this.start+this.length}get localShift(){return this.origLength-this.length}},ZC=class e{constructor(t,r,n,i,s){this.seq=t;this.start=r;this.length=n;this.origStart=i;this.origLength=s}static fromMod(t,r){return new e(t.seq,t.start,t.length,t.start+r,t.origLength)}get end(){return this.start+this.length}get origEnd(){return this.origStart+this.origLength}setStart(t){let r=this.start-t;this.start-=r,this.length+=r,this.origStart-=r,this.origLength+=r}setEnd(t){let r=t-this.end;this.length+=r,this.origLength+=r}},XC=class e{static _logger=j("ChangeTracker");_modifications=[];_seq=0;get seq(){return this._seq}get empty(){return this._modifications.length===0}get length(){return this._modifications.length}translate(t,r){let n=t+Math.max(r,0),i=0,s=0;for(;i<this._modifications.length&&this._modifications[i].end<t;)s+=this._modifications[i].localShift,i++;let a=(i===this._modifications.length||t<this._modifications[i].start?t:this._modifications[i].start)+s;for(;i<this._modifications.length&&this._modifications[i].end<n;)s+=this._modifications[i].localShift,i++;let c=(i===this._modifications.length||n<this._modifications[i].start?n:this._modifications[i].start+this._modifications[i].origLength)+s;return[a,c-a]}apply(t,r,n,i){let s=0,o,a,l,c=r,u=0,f;for(;s<this._modifications.length&&this._modifications[s].end<r;)s++;if(f=s,s<this._modifications.length&&this._modifications[s].start<=r){o=this._modifications[s],a=o.length,l=o.origLength;let p=c-o.start;(0,sIe.assert)(p<=o.length);let g=Math.min(o.length-p,n-u);a-=g,u+=g,c=o.end,++s}else o=new M6(t,r,0,0),a=0,l=0;for(;s<this._modifications.length&&u<n;s++){let p=this._modifications[s],g=p.start-c,A=Math.min(g,n-u);if(l+=A,u+=A,c+A<p.start)break;let y=Math.min(p.length,n-u);a+=p.length-y,u+=y,l+=p.origLength,c=p.end}for(o.length=a+i,o.origLength=l+(n-u),o.seq=t,this._modifications.splice(f,s-f,o),s=f+1;s<this._modifications.length;s++)this._modifications[s].start+=i-n;this._seq=t}merge(t){for(let r of t._modifications)this.apply(r.seq,r.start,r.origLength,r.length)}advance(){for(let t of this._modifications)t.origLength=t.length}getEdits(){let t=[],r=0;for(let n of this._modifications)t.push(new ZC(n.seq,n.start,n.length,n.start+r,n.origLength)),r+=n.localShift;return t}countChunks(t){if(this._modifications.length===0)return 0;let r=this._modifications.at(-1).end;return this.getChunks(t,r).length}getChunks(t,r){if(this._modifications.length===0)return[];let n=new Array,i,s=0;for(let a of this._modifications){let l=ZC.fromMod(a,s);if(s+=a.localShift,i!==void 0&&(l.start-i.start>=t||l.end-i.start>t&&l.length<=t)&&(n.push(i),i=void 0),i===void 0)i=new ZC(l.seq,l.start,0,l.origStart,0);else{let f=l.start-i.end;i.length+=f,i.origLength+=f}let c=l.length,u=Math.min(c,t-i.length);i.length+=u,i.origLength+=l.origLength,i.seq=Math.max(i.seq,l.seq);for(let f=u;f<c;f+=u){n.push(i);let p=l.start+f;i=new ZC(l.seq,p,0,l.origEnd,0),u=Math.min(c-f,t),i.length+=u}}return i!==void 0&&n.push(i),this._widen(n,t,r),this._validateChunks(n)}_widen(t,r,n){let i=0;for(let s=0;s<t.length;s++){let o=t[s],a=s+1===t.length?n:t[s+1].start,l=r-o.length,c,u,f=Math.floor(o.start-l/2);f<=i?(c=i,u=Math.min(c+r,a)):(u=Math.min(f+r,a),c=Math.max(u-r,i)),o.setStart(c),o.setEnd(u),i=u}}_validateChunks(t){let r=new Array;for(let n of t)n.origStart>n.origEnd?e._logger.error("invalid chunk: ",JSON.stringify(n)):r.push(n);return r}};var aIe=6,lIe=6,aw=aIe*lIe,XCt=1e3,evt=2e3,tvt=60*1e3,rvt=200,nvt=30*1e3,ivt=30*1e3,svt=60*1e3,qN=class{constructor(t,r,n,i){this.folderId=t;this.pathName=r;this.key=n;this.appliedSeq=i;this.recentChangesets=new jc(lIe),this.addChangeset(i),this.changesSinceUpload=new XC}uploadedBlobName;uploadedSeq;recentChangesets;changesSinceUpload;uploadRequested=!1;inProgressUpload;_embargoed=!1;invalidateUploadState(){this.uploadedBlobName=void 0,this.uploadedSeq=void 0}_clear(){this.uploadedBlobName=void 0,this.uploadedSeq=void 0,this.recentChangesets.clear(),this.changesSinceUpload=void 0,this.uploadRequested=!1,this.inProgressUpload=void 0}embargo(){this._clear(),this._embargoed=!0}get embargoed(){return this._embargoed}get uploadInProgress(){return this.inProgressUpload!==void 0}getBlobName(){return this.recentChanges(!1)?.blobName}longestHistory(t){if(this.uploadedSeq===void 0)return;let r=this.recentChangesets.at(0);if(r!==void 0){if(t)return{changeTracker:r.changeTracker,blobName:this.uploadedBlobName};if(this.uploadedBlobName!==void 0&&!(r.initialSeq>this.uploadedSeq))return{changeTracker:r.changeTracker,blobName:this.uploadedBlobName}}}recentChanges(t){return this.inProgressUpload!==void 0?this.inProgressUpload.savedChangeset:this.longestHistory(t)}applyAll(t,r,n,i){for(let s of this.recentChangesets)s.changeTracker.apply(t,r,n,i);this.appliedSeq=t}advanceAll(){for(let t of this.recentChangesets)t.changeTracker.advance()}addChangeset(t){this.recentChangesets.addItem({initialSeq:t,changeTracker:new XC})}purgeChangesets(t){let r=0;for(;!this.recentChangesets.empty&&!((this.recentChangesets.at(1)?.initialSeq??this.appliedSeq)>=t);)this.recentChangesets.shiftLeft(1),r++;return r}},Q6=class extends qN{constructor(r,n,i,s,o){super(r,n,i,o);this.document=s}get documentType(){return 0}getText(){return this.document.getText()}},N6=class extends qN{constructor(r,n,i,s,o){super(r,n,i,o);this.document=s}get documentType(){return 1}getText(){return GG(this.document)}};function ovt(e){return e.getCells!==void 0}function avt(e){return ovt(e)?e:ZCe(e)}var VN=class e extends X{constructor(r,n,i,s,o,a){super();this._apiServer=r;this._completionServer=n;this._configListener=i;this._blobNameCalculator=s;this._pathMap=o;this._sequenceGenerator=a;this._logger=j("OpenFileManager"),this._uploadQueue=new Ma(this._upload.bind(this)),this.addDisposable(this._uploadQueue),this._verifyWaiters=new Ma(this._enqueueForVerify.bind(this)),this.addDisposable(this._verifyWaiters),this._verifyWaitersKicker=new Bc(this._verifyWaiters,evt),this.addDisposable(this._verifyWaitersKicker),this._longWaiters=new Ma(this._enqueueForVerify.bind(this)),this.addDisposable(this._longWaiters),this._longWaitersKicker=new Bc(this._longWaiters,tvt),this.addDisposable(this._longWaitersKicker),this._verifyQueue=new Ma(this._verify.bind(this)),this.addDisposable(this._verifyQueue)}_trackedFolders=new Map;_uploadQueue;_verifyWaiters;_longWaiters;_verifyWaitersKicker;_longWaitersKicker;_verifyQueue;_verifyBatch=new Map;_prevUpdatedDocument;_logger;openSourceFolder(r){if(this._trackedFolders.has(r))throw new Error(`Source folder ${r} is already open`);return this._trackedFolders.set(r,new Map),this._logger.info(`Opened source folder ${r}`),new lw.Disposable(()=>{this._closeSourceFolder(r)})}_closeSourceFolder(r){this._trackedFolders.delete(r),this._logger.info(`Closed source folder ${r}`)}startTracking(r,n,i){this._trackDocument(r,n,i)}stopTracking(r,n,i){let s=this._getFolder(r);if(s===void 0)return;let o=s.get(n);o!==void 0&&(i!==void 0&&o.documentType!==i||(s.delete(n),this._prevUpdatedDocument===o&&(this._prevUpdatedDocument=void 0),this._logger.verbose(`stop tracking ${r}:${n}`)))}isTracked(r,n){return this._getDocument(r,n)!==void 0}getTrackedPaths(r){let n=this._getFolder(r);return n===void 0?new Array:Array.from(n.keys())}loseFocus(){this._setFocus(void 0)}get _chunkSize(){return this._completionServer.completionParams.chunkSize}_getFolder(r){return this._trackedFolders.get(r)}_getDocument(r,n,i){let s=typeof r=="number"?this._getFolder(r):r;if(s===void 0)return;let o=s.get(n);if(o!==void 0&&!(i!==void 0&&o.key!==i))return o}getBlobName(r,n){return this._getDocument(r,n)?.getBlobName()}translateRange(r){let n=this._getDocument(r.folderId,r.relPath);if(n===void 0||n.uploadedBlobName===void 0)return;let i=n.changesSinceUpload;if(i===void 0)return;let s=i.translate(r.beginOffset,r.endOffset-r.beginOffset);return{blobName:n.uploadedBlobName,beginOffset:s[0],endOffset:s[0]+s[1]}}notifyMissingBlob(r,n,i){let s=this._getDocument(r,n);return s===void 0||s.uploadedBlobName!==i?!1:(s.invalidateUploadState(),this._tryEnqueueUpload(r,n,"blob name reported missing",s),!0)}getRecencySummary(r){let n=new Map,i=new Array;for(let[s,o]of this._trackedFolders){let a=new Map;n.set(s,a);for(let[l,c]of o){if(c.embargoed||c.uploadedSeq===void 0)continue;let u=c.recentChanges(!1);if(u===void 0||u.blobName===void 0)continue;a.set(l,u.blobName);let f=c.getText(),p=u.changeTracker.getChunks(r,f.length);if(p.length===0)continue;let g=this._blobNameCalculator.calculateNoThrow(l,f);for(let A of p)i.push({seq:A.seq,uploaded:A.seq<=c.uploadedSeq,folderId:s,pathName:l,blobName:u.blobName,text:f.slice(A.start,A.end),origStart:A.origStart,origLength:A.origLength,expectedBlobName:g})}}return i.sort(e._compareChunks),{folderMap:n,recentChunks:i}}getRecentChunkInfo(r,n=!1){let i=new Array;for(let[s,o]of this._trackedFolders)for(let[a,l]of o){if(l.embargoed||l.uploadedSeq===void 0)continue;let c=l.recentChanges(n);if(c===void 0)continue;let u=c.changeTracker.getChunks(r,l.getText().length);if(u.length!==0)for(let f of u)i.push({seq:f.seq,uploaded:f.seq<=l.uploadedSeq,folderId:s,pathName:a,blobName:c.blobName})}return i.sort(e._compareChunks),i}static _compareChunks(r,n){return r.uploaded===n.uploaded?n.seq-r.seq:r.uploaded?1:-1}applyTextDocumentChange(r,n,i){let s=this._getDocument(r,n);if(s===void 0){this._trackDocument(r,n,i.document);return}if(!this._prepareForUpdate(s)||i.contentChanges.length===0)return;let o=i.contentChanges.map(a=>[a.rangeOffset,a.rangeLength,a.text.length]);this._applyChangedRanges(r,n,s,o)}applyNotebookChange(r,n,i){let s=this._getDocument(r,n);if(s===void 0){this._trackDocument(r,n,i.notebook);return}if(!this._prepareForUpdate(s)||i.contentChanges.length===0)return;let o=i.notebook.getCells().slice(),a=new Array;i.contentChanges.slice().reverse().forEach(l=>{o.splice(l.range.start,l.addedCells.length),o.splice(l.range.start,0,...l.removedCells);let c=o.slice(0,l.range.start).every(y=>y.kind===lw.NotebookCellKind.Markup),u=o.slice(l.range.end).every(y=>y.kind===lw.NotebookCellKind.Markup),f=jy(o.slice(0,l.range.start)).length;f>0&&!c&&!u&&(f+=o_.length);let p=!c||!u?o_.length:0,g=jy(l.addedCells).length;g>0&&(g+=p);let A=jy(l.removedCells).length;A>0&&(A+=p),(g>0||A>0)&&a.push([f,A,g])}),a.reverse(),this._applyChangedRanges(r,n,s,a)}_setFocus(r){this._prevUpdatedDocument!==void 0&&r!==this._prevUpdatedDocument&&(this._tryEnqueueUpload(this._prevUpdatedDocument.folderId,this._prevUpdatedDocument.pathName,"document lost focus"),this._purgeUnneededChangesets()),this._prevUpdatedDocument=r}_trackDocument(r,n,i){let s=this._getFolder(r);if(s===void 0)throw new Error(`Source folder ${r} is not open`);let o=this._getDocument(s,n);if(this._setFocus(o),o!==void 0)return;let a=this._sequenceGenerator.next(),l=avt(i);if(l===void 0){let p=i;o=new Q6(r,n,a,p,a)}else o=new N6(r,n,a,l,a);s.set(n,o);let c=o.getText(),u=this._blobNameCalculator.calculate(n,c);if(u===void 0){this._embargo(r,n,o,"blob name calculation failed");return}this._pathMap.getAnyPathName(u)===void 0?this._tryEnqueueUpload(r,n,"new document has no blob name",o):(o.uploadedBlobName=u,o.uploadedSeq=o.appliedSeq),this._logger.verbose(`start tracking ${r}:${n}`)}_prepareForUpdate(r){return this._setFocus(r),!r.embargoed}_applyChangedRanges(r,n,i,s){let o=this._sequenceGenerator.next();i.recentChangesets.empty&&(i.addChangeset(o),this._logger.verbose(`apply: new changeset for ${r}:${n}; total = ${i.recentChangesets.length}`));let a=i.inProgressUpload;for(let u of s){let[f,p,g]=u;a!==void 0&&(a.savedChangeset!==void 0&&a.savedChangeset.changeTracker.apply(o,f,p,g),a.changesSinceUpload.apply(o,f,p,g)),i.applyAll(o,f,p,g),i.changesSinceUpload?.apply(o,f,p,g)}if(i.appliedSeq=o,a!==void 0){let u=a.changesSinceUpload.length>=rvt;u||(u=a.changesSinceUpload.countChunks(this._chunkSize)>=aw),u&&this._cancelInProgressUpload(r,n,i)}if(i.changesSinceUpload!==void 0){let u=i.changesSinceUpload.countChunks(this._chunkSize);u>1&&this._tryEnqueueUpload(r,n,"multiple non-uploaded chunks",i),u>=aw&&(this._logger.verbose(`apply: no longer tracking non-uploaded changes for ${r}:${n}`),i.changesSinceUpload=void 0)}let c=i.recentChangesets.at(-1).changeTracker.countChunks(this._chunkSize);c>=aIe&&(i.addChangeset(o),this._logger.verbose(`apply: new changeset for ${r}:${n}; chunks = ${c}; total = ${i.recentChangesets.length}`))}_cancelInProgressUpload(r,n,i){this._logger.verbose(`cancel in-progress upload: ${r}:${n}`),i.inProgressUpload=void 0,i.key=this._sequenceGenerator.next()}_validateInProgressUpload(r,n,i){let s=this._getDocument(r,n,i);if(!(s===void 0||s.inProgressUpload===void 0))return[s,s.inProgressUpload]}_tryEnqueueUpload(r,n,i,s){let o=s??this._getDocument(r,n);o!==void 0&&(o.uploadRequested||o.appliedSeq!==o.uploadedSeq&&o.appliedSeq!==o.inProgressUpload?.uploadSeq&&(this._logger.verbose(`upload request: ${r}:${n}; reason = ${i}`),o.uploadRequested=!0,o.uploadInProgress?this._logger.verbose(`upload request delayed: upload for ${r}:${n} already in progress`):this._enqueueUpload(r,n,o.key)))}_retryUpload(r,n){this._logger.verbose(`retry upload; ${r}:${n}`);let i=this._getDocument(r,n);if(i===void 0){this._logger.verbose(`retry upload: document is no longer tracked; ${r}:${n}`);return}if(i.inProgressUpload!==void 0){this._logger.verbose(`retry upload: upload already in progress; ${r}:${n}`);return}i.uploadRequested=!0,this._enqueueUpload(r,n,i.key)}_enqueueUpload(r,n,i){this._uploadQueue.insert([r,n,i])&&(this._logger.verbose(`enqueue upload: ${r}:${n}`),this._uploadQueue.kick())}async _upload(r){if(r===void 0)return;let[n,i,s]=r,o=this._getDocument(n,i,s);if(o===void 0){this._logger.verbose(`upload: upload cancelled or no longer tracking document ${n}:${i}`);return}o.uploadRequested=!1;let a=o.getText(),l=this._blobNameCalculator.calculate(i,a);if(l===void 0){this._embargo(n,i,o,"failed to compute blob name");return}let c=o.longestHistory(!1),u=c===void 0||c.blobName===void 0?void 0:{changeTracker:(0,oIe.cloneDeep)(c.changeTracker),blobName:c.blobName};o.inProgressUpload={uploadSeq:o.appliedSeq,blobName:l,savedChangeset:u,changesSinceUpload:new XC},o.advanceAll(),o.uploadedBlobName=void 0;let f;try{this._logger.verbose(`upload: begin; ${n}:${i}, ${l}`);let g=Date.now();f=await Ii(async()=>{if(!(Date.now()-g>nvt)&&this._validateInProgressUpload(n,i,s))return this._apiServer.memorize(i,a,l,[])},this._logger)}catch(g){return this._logger.verbose(`upload: failed; ${n}:${i}, ${l}; ${$e(g)};`),this._embargo(n,i,o,`upload encountered permanent error: ${$e(g)}`)}if(!this._validateInProgressUpload(n,i,s))return this._logger.verbose(`upload: upload cancelled; pathName = ${n}:${i}`),this._retryUpload(n,i);if(f===void 0)return this._logger.verbose(`upload: upload timed out, cancelling; pathName = ${n}:${i}`),this._cancelInProgressUpload(n,i,o),this._retryUpload(n,i);let p=f.blobName;p===l?this._logger.verbose(`upload: completed; ${n}:${i}, ${p}`):this._logger.error(`upload: completed with mismatched blobName; pathName, received, expected = ${n}:${i}, ${p}, ${l}`),o.inProgressUpload.blobName=p,this._enqueueVerifyWaiter({folderId:n,pathName:i,key:s,startTime:Date.now()},p)}_requeueVerifyWaiter(r,n){let i=r.folderId,s=r.pathName;if(!this._validateInProgressUpload(i,s,r.key))return this._logger.verbose(`requeue verify-wait: upload cancelled; ${i}:${s}, ${n}`),this._retryUpload(i,s);Date.now()-r.startTime>svt?(this._logger.verbose(`verify-wait: enqueue long; pathName = ${i}:${s}`),this._longWaiters.insert(r)):this._enqueueVerifyWaiter(r,n)}_enqueueVerifyWaiter(r,n){this._logger.verbose(`verify-wait: enqueue; ${r.folderId}:${r.pathName}, ${n}`),this._verifyWaiters.insert(r)}_enqueueForVerify(r){return r===void 0?(this._verifyQueue.kick(),Promise.resolve()):(this._verifyQueue.insert(r),Promise.resolve())}_grabVerifyBatch(){if(this._verifyBatch.size===0)return;let r=this._verifyBatch;return this._verifyBatch=new Map,r}async _verify(r){if(r!==void 0){let o=this._getDocument(r.folderId,r.pathName,r.key);if(o===void 0||o.inProgressUpload===void 0)return;let a=this._verifyBatch.get(o.inProgressUpload.blobName);if(a===void 0&&(a=new Array,this._verifyBatch.set(o.inProgressUpload.blobName,a)),a.push(r),this._verifyBatch.size<XCt)return}let n=this._grabVerifyBatch();if(n===void 0)return;let i=[...n.keys()];this._logger.verbose(`verify batch: blob count = ${i.length}`);let s;try{let o=Date.now();s=await Ii(async()=>{if(!(Date.now()-o>ivt))return this._apiServer.findMissing(i)},this._logger)}catch{}if(s===void 0){this._logger.verbose("verify: timeout exceeded");for(let o of i){let a=n.get(o);for(let l of a)this._requeueVerifyWaiter(l,o)}}else{this._logVerifyResult(s);let o=new Set(s.unknownBlobNames),a=new Set(s.nonindexedBlobNames);for(let[l,c]of n)if(o.has(l))for(let u of c)this.notifyMissingBlob(u.folderId,u.pathName,l);else if(a.has(l))for(let u of c)this._requeueVerifyWaiter(u,l);else for(let u of c)this._commit(u,l)}}_commit(r,n){let i=r.folderId,s=r.pathName,o=this._validateInProgressUpload(i,s,r.key);if(o===void 0){this._logger.verbose(`commit: upload cancelled for ${i}:${s}`);return}let[a,l]=o;a.inProgressUpload=void 0,this._logger.verbose(`commit: ${i}:${s}, ${n}; uploadSeq = ${l.uploadSeq}`),a.uploadedBlobName=n,a.uploadedSeq=l.uploadSeq,a.changesSinceUpload=l.changesSinceUpload,a.uploadRequested&&this._retryUpload(r.folderId,r.pathName)}_purgeUnneededChangesets(){let r=this.getRecentChunkInfo(this._chunkSize,!0);if(r.length<aw)return;let n=r[aw-1].seq,i=new Set;for(let s=aw;s<r.length;s++){let o=this._getDocument(r[s].folderId,r[s].pathName);o!==void 0&&i.add(o)}for(let s of i){if(s===void 0)continue;let o=s.purgeChangesets(n);o>0&&this._logger.verbose(`purge: removed ${o} changesets from ${s.folderId}:${s.pathName}`)}}_embargo(r,n,i,s){this._logger.info(`embargoing: ${r}:${n} reason = ${s}`),i.embargo()}_logVerifyResult(r){let n=r.unknownBlobNames.length>0?"error":"verbose";this._logger.log(n,`find-missing reported ${r.unknownBlobNames.length} unknown blob names and ${r.nonindexedBlobNames.length} nonindexed blob names.`),r.unknownBlobNames.length>0&&(this._logger.log(n,"unknown blob names:"),_g(this._logger,n,r.unknownBlobNames,5)),r.nonindexedBlobNames.length>0&&(this._logger.log(n,"nonindexed blob names:"),_g(this._logger,n,r.nonindexedBlobNames,5))}};var cIe=require("buffer");var HN=class{constructor(t,r){this._fileReader=r;this._blobNameCalculator=new rh(t)}_blobNameCalculator;get maxBlobSize(){return this._blobNameCalculator.maxBlobSize}classifyPath(t){let r=this._fileReader.stat(t);return r?r.type!=="File"?{type:"not a file",mtime:r.mtime}:r.size>this._blobNameCalculator.maxBlobSize?{type:"large file",mtime:r.mtime,size:r.size}:{type:"accepted",size:r.size,mtime:r.mtime}:{type:"inaccessible"}}async readText(t){let r;try{if(r=await this._fileReader.read(t),r===void 0)return{type:"inaccessible"}}catch{return{type:"inaccessible"}}return(0,cIe.isUtf8)(r)?r.length>this._blobNameCalculator.maxBlobSize?{type:"large file",size:r.length}:{type:"text",contents:r}:{type:"binary"}}calculateBlobName(t,r){return this._blobNameCalculator.calculateOrThrow(t,r)}};var WN=V(require("vscode"));var GN=class{_nextFolderId=100;_sourceFolders=new Map;_blobNameChangedEmitter=new WN.EventEmitter;_nextEntryTS=1e3;_logger=j("PathMap");constructor(){}dispose(){for(let[t,r]of this._sourceFolders)r.dispose()}get nextEntryTS(){return this._nextEntryTS}get onDidChangeBlobName(){return this._blobNameChangedEmitter.event}onDidChangePathStatus(t){return this._sourceFolders.get(t)?.onDidChangePathStatus}openSourceFolder(t,r){for(let[o,a]of this._sourceFolders){if(Oy(a.folderRoot,t))throw new Error(`Source folder ${t} is already open`);if(ks(t,a.folderRoot))throw new Error(`Source folder ${t} contains ${a.folderRoot}`);if(ks(a.folderRoot,t))throw new Error(`Source folder ${a.folderRoot} contains ${t}`)}let n=this._nextFolderId++,i=new P6(t,r);this._sourceFolders.set(n,i);let s=i.onDidChangeBlobName(this._handleBlobNameChangeEvent.bind(this));return i.addDisposable(s),this._logger.info(`Opened source folder ${t} with id ${n}`),n}closeSourceFolder(t){let r=this._sourceFolders.get(t);if(r===void 0)return;r.clear();let n=r.folderRoot;this._sourceFolders.delete(t),r.dispose(),this._logger.info(`Closed source folder ${n} with id ${t}`)}_handleBlobNameChangeEvent(t){this._blobNameChangedEmitter.fire(t)}getRepoRoot(t){return this._sourceFolders.get(t)?.repoRoot}hasFile(t,r){return this._sourceFolders.get(t)?.hasFile(r)??!1}getBlobName(t,r){return this._sourceFolders.get(t)?.getBlobName(r)}getBlobInfo(t,r,n){return this._sourceFolders.get(t)?.getBlobInfo(r,n)}getAnyPathName(t){for(let r of this._sourceFolders.values()){let n=r.getPathName(t);if(n!==void 0)return this._makeQualifiedPathName(r,n)}}getAllPathNames(t){let r=new Array;for(let n of this._sourceFolders.values()){let i=n.getPathName(t);i!==void 0&&r.push(new qe(n.repoRoot,i))}return r}getUniquePathCount(t){let r=0;for(let n of this._sourceFolders.values())n.getPathName(t)!==void 0&&r++;return r}getAllQualifiedPathNames(t){return this.getAllQualifiedPathInfos(t).map(r=>r.qualifiedPathName)}getAllQualifiedPathInfos(t){let r=new Array;for(let n of this._sourceFolders.values()){let i=n.getPathInfo(t);if(i!==void 0){let[s,o]=i;r.push({qualifiedPathName:new qe(n.repoRoot,t),fileType:s,isAccepted:o.accepted})}}return r}getAllPathInfo(t){let r=new Array;for(let n of this._sourceFolders.values()){let i=n.getPathName(t);i!==void 0&&r.push([n.folderRoot,n.repoRoot,i])}return r}getPathInfo(t,r){return this._sourceFolders.get(t)?.getPathInfo(r)}reportMissing(t){for(let r of this._sourceFolders.values()){let n=r.reportMissing(t);if(n!==void 0)return this._makeQualifiedPathName(r,n)}}insert(t,r,n,i){let s=this._nextEntryTS++;this._sourceFolders.get(t)?.insert(r,s,n,i)}remove(t,r){this._sourceFolders.get(t)?.remove(r)}shouldTrack(t,r){return this._sourceFolders.get(t)?.shouldTrack(r)??!1}getContentSeq(t,r){return this._sourceFolders.get(t)?.getContentSeq(r)}update(t,r,n,i,s){this._sourceFolders.get(t)?.update(r,n,i,s)}markUntrackable(t,r,n,i){this._sourceFolders.get(t)?.markUntrackable(r,n,i)}purge(t,r){this._sourceFolders.get(t)?.purge(r)}*pathsWithBlobNames(){for(let[t,r]of this._sourceFolders)for(let[n,i,s]of r.pathsWithBlobNames())yield[t,r.repoRoot,n,i,s]}*pathsInFolder(t){let r=this._sourceFolders.get(t);r!==void 0&&(yield*r.allPaths())}enablePersist(t,r,n){this._sourceFolders.get(t)?.enablePersist(r,n)}_makeQualifiedPathName(t,r){return new qe(t.repoRoot,r)}trackedFileCount(t){return this._sourceFolders.get(t)?.trackedFileCount??0}getFolderIds(){return Array.from(this._sourceFolders.keys())}},P6=class extends X{constructor(r,n){super();this.folderRoot=r;this.repoRoot=n}static defaultPersistThreshold=100;_allPathNames=new Map;_trackableFilePaths=new Set;_blobNameToPathName=new Map;_persistState=void 0;_pathStatusChangedEmitter=new WN.EventEmitter;_blobNameChangedEmitter=new WN.EventEmitter;get onDidChangePathStatus(){return this._pathStatusChangedEmitter.event}get onDidChangeBlobName(){return this._blobNameChangedEmitter.event}get trackedFileCount(){return this._trackableFilePaths.size}shouldTrack(r){let n=this._allPathNames.get(r);return n===void 0?!1:n.fileType==="File"&&n.pathAcceptance.accepted}getContentSeq(r){return this._allPathNames.get(r)?.fileInfo?.contentSeq}insert(r,n,i,s){let o=this._allPathNames.get(r),a=o===void 0||o.fileType!==i||o.pathAcceptance.format()!==s.format();if(o===void 0)o={entryTS:n,fileType:i,pathAcceptance:s},this._allPathNames.set(r,o);else{let l=o.fileInfo;o.entryTS=n,o.fileType=i,o.pathAcceptance=s,s.accepted||(o.fileInfo=void 0,l?.trackable&&(this._blobNameToPathName.delete(l.blobName),this._publishBlobNameChange(r,l.blobName,void 0),this._markDirty()))}o.fileType==="File"&&o.pathAcceptance.accepted&&o.fileInfo?.trackable!==!1?this._trackableFilePaths.add(r):this._trackableFilePaths.delete(r),a&&this._pathStatusChangedEmitter.fire({relPath:r})}remove(r){let n=this._allPathNames.get(r);if(n!==void 0){if(this._allPathNames.delete(r),this._trackableFilePaths.delete(r),n.fileInfo!==void 0&&n.fileInfo.trackable){let i=n.fileInfo.blobName;this._blobNameToPathName.delete(i),this._publishBlobNameChange(r,i,void 0),this._markDirty()}this._pathStatusChangedEmitter.fire({relPath:r})}}clear(){for(let[r,n]of this._allPathNames)n.fileInfo!==void 0&&n.fileInfo.trackable&&this._publishBlobNameChange(r,n.fileInfo.blobName,void 0);this._allPathNames.clear(),this._trackableFilePaths.clear(),this._blobNameToPathName.clear(),this._markDirty()}update(r,n,i,s){let o=this._allPathNames.get(r);if(o===void 0||o.fileType!=="File"||!o.pathAcceptance.accepted||o.fileInfo!==void 0&&o.fileInfo.contentSeq>n)return;let a=o.fileInfo===void 0?!0:o.fileInfo.trackable,l;o.fileInfo?.trackable&&(l=o.fileInfo.blobName),o.fileInfo={trackable:!0,contentSeq:n,blobName:i,mtime:s},this._trackableFilePaths.add(r),i!==l&&(l!==void 0&&this._blobNameToPathName.delete(l),this._blobNameToPathName.set(i,r),this._publishBlobNameChange(r,l,i),this._markDirty()),(!a||l===void 0)&&this._pathStatusChangedEmitter.fire({relPath:r})}markUntrackable(r,n,i){let s=this._allPathNames.get(r);if(s===void 0||s.fileType!=="File"||!s.pathAcceptance.accepted||s.fileInfo!==void 0&&s.fileInfo.contentSeq>n)return;let o=s.fileInfo;s.fileInfo={trackable:!1,contentSeq:n,reason:i},this._trackableFilePaths.delete(r);let a=!1;if(o===void 0)a=!0;else if(o.trackable===!0){a=!0;let l=o.blobName;this._blobNameToPathName.delete(l),this._publishBlobNameChange(r,l,void 0),this._markDirty()}else a=i!==o.reason;a&&this._pathStatusChangedEmitter.fire({relPath:r})}_makeAbsPath(r){return zt(this.repoRoot,r)}_publishBlobNameChange(r,n,i){n!==i&&this._blobNameChangedEmitter.fire({absPath:this._makeAbsPath(r),prevBlobName:n,newBlobName:i})}purge(r){let n=new Array;for(let[i,s]of this._allPathNames)s.entryTS<r&&n.push(i);for(let i of n)this.remove(i)}hasFile(r){return this._trackableFilePaths.has(r)}getBlobName(r){let n=this._allPathNames.get(r);if(n?.fileInfo?.trackable)return n.fileInfo?.blobName}getBlobInfo(r,n){let i=this._allPathNames.get(r);if(i?.fileInfo?.trackable&&i.fileInfo.mtime===n)return[i.fileInfo.blobName,i.fileInfo.contentSeq]}getPathName(r){return this._blobNameToPathName.get(r)}getPathInfo(r){let n=this._allPathNames.get(r);if(n!==void 0)return[n.fileType,n.pathAcceptance]}reportMissing(r){let n=this._blobNameToPathName.get(r);if(n===void 0)return;let i=this._allPathNames.get(n);if(i?.fileInfo?.trackable)return i.fileInfo.contentSeq=0,n}*pathsWithBlobNames(){for(let[r,n]of this._allPathNames){let i=n.fileInfo;i?.trackable&&(yield[r,i.mtime,i.blobName,i.contentSeq])}}*allPaths(){for(let[r,n]of this._allPathNames){let i=n.pathAcceptance.accepted,s=!1,o=n.pathAcceptance.format();i&&(n.fileType==="Other"?(i=!1,o="Not a file"):n.fileInfo!==void 0&&(n.fileInfo?.trackable===!0?s=!0:(i=!1,o=n.fileInfo.reason))),yield[r,n.fileType,i,s,o]}}_markDirty(){this._persistState!==void 0&&this._persistState.dirtyCount++}enablePersist(r,n){if(this._persistState)return;this._persistState={dirtyCount:this._trackableFilePaths.size,lastPersistDirtyCount:0,mtimeCacheWriter:r,persisting:!1},this._maybePersist();let i=setInterval(()=>void this._maybePersist(),n);this.addDisposable({dispose:()=>clearInterval(i)})}async _maybePersist(){if(!(this._persistState===void 0||this._persistState.persisting)){this._persistState.persisting=!0;try{this._persistState.dirtyCount>this._persistState.lastPersistDirtyCount&&await this._persist(this._persistState)}finally{this._persistState.persisting=!1}}}async _persist(r){let n=function*(o){for(let[a,l]of o){let c=l.fileInfo;c?.trackable&&(yield[a,c.mtime,c.blobName])}},i=r.dirtyCount;await r.mtimeCacheWriter.write(n(this._allPathNames.entries())),r.lastPersistDirtyCount=i}};var Gl=V(require("vscode"));var L6=class extends bg{constructor(r){super();this.reason=r}format(){return this.reason}},$N=class extends X{constructor(r,n,i,s,o){super();this.folderName=r;this.folderRoot=n;this.repoRoot=i;this._pathFilter=s;this._workspaceFolder=o;this._logger=j(`PathNotifier[${n}]`)}_pathFoundEmitter=new Gl.EventEmitter;_pathCreatedEmitter=new Gl.EventEmitter;_pathChangedEmitter=new Gl.EventEmitter;_pathDeletedEmitter=new Gl.EventEmitter;_logger;_filesystemWatcherCreated=!1;_stopping=!1;_deletedPaths=void 0;get onDidFindPath(){return this._pathFoundEmitter.event}get onDidCreatePath(){return this._pathCreatedEmitter.event}get onDidChangePath(){return this._pathChangedEmitter.event}get onDidDeletePath(){return this._pathDeletedEmitter.event}dispose(){this._stopping=!0,super.dispose()}async enumeratePaths(){if(this._stopping)return;this._deletedPaths=new Set,this._workspaceFolder!==void 0&&!this._filesystemWatcherCreated&&(this._createFilesystemWatcher(this._workspaceFolder),this._filesystemWatcherCreated=!0);let r=new JC(this.folderName,Gl.Uri.file(this.folderRoot),Gl.Uri.file(this.repoRoot),this._pathFilter);for await(let[i,s,o,a]of r){if(this._stopping)return;this._pathFoundEmitter.fire({relPath:s,fileType:o,acceptance:a})}if(this._stopping)return;let n=this._deletedPaths;this._deletedPaths=void 0;for(let i of n)this._pathDeletedEmitter.fire(i);return r.stats}_handlePathChanged(r,n){let i=this._getRelPath(r);if(i===void 0)return;let s,o;try{s=ef(hs(r)).type,o=this._pathFilter.getPathInfo(i,s)}catch(l){s="Other",o=new L6($e(l))}let a=n?"created":"changed";this._logger.verbose(`${s} ${a}: ${i}, acceptance = ${o.format()}`),this._deletedPaths?.delete(i),n?this._pathCreatedEmitter.fire({relPath:i,fileType:s,acceptance:o}):this._pathChangedEmitter.fire({relPath:i,fileType:s,acceptance:o})}_handlePathDeleted(r){let n=this._getRelPath(r);n!==void 0&&(this._logger.verbose(`Path deleted: ${n}`),this._deletedPaths!==void 0?this._deletedPaths?.add(n):this._pathDeletedEmitter.fire(n))}_getRelPath(r){if(this._stopping)return;let n=xf(r);if(n!==void 0)return Yh(this.repoRoot,n)}_createFilesystemWatcher(r){let n=Gl.workspace.createFileSystemWatcher(new Gl.RelativePattern(r,"**/*"));this.addDisposables(n,n.onDidCreate(i=>this._handlePathChanged(i,!0)),n.onDidChange(i=>this._handlePathChanged(i,!1)),n.onDidDelete(i=>this._handlePathDeleted(i)))}};var cw=V(require("vscode"));async function uIe(e,t,r,n){let i=hs(e),s=hs(t),o=new Array;o.push(i);let a=new Array,l=200,c=Date.now(),u;for(;(u=o.pop())!==void 0&&(n===void 0||a.length<n);){Date.now()-c>=l&&(await new Promise(y=>setTimeout(y,0)),c=Date.now());let p=tf(s,u),g=r.makeLocalPathFilter(p),A=Px(u);for(let[y,C]of A){if(Date.now()-c>=l&&(await new Promise(w=>setTimeout(w,0)),c=Date.now()),y==="."||y==="..")continue;let b=zt(p,y,C==="Directory");g.acceptsPath(b,C)&&(C==="File"?a.push(b):C==="Directory"&&o.push(zt(u,y)))}}return Promise.resolve(a)}var YN=class e{constructor(t,r,n,i){this._apiServer=t;this._pathHandler=r;this._fileExtensions=n;this._maxTrackedFiles=i}static verifyBatchSize=1e3;async describe(t,r,n){let i=await this._getAllPathNames(t,r,n);if(i.length>this._maxTrackedFiles)return{trackable:!1};let s=i.length,o=await this._chooseBlobNameSample(r,i);if(o.length===0)return{trackable:!0,trackableFiles:0,uploadedFraction:1};let a=await this._apiServer.findMissing(o),l=o.length,c=Math.min(a.unknownBlobNames.length,l);return{trackable:!0,trackableFiles:s,uploadedFraction:(l-c)/l}}async _getAllPathNames(t,r,n){let i=await CN(cw.Uri.file(t),cw.Uri.file(r),new KC(n),this._fileExtensions);return await uIe(cw.Uri.file(t),cw.Uri.file(r),i,this._maxTrackedFiles+1)}async _chooseBlobNameSample(t,r){let n=new Array;for(;n.length<e.verifyBatchSize&&r.length>0;){let i=Math.floor(Math.random()*r.length),s=r[i];r[i]=r[r.length-1],r.pop();let o=zt(t,s),a=await this._pathHandler.readText(o);if(a.type!=="text")continue;let l=this._pathHandler.calculateBlobName(s,a.contents);n.push(l)}return n}};var dIe=V(require("vscode"));var KN=class{maxSize;items;constructor(t){this.maxSize=t,this.items=[]}add(t){let r=this.items.indexOf(t);r!==-1?this.items.splice(r,1):this.items.length>=this.maxSize&&this.items.shift(),this.items.push(t)}clear(){this.items=[]}size(){return this.items.length}toArray(){return this.items.slice()}};var zN=class extends X{constructor(r){super();this._workspaceManager=r;this.addDisposable(dIe.window.onDidChangeActiveTextEditor(this._notifyActiveEditorChanged.bind(this)))}_tabSwitchHistory=new KN(20);_logger=j("TabWatcher");_notifyActiveEditorChanged(r){if(r===void 0)return;let n=r.document.uri;this._workspaceManager.resolvePathName(n.fsPath)!==void 0&&this._tabSwitchHistory.add(n.fsPath)}getTabSwitchEvents(){let r=[];for(let n of this._tabSwitchHistory.toArray()){let i=this._workspaceManager.resolvePathName(n);if(i===void 0)continue;let s=this._workspaceManager.getBlobName(i);s!==void 0&&r.push({relPathName:i.relPath,blobName:s})}return r}};var JN=class e extends X{constructor(r,n){super();this._apiServer=r;this._workspaceManager=n;this._logger=j("UnknownBlobHandler"),this._toProbe=new Zo(this._probe.bind(this)),this.addDisposable(this._toProbe),this._probeWaiters=new Zo(this._enqueueForProbe.bind(this)),this.addDisposable(this._probeWaiters),this._probeWaitersKicker=new Bc(this._probeWaiters,e.probeRetryWaitMs),this.addDisposable(this._probeWaitersKicker),this._longWaiters=new Zo(this._enqueueForProbe.bind(this)),this.addDisposable(this._longWaiters),this._longWaitersKicker=new Bc(this._longWaiters,e.longRetryWaitMs),this.addDisposable(this._longWaitersKicker)}static probeBatchSize=1e3;static probeRetryWaitMs=5*1e3;static probePatienceMs=2*60*1e3;static longRetryWaitMs=60*1e3;_toProbe;_currentBatch=new Map;_probeWaiters;_probeWaitersKicker;_longWaiters;_longWaitersKicker;_logger;enqueue(r){for(let[n,i]of r)this._logger.verbose(`enqueue: ${i.rootPath}:${i.relPath}`),this._toProbe.insert(n,{qualifiedPath:i,startTime:Date.now()});this._toProbe.kick()}_grabCurrentBatch(){if(this._currentBatch.size===0)return;let r=this._currentBatch;return this._currentBatch=new Map,r}async _probe(r){if(r!==void 0){let[o,a]=r;if(this._workspaceManager.getBlobName(a.qualifiedPath)!==o||(this._currentBatch.set(o,a),this._currentBatch.size<e.probeBatchSize))return}let n=this._grabCurrentBatch();if(n===void 0)return;let i=[...n.keys()],s;try{s=await Ii(async()=>this._apiServer.findMissing(i),this._logger)}catch{}if(s===void 0)for(let[o,a]of n)this._addRetryWaiter(o,a);else{this._logger.verbose(`find-missing reported ${s.nonindexedBlobNames.length} nonindexed blob names`),s.nonindexedBlobNames.length>0&&_g(this._logger,"verbose",s.nonindexedBlobNames,5);let o=new Set(s.unknownBlobNames),a=new Set(s.nonindexedBlobNames);for(let[l,c]of n)o.has(l)?this._workspaceManager.notifyBlobMissing(c.qualifiedPath,l):a.has(l)&&this._addRetryWaiter(l,c)}}_enqueueForProbe(r){if(r===void 0)this._toProbe.kick();else{let[n,i]=r;this._logger.verbose(`probe enqueue: ${i.qualifiedPath.rootPath}:${i.qualifiedPath.relPath}: ${n}`),this._toProbe.insert(n,i)}return Promise.resolve()}_addRetryWaiter(r,n){Date.now()-n.startTime<e.probePatienceMs?(this._logger.verbose(`retry enqueue: ${n.qualifiedPath.rootPath}:${n.qualifiedPath.relPath}: ${r}`),this._probeWaiters.insert(r,n)):(this._logger.verbose(`long retry enqueue: ${n.qualifiedPath.rootPath}:${n.qualifiedPath.relPath}: ${r}`),this._longWaiters.insert(r,n))}};var ev=class e{constructor(t,r,n,i=[],s=[],o,a){this.blobs=t;this.recentChunks=r;this.trackedPaths=n;this.unindexedEditEvents=i;this.unindexedEditEventsBaseBlobNames=s;this.lastChatResponse=o;this.blobNames=a}static empty(){return new e({checkpointId:void 0,addedBlobs:[],deletedBlobs:[]},new Array,new Map,[],[],void 0,[])}};function U6(e){return Uy(hs(e))}function uw(e){if(e.scheme==="file")return U6(e)}var O6=class extends X{constructor(r,n,i,s,o,a,l,c,u,f,p){super(u,f);this.folderName=r;this.folderRoot=n;this.repoRoot=i;this.workspaceFolder=s;this.vcsDetails=o;this.folderId=a;this.diskFileManager=l;this.cacheDirPath=c;this.logger=p;this._operationQueue=new Ma(async g=>await this._runSerializedOperation(g)),this.addDisposables(this._operationQueue,{dispose:()=>this._disposeTracker()})}_operationQueue;_tracker;_newlyTracked=!1;_initialEnumerationComplete=!1;_initialSyncComplete=!1;_stopped=!1;dispose(){this._stopped=!0,super.dispose()}get stopped(){return this._stopped}get type(){return this.workspaceFolder===void 0?1:0}_disposeTracker(){this._tracker?.dispose(),this._tracker=void 0}setTracker(r){if(this.stopped)throw new Error("Source folder has been disposed");this._disposeTracker(),this._tracker=r}get tracker(){return this._tracker}get initialEnumerationComplete(){return this._initialEnumerationComplete}setInitialEnumerationComplete(){this._initialEnumerationComplete=!0}get initialSyncComplete(){return this._initialSyncComplete}setInitialSyncComplete(){this._initialSyncComplete=!0}relativePathName(r){if(ks(this.folderRoot,r))return Fl(this.repoRoot,r)}acceptsPath(r){return this._tracker===void 0?!1:this._tracker.pathFilter.acceptsPath(r)}async enqueueSerializedOperation(r){this._operationQueue.insert(r),await this._operationQueue.kick()}async _runSerializedOperation(r){r!==void 0&&(!this._initialEnumerationComplete||this._stopped||await r())}},q6=class extends X{constructor(r,n,i){super(i);this.pathFilter=r;this.pathNotifier=n}};var lvt=new Set(["home directory","too large"]),cvt=new Set(["nested"]);function dw(e){return lvt.has(e)}function fIe(e){return cvt.has(e)}function Ka(e){return e.containingFolderRoot!==void 0?"nested":e.isHomeDir?"home directory":e.folderQualification!==void 0&&!e.folderQualification.trackable?"too large":e.syncingPermission==="denied"?"permission denied":e.syncingPermission==="granted"?"trackable":e.folderQualification===void 0?"qualifying":"permission needed"}var jN=class e extends X{constructor(r,n,i,s,o,a,l,c,u,f,p,g,A,y=new Array,C){super();this._actionsModel=r;this._externalSourceFolderRecorder=n;this._syncingPermissionTracker=i;this._storageUriProvider=s;this._apiServer=o;this._configListener=a;this._featureFlagManager=l;this._clientMetricsReporter=c;this._completionServer=u;this._blobNameCalculator=f;this._maxUploadSizeBytes=p;this._syncingEnabledTracker=g;this._onboardingSessionEventReporter=A;this._enableFileLimitsForSyncingPermission=this._featureFlagManager.currentFlags.enableFileLimitsForSyncingPermission,this._maxTrackableFiles=this._featureFlagManager.currentFlags.maxTrackableFileCount,this._maxTrackableFilesWithoutPermission=Math.min(this._featureFlagManager.currentFlags.maxTrackableFileCountWithoutPermission,this._maxTrackableFiles);let v=Math.min(this._featureFlagManager.currentFlags.minUploadedPercentageWithoutPermission,100);if(this._verifyFolderIsSourceRepo=this._featureFlagManager.currentFlags.verifyFolderIsSourceRepo,this._minUploadedFractionWithoutPermission=v*.01,this._refuseToSyncHomeDirectories=this._featureFlagManager.currentFlags.refuseToSyncHomeDirectories,this._useCheckpointManagerContext=C?.useCheckpointManagerContext??wr(this._featureFlagManager.currentFlags.useCheckpointManagerContextMinVersion),this._validateCheckpointManagerContext=this._featureFlagManager.currentFlags.validateCheckpointManagerContext,this._folderEnumeratedEmitter=this.addDisposable(new wt.EventEmitter),this._folderSyncedEmitter=this.addDisposable(new wt.EventEmitter),this._syncingProgressEmitter=this.addDisposable(new wt.EventEmitter),this._syncingStateEmitter=this.addDisposable(new wt.EventEmitter),this._sourceFoldersChangedEmitter=this.addDisposable(new wt.EventEmitter),this._sourceFolderContentsChangedEmitter=this.addDisposable(new wt.EventEmitter),this._sourceFolderContentsChangedEmitter=this.addDisposable(new wt.EventEmitter),this._fileChangedEmitter=this.addDisposable(new wt.EventEmitter),this._textDocumentOpenedEmitter=this.addDisposable(new wt.EventEmitter),this._textDocumentClosedEmitter=this.addDisposable(new wt.EventEmitter),this._textDocumentChangedEmitter=this.addDisposable(new wt.EventEmitter),this._fileDeletedEmitter=this.addDisposable(new wt.EventEmitter),this._fileWillRenameEmitter=this.addDisposable(new wt.EventEmitter),this._fileDidMoveEmitter=this.addDisposable(new wt.EventEmitter),this._featureFlagManager.currentFlags.bypassLanguageFilter)this._fileExtensions=void 0;else{let F=new Set;for(let Q of y)for(let W of Q.extensions)F.add(W);this._fileExtensions=F}this._pathHandler=new HN(this._maxUploadSizeBytes,Rwe()),this._pathMap=this.addDisposable(new GN);let b;if(this._configListener.config.openFileManager.v2Enabled){let F=new kN(this._blobNameCalculator,this._apiServer);this.addDisposable(F),b=new MN(F,this._blobNameCalculator)}let w=new VN(this._apiServer,this._completionServer,this._configListener,this._blobNameCalculator,this._pathMap,this._sequenceGenerator);this.addDisposable(w),this._openFileManager=new SN(this._configListener,w,b);let B=C?.blobsCheckpointThreshold;this._blobsCheckpointManager=this.addDisposable(new PN(this._apiServer,this._featureFlagManager,this._pathMap.onDidChangeBlobName,B)),this._unknownBlobHandler=this.addDisposable(new JN(this._apiServer,this)),this._sourceFolderReconciler=this.addDisposable(new nd(()=>this._reconcileSourceFolders())),this._sourceFolderDescriber=new YN(this._apiServer,this._pathHandler,this._fileExtensions,this._maxTrackableFiles),this.addDisposable(wt.workspace.onDidChangeWorkspaceFolders(this._handleWorkspaceFolderChangeEvent.bind(this))),this.addDisposable(wt.workspace.onDidChangeTextDocument(this._notifyTextDocumentChanged.bind(this))),this.addDisposable(wt.workspace.onDidOpenTextDocument(this._notifyTextDocumentOpened.bind(this))),this.addDisposable(wt.workspace.onDidCloseTextDocument(this._notifyTextDocumentClosed.bind(this))),this.addDisposable(wt.workspace.onDidChangeNotebookDocument(this._notifyNotebookDocumentChanged.bind(this))),this.addDisposable(wt.window.onDidChangeActiveTextEditor(this._notifyActiveEditorChanged.bind(this))),this.addDisposable(wt.workspace.onDidCloseTextDocument(F=>{this._notifyDocumentClosed(F)})),this.addDisposable(wt.workspace.onDidCloseNotebookDocument(F=>{this._notifyDocumentClosed(F)})),this.addDisposable(wt.workspace.onWillRenameFiles(F=>{this._notifyWillRenameFile(F)})),this.addDisposable(wt.workspace.onDidRenameFiles(F=>{this._notifyDidRenameFile(F)})),this.addDisposable(this._configListener.onDidChange(this._notifyConfigChange.bind(this))),this._notifyConfigChange(),this.addDisposable(new wt.Disposable(()=>this._disposeSourceFolders())),this.addDisposable(new wt.Disposable(()=>this._disposeTabWatcher())),this._actionsModel.setSystemStateStatus("syncingPermitted","complete"),this._actionsModel.setSystemStateStatus("workspaceTooLarge","initializing"),this._actionsModel.setSystemStateStatus("uploadingHomeDir","initializing"),this._registerInitialSourceFolders(),this._awaitInitialSourceFolders()}static augmentRootName=".augmentroot";static ignoreSources(r){return[new tw(".gitignore"),new pN(r),new tw(".augmentignore")]}static pathMapPersistFrequencyMs=6e4;static defaultPathAccept=new xg;static _textEncoder=new TextEncoder;_initialSourceFolders=new Set;_registeredSourceFolders=new Map;_trackedSourceFolders=new Map;_fileExtensions;_pathMap;_sequenceGenerator=new vN;_pathHandler;_openFileManager;_blobsCheckpointManager;_unknownBlobHandler;_sourceFolderDescriber;_logger=j("WorkspaceManager");_tabWatcher;_vcsWatcher;_fileEditManager;_folderEnumeratedEmitter;_folderSyncedEmitter;_syncingProgressEmitter;_syncingPermissionInitialized=!1;_sourceFolderReconciler;_syncingStateEmitter;_sourceFoldersChangedEmitter;_sourceFolderContentsChangedEmitter;_fileChangedEmitter;_textDocumentOpenedEmitter;_textDocumentClosedEmitter;_textDocumentChangedEmitter;_fileDeletedEmitter;_fileWillRenameEmitter;_fileDidMoveEmitter;_lastChatResponse=void 0;_enableFileLimitsForSyncingPermission;_maxTrackableFiles;_maxTrackableFilesWithoutPermission;_verifyFolderIsSourceRepo;_minUploadedFractionWithoutPermission;_refuseToSyncHomeDirectories;_useCheckpointManagerContext;_validateCheckpointManagerContext;_stopping=!1;dispose(){this._stopping=!0,super.dispose()}get enableFileLimitsForSyncingPermission(){return this._enableFileLimitsForSyncingPermission}get maxTrackableFiles(){return this._maxTrackableFiles}get maxTrackableFilesWithoutPermission(){return this._maxTrackableFilesWithoutPermission}get verifyFolderIsSourceRepo(){return this._verifyFolderIsSourceRepo}get minUploadedFractionWithoutPermission(){return this._minUploadedFractionWithoutPermission}get refuseToSyncHomeDirectories(){return this._refuseToSyncHomeDirectories}get fileDeletedEmitter(){return this._fileDeletedEmitter.event}get fileWillRenameEmitter(){return this._fileWillRenameEmitter.event}get initialFoldersEnumerated(){return Array.from(this._initialSourceFolders).every(r=>{let n=this._registeredSourceFolders.get(r);if(n===void 0)return!0;let i=Ka(n);return dw(i)||fIe(i)||i==="permission denied"?!0:this._trackedSourceFolders.get(r)?.sourceFolder?.initialEnumerationComplete})}async awaitInitialFoldersEnumerated(){for(;!this.initialFoldersEnumerated;)await PA(this._folderEnumeratedEmitter.event)}get onDidEnumerateFolder(){return this._folderEnumeratedEmitter.event}get initialFoldersSynced(){return Array.from(this._initialSourceFolders).every(r=>{let n=this._registeredSourceFolders.get(r);if(n===void 0)return!0;let i=Ka(n);return dw(i)||fIe(i)||i==="permission denied"?!0:this._trackedSourceFolders.get(r)?.sourceFolder?.initialSyncComplete})}async awaitInitialFoldersSynced(){for(;!this.initialFoldersSynced;)await PA(this._folderSyncedEmitter.event)}get onDidChangeSyncingProgress(){return this._syncingProgressEmitter.event}get syncingEnabledState(){if(!this._syncingPermissionInitialized)return"initializing";if(this._syncingPermissionTracker.syncingPermissionDenied)return"disabled";let r=0;for(let[n,i]of this._registeredSourceFolders){let s=Ka(i);if(dw(s)||s==="permission denied")return"disabled";s==="permission needed"&&r++}return r>0?"partial":"enabled"}get onDidChangeSyncingState(){return this._syncingStateEmitter.event}get onDidChangeSourceFolders(){return this._sourceFoldersChangedEmitter.event}get onDidChangeSourceFolderContents(){return this._sourceFolderContentsChangedEmitter.event}get onDidChangeFile(){return this._fileChangedEmitter.event}get onFileDeleted(){return this._fileDeletedEmitter.event}get onFileDidMove(){return this._fileDidMoveEmitter.event}get completionServer(){return this._completionServer}_disposeSourceFolders(){this._registeredSourceFolders.forEach(r=>{r.cancel?.cancel(),r.cancel?.dispose(),r.cancel=void 0}),this._trackedSourceFolders.forEach(r=>r.sourceFolder?.dispose()),this._trackedSourceFolders.clear(),this._vcsWatcher?.dispose(),this._fileEditManager?.dispose()}_disposeTabWatcher(){this._tabWatcher?.dispose(),this._tabWatcher=void 0}_disposeVCSWatcher(){this._vcsWatcher?.dispose(),this._vcsWatcher=void 0}_disposeEditFileManager(){this._fileEditManager?.dispose(),this._fileEditManager=void 0}_notifyConfigChange(){this._stopping||(this._configListener.config.recencySignalManager.collectTabSwitchEvents?this._tabWatcher===void 0&&(this._tabWatcher=new zN(this)):this._disposeTabWatcher(),this._configListener.config.vcs.watcherEnabled?this._vcsWatcher===void 0&&(this._vcsWatcher=new IN(new LA.FileUploaderImpl(this._blobNameCalculator,this._apiServer),this._configListener)):this._disposeVCSWatcher(),Ul(this._configListener.config,this._featureFlagManager.currentFlags.vscodeNextEditMinVersion)||this.getEnableCompletionFileEditEvents()?this._fileEditManager===void 0&&(this._fileEditManager=new Z_(this._blobNameCalculator,this._maxUploadSizeBytes,this._textDocumentChangedEmitter.event,this._textDocumentOpenedEmitter.event,this._textDocumentClosedEmitter.event,this._fileDeletedEmitter.event,this._fileWillRenameEmitter.event,this._configListener.config.enableDebugFeatures),this._fileEditManager.listenToEvents(),this._trackedSourceFolders.forEach(r=>{r.sourceFolder!==void 0&&this._fileEditManager?.startTracking(r.sourceFolder.folderId,r.sourceFolder.folderName,{directory:this._computeCacheDirPath(r.sourceFolder.folderRoot)})})):this._disposeEditFileManager())}getSyncingProgress(){let r=new Array;return this._trackedSourceFolders.forEach((n,i)=>{r.push(this._getSyncingProgress(i,n.sourceFolder))}),r}_reportSyncingProgress(r){this._syncingProgressEmitter.fire(this._getSyncingProgress(r.folderRoot,r))}_getSyncingProgress(r,n){let i=n?.initialEnumerationComplete?{newlyTracked:n._newlyTracked,trackedFiles:this._pathMap.trackedFileCount(n.folderId),backlogSize:n.diskFileManager.itemsInFlight}:void 0;return{folderRoot:r,progress:i}}_isHomeDir(r){return this._featureFlagManager.currentFlags.refuseToSyncHomeDirectories?Ywe(r):!1}_registerInitialSourceFolders(){let r=new Array;wt.workspace.workspaceFolders?.forEach(i=>{let s=uw(i.uri);s!==void 0&&this._mtimeCacheExists(s)&&r.push(s)}),this._syncingPermissionTracker.setDefaultPermissions(r),this._externalSourceFolderRecorder.getFolders().forEach((i,s)=>{if(this._isHomeDir(s)){this._logger.info(`Rejecting external source folder ${s}: home directory`);return}this._logger.info(`Adding external source folder ${s}`),this._initialSourceFolders.add(s),this._registeredSourceFolders.set(s,{folderName:i,isHomeDir:!1,folderType:1,syncingPermission:this._syncingPermissionTracker.syncingPermissionDenied?"denied":"granted"})});let n=new Array;wt.workspace.workspaceFolders?.forEach(i=>{let s=i.name,o=uw(i.uri);if(o===void 0)return;let a=this._syncingPermissionTracker.getFolderSyncingPermission(o);this._logger.info(`Adding workspace folder ${s}; folderRoot = ${o}; syncingPermission = ${a}`),this._initialSourceFolders.add(o),this._registeredSourceFolders.set(o,{folderName:s,isHomeDir:this._isHomeDir(o),folderType:0,syncingPermission:a,workspaceFolder:i}),a==="granted"&&n.push(o)}),this._syncingPermissionTracker.dropStaleFolders(n),this._setSyncingPermissionInitialized()}_mtimeCacheExists(r){let n=this._computeCacheDirPath(r);return ON(n)}_setSyncingPermissionInitialized(){this._syncingPermissionInitialized=!0,this._syncingEnabledTracker.workspaceManager=this}async _awaitInitialSourceFolders(){let r=Date.now();this._kickSourceFolderReconciler(),await this.awaitInitialFoldersSynced(),this._reportWorkspaceStartup(Date.now()-r),this._folderSyncedEmitter.fire()}_handleWorkspaceFolderChangeEvent(r){for(let i of r.added){let s=i.name,o=uw(i.uri);if(o===void 0)continue;let a=this._syncingPermissionTracker.getFolderSyncingPermission(o);this._logger.info(`Adding workspace folder ${s}; folderRoot = ${o}; syncingPermission = ${a}`),this._registeredSourceFolders.set(o,{folderName:s,isHomeDir:this._isHomeDir(o),folderType:0,syncingPermission:a,workspaceFolder:i})}let n=new Array;for(let i of r.removed){let s=uw(i.uri);if(s===void 0)continue;this._logger.info(`Removing workspace folder ${s}`);let o=this._registeredSourceFolders.get(s);o!==void 0&&(o.cancel?.cancel(),o.cancel?.dispose(),o.cancel=void 0,this._registeredSourceFolders.delete(s),n.push(s))}this._syncingPermissionTracker.dropPermission(n),this._kickSourceFolderReconciler()}addExternalSourceFolder(r){let n=uw(r);if(n===void 0)throw new zF;if(this._registeredSourceFolders.has(n))throw new ZF;try{if(ef(n).type!=="Directory")throw new jF}catch(i){throw new JF($e(i))}if(this._isHomeDir(n))throw new XF;this._logger.info(`Adding external source folder ${mQ(r)}`),this._registeredSourceFolders.set(n,{folderName:Yme(n),isHomeDir:!1,folderType:1,syncingPermission:this._syncingPermissionTracker.syncingPermissionDenied?"denied":"granted"}),this._kickSourceFolderReconciler()}removeExternalSourceFolder(r){let n=this._registeredSourceFolders.get(r);if(n!==void 0){if(n.folderType!==1)throw new eM;this._logger.info(`Removing external source folder ${r}`),this._registeredSourceFolders.delete(r),this._kickSourceFolderReconciler()}}enableSyncing(){this._logger.info("Enabling syncing for all trackable source folders");let r=new Array;this._registeredSourceFolders.forEach((n,i)=>{let s=Ka(n);dw(s)||s==="qualifying"||(n.syncingPermission="granted",r.push(i))}),this._syncingPermissionTracker.setPermittedFolders(r),this._kickSourceFolderReconciler()}disableSyncing(){this._logger.info("Disabling syncing for all trackable source folders"),this._registeredSourceFolders.forEach(r=>{let n=Ka(r);dw(n)||(r.syncingPermission="denied")}),this._syncingPermissionTracker.denyPermission(),this._kickSourceFolderReconciler()}requalifyLargeFolders(){this._registeredSourceFolders.forEach(r=>{r.folderQualification=void 0}),this._kickSourceFolderReconciler()}async _kickSourceFolderReconciler(){await this._updateStoredExternalSourceFolders();let r=new Set;for(let[n,i]of this._registeredSourceFolders)if(Ka(i)==="trackable"){for(let[o,a]of this._registeredSourceFolders)if(Ka(a)==="trackable"&&n!==o&&ks(o,n)){r.add(n);break}}for(let[n,i]of this._registeredSourceFolders){if(!r.has(n)){i.containingFolderRoot=void 0;continue}for(let s of this._registeredSourceFolders.keys())if(!(n===s||r.has(s))&&ks(s,n)){i.containingFolderRoot!==s&&this._logger.info(`Source folder ${n} will not be tracked. Containing folder: ${s}`),i.containingFolderRoot=s;break}}this._updateActionsModelState();for(let[n,i]of this._registeredSourceFolders)Ka(i)==="qualifying"&&i.cancel===void 0&&this._qualifySourceFolder(n,i);this._syncingStateEmitter.fire(this.syncingEnabledState),this._sourceFoldersChangedEmitter.fire(),this._sourceFolderReconciler.kick()}async _updateStoredExternalSourceFolders(){let r=new Map;for(let[n,i]of this._registeredSourceFolders)i.folderType===1&&r.set(n,i.folderName);await this._externalSourceFolderRecorder.setFolders(r)}_updateActionsModelState(){if(this._syncingPermissionTracker.syncingPermissionDenied){this._actionsModel.setSystemStateStatus("syncingPermitted","incomplete");return}let r=!1,n=!1,i=!1;for(let[l,c]of this._registeredSourceFolders){let u=Ka(c);if(u==="permission needed"){r=!0;break}else if(u==="home directory"){n=!0;break}else if(u==="too large"){i=!0;break}}let s=r?"initializing":"complete";this._actionsModel.setSystemStateStatus("syncingPermitted",s);let o=n?"complete":"initializing";this._actionsModel.setSystemStateStatus("uploadingHomeDir",o);let a=i?"complete":"initializing";this._actionsModel.setSystemStateStatus("workspaceTooLarge",a)}async _qualifySourceFolder(r,n){let[i,s]=await this._findRepoRoot(r),o,a;if(this._enableFileLimitsForSyncingPermission){a="full",this._logger.info(`Beginning ${a} qualification of source folder ${r}`);let c=new wt.CancellationTokenSource;if(n.cancel=c,o=await this._sourceFolderDescriber.describe(r,i,e.ignoreSources(r)),c.token.isCancellationRequested){this._logger.info(`Cancelled qualification of source folder ${r}`);return}n.cancel=void 0,c.dispose()}else a="phony",this._logger.info(`Beginning ${a} qualification of source folder ${r} per feature flag`),o={trackable:!0,trackableFiles:0,uploadedFraction:1};let l={...o,repoRoot:i,isRepo:s};n.folderQualification=l,this._syncingPermissionTracker.syncingPermissionDenied?this._logger.info(`Finished ${a} qualification of source folder ${r}: syncing disabled for workspace`):l.trackable?(this._logger.info(`Finished ${a} qualification of source folder ${r}: trackable files: ${l.trackableFiles}, uploaded fraction: ${l.uploadedFraction}, is repo: ${l.isRepo}`),l.trackableFiles>this._maxTrackableFilesWithoutPermission?this._logger.info(`Requesting syncing permission because source folder has more than ${this._maxTrackableFilesWithoutPermission} files`):this._verifyFolderIsSourceRepo&&!l.isRepo?this._logger.info("Requesting syncing permission because source folder does not appear to be a source repo"):l.uploadedFraction<this._minUploadedFractionWithoutPermission?this._logger.info(`Requesting syncing permission because source folder has less than ${this._minUploadedFractionWithoutPermission*100}% of files uploaded`):(n.syncingPermission="granted",this._syncingPermissionTracker.addImplicitlyPermittedFolder(r))):this._logger.info(`Finished ${a} qualification of source folder ${r}: folder not trackable; too large`),this._kickSourceFolderReconciler()}async _reconcileSourceFolders(){await this._syncingPermissionTracker.persistCurrentPermission();let r=this.syncingEnabledState==="disabled",n=new Map;for(let[s,o]of this._trackedSourceFolders){let a=this._registeredSourceFolders.get(s),l;if(a===void 0)l="source folder has been removed";else if(r)l="syncing is disabled";else if(a.containingFolderRoot!==void 0)l=`source folder is nested inside folder ${a.containingFolderRoot}`;else if(a.isHomeDir)l="source folder is a home directory";else if(a.folderQualification?.trackable===!1)l="source folder is too large";else{let c=Ka(a);c==="permission denied"?l="syncing permission denied for this source folder":c==="permission needed"?l="syncing permission not yet granted for this source folder":c==="qualifying"&&(l="source folder is being qualified")}l!==void 0&&n.set(s,[o,l])}let i=new Map;for(let[s,o]of this._registeredSourceFolders){if(Ka(o)!=="trackable")continue;let l=this._trackedSourceFolders.get(s);l===void 0&&(l={folderName:o.folderName,folderSpec:(0,$l.cloneDeep)(o),cancel:new wt.CancellationTokenSource,sourceFolder:void 0,logger:j(`WorkspaceManager[${o.folderName}]`)},i.set(s,l))}for(let[s,[o,a]]of n)o.logger.info(`Stop tracking: ${a}`),this._trackedSourceFolders.delete(s),this._stopTracking(o);for(let[s,o]of i)o.logger.info("Start tracking"),this._trackedSourceFolders.set(s,o),this._startTracking(s,o);return Promise.resolve()}async _startTracking(r,n){let i=new AN("Startup metrics"),s=n.cancel,o=await this._createSourceFolder(r,n,s.token);if(s.token.isCancellationRequested){n.logger.info("Cancelled in-progress creation of source folder"),o?.dispose();return}if(i.charge("create SourceFolder"),s.dispose(),o===void 0||this._stopping){n.logger.info("Stopped tracking source folder");return}n.sourceFolder=o;let a=n.folderName,l=o.folderId,c=await iIe(a,o.cacheDirPath);if(i.charge("read MtimeCache"),o.stopped){n.logger.info("Stopped tracking source folder");return}for(let[f,p]of c)this._pathMap.insert(l,f,"File",e.defaultPathAccept),this._pathMap.update(l,f,0,p.name,p.mtime);i.charge("pre-populate PathMap");let u=new Sc;try{o._newlyTracked=c.size===0,u.add({dispose:()=>o._newlyTracked=!1});let f=await this._refreshSourceFolder(o,i);if(f===void 0||o.stopped)return;i.charge("enumerate"),o.setInitialEnumerationComplete(),this._folderEnumeratedEmitter.fire();let p=this._pathMap.onDidChangePathStatus(l);if(p===void 0)return;o.addDisposable(p(A=>{this._sourceFolderContentsChangedEmitter.fire(r)}),!0),o.addDisposable(p(A=>{this._reportSyncingProgress(o)})),o.addDisposable(o.diskFileManager.onDidChangeInProgressItemCount(()=>this._reportSyncingProgress(o))),this._reportSyncingProgress(o),this._sourceFoldersChangedEmitter.fire(),await o.diskFileManager.awaitQuiesced(),o.setInitialSyncComplete(),this._folderSyncedEmitter.fire(),i?.charge("await DiskFileManager quiesced");let g=new UN(a,o.cacheDirPath);this._pathMap.enablePersist(l,g,e.pathMapPersistFrequencyMs),i.charge("enable persist"),this._reportSourceFolderStartup(n.logger,o,i,f),this._onboardingSessionEventReporter.reportEvent("finished-syncing")}finally{u.dispose(),this._reportSyncingProgress(o)}}async _createSourceFolder(r,n,i){let s=n.folderName,o=new Sc,a=new Sc,l=n.folderSpec.folderType===1?void 0:n.folderSpec.workspaceFolder,[c,u]=await this._findRepoRoot(r);if(i.isCancellationRequested)return;let f=this._pathMap.openSourceFolder(r,c);o.add(new wt.Disposable(()=>this._pathMap.closeSourceFolder(f))),o.addAll(...this._openFileManager.startTrackingFolder(s,f));let p=new LN(s,this._apiServer,this._pathHandler,this._pathMap);o.add(p);let g=n.folderSpec.folderType===0&&this._vcsWatcher!==void 0?await h_(r):void 0,A=await this._migrateMtimeCache(r,n);return new O6(s,r,c,l,g,f,p,A,o,a,n.logger)}async _migrateMtimeCache(r,n){let i=this._computeCacheDirPath(r);if(ON(i))return i;let s=this._computeCacheDirPath(n.folderName);if(!ON(s))return i;try{n.logger.info(`Migrating mtime cache for ${n.folderName} from "${s}" to "${i}"`),await nIe(s,i)}catch(o){n.logger.error(`Failed to migrate mtime cache for ${n.folderName} from "${s}" to "${i}": ${$e(o)}`)}return i}_computeCacheDirPath(r){return e.computeCacheDirPath(r,this._storageUriProvider.storageUri)}static computeCacheDirPath(r,n){let i=hs(n),s=kC(e._textEncoder.encode(r));return zt(i,s)}async refreshSourceFolders(){this.requalifyLargeFolders();let r=Array.from(this._trackedSourceFolders.values()).map(n=>n.sourceFolder).filter(n=>n!==void 0).map(n=>n.enqueueSerializedOperation(async()=>{await this._refreshSourceFolder(n)}));try{await Promise.allSettled(r)}catch(n){this._logger.info(`One or more source folders failed to refresh: ${$e(n)}`)}}async _refreshSourceFolder(r,n){r.logger.debug(`Refreshing source folder ${r.folderName}`);let i=await this._createSourceFolderTracker(r,n);try{r.setTracker(i)}catch(l){r.logger.info(`Failed to install SourceFolderTracker for ${r.folderName}: ${$e(l)}`),i.dispose();return}let s=this._trackVcsRepo(r,i.pathFilter);s!==void 0&&r.addDisposable(s);let o=this._trackFileEdits(r);return o!==void 0&&r.addDisposable(o),this._trackOpenDocuments(r),await this._enumerateSourceFolder(r,n)}async _enumerateSourceFolder(r,n){let i=r.tracker;if(i===void 0)return;let s=this._pathMap.nextEntryTS,o=await i.pathNotifier.enumeratePaths();if(!r.stopped)return n?.charge("enumerate paths"),this._pathMap.purge(r.folderId,s),n?.charge("purge stale PathMap entries"),o}async _createSourceFolderTracker(r,n){let i=new Sc,s=await CN(wt.Uri.file(r.folderRoot),wt.Uri.file(r.repoRoot),new KC(e.ignoreSources(r.folderRoot)),this._fileExtensions);n?.charge("create PathFilter");let o=this._createPathNotifier(r,s);if(i.add(o),n?.charge("create PathNotifier"),this._configListener.config.enableDebugFeatures){let a=new wQ(wt.Uri.file(r.repoRoot),r.folderName,r.folderId);if(i.add(a),a.listenForChanges(),this._vcsWatcher===void 0&&r.vcsDetails!==void 0){let l=new W_(r.folderName,r.folderId,r.vcsDetails);i.add(l),l.listenForChanges()}}return new q6(s,o,i)}_createPathNotifier(r,n){let i=new $N(r.folderName,r.folderRoot,r.repoRoot,n,r.workspaceFolder);return i.addDisposables(i.onDidFindPath(s=>{this._handlePathFound(r,s.relPath,s.fileType,s.acceptance)}),i.onDidCreatePath(s=>{this._handlePathCreated(r,s.relPath,s.fileType,s.acceptance)}),i.onDidChangePath(s=>{s.fileType==="File"&&this._handleFileChanged(r,s.relPath,s.acceptance)}),i.onDidDeletePath(s=>{this._handlePathDeleted(r,s)})),i}_trackFileEdits(r){if(r.logger.debug(`_trackFileEdits was called on ${r.folderName}`),this._fileEditManager===void 0){r.logger.debug("_fileEditManager is undefined");return}return r.logger.debug("_fileEditManager tracking the folder"),this._fileEditManager.startTracking(r.folderId,r.folderName,{directory:this._computeCacheDirPath(r.folderRoot)})}_trackVcsRepo(r,n){if(r.logger.debug(`_trackVcsRepo was called on ${r.folderName}`),this._vcsWatcher===void 0){r.logger.debug("_vcsWatcher is undefined");return}let i=r.vcsDetails;if(i===void 0){r.logger.debug("vcsDetails is undefined");return}if(!Oy(U6(i.root),r.repoRoot)){r.logger.info(`Not creating VCSRepoWatcher: vcs root ${hs(i.root)} !== repo root ${r.repoRoot}`);return}return r.logger.debug("_vcsWatcher tracking the folder"),this._vcsWatcher.startTracking(r.folderName,r.folderId,i,new LA.FileChangeWatcherImpl(i.root,this.onDidChangeFile),new LA.BlobNameRetrieverImpl(r.repoRoot,this,this._blobNameCalculator),new LA.FileUtilsImpl(n))}async _findRepoRoot(r){let n;return n=await Pk(r,e.augmentRootName),n===void 0&&(n=(await h_(r))?.root),n!==void 0?[U6(n),!0]:[r,!1]}_trackOpenDocuments(r){let n=this._openFileManager.getTrackedPaths(r.folderId);for(let i of n)r.acceptsPath(i)||this._openFileManager.stopTracking(r.folderId,i);wt.workspace.textDocuments.forEach(i=>{this._trackDocument(r,i)!==void 0&&this._fileEditManager?.addInitialDocument({folderId:r.folderId,relPath:r.relativePathName(i.uri.fsPath),document:i})}),wt.workspace.notebookDocuments.forEach(i=>{this._trackDocument(r,i)})}_trackDocument(r,n){let i=xf(n.uri);if(i===void 0)return;let s=r.relativePathName(i);if(s===void 0||!r.acceptsPath(s))return;let o=this._pathMap.getBlobName(r.folderId,s);return this._openFileManager.addOpenedDocument({folderId:r.folderId,relPath:s,document:n},o),s}_stopTracking(r){if(r.sourceFolder===void 0){let n=r.cancel;n.cancel(),n.dispose(),r.logger.info("Cancelled in-progress tracking of source folder")}else{let n=r.sourceFolder;r.sourceFolder=void 0,n.dispose(),r.logger.info("Stopped tracking source folder")}this._folderSyncedEmitter.fire(),this._folderEnumeratedEmitter.fire()}translateRange(r,n,i){let s=this._resolveAbsPath(r.absPath);if(s===void 0)return;let[o,a]=s;return this._openFileManager.translateRange(o.folderId,a,n,i)}getContext(){if(this._openFileManager===void 0||this._pathMap===void 0)return ev.empty();let r=this._openFileManager.getRecencySummary(this._completionServer.completionParams.chunkSize),n=new Set,i=new Map,s=new Map;for(let[y,C]of r.folderMap){let v=this._pathMap.getRepoRoot(y);v!==void 0&&s.set(v,C);for(let[b,w]of C){n.add(w);let B=this._pathMap.getBlobName(y,b);B!==void 0&&B!==w&&i.set(B,(i.get(B)??0)+1)}}let o=new Set;for(let[y,C]of i)n.has(y)||C===this._pathMap.getUniquePathCount(y)&&o.add(y);let a=new Array;for(let y of r.recentChunks){let C=this._pathMap.getRepoRoot(y.folderId);C!==void 0&&a.push({seq:y.seq,uploaded:y.uploaded,repoRoot:C,pathName:y.pathName,blobName:y.blobName,text:y.text,origStart:y.origStart,origLength:y.origLength,expectedBlobName:y.expectedBlobName})}let l=[],c=[];if(this._configListener.config.openFileManager.v2Enabled){let y=this._openFileManager.getAllEditEvents();for(let v of y.values())l.push(...v);let C=this._openFileManager.getAllPathToIndexedBlob();c=[];for(let v of C.values())for(let b of v.values())c.push(b)}let u=this._blobsCheckpointManager,f=u!==void 0&&this._useCheckpointManagerContext,p=f&&this._validateCheckpointManagerContext,g;if(!f||p){let y=new Set(n);for(let[b,w,B,F,Q]of this._pathMap.pathsWithBlobNames())r.folderMap.get(b)?.has(B)||y.add(Q);let C=Array.from(y),v=this._blobNamesToBlobs(C);if(g=new ev(v,a,s,l,c,this._lastChatResponse,C),!f)return g}let A=u.getContextAdjusted(n,o);return g!==void 0&&(u.validateMatching(g.blobs,A)||this._clientMetricsReporter.report({client_metric:"blob_context_mismatch",value:1})),new ev(A,a,s,l,c,this._lastChatResponse)}getContextWithBlobNames(){let r=this.getContext();return r.blobNames!==void 0?r:{...r,blobNames:this._blobsCheckpointManager.expandBlobs(r.blobs)}}recordChatReponse(r){this._lastChatResponse={seq:this._sequenceGenerator.next(),text:r}}_blobNamesToBlobs(r){return this._blobsCheckpointManager===void 0?{checkpointId:void 0,addedBlobs:r,deletedBlobs:[]}:this._blobsCheckpointManager.blobsPayload(r)}handleUnknownBlobs(r,n){if(n.length===0)return;let i=new Set(n),s=new Array;for(let[o,a]of r.trackedPaths)if(o!==void 0)for(let[l,c]of a)i.has(c)&&(s.push([c,new qe(o,l)]),i.delete(c));for(let o of i){let a=this._pathMap.getAnyPathName(o);a!==void 0&&s.push([o,a])}this._unknownBlobHandler.enqueue(s),this._vcsWatcher?.handleUnknownBlobs(n)}handleUnknownCheckpoint(r,n){this._logger.info(`received checkpoint not found for request id ${r}`),this._blobsCheckpointManager.resetCheckpoint(),this._blobsCheckpointManager.updateBlob("")}notifyBlobMissing(r,n){let i=this._pathMap.reportMissing(n);if(i!==void 0){let o=this._getSourceFolder(i.rootPath);if(o!==void 0){o.diskFileManager.ingestPath(o.folderId,r.relPath);return}}let s=this._getSourceFolder(r.rootPath);s!==void 0&&this._openFileManager.handleMissingBlob(s.folderId,r.relPath,n)}_getSourceFolder(r){return this._trackedSourceFolders.get(r)?.sourceFolder}resolvePathName(r){let n=typeof r=="string"?r:xf(r);if(n===void 0)return;let i=this._resolveAbsPath(n);if(i===void 0)return;let[s,o]=i;return new qe(s.repoRoot,o)}getFolderRoot(r){let n=typeof r=="string"?r:xf(r);if(n===void 0)return;let i=this._resolveAbsPath(n);if(i===void 0)return;let[s,o]=i;return s.folderRoot}safeResolvePathName(r){let n=typeof r=="string"?r:xf(r);if(n===void 0)return;let i=this._resolveAbsPath(n);if(i===void 0)return new qe("",n);let[s,o]=i;return new qe(s.repoRoot,o)}_resolveAbsPath(r){for(let[n,i]of this._trackedSourceFolders){if(i.sourceFolder===void 0)continue;let s=i.sourceFolder.relativePathName(r);if(s!==void 0)return[i.sourceFolder,s]}}hasFile(r){let[n,i]=this._resolveAbsPath(r.absPath)??[void 0,void 0];return n===void 0||i===void 0?!1:this._pathMap.hasFile(n.folderId,r.relPath)}getBlobName(r){let[n,i]=this._resolveAbsPath(r.absPath)??[void 0,void 0];if(!(n===void 0||i===void 0))return this._openFileManager.getBlobName(n.folderId,r.relPath)??this._pathMap.getBlobName(n.folderId,r.relPath)}getAllPathNames(r){return this._pathMap.getAllPathNames(r)}getAllQualifiedPathInfos(r){return this._pathMap.getAllQualifiedPathInfos(r)}getAllQualifiedPathNames(r){return this._pathMap.getAllQualifiedPathNames(r)}getAllPathInfo(r){return this._pathMap.getAllPathInfo(r)}_handlePathFound(r,n,i,s){let o=r.folderId;this._pathMap.insert(o,n,i,s),i==="File"&&s.accepted&&r.diskFileManager.ingestPath(o,n)}_handlePathCreated(r,n,i,s){let o=r.folderId;if(this._pathMap.insert(o,n,i,s),!!s.accepted){if(i==="File")r.diskFileManager.ingestPath(r.folderId,n),this._emitFileNotification(o,n,"disk");else if(i==="Directory"){let a=r.tracker?.pathFilter;if(a===void 0)return;r.enqueueSerializedOperation(()=>this._handleDirectoryCreated(r,n,a))}}}_handleFileChanged(r,n,i){let s=r.folderId;this._pathMap.insert(s,n,"File",i),i.accepted&&(r.diskFileManager.ingestPath(s,n),this._emitFileNotification(s,n,"disk"))}_handlePathDeleted(r,n){let i=r.folderId,s=this._pathMap.getPathInfo(i,n);if(s===void 0)return;this._deletePath(r.folderId,n);let[o,a]=s;if(!a.accepted)return;o==="Directory"?this._handleDirectoryRemoved(r,n):o==="File"&&this._emitFileNotification(i,n,"disk");let l=new qe(r.folderRoot,n);this._fileDeletedEmitter.fire({folderId:i,relPath:n,qualifiedPathName:l})}_deletePath(r,n){this._pathMap.remove(r,n)}async _handleDirectoryCreated(r,n,i){r.logger.info(`Directory created: ${n}`);let s=wt.Uri.file(r.repoRoot),o=new JC(r.folderName,wt.Uri.joinPath(s,n),s,i);for await(let[a,l,c,u]of o)this._handlePathFound(r,l,c,u)}_handleDirectoryRemoved(r,n){r.logger.info(`Directory removed: ${n}`);let i=r.folderId,s=new Array;for(let[o]of this._pathMap.pathsInFolder(i))Yh(n,o)!==void 0&&s.push(o);for(let o of s)this._deletePath(i,o)}_notifyActiveEditorChanged(r){let n=r?.document,i=this._uriToPathInfo(n?.uri);if(i===void 0){this._openFileManager.loseFocus();return}let[s,o]=i,a=this._pathMap.getBlobName(s,o);this._openFileManager.addOpenedDocument({folderId:s,relPath:o,document:n},a)}_notifyTextDocumentChanged(r){let n=this._uriToPathInfo(r.document.uri);if(n===void 0)return;let[i,s]=n;this._openFileManager.handleChangedDocument({folderId:i,relPath:s,event:r}),this._emitFileNotification(i,s,"buffer"),this._textDocumentChangedEmitter.fire({folderId:i,relPath:s,event:r})}_notifyTextDocumentOpened(r){let n=this._uriToPathInfo(r.uri);if(n===void 0)return;let[i,s]=n;this._textDocumentOpenedEmitter.fire({folderId:i,relPath:s,document:r})}_notifyTextDocumentClosed(r){let n=this._uriToPathInfo(r.uri);if(n===void 0)return;let[i,s]=n;this._textDocumentClosedEmitter.fire({folderId:i,relPath:s,document:r})}_notifyNotebookDocumentChanged(r){let n=this._uriToPathInfo(r.notebook.uri);if(n===void 0)return;let[i,s]=n;this._openFileManager.handleChangedDocument({folderId:i,relPath:s,event:r}),this._emitFileNotification(i,s,"buffer")}_uriToPathInfo(r){if(r===void 0)return;let n=xf(r);if(n===void 0)return;let i=this._resolveAbsPath(n);if(i===void 0)return;let[s,o]=i;if(s.acceptsPath(o))return[s.folderId,o]}_notifyWillRenameFile(r){r.files.forEach(n=>{let i=this._resolveAbsPath(n.oldUri.fsPath),s=this._resolveAbsPath(n.newUri.fsPath);if(i===void 0||s===void 0)return;let[o,a]=i,[l,c]=s;if(o.folderId!==l.folderId){this._logger.debug(`[WARN] Rename should not cause a file to move between source folders.     old file: ${i[1]}     new file: ${s[1]}    old source folder: ${o.folderName}     new source folder: ${l.folderName}`);return}this._fileWillRenameEmitter.fire({folderId:o.folderId,oldRelPath:a,newRelPath:c,type:ef(n.oldUri.fsPath).type})})}_notifyDidRenameFile(r){r.files.forEach(n=>{let i=this._resolveAbsPath(n.oldUri.fsPath),s=this._resolveAbsPath(n.newUri.fsPath);if(i===void 0||s===void 0)return;let[o,a]=i,[l,c]=s,u=new qe(o.folderRoot,a),f=new qe(l.folderRoot,c);this._fileDidMoveEmitter.fire({oldQualifiedPathName:u,newQualifiedPathName:f})})}_notifyDocumentClosed(r){let n=r.uri,i=xf(n);if(i===void 0)return;let s=this._resolveAbsPath(i);if(s===void 0)return;let[o,a]=s;this._openFileManager.handleClosedDocument({folderId:o.folderId,relPath:a,document:r})}_emitFileNotification(r,n,i){this._fileChangedEmitter.fire({folderId:r,relPath:n,origin:i})}getTabSwitchEvents(){return this._tabWatcher?.getTabSwitchEvents()}getFileEditEvents(r=void 0){if(this._fileEditManager===void 0)return[];let n;if(r!==void 0){let i=this._trackedSourceFolders.get(r)?.sourceFolder;if(i===void 0)return[];n=i.folderId}else n=this._fileEditManager.findFolderIdWithMostRecentChanges();return n===-1?[]:this._fileEditManager.findEventsForFolder(n)}getMostRecentlyChangedFolderRoot(){if(this._fileEditManager===void 0)return;let r=this._fileEditManager.findFolderIdWithMostRecentChanges();if(r!==-1){for(let[n,i]of this._trackedSourceFolders)if(i.sourceFolder?.folderId===r)return n}}getBestFolderRoot(){return wt.window.activeTextEditor?this.getFolderRoot(wt.window.activeTextEditor?.document.uri):this.getMostRecentlyChangedFolderRoot()}findBestWorkspaceRootMatch(r){let n=FW(r).slice(0,-1),i="",s;for(let c of n){i=zt(i,c);let u=this.getAllQualifiedPathInfos(i).filter(f=>f.isAccepted);if(u.length===0)break;s=u[0]}if(s!==void 0)return s;let o=this.getMostRecentlyChangedFolderRoot(),a=o?this.getRepoRootForFolderRoot(o):void 0;if(a!==void 0)return{qualifiedPathName:new qe(a,""),fileType:"Directory",isAccepted:!1};let l=this.listSourceFolders().filter(c=>c.type===0&&c.syncingEnabled);if(l.length>0)return{qualifiedPathName:new qe(l[0].folderRoot,""),fileType:"Directory",isAccepted:!1}}getRepoRootForFolderRoot(r){return this._trackedSourceFolders.get(r)?.sourceFolder?.repoRoot}getVCSWatchedFolderIds(){return this?._vcsWatcher?.getWatchedFolderIds()??[]}async getVCSChange(){return this._vcsWatcher===void 0?{commits:[],workingDirectory:[]}:await this._vcsWatcher.getChanges()}getEnableCompletionFileEditEvents(){return this._featureFlagManager.currentFlags.enableCompletionFileEditEvents}async updateStatusTrace(r){r.addSection("Syncing permission parameters"),r.addValue("enableFileLimitsForSyncingPermission",this.enableFileLimitsForSyncingPermission),r.addValue("maxTrackableFiles",this.maxTrackableFiles),r.addValue("maxTrackableFilesWithoutPermission",this.maxTrackableFilesWithoutPermission),r.addValue("minUploadedFractionWithoutPermission",this.minUploadedFractionWithoutPermission),r.addValue("minUploadedFractionWithoutPermission as a percentage",this.minUploadedFractionWithoutPermission*100),r.addValue("verifyFolderIsSourceRepo",this.verifyFolderIsSourceRepo),r.addValue("refuseToSyncHomeDirectories",this.refuseToSyncHomeDirectories);let n=0;for(let[s,o]of this._registeredSourceFolders){if(n++,r.addSection(`Source folder: ${s}`),o.folderType===0?r.addValue("Folder type","vscode workspace folder"):r.addValue("Folder type","external folder"),o.containingFolderRoot!==void 0){r.addValue("Not tracked: nested folder. Containing folder",o.containingFolderRoot);continue}if(o.isHomeDir){r.addLine("Not tracked: home directory");continue}if(o.folderQualification!==void 0&&!o.folderQualification.trackable){r.addLine("Not tracked: folder is too large");continue}let a=Ka(o);if(a==="permission denied"){r.addLine("Not tracked: syncing permission denied");continue}if(a==="permission needed"){r.addLine("Not tracked: syncing permission not yet granted");continue}let l=this._trackedSourceFolders.get(s)?.sourceFolder;if(l===void 0){r.addLine("Tracking in progress");continue}r.addValue("Folder root",s),r.addValue("Repo root",l.repoRoot),r.addValue("Mtime cache dir",l.cacheDirPath),l.diskFileManager.itemsInFlight===0||r.addValue("Source folder startup","in progress"),r.addValue("Source folder startup","complete"),r.addValue("Tracked files",this._pathMap.trackedFileCount(l.folderId)),r.addValue("Syncing backlog size",l.diskFileManager.itemsInFlight)}if(n===0&&r.addSection("Source folders: no open source folders"),r.addSection("Workspace status"),!this.initialFoldersSynced)r.addValue("Workspace startup","in progress");else{r.addValue("Workspace startup","complete");let s=this.getContextWithBlobNames();r.addValue("Blobs in context",s.blobNames.length);let o=r.savePoint();try{let l=0;for(let c=0;c<s.blobNames.length;c+=1e3){r.rollback(o),r.addLine(`Verifying blob names... ${c} / ${s.blobNames.length} `),r.publish();let u=await this._apiServer.findMissing(s.blobNames.slice(c,c+1e3));l+=u.unknownBlobNames.length}r.rollback(o),r.addValue("Unknown blob names",l)}catch(a){r.rollback(o),r.addError(`Unable to verify blob names: ${a}`)}}n===0&&r.addLine("No source folders in workspace");let i=this._blobsCheckpointManager;if(i!==void 0){let s=i.getContext(),o=i.getCheckpointedBlobNames().length;r.addValue("Current checkpoint",s.checkpointId),r.addValue("Blobs in current checkpoint",o),r.addValue("Added blobs not in checkpoint",s.addedBlobs.length),r.addValue("Deleted blobs not in checkpoint",s.deletedBlobs.length)}}_reportSourceFolderStartup(r,n,i,s){let o=n.diskFileManager.metrics;r.info("Tracking enabled"),r.info(s.format()),r.info(o.format()),r.info(i.format())}_reportWorkspaceStartup(r){this._logger.info(`Workspace startup complete in ${r} ms`)}trackedSourceFolderNames(){return Array.from(this._registeredSourceFolders).filter(([r,n])=>Ka(n)==="trackable").map(([r,n])=>({folderRoot:r}))}getSourceFoldersReportDetails(){let r=this.listSourceFolders(),n=(0,$l.mapValues)((0,$l.groupBy)(r,f=>aC[f.type]),f=>f.length),i=(0,$l.mapValues)((0,$l.groupBy)(r,f=>aC[f.type]),f=>(0,$l.uniq)(f.map(p=>this.getRepoRootForFolderRoot(p.folderRoot))).length),s=f=>f.type===0||f.type===1,o=f=>f.type===2||f.type===3,a=f=>f.type===4,l=r.filter(f=>s(f)).map(f=>f.trackedFileCount),c=r.filter(f=>o(f)).length,u=(0,$l.mapValues)((0,$l.groupBy)(r.filter(f=>a(f)),f=>f.reason),f=>f.length);return{workspaceStorageUri:this._storageUriProvider.storageUri?.toString(),folderCountByType:n,repoRootCountByType:i,trackedFileCount:l,nestedFolderCount:c,untrackedCountByReason:u}}listSourceFolders(){if(this._syncingPermissionTracker.syncingPermissionDenied)return[];let r=this.syncingEnabledState==="disabled",n=new Array;for(let[i,s]of this._registeredSourceFolders){if(s.containingFolderRoot!==void 0){let f=s.folderType===0?2:3;n.push({type:f,name:s.folderName,syncingEnabled:!1,folderRoot:i,containingFolderRoot:s.containingFolderRoot});continue}if(s.isHomeDir){n.push({type:4,name:s.folderName,syncingEnabled:!1,folderRoot:i,reason:"home directory"});continue}if(s.folderQualification!==void 0&&!s.folderQualification.trackable){n.push({type:4,name:s.folderName,syncingEnabled:!1,folderRoot:i,reason:"too large"});continue}if(s.syncingPermission==="denied"){n.push({type:4,name:s.folderName,syncingEnabled:!1,folderRoot:i,reason:"permission not granted"});continue}let o=s.folderType===0?0:1,a=this._trackedSourceFolders.get(i)?.sourceFolder;if(!a?.initialEnumerationComplete){let f=!r&&s.syncingPermission==="granted";n.push({name:s.folderName,type:o,folderRoot:i,syncingEnabled:f,trackedFileCount:0,containsExcludedItems:!1,containsUnindexedItems:!1,enumerationState:0});continue}let l=!r&&s.syncingPermission==="granted",c=!1,u=!1;for(let[f,p,g,A]of this._pathMap.pathsInFolder(a.folderId))g||(c=!0),p==="File"&&g&&!A&&(u=!0);n.push({name:s.folderName,type:o,folderRoot:i,syncingEnabled:l,trackedFileCount:this._pathMap.trackedFileCount(a.folderId),containsExcludedItems:c,containsUnindexedItems:u,enumerationState:1})}return n}listChildren(r,n){if(this._syncingPermissionTracker.syncingPermissionDenied)return[];let s=this._trackedSourceFolders.get(r)?.sourceFolder;if(s===void 0)throw new tM;if(!s.initialEnumerationComplete)throw new rM;let o=zt(r,n),a=Fl(s.repoRoot,o),l=new Map,c=new Map,u=new Set,f=new Set,p=s.folderId;for(let[g,A,y,C,v]of this._pathMap.pathsInFolder(p)){let b=Yh(a,g);if(b===void 0)continue;let w=FW(b);if(!(w.length===0||w[0].length===0))if(w.length===1)l.set(w[0],{type:A,included:y,indexed:C,reason:v});else{let B=w[0];if(!y)u.add(B);else if(A==="File"){let F=c.get(B)??0;c.set(B,F+1),C||f.add(B)}}}return Array.from(l.entries()).map(([g,A])=>{let y={name:g,folderRoot:r,relPath:zt(n,g),included:A.included,reason:A.reason};return A.type==="File"?{...y,type:"File",indexed:A.indexed}:A.type==="Directory"?{...y,type:"Directory",trackedFileCount:c.get(g)??0,containsExcludedItems:u.has(g),containsUnindexedItems:f.has(g)}:{...y,type:"Other"}})}clearFileEdits(){this._fileEditManager?.clearAll({clearLastKnown:!1})}unitTestOnlyGetRepoRoot(r){let n=this._trackedSourceFolders.get(r);if(n!==void 0)return n.sourceFolder?.repoRoot}unitTestOnlySourceFolderBacklog(r){let n=this._trackedSourceFolders.get(r);if(n===void 0)return;let i=n.sourceFolder;if(i!==void 0&&i.initialEnumerationComplete)return i.diskFileManager.itemsInFlight}};var hIe=V(require("vscode"));var ZN=class extends X{constructor(r,n){super();this.actionsModel=r;this.workspaceManager=n;this.setInitializing(),this.addDisposable(n),this.checkWorkspaceSelected(),this.checkWorkspacePopulated()}checkWorkspaceSelected(){!!hIe.workspace.workspaceFolders?.length?this._setWorkspaceSelected():this._setWorkspaceNotSelected()}async checkWorkspacePopulated(){if(await this.workspaceManager.awaitInitialFoldersEnumerated(),this._anyFilesExist()){this._setWorkspacePopulated();return}for(this._setWorkspaceEmpty();!this._anyFilesExist();)await PA(this.workspaceManager.onDidChangeSyncingProgress);this._setWorkspacePopulated()}_anyFilesExist(){return!!this.workspaceManager.getSyncingProgress().some(n=>n.progress?.trackedFiles!==void 0&&n.progress.trackedFiles>0)}setInitializing(){this.actionsModel.setSystemStateStatus("workspacePopulated","initializing"),this.actionsModel.setSystemStateStatus("workspaceSelected","initializing")}_setWorkspaceEmpty(){this.actionsModel.setSystemStateStatus("workspacePopulated","incomplete")}_setWorkspacePopulated(){this.actionsModel.setSystemStateStatus("workspacePopulated","complete")}_setWorkspaceSelected(){this.actionsModel.setSystemStateStatus("workspaceSelected","complete")}_setWorkspaceNotSelected(){this.actionsModel.setSystemStateStatus("workspaceSelected","incomplete")}};var DA=class e extends X{constructor(r,n,i,s,o,a,l,c,u,f,p,g,A,y,C,v,b,w){super();this._extensionContext=r;this._globalState=n;this._augmentConfigListener=i;this._apiServer=s;this._auth=o;this._recentCompletions=a;this._recentInstructions=l;this._recentNextEditResults=c;this._recentChats=u;this._nextEditWebViewEvent=f;this._onExtensionUpdateEvent=p;this._mainPanelProvider=g;this._changeWebviewAppEvent=A;this._actionsModel=y;this._syncingEnabledTracker=C;this._chatExtensionEvent=v;this._onboardingSessionEventReporter=b;this._assetManager=w;if(this._statusBar=new JQ,r.subscriptions.push(this._statusBar),this.workTimer=new AQ,this.featureFlagManager=new vk({fetcher:this._fetchFeatureFlags.bind(this),refreshIntervalMSec:30*60*1e3},this._augmentConfigListener),this._completionAcceptanceReporter=new lQ(s,this._onboardingSessionEventReporter),this._codeEditReporter=new aQ(s),this._nextEditResolutionReporter=new fQ(s),this._nextEditSessionEventReporter=new hQ(s),this.nextEditConfigManager=new OM(this._augmentConfigListener,this.featureFlagManager,this._globalState),this._clientMetricsReporter=new oQ(s),this._completionTimelineReporter=new cQ(s),this._extensionEventReporter=new dQ(s),this.guidelinesWatcher=new lF(this._augmentConfigListener,this.featureFlagManager,this._clientMetricsReporter),this._toolUseRequestEventReporter=new qI,this.disposeOnDisable.push(this.guidelinesWatcher),this.addDisposable(new Ge.Disposable(()=>this.disable())),this._completionsModel=new V1(this,this._augmentConfigListener,this._clientMetricsReporter),!ea("1.96.0"))try{this._logger.info("Starting macCA"),(0,yIe.addToGlobalAgent)(),this._logger.info("macCa Done")}catch(B){this._logger.error("Exception loading mac-ca certs:",B)}}static augmentRootName=".augmentroot";static contentScheme="augment";static displayStatusUri=Ge.Uri.from({scheme:this.contentScheme,path:"Augment Extension Status"});static modelConfigBackoffMsecMax=3e4;keybindingWatcher=void 0;_completionServer=void 0;workspaceManager=void 0;syncingStatusReporter=void 0;fuzzyFsSearcher=void 0;fuzzySymbolSearcher=void 0;_toolsModel=void 0;get toolsModel(){return this._toolsModel}_toolConfigStore=void 0;get toolConfigStore(){return this._toolConfigStore}_agentCheckpointManager=void 0;guidelinesWatcher;_statusBar;_initState;workTimer;_enableCancel;_defaultModel;_modelInfo;_blobNameCalculator;_nextEditRequestManager;_suggestionManager;get modelInfo(){return this._modelInfo}userTier="unknown";_availableModels=[];_languages=[];get languages(){return this._languages}featureFlagManager;_onTextDocumentDidChange=new Ge.EventEmitter;_statusTrace;_completionDisposables=[];_completionAcceptanceReporter;_codeEditReporter;_nextEditResolutionReporter;_nextEditSessionEventReporter;nextEditConfigManager;_clientMetricsReporter;_completionTimelineReporter;_extensionEventReporter;_dataCollector;_editorNextEdit;_backgroundNextEdit;_globalNextEdit;_diagnosticsManager;_nextEditVSCodeToWebviewMessage=new Ge.EventEmitter;_openChatHintManager;enabled=!1;_enableState;disposeOnDisable=[];_inlineCompletionProvider;_completionsModel;_logger=j("AugmentExtension");_chatModel;_currentChatExtensionEventDisposable;_toolUseRequestEventReporter;get sessionId(){return this._apiServer.sessionId}get chatModel(){return this._chatModel}get editorNextEdit(){return this._editorNextEdit}get completionServer(){return this._completionServer}get completionsModel(){return this._completionsModel}get agentCheckpointManager(){return this._agentCheckpointManager}get enableInProgress(){return this._enableCancel!==void 0}get ready(){return this.enabled&&!this.enableInProgress}async enable(){if(this.enabled||this.enableInProgress)return;let r=new Ge.CancellationTokenSource;this._enableCancel=r;try{await this._enable(r.token)}catch(n){if(this._logger.info(`Unable to enable extension: ${$e(n)}`),process.env.JEST_WORKER_ID)throw n}finally{r.dispose(),this._enableCancel=void 0}}_syncLastEnabledExtensionVersion(){if(this._extensionContext.extensionMode===Ge.ExtensionMode.Development)return!1;let r=this._extensionContext.extension.packageJSON.version;return this._extensionVersion===r?!1:(this._globalState.update("lastEnabledExtensionVersion",r),this._onExtensionUpdateEvent.fire(),!0)}get _extensionVersion(){return this._globalState.get("lastEnabledExtensionVersion")||""}async _enable(r){if((0,pIe.assert)(!this.enabled),this._initState?.dispose(),this._enableState?.dispose(),this.disposeOnDisable.push(new pQ(this._clientMetricsReporter,this.workTimer,{periodMs:100,debugThresholdMs:50,infoThresholdMs:2e3})),this._auth.useOAuth){if(!await this._auth.getSession()){this._enableState=this._statusBar.setState(x_e);return}}else{if(!this._augmentConfigListener.config.apiToken){this._logger.warn("No API token is configured"),this._enableState=this._statusBar.setState(w_e);return}if(!this._augmentConfigListener.config.completionURL){this._logger.warn("No completion URL is configured"),this._enableState=this._statusBar.setState(I_e);return}}let n=this._statusBar.setState(S_e),i,s=new Map;try{if(i=await this._getModelConfig(r),i.models.length===0)throw new q1;this.userTier=i.userTier,Ge.commands.executeCommand("setContext","augment.userTier",this.userTier),this._defaultModel=i.defaultModel,this._languages=i.languages,this._availableModels=i.models.map(U=>`${U.name} - ${U.internalName}`);let ee=this._augmentConfigListener.config.modelName||i.defaultModel;if(this._modelInfo=i.models.find(U=>[U.name,U.internalName].includes(ee)||U.name===(0,AIe.createHash)("sha256").update(ee).digest("hex")),this._modelInfo===void 0)throw new U_(ee);this.featureFlagManager.update(i.featureFlags);for(let U of i.models)s.set(U.name,U);this._initState?.dispose()}catch($){if(Qr.isAPIErrorWithStatus($,We.unauthenticated)){this._auth.useOAuth?this._enableState=this._statusBar.setState(B_e):this._enableState=this._statusBar.setState(D_e);return}else if($ instanceof Vf){this._enableState=this._statusBar.setState(T_e);return}else if($ instanceof Ge.CancellationError)return;let ee=$e($);throw this._logger.error(`Failed to get model config: ${ee}`),this._initState=this._statusBar.setState(E8),$}finally{n.dispose()}this.featureFlagManager.currentFlags.enableViewTextDocument&&(this._logger.debug("Enabling viewTextDocument background file scheme"),this.disposeOnDisable.push(jme()));let o=new cN(this._extensionContext.workspaceState);this.disposeOnDisable.push(o),this._completionServer=new L1(this._apiServer,this._modelInfo.completionTimeoutMs,this._modelInfo.suggestedPrefixCharCount,this._modelInfo.suggestedSuffixCharCount);let a=this.featureFlagManager.currentFlags.maxUploadSizeBytes;this._blobNameCalculator=new rh(a),this.workspaceManager=new jN(this._actionsModel,new rN(this._extensionContext.workspaceState),o,this._extensionContext,this._apiServer,this._augmentConfigListener,this.featureFlagManager,this._clientMetricsReporter,this._completionServer,this._blobNameCalculator,a,this._syncingEnabledTracker,this._onboardingSessionEventReporter,i.languages),this.disposeOnDisable.push(this.workspaceManager);let l=(0,mIe.debounce)(()=>{let $=this.workspaceManager?.getSourceFoldersReportDetails();$!==void 0&&this._extensionEventReporter.reportSourceFolders($)},5e3);this.disposeOnDisable.push(this.workspaceManager.onDidEnumerateFolder(()=>l())),this.disposeOnDisable.push(this.workspaceManager.onDidChangeSourceFolders(()=>l())),this.syncingStatusReporter=new uN(this.featureFlagManager,this.workspaceManager),this.disposeOnDisable.push(this.syncingStatusReporter),this.disposeOnDisable.push(new iN(this._statusBar,this.syncingStatusReporter.onDidChangeSyncingStatus)),this.keybindingWatcher=new Lc(this._globalState),this.disposeOnDisable.push(this.keybindingWatcher),this._diagnosticsManager=new Z1,this.disposeOnDisable.push(this._diagnosticsManager);let c=new RA(this._statusBar);this.disposeOnDisable.push(c);let u=new MA;this.disposeOnDisable.push(c_e($=>{$.acceptedIdx>=0&&u.set(!0,$.document)})),this.disposeOnDisable.push(u);let f=new bQ;this.disposeOnDisable.push(f),this._suggestionManager=new WQ(this.workspaceManager,this._nextEditSessionEventReporter),this.disposeOnDisable.push(this._suggestionManager),this._nextEditRequestManager=new VQ(this._apiServer,this._augmentConfigListener,this.workspaceManager,this._diagnosticsManager,this._nextEditSessionEventReporter,this._clientMetricsReporter,this._blobNameCalculator,this._suggestionManager,this._recentNextEditResults,c,u,this.featureFlagManager),this.disposeOnDisable.push(this._nextEditRequestManager),this._editorNextEdit=new LQ(this._extensionContext,this.workspaceManager,this._nextEditSessionEventReporter,this.keybindingWatcher,this._augmentConfigListener,this._suggestionManager,this._nextEditRequestManager,this._globalState,this.nextEditConfigManager,f,$=>{this._nextEditWebViewEvent.fire({type:"next-edit-active-suggestion",data:$})}),this.disposeOnDisable.push(this._editorNextEdit),this._globalNextEdit=new qQ(this.workspaceManager,this._nextEditRequestManager,this._suggestionManager,this._augmentConfigListener,this._nextEditSessionEventReporter),this.disposeOnDisable.push(this._globalNextEdit);let p=[{text:this.featureFlagManager.currentFlags.enableInstructions?"Chat":"Open in Augment Chat",keyBindingId:$i.commandID}];this.featureFlagManager.currentFlags.enableInstructions&&p.push({text:"Instruct",keyBindingId:Zy.commandID}),this._openChatHintManager=new GC(this._augmentConfigListener,this._extensionContext,this.keybindingWatcher,this.featureFlagManager,p),this._openChatHintManager.enable(),this.disposeOnDisable.push(this._openChatHintManager),this.fuzzyFsSearcher=new sF(this._globalState,this.workspaceManager,this.syncingStatusReporter.onDidChangeSyncingStatus),this.fuzzySymbolSearcher=new oF(this._globalState,this._augmentConfigListener,this.fuzzyFsSearcher,this.workspaceManager),this.disposeOnDisable.push(this.fuzzyFsSearcher),this.disposeOnDisable.push(this.fuzzySymbolSearcher),await t0e(this._extensionContext.storageUri,this._logger);let g=()=>{let $=this._extensionContext.storageUri;if($)return Ge.Uri.joinPath($,"Augment-Memories").fsPath};H$(new qF(this.workspaceManager)),this.disposeOnDisable.push(new Ge.Disposable(()=>W$())),TY(new HF(this._apiServer,this.workspaceManager)),this.disposeOnDisable.push(new Ge.Disposable(()=>RY())),N$(this._assetManager),this.disposeOnDisable.push(new Ge.Disposable(()=>P$())),PY(new VF(this._extensionContext)),this.disposeOnDisable.push(new Ge.Disposable(()=>LY())),QY(new f_(this.featureFlagManager)),this.disposeOnDisable.push(new Ge.Disposable(()=>NY())),kY(new OF(this._extensionContext.extensionUri,this.workspaceManager,this._apiServer,this.keybindingWatcher,this.fuzzyFsSearcher,this.fuzzySymbolSearcher,this.workTimer)),this.disposeOnDisable.push(new Ge.Disposable(()=>MY())),this._agentCheckpointManager=new LI(new II,g,$=>Ge.workspace.onDidChangeTextDocument(ee=>{let U=this.workspaceManager?.safeResolvePathName(ee.document.uri);if(!U)return;let ge={document:{qualifiedPathName:U,getText:()=>ee.document.getText()},contentChanges:ee.contentChanges.map(Se=>({text:Se.text,range:Se.range?{start:{line:Se.range.start.line,character:Se.range.start.character},end:{line:Se.range.end.line,character:Se.range.end.character}}:void 0}))};$(ge)}),this.workspaceManager.onFileDeleted,this.workspaceManager.onFileDidMove),this.disposeOnDisable.push(this._agentCheckpointManager),this._toolsModel=new pB([],GCe(this._apiServer,this.workspaceManager,this._agentCheckpointManager,this.featureFlagManager,this._extensionContext.extensionUri),new mF(this._apiServer,this._augmentConfigListener),$=>{Ge.window.showErrorMessage("Failed to start the MCP server. "+JSON.stringify($))},new f_(this.featureFlagManager),this._agentCheckpointManager,()=>Uk(g),g,()=>this._augmentConfigListener.config.agent,()=>this._toolUseRequestEventReporter,{userAgent:"Augment-VSCode/1.0",unsupportedSidecarTools:new Set([zi.strReplaceEditor])}),UY(new CB(this._agentCheckpointManager,this._toolsModel)),this.disposeOnDisable.push(new Ge.Disposable(()=>OY())),this._toolConfigStore=new ZQ(this._globalState,this._toolsModel,()=>this._augmentConfigListener.config.mcpServers),this.disposeOnDisable.push(new Ge.Disposable(()=>{this._toolConfigStore=void 0})),this._toolConfigStore.updateSidecarMCPServers(),(async $=>{let ee=$.memoriesAbsPath;if(ee){let U=Ge.Uri.file(ee);try{await Py(U.fsPath)}catch{let ge=Qa(U.fsPath);await Tc(ge)||await kl(ge),await ku(U.fsPath,"")}}this.addDisposable(Ge.window.onDidChangeActiveTextEditor(async U=>{await i0e(U,g,this._globalState),await OW(U,g,this._globalState)})),this.addDisposable(Ge.workspace.onDidChangeTextDocument(U=>{o0e(U,Ge.window.activeTextEditor,g,this._globalState)})),this.addDisposable(n0e())})(this._toolsModel),this.addDisposable(this._augmentConfigListener.onDidChange(({newConfig:$,previousConfig:ee})=>{this._toolsModel&&((0,V6.default)($.mcpServers,ee.mcpServers)||this._toolConfigStore?.updateSidecarMCPServers(),$.agent.disableRetrievalTool!==ee.agent.disableRetrievalTool&&this._toolsModel.restartHosts())}));let y=new Ky(this._globalState,this._apiServer,this.workspaceManager,this._recentChats,this.fuzzySymbolSearcher,this._assetManager,this.featureFlagManager);this._chatModel=y;let C=new nN(this._globalState,this.syncingStatusReporter),v=new $Q,b=new S_(y,s,this._apiServer,this.workspaceManager,this.keybindingWatcher,this._augmentConfigListener,this._extensionContext.extensionUri,this.featureFlagManager,this._clientMetricsReporter,this._actionsModel,this._syncingEnabledTracker,C,this.syncingStatusReporter,this._onboardingSessionEventReporter,this.fuzzyFsSearcher,this.fuzzySymbolSearcher,this._toolsModel,v,this._agentCheckpointManager,this.guidelinesWatcher,this._assetManager,this._globalState,this.workTimer);this._currentChatExtensionEventDisposable=this._chatExtensionEvent.event(b.onChatExtensionMessage),this.disposeOnDisable.push(this._currentChatExtensionEventDisposable),this._mainPanelProvider.changeApp(b);let w=this.workspaceManager,B=this.keybindingWatcher;this.disposeOnDisable.push(this._changeWebviewAppEvent.event($=>{let ee,U;switch(this._currentChatExtensionEventDisposable?.dispose(),$){case"chat":ee=new S_(y,s,this._apiServer,w,B,this._augmentConfigListener,this._extensionContext.extensionUri,this.featureFlagManager,this._clientMetricsReporter,this._actionsModel,this._syncingEnabledTracker,C,this.syncingStatusReporter,this._onboardingSessionEventReporter,this.fuzzyFsSearcher,this.fuzzySymbolSearcher,this._toolsModel,v,this._agentCheckpointManager,this.guidelinesWatcher,this._assetManager,this._globalState,this.workTimer),this._mainPanelProvider.changeApp(ee),U=this._chatExtensionEvent.event(ee.onChatExtensionMessage),this._currentChatExtensionEventDisposable=U,this.disposeOnDisable.push(this._currentChatExtensionEventDisposable);break;case"sign-in":break;case"workspace-context":this._mainPanelProvider.changeApp(new sQ(w,this.featureFlagManager,this.workTimer));break;case"awaiting-syncing-permission":this._mainPanelProvider.changeApp(new rQ(this._actionsModel,this._apiServer,this._augmentConfigListener,this._syncingEnabledTracker,this._changeWebviewAppEvent,this.featureFlagManager,i.userTier));break;case"folder-selection":this._mainPanelProvider.changeApp(new nQ(this._onboardingSessionEventReporter));break;default:{let ge=$;throw new Error(`Unhandled app case: ${ge}`)}}})),this.disposeOnDisable.push(this._augmentConfigListener.onDidChange(this._checkInlineCompletionsEnabled.bind(this))),this._checkInlineCompletionsEnabled(),this.disposeOnDisable.push(new Ge.Disposable(()=>this._disableInlineCompletions.bind(this)));{let $,ee,U,ge,Se,N,se,z=(ne,Ke)=>{$?.dispose(),ee?.dispose(),U?.dispose(),Se?.dispose(),ge?.dispose(),N?.dispose(),se?.dispose(),ne.completions.enableAutomaticCompletions||(ee=this._statusBar.setState(R_e)),ne.enableDebugFeatures&&this.keybindingWatcher?(Se=new eQ(this.keybindingWatcher,this._inlineCompletionProvider),this.disposeOnDisable.push(Se)):ne.completions.enableAutomaticCompletions&&this.keybindingWatcher&&(ge=new X1(this.keybindingWatcher,this._inlineCompletionProvider),this.disposeOnDisable.push(ge)),N=Ge.languages.registerCodeActionsProvider("*",new NM),this.disposeOnDisable.push(N),ne.enableUpload||($=this._statusBar.setState(k_e));let It=ne.enableDataCollection||i.featureFlags.enableHindsight;this._dataCollector&&!It?(this._logger.debug("Disabling Hindsight Data"),this._dataCollector.dispose(),this._dataCollector=void 0):!this._dataCollector&&It&&this.workspaceManager!==void 0&&(this._logger.debug("Enabling Hindsight Data"),this._dataCollector=new J1(this._apiServer,this.workspaceManager,this._recentInstructions,this._recentCompletions,this._recentNextEditResults));let ye=M_(ne,this.featureFlagManager.currentFlags.vscodeNextEditMinVersion),Lt=Ke&&M_(Ke,this.featureFlagManager.currentFlags.vscodeNextEditMinVersion);if(ye&&!Lt)if(this.workspaceManager&&this.keybindingWatcher&&this._suggestionManager&&this._nextEditRequestManager)try{this._backgroundNextEdit=new EQ(this.workspaceManager,this._nextEditSessionEventReporter,this.keybindingWatcher,this._augmentConfigListener,this._suggestionManager,this._nextEditRequestManager,this._globalState,this.nextEditConfigManager,f),this.disposeOnDisable.push(this._backgroundNextEdit),this._nextEditSessionEventReporter.reportEventWithoutIds("initialization-success","validation-expected")}catch(Rt){this._logger.error("Error initializing background next edit: ",Rt),this._nextEditSessionEventReporter.reportEventWithoutIds("initialization-failure","error"),this._apiServer.reportError(null,"background_next_edit_initialization_failure",Rt instanceof Error?Rt.stack||Rt.message:String(Rt),[])}else{this._logger.error("Failed to enable background next edit generation"),this._nextEditSessionEventReporter.reportEventWithoutIds("initialization-skip","validation-unexpected");let Rt=[["this.workspaceManager",this.workspaceManager],["this.keybindingWatcher",this.keybindingWatcher],["this._suggestionManager",this._suggestionManager],["this._nextEditRequestManager",this._nextEditRequestManager]].map(de=>de.join("=")).join(", ");this._apiServer.reportError(null,"background_next_edit_initialization_failure",`Background next edit initialization failed because ${Rt}`,[])}else this._backgroundNextEdit&&!ye?(this._backgroundNextEdit.dispose(),this._backgroundNextEdit=void 0,this._nextEditSessionEventReporter.reportEventWithoutIds("disposed","validation-expected")):!ye&&!Lt&&this._nextEditSessionEventReporter.reportEventWithoutIds("initialization-skip","validation-expected");let Zt=Ul(ne,this.featureFlagManager.currentFlags.vscodeNextEditMinVersion??"");Zt&&Ke&&ne.nextEdit.enableBackgroundSuggestions!==Ke.nextEdit.enableBackgroundSuggestions&&this._nextEditSessionEventReporter.reportEventWithoutIds(ne.nextEdit.enableBackgroundSuggestions?"background-suggestions-enabled":"background-suggestions-disabled","unknown"),Zt&&Ke&&ne.nextEdit.highlightSuggestionsInTheEditor!==Ke.nextEdit.highlightSuggestionsInTheEditor&&this._nextEditSessionEventReporter.reportEventWithoutIds(ne.nextEdit.highlightSuggestionsInTheEditor?"highlights-enabled":"highlights-disabled","unknown")};this.disposeOnDisable.push(this._augmentConfigListener.onDidChange(ne=>{z(ne.newConfig,ne.previousConfig)})),z(this._augmentConfigListener.config)}{let $=[this._completionAcceptanceReporter,this._codeEditReporter,this._nextEditResolutionReporter,this._nextEditSessionEventReporter,this._onboardingSessionEventReporter,this._clientMetricsReporter,this._completionTimelineReporter,this._extensionEventReporter,this._toolUseRequestEventReporter];for(let ee of $)ee.enableUpload(),this.disposeOnDisable.push(ee);this.disposeOnDisable.push(new Ge.Disposable(()=>{WY(),HY()}))}this.disposeOnDisable.push(Ge.window.registerWebviewViewProvider("augment-next-edit",new tN(this._augmentConfigListener,this.featureFlagManager,$=>new jQ(this._extensionContext.extensionUri,$,$.webview,this._suggestionManager,this._globalNextEdit,this._editorNextEdit,this._nextEditSessionEventReporter,v,this._nextEditVSCodeToWebviewMessage,this.workTimer)),{webviewOptions:{retainContextWhenHidden:!0}})),this.enabled=!0,this._statusBar.setState(b_e),this.disposeOnDisable.push(new oN(this._statusBar,this._syncingEnabledTracker));let F=new gA(this._augmentConfigListener,this._actionsModel);this.addDisposable(F),F.checkAndUpdateState();let Q=new ZN(this._actionsModel,this.workspaceManager);this.disposeOnDisable.push(Q),this._syncLastEnabledExtensionVersion();let W=this._extensionContext.extension.packageJSON,Z="preRelease"in W&&W.preRelease===!0;this._logger.debug(`Is the extension in pre-release? ${Z}`),this._extensionEventReporter.reportConfiguration("configuration-snapshot",this._augmentConfigListener.config,this.featureFlagManager.currentFlags)}async _fetchFeatureFlags(r){try{return(await this._getModelConfig(r)).featureFlags}catch(n){this._logger.error("Failed to fetch feature flags: ",n);return}}updateModelInfo(r){if(!this._modelInfo)throw new Error("Model info not set");r.suggestedPrefixCharCount!==void 0&&(this._modelInfo.suggestedPrefixCharCount=r.suggestedPrefixCharCount),r.suggestedSuffixCharCount!==void 0&&(this._modelInfo.suggestedSuffixCharCount=r.suggestedSuffixCharCount),this._modelInfo.completionTimeoutMs=r.completionTimeoutMs}async _getModelConfig(r){let n=1e3,i,s=0,o=6,a=new RA(this._statusBar);try{for(;;){if(r.isCancellationRequested)throw new Ge.CancellationError;try{this._logger.info("Retrieving model config"),i=await this._apiServer.getModelConfig(),this._logger.info("Retrieved model config")}catch(l){if(this._logger.error("Failed to retrieve model config: ",l),Qr.isAPIErrorWithStatus(l,We.unauthenticated))throw l;if(l instanceof Vf)throw l;s++}if(r.isCancellationRequested)throw this._logger.info("Model config retrieval cancelled"),new Ge.CancellationError;if(i!==void 0)return this._logger.info("Returning model config"),i;s>=o&&a.setState(E8),this._logger.info(`Retrying model config retrieval in ${n} msec`),await ma(n),n=Math.min(n*2,e.modelConfigBackoffMsecMax)}}finally{a.dispose()}}disable(){for(this.enabled=!1;this.disposeOnDisable.length;)this.disposeOnDisable.pop().dispose();this._currentChatExtensionEventDisposable=void 0,this.reset()}reset(){this._enableCancel?.cancel(),this._enableCancel?.dispose(),this._enableCancel=void 0,this._statusBar.reset(),this.workspaceManager?.dispose(),this.workspaceManager=void 0,this._disableDataCollection()}_checkInlineCompletionsEnabled(r){r&&r.previousConfig.completions.addIntelliSenseSuggestions===r.newConfig.completions.addIntelliSenseSuggestions||this._enableInlineCompletions()}_enableInlineCompletions(){if(this._disableInlineCompletions(),this._logger.debug("Registering inline completions  provider."),this._inlineCompletionProvider=new K1(this._completionsModel,this._completionAcceptanceReporter,this._statusBar,this._augmentConfigListener,this._completionTimelineReporter),this._completionDisposables.push(this._inlineCompletionProvider),Uc(r=>{r&&this._recentCompletions.addItem(r)}),this._completionDisposables.push(Ge.languages.registerInlineCompletionItemProvider("*",this._inlineCompletionProvider)),this._augmentConfigListener.config.completions.addIntelliSenseSuggestions){this._logger.debug("Registering completion items provider.");let r=new TC(this._augmentConfigListener);this._completionDisposables.push(Ge.languages.registerCompletionItemProvider(TC.languageSelector,r,...TC.triggerCharacters))}}_disableInlineCompletions(){for(let r of this._completionDisposables)r.dispose();this._completionDisposables=[]}_disableDataCollection(){this._dataCollector?.dispose(),this._dataCollector=void 0}getRecencyInfo(){let r={},n=this.workspaceManager.getTabSwitchEvents();return n!==void 0&&(r.tab_switch_events=n.map(i=>({path:i.relPathName,file_blob_name:i.blobName}))),r}forceNextEditSuggestion(r){let n=Ge.window.activeTextEditor;if(!n||!this.workspaceManager)return;let i=this.workspaceManager.safeResolvePathName(n.document.uri);i&&(this._nextEditSessionEventReporter.reportEventWithoutIds("suggestion-forced",r??"command"),this._nextEditRequestManager?.enqueueRequest(i,"FORCED","CURSOR",td(n.selection)))}nextEditUpdate(r){this._globalNextEdit?.startGlobalQuery(r)}nextEditBackgroundSuggestionsEnabled(){return M_(this._augmentConfigListener.config,this.featureFlagManager.currentFlags.vscodeNextEditMinVersion??"")}noopClicked(){this._nextEditSessionEventReporter.reportEventWithoutIds("noop-clicked","command")}nextEditTogglePanelHorizontalSplit(r){this._nextEditVSCodeToWebviewMessage.fire({type:"next-edit-toggle-suggestion-tree"}),this._nextEditSessionEventReporter.reportEventWithoutIds("toggle-panel-horizontal-split",r??"command")}openNextEditPanel(r){this._nextEditSessionEventReporter.reportEventWithoutIds("panel-focus-executed",r??"command"),Ge.commands.executeCommand("augment-next-edit.focus"),this._nextEditVSCodeToWebviewMessage.fire({type:"next-edit-panel-focus"})}nextEditLearnMore(r){this._nextEditSessionEventReporter.reportEventWithoutIds("learn-more-clicked",r??"command"),Ge.env.openExternal(Ge.Uri.parse("https://docs.augmentcode.com/using-augment/next-edit"))}async updateStatusTrace(){this._statusTrace?.dispose();let r=new YQ(()=>this._onTextDocumentDidChange.fire(e.displayStatusUri));this._statusTrace=r;let n=0;if(this.enableInProgress){r.addLine("Augment extension is initializing"),r.publish();return}if(!this.enabled){r.addLine("Augment is not enabled in this workspace"),r.publish();return}r.addSection("Extension version");let i=Ge.extensions.getExtension("augment.vscode-augment");i?r.addValue("Extension version",i.packageJSON.version):r.addLine("Cannot retrieve extension version"),r.addSection("Session ID"),r.addValue("Session ID",this._apiServer.sessionId),r.addSection("Recent Completion Requests (oldest to newest)");let s=this._recentCompletions.items.sort((l,c)=>l.occuredAt.getTime()-c.occuredAt.getTime()).slice(0,10);for(let{requestId:l}of s)r.addLine(`${l}`);s.length===0&&r.addLine("No recent completion requests"),r.addSection("Recent Instruction Requests (oldest to newest)");for(let{requestId:l}of this._recentInstructions.items)r.addLine(`${l}`);this._recentInstructions.items.length===0&&r.addLine("No recent instruction requests"),r.addSection("Recent Chat Requests (oldest to newest)");for(let{requestId:l}of this._recentChats.items)r.addLine(`${l}`);this._recentChats.items.length===0&&r.addLine("No recent chat requests"),r.addSection("Extension configuration");let o=this._augmentConfigListener.config;r.addObject(o),r.addValue("Using API token",!this._auth.useOAuth);let a="";if(this._auth.useOAuth){let l=await this._auth.getSession();r.addValue("Tenant URL",l?.tenantURL),a=l?.tenantURL||""}else a=o.completionURL;if(!this.ready){r.addLine("Augment extension is initializing"),r.publish();return}r.addSection("Back-end Configuration"),r.addValue("MaxUploadSizeBytes",this.featureFlagManager.currentFlags.maxUploadSizeBytes),r.addValue("enableCompletionFileEditEvents",this.featureFlagManager.currentFlags.enableCompletionFileEditEvents),r.addSection("Supported languages (Augment name / VSCode name):");for(let l of this._languages)r.addLine(`${l.name} / ${l.vscodeName}`);r.addSection("Available Models");for(let l of this._availableModels){let c=this._defaultModel&&l.startsWith(this._defaultModel),u=!o.modelName&&c||l===o.modelName,f=l+(c?" (default)":"")+(u?" (current)":"");r.addLine(f)}this._availableModels.length===0&&r.addLine("No models available"),r.addSection("Current Model"),n=r.savePoint(),r.addLine("Querying current model"),r.addLine("(in progress...)");try{r.publish(),r.rollback(n),o.modelName||r.addLine("(Using default model)"),r.addObject(this.modelInfo)}catch(l){r.rollback(n),l instanceof U_?r.addLine(`Model "${o.modelName}" not known.`):r.addError(`Unable to query info about model "${o.modelName}": ${$e(l)}`)}if(r.addSection("Blob upload"),o.enableUpload?r.addLine("Blob upload enabled in configuration settings"):r.addLine("Blob upload disabled in configuration settings"),this.workspaceManager!==void 0&&await this.workspaceManager.updateStatusTrace(r),a!==""){r.addSection("Completion status"),r.addLine(`Attempting completion from ${a}`);let l=this._apiServer.createRequestId();r.addValue("Request ID",l),n=r.savePoint(),r.addLine("(in progress...)");try{r.publish();let c=Date.now(),u=await this._apiServer.complete(l,"this is the prefix","this is the suffix","/this/is/the/path",void 0,{prefixBegin:0,cursorPosition:0,suffixEnd:0},"python",{checkpointId:void 0,addedBlobs:[],deletedBlobs:[]},[]);r.rollback(n),r.addLine(`Response received in ${Date.now()-c} ms`),u.completionItems.length===0?r.addLine("No completion received"):r.addLine(`${u.completionItems.length} completion(s) received`)}catch(c){r.rollback(n),r.addError(`Completion request failed: ${c}`)}}r.addSection("Feature Flags"),r.addObject(this.featureFlagManager.currentFlags),r.publish()}async provideTextDocumentContent(r){return r.toString()===e.displayStatusUri.toString()?this._statusTrace===void 0?"Internal error. Cannot get Augment extension status.":this._statusTrace.content:""}get onDidChange(){return this._onTextDocumentDidChange.event}clearFileEdits(){this.workspaceManager?.clearFileEdits()}};function CIe(e){let t=e.get("sessionId");return(t===void 0||!M5(t))&&(t=Mh(),e.update("sessionId",t)),t}function uvt(e){let t=j("activate()");t.debug("======== Activating extension ========");let r;function n(z){z.enable()}function i(z){z.disable()}function s(){r&&(t.debug("======== Deactivating extension ========"),i(r)),r=void 0}function o(){t.info("======== Reloading extension ========"),i(r),n(r)}e.subscriptions.push(new Ge.Disposable(()=>{s()})),e.subscriptions.push(Ge.window.registerUriHandler({handleUri(z){if(z.authority.toLowerCase()!==e.extension.id.toLowerCase()){t.warn(`Ignoring URI ${z.toString()}`);return}switch(z.path){case U.authRedirectURI.path:U.handleAuthURI(z);break;default:t.error(`Unhandled URI ${Ge.Uri.from({scheme:z.scheme,authority:z.authority,path:z.path}).toString()}`)}}}));let a=`${XN.default.platform()}; ${XN.default.arch()}; ${XN.default.release()}`,l=`${e.extension.id}/${e.extension.packageJSON.version} (${a}) ${Ge.env.uriScheme}/${Ge.version}`,c=new Nk(e),u=CIe(c),f=new Sk;f.migrateLegacyConfig();let p=new Tk(e,f);e.subscriptions.push(p);let g=new aN;e.subscriptions.push(g);let A=new Ik(f,p,u,l,global.fetch),y=new z1,C=new Ag(10),v=new Ag(10),b=new Ag(10),w=new Ge.EventEmitter,B=new Ge.EventEmitter,F=new Ge.EventEmitter,Q=new Ge.EventEmitter,W=new yF(e),Z=new eN(e.extensionUri);Z.onVisibilityChange(z=>{z||hC.currentPanel?.dispose()});let $=new tQ(c);e.subscriptions.push($);let ee=new gQ(A),U=new kk(e,f,A,p,ee),ge=new iQ(A,f,U,$);function Se(z){e:for(let ne of z)switch(ne.name){case"UserShouldSignIn":{Z.changeApp(ge),N();break e}case"WorkspaceNotSelected":{$.isSystemStateComplete("authenticated")&&(F.fire("folder-selection"),N());break e}case"ShouldDisableCopilot":case"ShouldDisableCodeium":case"SyncingPermissionNeeded":case"uploadingHomeDir":case"workspaceTooLarge":N();break e}($.isDerivedStateSatisfied("SyncingPermissionNeeded")||$.isDerivedStateSatisfied("uploadingHomeDir")||$.isDerivedStateSatisfied("workspaceTooLarge"))&&F.fire("awaiting-syncing-permission")}e.subscriptions.push(p.onDidChangeSession(()=>{o()})),e.subscriptions.push(new Bk($,p,f)),e.subscriptions.push(Ge.window.registerWebviewViewProvider("augment-chat",Z,{webviewOptions:{retainContextWhenHidden:!0}})),r=new DA(e,c,f,A,p,y,C,b,v,w,Q,Z,F,$,g,B,ee,W);function N(){Z.isVisible()||Ge.commands.executeCommand($i.commandID)}e.subscriptions.push($.onDerivedStatesSatisfied(Se)),Se($.satisfiedStates),f.onDidChange(z=>{z.newConfig.enableDebugFeatures,z.previousConfig.enableDebugFeatures}),e.subscriptions.push(f.onDidChange(z=>{let ne=!1,Ke=["apiToken","completionURL","oauth","modelName"];for(let It of Ke)if(!(0,V6.default)(z.previousConfig[It],z.newConfig[It])){ne=!0;break}ne&&(t.info("Reloading extension due to config change"),o())})),e.subscriptions.push(Ge.workspace.registerTextDocumentContentProvider(DA.contentScheme,r)),vIe(r,f,e);let se=A_e(e,r,f,p,U,A,y,C,b,F,B,g,c);e.subscriptions.push(se),e.subscriptions.push(Q),n(r)}function gIe(e){for(let[t,r]of Object.entries(e))Ge.commands.executeCommand("setContext",t,r)}function vIe(e,t,r){let n=()=>{let o=t.config;gIe({"vscode-augment.enableDebugFeatures":o.enableDebugFeatures,"vscode-augment.enableReviewerWorkflows":o.enableReviewerWorkflows,"vscode-augment.enableNextEdit":Ul(t.config,e?.featureFlagManager.currentFlags.vscodeNextEditMinVersion??""),"vscode-augment.enableNextEditBackgroundSuggestions":M_(t.config,e?.featureFlagManager.currentFlags.vscodeNextEditMinVersion??""),"vscode-augment.nextEdit.enableGotoHinting":t.config.nextEdit.enableGotoHinting??!1,"vscode-augment.nextEdit.enablePanel":e.nextEditConfigManager.config.enablePanel})};n(),r.subscriptions.push(t.onDidChange(n));let i=["enableWorkspaceManagerUi","enableSmartPaste","enableSmartPasteMinVersion","enableInstructions","vscodeSourcesMinVersion","vscodeChatHintDecorationMinVersion","vscodeEnableCpuProfile","vscodeNextEditMinVersion"],s=()=>{if(!e)return;let o=e.featureFlagManager.currentFlags;gIe({"vscode-augment.workspace-manager-ui.enabled":o.enableWorkspaceManagerUi,"vscode-augment.internal-new-instructions.enabled":o.enableInstructions,"vscode-augment.internal-dv.enabled":wr(o.enableSmartPasteMinVersion)||o.enableInstructions,"vscode-augment.sources-enabled":wr(o.vscodeSourcesMinVersion)??!1,"vscode-augment.chat-hint.decoration":wr(o.vscodeChatHintDecorationMinVersion)??!1,"vscode-augment.cpu-profile.enabled":o.vscodeEnableCpuProfile,"vscode-augment.nextEdit.enablePanel":e.nextEditConfigManager.config.enablePanel})};s(),r.subscriptions.push(e.featureFlagManager.subscribe(i,s)),r.subscriptions.push(e.featureFlagManager.subscribe(i,n))}var dvt={setupContextKeySync:vIe};0&&(module.exports={AugmentExtension,_exportedForTesting,activate,getSessionId});
/*! Bundled license information:

lodash/lodash.js:
  (**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

@mixmark-io/domino/lib/style_parser.js:
  (**
   * @license
   * Copyright Google LLC All Rights Reserved.
   *
   * Use of this source code is governed by an MIT-style license that can be
   * found in the LICENSE file at https://angular.io/license
   *)

undici/lib/web/fetch/body.js:
  (*! formdata-polyfill. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> *)

undici/lib/web/websocket/frame.js:
  (*! ws. MIT License. Einar Otto Stangvik <einaros@gmail.com> *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
*/
